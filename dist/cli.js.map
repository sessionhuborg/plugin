{
  "version": 3,
  "sources": ["../node_modules/.pnpm/commander@11.1.0/node_modules/commander/lib/error.js", "../node_modules/.pnpm/commander@11.1.0/node_modules/commander/lib/argument.js", "../node_modules/.pnpm/commander@11.1.0/node_modules/commander/lib/help.js", "../node_modules/.pnpm/commander@11.1.0/node_modules/commander/lib/option.js", "../node_modules/.pnpm/commander@11.1.0/node_modules/commander/lib/suggestSimilar.js", "../node_modules/.pnpm/commander@11.1.0/node_modules/commander/lib/command.js", "../node_modules/.pnpm/commander@11.1.0/node_modules/commander/index.js", "../node_modules/.pnpm/@grpc+grpc-js@1.14.3/node_modules/@grpc/grpc-js/src/constants.ts", "../node_modules/.pnpm/@grpc+grpc-js@1.14.3/node_modules/@grpc/grpc-js/package.json", "../node_modules/.pnpm/@grpc+grpc-js@1.14.3/node_modules/@grpc/grpc-js/src/logging.ts", "../node_modules/.pnpm/@grpc+grpc-js@1.14.3/node_modules/@grpc/grpc-js/src/error.ts", "../node_modules/.pnpm/@grpc+grpc-js@1.14.3/node_modules/@grpc/grpc-js/src/metadata.ts", "../node_modules/.pnpm/@grpc+grpc-js@1.14.3/node_modules/@grpc/grpc-js/src/call-credentials.ts", "../node_modules/.pnpm/@grpc+grpc-js@1.14.3/node_modules/@grpc/grpc-js/src/tls-helpers.ts", "../node_modules/.pnpm/@grpc+grpc-js@1.14.3/node_modules/@grpc/grpc-js/src/uri-parser.ts", "../node_modules/.pnpm/@grpc+grpc-js@1.14.3/node_modules/@grpc/grpc-js/src/resolver.ts", "../node_modules/.pnpm/@grpc+grpc-js@1.14.3/node_modules/@grpc/grpc-js/src/channel-credentials.ts", "../node_modules/.pnpm/@grpc+grpc-js@1.14.3/node_modules/@grpc/grpc-js/src/load-balancer.ts", "../node_modules/.pnpm/@grpc+grpc-js@1.14.3/node_modules/@grpc/grpc-js/src/service-config.ts", "../node_modules/.pnpm/@grpc+grpc-js@1.14.3/node_modules/@grpc/grpc-js/src/connectivity-state.ts", "../node_modules/.pnpm/@grpc+grpc-js@1.14.3/node_modules/@grpc/grpc-js/src/picker.ts", "../node_modules/.pnpm/@grpc+grpc-js@1.14.3/node_modules/@grpc/grpc-js/src/backoff-timeout.ts", "../node_modules/.pnpm/@grpc+grpc-js@1.14.3/node_modules/@grpc/grpc-js/src/load-balancer-child-handler.ts", "../node_modules/.pnpm/@grpc+grpc-js@1.14.3/node_modules/@grpc/grpc-js/src/resolving-load-balancer.ts", "../node_modules/.pnpm/@grpc+grpc-js@1.14.3/node_modules/@grpc/grpc-js/src/channel-options.ts", "../node_modules/.pnpm/@grpc+grpc-js@1.14.3/node_modules/@grpc/grpc-js/src/subchannel-address.ts", "../node_modules/.pnpm/@js-sdsl+ordered-map@4.4.2/node_modules/@js-sdsl/ordered-map/dist/cjs/index.js", "../node_modules/.pnpm/@js-sdsl+ordered-map@4.4.2/node_modules/@js-sdsl/.build-data/copied-source/src/container/TreeContainer/Base/TreeNode.ts", "../node_modules/.pnpm/@js-sdsl+ordered-map@4.4.2/node_modules/@js-sdsl/.build-data/copied-source/src/container/ContainerBase/index.ts", "../node_modules/.pnpm/@js-sdsl+ordered-map@4.4.2/node_modules/@js-sdsl/.build-data/copied-source/src/utils/throwError.ts", "../node_modules/.pnpm/@js-sdsl+ordered-map@4.4.2/node_modules/@js-sdsl/.build-data/copied-source/src/container/TreeContainer/Base/index.ts", "../node_modules/.pnpm/@js-sdsl+ordered-map@4.4.2/node_modules/@js-sdsl/.build-data/copied-source/src/container/TreeContainer/Base/TreeIterator.ts", "../node_modules/.pnpm/@js-sdsl+ordered-map@4.4.2/node_modules/@js-sdsl/.build-data/copied-source/src/container/TreeContainer/OrderedMap.ts", "../node_modules/.pnpm/@grpc+grpc-js@1.14.3/node_modules/@grpc/grpc-js/src/admin.ts", "../node_modules/.pnpm/@grpc+grpc-js@1.14.3/node_modules/@grpc/grpc-js/src/call.ts", "../node_modules/.pnpm/@grpc+grpc-js@1.14.3/node_modules/@grpc/grpc-js/src/call-interface.ts", "../node_modules/.pnpm/@grpc+grpc-js@1.14.3/node_modules/@grpc/grpc-js/src/client-interceptors.ts", "../node_modules/.pnpm/@grpc+grpc-js@1.14.3/node_modules/@grpc/grpc-js/src/client.ts", "../node_modules/.pnpm/@grpc+grpc-js@1.14.3/node_modules/@grpc/grpc-js/src/make-client.ts", "../node_modules/.pnpm/lodash.camelcase@4.3.0/node_modules/lodash.camelcase/index.js", "../node_modules/.pnpm/@protobufjs+aspromise@1.1.2/node_modules/@protobufjs/aspromise/index.js", "../node_modules/.pnpm/@protobufjs+base64@1.1.2/node_modules/@protobufjs/base64/index.js", "../node_modules/.pnpm/@protobufjs+eventemitter@1.1.0/node_modules/@protobufjs/eventemitter/index.js", "../node_modules/.pnpm/@protobufjs+float@1.0.2/node_modules/@protobufjs/float/index.js", "../node_modules/.pnpm/@protobufjs+inquire@1.1.0/node_modules/@protobufjs/inquire/index.js", "../node_modules/.pnpm/@protobufjs+utf8@1.1.0/node_modules/@protobufjs/utf8/index.js", "../node_modules/.pnpm/@protobufjs+pool@1.1.0/node_modules/@protobufjs/pool/index.js", "../node_modules/.pnpm/protobufjs@7.5.4/node_modules/protobufjs/src/util/longbits.js", "../node_modules/.pnpm/protobufjs@7.5.4/node_modules/protobufjs/src/util/minimal.js", "../node_modules/.pnpm/protobufjs@7.5.4/node_modules/protobufjs/src/writer.js", "../node_modules/.pnpm/protobufjs@7.5.4/node_modules/protobufjs/src/writer_buffer.js", "../node_modules/.pnpm/protobufjs@7.5.4/node_modules/protobufjs/src/reader.js", "../node_modules/.pnpm/protobufjs@7.5.4/node_modules/protobufjs/src/reader_buffer.js", "../node_modules/.pnpm/protobufjs@7.5.4/node_modules/protobufjs/src/rpc/service.js", "../node_modules/.pnpm/protobufjs@7.5.4/node_modules/protobufjs/src/rpc.js", "../node_modules/.pnpm/protobufjs@7.5.4/node_modules/protobufjs/src/roots.js", "../node_modules/.pnpm/protobufjs@7.5.4/node_modules/protobufjs/src/index-minimal.js", "../node_modules/.pnpm/@protobufjs+codegen@2.0.4/node_modules/@protobufjs/codegen/index.js", "../node_modules/.pnpm/@protobufjs+fetch@1.1.0/node_modules/@protobufjs/fetch/index.js", "../node_modules/.pnpm/@protobufjs+path@1.1.2/node_modules/@protobufjs/path/index.js", "../node_modules/.pnpm/protobufjs@7.5.4/node_modules/protobufjs/src/namespace.js", "../node_modules/.pnpm/protobufjs@7.5.4/node_modules/protobufjs/src/mapfield.js", "../node_modules/.pnpm/protobufjs@7.5.4/node_modules/protobufjs/src/method.js", "../node_modules/.pnpm/protobufjs@7.5.4/node_modules/protobufjs/src/service.js", "../node_modules/.pnpm/protobufjs@7.5.4/node_modules/protobufjs/src/message.js", "../node_modules/.pnpm/protobufjs@7.5.4/node_modules/protobufjs/src/decoder.js", "../node_modules/.pnpm/protobufjs@7.5.4/node_modules/protobufjs/src/verifier.js", "../node_modules/.pnpm/protobufjs@7.5.4/node_modules/protobufjs/src/converter.js", "../node_modules/.pnpm/protobufjs@7.5.4/node_modules/protobufjs/src/wrappers.js", "../node_modules/.pnpm/protobufjs@7.5.4/node_modules/protobufjs/src/type.js", "../node_modules/.pnpm/protobufjs@7.5.4/node_modules/protobufjs/src/root.js", "../node_modules/.pnpm/protobufjs@7.5.4/node_modules/protobufjs/src/util.js", "../node_modules/.pnpm/protobufjs@7.5.4/node_modules/protobufjs/src/types.js", "../node_modules/.pnpm/protobufjs@7.5.4/node_modules/protobufjs/src/field.js", "../node_modules/.pnpm/protobufjs@7.5.4/node_modules/protobufjs/src/oneof.js", "../node_modules/.pnpm/protobufjs@7.5.4/node_modules/protobufjs/src/object.js", "../node_modules/.pnpm/protobufjs@7.5.4/node_modules/protobufjs/src/enum.js", "../node_modules/.pnpm/protobufjs@7.5.4/node_modules/protobufjs/src/encoder.js", "../node_modules/.pnpm/protobufjs@7.5.4/node_modules/protobufjs/src/index-light.js", "../node_modules/.pnpm/protobufjs@7.5.4/node_modules/protobufjs/src/tokenize.js", "../node_modules/.pnpm/protobufjs@7.5.4/node_modules/protobufjs/src/parse.js", "../node_modules/.pnpm/protobufjs@7.5.4/node_modules/protobufjs/src/common.js", "../node_modules/.pnpm/protobufjs@7.5.4/node_modules/protobufjs/src/index.js", "../node_modules/.pnpm/protobufjs@7.5.4/node_modules/protobufjs/index.js", "../node_modules/.pnpm/protobufjs@7.5.4/node_modules/protobufjs/google/protobuf/descriptor.json", "../node_modules/.pnpm/protobufjs@7.5.4/node_modules/protobufjs/ext/descriptor/index.js", "../node_modules/.pnpm/protobufjs@7.5.4/node_modules/protobufjs/google/protobuf/api.json", "../node_modules/.pnpm/protobufjs@7.5.4/node_modules/protobufjs/google/protobuf/source_context.json", "../node_modules/.pnpm/protobufjs@7.5.4/node_modules/protobufjs/google/protobuf/type.json", "../node_modules/.pnpm/@grpc+proto-loader@0.8.0/node_modules/@grpc/proto-loader/src/util.ts", "../node_modules/.pnpm/long@5.3.2/node_modules/long/umd/index.js", "../node_modules/.pnpm/@grpc+proto-loader@0.8.0/node_modules/@grpc/proto-loader/src/index.ts", "../node_modules/.pnpm/@grpc+grpc-js@1.14.3/node_modules/@grpc/grpc-js/src/channelz.ts", "../node_modules/.pnpm/@grpc+grpc-js@1.14.3/node_modules/@grpc/grpc-js/src/call-number.ts", "../node_modules/.pnpm/@grpc+grpc-js@1.14.3/node_modules/@grpc/grpc-js/src/compression-algorithms.ts", "../node_modules/.pnpm/@grpc+grpc-js@1.14.3/node_modules/@grpc/grpc-js/src/filter.ts", "../node_modules/.pnpm/@grpc+grpc-js@1.14.3/node_modules/@grpc/grpc-js/src/compression-filter.ts", "../node_modules/.pnpm/@grpc+grpc-js@1.14.3/node_modules/@grpc/grpc-js/src/control-plane-status.ts", "../node_modules/.pnpm/@grpc+grpc-js@1.14.3/node_modules/@grpc/grpc-js/src/deadline.ts", "../node_modules/.pnpm/@grpc+grpc-js@1.14.3/node_modules/@grpc/grpc-js/src/filter-stack.ts", "../node_modules/.pnpm/@grpc+grpc-js@1.14.3/node_modules/@grpc/grpc-js/src/single-subchannel-channel.ts", "../node_modules/.pnpm/@grpc+grpc-js@1.14.3/node_modules/@grpc/grpc-js/src/subchannel.ts", "../node_modules/.pnpm/@grpc+grpc-js@1.14.3/node_modules/@grpc/grpc-js/src/environment.ts", "../node_modules/.pnpm/@grpc+grpc-js@1.14.3/node_modules/@grpc/grpc-js/src/resolver-dns.ts", "../node_modules/.pnpm/@grpc+grpc-js@1.14.3/node_modules/@grpc/grpc-js/src/http_proxy.ts", "../node_modules/.pnpm/@grpc+grpc-js@1.14.3/node_modules/@grpc/grpc-js/src/stream-decoder.ts", "../node_modules/.pnpm/@grpc+grpc-js@1.14.3/node_modules/@grpc/grpc-js/src/subchannel-call.ts", "../node_modules/.pnpm/@grpc+grpc-js@1.14.3/node_modules/@grpc/grpc-js/src/transport.ts", "../node_modules/.pnpm/@grpc+grpc-js@1.14.3/node_modules/@grpc/grpc-js/src/subchannel-pool.ts", "../node_modules/.pnpm/@grpc+grpc-js@1.14.3/node_modules/@grpc/grpc-js/src/load-balancing-call.ts", "../node_modules/.pnpm/@grpc+grpc-js@1.14.3/node_modules/@grpc/grpc-js/src/resolving-call.ts", "../node_modules/.pnpm/@grpc+grpc-js@1.14.3/node_modules/@grpc/grpc-js/src/retrying-call.ts", "../node_modules/.pnpm/@grpc+grpc-js@1.14.3/node_modules/@grpc/grpc-js/src/subchannel-interface.ts", "../node_modules/.pnpm/@grpc+grpc-js@1.14.3/node_modules/@grpc/grpc-js/src/internal-channel.ts", "../node_modules/.pnpm/@grpc+grpc-js@1.14.3/node_modules/@grpc/grpc-js/src/channel.ts", "../node_modules/.pnpm/@grpc+grpc-js@1.14.3/node_modules/@grpc/grpc-js/src/server-call.ts", "../node_modules/.pnpm/@grpc+grpc-js@1.14.3/node_modules/@grpc/grpc-js/src/server-credentials.ts", "../node_modules/.pnpm/@grpc+grpc-js@1.14.3/node_modules/@grpc/grpc-js/src/duration.ts", "../node_modules/.pnpm/@grpc+grpc-js@1.14.3/node_modules/@grpc/grpc-js/src/orca.ts", "../node_modules/.pnpm/@grpc+grpc-js@1.14.3/node_modules/@grpc/grpc-js/src/server-interceptors.ts", "../node_modules/.pnpm/@grpc+grpc-js@1.14.3/node_modules/@grpc/grpc-js/src/server.ts", "../node_modules/.pnpm/@grpc+grpc-js@1.14.3/node_modules/@grpc/grpc-js/src/status-builder.ts", "../node_modules/.pnpm/@grpc+grpc-js@1.14.3/node_modules/@grpc/grpc-js/src/load-balancer-pick-first.ts", "../node_modules/.pnpm/@grpc+grpc-js@1.14.3/node_modules/@grpc/grpc-js/src/certificate-provider.ts", "../node_modules/.pnpm/@grpc+grpc-js@1.14.3/node_modules/@grpc/grpc-js/src/experimental.ts", "../node_modules/.pnpm/@grpc+grpc-js@1.14.3/node_modules/@grpc/grpc-js/src/resolver-uds.ts", "../node_modules/.pnpm/@grpc+grpc-js@1.14.3/node_modules/@grpc/grpc-js/src/resolver-ip.ts", "../node_modules/.pnpm/@grpc+grpc-js@1.14.3/node_modules/@grpc/grpc-js/src/load-balancer-round-robin.ts", "../node_modules/.pnpm/@grpc+grpc-js@1.14.3/node_modules/@grpc/grpc-js/src/load-balancer-outlier-detection.ts", "../node_modules/.pnpm/@grpc+grpc-js@1.14.3/node_modules/@grpc/grpc-js/src/priority-queue.ts", "../node_modules/.pnpm/@grpc+grpc-js@1.14.3/node_modules/@grpc/grpc-js/src/load-balancer-weighted-round-robin.ts", "../node_modules/.pnpm/@grpc+grpc-js@1.14.3/node_modules/@grpc/grpc-js/src/index.ts", "../node_modules/.pnpm/commander@11.1.0/node_modules/commander/esm.mjs", "../src/cli.ts", "../src/config.ts", "../node_modules/.pnpm/zod@3.25.76/node_modules/zod/v3/external.js", "../node_modules/.pnpm/zod@3.25.76/node_modules/zod/v3/helpers/util.js", "../node_modules/.pnpm/zod@3.25.76/node_modules/zod/v3/ZodError.js", "../node_modules/.pnpm/zod@3.25.76/node_modules/zod/v3/locales/en.js", "../node_modules/.pnpm/zod@3.25.76/node_modules/zod/v3/errors.js", "../node_modules/.pnpm/zod@3.25.76/node_modules/zod/v3/helpers/parseUtil.js", "../node_modules/.pnpm/zod@3.25.76/node_modules/zod/v3/helpers/errorUtil.js", "../node_modules/.pnpm/zod@3.25.76/node_modules/zod/v3/types.js", "../src/logger.ts", "../src/grpc-client.ts", "../src/encryption.ts", "../src/transcript-parser.ts", "../src/project-detector.ts"],
  "sourcesContent": ["/**\n * CommanderError class\n * @class\n */\nclass CommanderError extends Error {\n  /**\n   * Constructs the CommanderError class\n   * @param {number} exitCode suggested exit code which could be used with process.exit\n   * @param {string} code an id string representing the error\n   * @param {string} message human-readable description of the error\n   * @constructor\n   */\n  constructor(exitCode, code, message) {\n    super(message);\n    // properly capture stack trace in Node.js\n    Error.captureStackTrace(this, this.constructor);\n    this.name = this.constructor.name;\n    this.code = code;\n    this.exitCode = exitCode;\n    this.nestedError = undefined;\n  }\n}\n\n/**\n * InvalidArgumentError class\n * @class\n */\nclass InvalidArgumentError extends CommanderError {\n  /**\n   * Constructs the InvalidArgumentError class\n   * @param {string} [message] explanation of why argument is invalid\n   * @constructor\n   */\n  constructor(message) {\n    super(1, 'commander.invalidArgument', message);\n    // properly capture stack trace in Node.js\n    Error.captureStackTrace(this, this.constructor);\n    this.name = this.constructor.name;\n  }\n}\n\nexports.CommanderError = CommanderError;\nexports.InvalidArgumentError = InvalidArgumentError;\n", "const { InvalidArgumentError } = require('./error.js');\n\nclass Argument {\n  /**\n   * Initialize a new command argument with the given name and description.\n   * The default is that the argument is required, and you can explicitly\n   * indicate this with <> around the name. Put [] around the name for an optional argument.\n   *\n   * @param {string} name\n   * @param {string} [description]\n   */\n\n  constructor(name, description) {\n    this.description = description || '';\n    this.variadic = false;\n    this.parseArg = undefined;\n    this.defaultValue = undefined;\n    this.defaultValueDescription = undefined;\n    this.argChoices = undefined;\n\n    switch (name[0]) {\n      case '<': // e.g. <required>\n        this.required = true;\n        this._name = name.slice(1, -1);\n        break;\n      case '[': // e.g. [optional]\n        this.required = false;\n        this._name = name.slice(1, -1);\n        break;\n      default:\n        this.required = true;\n        this._name = name;\n        break;\n    }\n\n    if (this._name.length > 3 && this._name.slice(-3) === '...') {\n      this.variadic = true;\n      this._name = this._name.slice(0, -3);\n    }\n  }\n\n  /**\n   * Return argument name.\n   *\n   * @return {string}\n   */\n\n  name() {\n    return this._name;\n  }\n\n  /**\n   * @api private\n   */\n\n  _concatValue(value, previous) {\n    if (previous === this.defaultValue || !Array.isArray(previous)) {\n      return [value];\n    }\n\n    return previous.concat(value);\n  }\n\n  /**\n   * Set the default value, and optionally supply the description to be displayed in the help.\n   *\n   * @param {*} value\n   * @param {string} [description]\n   * @return {Argument}\n   */\n\n  default(value, description) {\n    this.defaultValue = value;\n    this.defaultValueDescription = description;\n    return this;\n  }\n\n  /**\n   * Set the custom handler for processing CLI command arguments into argument values.\n   *\n   * @param {Function} [fn]\n   * @return {Argument}\n   */\n\n  argParser(fn) {\n    this.parseArg = fn;\n    return this;\n  }\n\n  /**\n   * Only allow argument value to be one of choices.\n   *\n   * @param {string[]} values\n   * @return {Argument}\n   */\n\n  choices(values) {\n    this.argChoices = values.slice();\n    this.parseArg = (arg, previous) => {\n      if (!this.argChoices.includes(arg)) {\n        throw new InvalidArgumentError(`Allowed choices are ${this.argChoices.join(', ')}.`);\n      }\n      if (this.variadic) {\n        return this._concatValue(arg, previous);\n      }\n      return arg;\n    };\n    return this;\n  }\n\n  /**\n   * Make argument required.\n   */\n  argRequired() {\n    this.required = true;\n    return this;\n  }\n\n  /**\n   * Make argument optional.\n   */\n  argOptional() {\n    this.required = false;\n    return this;\n  }\n}\n\n/**\n * Takes an argument and returns its human readable equivalent for help usage.\n *\n * @param {Argument} arg\n * @return {string}\n * @api private\n */\n\nfunction humanReadableArgName(arg) {\n  const nameOutput = arg.name() + (arg.variadic === true ? '...' : '');\n\n  return arg.required\n    ? '<' + nameOutput + '>'\n    : '[' + nameOutput + ']';\n}\n\nexports.Argument = Argument;\nexports.humanReadableArgName = humanReadableArgName;\n", "const { humanReadableArgName } = require('./argument.js');\n\n/**\n * TypeScript import types for JSDoc, used by Visual Studio Code IntelliSense and `npm run typescript-checkJS`\n * https://www.typescriptlang.org/docs/handbook/jsdoc-supported-types.html#import-types\n * @typedef { import(\"./argument.js\").Argument } Argument\n * @typedef { import(\"./command.js\").Command } Command\n * @typedef { import(\"./option.js\").Option } Option\n */\n\n// Although this is a class, methods are static in style to allow override using subclass or just functions.\nclass Help {\n  constructor() {\n    this.helpWidth = undefined;\n    this.sortSubcommands = false;\n    this.sortOptions = false;\n    this.showGlobalOptions = false;\n  }\n\n  /**\n   * Get an array of the visible subcommands. Includes a placeholder for the implicit help command, if there is one.\n   *\n   * @param {Command} cmd\n   * @returns {Command[]}\n   */\n\n  visibleCommands(cmd) {\n    const visibleCommands = cmd.commands.filter(cmd => !cmd._hidden);\n    if (cmd._hasImplicitHelpCommand()) {\n      // Create a command matching the implicit help command.\n      const [, helpName, helpArgs] = cmd._helpCommandnameAndArgs.match(/([^ ]+) *(.*)/);\n      const helpCommand = cmd.createCommand(helpName)\n        .helpOption(false);\n      helpCommand.description(cmd._helpCommandDescription);\n      if (helpArgs) helpCommand.arguments(helpArgs);\n      visibleCommands.push(helpCommand);\n    }\n    if (this.sortSubcommands) {\n      visibleCommands.sort((a, b) => {\n        // @ts-ignore: overloaded return type\n        return a.name().localeCompare(b.name());\n      });\n    }\n    return visibleCommands;\n  }\n\n  /**\n   * Compare options for sort.\n   *\n   * @param {Option} a\n   * @param {Option} b\n   * @returns number\n   */\n  compareOptions(a, b) {\n    const getSortKey = (option) => {\n      // WYSIWYG for order displayed in help. Short used for comparison if present. No special handling for negated.\n      return option.short ? option.short.replace(/^-/, '') : option.long.replace(/^--/, '');\n    };\n    return getSortKey(a).localeCompare(getSortKey(b));\n  }\n\n  /**\n   * Get an array of the visible options. Includes a placeholder for the implicit help option, if there is one.\n   *\n   * @param {Command} cmd\n   * @returns {Option[]}\n   */\n\n  visibleOptions(cmd) {\n    const visibleOptions = cmd.options.filter((option) => !option.hidden);\n    // Implicit help\n    const showShortHelpFlag = cmd._hasHelpOption && cmd._helpShortFlag && !cmd._findOption(cmd._helpShortFlag);\n    const showLongHelpFlag = cmd._hasHelpOption && !cmd._findOption(cmd._helpLongFlag);\n    if (showShortHelpFlag || showLongHelpFlag) {\n      let helpOption;\n      if (!showShortHelpFlag) {\n        helpOption = cmd.createOption(cmd._helpLongFlag, cmd._helpDescription);\n      } else if (!showLongHelpFlag) {\n        helpOption = cmd.createOption(cmd._helpShortFlag, cmd._helpDescription);\n      } else {\n        helpOption = cmd.createOption(cmd._helpFlags, cmd._helpDescription);\n      }\n      visibleOptions.push(helpOption);\n    }\n    if (this.sortOptions) {\n      visibleOptions.sort(this.compareOptions);\n    }\n    return visibleOptions;\n  }\n\n  /**\n   * Get an array of the visible global options. (Not including help.)\n   *\n   * @param {Command} cmd\n   * @returns {Option[]}\n   */\n\n  visibleGlobalOptions(cmd) {\n    if (!this.showGlobalOptions) return [];\n\n    const globalOptions = [];\n    for (let ancestorCmd = cmd.parent; ancestorCmd; ancestorCmd = ancestorCmd.parent) {\n      const visibleOptions = ancestorCmd.options.filter((option) => !option.hidden);\n      globalOptions.push(...visibleOptions);\n    }\n    if (this.sortOptions) {\n      globalOptions.sort(this.compareOptions);\n    }\n    return globalOptions;\n  }\n\n  /**\n   * Get an array of the arguments if any have a description.\n   *\n   * @param {Command} cmd\n   * @returns {Argument[]}\n   */\n\n  visibleArguments(cmd) {\n    // Side effect! Apply the legacy descriptions before the arguments are displayed.\n    if (cmd._argsDescription) {\n      cmd.registeredArguments.forEach(argument => {\n        argument.description = argument.description || cmd._argsDescription[argument.name()] || '';\n      });\n    }\n\n    // If there are any arguments with a description then return all the arguments.\n    if (cmd.registeredArguments.find(argument => argument.description)) {\n      return cmd.registeredArguments;\n    }\n    return [];\n  }\n\n  /**\n   * Get the command term to show in the list of subcommands.\n   *\n   * @param {Command} cmd\n   * @returns {string}\n   */\n\n  subcommandTerm(cmd) {\n    // Legacy. Ignores custom usage string, and nested commands.\n    const args = cmd.registeredArguments.map(arg => humanReadableArgName(arg)).join(' ');\n    return cmd._name +\n      (cmd._aliases[0] ? '|' + cmd._aliases[0] : '') +\n      (cmd.options.length ? ' [options]' : '') + // simplistic check for non-help option\n      (args ? ' ' + args : '');\n  }\n\n  /**\n   * Get the option term to show in the list of options.\n   *\n   * @param {Option} option\n   * @returns {string}\n   */\n\n  optionTerm(option) {\n    return option.flags;\n  }\n\n  /**\n   * Get the argument term to show in the list of arguments.\n   *\n   * @param {Argument} argument\n   * @returns {string}\n   */\n\n  argumentTerm(argument) {\n    return argument.name();\n  }\n\n  /**\n   * Get the longest command term length.\n   *\n   * @param {Command} cmd\n   * @param {Help} helper\n   * @returns {number}\n   */\n\n  longestSubcommandTermLength(cmd, helper) {\n    return helper.visibleCommands(cmd).reduce((max, command) => {\n      return Math.max(max, helper.subcommandTerm(command).length);\n    }, 0);\n  }\n\n  /**\n   * Get the longest option term length.\n   *\n   * @param {Command} cmd\n   * @param {Help} helper\n   * @returns {number}\n   */\n\n  longestOptionTermLength(cmd, helper) {\n    return helper.visibleOptions(cmd).reduce((max, option) => {\n      return Math.max(max, helper.optionTerm(option).length);\n    }, 0);\n  }\n\n  /**\n   * Get the longest global option term length.\n   *\n   * @param {Command} cmd\n   * @param {Help} helper\n   * @returns {number}\n   */\n\n  longestGlobalOptionTermLength(cmd, helper) {\n    return helper.visibleGlobalOptions(cmd).reduce((max, option) => {\n      return Math.max(max, helper.optionTerm(option).length);\n    }, 0);\n  }\n\n  /**\n   * Get the longest argument term length.\n   *\n   * @param {Command} cmd\n   * @param {Help} helper\n   * @returns {number}\n   */\n\n  longestArgumentTermLength(cmd, helper) {\n    return helper.visibleArguments(cmd).reduce((max, argument) => {\n      return Math.max(max, helper.argumentTerm(argument).length);\n    }, 0);\n  }\n\n  /**\n   * Get the command usage to be displayed at the top of the built-in help.\n   *\n   * @param {Command} cmd\n   * @returns {string}\n   */\n\n  commandUsage(cmd) {\n    // Usage\n    let cmdName = cmd._name;\n    if (cmd._aliases[0]) {\n      cmdName = cmdName + '|' + cmd._aliases[0];\n    }\n    let ancestorCmdNames = '';\n    for (let ancestorCmd = cmd.parent; ancestorCmd; ancestorCmd = ancestorCmd.parent) {\n      ancestorCmdNames = ancestorCmd.name() + ' ' + ancestorCmdNames;\n    }\n    return ancestorCmdNames + cmdName + ' ' + cmd.usage();\n  }\n\n  /**\n   * Get the description for the command.\n   *\n   * @param {Command} cmd\n   * @returns {string}\n   */\n\n  commandDescription(cmd) {\n    // @ts-ignore: overloaded return type\n    return cmd.description();\n  }\n\n  /**\n   * Get the subcommand summary to show in the list of subcommands.\n   * (Fallback to description for backwards compatibility.)\n   *\n   * @param {Command} cmd\n   * @returns {string}\n   */\n\n  subcommandDescription(cmd) {\n    // @ts-ignore: overloaded return type\n    return cmd.summary() || cmd.description();\n  }\n\n  /**\n   * Get the option description to show in the list of options.\n   *\n   * @param {Option} option\n   * @return {string}\n   */\n\n  optionDescription(option) {\n    const extraInfo = [];\n\n    if (option.argChoices) {\n      extraInfo.push(\n        // use stringify to match the display of the default value\n        `choices: ${option.argChoices.map((choice) => JSON.stringify(choice)).join(', ')}`);\n    }\n    if (option.defaultValue !== undefined) {\n      // default for boolean and negated more for programmer than end user,\n      // but show true/false for boolean option as may be for hand-rolled env or config processing.\n      const showDefault = option.required || option.optional ||\n        (option.isBoolean() && typeof option.defaultValue === 'boolean');\n      if (showDefault) {\n        extraInfo.push(`default: ${option.defaultValueDescription || JSON.stringify(option.defaultValue)}`);\n      }\n    }\n    // preset for boolean and negated are more for programmer than end user\n    if (option.presetArg !== undefined && option.optional) {\n      extraInfo.push(`preset: ${JSON.stringify(option.presetArg)}`);\n    }\n    if (option.envVar !== undefined) {\n      extraInfo.push(`env: ${option.envVar}`);\n    }\n    if (extraInfo.length > 0) {\n      return `${option.description} (${extraInfo.join(', ')})`;\n    }\n\n    return option.description;\n  }\n\n  /**\n   * Get the argument description to show in the list of arguments.\n   *\n   * @param {Argument} argument\n   * @return {string}\n   */\n\n  argumentDescription(argument) {\n    const extraInfo = [];\n    if (argument.argChoices) {\n      extraInfo.push(\n        // use stringify to match the display of the default value\n        `choices: ${argument.argChoices.map((choice) => JSON.stringify(choice)).join(', ')}`);\n    }\n    if (argument.defaultValue !== undefined) {\n      extraInfo.push(`default: ${argument.defaultValueDescription || JSON.stringify(argument.defaultValue)}`);\n    }\n    if (extraInfo.length > 0) {\n      const extraDescripton = `(${extraInfo.join(', ')})`;\n      if (argument.description) {\n        return `${argument.description} ${extraDescripton}`;\n      }\n      return extraDescripton;\n    }\n    return argument.description;\n  }\n\n  /**\n   * Generate the built-in help text.\n   *\n   * @param {Command} cmd\n   * @param {Help} helper\n   * @returns {string}\n   */\n\n  formatHelp(cmd, helper) {\n    const termWidth = helper.padWidth(cmd, helper);\n    const helpWidth = helper.helpWidth || 80;\n    const itemIndentWidth = 2;\n    const itemSeparatorWidth = 2; // between term and description\n    function formatItem(term, description) {\n      if (description) {\n        const fullText = `${term.padEnd(termWidth + itemSeparatorWidth)}${description}`;\n        return helper.wrap(fullText, helpWidth - itemIndentWidth, termWidth + itemSeparatorWidth);\n      }\n      return term;\n    }\n    function formatList(textArray) {\n      return textArray.join('\\n').replace(/^/gm, ' '.repeat(itemIndentWidth));\n    }\n\n    // Usage\n    let output = [`Usage: ${helper.commandUsage(cmd)}`, ''];\n\n    // Description\n    const commandDescription = helper.commandDescription(cmd);\n    if (commandDescription.length > 0) {\n      output = output.concat([helper.wrap(commandDescription, helpWidth, 0), '']);\n    }\n\n    // Arguments\n    const argumentList = helper.visibleArguments(cmd).map((argument) => {\n      return formatItem(helper.argumentTerm(argument), helper.argumentDescription(argument));\n    });\n    if (argumentList.length > 0) {\n      output = output.concat(['Arguments:', formatList(argumentList), '']);\n    }\n\n    // Options\n    const optionList = helper.visibleOptions(cmd).map((option) => {\n      return formatItem(helper.optionTerm(option), helper.optionDescription(option));\n    });\n    if (optionList.length > 0) {\n      output = output.concat(['Options:', formatList(optionList), '']);\n    }\n\n    if (this.showGlobalOptions) {\n      const globalOptionList = helper.visibleGlobalOptions(cmd).map((option) => {\n        return formatItem(helper.optionTerm(option), helper.optionDescription(option));\n      });\n      if (globalOptionList.length > 0) {\n        output = output.concat(['Global Options:', formatList(globalOptionList), '']);\n      }\n    }\n\n    // Commands\n    const commandList = helper.visibleCommands(cmd).map((cmd) => {\n      return formatItem(helper.subcommandTerm(cmd), helper.subcommandDescription(cmd));\n    });\n    if (commandList.length > 0) {\n      output = output.concat(['Commands:', formatList(commandList), '']);\n    }\n\n    return output.join('\\n');\n  }\n\n  /**\n   * Calculate the pad width from the maximum term length.\n   *\n   * @param {Command} cmd\n   * @param {Help} helper\n   * @returns {number}\n   */\n\n  padWidth(cmd, helper) {\n    return Math.max(\n      helper.longestOptionTermLength(cmd, helper),\n      helper.longestGlobalOptionTermLength(cmd, helper),\n      helper.longestSubcommandTermLength(cmd, helper),\n      helper.longestArgumentTermLength(cmd, helper)\n    );\n  }\n\n  /**\n   * Wrap the given string to width characters per line, with lines after the first indented.\n   * Do not wrap if insufficient room for wrapping (minColumnWidth), or string is manually formatted.\n   *\n   * @param {string} str\n   * @param {number} width\n   * @param {number} indent\n   * @param {number} [minColumnWidth=40]\n   * @return {string}\n   *\n   */\n\n  wrap(str, width, indent, minColumnWidth = 40) {\n    // Full \\s characters, minus the linefeeds.\n    const indents = ' \\\\f\\\\t\\\\v\\u00a0\\u1680\\u2000-\\u200a\\u202f\\u205f\\u3000\\ufeff';\n    // Detect manually wrapped and indented strings by searching for line break followed by spaces.\n    const manualIndent = new RegExp(`[\\\\n][${indents}]+`);\n    if (str.match(manualIndent)) return str;\n    // Do not wrap if not enough room for a wrapped column of text (as could end up with a word per line).\n    const columnWidth = width - indent;\n    if (columnWidth < minColumnWidth) return str;\n\n    const leadingStr = str.slice(0, indent);\n    const columnText = str.slice(indent).replace('\\r\\n', '\\n');\n    const indentString = ' '.repeat(indent);\n    const zeroWidthSpace = '\\u200B';\n    const breaks = `\\\\s${zeroWidthSpace}`;\n    // Match line end (so empty lines don't collapse),\n    // or as much text as will fit in column, or excess text up to first break.\n    const regex = new RegExp(`\\n|.{1,${columnWidth - 1}}([${breaks}]|$)|[^${breaks}]+?([${breaks}]|$)`, 'g');\n    const lines = columnText.match(regex) || [];\n    return leadingStr + lines.map((line, i) => {\n      if (line === '\\n') return ''; // preserve empty lines\n      return ((i > 0) ? indentString : '') + line.trimEnd();\n    }).join('\\n');\n  }\n}\n\nexports.Help = Help;\n", "const { InvalidArgumentError } = require('./error.js');\n\nclass Option {\n  /**\n   * Initialize a new `Option` with the given `flags` and `description`.\n   *\n   * @param {string} flags\n   * @param {string} [description]\n   */\n\n  constructor(flags, description) {\n    this.flags = flags;\n    this.description = description || '';\n\n    this.required = flags.includes('<'); // A value must be supplied when the option is specified.\n    this.optional = flags.includes('['); // A value is optional when the option is specified.\n    // variadic test ignores <value,...> et al which might be used to describe custom splitting of single argument\n    this.variadic = /\\w\\.\\.\\.[>\\]]$/.test(flags); // The option can take multiple values.\n    this.mandatory = false; // The option must have a value after parsing, which usually means it must be specified on command line.\n    const optionFlags = splitOptionFlags(flags);\n    this.short = optionFlags.shortFlag;\n    this.long = optionFlags.longFlag;\n    this.negate = false;\n    if (this.long) {\n      this.negate = this.long.startsWith('--no-');\n    }\n    this.defaultValue = undefined;\n    this.defaultValueDescription = undefined;\n    this.presetArg = undefined;\n    this.envVar = undefined;\n    this.parseArg = undefined;\n    this.hidden = false;\n    this.argChoices = undefined;\n    this.conflictsWith = [];\n    this.implied = undefined;\n  }\n\n  /**\n   * Set the default value, and optionally supply the description to be displayed in the help.\n   *\n   * @param {*} value\n   * @param {string} [description]\n   * @return {Option}\n   */\n\n  default(value, description) {\n    this.defaultValue = value;\n    this.defaultValueDescription = description;\n    return this;\n  }\n\n  /**\n   * Preset to use when option used without option-argument, especially optional but also boolean and negated.\n   * The custom processing (parseArg) is called.\n   *\n   * @example\n   * new Option('--color').default('GREYSCALE').preset('RGB');\n   * new Option('--donate [amount]').preset('20').argParser(parseFloat);\n   *\n   * @param {*} arg\n   * @return {Option}\n   */\n\n  preset(arg) {\n    this.presetArg = arg;\n    return this;\n  }\n\n  /**\n   * Add option name(s) that conflict with this option.\n   * An error will be displayed if conflicting options are found during parsing.\n   *\n   * @example\n   * new Option('--rgb').conflicts('cmyk');\n   * new Option('--js').conflicts(['ts', 'jsx']);\n   *\n   * @param {string | string[]} names\n   * @return {Option}\n   */\n\n  conflicts(names) {\n    this.conflictsWith = this.conflictsWith.concat(names);\n    return this;\n  }\n\n  /**\n   * Specify implied option values for when this option is set and the implied options are not.\n   *\n   * The custom processing (parseArg) is not called on the implied values.\n   *\n   * @example\n   * program\n   *   .addOption(new Option('--log', 'write logging information to file'))\n   *   .addOption(new Option('--trace', 'log extra details').implies({ log: 'trace.txt' }));\n   *\n   * @param {Object} impliedOptionValues\n   * @return {Option}\n   */\n  implies(impliedOptionValues) {\n    let newImplied = impliedOptionValues;\n    if (typeof impliedOptionValues === 'string') {\n      // string is not documented, but easy mistake and we can do what user probably intended.\n      newImplied = { [impliedOptionValues]: true };\n    }\n    this.implied = Object.assign(this.implied || {}, newImplied);\n    return this;\n  }\n\n  /**\n   * Set environment variable to check for option value.\n   *\n   * An environment variable is only used if when processed the current option value is\n   * undefined, or the source of the current value is 'default' or 'config' or 'env'.\n   *\n   * @param {string} name\n   * @return {Option}\n   */\n\n  env(name) {\n    this.envVar = name;\n    return this;\n  }\n\n  /**\n   * Set the custom handler for processing CLI option arguments into option values.\n   *\n   * @param {Function} [fn]\n   * @return {Option}\n   */\n\n  argParser(fn) {\n    this.parseArg = fn;\n    return this;\n  }\n\n  /**\n   * Whether the option is mandatory and must have a value after parsing.\n   *\n   * @param {boolean} [mandatory=true]\n   * @return {Option}\n   */\n\n  makeOptionMandatory(mandatory = true) {\n    this.mandatory = !!mandatory;\n    return this;\n  }\n\n  /**\n   * Hide option in help.\n   *\n   * @param {boolean} [hide=true]\n   * @return {Option}\n   */\n\n  hideHelp(hide = true) {\n    this.hidden = !!hide;\n    return this;\n  }\n\n  /**\n   * @api private\n   */\n\n  _concatValue(value, previous) {\n    if (previous === this.defaultValue || !Array.isArray(previous)) {\n      return [value];\n    }\n\n    return previous.concat(value);\n  }\n\n  /**\n   * Only allow option value to be one of choices.\n   *\n   * @param {string[]} values\n   * @return {Option}\n   */\n\n  choices(values) {\n    this.argChoices = values.slice();\n    this.parseArg = (arg, previous) => {\n      if (!this.argChoices.includes(arg)) {\n        throw new InvalidArgumentError(`Allowed choices are ${this.argChoices.join(', ')}.`);\n      }\n      if (this.variadic) {\n        return this._concatValue(arg, previous);\n      }\n      return arg;\n    };\n    return this;\n  }\n\n  /**\n   * Return option name.\n   *\n   * @return {string}\n   */\n\n  name() {\n    if (this.long) {\n      return this.long.replace(/^--/, '');\n    }\n    return this.short.replace(/^-/, '');\n  }\n\n  /**\n   * Return option name, in a camelcase format that can be used\n   * as a object attribute key.\n   *\n   * @return {string}\n   * @api private\n   */\n\n  attributeName() {\n    return camelcase(this.name().replace(/^no-/, ''));\n  }\n\n  /**\n   * Check if `arg` matches the short or long flag.\n   *\n   * @param {string} arg\n   * @return {boolean}\n   * @api private\n   */\n\n  is(arg) {\n    return this.short === arg || this.long === arg;\n  }\n\n  /**\n   * Return whether a boolean option.\n   *\n   * Options are one of boolean, negated, required argument, or optional argument.\n   *\n   * @return {boolean}\n   * @api private\n   */\n\n  isBoolean() {\n    return !this.required && !this.optional && !this.negate;\n  }\n}\n\n/**\n * This class is to make it easier to work with dual options, without changing the existing\n * implementation. We support separate dual options for separate positive and negative options,\n * like `--build` and `--no-build`, which share a single option value. This works nicely for some\n * use cases, but is tricky for others where we want separate behaviours despite\n * the single shared option value.\n */\nclass DualOptions {\n  /**\n   * @param {Option[]} options\n   */\n  constructor(options) {\n    this.positiveOptions = new Map();\n    this.negativeOptions = new Map();\n    this.dualOptions = new Set();\n    options.forEach(option => {\n      if (option.negate) {\n        this.negativeOptions.set(option.attributeName(), option);\n      } else {\n        this.positiveOptions.set(option.attributeName(), option);\n      }\n    });\n    this.negativeOptions.forEach((value, key) => {\n      if (this.positiveOptions.has(key)) {\n        this.dualOptions.add(key);\n      }\n    });\n  }\n\n  /**\n   * Did the value come from the option, and not from possible matching dual option?\n   *\n   * @param {*} value\n   * @param {Option} option\n   * @returns {boolean}\n   */\n  valueFromOption(value, option) {\n    const optionKey = option.attributeName();\n    if (!this.dualOptions.has(optionKey)) return true;\n\n    // Use the value to deduce if (probably) came from the option.\n    const preset = this.negativeOptions.get(optionKey).presetArg;\n    const negativeValue = (preset !== undefined) ? preset : false;\n    return option.negate === (negativeValue === value);\n  }\n}\n\n/**\n * Convert string from kebab-case to camelCase.\n *\n * @param {string} str\n * @return {string}\n * @api private\n */\n\nfunction camelcase(str) {\n  return str.split('-').reduce((str, word) => {\n    return str + word[0].toUpperCase() + word.slice(1);\n  });\n}\n\n/**\n * Split the short and long flag out of something like '-m,--mixed <value>'\n *\n * @api private\n */\n\nfunction splitOptionFlags(flags) {\n  let shortFlag;\n  let longFlag;\n  // Use original very loose parsing to maintain backwards compatibility for now,\n  // which allowed for example unintended `-sw, --short-word` [sic].\n  const flagParts = flags.split(/[ |,]+/);\n  if (flagParts.length > 1 && !/^[[<]/.test(flagParts[1])) shortFlag = flagParts.shift();\n  longFlag = flagParts.shift();\n  // Add support for lone short flag without significantly changing parsing!\n  if (!shortFlag && /^-[^-]$/.test(longFlag)) {\n    shortFlag = longFlag;\n    longFlag = undefined;\n  }\n  return { shortFlag, longFlag };\n}\n\nexports.Option = Option;\nexports.splitOptionFlags = splitOptionFlags;\nexports.DualOptions = DualOptions;\n", "const maxDistance = 3;\n\nfunction editDistance(a, b) {\n  // https://en.wikipedia.org/wiki/Damerau\u2013Levenshtein_distance\n  // Calculating optimal string alignment distance, no substring is edited more than once.\n  // (Simple implementation.)\n\n  // Quick early exit, return worst case.\n  if (Math.abs(a.length - b.length) > maxDistance) return Math.max(a.length, b.length);\n\n  // distance between prefix substrings of a and b\n  const d = [];\n\n  // pure deletions turn a into empty string\n  for (let i = 0; i <= a.length; i++) {\n    d[i] = [i];\n  }\n  // pure insertions turn empty string into b\n  for (let j = 0; j <= b.length; j++) {\n    d[0][j] = j;\n  }\n\n  // fill matrix\n  for (let j = 1; j <= b.length; j++) {\n    for (let i = 1; i <= a.length; i++) {\n      let cost = 1;\n      if (a[i - 1] === b[j - 1]) {\n        cost = 0;\n      } else {\n        cost = 1;\n      }\n      d[i][j] = Math.min(\n        d[i - 1][j] + 1, // deletion\n        d[i][j - 1] + 1, // insertion\n        d[i - 1][j - 1] + cost // substitution\n      );\n      // transposition\n      if (i > 1 && j > 1 && a[i - 1] === b[j - 2] && a[i - 2] === b[j - 1]) {\n        d[i][j] = Math.min(d[i][j], d[i - 2][j - 2] + 1);\n      }\n    }\n  }\n\n  return d[a.length][b.length];\n}\n\n/**\n * Find close matches, restricted to same number of edits.\n *\n * @param {string} word\n * @param {string[]} candidates\n * @returns {string}\n */\n\nfunction suggestSimilar(word, candidates) {\n  if (!candidates || candidates.length === 0) return '';\n  // remove possible duplicates\n  candidates = Array.from(new Set(candidates));\n\n  const searchingOptions = word.startsWith('--');\n  if (searchingOptions) {\n    word = word.slice(2);\n    candidates = candidates.map(candidate => candidate.slice(2));\n  }\n\n  let similar = [];\n  let bestDistance = maxDistance;\n  const minSimilarity = 0.4;\n  candidates.forEach((candidate) => {\n    if (candidate.length <= 1) return; // no one character guesses\n\n    const distance = editDistance(word, candidate);\n    const length = Math.max(word.length, candidate.length);\n    const similarity = (length - distance) / length;\n    if (similarity > minSimilarity) {\n      if (distance < bestDistance) {\n        // better edit distance, throw away previous worse matches\n        bestDistance = distance;\n        similar = [candidate];\n      } else if (distance === bestDistance) {\n        similar.push(candidate);\n      }\n    }\n  });\n\n  similar.sort((a, b) => a.localeCompare(b));\n  if (searchingOptions) {\n    similar = similar.map(candidate => `--${candidate}`);\n  }\n\n  if (similar.length > 1) {\n    return `\\n(Did you mean one of ${similar.join(', ')}?)`;\n  }\n  if (similar.length === 1) {\n    return `\\n(Did you mean ${similar[0]}?)`;\n  }\n  return '';\n}\n\nexports.suggestSimilar = suggestSimilar;\n", "const EventEmitter = require('events').EventEmitter;\nconst childProcess = require('child_process');\nconst path = require('path');\nconst fs = require('fs');\nconst process = require('process');\n\nconst { Argument, humanReadableArgName } = require('./argument.js');\nconst { CommanderError } = require('./error.js');\nconst { Help } = require('./help.js');\nconst { Option, splitOptionFlags, DualOptions } = require('./option.js');\nconst { suggestSimilar } = require('./suggestSimilar');\n\nclass Command extends EventEmitter {\n  /**\n   * Initialize a new `Command`.\n   *\n   * @param {string} [name]\n   */\n\n  constructor(name) {\n    super();\n    /** @type {Command[]} */\n    this.commands = [];\n    /** @type {Option[]} */\n    this.options = [];\n    this.parent = null;\n    this._allowUnknownOption = false;\n    this._allowExcessArguments = true;\n    /** @type {Argument[]} */\n    this.registeredArguments = [];\n    this._args = this.registeredArguments; // deprecated old name\n    /** @type {string[]} */\n    this.args = []; // cli args with options removed\n    this.rawArgs = [];\n    this.processedArgs = []; // like .args but after custom processing and collecting variadic\n    this._scriptPath = null;\n    this._name = name || '';\n    this._optionValues = {};\n    this._optionValueSources = {}; // default, env, cli etc\n    this._storeOptionsAsProperties = false;\n    this._actionHandler = null;\n    this._executableHandler = false;\n    this._executableFile = null; // custom name for executable\n    this._executableDir = null; // custom search directory for subcommands\n    this._defaultCommandName = null;\n    this._exitCallback = null;\n    this._aliases = [];\n    this._combineFlagAndOptionalValue = true;\n    this._description = '';\n    this._summary = '';\n    this._argsDescription = undefined; // legacy\n    this._enablePositionalOptions = false;\n    this._passThroughOptions = false;\n    this._lifeCycleHooks = {}; // a hash of arrays\n    /** @type {boolean | string} */\n    this._showHelpAfterError = false;\n    this._showSuggestionAfterError = true;\n\n    // see .configureOutput() for docs\n    this._outputConfiguration = {\n      writeOut: (str) => process.stdout.write(str),\n      writeErr: (str) => process.stderr.write(str),\n      getOutHelpWidth: () => process.stdout.isTTY ? process.stdout.columns : undefined,\n      getErrHelpWidth: () => process.stderr.isTTY ? process.stderr.columns : undefined,\n      outputError: (str, write) => write(str)\n    };\n\n    this._hidden = false;\n    this._hasHelpOption = true;\n    this._helpFlags = '-h, --help';\n    this._helpDescription = 'display help for command';\n    this._helpShortFlag = '-h';\n    this._helpLongFlag = '--help';\n    this._addImplicitHelpCommand = undefined; // Deliberately undefined, not decided whether true or false\n    this._helpCommandName = 'help';\n    this._helpCommandnameAndArgs = 'help [command]';\n    this._helpCommandDescription = 'display help for command';\n    this._helpConfiguration = {};\n  }\n\n  /**\n   * Copy settings that are useful to have in common across root command and subcommands.\n   *\n   * (Used internally when adding a command using `.command()` so subcommands inherit parent settings.)\n   *\n   * @param {Command} sourceCommand\n   * @return {Command} `this` command for chaining\n   */\n  copyInheritedSettings(sourceCommand) {\n    this._outputConfiguration = sourceCommand._outputConfiguration;\n    this._hasHelpOption = sourceCommand._hasHelpOption;\n    this._helpFlags = sourceCommand._helpFlags;\n    this._helpDescription = sourceCommand._helpDescription;\n    this._helpShortFlag = sourceCommand._helpShortFlag;\n    this._helpLongFlag = sourceCommand._helpLongFlag;\n    this._helpCommandName = sourceCommand._helpCommandName;\n    this._helpCommandnameAndArgs = sourceCommand._helpCommandnameAndArgs;\n    this._helpCommandDescription = sourceCommand._helpCommandDescription;\n    this._helpConfiguration = sourceCommand._helpConfiguration;\n    this._exitCallback = sourceCommand._exitCallback;\n    this._storeOptionsAsProperties = sourceCommand._storeOptionsAsProperties;\n    this._combineFlagAndOptionalValue = sourceCommand._combineFlagAndOptionalValue;\n    this._allowExcessArguments = sourceCommand._allowExcessArguments;\n    this._enablePositionalOptions = sourceCommand._enablePositionalOptions;\n    this._showHelpAfterError = sourceCommand._showHelpAfterError;\n    this._showSuggestionAfterError = sourceCommand._showSuggestionAfterError;\n\n    return this;\n  }\n\n  /**\n   * @returns {Command[]}\n   * @api private\n   */\n\n  _getCommandAndAncestors() {\n    const result = [];\n    for (let command = this; command; command = command.parent) {\n      result.push(command);\n    }\n    return result;\n  }\n\n  /**\n   * Define a command.\n   *\n   * There are two styles of command: pay attention to where to put the description.\n   *\n   * @example\n   * // Command implemented using action handler (description is supplied separately to `.command`)\n   * program\n   *   .command('clone <source> [destination]')\n   *   .description('clone a repository into a newly created directory')\n   *   .action((source, destination) => {\n   *     console.log('clone command called');\n   *   });\n   *\n   * // Command implemented using separate executable file (description is second parameter to `.command`)\n   * program\n   *   .command('start <service>', 'start named service')\n   *   .command('stop [service]', 'stop named service, or all if no name supplied');\n   *\n   * @param {string} nameAndArgs - command name and arguments, args are `<required>` or `[optional]` and last may also be `variadic...`\n   * @param {Object|string} [actionOptsOrExecDesc] - configuration options (for action), or description (for executable)\n   * @param {Object} [execOpts] - configuration options (for executable)\n   * @return {Command} returns new command for action handler, or `this` for executable command\n   */\n\n  command(nameAndArgs, actionOptsOrExecDesc, execOpts) {\n    let desc = actionOptsOrExecDesc;\n    let opts = execOpts;\n    if (typeof desc === 'object' && desc !== null) {\n      opts = desc;\n      desc = null;\n    }\n    opts = opts || {};\n    const [, name, args] = nameAndArgs.match(/([^ ]+) *(.*)/);\n\n    const cmd = this.createCommand(name);\n    if (desc) {\n      cmd.description(desc);\n      cmd._executableHandler = true;\n    }\n    if (opts.isDefault) this._defaultCommandName = cmd._name;\n    cmd._hidden = !!(opts.noHelp || opts.hidden); // noHelp is deprecated old name for hidden\n    cmd._executableFile = opts.executableFile || null; // Custom name for executable file, set missing to null to match constructor\n    if (args) cmd.arguments(args);\n    this.commands.push(cmd);\n    cmd.parent = this;\n    cmd.copyInheritedSettings(this);\n\n    if (desc) return this;\n    return cmd;\n  }\n\n  /**\n   * Factory routine to create a new unattached command.\n   *\n   * See .command() for creating an attached subcommand, which uses this routine to\n   * create the command. You can override createCommand to customise subcommands.\n   *\n   * @param {string} [name]\n   * @return {Command} new command\n   */\n\n  createCommand(name) {\n    return new Command(name);\n  }\n\n  /**\n   * You can customise the help with a subclass of Help by overriding createHelp,\n   * or by overriding Help properties using configureHelp().\n   *\n   * @return {Help}\n   */\n\n  createHelp() {\n    return Object.assign(new Help(), this.configureHelp());\n  }\n\n  /**\n   * You can customise the help by overriding Help properties using configureHelp(),\n   * or with a subclass of Help by overriding createHelp().\n   *\n   * @param {Object} [configuration] - configuration options\n   * @return {Command|Object} `this` command for chaining, or stored configuration\n   */\n\n  configureHelp(configuration) {\n    if (configuration === undefined) return this._helpConfiguration;\n\n    this._helpConfiguration = configuration;\n    return this;\n  }\n\n  /**\n   * The default output goes to stdout and stderr. You can customise this for special\n   * applications. You can also customise the display of errors by overriding outputError.\n   *\n   * The configuration properties are all functions:\n   *\n   *     // functions to change where being written, stdout and stderr\n   *     writeOut(str)\n   *     writeErr(str)\n   *     // matching functions to specify width for wrapping help\n   *     getOutHelpWidth()\n   *     getErrHelpWidth()\n   *     // functions based on what is being written out\n   *     outputError(str, write) // used for displaying errors, and not used for displaying help\n   *\n   * @param {Object} [configuration] - configuration options\n   * @return {Command|Object} `this` command for chaining, or stored configuration\n   */\n\n  configureOutput(configuration) {\n    if (configuration === undefined) return this._outputConfiguration;\n\n    Object.assign(this._outputConfiguration, configuration);\n    return this;\n  }\n\n  /**\n   * Display the help or a custom message after an error occurs.\n   *\n   * @param {boolean|string} [displayHelp]\n   * @return {Command} `this` command for chaining\n   */\n  showHelpAfterError(displayHelp = true) {\n    if (typeof displayHelp !== 'string') displayHelp = !!displayHelp;\n    this._showHelpAfterError = displayHelp;\n    return this;\n  }\n\n  /**\n   * Display suggestion of similar commands for unknown commands, or options for unknown options.\n   *\n   * @param {boolean} [displaySuggestion]\n   * @return {Command} `this` command for chaining\n   */\n  showSuggestionAfterError(displaySuggestion = true) {\n    this._showSuggestionAfterError = !!displaySuggestion;\n    return this;\n  }\n\n  /**\n   * Add a prepared subcommand.\n   *\n   * See .command() for creating an attached subcommand which inherits settings from its parent.\n   *\n   * @param {Command} cmd - new subcommand\n   * @param {Object} [opts] - configuration options\n   * @return {Command} `this` command for chaining\n   */\n\n  addCommand(cmd, opts) {\n    if (!cmd._name) {\n      throw new Error(`Command passed to .addCommand() must have a name\n- specify the name in Command constructor or using .name()`);\n    }\n\n    opts = opts || {};\n    if (opts.isDefault) this._defaultCommandName = cmd._name;\n    if (opts.noHelp || opts.hidden) cmd._hidden = true; // modifying passed command due to existing implementation\n\n    this.commands.push(cmd);\n    cmd.parent = this;\n    return this;\n  }\n\n  /**\n   * Factory routine to create a new unattached argument.\n   *\n   * See .argument() for creating an attached argument, which uses this routine to\n   * create the argument. You can override createArgument to return a custom argument.\n   *\n   * @param {string} name\n   * @param {string} [description]\n   * @return {Argument} new argument\n   */\n\n  createArgument(name, description) {\n    return new Argument(name, description);\n  }\n\n  /**\n   * Define argument syntax for command.\n   *\n   * The default is that the argument is required, and you can explicitly\n   * indicate this with <> around the name. Put [] around the name for an optional argument.\n   *\n   * @example\n   * program.argument('<input-file>');\n   * program.argument('[output-file]');\n   *\n   * @param {string} name\n   * @param {string} [description]\n   * @param {Function|*} [fn] - custom argument processing function\n   * @param {*} [defaultValue]\n   * @return {Command} `this` command for chaining\n   */\n  argument(name, description, fn, defaultValue) {\n    const argument = this.createArgument(name, description);\n    if (typeof fn === 'function') {\n      argument.default(defaultValue).argParser(fn);\n    } else {\n      argument.default(fn);\n    }\n    this.addArgument(argument);\n    return this;\n  }\n\n  /**\n   * Define argument syntax for command, adding multiple at once (without descriptions).\n   *\n   * See also .argument().\n   *\n   * @example\n   * program.arguments('<cmd> [env]');\n   *\n   * @param {string} names\n   * @return {Command} `this` command for chaining\n   */\n\n  arguments(names) {\n    names.trim().split(/ +/).forEach((detail) => {\n      this.argument(detail);\n    });\n    return this;\n  }\n\n  /**\n   * Define argument syntax for command, adding a prepared argument.\n   *\n   * @param {Argument} argument\n   * @return {Command} `this` command for chaining\n   */\n  addArgument(argument) {\n    const previousArgument = this.registeredArguments.slice(-1)[0];\n    if (previousArgument && previousArgument.variadic) {\n      throw new Error(`only the last argument can be variadic '${previousArgument.name()}'`);\n    }\n    if (argument.required && argument.defaultValue !== undefined && argument.parseArg === undefined) {\n      throw new Error(`a default value for a required argument is never used: '${argument.name()}'`);\n    }\n    this.registeredArguments.push(argument);\n    return this;\n  }\n\n  /**\n   * Override default decision whether to add implicit help command.\n   *\n   *    addHelpCommand() // force on\n   *    addHelpCommand(false); // force off\n   *    addHelpCommand('help [cmd]', 'display help for [cmd]'); // force on with custom details\n   *\n   * @return {Command} `this` command for chaining\n   */\n\n  addHelpCommand(enableOrNameAndArgs, description) {\n    if (enableOrNameAndArgs === false) {\n      this._addImplicitHelpCommand = false;\n    } else {\n      this._addImplicitHelpCommand = true;\n      if (typeof enableOrNameAndArgs === 'string') {\n        this._helpCommandName = enableOrNameAndArgs.split(' ')[0];\n        this._helpCommandnameAndArgs = enableOrNameAndArgs;\n      }\n      this._helpCommandDescription = description || this._helpCommandDescription;\n    }\n    return this;\n  }\n\n  /**\n   * @return {boolean}\n   * @api private\n   */\n\n  _hasImplicitHelpCommand() {\n    if (this._addImplicitHelpCommand === undefined) {\n      return this.commands.length && !this._actionHandler && !this._findCommand('help');\n    }\n    return this._addImplicitHelpCommand;\n  }\n\n  /**\n   * Add hook for life cycle event.\n   *\n   * @param {string} event\n   * @param {Function} listener\n   * @return {Command} `this` command for chaining\n   */\n\n  hook(event, listener) {\n    const allowedValues = ['preSubcommand', 'preAction', 'postAction'];\n    if (!allowedValues.includes(event)) {\n      throw new Error(`Unexpected value for event passed to hook : '${event}'.\nExpecting one of '${allowedValues.join(\"', '\")}'`);\n    }\n    if (this._lifeCycleHooks[event]) {\n      this._lifeCycleHooks[event].push(listener);\n    } else {\n      this._lifeCycleHooks[event] = [listener];\n    }\n    return this;\n  }\n\n  /**\n   * Register callback to use as replacement for calling process.exit.\n   *\n   * @param {Function} [fn] optional callback which will be passed a CommanderError, defaults to throwing\n   * @return {Command} `this` command for chaining\n   */\n\n  exitOverride(fn) {\n    if (fn) {\n      this._exitCallback = fn;\n    } else {\n      this._exitCallback = (err) => {\n        if (err.code !== 'commander.executeSubCommandAsync') {\n          throw err;\n        } else {\n          // Async callback from spawn events, not useful to throw.\n        }\n      };\n    }\n    return this;\n  }\n\n  /**\n   * Call process.exit, and _exitCallback if defined.\n   *\n   * @param {number} exitCode exit code for using with process.exit\n   * @param {string} code an id string representing the error\n   * @param {string} message human-readable description of the error\n   * @return never\n   * @api private\n   */\n\n  _exit(exitCode, code, message) {\n    if (this._exitCallback) {\n      this._exitCallback(new CommanderError(exitCode, code, message));\n      // Expecting this line is not reached.\n    }\n    process.exit(exitCode);\n  }\n\n  /**\n   * Register callback `fn` for the command.\n   *\n   * @example\n   * program\n   *   .command('serve')\n   *   .description('start service')\n   *   .action(function() {\n   *      // do work here\n   *   });\n   *\n   * @param {Function} fn\n   * @return {Command} `this` command for chaining\n   */\n\n  action(fn) {\n    const listener = (args) => {\n      // The .action callback takes an extra parameter which is the command or options.\n      const expectedArgsCount = this.registeredArguments.length;\n      const actionArgs = args.slice(0, expectedArgsCount);\n      if (this._storeOptionsAsProperties) {\n        actionArgs[expectedArgsCount] = this; // backwards compatible \"options\"\n      } else {\n        actionArgs[expectedArgsCount] = this.opts();\n      }\n      actionArgs.push(this);\n\n      return fn.apply(this, actionArgs);\n    };\n    this._actionHandler = listener;\n    return this;\n  }\n\n  /**\n   * Factory routine to create a new unattached option.\n   *\n   * See .option() for creating an attached option, which uses this routine to\n   * create the option. You can override createOption to return a custom option.\n   *\n   * @param {string} flags\n   * @param {string} [description]\n   * @return {Option} new option\n   */\n\n  createOption(flags, description) {\n    return new Option(flags, description);\n  }\n\n  /**\n   * Wrap parseArgs to catch 'commander.invalidArgument'.\n   *\n   * @param {Option | Argument} target\n   * @param {string} value\n   * @param {*} previous\n   * @param {string} invalidArgumentMessage\n   * @api private\n   */\n\n  _callParseArg(target, value, previous, invalidArgumentMessage) {\n    try {\n      return target.parseArg(value, previous);\n    } catch (err) {\n      if (err.code === 'commander.invalidArgument') {\n        const message = `${invalidArgumentMessage} ${err.message}`;\n        this.error(message, { exitCode: err.exitCode, code: err.code });\n      }\n      throw err;\n    }\n  }\n\n  /**\n   * Add an option.\n   *\n   * @param {Option} option\n   * @return {Command} `this` command for chaining\n   */\n  addOption(option) {\n    const oname = option.name();\n    const name = option.attributeName();\n\n    // store default value\n    if (option.negate) {\n      // --no-foo is special and defaults foo to true, unless a --foo option is already defined\n      const positiveLongFlag = option.long.replace(/^--no-/, '--');\n      if (!this._findOption(positiveLongFlag)) {\n        this.setOptionValueWithSource(name, option.defaultValue === undefined ? true : option.defaultValue, 'default');\n      }\n    } else if (option.defaultValue !== undefined) {\n      this.setOptionValueWithSource(name, option.defaultValue, 'default');\n    }\n\n    // register the option\n    this.options.push(option);\n\n    // handler for cli and env supplied values\n    const handleOptionValue = (val, invalidValueMessage, valueSource) => {\n      // val is null for optional option used without an optional-argument.\n      // val is undefined for boolean and negated option.\n      if (val == null && option.presetArg !== undefined) {\n        val = option.presetArg;\n      }\n\n      // custom processing\n      const oldValue = this.getOptionValue(name);\n      if (val !== null && option.parseArg) {\n        val = this._callParseArg(option, val, oldValue, invalidValueMessage);\n      } else if (val !== null && option.variadic) {\n        val = option._concatValue(val, oldValue);\n      }\n\n      // Fill-in appropriate missing values. Long winded but easy to follow.\n      if (val == null) {\n        if (option.negate) {\n          val = false;\n        } else if (option.isBoolean() || option.optional) {\n          val = true;\n        } else {\n          val = ''; // not normal, parseArg might have failed or be a mock function for testing\n        }\n      }\n      this.setOptionValueWithSource(name, val, valueSource);\n    };\n\n    this.on('option:' + oname, (val) => {\n      const invalidValueMessage = `error: option '${option.flags}' argument '${val}' is invalid.`;\n      handleOptionValue(val, invalidValueMessage, 'cli');\n    });\n\n    if (option.envVar) {\n      this.on('optionEnv:' + oname, (val) => {\n        const invalidValueMessage = `error: option '${option.flags}' value '${val}' from env '${option.envVar}' is invalid.`;\n        handleOptionValue(val, invalidValueMessage, 'env');\n      });\n    }\n\n    return this;\n  }\n\n  /**\n   * Internal implementation shared by .option() and .requiredOption()\n   *\n   * @api private\n   */\n  _optionEx(config, flags, description, fn, defaultValue) {\n    if (typeof flags === 'object' && flags instanceof Option) {\n      throw new Error('To add an Option object use addOption() instead of option() or requiredOption()');\n    }\n    const option = this.createOption(flags, description);\n    option.makeOptionMandatory(!!config.mandatory);\n    if (typeof fn === 'function') {\n      option.default(defaultValue).argParser(fn);\n    } else if (fn instanceof RegExp) {\n      // deprecated\n      const regex = fn;\n      fn = (val, def) => {\n        const m = regex.exec(val);\n        return m ? m[0] : def;\n      };\n      option.default(defaultValue).argParser(fn);\n    } else {\n      option.default(fn);\n    }\n\n    return this.addOption(option);\n  }\n\n  /**\n   * Define option with `flags`, `description`, and optional argument parsing function or `defaultValue` or both.\n   *\n   * The `flags` string contains the short and/or long flags, separated by comma, a pipe or space. A required\n   * option-argument is indicated by `<>` and an optional option-argument by `[]`.\n   *\n   * See the README for more details, and see also addOption() and requiredOption().\n   *\n   * @example\n   * program\n   *     .option('-p, --pepper', 'add pepper')\n   *     .option('-p, --pizza-type <TYPE>', 'type of pizza') // required option-argument\n   *     .option('-c, --cheese [CHEESE]', 'add extra cheese', 'mozzarella') // optional option-argument with default\n   *     .option('-t, --tip <VALUE>', 'add tip to purchase cost', parseFloat) // custom parse function\n   *\n   * @param {string} flags\n   * @param {string} [description]\n   * @param {Function|*} [parseArg] - custom option processing function or default value\n   * @param {*} [defaultValue]\n   * @return {Command} `this` command for chaining\n   */\n\n  option(flags, description, parseArg, defaultValue) {\n    return this._optionEx({}, flags, description, parseArg, defaultValue);\n  }\n\n  /**\n  * Add a required option which must have a value after parsing. This usually means\n  * the option must be specified on the command line. (Otherwise the same as .option().)\n  *\n  * The `flags` string contains the short and/or long flags, separated by comma, a pipe or space.\n  *\n  * @param {string} flags\n  * @param {string} [description]\n  * @param {Function|*} [parseArg] - custom option processing function or default value\n  * @param {*} [defaultValue]\n  * @return {Command} `this` command for chaining\n  */\n\n  requiredOption(flags, description, parseArg, defaultValue) {\n    return this._optionEx({ mandatory: true }, flags, description, parseArg, defaultValue);\n  }\n\n  /**\n   * Alter parsing of short flags with optional values.\n   *\n   * @example\n   * // for `.option('-f,--flag [value]'):\n   * program.combineFlagAndOptionalValue(true);  // `-f80` is treated like `--flag=80`, this is the default behaviour\n   * program.combineFlagAndOptionalValue(false) // `-fb` is treated like `-f -b`\n   *\n   * @param {Boolean} [combine=true] - if `true` or omitted, an optional value can be specified directly after the flag.\n   */\n  combineFlagAndOptionalValue(combine = true) {\n    this._combineFlagAndOptionalValue = !!combine;\n    return this;\n  }\n\n  /**\n   * Allow unknown options on the command line.\n   *\n   * @param {Boolean} [allowUnknown=true] - if `true` or omitted, no error will be thrown\n   * for unknown options.\n   */\n  allowUnknownOption(allowUnknown = true) {\n    this._allowUnknownOption = !!allowUnknown;\n    return this;\n  }\n\n  /**\n   * Allow excess command-arguments on the command line. Pass false to make excess arguments an error.\n   *\n   * @param {Boolean} [allowExcess=true] - if `true` or omitted, no error will be thrown\n   * for excess arguments.\n   */\n  allowExcessArguments(allowExcess = true) {\n    this._allowExcessArguments = !!allowExcess;\n    return this;\n  }\n\n  /**\n   * Enable positional options. Positional means global options are specified before subcommands which lets\n   * subcommands reuse the same option names, and also enables subcommands to turn on passThroughOptions.\n   * The default behaviour is non-positional and global options may appear anywhere on the command line.\n   *\n   * @param {Boolean} [positional=true]\n   */\n  enablePositionalOptions(positional = true) {\n    this._enablePositionalOptions = !!positional;\n    return this;\n  }\n\n  /**\n   * Pass through options that come after command-arguments rather than treat them as command-options,\n   * so actual command-options come before command-arguments. Turning this on for a subcommand requires\n   * positional options to have been enabled on the program (parent commands).\n   * The default behaviour is non-positional and options may appear before or after command-arguments.\n   *\n   * @param {Boolean} [passThrough=true]\n   * for unknown options.\n   */\n  passThroughOptions(passThrough = true) {\n    this._passThroughOptions = !!passThrough;\n    if (!!this.parent && passThrough && !this.parent._enablePositionalOptions) {\n      throw new Error('passThroughOptions can not be used without turning on enablePositionalOptions for parent command(s)');\n    }\n    return this;\n  }\n\n  /**\n    * Whether to store option values as properties on command object,\n    * or store separately (specify false). In both cases the option values can be accessed using .opts().\n    *\n    * @param {boolean} [storeAsProperties=true]\n    * @return {Command} `this` command for chaining\n    */\n\n  storeOptionsAsProperties(storeAsProperties = true) {\n    if (this.options.length) {\n      throw new Error('call .storeOptionsAsProperties() before adding options');\n    }\n    // if (Object.keys(this._optionValues).length) {\n    //   throw new Error('call .storeOptionsAsProperties() before setting option values');\n    // }\n    this._storeOptionsAsProperties = !!storeAsProperties;\n    return this;\n  }\n\n  /**\n   * Retrieve option value.\n   *\n   * @param {string} key\n   * @return {Object} value\n   */\n\n  getOptionValue(key) {\n    if (this._storeOptionsAsProperties) {\n      return this[key];\n    }\n    return this._optionValues[key];\n  }\n\n  /**\n   * Store option value.\n   *\n   * @param {string} key\n   * @param {Object} value\n   * @return {Command} `this` command for chaining\n   */\n\n  setOptionValue(key, value) {\n    return this.setOptionValueWithSource(key, value, undefined);\n  }\n\n  /**\n    * Store option value and where the value came from.\n    *\n    * @param {string} key\n    * @param {Object} value\n    * @param {string} source - expected values are default/config/env/cli/implied\n    * @return {Command} `this` command for chaining\n    */\n\n  setOptionValueWithSource(key, value, source) {\n    if (this._storeOptionsAsProperties) {\n      this[key] = value;\n    } else {\n      this._optionValues[key] = value;\n    }\n    this._optionValueSources[key] = source;\n    return this;\n  }\n\n  /**\n    * Get source of option value.\n    * Expected values are default | config | env | cli | implied\n    *\n    * @param {string} key\n    * @return {string}\n    */\n\n  getOptionValueSource(key) {\n    return this._optionValueSources[key];\n  }\n\n  /**\n    * Get source of option value. See also .optsWithGlobals().\n    * Expected values are default | config | env | cli | implied\n    *\n    * @param {string} key\n    * @return {string}\n    */\n\n  getOptionValueSourceWithGlobals(key) {\n    // global overwrites local, like optsWithGlobals\n    let source;\n    this._getCommandAndAncestors().forEach((cmd) => {\n      if (cmd.getOptionValueSource(key) !== undefined) {\n        source = cmd.getOptionValueSource(key);\n      }\n    });\n    return source;\n  }\n\n  /**\n   * Get user arguments from implied or explicit arguments.\n   * Side-effects: set _scriptPath if args included script. Used for default program name, and subcommand searches.\n   *\n   * @api private\n   */\n\n  _prepareUserArgs(argv, parseOptions) {\n    if (argv !== undefined && !Array.isArray(argv)) {\n      throw new Error('first parameter to parse must be array or undefined');\n    }\n    parseOptions = parseOptions || {};\n\n    // Default to using process.argv\n    if (argv === undefined) {\n      argv = process.argv;\n      // @ts-ignore: unknown property\n      if (process.versions && process.versions.electron) {\n        parseOptions.from = 'electron';\n      }\n    }\n    this.rawArgs = argv.slice();\n\n    // make it a little easier for callers by supporting various argv conventions\n    let userArgs;\n    switch (parseOptions.from) {\n      case undefined:\n      case 'node':\n        this._scriptPath = argv[1];\n        userArgs = argv.slice(2);\n        break;\n      case 'electron':\n        // @ts-ignore: unknown property\n        if (process.defaultApp) {\n          this._scriptPath = argv[1];\n          userArgs = argv.slice(2);\n        } else {\n          userArgs = argv.slice(1);\n        }\n        break;\n      case 'user':\n        userArgs = argv.slice(0);\n        break;\n      default:\n        throw new Error(`unexpected parse option { from: '${parseOptions.from}' }`);\n    }\n\n    // Find default name for program from arguments.\n    if (!this._name && this._scriptPath) this.nameFromFilename(this._scriptPath);\n    this._name = this._name || 'program';\n\n    return userArgs;\n  }\n\n  /**\n   * Parse `argv`, setting options and invoking commands when defined.\n   *\n   * The default expectation is that the arguments are from node and have the application as argv[0]\n   * and the script being run in argv[1], with user parameters after that.\n   *\n   * @example\n   * program.parse(process.argv);\n   * program.parse(); // implicitly use process.argv and auto-detect node vs electron conventions\n   * program.parse(my-args, { from: 'user' }); // just user supplied arguments, nothing special about argv[0]\n   *\n   * @param {string[]} [argv] - optional, defaults to process.argv\n   * @param {Object} [parseOptions] - optionally specify style of options with from: node/user/electron\n   * @param {string} [parseOptions.from] - where the args are from: 'node', 'user', 'electron'\n   * @return {Command} `this` command for chaining\n   */\n\n  parse(argv, parseOptions) {\n    const userArgs = this._prepareUserArgs(argv, parseOptions);\n    this._parseCommand([], userArgs);\n\n    return this;\n  }\n\n  /**\n   * Parse `argv`, setting options and invoking commands when defined.\n   *\n   * Use parseAsync instead of parse if any of your action handlers are async. Returns a Promise.\n   *\n   * The default expectation is that the arguments are from node and have the application as argv[0]\n   * and the script being run in argv[1], with user parameters after that.\n   *\n   * @example\n   * await program.parseAsync(process.argv);\n   * await program.parseAsync(); // implicitly use process.argv and auto-detect node vs electron conventions\n   * await program.parseAsync(my-args, { from: 'user' }); // just user supplied arguments, nothing special about argv[0]\n   *\n   * @param {string[]} [argv]\n   * @param {Object} [parseOptions]\n   * @param {string} parseOptions.from - where the args are from: 'node', 'user', 'electron'\n   * @return {Promise}\n   */\n\n  async parseAsync(argv, parseOptions) {\n    const userArgs = this._prepareUserArgs(argv, parseOptions);\n    await this._parseCommand([], userArgs);\n\n    return this;\n  }\n\n  /**\n   * Execute a sub-command executable.\n   *\n   * @api private\n   */\n\n  _executeSubCommand(subcommand, args) {\n    args = args.slice();\n    let launchWithNode = false; // Use node for source targets so do not need to get permissions correct, and on Windows.\n    const sourceExt = ['.js', '.ts', '.tsx', '.mjs', '.cjs'];\n\n    function findFile(baseDir, baseName) {\n      // Look for specified file\n      const localBin = path.resolve(baseDir, baseName);\n      if (fs.existsSync(localBin)) return localBin;\n\n      // Stop looking if candidate already has an expected extension.\n      if (sourceExt.includes(path.extname(baseName))) return undefined;\n\n      // Try all the extensions.\n      const foundExt = sourceExt.find(ext => fs.existsSync(`${localBin}${ext}`));\n      if (foundExt) return `${localBin}${foundExt}`;\n\n      return undefined;\n    }\n\n    // Not checking for help first. Unlikely to have mandatory and executable, and can't robustly test for help flags in external command.\n    this._checkForMissingMandatoryOptions();\n    this._checkForConflictingOptions();\n\n    // executableFile and executableDir might be full path, or just a name\n    let executableFile = subcommand._executableFile || `${this._name}-${subcommand._name}`;\n    let executableDir = this._executableDir || '';\n    if (this._scriptPath) {\n      let resolvedScriptPath; // resolve possible symlink for installed npm binary\n      try {\n        resolvedScriptPath = fs.realpathSync(this._scriptPath);\n      } catch (err) {\n        resolvedScriptPath = this._scriptPath;\n      }\n      executableDir = path.resolve(path.dirname(resolvedScriptPath), executableDir);\n    }\n\n    // Look for a local file in preference to a command in PATH.\n    if (executableDir) {\n      let localFile = findFile(executableDir, executableFile);\n\n      // Legacy search using prefix of script name instead of command name\n      if (!localFile && !subcommand._executableFile && this._scriptPath) {\n        const legacyName = path.basename(this._scriptPath, path.extname(this._scriptPath));\n        if (legacyName !== this._name) {\n          localFile = findFile(executableDir, `${legacyName}-${subcommand._name}`);\n        }\n      }\n      executableFile = localFile || executableFile;\n    }\n\n    launchWithNode = sourceExt.includes(path.extname(executableFile));\n\n    let proc;\n    if (process.platform !== 'win32') {\n      if (launchWithNode) {\n        args.unshift(executableFile);\n        // add executable arguments to spawn\n        args = incrementNodeInspectorPort(process.execArgv).concat(args);\n\n        proc = childProcess.spawn(process.argv[0], args, { stdio: 'inherit' });\n      } else {\n        proc = childProcess.spawn(executableFile, args, { stdio: 'inherit' });\n      }\n    } else {\n      args.unshift(executableFile);\n      // add executable arguments to spawn\n      args = incrementNodeInspectorPort(process.execArgv).concat(args);\n      proc = childProcess.spawn(process.execPath, args, { stdio: 'inherit' });\n    }\n\n    if (!proc.killed) { // testing mainly to avoid leak warnings during unit tests with mocked spawn\n      const signals = ['SIGUSR1', 'SIGUSR2', 'SIGTERM', 'SIGINT', 'SIGHUP'];\n      signals.forEach((signal) => {\n        // @ts-ignore\n        process.on(signal, () => {\n          if (proc.killed === false && proc.exitCode === null) {\n            proc.kill(signal);\n          }\n        });\n      });\n    }\n\n    // By default terminate process when spawned process terminates.\n    // Suppressing the exit if exitCallback defined is a bit messy and of limited use, but does allow process to stay running!\n    const exitCallback = this._exitCallback;\n    if (!exitCallback) {\n      proc.on('close', process.exit.bind(process));\n    } else {\n      proc.on('close', () => {\n        exitCallback(new CommanderError(process.exitCode || 0, 'commander.executeSubCommandAsync', '(close)'));\n      });\n    }\n    proc.on('error', (err) => {\n      // @ts-ignore\n      if (err.code === 'ENOENT') {\n        const executableDirMessage = executableDir\n          ? `searched for local subcommand relative to directory '${executableDir}'`\n          : 'no directory for search for local subcommand, use .executableDir() to supply a custom directory';\n        const executableMissing = `'${executableFile}' does not exist\n - if '${subcommand._name}' is not meant to be an executable command, remove description parameter from '.command()' and use '.description()' instead\n - if the default executable name is not suitable, use the executableFile option to supply a custom name or path\n - ${executableDirMessage}`;\n        throw new Error(executableMissing);\n      // @ts-ignore\n      } else if (err.code === 'EACCES') {\n        throw new Error(`'${executableFile}' not executable`);\n      }\n      if (!exitCallback) {\n        process.exit(1);\n      } else {\n        const wrappedError = new CommanderError(1, 'commander.executeSubCommandAsync', '(error)');\n        wrappedError.nestedError = err;\n        exitCallback(wrappedError);\n      }\n    });\n\n    // Store the reference to the child process\n    this.runningCommand = proc;\n  }\n\n  /**\n   * @api private\n   */\n\n  _dispatchSubcommand(commandName, operands, unknown) {\n    const subCommand = this._findCommand(commandName);\n    if (!subCommand) this.help({ error: true });\n\n    let promiseChain;\n    promiseChain = this._chainOrCallSubCommandHook(promiseChain, subCommand, 'preSubcommand');\n    promiseChain = this._chainOrCall(promiseChain, () => {\n      if (subCommand._executableHandler) {\n        this._executeSubCommand(subCommand, operands.concat(unknown));\n      } else {\n        return subCommand._parseCommand(operands, unknown);\n      }\n    });\n    return promiseChain;\n  }\n\n  /**\n   * Invoke help directly if possible, or dispatch if necessary.\n   * e.g. help foo\n   *\n   * @api private\n   */\n\n  _dispatchHelpCommand(subcommandName) {\n    if (!subcommandName) {\n      this.help();\n    }\n    const subCommand = this._findCommand(subcommandName);\n    if (subCommand && !subCommand._executableHandler) {\n      subCommand.help();\n    }\n\n    // Fallback to parsing the help flag to invoke the help.\n    return this._dispatchSubcommand(subcommandName, [], [\n      this._helpLongFlag || this._helpShortFlag\n    ]);\n  }\n\n  /**\n   * Check this.args against expected this.registeredArguments.\n   *\n   * @api private\n   */\n\n  _checkNumberOfArguments() {\n    // too few\n    this.registeredArguments.forEach((arg, i) => {\n      if (arg.required && this.args[i] == null) {\n        this.missingArgument(arg.name());\n      }\n    });\n    // too many\n    if (this.registeredArguments.length > 0 && this.registeredArguments[this.registeredArguments.length - 1].variadic) {\n      return;\n    }\n    if (this.args.length > this.registeredArguments.length) {\n      this._excessArguments(this.args);\n    }\n  }\n\n  /**\n   * Process this.args using this.registeredArguments and save as this.processedArgs!\n   *\n   * @api private\n   */\n\n  _processArguments() {\n    const myParseArg = (argument, value, previous) => {\n      // Extra processing for nice error message on parsing failure.\n      let parsedValue = value;\n      if (value !== null && argument.parseArg) {\n        const invalidValueMessage = `error: command-argument value '${value}' is invalid for argument '${argument.name()}'.`;\n        parsedValue = this._callParseArg(argument, value, previous, invalidValueMessage);\n      }\n      return parsedValue;\n    };\n\n    this._checkNumberOfArguments();\n\n    const processedArgs = [];\n    this.registeredArguments.forEach((declaredArg, index) => {\n      let value = declaredArg.defaultValue;\n      if (declaredArg.variadic) {\n        // Collect together remaining arguments for passing together as an array.\n        if (index < this.args.length) {\n          value = this.args.slice(index);\n          if (declaredArg.parseArg) {\n            value = value.reduce((processed, v) => {\n              return myParseArg(declaredArg, v, processed);\n            }, declaredArg.defaultValue);\n          }\n        } else if (value === undefined) {\n          value = [];\n        }\n      } else if (index < this.args.length) {\n        value = this.args[index];\n        if (declaredArg.parseArg) {\n          value = myParseArg(declaredArg, value, declaredArg.defaultValue);\n        }\n      }\n      processedArgs[index] = value;\n    });\n    this.processedArgs = processedArgs;\n  }\n\n  /**\n   * Once we have a promise we chain, but call synchronously until then.\n   *\n   * @param {Promise|undefined} promise\n   * @param {Function} fn\n   * @return {Promise|undefined}\n   * @api private\n   */\n\n  _chainOrCall(promise, fn) {\n    // thenable\n    if (promise && promise.then && typeof promise.then === 'function') {\n      // already have a promise, chain callback\n      return promise.then(() => fn());\n    }\n    // callback might return a promise\n    return fn();\n  }\n\n  /**\n   *\n   * @param {Promise|undefined} promise\n   * @param {string} event\n   * @return {Promise|undefined}\n   * @api private\n   */\n\n  _chainOrCallHooks(promise, event) {\n    let result = promise;\n    const hooks = [];\n    this._getCommandAndAncestors()\n      .reverse()\n      .filter(cmd => cmd._lifeCycleHooks[event] !== undefined)\n      .forEach(hookedCommand => {\n        hookedCommand._lifeCycleHooks[event].forEach((callback) => {\n          hooks.push({ hookedCommand, callback });\n        });\n      });\n    if (event === 'postAction') {\n      hooks.reverse();\n    }\n\n    hooks.forEach((hookDetail) => {\n      result = this._chainOrCall(result, () => {\n        return hookDetail.callback(hookDetail.hookedCommand, this);\n      });\n    });\n    return result;\n  }\n\n  /**\n   *\n   * @param {Promise|undefined} promise\n   * @param {Command} subCommand\n   * @param {string} event\n   * @return {Promise|undefined}\n   * @api private\n   */\n\n  _chainOrCallSubCommandHook(promise, subCommand, event) {\n    let result = promise;\n    if (this._lifeCycleHooks[event] !== undefined) {\n      this._lifeCycleHooks[event].forEach((hook) => {\n        result = this._chainOrCall(result, () => {\n          return hook(this, subCommand);\n        });\n      });\n    }\n    return result;\n  }\n\n  /**\n   * Process arguments in context of this command.\n   * Returns action result, in case it is a promise.\n   *\n   * @api private\n   */\n\n  _parseCommand(operands, unknown) {\n    const parsed = this.parseOptions(unknown);\n    this._parseOptionsEnv(); // after cli, so parseArg not called on both cli and env\n    this._parseOptionsImplied();\n    operands = operands.concat(parsed.operands);\n    unknown = parsed.unknown;\n    this.args = operands.concat(unknown);\n\n    if (operands && this._findCommand(operands[0])) {\n      return this._dispatchSubcommand(operands[0], operands.slice(1), unknown);\n    }\n    if (this._hasImplicitHelpCommand() && operands[0] === this._helpCommandName) {\n      return this._dispatchHelpCommand(operands[1]);\n    }\n    if (this._defaultCommandName) {\n      outputHelpIfRequested(this, unknown); // Run the help for default command from parent rather than passing to default command\n      return this._dispatchSubcommand(this._defaultCommandName, operands, unknown);\n    }\n    if (this.commands.length && this.args.length === 0 && !this._actionHandler && !this._defaultCommandName) {\n      // probably missing subcommand and no handler, user needs help (and exit)\n      this.help({ error: true });\n    }\n\n    outputHelpIfRequested(this, parsed.unknown);\n    this._checkForMissingMandatoryOptions();\n    this._checkForConflictingOptions();\n\n    // We do not always call this check to avoid masking a \"better\" error, like unknown command.\n    const checkForUnknownOptions = () => {\n      if (parsed.unknown.length > 0) {\n        this.unknownOption(parsed.unknown[0]);\n      }\n    };\n\n    const commandEvent = `command:${this.name()}`;\n    if (this._actionHandler) {\n      checkForUnknownOptions();\n      this._processArguments();\n\n      let promiseChain;\n      promiseChain = this._chainOrCallHooks(promiseChain, 'preAction');\n      promiseChain = this._chainOrCall(promiseChain, () => this._actionHandler(this.processedArgs));\n      if (this.parent) {\n        promiseChain = this._chainOrCall(promiseChain, () => {\n          this.parent.emit(commandEvent, operands, unknown); // legacy\n        });\n      }\n      promiseChain = this._chainOrCallHooks(promiseChain, 'postAction');\n      return promiseChain;\n    }\n    if (this.parent && this.parent.listenerCount(commandEvent)) {\n      checkForUnknownOptions();\n      this._processArguments();\n      this.parent.emit(commandEvent, operands, unknown); // legacy\n    } else if (operands.length) {\n      if (this._findCommand('*')) { // legacy default command\n        return this._dispatchSubcommand('*', operands, unknown);\n      }\n      if (this.listenerCount('command:*')) {\n        // skip option check, emit event for possible misspelling suggestion\n        this.emit('command:*', operands, unknown);\n      } else if (this.commands.length) {\n        this.unknownCommand();\n      } else {\n        checkForUnknownOptions();\n        this._processArguments();\n      }\n    } else if (this.commands.length) {\n      checkForUnknownOptions();\n      // This command has subcommands and nothing hooked up at this level, so display help (and exit).\n      this.help({ error: true });\n    } else {\n      checkForUnknownOptions();\n      this._processArguments();\n      // fall through for caller to handle after calling .parse()\n    }\n  }\n\n  /**\n   * Find matching command.\n   *\n   * @api private\n   */\n  _findCommand(name) {\n    if (!name) return undefined;\n    return this.commands.find(cmd => cmd._name === name || cmd._aliases.includes(name));\n  }\n\n  /**\n   * Return an option matching `arg` if any.\n   *\n   * @param {string} arg\n   * @return {Option}\n   * @api private\n   */\n\n  _findOption(arg) {\n    return this.options.find(option => option.is(arg));\n  }\n\n  /**\n   * Display an error message if a mandatory option does not have a value.\n   * Called after checking for help flags in leaf subcommand.\n   *\n   * @api private\n   */\n\n  _checkForMissingMandatoryOptions() {\n    // Walk up hierarchy so can call in subcommand after checking for displaying help.\n    this._getCommandAndAncestors().forEach((cmd) => {\n      cmd.options.forEach((anOption) => {\n        if (anOption.mandatory && (cmd.getOptionValue(anOption.attributeName()) === undefined)) {\n          cmd.missingMandatoryOptionValue(anOption);\n        }\n      });\n    });\n  }\n\n  /**\n   * Display an error message if conflicting options are used together in this.\n   *\n   * @api private\n   */\n  _checkForConflictingLocalOptions() {\n    const definedNonDefaultOptions = this.options.filter(\n      (option) => {\n        const optionKey = option.attributeName();\n        if (this.getOptionValue(optionKey) === undefined) {\n          return false;\n        }\n        return this.getOptionValueSource(optionKey) !== 'default';\n      }\n    );\n\n    const optionsWithConflicting = definedNonDefaultOptions.filter(\n      (option) => option.conflictsWith.length > 0\n    );\n\n    optionsWithConflicting.forEach((option) => {\n      const conflictingAndDefined = definedNonDefaultOptions.find((defined) =>\n        option.conflictsWith.includes(defined.attributeName())\n      );\n      if (conflictingAndDefined) {\n        this._conflictingOption(option, conflictingAndDefined);\n      }\n    });\n  }\n\n  /**\n   * Display an error message if conflicting options are used together.\n   * Called after checking for help flags in leaf subcommand.\n   *\n   * @api private\n   */\n  _checkForConflictingOptions() {\n    // Walk up hierarchy so can call in subcommand after checking for displaying help.\n    this._getCommandAndAncestors().forEach((cmd) => {\n      cmd._checkForConflictingLocalOptions();\n    });\n  }\n\n  /**\n   * Parse options from `argv` removing known options,\n   * and return argv split into operands and unknown arguments.\n   *\n   * Examples:\n   *\n   *     argv => operands, unknown\n   *     --known kkk op => [op], []\n   *     op --known kkk => [op], []\n   *     sub --unknown uuu op => [sub], [--unknown uuu op]\n   *     sub -- --unknown uuu op => [sub --unknown uuu op], []\n   *\n   * @param {String[]} argv\n   * @return {{operands: String[], unknown: String[]}}\n   */\n\n  parseOptions(argv) {\n    const operands = []; // operands, not options or values\n    const unknown = []; // first unknown option and remaining unknown args\n    let dest = operands;\n    const args = argv.slice();\n\n    function maybeOption(arg) {\n      return arg.length > 1 && arg[0] === '-';\n    }\n\n    // parse options\n    let activeVariadicOption = null;\n    while (args.length) {\n      const arg = args.shift();\n\n      // literal\n      if (arg === '--') {\n        if (dest === unknown) dest.push(arg);\n        dest.push(...args);\n        break;\n      }\n\n      if (activeVariadicOption && !maybeOption(arg)) {\n        this.emit(`option:${activeVariadicOption.name()}`, arg);\n        continue;\n      }\n      activeVariadicOption = null;\n\n      if (maybeOption(arg)) {\n        const option = this._findOption(arg);\n        // recognised option, call listener to assign value with possible custom processing\n        if (option) {\n          if (option.required) {\n            const value = args.shift();\n            if (value === undefined) this.optionMissingArgument(option);\n            this.emit(`option:${option.name()}`, value);\n          } else if (option.optional) {\n            let value = null;\n            // historical behaviour is optional value is following arg unless an option\n            if (args.length > 0 && !maybeOption(args[0])) {\n              value = args.shift();\n            }\n            this.emit(`option:${option.name()}`, value);\n          } else { // boolean flag\n            this.emit(`option:${option.name()}`);\n          }\n          activeVariadicOption = option.variadic ? option : null;\n          continue;\n        }\n      }\n\n      // Look for combo options following single dash, eat first one if known.\n      if (arg.length > 2 && arg[0] === '-' && arg[1] !== '-') {\n        const option = this._findOption(`-${arg[1]}`);\n        if (option) {\n          if (option.required || (option.optional && this._combineFlagAndOptionalValue)) {\n            // option with value following in same argument\n            this.emit(`option:${option.name()}`, arg.slice(2));\n          } else {\n            // boolean option, emit and put back remainder of arg for further processing\n            this.emit(`option:${option.name()}`);\n            args.unshift(`-${arg.slice(2)}`);\n          }\n          continue;\n        }\n      }\n\n      // Look for known long flag with value, like --foo=bar\n      if (/^--[^=]+=/.test(arg)) {\n        const index = arg.indexOf('=');\n        const option = this._findOption(arg.slice(0, index));\n        if (option && (option.required || option.optional)) {\n          this.emit(`option:${option.name()}`, arg.slice(index + 1));\n          continue;\n        }\n      }\n\n      // Not a recognised option by this command.\n      // Might be a command-argument, or subcommand option, or unknown option, or help command or option.\n\n      // An unknown option means further arguments also classified as unknown so can be reprocessed by subcommands.\n      if (maybeOption(arg)) {\n        dest = unknown;\n      }\n\n      // If using positionalOptions, stop processing our options at subcommand.\n      if ((this._enablePositionalOptions || this._passThroughOptions) && operands.length === 0 && unknown.length === 0) {\n        if (this._findCommand(arg)) {\n          operands.push(arg);\n          if (args.length > 0) unknown.push(...args);\n          break;\n        } else if (arg === this._helpCommandName && this._hasImplicitHelpCommand()) {\n          operands.push(arg);\n          if (args.length > 0) operands.push(...args);\n          break;\n        } else if (this._defaultCommandName) {\n          unknown.push(arg);\n          if (args.length > 0) unknown.push(...args);\n          break;\n        }\n      }\n\n      // If using passThroughOptions, stop processing options at first command-argument.\n      if (this._passThroughOptions) {\n        dest.push(arg);\n        if (args.length > 0) dest.push(...args);\n        break;\n      }\n\n      // add arg\n      dest.push(arg);\n    }\n\n    return { operands, unknown };\n  }\n\n  /**\n   * Return an object containing local option values as key-value pairs.\n   *\n   * @return {Object}\n   */\n  opts() {\n    if (this._storeOptionsAsProperties) {\n      // Preserve original behaviour so backwards compatible when still using properties\n      const result = {};\n      const len = this.options.length;\n\n      for (let i = 0; i < len; i++) {\n        const key = this.options[i].attributeName();\n        result[key] = key === this._versionOptionName ? this._version : this[key];\n      }\n      return result;\n    }\n\n    return this._optionValues;\n  }\n\n  /**\n   * Return an object containing merged local and global option values as key-value pairs.\n   *\n   * @return {Object}\n   */\n  optsWithGlobals() {\n    // globals overwrite locals\n    return this._getCommandAndAncestors().reduce(\n      (combinedOptions, cmd) => Object.assign(combinedOptions, cmd.opts()),\n      {}\n    );\n  }\n\n  /**\n   * Display error message and exit (or call exitOverride).\n   *\n   * @param {string} message\n   * @param {Object} [errorOptions]\n   * @param {string} [errorOptions.code] - an id string representing the error\n   * @param {number} [errorOptions.exitCode] - used with process.exit\n   */\n  error(message, errorOptions) {\n    // output handling\n    this._outputConfiguration.outputError(`${message}\\n`, this._outputConfiguration.writeErr);\n    if (typeof this._showHelpAfterError === 'string') {\n      this._outputConfiguration.writeErr(`${this._showHelpAfterError}\\n`);\n    } else if (this._showHelpAfterError) {\n      this._outputConfiguration.writeErr('\\n');\n      this.outputHelp({ error: true });\n    }\n\n    // exit handling\n    const config = errorOptions || {};\n    const exitCode = config.exitCode || 1;\n    const code = config.code || 'commander.error';\n    this._exit(exitCode, code, message);\n  }\n\n  /**\n   * Apply any option related environment variables, if option does\n   * not have a value from cli or client code.\n   *\n   * @api private\n   */\n  _parseOptionsEnv() {\n    this.options.forEach((option) => {\n      if (option.envVar && option.envVar in process.env) {\n        const optionKey = option.attributeName();\n        // Priority check. Do not overwrite cli or options from unknown source (client-code).\n        if (this.getOptionValue(optionKey) === undefined || ['default', 'config', 'env'].includes(this.getOptionValueSource(optionKey))) {\n          if (option.required || option.optional) { // option can take a value\n            // keep very simple, optional always takes value\n            this.emit(`optionEnv:${option.name()}`, process.env[option.envVar]);\n          } else { // boolean\n            // keep very simple, only care that envVar defined and not the value\n            this.emit(`optionEnv:${option.name()}`);\n          }\n        }\n      }\n    });\n  }\n\n  /**\n   * Apply any implied option values, if option is undefined or default value.\n   *\n   * @api private\n   */\n  _parseOptionsImplied() {\n    const dualHelper = new DualOptions(this.options);\n    const hasCustomOptionValue = (optionKey) => {\n      return this.getOptionValue(optionKey) !== undefined && !['default', 'implied'].includes(this.getOptionValueSource(optionKey));\n    };\n    this.options\n      .filter(option => (option.implied !== undefined) &&\n        hasCustomOptionValue(option.attributeName()) &&\n        dualHelper.valueFromOption(this.getOptionValue(option.attributeName()), option))\n      .forEach((option) => {\n        Object.keys(option.implied)\n          .filter(impliedKey => !hasCustomOptionValue(impliedKey))\n          .forEach(impliedKey => {\n            this.setOptionValueWithSource(impliedKey, option.implied[impliedKey], 'implied');\n          });\n      });\n  }\n\n  /**\n   * Argument `name` is missing.\n   *\n   * @param {string} name\n   * @api private\n   */\n\n  missingArgument(name) {\n    const message = `error: missing required argument '${name}'`;\n    this.error(message, { code: 'commander.missingArgument' });\n  }\n\n  /**\n   * `Option` is missing an argument.\n   *\n   * @param {Option} option\n   * @api private\n   */\n\n  optionMissingArgument(option) {\n    const message = `error: option '${option.flags}' argument missing`;\n    this.error(message, { code: 'commander.optionMissingArgument' });\n  }\n\n  /**\n   * `Option` does not have a value, and is a mandatory option.\n   *\n   * @param {Option} option\n   * @api private\n   */\n\n  missingMandatoryOptionValue(option) {\n    const message = `error: required option '${option.flags}' not specified`;\n    this.error(message, { code: 'commander.missingMandatoryOptionValue' });\n  }\n\n  /**\n   * `Option` conflicts with another option.\n   *\n   * @param {Option} option\n   * @param {Option} conflictingOption\n   * @api private\n   */\n  _conflictingOption(option, conflictingOption) {\n    // The calling code does not know whether a negated option is the source of the\n    // value, so do some work to take an educated guess.\n    const findBestOptionFromValue = (option) => {\n      const optionKey = option.attributeName();\n      const optionValue = this.getOptionValue(optionKey);\n      const negativeOption = this.options.find(target => target.negate && optionKey === target.attributeName());\n      const positiveOption = this.options.find(target => !target.negate && optionKey === target.attributeName());\n      if (negativeOption && (\n        (negativeOption.presetArg === undefined && optionValue === false) ||\n        (negativeOption.presetArg !== undefined && optionValue === negativeOption.presetArg)\n      )) {\n        return negativeOption;\n      }\n      return positiveOption || option;\n    };\n\n    const getErrorMessage = (option) => {\n      const bestOption = findBestOptionFromValue(option);\n      const optionKey = bestOption.attributeName();\n      const source = this.getOptionValueSource(optionKey);\n      if (source === 'env') {\n        return `environment variable '${bestOption.envVar}'`;\n      }\n      return `option '${bestOption.flags}'`;\n    };\n\n    const message = `error: ${getErrorMessage(option)} cannot be used with ${getErrorMessage(conflictingOption)}`;\n    this.error(message, { code: 'commander.conflictingOption' });\n  }\n\n  /**\n   * Unknown option `flag`.\n   *\n   * @param {string} flag\n   * @api private\n   */\n\n  unknownOption(flag) {\n    if (this._allowUnknownOption) return;\n    let suggestion = '';\n\n    if (flag.startsWith('--') && this._showSuggestionAfterError) {\n      // Looping to pick up the global options too\n      let candidateFlags = [];\n      let command = this;\n      do {\n        const moreFlags = command.createHelp().visibleOptions(command)\n          .filter(option => option.long)\n          .map(option => option.long);\n        candidateFlags = candidateFlags.concat(moreFlags);\n        command = command.parent;\n      } while (command && !command._enablePositionalOptions);\n      suggestion = suggestSimilar(flag, candidateFlags);\n    }\n\n    const message = `error: unknown option '${flag}'${suggestion}`;\n    this.error(message, { code: 'commander.unknownOption' });\n  }\n\n  /**\n   * Excess arguments, more than expected.\n   *\n   * @param {string[]} receivedArgs\n   * @api private\n   */\n\n  _excessArguments(receivedArgs) {\n    if (this._allowExcessArguments) return;\n\n    const expected = this.registeredArguments.length;\n    const s = (expected === 1) ? '' : 's';\n    const forSubcommand = this.parent ? ` for '${this.name()}'` : '';\n    const message = `error: too many arguments${forSubcommand}. Expected ${expected} argument${s} but got ${receivedArgs.length}.`;\n    this.error(message, { code: 'commander.excessArguments' });\n  }\n\n  /**\n   * Unknown command.\n   *\n   * @api private\n   */\n\n  unknownCommand() {\n    const unknownName = this.args[0];\n    let suggestion = '';\n\n    if (this._showSuggestionAfterError) {\n      const candidateNames = [];\n      this.createHelp().visibleCommands(this).forEach((command) => {\n        candidateNames.push(command.name());\n        // just visible alias\n        if (command.alias()) candidateNames.push(command.alias());\n      });\n      suggestion = suggestSimilar(unknownName, candidateNames);\n    }\n\n    const message = `error: unknown command '${unknownName}'${suggestion}`;\n    this.error(message, { code: 'commander.unknownCommand' });\n  }\n\n  /**\n   * Get or set the program version.\n   *\n   * This method auto-registers the \"-V, --version\" option which will print the version number.\n   *\n   * You can optionally supply the flags and description to override the defaults.\n   *\n   * @param {string} [str]\n   * @param {string} [flags]\n   * @param {string} [description]\n   * @return {this | string | undefined} `this` command for chaining, or version string if no arguments\n   */\n\n  version(str, flags, description) {\n    if (str === undefined) return this._version;\n    this._version = str;\n    flags = flags || '-V, --version';\n    description = description || 'output the version number';\n    const versionOption = this.createOption(flags, description);\n    this._versionOptionName = versionOption.attributeName(); // [sic] not defined in constructor, partly legacy, partly only needed at root\n    this.options.push(versionOption);\n    this.on('option:' + versionOption.name(), () => {\n      this._outputConfiguration.writeOut(`${str}\\n`);\n      this._exit(0, 'commander.version', str);\n    });\n    return this;\n  }\n\n  /**\n   * Set the description.\n   *\n   * @param {string} [str]\n   * @param {Object} [argsDescription]\n   * @return {string|Command}\n   */\n  description(str, argsDescription) {\n    if (str === undefined && argsDescription === undefined) return this._description;\n    this._description = str;\n    if (argsDescription) {\n      this._argsDescription = argsDescription;\n    }\n    return this;\n  }\n\n  /**\n   * Set the summary. Used when listed as subcommand of parent.\n   *\n   * @param {string} [str]\n   * @return {string|Command}\n   */\n  summary(str) {\n    if (str === undefined) return this._summary;\n    this._summary = str;\n    return this;\n  }\n\n  /**\n   * Set an alias for the command.\n   *\n   * You may call more than once to add multiple aliases. Only the first alias is shown in the auto-generated help.\n   *\n   * @param {string} [alias]\n   * @return {string|Command}\n   */\n\n  alias(alias) {\n    if (alias === undefined) return this._aliases[0]; // just return first, for backwards compatibility\n\n    /** @type {Command} */\n    let command = this;\n    if (this.commands.length !== 0 && this.commands[this.commands.length - 1]._executableHandler) {\n      // assume adding alias for last added executable subcommand, rather than this\n      command = this.commands[this.commands.length - 1];\n    }\n\n    if (alias === command._name) throw new Error('Command alias can\\'t be the same as its name');\n\n    command._aliases.push(alias);\n    return this;\n  }\n\n  /**\n   * Set aliases for the command.\n   *\n   * Only the first alias is shown in the auto-generated help.\n   *\n   * @param {string[]} [aliases]\n   * @return {string[]|Command}\n   */\n\n  aliases(aliases) {\n    // Getter for the array of aliases is the main reason for having aliases() in addition to alias().\n    if (aliases === undefined) return this._aliases;\n\n    aliases.forEach((alias) => this.alias(alias));\n    return this;\n  }\n\n  /**\n   * Set / get the command usage `str`.\n   *\n   * @param {string} [str]\n   * @return {String|Command}\n   */\n\n  usage(str) {\n    if (str === undefined) {\n      if (this._usage) return this._usage;\n\n      const args = this.registeredArguments.map((arg) => {\n        return humanReadableArgName(arg);\n      });\n      return [].concat(\n        (this.options.length || this._hasHelpOption ? '[options]' : []),\n        (this.commands.length ? '[command]' : []),\n        (this.registeredArguments.length ? args : [])\n      ).join(' ');\n    }\n\n    this._usage = str;\n    return this;\n  }\n\n  /**\n   * Get or set the name of the command.\n   *\n   * @param {string} [str]\n   * @return {string|Command}\n   */\n\n  name(str) {\n    if (str === undefined) return this._name;\n    this._name = str;\n    return this;\n  }\n\n  /**\n   * Set the name of the command from script filename, such as process.argv[1],\n   * or require.main.filename, or __filename.\n   *\n   * (Used internally and public although not documented in README.)\n   *\n   * @example\n   * program.nameFromFilename(require.main.filename);\n   *\n   * @param {string} filename\n   * @return {Command}\n   */\n\n  nameFromFilename(filename) {\n    this._name = path.basename(filename, path.extname(filename));\n\n    return this;\n  }\n\n  /**\n   * Get or set the directory for searching for executable subcommands of this command.\n   *\n   * @example\n   * program.executableDir(__dirname);\n   * // or\n   * program.executableDir('subcommands');\n   *\n   * @param {string} [path]\n   * @return {string|null|Command}\n   */\n\n  executableDir(path) {\n    if (path === undefined) return this._executableDir;\n    this._executableDir = path;\n    return this;\n  }\n\n  /**\n   * Return program help documentation.\n   *\n   * @param {{ error: boolean }} [contextOptions] - pass {error:true} to wrap for stderr instead of stdout\n   * @return {string}\n   */\n\n  helpInformation(contextOptions) {\n    const helper = this.createHelp();\n    if (helper.helpWidth === undefined) {\n      helper.helpWidth = (contextOptions && contextOptions.error) ? this._outputConfiguration.getErrHelpWidth() : this._outputConfiguration.getOutHelpWidth();\n    }\n    return helper.formatHelp(this, helper);\n  }\n\n  /**\n   * @api private\n   */\n\n  _getHelpContext(contextOptions) {\n    contextOptions = contextOptions || {};\n    const context = { error: !!contextOptions.error };\n    let write;\n    if (context.error) {\n      write = (arg) => this._outputConfiguration.writeErr(arg);\n    } else {\n      write = (arg) => this._outputConfiguration.writeOut(arg);\n    }\n    context.write = contextOptions.write || write;\n    context.command = this;\n    return context;\n  }\n\n  /**\n   * Output help information for this command.\n   *\n   * Outputs built-in help, and custom text added using `.addHelpText()`.\n   *\n   * @param {{ error: boolean } | Function} [contextOptions] - pass {error:true} to write to stderr instead of stdout\n   */\n\n  outputHelp(contextOptions) {\n    let deprecatedCallback;\n    if (typeof contextOptions === 'function') {\n      deprecatedCallback = contextOptions;\n      contextOptions = undefined;\n    }\n    const context = this._getHelpContext(contextOptions);\n\n    this._getCommandAndAncestors().reverse().forEach(command => command.emit('beforeAllHelp', context));\n    this.emit('beforeHelp', context);\n\n    let helpInformation = this.helpInformation(context);\n    if (deprecatedCallback) {\n      helpInformation = deprecatedCallback(helpInformation);\n      if (typeof helpInformation !== 'string' && !Buffer.isBuffer(helpInformation)) {\n        throw new Error('outputHelp callback must return a string or a Buffer');\n      }\n    }\n    context.write(helpInformation);\n\n    if (this._helpLongFlag) {\n      this.emit(this._helpLongFlag); // deprecated\n    }\n    this.emit('afterHelp', context);\n    this._getCommandAndAncestors().forEach(command => command.emit('afterAllHelp', context));\n  }\n\n  /**\n   * You can pass in flags and a description to override the help\n   * flags and help description for your command. Pass in false to\n   * disable the built-in help option.\n   *\n   * @param {string | boolean} [flags]\n   * @param {string} [description]\n   * @return {Command} `this` command for chaining\n   */\n\n  helpOption(flags, description) {\n    if (typeof flags === 'boolean') {\n      this._hasHelpOption = flags;\n      return this;\n    }\n    this._helpFlags = flags || this._helpFlags;\n    this._helpDescription = description || this._helpDescription;\n\n    const helpFlags = splitOptionFlags(this._helpFlags);\n    this._helpShortFlag = helpFlags.shortFlag;\n    this._helpLongFlag = helpFlags.longFlag;\n\n    return this;\n  }\n\n  /**\n   * Output help information and exit.\n   *\n   * Outputs built-in help, and custom text added using `.addHelpText()`.\n   *\n   * @param {{ error: boolean }} [contextOptions] - pass {error:true} to write to stderr instead of stdout\n   */\n\n  help(contextOptions) {\n    this.outputHelp(contextOptions);\n    let exitCode = process.exitCode || 0;\n    if (exitCode === 0 && contextOptions && typeof contextOptions !== 'function' && contextOptions.error) {\n      exitCode = 1;\n    }\n    // message: do not have all displayed text available so only passing placeholder.\n    this._exit(exitCode, 'commander.help', '(outputHelp)');\n  }\n\n  /**\n   * Add additional text to be displayed with the built-in help.\n   *\n   * Position is 'before' or 'after' to affect just this command,\n   * and 'beforeAll' or 'afterAll' to affect this command and all its subcommands.\n   *\n   * @param {string} position - before or after built-in help\n   * @param {string | Function} text - string to add, or a function returning a string\n   * @return {Command} `this` command for chaining\n   */\n  addHelpText(position, text) {\n    const allowedValues = ['beforeAll', 'before', 'after', 'afterAll'];\n    if (!allowedValues.includes(position)) {\n      throw new Error(`Unexpected value for position to addHelpText.\nExpecting one of '${allowedValues.join(\"', '\")}'`);\n    }\n    const helpEvent = `${position}Help`;\n    this.on(helpEvent, (context) => {\n      let helpStr;\n      if (typeof text === 'function') {\n        helpStr = text({ error: context.error, command: context.command });\n      } else {\n        helpStr = text;\n      }\n      // Ignore falsy value when nothing to output.\n      if (helpStr) {\n        context.write(`${helpStr}\\n`);\n      }\n    });\n    return this;\n  }\n}\n\n/**\n * Output help information if help flags specified\n *\n * @param {Command} cmd - command to output help for\n * @param {Array} args - array of options to search for help flags\n * @api private\n */\n\nfunction outputHelpIfRequested(cmd, args) {\n  const helpOption = cmd._hasHelpOption && args.find(arg => arg === cmd._helpLongFlag || arg === cmd._helpShortFlag);\n  if (helpOption) {\n    cmd.outputHelp();\n    // (Do not have all displayed text available so only passing placeholder.)\n    cmd._exit(0, 'commander.helpDisplayed', '(outputHelp)');\n  }\n}\n\n/**\n * Scan arguments and increment port number for inspect calls (to avoid conflicts when spawning new command).\n *\n * @param {string[]} args - array of arguments from node.execArgv\n * @returns {string[]}\n * @api private\n */\n\nfunction incrementNodeInspectorPort(args) {\n  // Testing for these options:\n  //  --inspect[=[host:]port]\n  //  --inspect-brk[=[host:]port]\n  //  --inspect-port=[host:]port\n  return args.map((arg) => {\n    if (!arg.startsWith('--inspect')) {\n      return arg;\n    }\n    let debugOption;\n    let debugHost = '127.0.0.1';\n    let debugPort = '9229';\n    let match;\n    if ((match = arg.match(/^(--inspect(-brk)?)$/)) !== null) {\n      // e.g. --inspect\n      debugOption = match[1];\n    } else if ((match = arg.match(/^(--inspect(-brk|-port)?)=([^:]+)$/)) !== null) {\n      debugOption = match[1];\n      if (/^\\d+$/.test(match[3])) {\n        // e.g. --inspect=1234\n        debugPort = match[3];\n      } else {\n        // e.g. --inspect=localhost\n        debugHost = match[3];\n      }\n    } else if ((match = arg.match(/^(--inspect(-brk|-port)?)=([^:]+):(\\d+)$/)) !== null) {\n      // e.g. --inspect=localhost:1234\n      debugOption = match[1];\n      debugHost = match[3];\n      debugPort = match[4];\n    }\n\n    if (debugOption && debugPort !== '0') {\n      return `${debugOption}=${debugHost}:${parseInt(debugPort) + 1}`;\n    }\n    return arg;\n  });\n}\n\nexports.Command = Command;\n", "const { Argument } = require('./lib/argument.js');\nconst { Command } = require('./lib/command.js');\nconst { CommanderError, InvalidArgumentError } = require('./lib/error.js');\nconst { Help } = require('./lib/help.js');\nconst { Option } = require('./lib/option.js');\n\n/**\n * Expose the root command.\n */\n\nexports = module.exports = new Command();\nexports.program = exports; // More explicit access to global command.\n// createArgument, createCommand, and createOption are implicitly available as they are methods on program.\n\n/**\n * Expose classes\n */\n\nexports.Command = Command;\nexports.Option = Option;\nexports.Argument = Argument;\nexports.Help = Help;\n\nexports.CommanderError = CommanderError;\nexports.InvalidArgumentError = InvalidArgumentError;\nexports.InvalidOptionArgumentError = InvalidArgumentError; // Deprecated\n", "/*\n * Copyright 2019 gRPC authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n */\n\nexport enum Status {\n  OK = 0,\n  CANCELLED,\n  UNKNOWN,\n  INVALID_ARGUMENT,\n  DEADLINE_EXCEEDED,\n  NOT_FOUND,\n  ALREADY_EXISTS,\n  PERMISSION_DENIED,\n  RESOURCE_EXHAUSTED,\n  FAILED_PRECONDITION,\n  ABORTED,\n  OUT_OF_RANGE,\n  UNIMPLEMENTED,\n  INTERNAL,\n  UNAVAILABLE,\n  DATA_LOSS,\n  UNAUTHENTICATED,\n}\n\nexport enum LogVerbosity {\n  DEBUG = 0,\n  INFO,\n  ERROR,\n  NONE,\n}\n\n/**\n * NOTE: This enum is not currently used in any implemented API in this\n * library. It is included only for type parity with the other implementation.\n */\nexport enum Propagate {\n  DEADLINE = 1,\n  CENSUS_STATS_CONTEXT = 2,\n  CENSUS_TRACING_CONTEXT = 4,\n  CANCELLATION = 8,\n  // https://github.com/grpc/grpc/blob/master/include/grpc/impl/codegen/propagation_bits.h#L43\n  DEFAULTS = 0xffff |\n    Propagate.DEADLINE |\n    Propagate.CENSUS_STATS_CONTEXT |\n    Propagate.CENSUS_TRACING_CONTEXT |\n    Propagate.CANCELLATION,\n}\n\n// -1 means unlimited\nexport const DEFAULT_MAX_SEND_MESSAGE_LENGTH = -1;\n\n// 4 MB default\nexport const DEFAULT_MAX_RECEIVE_MESSAGE_LENGTH = 4 * 1024 * 1024;\n", "{\n  \"name\": \"@grpc/grpc-js\",\n  \"version\": \"1.14.3\",\n  \"description\": \"gRPC Library for Node - pure JS implementation\",\n  \"homepage\": \"https://grpc.io/\",\n  \"repository\": \"https://github.com/grpc/grpc-node/tree/master/packages/grpc-js\",\n  \"main\": \"build/src/index.js\",\n  \"engines\": {\n    \"node\": \">=12.10.0\"\n  },\n  \"keywords\": [],\n  \"author\": {\n    \"name\": \"Google Inc.\"\n  },\n  \"types\": \"build/src/index.d.ts\",\n  \"license\": \"Apache-2.0\",\n  \"devDependencies\": {\n    \"@grpc/proto-loader\": \"file:../proto-loader\",\n    \"@types/gulp\": \"^4.0.17\",\n    \"@types/gulp-mocha\": \"0.0.37\",\n    \"@types/lodash\": \"^4.14.202\",\n    \"@types/mocha\": \"^10.0.6\",\n    \"@types/ncp\": \"^2.0.8\",\n    \"@types/node\": \">=20.11.20\",\n    \"@types/pify\": \"^5.0.4\",\n    \"@types/semver\": \"^7.5.8\",\n    \"@typescript-eslint/eslint-plugin\": \"^7.1.0\",\n    \"@typescript-eslint/parser\": \"^7.1.0\",\n    \"@typescript-eslint/typescript-estree\": \"^7.1.0\",\n    \"clang-format\": \"^1.8.0\",\n    \"eslint\": \"^8.42.0\",\n    \"eslint-config-prettier\": \"^8.8.0\",\n    \"eslint-plugin-node\": \"^11.1.0\",\n    \"eslint-plugin-prettier\": \"^4.2.1\",\n    \"execa\": \"^2.0.3\",\n    \"gulp\": \"^4.0.2\",\n    \"gulp-mocha\": \"^6.0.0\",\n    \"lodash\": \"^4.17.21\",\n    \"madge\": \"^5.0.1\",\n    \"mocha-jenkins-reporter\": \"^0.4.1\",\n    \"ncp\": \"^2.0.0\",\n    \"pify\": \"^4.0.1\",\n    \"prettier\": \"^2.8.8\",\n    \"rimraf\": \"^3.0.2\",\n    \"semver\": \"^7.6.0\",\n    \"ts-node\": \"^10.9.2\",\n    \"typescript\": \"^5.3.3\"\n  },\n  \"contributors\": [\n    {\n      \"name\": \"Google Inc.\"\n    }\n  ],\n  \"scripts\": {\n    \"build\": \"npm run compile\",\n    \"clean\": \"rimraf ./build\",\n    \"compile\": \"tsc -p .\",\n    \"format\": \"clang-format -i -style=\\\"{Language: JavaScript, BasedOnStyle: Google, ColumnLimit: 80}\\\" src/*.ts test/*.ts\",\n    \"lint\": \"eslint src/*.ts test/*.ts\",\n    \"prepare\": \"npm run copy-protos && npm run generate-types && npm run generate-test-types && npm run compile\",\n    \"test\": \"gulp test\",\n    \"check\": \"npm run lint\",\n    \"fix\": \"eslint --fix src/*.ts test/*.ts\",\n    \"pretest\": \"npm run generate-types && npm run generate-test-types && npm run compile\",\n    \"posttest\": \"npm run check && madge -c ./build/src\",\n    \"generate-types\": \"proto-loader-gen-types --keepCase --longs String --enums String --defaults --oneofs --includeComments --includeDirs proto/ --include-dirs proto/ proto/xds/ proto/protoc-gen-validate/ -O src/generated/ --grpcLib ../index channelz.proto xds/service/orca/v3/orca.proto\",\n    \"generate-test-types\": \"proto-loader-gen-types --keepCase --longs String --enums String --defaults --oneofs --includeComments --include-dirs test/fixtures/ -O test/generated/ --grpcLib ../../src/index test_service.proto echo_service.proto\",\n    \"copy-protos\": \"node ./copy-protos\"\n  },\n  \"dependencies\": {\n    \"@grpc/proto-loader\": \"^0.8.0\",\n    \"@js-sdsl/ordered-map\": \"^4.4.2\"\n  },\n  \"files\": [\n    \"src/**/*.ts\",\n    \"build/src/**/*.{js,d.ts,js.map}\",\n    \"proto/**/*.proto\",\n    \"proto/**/LICENSE\",\n    \"LICENSE\",\n    \"deps/envoy-api/envoy/api/v2/**/*.proto\",\n    \"deps/envoy-api/envoy/config/**/*.proto\",\n    \"deps/envoy-api/envoy/service/**/*.proto\",\n    \"deps/envoy-api/envoy/type/**/*.proto\",\n    \"deps/udpa/udpa/**/*.proto\",\n    \"deps/googleapis/google/api/*.proto\",\n    \"deps/googleapis/google/rpc/*.proto\",\n    \"deps/protoc-gen-validate/validate/**/*.proto\"\n  ]\n}\n", "/*\n * Copyright 2019 gRPC authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n */\n\nimport { LogVerbosity } from './constants';\nimport { pid } from 'process';\n\nconst clientVersion = require('../../package.json').version;\n\nconst DEFAULT_LOGGER: Partial<Console> = {\n  error: (message?: any, ...optionalParams: any[]) => {\n    console.error('E ' + message, ...optionalParams);\n  },\n  info: (message?: any, ...optionalParams: any[]) => {\n    console.error('I ' + message, ...optionalParams);\n  },\n  debug: (message?: any, ...optionalParams: any[]) => {\n    console.error('D ' + message, ...optionalParams);\n  },\n};\n\nlet _logger: Partial<Console> = DEFAULT_LOGGER;\nlet _logVerbosity: LogVerbosity = LogVerbosity.ERROR;\n\nconst verbosityString =\n  process.env.GRPC_NODE_VERBOSITY ?? process.env.GRPC_VERBOSITY ?? '';\n\nswitch (verbosityString.toUpperCase()) {\n  case 'DEBUG':\n    _logVerbosity = LogVerbosity.DEBUG;\n    break;\n  case 'INFO':\n    _logVerbosity = LogVerbosity.INFO;\n    break;\n  case 'ERROR':\n    _logVerbosity = LogVerbosity.ERROR;\n    break;\n  case 'NONE':\n    _logVerbosity = LogVerbosity.NONE;\n    break;\n  default:\n  // Ignore any other values\n}\n\nexport const getLogger = (): Partial<Console> => {\n  return _logger;\n};\n\nexport const setLogger = (logger: Partial<Console>): void => {\n  _logger = logger;\n};\n\nexport const setLoggerVerbosity = (verbosity: LogVerbosity): void => {\n  _logVerbosity = verbosity;\n};\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport const log = (severity: LogVerbosity, ...args: any[]): void => {\n  let logFunction: typeof DEFAULT_LOGGER.error;\n  if (severity >= _logVerbosity) {\n    switch (severity) {\n      case LogVerbosity.DEBUG:\n        logFunction = _logger.debug;\n        break;\n      case LogVerbosity.INFO:\n        logFunction = _logger.info;\n        break;\n      case LogVerbosity.ERROR:\n        logFunction = _logger.error;\n        break;\n    }\n    /* Fall back to _logger.error when other methods are not available for\n     * compatiblity with older behavior that always logged to _logger.error */\n    if (!logFunction) {\n      logFunction = _logger.error;\n    }\n    if (logFunction) {\n      logFunction.bind(_logger)(...args);\n    }\n  }\n};\n\nconst tracersString =\n  process.env.GRPC_NODE_TRACE ?? process.env.GRPC_TRACE ?? '';\nconst enabledTracers = new Set<string>();\nconst disabledTracers = new Set<string>();\nfor (const tracerName of tracersString.split(',')) {\n  if (tracerName.startsWith('-')) {\n    disabledTracers.add(tracerName.substring(1));\n  } else {\n    enabledTracers.add(tracerName);\n  }\n}\nconst allEnabled = enabledTracers.has('all');\n\nexport function trace(\n  severity: LogVerbosity,\n  tracer: string,\n  text: string\n): void {\n  if (isTracerEnabled(tracer)) {\n    log(\n      severity,\n      new Date().toISOString() +\n        ' | v' +\n        clientVersion +\n        ' ' +\n        pid +\n        ' | ' +\n        tracer +\n        ' | ' +\n        text\n    );\n  }\n}\n\nexport function isTracerEnabled(tracer: string): boolean {\n  return (\n    !disabledTracers.has(tracer) && (allEnabled || enabledTracers.has(tracer))\n  );\n}\n", "/*\n * Copyright 2022 gRPC authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n */\n\nexport function getErrorMessage(error: unknown): string {\n  if (error instanceof Error) {\n    return error.message;\n  } else {\n    return String(error);\n  }\n}\n\nexport function getErrorCode(error: unknown): number | null {\n  if (\n    typeof error === 'object' &&\n    error !== null &&\n    'code' in error &&\n    typeof (error as Record<string, unknown>).code === 'number'\n  ) {\n    return (error as Record<string, number>).code;\n  } else {\n    return null;\n  }\n}\n", "/*\n * Copyright 2019 gRPC authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n */\n\nimport * as http2 from 'http2';\nimport { log } from './logging';\nimport { LogVerbosity } from './constants';\nimport { getErrorMessage } from './error';\nconst LEGAL_KEY_REGEX = /^[:0-9a-z_.-]+$/;\nconst LEGAL_NON_BINARY_VALUE_REGEX = /^[ -~]*$/;\n\nexport type MetadataValue = string | Buffer;\nexport type MetadataObject = Map<string, MetadataValue[]>;\n\nfunction isLegalKey(key: string): boolean {\n  return LEGAL_KEY_REGEX.test(key);\n}\n\nfunction isLegalNonBinaryValue(value: string): boolean {\n  return LEGAL_NON_BINARY_VALUE_REGEX.test(value);\n}\n\nfunction isBinaryKey(key: string): boolean {\n  return key.endsWith('-bin');\n}\n\nfunction isCustomMetadata(key: string): boolean {\n  return !key.startsWith('grpc-');\n}\n\nfunction normalizeKey(key: string): string {\n  return key.toLowerCase();\n}\n\nfunction validate(key: string, value?: MetadataValue): void {\n  if (!isLegalKey(key)) {\n    throw new Error('Metadata key \"' + key + '\" contains illegal characters');\n  }\n\n  if (value !== null && value !== undefined) {\n    if (isBinaryKey(key)) {\n      if (!Buffer.isBuffer(value)) {\n        throw new Error(\"keys that end with '-bin' must have Buffer values\");\n      }\n    } else {\n      if (Buffer.isBuffer(value)) {\n        throw new Error(\n          \"keys that don't end with '-bin' must have String values\"\n        );\n      }\n      if (!isLegalNonBinaryValue(value)) {\n        throw new Error(\n          'Metadata string value \"' + value + '\" contains illegal characters'\n        );\n      }\n    }\n  }\n}\n\nexport interface MetadataOptions {\n  /* Signal that the request is idempotent. Defaults to false */\n  idempotentRequest?: boolean;\n  /* Signal that the call should not return UNAVAILABLE before it has\n   * started. Defaults to false. */\n  waitForReady?: boolean;\n  /* Signal that the call is cacheable. GRPC is free to use GET verb.\n   * Defaults to false */\n  cacheableRequest?: boolean;\n  /* Signal that the initial metadata should be corked. Defaults to false. */\n  corked?: boolean;\n}\n\n/**\n * A class for storing metadata. Keys are normalized to lowercase ASCII.\n */\nexport class Metadata {\n  protected internalRepr: MetadataObject = new Map<string, MetadataValue[]>();\n  private options: MetadataOptions;\n  private opaqueData: Map<string, unknown> = new Map();\n\n  constructor(options: MetadataOptions = {}) {\n    this.options = options;\n  }\n\n  /**\n   * Sets the given value for the given key by replacing any other values\n   * associated with that key. Normalizes the key.\n   * @param key The key to whose value should be set.\n   * @param value The value to set. Must be a buffer if and only\n   *   if the normalized key ends with '-bin'.\n   */\n  set(key: string, value: MetadataValue): void {\n    key = normalizeKey(key);\n    validate(key, value);\n    this.internalRepr.set(key, [value]);\n  }\n\n  /**\n   * Adds the given value for the given key by appending to a list of previous\n   * values associated with that key. Normalizes the key.\n   * @param key The key for which a new value should be appended.\n   * @param value The value to add. Must be a buffer if and only\n   *   if the normalized key ends with '-bin'.\n   */\n  add(key: string, value: MetadataValue): void {\n    key = normalizeKey(key);\n    validate(key, value);\n\n    const existingValue: MetadataValue[] | undefined =\n      this.internalRepr.get(key);\n\n    if (existingValue === undefined) {\n      this.internalRepr.set(key, [value]);\n    } else {\n      existingValue.push(value);\n    }\n  }\n\n  /**\n   * Removes the given key and any associated values. Normalizes the key.\n   * @param key The key whose values should be removed.\n   */\n  remove(key: string): void {\n    key = normalizeKey(key);\n    // validate(key);\n    this.internalRepr.delete(key);\n  }\n\n  /**\n   * Gets a list of all values associated with the key. Normalizes the key.\n   * @param key The key whose value should be retrieved.\n   * @return A list of values associated with the given key.\n   */\n  get(key: string): MetadataValue[] {\n    key = normalizeKey(key);\n    // validate(key);\n    return this.internalRepr.get(key) || [];\n  }\n\n  /**\n   * Gets a plain object mapping each key to the first value associated with it.\n   * This reflects the most common way that people will want to see metadata.\n   * @return A key/value mapping of the metadata.\n   */\n  getMap(): { [key: string]: MetadataValue } {\n    const result: { [key: string]: MetadataValue } = {};\n\n    for (const [key, values] of this.internalRepr) {\n      if (values.length > 0) {\n        const v = values[0];\n        result[key] = Buffer.isBuffer(v) ? Buffer.from(v) : v;\n      }\n    }\n    return result;\n  }\n\n  /**\n   * Clones the metadata object.\n   * @return The newly cloned object.\n   */\n  clone(): Metadata {\n    const newMetadata = new Metadata(this.options);\n    const newInternalRepr = newMetadata.internalRepr;\n\n    for (const [key, value] of this.internalRepr) {\n      const clonedValue: MetadataValue[] = value.map(v => {\n        if (Buffer.isBuffer(v)) {\n          return Buffer.from(v);\n        } else {\n          return v;\n        }\n      });\n\n      newInternalRepr.set(key, clonedValue);\n    }\n\n    return newMetadata;\n  }\n\n  /**\n   * Merges all key-value pairs from a given Metadata object into this one.\n   * If both this object and the given object have values in the same key,\n   * values from the other Metadata object will be appended to this object's\n   * values.\n   * @param other A Metadata object.\n   */\n  merge(other: Metadata): void {\n    for (const [key, values] of other.internalRepr) {\n      const mergedValue: MetadataValue[] = (\n        this.internalRepr.get(key) || []\n      ).concat(values);\n\n      this.internalRepr.set(key, mergedValue);\n    }\n  }\n\n  setOptions(options: MetadataOptions) {\n    this.options = options;\n  }\n\n  getOptions(): MetadataOptions {\n    return this.options;\n  }\n\n  /**\n   * Creates an OutgoingHttpHeaders object that can be used with the http2 API.\n   */\n  toHttp2Headers(): http2.OutgoingHttpHeaders {\n    // NOTE: Node <8.9 formats http2 headers incorrectly.\n    const result: http2.OutgoingHttpHeaders = {};\n\n    for (const [key, values] of this.internalRepr) {\n      if (key.startsWith(':')) {\n        continue;\n      }\n      // We assume that the user's interaction with this object is limited to\n      // through its public API (i.e. keys and values are already validated).\n      result[key] = values.map(bufToString);\n    }\n\n    return result;\n  }\n\n  /**\n   * This modifies the behavior of JSON.stringify to show an object\n   * representation of the metadata map.\n   */\n  toJSON() {\n    const result: { [key: string]: MetadataValue[] } = {};\n    for (const [key, values] of this.internalRepr) {\n      result[key] = values;\n    }\n    return result;\n  }\n\n  /**\n   * Attach additional data of any type to the metadata object, which will not\n   * be included when sending headers. The data can later be retrieved with\n   * `getOpaque`. Keys with the prefix `grpc` are reserved for use by this\n   * library.\n   * @param key\n   * @param value\n   */\n  setOpaque(key: string, value: unknown) {\n    this.opaqueData.set(key, value);\n  }\n\n  /**\n   * Retrieve data previously added with `setOpaque`.\n   * @param key\n   * @returns\n   */\n  getOpaque(key: string) {\n    return this.opaqueData.get(key);\n  }\n\n  /**\n   * Returns a new Metadata object based fields in a given IncomingHttpHeaders\n   * object.\n   * @param headers An IncomingHttpHeaders object.\n   */\n  static fromHttp2Headers(headers: http2.IncomingHttpHeaders): Metadata {\n    const result = new Metadata();\n    for (const key of Object.keys(headers)) {\n      // Reserved headers (beginning with `:`) are not valid keys.\n      if (key.charAt(0) === ':') {\n        continue;\n      }\n\n      const values = headers[key];\n\n      try {\n        if (isBinaryKey(key)) {\n          if (Array.isArray(values)) {\n            values.forEach(value => {\n              result.add(key, Buffer.from(value, 'base64'));\n            });\n          } else if (values !== undefined) {\n            if (isCustomMetadata(key)) {\n              values.split(',').forEach(v => {\n                result.add(key, Buffer.from(v.trim(), 'base64'));\n              });\n            } else {\n              result.add(key, Buffer.from(values, 'base64'));\n            }\n          }\n        } else {\n          if (Array.isArray(values)) {\n            values.forEach(value => {\n              result.add(key, value);\n            });\n          } else if (values !== undefined) {\n            result.add(key, values);\n          }\n        }\n      } catch (error) {\n        const message = `Failed to add metadata entry ${key}: ${values}. ${getErrorMessage(\n          error\n        )}. For more information see https://github.com/grpc/grpc-node/issues/1173`;\n        log(LogVerbosity.ERROR, message);\n      }\n    }\n\n    return result;\n  }\n}\n\nconst bufToString = (val: string | Buffer): string => {\n  return Buffer.isBuffer(val) ? val.toString('base64') : val;\n};\n", "/*\n * Copyright 2019 gRPC authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n */\n\nimport { Metadata } from './metadata';\n\nexport interface CallMetadataOptions {\n  method_name: string;\n  service_url: string;\n}\n\nexport type CallMetadataGenerator = (\n  options: CallMetadataOptions,\n  cb: (err: Error | null, metadata?: Metadata) => void\n) => void;\n\n// google-auth-library pre-v2.0.0 does not have getRequestHeaders\n// but has getRequestMetadata, which is deprecated in v2.0.0\nexport interface OldOAuth2Client {\n  getRequestMetadata: (\n    url: string,\n    callback: (\n      err: Error | null,\n      headers?: {\n        [index: string]: string;\n      }\n    ) => void\n  ) => void;\n}\n\nexport interface CurrentOAuth2Client {\n  getRequestHeaders: (url?: string) => Promise<{ [index: string]: string }>;\n}\n\nexport type OAuth2Client = OldOAuth2Client | CurrentOAuth2Client;\n\nfunction isCurrentOauth2Client(\n  client: OAuth2Client\n): client is CurrentOAuth2Client {\n  return (\n    'getRequestHeaders' in client &&\n    typeof client.getRequestHeaders === 'function'\n  );\n}\n\n/**\n * A class that represents a generic method of adding authentication-related\n * metadata on a per-request basis.\n */\nexport abstract class CallCredentials {\n  /**\n   * Asynchronously generates a new Metadata object.\n   * @param options Options used in generating the Metadata object.\n   */\n  abstract generateMetadata(options: CallMetadataOptions): Promise<Metadata>;\n  /**\n   * Creates a new CallCredentials object from properties of both this and\n   * another CallCredentials object. This object's metadata generator will be\n   * called first.\n   * @param callCredentials The other CallCredentials object.\n   */\n  abstract compose(callCredentials: CallCredentials): CallCredentials;\n\n  /**\n   * Check whether two call credentials objects are equal. Separate\n   * SingleCallCredentials with identical metadata generator functions are\n   * equal.\n   * @param other The other CallCredentials object to compare with.\n   */\n  abstract _equals(other: CallCredentials): boolean;\n\n  /**\n   * Creates a new CallCredentials object from a given function that generates\n   * Metadata objects.\n   * @param metadataGenerator A function that accepts a set of options, and\n   * generates a Metadata object based on these options, which is passed back\n   * to the caller via a supplied (err, metadata) callback.\n   */\n  static createFromMetadataGenerator(\n    metadataGenerator: CallMetadataGenerator\n  ): CallCredentials {\n    return new SingleCallCredentials(metadataGenerator);\n  }\n\n  /**\n   * Create a gRPC credential from a Google credential object.\n   * @param googleCredentials The authentication client to use.\n   * @return The resulting CallCredentials object.\n   */\n  static createFromGoogleCredential(\n    googleCredentials: OAuth2Client\n  ): CallCredentials {\n    return CallCredentials.createFromMetadataGenerator((options, callback) => {\n      let getHeaders: Promise<{ [index: string]: string }>;\n      if (isCurrentOauth2Client(googleCredentials)) {\n        getHeaders = googleCredentials.getRequestHeaders(options.service_url);\n      } else {\n        getHeaders = new Promise((resolve, reject) => {\n          googleCredentials.getRequestMetadata(\n            options.service_url,\n            (err, headers) => {\n              if (err) {\n                reject(err);\n                return;\n              }\n              if (!headers) {\n                reject(new Error('Headers not set by metadata plugin'));\n                return;\n              }\n              resolve(headers);\n            }\n          );\n        });\n      }\n      getHeaders.then(\n        headers => {\n          const metadata = new Metadata();\n          for (const key of Object.keys(headers)) {\n            metadata.add(key, headers[key]);\n          }\n          callback(null, metadata);\n        },\n        err => {\n          callback(err);\n        }\n      );\n    });\n  }\n\n  static createEmpty(): CallCredentials {\n    return new EmptyCallCredentials();\n  }\n}\n\nclass ComposedCallCredentials extends CallCredentials {\n  constructor(private creds: CallCredentials[]) {\n    super();\n  }\n\n  async generateMetadata(options: CallMetadataOptions): Promise<Metadata> {\n    const base: Metadata = new Metadata();\n    const generated: Metadata[] = await Promise.all(\n      this.creds.map(cred => cred.generateMetadata(options))\n    );\n    for (const gen of generated) {\n      base.merge(gen);\n    }\n    return base;\n  }\n\n  compose(other: CallCredentials): CallCredentials {\n    return new ComposedCallCredentials(this.creds.concat([other]));\n  }\n\n  _equals(other: CallCredentials): boolean {\n    if (this === other) {\n      return true;\n    }\n    if (other instanceof ComposedCallCredentials) {\n      return this.creds.every((value, index) =>\n        value._equals(other.creds[index])\n      );\n    } else {\n      return false;\n    }\n  }\n}\n\nclass SingleCallCredentials extends CallCredentials {\n  constructor(private metadataGenerator: CallMetadataGenerator) {\n    super();\n  }\n\n  generateMetadata(options: CallMetadataOptions): Promise<Metadata> {\n    return new Promise<Metadata>((resolve, reject) => {\n      this.metadataGenerator(options, (err, metadata) => {\n        if (metadata !== undefined) {\n          resolve(metadata);\n        } else {\n          reject(err);\n        }\n      });\n    });\n  }\n\n  compose(other: CallCredentials): CallCredentials {\n    return new ComposedCallCredentials([this, other]);\n  }\n\n  _equals(other: CallCredentials): boolean {\n    if (this === other) {\n      return true;\n    }\n    if (other instanceof SingleCallCredentials) {\n      return this.metadataGenerator === other.metadataGenerator;\n    } else {\n      return false;\n    }\n  }\n}\n\nclass EmptyCallCredentials extends CallCredentials {\n  generateMetadata(options: CallMetadataOptions): Promise<Metadata> {\n    return Promise.resolve(new Metadata());\n  }\n\n  compose(other: CallCredentials): CallCredentials {\n    return other;\n  }\n\n  _equals(other: CallCredentials): boolean {\n    return other instanceof EmptyCallCredentials;\n  }\n}\n", "/*\n * Copyright 2019 gRPC authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n */\n\nimport * as fs from 'fs';\n\nexport const CIPHER_SUITES: string | undefined =\n  process.env.GRPC_SSL_CIPHER_SUITES;\n\nconst DEFAULT_ROOTS_FILE_PATH = process.env.GRPC_DEFAULT_SSL_ROOTS_FILE_PATH;\n\nlet defaultRootsData: Buffer | null = null;\n\nexport function getDefaultRootsData(): Buffer | null {\n  if (DEFAULT_ROOTS_FILE_PATH) {\n    if (defaultRootsData === null) {\n      defaultRootsData = fs.readFileSync(DEFAULT_ROOTS_FILE_PATH);\n    }\n    return defaultRootsData;\n  }\n  return null;\n}\n", "/*\n * Copyright 2020 gRPC authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n */\n\nexport interface GrpcUri {\n  scheme?: string;\n  authority?: string;\n  path: string;\n}\n\n/*\n * The groups correspond to URI parts as follows:\n * 1. scheme\n * 2. authority\n * 3. path\n */\nconst URI_REGEX = /^(?:([A-Za-z0-9+.-]+):)?(?:\\/\\/([^/]*)\\/)?(.+)$/;\n\nexport function parseUri(uriString: string): GrpcUri | null {\n  const parsedUri = URI_REGEX.exec(uriString);\n  if (parsedUri === null) {\n    return null;\n  }\n  return {\n    scheme: parsedUri[1],\n    authority: parsedUri[2],\n    path: parsedUri[3],\n  };\n}\n\nexport interface HostPort {\n  host: string;\n  port?: number;\n}\n\nconst NUMBER_REGEX = /^\\d+$/;\n\nexport function splitHostPort(path: string): HostPort | null {\n  if (path.startsWith('[')) {\n    const hostEnd = path.indexOf(']');\n    if (hostEnd === -1) {\n      return null;\n    }\n    const host = path.substring(1, hostEnd);\n    /* Only an IPv6 address should be in bracketed notation, and an IPv6\n     * address should have at least one colon */\n    if (host.indexOf(':') === -1) {\n      return null;\n    }\n    if (path.length > hostEnd + 1) {\n      if (path[hostEnd + 1] === ':') {\n        const portString = path.substring(hostEnd + 2);\n        if (NUMBER_REGEX.test(portString)) {\n          return {\n            host: host,\n            port: +portString,\n          };\n        } else {\n          return null;\n        }\n      } else {\n        return null;\n      }\n    } else {\n      return {\n        host,\n      };\n    }\n  } else {\n    const splitPath = path.split(':');\n    /* Exactly one colon means that this is host:port. Zero colons means that\n     * there is no port. And multiple colons means that this is a bare IPv6\n     * address with no port */\n    if (splitPath.length === 2) {\n      if (NUMBER_REGEX.test(splitPath[1])) {\n        return {\n          host: splitPath[0],\n          port: +splitPath[1],\n        };\n      } else {\n        return null;\n      }\n    } else {\n      return {\n        host: path,\n      };\n    }\n  }\n}\n\nexport function combineHostPort(hostPort: HostPort): string {\n  if (hostPort.port === undefined) {\n    return hostPort.host;\n  } else {\n    // Only an IPv6 host should include a colon\n    if (hostPort.host.includes(':')) {\n      return `[${hostPort.host}]:${hostPort.port}`;\n    } else {\n      return `${hostPort.host}:${hostPort.port}`;\n    }\n  }\n}\n\nexport function uriToString(uri: GrpcUri): string {\n  let result = '';\n  if (uri.scheme !== undefined) {\n    result += uri.scheme + ':';\n  }\n  if (uri.authority !== undefined) {\n    result += '//' + uri.authority + '/';\n  }\n  result += uri.path;\n  return result;\n}\n", "/*\n * Copyright 2019 gRPC authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n */\n\nimport { MethodConfig, ServiceConfig } from './service-config';\nimport { StatusOr } from './call-interface';\nimport { Endpoint } from './subchannel-address';\nimport { GrpcUri, uriToString } from './uri-parser';\nimport { ChannelOptions } from './channel-options';\nimport { Metadata } from './metadata';\nimport { Status } from './constants';\nimport { Filter, FilterFactory } from './filter';\n\nexport const CHANNEL_ARGS_CONFIG_SELECTOR_KEY = 'grpc.internal.config_selector';\n\nexport interface CallConfig {\n  methodConfig: MethodConfig;\n  onCommitted?: () => void;\n  pickInformation: { [key: string]: string };\n  status: Status;\n  dynamicFilterFactories: FilterFactory<Filter>[];\n}\n\n/**\n * Selects a configuration for a method given the name and metadata. Defined in\n * https://github.com/grpc/proposal/blob/master/A31-xds-timeout-support-and-config-selector.md#new-functionality-in-grpc\n */\nexport interface ConfigSelector {\n  invoke(methodName: string, metadata: Metadata, channelId: number): CallConfig;\n  unref(): void;\n}\n\nexport interface ResolverListener {\n  /**\n   * Called whenever the resolver has new name resolution results or an error to\n   * report.\n   * @param endpointList The list of endpoints, or an error if resolution failed\n   * @param attributes Arbitrary key/value pairs to pass along to load balancing\n   *     policies\n   * @param serviceConfig The service service config for the endpoint list, or an\n   *     error if the retrieved service config is invalid, or null if there is no\n   *     service config\n   * @param resolutionNote Provides additional context to RPC failure status\n   *     messages generated by the load balancing policy.\n   * @returns Whether or not the load balancing policy accepted the result.\n   */\n  (\n    endpointList: StatusOr<Endpoint[]>,\n    attributes: { [key: string]: unknown },\n    serviceConfig: StatusOr<ServiceConfig> | null,\n    resolutionNote: string\n  ): boolean;\n}\n/**\n * A resolver class that handles one or more of the name syntax schemes defined\n * in the [gRPC Name Resolution document](https://github.com/grpc/grpc/blob/master/doc/naming.md)\n */\nexport interface Resolver {\n  /**\n   * Indicates that the caller wants new name resolution data. Calling this\n   * function may eventually result in calling one of the `ResolverListener`\n   * functions, but that is not guaranteed. Those functions will never be\n   * called synchronously with the constructor or updateResolution.\n   */\n  updateResolution(): void;\n\n  /**\n   * Discard all resources owned by the resolver. A later call to\n   * `updateResolution` should reinitialize those resources.  No\n   * `ResolverListener` callbacks should be called after `destroy` is called\n   * until `updateResolution` is called again.\n   */\n  destroy(): void;\n}\n\nexport interface ResolverConstructor {\n  new (\n    target: GrpcUri,\n    listener: ResolverListener,\n    channelOptions: ChannelOptions\n  ): Resolver;\n  /**\n   * Get the default authority for a target. This loosely corresponds to that\n   * target's hostname. Throws an error if this resolver class cannot parse the\n   * `target`.\n   * @param target\n   */\n  getDefaultAuthority(target: GrpcUri): string;\n}\n\nconst registeredResolvers: { [scheme: string]: ResolverConstructor } = {};\nlet defaultScheme: string | null = null;\n\n/**\n * Register a resolver class to handle target names prefixed with the `prefix`\n * string. This prefix should correspond to a URI scheme name listed in the\n * [gRPC Name Resolution document](https://github.com/grpc/grpc/blob/master/doc/naming.md)\n * @param prefix\n * @param resolverClass\n */\nexport function registerResolver(\n  scheme: string,\n  resolverClass: ResolverConstructor\n) {\n  registeredResolvers[scheme] = resolverClass;\n}\n\n/**\n * Register a default resolver to handle target names that do not start with\n * any registered prefix.\n * @param resolverClass\n */\nexport function registerDefaultScheme(scheme: string) {\n  defaultScheme = scheme;\n}\n\n/**\n * Create a name resolver for the specified target, if possible. Throws an\n * error if no such name resolver can be created.\n * @param target\n * @param listener\n */\nexport function createResolver(\n  target: GrpcUri,\n  listener: ResolverListener,\n  options: ChannelOptions\n): Resolver {\n  if (target.scheme !== undefined && target.scheme in registeredResolvers) {\n    return new registeredResolvers[target.scheme](target, listener, options);\n  } else {\n    throw new Error(\n      `No resolver could be created for target ${uriToString(target)}`\n    );\n  }\n}\n\n/**\n * Get the default authority for the specified target, if possible. Throws an\n * error if no registered name resolver can parse that target string.\n * @param target\n */\nexport function getDefaultAuthority(target: GrpcUri): string {\n  if (target.scheme !== undefined && target.scheme in registeredResolvers) {\n    return registeredResolvers[target.scheme].getDefaultAuthority(target);\n  } else {\n    throw new Error(`Invalid target ${uriToString(target)}`);\n  }\n}\n\nexport function mapUriDefaultScheme(target: GrpcUri): GrpcUri | null {\n  if (target.scheme === undefined || !(target.scheme in registeredResolvers)) {\n    if (defaultScheme !== null) {\n      return {\n        scheme: defaultScheme,\n        authority: undefined,\n        path: uriToString(target),\n      };\n    } else {\n      return null;\n    }\n  }\n  return target;\n}\n", "/*\n * Copyright 2019 gRPC authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n */\n\nimport {\n  ConnectionOptions,\n  createSecureContext,\n  PeerCertificate,\n  SecureContext,\n  checkServerIdentity,\n  connect as tlsConnect\n} from 'tls';\n\nimport { CallCredentials } from './call-credentials';\nimport { CIPHER_SUITES, getDefaultRootsData } from './tls-helpers';\nimport { CaCertificateUpdate, CaCertificateUpdateListener, CertificateProvider, IdentityCertificateUpdate, IdentityCertificateUpdateListener } from './certificate-provider';\nimport { Socket } from 'net';\nimport { ChannelOptions } from './channel-options';\nimport { GrpcUri, parseUri, splitHostPort } from './uri-parser';\nimport { getDefaultAuthority } from './resolver';\nimport { log } from './logging';\nimport { LogVerbosity } from './constants';\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction verifyIsBufferOrNull(obj: any, friendlyName: string): void {\n  if (obj && !(obj instanceof Buffer)) {\n    throw new TypeError(`${friendlyName}, if provided, must be a Buffer.`);\n  }\n}\n\n/**\n * A callback that will receive the expected hostname and presented peer\n * certificate as parameters. The callback should return an error to\n * indicate that the presented certificate is considered invalid and\n * otherwise returned undefined.\n */\nexport type CheckServerIdentityCallback = (\n  hostname: string,\n  cert: PeerCertificate\n) => Error | undefined;\n\n/**\n * Additional peer verification options that can be set when creating\n * SSL credentials.\n */\nexport interface VerifyOptions {\n  /**\n   * If set, this callback will be invoked after the usual hostname verification\n   * has been performed on the peer certificate.\n   */\n  checkServerIdentity?: CheckServerIdentityCallback;\n  rejectUnauthorized?: boolean;\n}\n\nexport interface SecureConnectResult {\n  socket: Socket;\n  secure: boolean;\n}\n\nexport interface SecureConnector {\n  connect(socket: Socket): Promise<SecureConnectResult>;\n  waitForReady(): Promise<void>;\n  getCallCredentials(): CallCredentials;\n  destroy(): void;\n}\n\n/**\n * A class that contains credentials for communicating over a channel, as well\n * as a set of per-call credentials, which are applied to every method call made\n * over a channel initialized with an instance of this class.\n */\nexport abstract class ChannelCredentials {\n  /**\n   * Returns a copy of this object with the included set of per-call credentials\n   * expanded to include callCredentials.\n   * @param callCredentials A CallCredentials object to associate with this\n   * instance.\n   */\n  compose(callCredentials: CallCredentials): ChannelCredentials {\n    return new ComposedChannelCredentialsImpl(this, callCredentials);\n  }\n\n  /**\n   * Indicates whether this credentials object creates a secure channel.\n   */\n  abstract _isSecure(): boolean;\n\n  /**\n   * Check whether two channel credentials objects are equal. Two secure\n   * credentials are equal if they were constructed with the same parameters.\n   * @param other The other ChannelCredentials Object\n   */\n  abstract _equals(other: ChannelCredentials): boolean;\n\n  abstract _createSecureConnector(channelTarget: GrpcUri, options: ChannelOptions, callCredentials?: CallCredentials): SecureConnector;\n\n  /**\n   * Return a new ChannelCredentials instance with a given set of credentials.\n   * The resulting instance can be used to construct a Channel that communicates\n   * over TLS.\n   * @param rootCerts The root certificate data.\n   * @param privateKey The client certificate private key, if available.\n   * @param certChain The client certificate key chain, if available.\n   * @param verifyOptions Additional options to modify certificate verification\n   */\n  static createSsl(\n    rootCerts?: Buffer | null,\n    privateKey?: Buffer | null,\n    certChain?: Buffer | null,\n    verifyOptions?: VerifyOptions\n  ): ChannelCredentials {\n    verifyIsBufferOrNull(rootCerts, 'Root certificate');\n    verifyIsBufferOrNull(privateKey, 'Private key');\n    verifyIsBufferOrNull(certChain, 'Certificate chain');\n    if (privateKey && !certChain) {\n      throw new Error(\n        'Private key must be given with accompanying certificate chain'\n      );\n    }\n    if (!privateKey && certChain) {\n      throw new Error(\n        'Certificate chain must be given with accompanying private key'\n      );\n    }\n    const secureContext = createSecureContext({\n      ca: rootCerts ?? getDefaultRootsData() ?? undefined,\n      key: privateKey ?? undefined,\n      cert: certChain ?? undefined,\n      ciphers: CIPHER_SUITES,\n    });\n    return new SecureChannelCredentialsImpl(secureContext, verifyOptions ?? {});\n  }\n\n  /**\n   * Return a new ChannelCredentials instance with credentials created using\n   * the provided secureContext. The resulting instances can be used to\n   * construct a Channel that communicates over TLS. gRPC will not override\n   * anything in the provided secureContext, so the environment variables\n   * GRPC_SSL_CIPHER_SUITES and GRPC_DEFAULT_SSL_ROOTS_FILE_PATH will\n   * not be applied.\n   * @param secureContext The return value of tls.createSecureContext()\n   * @param verifyOptions Additional options to modify certificate verification\n   */\n  static createFromSecureContext(\n    secureContext: SecureContext,\n    verifyOptions?: VerifyOptions\n  ): ChannelCredentials {\n    return new SecureChannelCredentialsImpl(secureContext, verifyOptions ?? {});\n  }\n\n  /**\n   * Return a new ChannelCredentials instance with no credentials.\n   */\n  static createInsecure(): ChannelCredentials {\n    return new InsecureChannelCredentialsImpl();\n  }\n}\n\nclass InsecureChannelCredentialsImpl extends ChannelCredentials {\n  constructor() {\n    super();\n  }\n\n  override compose(callCredentials: CallCredentials): never {\n    throw new Error('Cannot compose insecure credentials');\n  }\n  _isSecure(): boolean {\n    return false;\n  }\n  _equals(other: ChannelCredentials): boolean {\n    return other instanceof InsecureChannelCredentialsImpl;\n  }\n  _createSecureConnector(channelTarget: GrpcUri, options: ChannelOptions, callCredentials?: CallCredentials): SecureConnector {\n    return {\n      connect(socket) {\n        return Promise.resolve({\n          socket,\n          secure: false\n        });\n      },\n      waitForReady: () => {\n        return Promise.resolve();\n      },\n      getCallCredentials: () => {\n        return callCredentials ?? CallCredentials.createEmpty();\n      },\n      destroy() {}\n    }\n  }\n}\n\nfunction getConnectionOptions(secureContext: SecureContext, verifyOptions: VerifyOptions, channelTarget: GrpcUri, options: ChannelOptions): ConnectionOptions {\n  const connectionOptions: ConnectionOptions = {\n    secureContext: secureContext\n  };\n  let realTarget: GrpcUri = channelTarget;\n  if ('grpc.http_connect_target' in options) {\n    const parsedTarget = parseUri(options['grpc.http_connect_target']!);\n    if (parsedTarget) {\n      realTarget = parsedTarget;\n    }\n  }\n  const targetPath = getDefaultAuthority(realTarget);\n  const hostPort = splitHostPort(targetPath);\n  const remoteHost = hostPort?.host ?? targetPath;\n  connectionOptions.host = remoteHost;\n\n  if (verifyOptions.checkServerIdentity) {\n    connectionOptions.checkServerIdentity = verifyOptions.checkServerIdentity;\n  }\n  if (verifyOptions.rejectUnauthorized !== undefined) {\n    connectionOptions.rejectUnauthorized = verifyOptions.rejectUnauthorized;\n  }\n  connectionOptions.ALPNProtocols = ['h2'];\n  if (options['grpc.ssl_target_name_override']) {\n    const sslTargetNameOverride = options['grpc.ssl_target_name_override']!;\n    const originalCheckServerIdentity =\n      connectionOptions.checkServerIdentity ?? checkServerIdentity;\n    connectionOptions.checkServerIdentity = (\n      host: string,\n      cert: PeerCertificate\n    ): Error | undefined => {\n      return originalCheckServerIdentity(sslTargetNameOverride, cert);\n    };\n    connectionOptions.servername = sslTargetNameOverride;\n  } else {\n    connectionOptions.servername = remoteHost;\n  }\n  if (options['grpc-node.tls_enable_trace']) {\n    connectionOptions.enableTrace = true;\n  }\n  return connectionOptions;\n}\n\nclass SecureConnectorImpl implements SecureConnector {\n  constructor(private connectionOptions: ConnectionOptions, private callCredentials: CallCredentials) {\n  }\n  connect(socket: Socket): Promise<SecureConnectResult> {\n    const tlsConnectOptions: ConnectionOptions = {\n      socket: socket,\n      ...this.connectionOptions\n    };\n    return new Promise<SecureConnectResult>((resolve, reject) => {\n      const tlsSocket = tlsConnect(tlsConnectOptions, () => {\n        if ((this.connectionOptions.rejectUnauthorized ?? true) && !tlsSocket.authorized) {\n          reject(tlsSocket.authorizationError);\n          return;\n        }\n        resolve({\n          socket: tlsSocket,\n          secure: true\n        })\n      });\n      tlsSocket.on('error', (error: Error) => {\n        reject(error);\n      });\n    });\n  }\n  waitForReady(): Promise<void> {\n    return Promise.resolve();\n  }\n  getCallCredentials(): CallCredentials {\n    return this.callCredentials;\n  }\n  destroy() {}\n}\n\nclass SecureChannelCredentialsImpl extends ChannelCredentials {\n  constructor(\n    private secureContext: SecureContext,\n    private verifyOptions: VerifyOptions\n  ) {\n    super();\n  }\n\n  _isSecure(): boolean {\n    return true;\n  }\n  _equals(other: ChannelCredentials): boolean {\n    if (this === other) {\n      return true;\n    }\n    if (other instanceof SecureChannelCredentialsImpl) {\n      return (\n        this.secureContext === other.secureContext &&\n        this.verifyOptions.checkServerIdentity ===\n          other.verifyOptions.checkServerIdentity\n      );\n    } else {\n      return false;\n    }\n  }\n  _createSecureConnector(channelTarget: GrpcUri, options: ChannelOptions, callCredentials?: CallCredentials): SecureConnector {\n    const connectionOptions = getConnectionOptions(this.secureContext, this.verifyOptions, channelTarget, options);\n    return new SecureConnectorImpl(connectionOptions, callCredentials ?? CallCredentials.createEmpty());\n  }\n}\n\nclass CertificateProviderChannelCredentialsImpl extends ChannelCredentials {\n  private refcount: number = 0;\n  /**\n   * `undefined` means that the certificates have not yet been loaded. `null`\n   * means that an attempt to load them has completed, and has failed.\n   */\n  private latestCaUpdate: CaCertificateUpdate | null | undefined = undefined;\n  /**\n   * `undefined` means that the certificates have not yet been loaded. `null`\n   * means that an attempt to load them has completed, and has failed.\n   */\n  private latestIdentityUpdate: IdentityCertificateUpdate | null | undefined = undefined;\n  private caCertificateUpdateListener: CaCertificateUpdateListener = this.handleCaCertificateUpdate.bind(this);\n  private identityCertificateUpdateListener: IdentityCertificateUpdateListener = this.handleIdentityCertitificateUpdate.bind(this);\n  private secureContextWatchers: ((context: SecureContext | null) => void)[] = [];\n  private static SecureConnectorImpl = class implements SecureConnector {\n    constructor(private parent: CertificateProviderChannelCredentialsImpl, private channelTarget: GrpcUri, private options: ChannelOptions, private callCredentials: CallCredentials) {}\n\n    connect(socket: Socket): Promise<SecureConnectResult> {\n      return new Promise((resolve, reject) => {\n        const secureContext = this.parent.getLatestSecureContext();\n        if (!secureContext) {\n          reject(new Error('Failed to load credentials'));\n          return;\n        }\n        if (socket.closed) {\n          reject(new Error('Socket closed while loading credentials'));\n        }\n        const connnectionOptions = getConnectionOptions(secureContext, this.parent.verifyOptions, this.channelTarget, this.options);\n        const tlsConnectOptions: ConnectionOptions = {\n          socket: socket,\n          ...connnectionOptions\n        }\n        const closeCallback = () => {\n          reject(new Error('Socket closed'));\n        };\n        const errorCallback = (error: Error) => {\n          reject(error);\n        }\n        const tlsSocket = tlsConnect(tlsConnectOptions, () => {\n          tlsSocket.removeListener('close', closeCallback);\n          tlsSocket.removeListener('error', errorCallback);\n          if ((this.parent.verifyOptions.rejectUnauthorized ?? true) && !tlsSocket.authorized) {\n            reject(tlsSocket.authorizationError);\n            return;\n          }\n          resolve({\n            socket: tlsSocket,\n            secure: true\n          });\n        });\n        tlsSocket.once('close', closeCallback);\n        tlsSocket.once('error', errorCallback);\n      });\n    }\n\n    async waitForReady(): Promise<void> {\n      await this.parent.getSecureContext();\n    }\n\n    getCallCredentials(): CallCredentials {\n      return this.callCredentials;\n    }\n\n    destroy() {\n      this.parent.unref();\n    }\n  }\n  constructor(\n    private caCertificateProvider: CertificateProvider,\n    private identityCertificateProvider: CertificateProvider | null,\n    private verifyOptions: VerifyOptions\n  ) {\n    super();\n  }\n  _isSecure(): boolean {\n    return true;\n  }\n  _equals(other: ChannelCredentials): boolean {\n    if (this === other) {\n      return true;\n    }\n    if (other instanceof CertificateProviderChannelCredentialsImpl) {\n      return this.caCertificateProvider === other.caCertificateProvider &&\n        this.identityCertificateProvider === other.identityCertificateProvider &&\n        this.verifyOptions?.checkServerIdentity === other.verifyOptions?.checkServerIdentity;\n    } else {\n      return false;\n    }\n  }\n  private ref(): void {\n    if (this.refcount === 0) {\n      this.caCertificateProvider.addCaCertificateListener(this.caCertificateUpdateListener);\n      this.identityCertificateProvider?.addIdentityCertificateListener(this.identityCertificateUpdateListener);\n    }\n    this.refcount += 1;\n  }\n  private unref(): void {\n    this.refcount -= 1;\n    if (this.refcount === 0) {\n      this.caCertificateProvider.removeCaCertificateListener(this.caCertificateUpdateListener);\n      this.identityCertificateProvider?.removeIdentityCertificateListener(this.identityCertificateUpdateListener);\n    }\n  }\n  _createSecureConnector(channelTarget: GrpcUri, options: ChannelOptions, callCredentials?: CallCredentials): SecureConnector {\n    this.ref();\n    return new CertificateProviderChannelCredentialsImpl.SecureConnectorImpl(this, channelTarget, options, callCredentials ?? CallCredentials.createEmpty());\n  }\n\n  private maybeUpdateWatchers() {\n    if (this.hasReceivedUpdates()) {\n      for (const watcher of this.secureContextWatchers) {\n        watcher(this.getLatestSecureContext());\n      }\n      this.secureContextWatchers = [];\n    }\n  }\n\n  private handleCaCertificateUpdate(update: CaCertificateUpdate | null) {\n    this.latestCaUpdate = update;\n    this.maybeUpdateWatchers();\n  }\n\n  private handleIdentityCertitificateUpdate(update: IdentityCertificateUpdate | null) {\n    this.latestIdentityUpdate = update;\n    this.maybeUpdateWatchers();\n  }\n\n  private hasReceivedUpdates(): boolean {\n    if (this.latestCaUpdate === undefined) {\n      return false;\n    }\n    if (this.identityCertificateProvider && this.latestIdentityUpdate === undefined) {\n      return false;\n    }\n    return true;\n  }\n\n  private getSecureContext(): Promise<SecureContext | null> {\n    if (this.hasReceivedUpdates()) {\n      return Promise.resolve(this.getLatestSecureContext());\n    } else {\n      return new Promise(resolve => {\n        this.secureContextWatchers.push(resolve);\n      });\n    }\n  }\n\n  private getLatestSecureContext(): SecureContext | null {\n    if (!this.latestCaUpdate) {\n      return null;\n    }\n    if (this.identityCertificateProvider !== null && !this.latestIdentityUpdate) {\n      return null;\n    }\n    try {\n      return createSecureContext({\n        ca: this.latestCaUpdate.caCertificate,\n        key: this.latestIdentityUpdate?.privateKey,\n        cert: this.latestIdentityUpdate?.certificate,\n        ciphers: CIPHER_SUITES\n      });\n    } catch (e) {\n      log(LogVerbosity.ERROR, 'Failed to createSecureContext with error ' + (e as Error).message);\n      return null;\n    }\n  }\n}\n\nexport function createCertificateProviderChannelCredentials(caCertificateProvider: CertificateProvider, identityCertificateProvider: CertificateProvider | null, verifyOptions?: VerifyOptions) {\n  return new CertificateProviderChannelCredentialsImpl(caCertificateProvider, identityCertificateProvider, verifyOptions ?? {});\n}\n\nclass ComposedChannelCredentialsImpl extends ChannelCredentials {\n  constructor(\n    private channelCredentials: ChannelCredentials,\n    private callCredentials: CallCredentials\n  ) {\n    super();\n    if (!channelCredentials._isSecure()) {\n      throw new Error('Cannot compose insecure credentials');\n    }\n  }\n  compose(callCredentials: CallCredentials) {\n    const combinedCallCredentials =\n      this.callCredentials.compose(callCredentials);\n    return new ComposedChannelCredentialsImpl(\n      this.channelCredentials,\n      combinedCallCredentials\n    );\n  }\n  _isSecure(): boolean {\n    return true;\n  }\n  _equals(other: ChannelCredentials): boolean {\n    if (this === other) {\n      return true;\n    }\n    if (other instanceof ComposedChannelCredentialsImpl) {\n      return (\n        this.channelCredentials._equals(other.channelCredentials) &&\n        this.callCredentials._equals(other.callCredentials)\n      );\n    } else {\n      return false;\n    }\n  }\n  _createSecureConnector(channelTarget: GrpcUri, options: ChannelOptions, callCredentials?: CallCredentials): SecureConnector {\n    const combinedCallCredentials = this.callCredentials.compose(callCredentials ?? CallCredentials.createEmpty());\n    return this.channelCredentials._createSecureConnector(channelTarget, options, combinedCallCredentials);\n  }\n}\n", "/*\n * Copyright 2019 gRPC authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n */\n\nimport { ChannelOptions } from './channel-options';\nimport { Endpoint, SubchannelAddress } from './subchannel-address';\nimport { ConnectivityState } from './connectivity-state';\nimport { Picker } from './picker';\nimport type { ChannelRef, SubchannelRef } from './channelz';\nimport { SubchannelInterface } from './subchannel-interface';\nimport { LoadBalancingConfig } from './service-config';\nimport { log } from './logging';\nimport { LogVerbosity } from './constants';\nimport { StatusOr } from './call-interface';\n\n/**\n * A collection of functions associated with a channel that a load balancer\n * can call as necessary.\n */\nexport interface ChannelControlHelper {\n  /**\n   * Returns a subchannel connected to the specified address.\n   * @param subchannelAddress The address to connect to\n   * @param subchannelArgs Channel arguments to use to construct the subchannel\n   */\n  createSubchannel(\n    subchannelAddress: SubchannelAddress,\n    subchannelArgs: ChannelOptions\n  ): SubchannelInterface;\n  /**\n   * Passes a new subchannel picker up to the channel. This is called if either\n   * the connectivity state changes or if a different picker is needed for any\n   * other reason.\n   * @param connectivityState New connectivity state\n   * @param picker New picker\n   */\n  updateState(\n    connectivityState: ConnectivityState,\n    picker: Picker,\n    errorMessage: string | null\n  ): void;\n  /**\n   * Request new data from the resolver.\n   */\n  requestReresolution(): void;\n  addChannelzChild(child: ChannelRef | SubchannelRef): void;\n  removeChannelzChild(child: ChannelRef | SubchannelRef): void;\n}\n\n/**\n * Create a child ChannelControlHelper that overrides some methods of the\n * parent while letting others pass through to the parent unmodified. This\n * allows other code to create these children without needing to know about\n * all of the methods to be passed through.\n * @param parent\n * @param overrides\n */\nexport function createChildChannelControlHelper(\n  parent: ChannelControlHelper,\n  overrides: Partial<ChannelControlHelper>\n): ChannelControlHelper {\n  return {\n    createSubchannel:\n      overrides.createSubchannel?.bind(overrides) ??\n      parent.createSubchannel.bind(parent),\n    updateState:\n      overrides.updateState?.bind(overrides) ?? parent.updateState.bind(parent),\n    requestReresolution:\n      overrides.requestReresolution?.bind(overrides) ??\n      parent.requestReresolution.bind(parent),\n    addChannelzChild:\n      overrides.addChannelzChild?.bind(overrides) ??\n      parent.addChannelzChild.bind(parent),\n    removeChannelzChild:\n      overrides.removeChannelzChild?.bind(overrides) ??\n      parent.removeChannelzChild.bind(parent),\n  };\n}\n\n/**\n * Tracks one or more connected subchannels and determines which subchannel\n * each request should use.\n */\nexport interface LoadBalancer {\n  /**\n   * Gives the load balancer a new list of addresses to start connecting to.\n   * The load balancer will start establishing connections with the new list,\n   * but will continue using any existing connections until the new connections\n   * are established\n   * @param endpointList The new list of addresses to connect to\n   * @param lbConfig The load balancing config object from the service config,\n   *     if one was provided\n   * @param channelOptions Channel options from the channel, plus resolver\n   *     attributes\n   * @param resolutionNote A not from the resolver to include in errors\n   */\n  updateAddressList(\n    endpointList: StatusOr<Endpoint[]>,\n    lbConfig: TypedLoadBalancingConfig,\n    channelOptions: ChannelOptions,\n    resolutionNote: string\n  ): boolean;\n  /**\n   * If the load balancer is currently in the IDLE state, start connecting.\n   */\n  exitIdle(): void;\n  /**\n   * If the load balancer is currently in the CONNECTING or TRANSIENT_FAILURE\n   * state, reset the current connection backoff timeout to its base value and\n   * transition to CONNECTING if in TRANSIENT_FAILURE.\n   */\n  resetBackoff(): void;\n  /**\n   * The load balancer unrefs all of its subchannels and stops calling methods\n   * of its channel control helper.\n   */\n  destroy(): void;\n  /**\n   * Get the type name for this load balancer type. Must be constant across an\n   * entire load balancer implementation class and must match the name that the\n   * balancer implementation class was registered with.\n   */\n  getTypeName(): string;\n}\n\nexport interface LoadBalancerConstructor {\n  new (\n    channelControlHelper: ChannelControlHelper\n  ): LoadBalancer;\n}\n\nexport interface TypedLoadBalancingConfig {\n  getLoadBalancerName(): string;\n  toJsonObject(): object;\n}\n\nexport interface TypedLoadBalancingConfigConstructor {\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  new (...args: any): TypedLoadBalancingConfig;\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  createFromJson(obj: any): TypedLoadBalancingConfig;\n}\n\nconst registeredLoadBalancerTypes: {\n  [name: string]: {\n    LoadBalancer: LoadBalancerConstructor;\n    LoadBalancingConfig: TypedLoadBalancingConfigConstructor;\n  };\n} = {};\n\nlet defaultLoadBalancerType: string | null = null;\n\nexport function registerLoadBalancerType(\n  typeName: string,\n  loadBalancerType: LoadBalancerConstructor,\n  loadBalancingConfigType: TypedLoadBalancingConfigConstructor\n) {\n  registeredLoadBalancerTypes[typeName] = {\n    LoadBalancer: loadBalancerType,\n    LoadBalancingConfig: loadBalancingConfigType,\n  };\n}\n\nexport function registerDefaultLoadBalancerType(typeName: string) {\n  defaultLoadBalancerType = typeName;\n}\n\nexport function createLoadBalancer(\n  config: TypedLoadBalancingConfig,\n  channelControlHelper: ChannelControlHelper\n): LoadBalancer | null {\n  const typeName = config.getLoadBalancerName();\n  if (typeName in registeredLoadBalancerTypes) {\n    return new registeredLoadBalancerTypes[typeName].LoadBalancer(\n      channelControlHelper\n    );\n  } else {\n    return null;\n  }\n}\n\nexport function isLoadBalancerNameRegistered(typeName: string): boolean {\n  return typeName in registeredLoadBalancerTypes;\n}\n\nexport function parseLoadBalancingConfig(\n  rawConfig: LoadBalancingConfig\n): TypedLoadBalancingConfig {\n  const keys = Object.keys(rawConfig);\n  if (keys.length !== 1) {\n    throw new Error(\n      'Provided load balancing config has multiple conflicting entries'\n    );\n  }\n  const typeName = keys[0];\n  if (typeName in registeredLoadBalancerTypes) {\n    try {\n      return registeredLoadBalancerTypes[\n        typeName\n      ].LoadBalancingConfig.createFromJson(rawConfig[typeName]);\n    } catch (e) {\n      throw new Error(`${typeName}: ${(e as Error).message}`);\n    }\n  } else {\n    throw new Error(`Unrecognized load balancing config name ${typeName}`);\n  }\n}\n\nexport function getDefaultConfig() {\n  if (!defaultLoadBalancerType) {\n    throw new Error('No default load balancer type registered');\n  }\n  return new registeredLoadBalancerTypes[\n    defaultLoadBalancerType\n  ]!.LoadBalancingConfig();\n}\n\nexport function selectLbConfigFromList(\n  configs: LoadBalancingConfig[],\n  fallbackTodefault = false\n): TypedLoadBalancingConfig | null {\n  for (const config of configs) {\n    try {\n      return parseLoadBalancingConfig(config);\n    } catch (e) {\n      log(\n        LogVerbosity.DEBUG,\n        'Config parsing failed with error',\n        (e as Error).message\n      );\n      continue;\n    }\n  }\n  if (fallbackTodefault) {\n    if (defaultLoadBalancerType) {\n      return new registeredLoadBalancerTypes[\n        defaultLoadBalancerType\n      ]!.LoadBalancingConfig();\n    } else {\n      return null;\n    }\n  } else {\n    return null;\n  }\n}\n", "/*\n * Copyright 2019 gRPC authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n */\n\n/* This file implements gRFC A2 and the service config spec:\n * https://github.com/grpc/proposal/blob/master/A2-service-configs-in-dns.md\n * https://github.com/grpc/grpc/blob/master/doc/service_config.md. Each\n * function here takes an object with unknown structure and returns its\n * specific object type if the input has the right structure, and throws an\n * error otherwise. */\n\n/* The any type is purposely used here. All functions validate their input at\n * runtime */\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\nimport * as os from 'os';\nimport { Status } from './constants';\nimport { Duration } from './duration';\n\nexport interface MethodConfigName {\n  service?: string;\n  method?: string;\n}\n\nexport interface RetryPolicy {\n  maxAttempts: number;\n  initialBackoff: string;\n  maxBackoff: string;\n  backoffMultiplier: number;\n  retryableStatusCodes: (Status | string)[];\n}\n\nexport interface HedgingPolicy {\n  maxAttempts: number;\n  hedgingDelay?: string;\n  nonFatalStatusCodes?: (Status | string)[];\n}\n\nexport interface MethodConfig {\n  name: MethodConfigName[];\n  waitForReady?: boolean;\n  timeout?: Duration;\n  maxRequestBytes?: number;\n  maxResponseBytes?: number;\n  retryPolicy?: RetryPolicy;\n  hedgingPolicy?: HedgingPolicy;\n}\n\nexport interface RetryThrottling {\n  maxTokens: number;\n  tokenRatio: number;\n}\n\nexport interface LoadBalancingConfig {\n  [key: string]: object;\n}\n\nexport interface ServiceConfig {\n  loadBalancingPolicy?: string;\n  loadBalancingConfig: LoadBalancingConfig[];\n  methodConfig: MethodConfig[];\n  retryThrottling?: RetryThrottling;\n}\n\nexport interface ServiceConfigCanaryConfig {\n  clientLanguage?: string[];\n  percentage?: number;\n  clientHostname?: string[];\n  serviceConfig: ServiceConfig;\n}\n\n/**\n * Recognizes a number with up to 9 digits after the decimal point, followed by\n * an \"s\", representing a number of seconds.\n */\nconst DURATION_REGEX = /^\\d+(\\.\\d{1,9})?s$/;\n\n/**\n * Client language name used for determining whether this client matches a\n * `ServiceConfigCanaryConfig`'s `clientLanguage` list.\n */\nconst CLIENT_LANGUAGE_STRING = 'node';\n\nfunction validateName(obj: any): MethodConfigName {\n  // In this context, and unset field and '' are considered the same\n  if ('service' in obj && obj.service !== '') {\n    if (typeof obj.service !== 'string') {\n      throw new Error(\n        `Invalid method config name: invalid service: expected type string, got ${typeof obj.service}`\n      );\n    }\n    if ('method' in obj && obj.method !== '') {\n      if (typeof obj.method !== 'string') {\n        throw new Error(\n          `Invalid method config name: invalid method: expected type string, got ${typeof obj.service}`\n        );\n      }\n      return {\n        service: obj.service,\n        method: obj.method,\n      };\n    } else {\n      return {\n        service: obj.service,\n      };\n    }\n  } else {\n    if ('method' in obj && obj.method !== undefined) {\n      throw new Error(\n        `Invalid method config name: method set with empty or unset service`\n      );\n    }\n    return {};\n  }\n}\n\nfunction validateRetryPolicy(obj: any): RetryPolicy {\n  if (\n    !('maxAttempts' in obj) ||\n    !Number.isInteger(obj.maxAttempts) ||\n    obj.maxAttempts < 2\n  ) {\n    throw new Error(\n      'Invalid method config retry policy: maxAttempts must be an integer at least 2'\n    );\n  }\n  if (\n    !('initialBackoff' in obj) ||\n    typeof obj.initialBackoff !== 'string' ||\n    !DURATION_REGEX.test(obj.initialBackoff)\n  ) {\n    throw new Error(\n      'Invalid method config retry policy: initialBackoff must be a string consisting of a positive integer or decimal followed by s'\n    );\n  }\n  if (\n    !('maxBackoff' in obj) ||\n    typeof obj.maxBackoff !== 'string' ||\n    !DURATION_REGEX.test(obj.maxBackoff)\n  ) {\n    throw new Error(\n      'Invalid method config retry policy: maxBackoff must be a string consisting of a positive integer or decimal followed by s'\n    );\n  }\n  if (\n    !('backoffMultiplier' in obj) ||\n    typeof obj.backoffMultiplier !== 'number' ||\n    obj.backoffMultiplier <= 0\n  ) {\n    throw new Error(\n      'Invalid method config retry policy: backoffMultiplier must be a number greater than 0'\n    );\n  }\n  if (\n    !('retryableStatusCodes' in obj && Array.isArray(obj.retryableStatusCodes))\n  ) {\n    throw new Error(\n      'Invalid method config retry policy: retryableStatusCodes is required'\n    );\n  }\n  if (obj.retryableStatusCodes.length === 0) {\n    throw new Error(\n      'Invalid method config retry policy: retryableStatusCodes must be non-empty'\n    );\n  }\n  for (const value of obj.retryableStatusCodes) {\n    if (typeof value === 'number') {\n      if (!Object.values(Status).includes(value)) {\n        throw new Error(\n          'Invalid method config retry policy: retryableStatusCodes value not in status code range'\n        );\n      }\n    } else if (typeof value === 'string') {\n      if (!Object.values(Status).includes(value.toUpperCase())) {\n        throw new Error(\n          'Invalid method config retry policy: retryableStatusCodes value not a status code name'\n        );\n      }\n    } else {\n      throw new Error(\n        'Invalid method config retry policy: retryableStatusCodes value must be a string or number'\n      );\n    }\n  }\n  return {\n    maxAttempts: obj.maxAttempts,\n    initialBackoff: obj.initialBackoff,\n    maxBackoff: obj.maxBackoff,\n    backoffMultiplier: obj.backoffMultiplier,\n    retryableStatusCodes: obj.retryableStatusCodes,\n  };\n}\n\nfunction validateHedgingPolicy(obj: any): HedgingPolicy {\n  if (\n    !('maxAttempts' in obj) ||\n    !Number.isInteger(obj.maxAttempts) ||\n    obj.maxAttempts < 2\n  ) {\n    throw new Error(\n      'Invalid method config hedging policy: maxAttempts must be an integer at least 2'\n    );\n  }\n  if (\n    'hedgingDelay' in obj &&\n    (typeof obj.hedgingDelay !== 'string' ||\n      !DURATION_REGEX.test(obj.hedgingDelay))\n  ) {\n    throw new Error(\n      'Invalid method config hedging policy: hedgingDelay must be a string consisting of a positive integer followed by s'\n    );\n  }\n  if ('nonFatalStatusCodes' in obj && Array.isArray(obj.nonFatalStatusCodes)) {\n    for (const value of obj.nonFatalStatusCodes) {\n      if (typeof value === 'number') {\n        if (!Object.values(Status).includes(value)) {\n          throw new Error(\n            'Invalid method config hedging policy: nonFatalStatusCodes value not in status code range'\n          );\n        }\n      } else if (typeof value === 'string') {\n        if (!Object.values(Status).includes(value.toUpperCase())) {\n          throw new Error(\n            'Invalid method config hedging policy: nonFatalStatusCodes value not a status code name'\n          );\n        }\n      } else {\n        throw new Error(\n          'Invalid method config hedging policy: nonFatalStatusCodes value must be a string or number'\n        );\n      }\n    }\n  }\n  const result: HedgingPolicy = {\n    maxAttempts: obj.maxAttempts,\n  };\n  if (obj.hedgingDelay) {\n    result.hedgingDelay = obj.hedgingDelay;\n  }\n  if (obj.nonFatalStatusCodes) {\n    result.nonFatalStatusCodes = obj.nonFatalStatusCodes;\n  }\n  return result;\n}\n\nfunction validateMethodConfig(obj: any): MethodConfig {\n  const result: MethodConfig = {\n    name: [],\n  };\n  if (!('name' in obj) || !Array.isArray(obj.name)) {\n    throw new Error('Invalid method config: invalid name array');\n  }\n  for (const name of obj.name) {\n    result.name.push(validateName(name));\n  }\n  if ('waitForReady' in obj) {\n    if (typeof obj.waitForReady !== 'boolean') {\n      throw new Error('Invalid method config: invalid waitForReady');\n    }\n    result.waitForReady = obj.waitForReady;\n  }\n  if ('timeout' in obj) {\n    if (typeof obj.timeout === 'object') {\n      if (\n        !('seconds' in obj.timeout) ||\n        !(typeof obj.timeout.seconds === 'number')\n      ) {\n        throw new Error('Invalid method config: invalid timeout.seconds');\n      }\n      if (\n        !('nanos' in obj.timeout) ||\n        !(typeof obj.timeout.nanos === 'number')\n      ) {\n        throw new Error('Invalid method config: invalid timeout.nanos');\n      }\n      result.timeout = obj.timeout;\n    } else if (\n      typeof obj.timeout === 'string' &&\n      DURATION_REGEX.test(obj.timeout)\n    ) {\n      const timeoutParts = obj.timeout\n        .substring(0, obj.timeout.length - 1)\n        .split('.');\n      result.timeout = {\n        seconds: timeoutParts[0] | 0,\n        nanos: (timeoutParts[1] ?? 0) | 0,\n      };\n    } else {\n      throw new Error('Invalid method config: invalid timeout');\n    }\n  }\n  if ('maxRequestBytes' in obj) {\n    if (typeof obj.maxRequestBytes !== 'number') {\n      throw new Error('Invalid method config: invalid maxRequestBytes');\n    }\n    result.maxRequestBytes = obj.maxRequestBytes;\n  }\n  if ('maxResponseBytes' in obj) {\n    if (typeof obj.maxResponseBytes !== 'number') {\n      throw new Error('Invalid method config: invalid maxRequestBytes');\n    }\n    result.maxResponseBytes = obj.maxResponseBytes;\n  }\n  if ('retryPolicy' in obj) {\n    if ('hedgingPolicy' in obj) {\n      throw new Error(\n        'Invalid method config: retryPolicy and hedgingPolicy cannot both be specified'\n      );\n    } else {\n      result.retryPolicy = validateRetryPolicy(obj.retryPolicy);\n    }\n  } else if ('hedgingPolicy' in obj) {\n    result.hedgingPolicy = validateHedgingPolicy(obj.hedgingPolicy);\n  }\n  return result;\n}\n\nexport function validateRetryThrottling(obj: any): RetryThrottling {\n  if (\n    !('maxTokens' in obj) ||\n    typeof obj.maxTokens !== 'number' ||\n    obj.maxTokens <= 0 ||\n    obj.maxTokens > 1000\n  ) {\n    throw new Error(\n      'Invalid retryThrottling: maxTokens must be a number in (0, 1000]'\n    );\n  }\n  if (\n    !('tokenRatio' in obj) ||\n    typeof obj.tokenRatio !== 'number' ||\n    obj.tokenRatio <= 0\n  ) {\n    throw new Error(\n      'Invalid retryThrottling: tokenRatio must be a number greater than 0'\n    );\n  }\n  return {\n    maxTokens: +(obj.maxTokens as number).toFixed(3),\n    tokenRatio: +(obj.tokenRatio as number).toFixed(3),\n  };\n}\n\nfunction validateLoadBalancingConfig(obj: any): LoadBalancingConfig {\n  if (!(typeof obj === 'object' && obj !== null)) {\n    throw new Error(\n      `Invalid loadBalancingConfig: unexpected type ${typeof obj}`\n    );\n  }\n  const keys = Object.keys(obj);\n  if (keys.length > 1) {\n    throw new Error(\n      `Invalid loadBalancingConfig: unexpected multiple keys ${keys}`\n    );\n  }\n  if (keys.length === 0) {\n    throw new Error(\n      'Invalid loadBalancingConfig: load balancing policy name required'\n    );\n  }\n  return {\n    [keys[0]]: obj[keys[0]],\n  };\n}\n\nexport function validateServiceConfig(obj: any): ServiceConfig {\n  const result: ServiceConfig = {\n    loadBalancingConfig: [],\n    methodConfig: [],\n  };\n  if ('loadBalancingPolicy' in obj) {\n    if (typeof obj.loadBalancingPolicy === 'string') {\n      result.loadBalancingPolicy = obj.loadBalancingPolicy;\n    } else {\n      throw new Error('Invalid service config: invalid loadBalancingPolicy');\n    }\n  }\n  if ('loadBalancingConfig' in obj) {\n    if (Array.isArray(obj.loadBalancingConfig)) {\n      for (const config of obj.loadBalancingConfig) {\n        result.loadBalancingConfig.push(validateLoadBalancingConfig(config));\n      }\n    } else {\n      throw new Error('Invalid service config: invalid loadBalancingConfig');\n    }\n  }\n  if ('methodConfig' in obj) {\n    if (Array.isArray(obj.methodConfig)) {\n      for (const methodConfig of obj.methodConfig) {\n        result.methodConfig.push(validateMethodConfig(methodConfig));\n      }\n    }\n  }\n  if ('retryThrottling' in obj) {\n    result.retryThrottling = validateRetryThrottling(obj.retryThrottling);\n  }\n  // Validate method name uniqueness\n  const seenMethodNames: MethodConfigName[] = [];\n  for (const methodConfig of result.methodConfig) {\n    for (const name of methodConfig.name) {\n      for (const seenName of seenMethodNames) {\n        if (\n          name.service === seenName.service &&\n          name.method === seenName.method\n        ) {\n          throw new Error(\n            `Invalid service config: duplicate name ${name.service}/${name.method}`\n          );\n        }\n      }\n      seenMethodNames.push(name);\n    }\n  }\n  return result;\n}\n\nfunction validateCanaryConfig(obj: any): ServiceConfigCanaryConfig {\n  if (!('serviceConfig' in obj)) {\n    throw new Error('Invalid service config choice: missing service config');\n  }\n  const result: ServiceConfigCanaryConfig = {\n    serviceConfig: validateServiceConfig(obj.serviceConfig),\n  };\n  if ('clientLanguage' in obj) {\n    if (Array.isArray(obj.clientLanguage)) {\n      result.clientLanguage = [];\n      for (const lang of obj.clientLanguage) {\n        if (typeof lang === 'string') {\n          result.clientLanguage.push(lang);\n        } else {\n          throw new Error(\n            'Invalid service config choice: invalid clientLanguage'\n          );\n        }\n      }\n    } else {\n      throw new Error('Invalid service config choice: invalid clientLanguage');\n    }\n  }\n  if ('clientHostname' in obj) {\n    if (Array.isArray(obj.clientHostname)) {\n      result.clientHostname = [];\n      for (const lang of obj.clientHostname) {\n        if (typeof lang === 'string') {\n          result.clientHostname.push(lang);\n        } else {\n          throw new Error(\n            'Invalid service config choice: invalid clientHostname'\n          );\n        }\n      }\n    } else {\n      throw new Error('Invalid service config choice: invalid clientHostname');\n    }\n  }\n  if ('percentage' in obj) {\n    if (\n      typeof obj.percentage === 'number' &&\n      0 <= obj.percentage &&\n      obj.percentage <= 100\n    ) {\n      result.percentage = obj.percentage;\n    } else {\n      throw new Error('Invalid service config choice: invalid percentage');\n    }\n  }\n  // Validate that no unexpected fields are present\n  const allowedFields = [\n    'clientLanguage',\n    'percentage',\n    'clientHostname',\n    'serviceConfig',\n  ];\n  for (const field in obj) {\n    if (!allowedFields.includes(field)) {\n      throw new Error(\n        `Invalid service config choice: unexpected field ${field}`\n      );\n    }\n  }\n  return result;\n}\n\nfunction validateAndSelectCanaryConfig(\n  obj: any,\n  percentage: number\n): ServiceConfig {\n  if (!Array.isArray(obj)) {\n    throw new Error('Invalid service config list');\n  }\n  for (const config of obj) {\n    const validatedConfig = validateCanaryConfig(config);\n    /* For each field, we check if it is present, then only discard the\n     * config if the field value does not match the current client */\n    if (\n      typeof validatedConfig.percentage === 'number' &&\n      percentage > validatedConfig.percentage\n    ) {\n      continue;\n    }\n    if (Array.isArray(validatedConfig.clientHostname)) {\n      let hostnameMatched = false;\n      for (const hostname of validatedConfig.clientHostname) {\n        if (hostname === os.hostname()) {\n          hostnameMatched = true;\n        }\n      }\n      if (!hostnameMatched) {\n        continue;\n      }\n    }\n    if (Array.isArray(validatedConfig.clientLanguage)) {\n      let languageMatched = false;\n      for (const language of validatedConfig.clientLanguage) {\n        if (language === CLIENT_LANGUAGE_STRING) {\n          languageMatched = true;\n        }\n      }\n      if (!languageMatched) {\n        continue;\n      }\n    }\n    return validatedConfig.serviceConfig;\n  }\n  throw new Error('No matching service config found');\n}\n\n/**\n * Find the \"grpc_config\" record among the TXT records, parse its value as JSON, validate its contents,\n * and select a service config with selection fields that all match this client. Most of these steps\n * can fail with an error; the caller must handle any errors thrown this way.\n * @param txtRecord The TXT record array that is output from a successful call to dns.resolveTxt\n * @param percentage A number chosen from the range [0, 100) that is used to select which config to use\n * @return The service configuration to use, given the percentage value, or null if the service config\n *     data has a valid format but none of the options match the current client.\n */\nexport function extractAndSelectServiceConfig(\n  txtRecord: string[][],\n  percentage: number\n): ServiceConfig | null {\n  for (const record of txtRecord) {\n    if (record.length > 0 && record[0].startsWith('grpc_config=')) {\n      /* Treat the list of strings in this record as a single string and remove\n       * \"grpc_config=\" from the beginning. The rest should be a JSON string */\n      const recordString = record.join('').substring('grpc_config='.length);\n      const recordJson: any = JSON.parse(recordString);\n      return validateAndSelectCanaryConfig(recordJson, percentage);\n    }\n  }\n  return null;\n}\n", "/*\n * Copyright 2021 gRPC authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n */\n\nexport enum ConnectivityState {\n  IDLE,\n  CONNECTING,\n  READY,\n  TRANSIENT_FAILURE,\n  SHUTDOWN,\n}\n", "/*\n * Copyright 2019 gRPC authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n */\n\nimport { StatusObject } from './call-interface';\nimport { Metadata } from './metadata';\nimport { Status } from './constants';\nimport { LoadBalancer } from './load-balancer';\nimport { SubchannelInterface } from './subchannel-interface';\n\nexport enum PickResultType {\n  COMPLETE,\n  QUEUE,\n  TRANSIENT_FAILURE,\n  DROP,\n}\n\nexport type OnCallEnded = (statusCode: Status, details: string, metadata: Metadata) => void;\n\nexport interface PickResult {\n  pickResultType: PickResultType;\n  /**\n   * The subchannel to use as the transport for the call. Only meaningful if\n   * `pickResultType` is COMPLETE. If null, indicates that the call should be\n   * dropped.\n   */\n  subchannel: SubchannelInterface | null;\n  /**\n   * The status object to end the call with. Populated if and only if\n   * `pickResultType` is TRANSIENT_FAILURE.\n   */\n  status: StatusObject | null;\n  onCallStarted: (() => void) | null;\n  onCallEnded: OnCallEnded | null;\n}\n\nexport interface CompletePickResult extends PickResult {\n  pickResultType: PickResultType.COMPLETE;\n  subchannel: SubchannelInterface | null;\n  status: null;\n  onCallStarted: (() => void) | null;\n  onCallEnded: OnCallEnded | null;\n}\n\nexport interface QueuePickResult extends PickResult {\n  pickResultType: PickResultType.QUEUE;\n  subchannel: null;\n  status: null;\n  onCallStarted: null;\n  onCallEnded: null;\n}\n\nexport interface TransientFailurePickResult extends PickResult {\n  pickResultType: PickResultType.TRANSIENT_FAILURE;\n  subchannel: null;\n  status: StatusObject;\n  onCallStarted: null;\n  onCallEnded: null;\n}\n\nexport interface DropCallPickResult extends PickResult {\n  pickResultType: PickResultType.DROP;\n  subchannel: null;\n  status: StatusObject;\n  onCallStarted: null;\n  onCallEnded: null;\n}\n\nexport interface PickArgs {\n  metadata: Metadata;\n  extraPickInfo: { [key: string]: string };\n}\n\n/**\n * A proxy object representing the momentary state of a load balancer. Picks\n * subchannels or returns other information based on that state. Should be\n * replaced every time the load balancer changes state.\n */\nexport interface Picker {\n  pick(pickArgs: PickArgs): PickResult;\n}\n\n/**\n * A standard picker representing a load balancer in the TRANSIENT_FAILURE\n * state. Always responds to every pick request with an UNAVAILABLE status.\n */\nexport class UnavailablePicker implements Picker {\n  private status: StatusObject;\n  constructor(status?: Partial<StatusObject>) {\n    this.status = {\n      code: Status.UNAVAILABLE,\n      details: 'No connection established',\n      metadata: new Metadata(),\n      ...status,\n    };\n  }\n  pick(pickArgs: PickArgs): TransientFailurePickResult {\n    return {\n      pickResultType: PickResultType.TRANSIENT_FAILURE,\n      subchannel: null,\n      status: this.status,\n      onCallStarted: null,\n      onCallEnded: null,\n    };\n  }\n}\n\n/**\n * A standard picker representing a load balancer in the IDLE or CONNECTING\n * state. Always responds to every pick request with a QUEUE pick result\n * indicating that the pick should be tried again with the next `Picker`. Also\n * reports back to the load balancer that a connection should be established\n * once any pick is attempted.\n * If the childPicker is provided, delegate to it instead of returning the\n * hardcoded QUEUE pick result, but still calls exitIdle.\n */\nexport class QueuePicker {\n  private calledExitIdle = false;\n  // Constructed with a load balancer. Calls exitIdle on it the first time pick is called\n  constructor(\n    private loadBalancer: LoadBalancer,\n    private childPicker?: Picker\n  ) {}\n\n  pick(pickArgs: PickArgs): PickResult {\n    if (!this.calledExitIdle) {\n      process.nextTick(() => {\n        this.loadBalancer.exitIdle();\n      });\n      this.calledExitIdle = true;\n    }\n    if (this.childPicker) {\n      return this.childPicker.pick(pickArgs);\n    } else {\n      return {\n        pickResultType: PickResultType.QUEUE,\n        subchannel: null,\n        status: null,\n        onCallStarted: null,\n        onCallEnded: null,\n      };\n    }\n  }\n}\n", "/*\n * Copyright 2019 gRPC authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n */\n\nimport { LogVerbosity } from './constants';\nimport * as logging from './logging';\n\nconst TRACER_NAME = 'backoff';\n\nconst INITIAL_BACKOFF_MS = 1000;\nconst BACKOFF_MULTIPLIER = 1.6;\nconst MAX_BACKOFF_MS = 120000;\nconst BACKOFF_JITTER = 0.2;\n\n/**\n * Get a number uniformly at random in the range [min, max)\n * @param min\n * @param max\n */\nfunction uniformRandom(min: number, max: number) {\n  return Math.random() * (max - min) + min;\n}\n\nexport interface BackoffOptions {\n  initialDelay?: number;\n  multiplier?: number;\n  jitter?: number;\n  maxDelay?: number;\n}\n\nexport class BackoffTimeout {\n  /**\n   * The delay time at the start, and after each reset.\n   */\n  private readonly initialDelay: number = INITIAL_BACKOFF_MS;\n  /**\n   * The exponential backoff multiplier.\n   */\n  private readonly multiplier: number = BACKOFF_MULTIPLIER;\n  /**\n   * The maximum delay time\n   */\n  private readonly maxDelay: number = MAX_BACKOFF_MS;\n  /**\n   * The maximum fraction by which the delay time can randomly vary after\n   * applying the multiplier.\n   */\n  private readonly jitter: number = BACKOFF_JITTER;\n  /**\n   * The delay time for the next time the timer runs.\n   */\n  private nextDelay: number;\n  /**\n   * The handle of the underlying timer. If running is false, this value refers\n   * to an object representing a timer that has ended, but it can still be\n   * interacted with without error.\n   */\n  private timerId: NodeJS.Timeout;\n  /**\n   * Indicates whether the timer is currently running.\n   */\n  private running = false;\n  /**\n   * Indicates whether the timer should keep the Node process running if no\n   * other async operation is doing so.\n   */\n  private hasRef = true;\n  /**\n   * The time that the currently running timer was started. Only valid if\n   * running is true.\n   */\n  private startTime: Date = new Date();\n  /**\n   * The approximate time that the currently running timer will end. Only valid\n   * if running is true.\n   */\n  private endTime: Date = new Date();\n\n  private id: number;\n\n  private static nextId = 0;\n\n  constructor(private callback: () => void, options?: BackoffOptions) {\n    this.id = BackoffTimeout.getNextId();\n    if (options) {\n      if (options.initialDelay) {\n        this.initialDelay = options.initialDelay;\n      }\n      if (options.multiplier) {\n        this.multiplier = options.multiplier;\n      }\n      if (options.jitter) {\n        this.jitter = options.jitter;\n      }\n      if (options.maxDelay) {\n        this.maxDelay = options.maxDelay;\n      }\n    }\n    this.trace('constructed initialDelay=' + this.initialDelay + ' multiplier=' + this.multiplier + ' jitter=' + this.jitter + ' maxDelay=' + this.maxDelay);\n    this.nextDelay = this.initialDelay;\n    this.timerId = setTimeout(() => {}, 0);\n    clearTimeout(this.timerId);\n  }\n\n  private static getNextId() {\n    return this.nextId++;\n  }\n\n  private trace(text: string) {\n    logging.trace(LogVerbosity.DEBUG, TRACER_NAME, '{' + this.id + '} ' + text);\n  }\n\n  private runTimer(delay: number) {\n    this.trace('runTimer(delay=' + delay + ')');\n    this.endTime = this.startTime;\n    this.endTime.setMilliseconds(\n      this.endTime.getMilliseconds() + delay\n    );\n    clearTimeout(this.timerId);\n    this.timerId = setTimeout(() => {\n      this.trace('timer fired');\n      this.running = false;\n      this.callback();\n    }, delay);\n    if (!this.hasRef) {\n      this.timerId.unref?.();\n    }\n  }\n\n  /**\n   * Call the callback after the current amount of delay time\n   */\n  runOnce() {\n    this.trace('runOnce()');\n    this.running = true;\n    this.startTime = new Date();\n    this.runTimer(this.nextDelay);\n    const nextBackoff = Math.min(\n      this.nextDelay * this.multiplier,\n      this.maxDelay\n    );\n    const jitterMagnitude = nextBackoff * this.jitter;\n    this.nextDelay =\n      nextBackoff + uniformRandom(-jitterMagnitude, jitterMagnitude);\n  }\n\n  /**\n   * Stop the timer. The callback will not be called until `runOnce` is called\n   * again.\n   */\n  stop() {\n    this.trace('stop()');\n    clearTimeout(this.timerId);\n    this.running = false;\n  }\n\n  /**\n   * Reset the delay time to its initial value. If the timer is still running,\n   * retroactively apply that reset to the current timer.\n   */\n  reset() {\n    this.trace('reset() running=' + this.running);\n    this.nextDelay = this.initialDelay;\n    if (this.running) {\n      const now = new Date();\n      const newEndTime = this.startTime;\n      newEndTime.setMilliseconds(newEndTime.getMilliseconds() + this.nextDelay);\n      clearTimeout(this.timerId);\n      if (now < newEndTime) {\n        this.runTimer(newEndTime.getTime() - now.getTime());\n      } else {\n        this.running = false;\n      }\n    }\n  }\n\n  /**\n   * Check whether the timer is currently running.\n   */\n  isRunning() {\n    return this.running;\n  }\n\n  /**\n   * Set that while the timer is running, it should keep the Node process\n   * running.\n   */\n  ref() {\n    this.hasRef = true;\n    this.timerId.ref?.();\n  }\n\n  /**\n   * Set that while the timer is running, it should not keep the Node process\n   * running.\n   */\n  unref() {\n    this.hasRef = false;\n    this.timerId.unref?.();\n  }\n\n  /**\n   * Get the approximate timestamp of when the timer will fire. Only valid if\n   * this.isRunning() is true.\n   */\n  getEndTime() {\n    return this.endTime;\n  }\n}\n", "/*\n * Copyright 2020 gRPC authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n */\n\nimport {\n  LoadBalancer,\n  ChannelControlHelper,\n  TypedLoadBalancingConfig,\n  createLoadBalancer,\n} from './load-balancer';\nimport { Endpoint, SubchannelAddress } from './subchannel-address';\nimport { ChannelOptions } from './channel-options';\nimport { ConnectivityState } from './connectivity-state';\nimport { Picker } from './picker';\nimport type { ChannelRef, SubchannelRef } from './channelz';\nimport { SubchannelInterface } from './subchannel-interface';\nimport { StatusOr } from './call-interface';\n\nconst TYPE_NAME = 'child_load_balancer_helper';\n\nexport class ChildLoadBalancerHandler {\n  private currentChild: LoadBalancer | null = null;\n  private pendingChild: LoadBalancer | null = null;\n  private latestConfig: TypedLoadBalancingConfig | null = null;\n\n  private ChildPolicyHelper = class {\n    private child: LoadBalancer | null = null;\n    constructor(private parent: ChildLoadBalancerHandler) {}\n    createSubchannel(\n      subchannelAddress: SubchannelAddress,\n      subchannelArgs: ChannelOptions\n    ): SubchannelInterface {\n      return this.parent.channelControlHelper.createSubchannel(\n        subchannelAddress,\n        subchannelArgs\n      );\n    }\n    updateState(connectivityState: ConnectivityState, picker: Picker, errorMessage: string | null): void {\n      if (this.calledByPendingChild()) {\n        if (connectivityState === ConnectivityState.CONNECTING) {\n          return;\n        }\n        this.parent.currentChild?.destroy();\n        this.parent.currentChild = this.parent.pendingChild;\n        this.parent.pendingChild = null;\n      } else if (!this.calledByCurrentChild()) {\n        return;\n      }\n      this.parent.channelControlHelper.updateState(connectivityState, picker, errorMessage);\n    }\n    requestReresolution(): void {\n      const latestChild = this.parent.pendingChild ?? this.parent.currentChild;\n      if (this.child === latestChild) {\n        this.parent.channelControlHelper.requestReresolution();\n      }\n    }\n    setChild(newChild: LoadBalancer) {\n      this.child = newChild;\n    }\n    addChannelzChild(child: ChannelRef | SubchannelRef) {\n      this.parent.channelControlHelper.addChannelzChild(child);\n    }\n    removeChannelzChild(child: ChannelRef | SubchannelRef) {\n      this.parent.channelControlHelper.removeChannelzChild(child);\n    }\n\n    private calledByPendingChild(): boolean {\n      return this.child === this.parent.pendingChild;\n    }\n    private calledByCurrentChild(): boolean {\n      return this.child === this.parent.currentChild;\n    }\n  };\n\n  constructor(\n    private readonly channelControlHelper: ChannelControlHelper\n  ) {}\n\n  protected configUpdateRequiresNewPolicyInstance(\n    oldConfig: TypedLoadBalancingConfig,\n    newConfig: TypedLoadBalancingConfig\n  ): boolean {\n    return oldConfig.getLoadBalancerName() !== newConfig.getLoadBalancerName();\n  }\n\n  /**\n   * Prerequisites: lbConfig !== null and lbConfig.name is registered\n   * @param endpointList\n   * @param lbConfig\n   * @param attributes\n   */\n  updateAddressList(\n    endpointList: StatusOr<Endpoint[]>,\n    lbConfig: TypedLoadBalancingConfig,\n    options: ChannelOptions,\n    resolutionNote: string\n  ): boolean {\n    let childToUpdate: LoadBalancer;\n    if (\n      this.currentChild === null ||\n      this.latestConfig === null ||\n      this.configUpdateRequiresNewPolicyInstance(this.latestConfig, lbConfig)\n    ) {\n      const newHelper = new this.ChildPolicyHelper(this);\n      const newChild = createLoadBalancer(lbConfig, newHelper)!;\n      newHelper.setChild(newChild);\n      if (this.currentChild === null) {\n        this.currentChild = newChild;\n        childToUpdate = this.currentChild;\n      } else {\n        if (this.pendingChild) {\n          this.pendingChild.destroy();\n        }\n        this.pendingChild = newChild;\n        childToUpdate = this.pendingChild;\n      }\n    } else {\n      if (this.pendingChild === null) {\n        childToUpdate = this.currentChild;\n      } else {\n        childToUpdate = this.pendingChild;\n      }\n    }\n    this.latestConfig = lbConfig;\n    return childToUpdate.updateAddressList(endpointList, lbConfig, options, resolutionNote);\n  }\n  exitIdle(): void {\n    if (this.currentChild) {\n      this.currentChild.exitIdle();\n      if (this.pendingChild) {\n        this.pendingChild.exitIdle();\n      }\n    }\n  }\n  resetBackoff(): void {\n    if (this.currentChild) {\n      this.currentChild.resetBackoff();\n      if (this.pendingChild) {\n        this.pendingChild.resetBackoff();\n      }\n    }\n  }\n  destroy(): void {\n    /* Note: state updates are only propagated from the child balancer if that\n     * object is equal to this.currentChild or this.pendingChild. Since this\n     * function sets both of those to null, no further state updates will\n     * occur after this function returns. */\n    if (this.currentChild) {\n      this.currentChild.destroy();\n      this.currentChild = null;\n    }\n    if (this.pendingChild) {\n      this.pendingChild.destroy();\n      this.pendingChild = null;\n    }\n  }\n  getTypeName(): string {\n    return TYPE_NAME;\n  }\n}\n", "/*\n * Copyright 2019 gRPC authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n */\n\nimport {\n  ChannelControlHelper,\n  LoadBalancer,\n  TypedLoadBalancingConfig,\n  selectLbConfigFromList,\n} from './load-balancer';\nimport {\n  MethodConfig,\n  ServiceConfig,\n  validateServiceConfig,\n} from './service-config';\nimport { ConnectivityState } from './connectivity-state';\nimport { CHANNEL_ARGS_CONFIG_SELECTOR_KEY, ConfigSelector, createResolver, Resolver } from './resolver';\nimport { Picker, UnavailablePicker, QueuePicker } from './picker';\nimport { BackoffOptions, BackoffTimeout } from './backoff-timeout';\nimport { Status } from './constants';\nimport { StatusObject, StatusOr } from './call-interface';\nimport { Metadata } from './metadata';\nimport * as logging from './logging';\nimport { LogVerbosity } from './constants';\nimport { Endpoint } from './subchannel-address';\nimport { GrpcUri, uriToString } from './uri-parser';\nimport { ChildLoadBalancerHandler } from './load-balancer-child-handler';\nimport { ChannelOptions } from './channel-options';\n\nconst TRACER_NAME = 'resolving_load_balancer';\n\nfunction trace(text: string): void {\n  logging.trace(LogVerbosity.DEBUG, TRACER_NAME, text);\n}\n\ntype NameMatchLevel = 'EMPTY' | 'SERVICE' | 'SERVICE_AND_METHOD';\n\n/**\n * Name match levels in order from most to least specific. This is the order in\n * which searches will be performed.\n */\nconst NAME_MATCH_LEVEL_ORDER: NameMatchLevel[] = [\n  'SERVICE_AND_METHOD',\n  'SERVICE',\n  'EMPTY',\n];\n\nfunction hasMatchingName(\n  service: string,\n  method: string,\n  methodConfig: MethodConfig,\n  matchLevel: NameMatchLevel\n): boolean {\n  for (const name of methodConfig.name) {\n    switch (matchLevel) {\n      case 'EMPTY':\n        if (!name.service && !name.method) {\n          return true;\n        }\n        break;\n      case 'SERVICE':\n        if (name.service === service && !name.method) {\n          return true;\n        }\n        break;\n      case 'SERVICE_AND_METHOD':\n        if (name.service === service && name.method === method) {\n          return true;\n        }\n    }\n  }\n  return false;\n}\n\nfunction findMatchingConfig(\n  service: string,\n  method: string,\n  methodConfigs: MethodConfig[],\n  matchLevel: NameMatchLevel\n): MethodConfig | null {\n  for (const config of methodConfigs) {\n    if (hasMatchingName(service, method, config, matchLevel)) {\n      return config;\n    }\n  }\n  return null;\n}\n\nfunction getDefaultConfigSelector(\n  serviceConfig: ServiceConfig | null\n): ConfigSelector {\n  return {\n      invoke(\n      methodName: string,\n      metadata: Metadata\n    ) {\n      const splitName = methodName.split('/').filter(x => x.length > 0);\n      const service = splitName[0] ?? '';\n      const method = splitName[1] ?? '';\n      if (serviceConfig && serviceConfig.methodConfig) {\n        /* Check for the following in order, and return the first method\n        * config that matches:\n        * 1. A name that exactly matches the service and method\n        * 2. A name with no method set that matches the service\n        * 3. An empty name\n        */\n        for (const matchLevel of NAME_MATCH_LEVEL_ORDER) {\n          const matchingConfig = findMatchingConfig(\n            service,\n            method,\n            serviceConfig.methodConfig,\n            matchLevel\n          );\n          if (matchingConfig) {\n            return {\n              methodConfig: matchingConfig,\n              pickInformation: {},\n              status: Status.OK,\n              dynamicFilterFactories: [],\n            };\n          }\n        }\n      }\n      return {\n        methodConfig: { name: [] },\n        pickInformation: {},\n        status: Status.OK,\n        dynamicFilterFactories: [],\n      };\n    },\n    unref() {}\n  };\n}\n\nexport interface ResolutionCallback {\n  (serviceConfig: ServiceConfig, configSelector: ConfigSelector): void;\n}\n\nexport interface ResolutionFailureCallback {\n  (status: StatusObject): void;\n}\n\nexport class ResolvingLoadBalancer implements LoadBalancer {\n  /**\n   * The resolver class constructed for the target address.\n   */\n  private readonly innerResolver: Resolver;\n\n  private readonly childLoadBalancer: ChildLoadBalancerHandler;\n  private latestChildState: ConnectivityState = ConnectivityState.IDLE;\n  private latestChildPicker: Picker = new QueuePicker(this);\n  private latestChildErrorMessage: string | null = null;\n  /**\n   * This resolving load balancer's current connectivity state.\n   */\n  private currentState: ConnectivityState = ConnectivityState.IDLE;\n  private readonly defaultServiceConfig: ServiceConfig;\n  /**\n   * The service config object from the last successful resolution, if\n   * available. A value of null indicates that we have not yet received a valid\n   * service config from the resolver.\n   */\n  private previousServiceConfig: ServiceConfig | null = null;\n\n  /**\n   * The backoff timer for handling name resolution failures.\n   */\n  private readonly backoffTimeout: BackoffTimeout;\n\n  /**\n   * Indicates whether we should attempt to resolve again after the backoff\n   * timer runs out.\n   */\n  private continueResolving = false;\n\n  /**\n   * Wrapper class that behaves like a `LoadBalancer` and also handles name\n   * resolution internally.\n   * @param target The address of the backend to connect to.\n   * @param channelControlHelper `ChannelControlHelper` instance provided by\n   *     this load balancer's owner.\n   * @param defaultServiceConfig The default service configuration to be used\n   *     if none is provided by the name resolver. A `null` value indicates\n   *     that the default behavior should be the default unconfigured behavior.\n   *     In practice, that means using the \"pick first\" load balancer\n   *     implmentation\n   */\n  constructor(\n    private readonly target: GrpcUri,\n    private readonly channelControlHelper: ChannelControlHelper,\n    private readonly channelOptions: ChannelOptions,\n    private readonly onSuccessfulResolution: ResolutionCallback,\n    private readonly onFailedResolution: ResolutionFailureCallback\n  ) {\n    if (channelOptions['grpc.service_config']) {\n      this.defaultServiceConfig = validateServiceConfig(\n        JSON.parse(channelOptions['grpc.service_config']!)\n      );\n    } else {\n      this.defaultServiceConfig = {\n        loadBalancingConfig: [],\n        methodConfig: [],\n      };\n    }\n\n    this.updateState(ConnectivityState.IDLE, new QueuePicker(this), null);\n    this.childLoadBalancer = new ChildLoadBalancerHandler(\n      {\n        createSubchannel:\n          channelControlHelper.createSubchannel.bind(channelControlHelper),\n        requestReresolution: () => {\n          /* If the backoffTimeout is running, we're still backing off from\n           * making resolve requests, so we shouldn't make another one here.\n           * In that case, the backoff timer callback will call\n           * updateResolution */\n          if (this.backoffTimeout.isRunning()) {\n            trace(\n              'requestReresolution delayed by backoff timer until ' +\n                this.backoffTimeout.getEndTime().toISOString()\n            );\n            this.continueResolving = true;\n          } else {\n            this.updateResolution();\n          }\n        },\n        updateState: (newState: ConnectivityState, picker: Picker, errorMessage: string | null) => {\n          this.latestChildState = newState;\n          this.latestChildPicker = picker;\n          this.latestChildErrorMessage = errorMessage;\n          this.updateState(newState, picker, errorMessage);\n        },\n        addChannelzChild:\n          channelControlHelper.addChannelzChild.bind(channelControlHelper),\n        removeChannelzChild:\n          channelControlHelper.removeChannelzChild.bind(channelControlHelper),\n      }\n    );\n    this.innerResolver = createResolver(\n      target,\n      this.handleResolverResult.bind(this),\n      channelOptions\n    );\n    const backoffOptions: BackoffOptions = {\n      initialDelay: channelOptions['grpc.initial_reconnect_backoff_ms'],\n      maxDelay: channelOptions['grpc.max_reconnect_backoff_ms'],\n    };\n    this.backoffTimeout = new BackoffTimeout(() => {\n      if (this.continueResolving) {\n        this.updateResolution();\n        this.continueResolving = false;\n      } else {\n        this.updateState(this.latestChildState, this.latestChildPicker, this.latestChildErrorMessage);\n      }\n    }, backoffOptions);\n    this.backoffTimeout.unref();\n  }\n\n  private handleResolverResult(\n    endpointList: StatusOr<Endpoint[]>,\n    attributes: { [key: string]: unknown },\n    serviceConfig: StatusOr<ServiceConfig> | null,\n    resolutionNote: string\n  ): boolean {\n    this.backoffTimeout.stop();\n    this.backoffTimeout.reset();\n    let resultAccepted = true;\n    let workingServiceConfig: ServiceConfig | null = null;\n    if (serviceConfig === null) {\n      workingServiceConfig = this.defaultServiceConfig;\n    } else if (serviceConfig.ok) {\n      workingServiceConfig = serviceConfig.value;\n    } else {\n      if (this.previousServiceConfig !== null) {\n        workingServiceConfig = this.previousServiceConfig;\n      } else {\n        resultAccepted = false;\n        this.handleResolutionFailure(serviceConfig.error);\n      }\n    }\n\n    if (workingServiceConfig !== null) {\n      const workingConfigList =\n        workingServiceConfig?.loadBalancingConfig ?? [];\n      const loadBalancingConfig = selectLbConfigFromList(\n        workingConfigList,\n        true\n      );\n      if (loadBalancingConfig === null) {\n        resultAccepted = false;\n        this.handleResolutionFailure({\n          code: Status.UNAVAILABLE,\n          details:\n            'All load balancer options in service config are not compatible',\n          metadata: new Metadata(),\n        });\n      } else {\n        resultAccepted = this.childLoadBalancer.updateAddressList(\n          endpointList,\n          loadBalancingConfig,\n          {...this.channelOptions, ...attributes},\n          resolutionNote\n        );\n      }\n    }\n    if (resultAccepted) {\n      this.onSuccessfulResolution(\n        workingServiceConfig!,\n        attributes[CHANNEL_ARGS_CONFIG_SELECTOR_KEY] as ConfigSelector ?? getDefaultConfigSelector(workingServiceConfig!)\n      );\n    }\n    return resultAccepted;\n  }\n\n  private updateResolution() {\n    this.innerResolver.updateResolution();\n    if (this.currentState === ConnectivityState.IDLE) {\n      /* this.latestChildPicker is initialized as new QueuePicker(this), which\n       * is an appropriate value here if the child LB policy is unset.\n       * Otherwise, we want to delegate to the child here, in case that\n       * triggers something. */\n      this.updateState(ConnectivityState.CONNECTING, this.latestChildPicker, this.latestChildErrorMessage);\n    }\n    this.backoffTimeout.runOnce();\n  }\n\n  private updateState(connectivityState: ConnectivityState, picker: Picker, errorMessage: string | null) {\n    trace(\n      uriToString(this.target) +\n        ' ' +\n        ConnectivityState[this.currentState] +\n        ' -> ' +\n        ConnectivityState[connectivityState]\n    );\n    // Ensure that this.exitIdle() is called by the picker\n    if (connectivityState === ConnectivityState.IDLE) {\n      picker = new QueuePicker(this, picker);\n    }\n    this.currentState = connectivityState;\n    this.channelControlHelper.updateState(connectivityState, picker, errorMessage);\n  }\n\n  private handleResolutionFailure(error: StatusObject) {\n    if (this.latestChildState === ConnectivityState.IDLE) {\n      this.updateState(\n        ConnectivityState.TRANSIENT_FAILURE,\n        new UnavailablePicker(error),\n        error.details\n      );\n      this.onFailedResolution(error);\n    }\n  }\n\n  exitIdle() {\n    if (\n      this.currentState === ConnectivityState.IDLE ||\n      this.currentState === ConnectivityState.TRANSIENT_FAILURE\n    ) {\n      if (this.backoffTimeout.isRunning()) {\n        this.continueResolving = true;\n      } else {\n        this.updateResolution();\n      }\n    }\n    this.childLoadBalancer.exitIdle();\n  }\n\n  updateAddressList(\n    endpointList: StatusOr<Endpoint[]>,\n    lbConfig: TypedLoadBalancingConfig | null\n  ): never {\n    throw new Error('updateAddressList not supported on ResolvingLoadBalancer');\n  }\n\n  resetBackoff() {\n    this.backoffTimeout.reset();\n    this.childLoadBalancer.resetBackoff();\n  }\n\n  destroy() {\n    this.childLoadBalancer.destroy();\n    this.innerResolver.destroy();\n    this.backoffTimeout.reset();\n    this.backoffTimeout.stop();\n    this.latestChildState = ConnectivityState.IDLE;\n    this.latestChildPicker = new QueuePicker(this);\n    this.currentState = ConnectivityState.IDLE;\n    this.previousServiceConfig = null;\n    this.continueResolving = false;\n  }\n\n  getTypeName() {\n    return 'resolving_load_balancer';\n  }\n}\n", "/*\n * Copyright 2019 gRPC authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n */\n\nimport { CompressionAlgorithms } from './compression-algorithms';\n\n/**\n * An interface that contains options used when initializing a Channel instance.\n */\nexport interface ChannelOptions {\n  'grpc.ssl_target_name_override'?: string;\n  'grpc.primary_user_agent'?: string;\n  'grpc.secondary_user_agent'?: string;\n  'grpc.default_authority'?: string;\n  'grpc.keepalive_time_ms'?: number;\n  'grpc.keepalive_timeout_ms'?: number;\n  'grpc.keepalive_permit_without_calls'?: number;\n  'grpc.service_config'?: string;\n  'grpc.max_concurrent_streams'?: number;\n  'grpc.initial_reconnect_backoff_ms'?: number;\n  'grpc.max_reconnect_backoff_ms'?: number;\n  'grpc.use_local_subchannel_pool'?: number;\n  'grpc.max_send_message_length'?: number;\n  'grpc.max_receive_message_length'?: number;\n  'grpc.enable_http_proxy'?: number;\n  /* http_connect_target and http_connect_creds are used for passing data\n   * around internally, and should not be documented as public-facing options\n   */\n  'grpc.http_connect_target'?: string;\n  'grpc.http_connect_creds'?: string;\n  'grpc.default_compression_algorithm'?: CompressionAlgorithms;\n  'grpc.enable_channelz'?: number;\n  'grpc.dns_min_time_between_resolutions_ms'?: number;\n  'grpc.enable_retries'?: number;\n  'grpc.per_rpc_retry_buffer_size'?: number;\n  /* This option is pattered like a core option, but the core does not have\n   * this option. It is closely related to the option\n   * grpc.per_rpc_retry_buffer_size, which is in the core. The core will likely\n   * implement this functionality using the ResourceQuota mechanism, so there\n   * will probably not be any collision or other inconsistency. */\n  'grpc.retry_buffer_size'?: number;\n  'grpc.max_connection_age_ms'?: number;\n  'grpc.max_connection_age_grace_ms'?: number;\n  'grpc.max_connection_idle_ms'?: number;\n  'grpc-node.max_session_memory'?: number;\n  'grpc.service_config_disable_resolution'?: number;\n  'grpc.client_idle_timeout_ms'?: number;\n  /**\n   * Set the enableTrace option in TLS clients and servers\n   */\n  'grpc-node.tls_enable_trace'?: number;\n  'grpc.lb.ring_hash.ring_size_cap'?: number;\n  'grpc-node.retry_max_attempts_limit'?: number;\n  'grpc-node.flow_control_window'?: number;\n  'grpc.server_call_metric_recording'?: number;\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  [key: string]: any;\n}\n\n/**\n * This is for checking provided options at runtime. This is an object for\n * easier membership checking.\n */\nexport const recognizedOptions = {\n  'grpc.ssl_target_name_override': true,\n  'grpc.primary_user_agent': true,\n  'grpc.secondary_user_agent': true,\n  'grpc.default_authority': true,\n  'grpc.keepalive_time_ms': true,\n  'grpc.keepalive_timeout_ms': true,\n  'grpc.keepalive_permit_without_calls': true,\n  'grpc.service_config': true,\n  'grpc.max_concurrent_streams': true,\n  'grpc.initial_reconnect_backoff_ms': true,\n  'grpc.max_reconnect_backoff_ms': true,\n  'grpc.use_local_subchannel_pool': true,\n  'grpc.max_send_message_length': true,\n  'grpc.max_receive_message_length': true,\n  'grpc.enable_http_proxy': true,\n  'grpc.enable_channelz': true,\n  'grpc.dns_min_time_between_resolutions_ms': true,\n  'grpc.enable_retries': true,\n  'grpc.per_rpc_retry_buffer_size': true,\n  'grpc.retry_buffer_size': true,\n  'grpc.max_connection_age_ms': true,\n  'grpc.max_connection_age_grace_ms': true,\n  'grpc-node.max_session_memory': true,\n  'grpc.service_config_disable_resolution': true,\n  'grpc.client_idle_timeout_ms': true,\n  'grpc-node.tls_enable_trace': true,\n  'grpc.lb.ring_hash.ring_size_cap': true,\n  'grpc-node.retry_max_attempts_limit': true,\n  'grpc-node.flow_control_window': true,\n  'grpc.server_call_metric_recording': true\n};\n\nexport function channelOptionsEqual(\n  options1: ChannelOptions,\n  options2: ChannelOptions\n) {\n  const keys1 = Object.keys(options1).sort();\n  const keys2 = Object.keys(options2).sort();\n  if (keys1.length !== keys2.length) {\n    return false;\n  }\n  for (let i = 0; i < keys1.length; i += 1) {\n    if (keys1[i] !== keys2[i]) {\n      return false;\n    }\n    if (options1[keys1[i]] !== options2[keys2[i]]) {\n      return false;\n    }\n  }\n  return true;\n}\n", "/*\n * Copyright 2021 gRPC authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n */\n\nimport { isIP, isIPv6 } from 'net';\n\nexport interface TcpSubchannelAddress {\n  port: number;\n  host: string;\n}\n\nexport interface IpcSubchannelAddress {\n  path: string;\n}\n/**\n * This represents a single backend address to connect to. This interface is a\n * subset of net.SocketConnectOpts, i.e. the options described at\n * https://nodejs.org/api/net.html#net_socket_connect_options_connectlistener.\n * Those are in turn a subset of the options that can be passed to http2.connect.\n */\n\nexport type SubchannelAddress = TcpSubchannelAddress | IpcSubchannelAddress;\n\nexport function isTcpSubchannelAddress(\n  address: SubchannelAddress\n): address is TcpSubchannelAddress {\n  return 'port' in address;\n}\n\nexport function subchannelAddressEqual(\n  address1?: SubchannelAddress,\n  address2?: SubchannelAddress\n): boolean {\n  if (!address1 && !address2) {\n    return true;\n  }\n  if (!address1 || !address2) {\n    return false;\n  }\n  if (isTcpSubchannelAddress(address1)) {\n    return (\n      isTcpSubchannelAddress(address2) &&\n      address1.host === address2.host &&\n      address1.port === address2.port\n    );\n  } else {\n    return !isTcpSubchannelAddress(address2) && address1.path === address2.path;\n  }\n}\n\nexport function subchannelAddressToString(address: SubchannelAddress): string {\n  if (isTcpSubchannelAddress(address)) {\n    if (isIPv6(address.host)) {\n      return '[' + address.host + ']:' + address.port;\n    } else {\n      return address.host + ':' + address.port;\n    }\n  } else {\n    return address.path;\n  }\n}\n\nconst DEFAULT_PORT = 443;\n\nexport function stringToSubchannelAddress(\n  addressString: string,\n  port?: number\n): SubchannelAddress {\n  if (isIP(addressString)) {\n    return {\n      host: addressString,\n      port: port ?? DEFAULT_PORT,\n    };\n  } else {\n    return {\n      path: addressString,\n    };\n  }\n}\n\nexport interface Endpoint {\n  addresses: SubchannelAddress[];\n}\n\nexport function endpointEqual(endpoint1: Endpoint, endpoint2: Endpoint) {\n  if (endpoint1.addresses.length !== endpoint2.addresses.length) {\n    return false;\n  }\n  for (let i = 0; i < endpoint1.addresses.length; i++) {\n    if (\n      !subchannelAddressEqual(endpoint1.addresses[i], endpoint2.addresses[i])\n    ) {\n      return false;\n    }\n  }\n  return true;\n}\n\nexport function endpointToString(endpoint: Endpoint): string {\n  return (\n    '[' + endpoint.addresses.map(subchannelAddressToString).join(', ') + ']'\n  );\n}\n\nexport function endpointHasAddress(\n  endpoint: Endpoint,\n  expectedAddress: SubchannelAddress\n): boolean {\n  for (const address of endpoint.addresses) {\n    if (subchannelAddressEqual(address, expectedAddress)) {\n      return true;\n    }\n  }\n  return false;\n}\n\ninterface EndpointMapEntry<ValueType> {\n  key: Endpoint;\n  value: ValueType;\n}\n\nfunction endpointEqualUnordered(\n  endpoint1: Endpoint,\n  endpoint2: Endpoint\n): boolean {\n  if (endpoint1.addresses.length !== endpoint2.addresses.length) {\n    return false;\n  }\n  for (const address1 of endpoint1.addresses) {\n    let matchFound = false;\n    for (const address2 of endpoint2.addresses) {\n      if (subchannelAddressEqual(address1, address2)) {\n        matchFound = true;\n        break;\n      }\n    }\n    if (!matchFound) {\n      return false;\n    }\n  }\n  return true;\n}\n\nexport class EndpointMap<ValueType> {\n  private map: Set<EndpointMapEntry<ValueType>> = new Set();\n\n  get size() {\n    return this.map.size;\n  }\n\n  getForSubchannelAddress(address: SubchannelAddress): ValueType | undefined {\n    for (const entry of this.map) {\n      if (endpointHasAddress(entry.key, address)) {\n        return entry.value;\n      }\n    }\n    return undefined;\n  }\n\n  /**\n   * Delete any entries in this map with keys that are not in endpoints\n   * @param endpoints\n   */\n  deleteMissing(endpoints: Endpoint[]): ValueType[] {\n    const removedValues: ValueType[] = [];\n    for (const entry of this.map) {\n      let foundEntry = false;\n      for (const endpoint of endpoints) {\n        if (endpointEqualUnordered(endpoint, entry.key)) {\n          foundEntry = true;\n        }\n      }\n      if (!foundEntry) {\n        removedValues.push(entry.value);\n        this.map.delete(entry);\n      }\n    }\n    return removedValues;\n  }\n\n  get(endpoint: Endpoint): ValueType | undefined {\n    for (const entry of this.map) {\n      if (endpointEqualUnordered(endpoint, entry.key)) {\n        return entry.value;\n      }\n    }\n    return undefined;\n  }\n\n  set(endpoint: Endpoint, mapEntry: ValueType) {\n    for (const entry of this.map) {\n      if (endpointEqualUnordered(endpoint, entry.key)) {\n        entry.value = mapEntry;\n        return;\n      }\n    }\n    this.map.add({ key: endpoint, value: mapEntry });\n  }\n\n  delete(endpoint: Endpoint) {\n    for (const entry of this.map) {\n      if (endpointEqualUnordered(endpoint, entry.key)) {\n        this.map.delete(entry);\n        return;\n      }\n    }\n  }\n\n  has(endpoint: Endpoint): boolean {\n    for (const entry of this.map) {\n      if (endpointEqualUnordered(endpoint, entry.key)) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  clear() {\n    this.map.clear();\n  }\n\n  *keys(): IterableIterator<Endpoint> {\n    for (const entry of this.map) {\n      yield entry.key;\n    }\n  }\n\n  *values(): IterableIterator<ValueType> {\n    for (const entry of this.map) {\n      yield entry.value;\n    }\n  }\n\n  *entries(): IterableIterator<[Endpoint, ValueType]> {\n    for (const entry of this.map) {\n      yield [entry.key, entry.value];\n    }\n  }\n}\n", "'use strict';\n\nObject.defineProperty(exports, '__esModule', { value: true });\n\nclass TreeNode {\n  constructor(key, value, color = 1 /* TreeNodeColor.RED */) {\n    this._left = undefined;\n    this._right = undefined;\n    this._parent = undefined;\n    this._key = key;\n    this._value = value;\n    this._color = color;\n  }\n  /**\n   * @description Get the pre node.\n   * @returns TreeNode about the pre node.\n   */\n  _pre() {\n    let preNode = this;\n    const isRootOrHeader = preNode._parent._parent === preNode;\n    if (isRootOrHeader && preNode._color === 1 /* TreeNodeColor.RED */) {\n      preNode = preNode._right;\n    } else if (preNode._left) {\n      preNode = preNode._left;\n      while (preNode._right) {\n        preNode = preNode._right;\n      }\n    } else {\n      // Must be root and left is null\n      if (isRootOrHeader) {\n        return preNode._parent;\n      }\n      let pre = preNode._parent;\n      while (pre._left === preNode) {\n        preNode = pre;\n        pre = preNode._parent;\n      }\n      preNode = pre;\n    }\n    return preNode;\n  }\n  /**\n   * @description Get the next node.\n   * @returns TreeNode about the next node.\n   */\n  _next() {\n    let nextNode = this;\n    if (nextNode._right) {\n      nextNode = nextNode._right;\n      while (nextNode._left) {\n        nextNode = nextNode._left;\n      }\n      return nextNode;\n    } else {\n      let pre = nextNode._parent;\n      while (pre._right === nextNode) {\n        nextNode = pre;\n        pre = nextNode._parent;\n      }\n      if (nextNode._right !== pre) {\n        return pre;\n      } else return nextNode;\n    }\n  }\n  /**\n   * @description Rotate left.\n   * @returns TreeNode about moved to original position after rotation.\n   */\n  _rotateLeft() {\n    const PP = this._parent;\n    const V = this._right;\n    const R = V._left;\n    if (PP._parent === this) PP._parent = V;else if (PP._left === this) PP._left = V;else PP._right = V;\n    V._parent = PP;\n    V._left = this;\n    this._parent = V;\n    this._right = R;\n    if (R) R._parent = this;\n    return V;\n  }\n  /**\n   * @description Rotate right.\n   * @returns TreeNode about moved to original position after rotation.\n   */\n  _rotateRight() {\n    const PP = this._parent;\n    const F = this._left;\n    const K = F._right;\n    if (PP._parent === this) PP._parent = F;else if (PP._left === this) PP._left = F;else PP._right = F;\n    F._parent = PP;\n    F._right = this;\n    this._parent = F;\n    this._left = K;\n    if (K) K._parent = this;\n    return F;\n  }\n}\nclass TreeNodeEnableIndex extends TreeNode {\n  constructor() {\n    super(...arguments);\n    this._subTreeSize = 1;\n  }\n  /**\n   * @description Rotate left and do recount.\n   * @returns TreeNode about moved to original position after rotation.\n   */\n  _rotateLeft() {\n    const parent = super._rotateLeft();\n    this._recount();\n    parent._recount();\n    return parent;\n  }\n  /**\n   * @description Rotate right and do recount.\n   * @returns TreeNode about moved to original position after rotation.\n   */\n  _rotateRight() {\n    const parent = super._rotateRight();\n    this._recount();\n    parent._recount();\n    return parent;\n  }\n  _recount() {\n    this._subTreeSize = 1;\n    if (this._left) {\n      this._subTreeSize += this._left._subTreeSize;\n    }\n    if (this._right) {\n      this._subTreeSize += this._right._subTreeSize;\n    }\n  }\n}\n\nclass ContainerIterator {\n  /**\n   * @internal\n   */\n  constructor(iteratorType = 0 /* IteratorType.NORMAL */) {\n    this.iteratorType = iteratorType;\n  }\n  /**\n   * @param iter - The other iterator you want to compare.\n   * @returns Whether this equals to obj.\n   * @example\n   * container.find(1).equals(container.end());\n   */\n  equals(iter) {\n    return this._node === iter._node;\n  }\n}\nclass Base {\n  constructor() {\n    /**\n     * @description Container's size.\n     * @internal\n     */\n    this._length = 0;\n  }\n  /**\n   * @returns The size of the container.\n   * @example\n   * const container = new Vector([1, 2]);\n   * console.log(container.length); // 2\n   */\n  get length() {\n    return this._length;\n  }\n  /**\n   * @returns The size of the container.\n   * @example\n   * const container = new Vector([1, 2]);\n   * console.log(container.size()); // 2\n   */\n  size() {\n    return this._length;\n  }\n  /**\n   * @returns Whether the container is empty.\n   * @example\n   * container.clear();\n   * console.log(container.empty());  // true\n   */\n  empty() {\n    return this._length === 0;\n  }\n}\nclass Container extends Base {}\n\n/**\n * @description Throw an iterator access error.\n * @internal\n */\nfunction throwIteratorAccessError() {\n  throw new RangeError('Iterator access denied!');\n}\n\nclass TreeContainer extends Container {\n  /**\n   * @internal\n   */\n  constructor(cmp = function (x, y) {\n    if (x < y) return -1;\n    if (x > y) return 1;\n    return 0;\n  }, enableIndex = false) {\n    super();\n    /**\n     * @internal\n     */\n    this._root = undefined;\n    this._cmp = cmp;\n    this.enableIndex = enableIndex;\n    this._TreeNodeClass = enableIndex ? TreeNodeEnableIndex : TreeNode;\n    this._header = new this._TreeNodeClass();\n  }\n  /**\n   * @internal\n   */\n  _lowerBound(curNode, key) {\n    let resNode = this._header;\n    while (curNode) {\n      const cmpResult = this._cmp(curNode._key, key);\n      if (cmpResult < 0) {\n        curNode = curNode._right;\n      } else if (cmpResult > 0) {\n        resNode = curNode;\n        curNode = curNode._left;\n      } else return curNode;\n    }\n    return resNode;\n  }\n  /**\n   * @internal\n   */\n  _upperBound(curNode, key) {\n    let resNode = this._header;\n    while (curNode) {\n      const cmpResult = this._cmp(curNode._key, key);\n      if (cmpResult <= 0) {\n        curNode = curNode._right;\n      } else {\n        resNode = curNode;\n        curNode = curNode._left;\n      }\n    }\n    return resNode;\n  }\n  /**\n   * @internal\n   */\n  _reverseLowerBound(curNode, key) {\n    let resNode = this._header;\n    while (curNode) {\n      const cmpResult = this._cmp(curNode._key, key);\n      if (cmpResult < 0) {\n        resNode = curNode;\n        curNode = curNode._right;\n      } else if (cmpResult > 0) {\n        curNode = curNode._left;\n      } else return curNode;\n    }\n    return resNode;\n  }\n  /**\n   * @internal\n   */\n  _reverseUpperBound(curNode, key) {\n    let resNode = this._header;\n    while (curNode) {\n      const cmpResult = this._cmp(curNode._key, key);\n      if (cmpResult < 0) {\n        resNode = curNode;\n        curNode = curNode._right;\n      } else {\n        curNode = curNode._left;\n      }\n    }\n    return resNode;\n  }\n  /**\n   * @internal\n   */\n  _eraseNodeSelfBalance(curNode) {\n    while (true) {\n      const parentNode = curNode._parent;\n      if (parentNode === this._header) return;\n      if (curNode._color === 1 /* TreeNodeColor.RED */) {\n        curNode._color = 0 /* TreeNodeColor.BLACK */;\n        return;\n      }\n      if (curNode === parentNode._left) {\n        const brother = parentNode._right;\n        if (brother._color === 1 /* TreeNodeColor.RED */) {\n          brother._color = 0 /* TreeNodeColor.BLACK */;\n          parentNode._color = 1 /* TreeNodeColor.RED */;\n          if (parentNode === this._root) {\n            this._root = parentNode._rotateLeft();\n          } else parentNode._rotateLeft();\n        } else {\n          if (brother._right && brother._right._color === 1 /* TreeNodeColor.RED */) {\n            brother._color = parentNode._color;\n            parentNode._color = 0 /* TreeNodeColor.BLACK */;\n            brother._right._color = 0 /* TreeNodeColor.BLACK */;\n            if (parentNode === this._root) {\n              this._root = parentNode._rotateLeft();\n            } else parentNode._rotateLeft();\n            return;\n          } else if (brother._left && brother._left._color === 1 /* TreeNodeColor.RED */) {\n            brother._color = 1 /* TreeNodeColor.RED */;\n            brother._left._color = 0 /* TreeNodeColor.BLACK */;\n            brother._rotateRight();\n          } else {\n            brother._color = 1 /* TreeNodeColor.RED */;\n            curNode = parentNode;\n          }\n        }\n      } else {\n        const brother = parentNode._left;\n        if (brother._color === 1 /* TreeNodeColor.RED */) {\n          brother._color = 0 /* TreeNodeColor.BLACK */;\n          parentNode._color = 1 /* TreeNodeColor.RED */;\n          if (parentNode === this._root) {\n            this._root = parentNode._rotateRight();\n          } else parentNode._rotateRight();\n        } else {\n          if (brother._left && brother._left._color === 1 /* TreeNodeColor.RED */) {\n            brother._color = parentNode._color;\n            parentNode._color = 0 /* TreeNodeColor.BLACK */;\n            brother._left._color = 0 /* TreeNodeColor.BLACK */;\n            if (parentNode === this._root) {\n              this._root = parentNode._rotateRight();\n            } else parentNode._rotateRight();\n            return;\n          } else if (brother._right && brother._right._color === 1 /* TreeNodeColor.RED */) {\n            brother._color = 1 /* TreeNodeColor.RED */;\n            brother._right._color = 0 /* TreeNodeColor.BLACK */;\n            brother._rotateLeft();\n          } else {\n            brother._color = 1 /* TreeNodeColor.RED */;\n            curNode = parentNode;\n          }\n        }\n      }\n    }\n  }\n  /**\n   * @internal\n   */\n  _eraseNode(curNode) {\n    if (this._length === 1) {\n      this.clear();\n      return;\n    }\n    let swapNode = curNode;\n    while (swapNode._left || swapNode._right) {\n      if (swapNode._right) {\n        swapNode = swapNode._right;\n        while (swapNode._left) swapNode = swapNode._left;\n      } else {\n        swapNode = swapNode._left;\n      }\n      const key = curNode._key;\n      curNode._key = swapNode._key;\n      swapNode._key = key;\n      const value = curNode._value;\n      curNode._value = swapNode._value;\n      swapNode._value = value;\n      curNode = swapNode;\n    }\n    if (this._header._left === swapNode) {\n      this._header._left = swapNode._parent;\n    } else if (this._header._right === swapNode) {\n      this._header._right = swapNode._parent;\n    }\n    this._eraseNodeSelfBalance(swapNode);\n    let _parent = swapNode._parent;\n    if (swapNode === _parent._left) {\n      _parent._left = undefined;\n    } else _parent._right = undefined;\n    this._length -= 1;\n    this._root._color = 0 /* TreeNodeColor.BLACK */;\n    if (this.enableIndex) {\n      while (_parent !== this._header) {\n        _parent._subTreeSize -= 1;\n        _parent = _parent._parent;\n      }\n    }\n  }\n  /**\n   * @internal\n   */\n  _inOrderTraversal(param) {\n    const pos = typeof param === 'number' ? param : undefined;\n    const callback = typeof param === 'function' ? param : undefined;\n    const nodeList = typeof param === 'undefined' ? [] : undefined;\n    let index = 0;\n    let curNode = this._root;\n    const stack = [];\n    while (stack.length || curNode) {\n      if (curNode) {\n        stack.push(curNode);\n        curNode = curNode._left;\n      } else {\n        curNode = stack.pop();\n        if (index === pos) return curNode;\n        nodeList && nodeList.push(curNode);\n        callback && callback(curNode, index, this);\n        index += 1;\n        curNode = curNode._right;\n      }\n    }\n    return nodeList;\n  }\n  /**\n   * @internal\n   */\n  _insertNodeSelfBalance(curNode) {\n    while (true) {\n      const parentNode = curNode._parent;\n      if (parentNode._color === 0 /* TreeNodeColor.BLACK */) return;\n      const grandParent = parentNode._parent;\n      if (parentNode === grandParent._left) {\n        const uncle = grandParent._right;\n        if (uncle && uncle._color === 1 /* TreeNodeColor.RED */) {\n          uncle._color = parentNode._color = 0 /* TreeNodeColor.BLACK */;\n          if (grandParent === this._root) return;\n          grandParent._color = 1 /* TreeNodeColor.RED */;\n          curNode = grandParent;\n          continue;\n        } else if (curNode === parentNode._right) {\n          curNode._color = 0 /* TreeNodeColor.BLACK */;\n          if (curNode._left) {\n            curNode._left._parent = parentNode;\n          }\n          if (curNode._right) {\n            curNode._right._parent = grandParent;\n          }\n          parentNode._right = curNode._left;\n          grandParent._left = curNode._right;\n          curNode._left = parentNode;\n          curNode._right = grandParent;\n          if (grandParent === this._root) {\n            this._root = curNode;\n            this._header._parent = curNode;\n          } else {\n            const GP = grandParent._parent;\n            if (GP._left === grandParent) {\n              GP._left = curNode;\n            } else GP._right = curNode;\n          }\n          curNode._parent = grandParent._parent;\n          parentNode._parent = curNode;\n          grandParent._parent = curNode;\n          grandParent._color = 1 /* TreeNodeColor.RED */;\n        } else {\n          parentNode._color = 0 /* TreeNodeColor.BLACK */;\n          if (grandParent === this._root) {\n            this._root = grandParent._rotateRight();\n          } else grandParent._rotateRight();\n          grandParent._color = 1 /* TreeNodeColor.RED */;\n          return;\n        }\n      } else {\n        const uncle = grandParent._left;\n        if (uncle && uncle._color === 1 /* TreeNodeColor.RED */) {\n          uncle._color = parentNode._color = 0 /* TreeNodeColor.BLACK */;\n          if (grandParent === this._root) return;\n          grandParent._color = 1 /* TreeNodeColor.RED */;\n          curNode = grandParent;\n          continue;\n        } else if (curNode === parentNode._left) {\n          curNode._color = 0 /* TreeNodeColor.BLACK */;\n          if (curNode._left) {\n            curNode._left._parent = grandParent;\n          }\n          if (curNode._right) {\n            curNode._right._parent = parentNode;\n          }\n          grandParent._right = curNode._left;\n          parentNode._left = curNode._right;\n          curNode._left = grandParent;\n          curNode._right = parentNode;\n          if (grandParent === this._root) {\n            this._root = curNode;\n            this._header._parent = curNode;\n          } else {\n            const GP = grandParent._parent;\n            if (GP._left === grandParent) {\n              GP._left = curNode;\n            } else GP._right = curNode;\n          }\n          curNode._parent = grandParent._parent;\n          parentNode._parent = curNode;\n          grandParent._parent = curNode;\n          grandParent._color = 1 /* TreeNodeColor.RED */;\n        } else {\n          parentNode._color = 0 /* TreeNodeColor.BLACK */;\n          if (grandParent === this._root) {\n            this._root = grandParent._rotateLeft();\n          } else grandParent._rotateLeft();\n          grandParent._color = 1 /* TreeNodeColor.RED */;\n          return;\n        }\n      }\n      if (this.enableIndex) {\n        parentNode._recount();\n        grandParent._recount();\n        curNode._recount();\n      }\n      return;\n    }\n  }\n  /**\n   * @internal\n   */\n  _set(key, value, hint) {\n    if (this._root === undefined) {\n      this._length += 1;\n      this._root = new this._TreeNodeClass(key, value, 0 /* TreeNodeColor.BLACK */);\n      this._root._parent = this._header;\n      this._header._parent = this._header._left = this._header._right = this._root;\n      return this._length;\n    }\n    let curNode;\n    const minNode = this._header._left;\n    const compareToMin = this._cmp(minNode._key, key);\n    if (compareToMin === 0) {\n      minNode._value = value;\n      return this._length;\n    } else if (compareToMin > 0) {\n      minNode._left = new this._TreeNodeClass(key, value);\n      minNode._left._parent = minNode;\n      curNode = minNode._left;\n      this._header._left = curNode;\n    } else {\n      const maxNode = this._header._right;\n      const compareToMax = this._cmp(maxNode._key, key);\n      if (compareToMax === 0) {\n        maxNode._value = value;\n        return this._length;\n      } else if (compareToMax < 0) {\n        maxNode._right = new this._TreeNodeClass(key, value);\n        maxNode._right._parent = maxNode;\n        curNode = maxNode._right;\n        this._header._right = curNode;\n      } else {\n        if (hint !== undefined) {\n          const iterNode = hint._node;\n          if (iterNode !== this._header) {\n            const iterCmpRes = this._cmp(iterNode._key, key);\n            if (iterCmpRes === 0) {\n              iterNode._value = value;\n              return this._length;\n            } else /* istanbul ignore else */if (iterCmpRes > 0) {\n                const preNode = iterNode._pre();\n                const preCmpRes = this._cmp(preNode._key, key);\n                if (preCmpRes === 0) {\n                  preNode._value = value;\n                  return this._length;\n                } else if (preCmpRes < 0) {\n                  curNode = new this._TreeNodeClass(key, value);\n                  if (preNode._right === undefined) {\n                    preNode._right = curNode;\n                    curNode._parent = preNode;\n                  } else {\n                    iterNode._left = curNode;\n                    curNode._parent = iterNode;\n                  }\n                }\n              }\n          }\n        }\n        if (curNode === undefined) {\n          curNode = this._root;\n          while (true) {\n            const cmpResult = this._cmp(curNode._key, key);\n            if (cmpResult > 0) {\n              if (curNode._left === undefined) {\n                curNode._left = new this._TreeNodeClass(key, value);\n                curNode._left._parent = curNode;\n                curNode = curNode._left;\n                break;\n              }\n              curNode = curNode._left;\n            } else if (cmpResult < 0) {\n              if (curNode._right === undefined) {\n                curNode._right = new this._TreeNodeClass(key, value);\n                curNode._right._parent = curNode;\n                curNode = curNode._right;\n                break;\n              }\n              curNode = curNode._right;\n            } else {\n              curNode._value = value;\n              return this._length;\n            }\n          }\n        }\n      }\n    }\n    if (this.enableIndex) {\n      let parent = curNode._parent;\n      while (parent !== this._header) {\n        parent._subTreeSize += 1;\n        parent = parent._parent;\n      }\n    }\n    this._insertNodeSelfBalance(curNode);\n    this._length += 1;\n    return this._length;\n  }\n  /**\n   * @internal\n   */\n  _getTreeNodeByKey(curNode, key) {\n    while (curNode) {\n      const cmpResult = this._cmp(curNode._key, key);\n      if (cmpResult < 0) {\n        curNode = curNode._right;\n      } else if (cmpResult > 0) {\n        curNode = curNode._left;\n      } else return curNode;\n    }\n    return curNode || this._header;\n  }\n  clear() {\n    this._length = 0;\n    this._root = undefined;\n    this._header._parent = undefined;\n    this._header._left = this._header._right = undefined;\n  }\n  /**\n   * @description Update node's key by iterator.\n   * @param iter - The iterator you want to change.\n   * @param key - The key you want to update.\n   * @returns Whether the modification is successful.\n   * @example\n   * const st = new orderedSet([1, 2, 5]);\n   * const iter = st.find(2);\n   * st.updateKeyByIterator(iter, 3); // then st will become [1, 3, 5]\n   */\n  updateKeyByIterator(iter, key) {\n    const node = iter._node;\n    if (node === this._header) {\n      throwIteratorAccessError();\n    }\n    if (this._length === 1) {\n      node._key = key;\n      return true;\n    }\n    const nextKey = node._next()._key;\n    if (node === this._header._left) {\n      if (this._cmp(nextKey, key) > 0) {\n        node._key = key;\n        return true;\n      }\n      return false;\n    }\n    const preKey = node._pre()._key;\n    if (node === this._header._right) {\n      if (this._cmp(preKey, key) < 0) {\n        node._key = key;\n        return true;\n      }\n      return false;\n    }\n    if (this._cmp(preKey, key) >= 0 || this._cmp(nextKey, key) <= 0) return false;\n    node._key = key;\n    return true;\n  }\n  eraseElementByPos(pos) {\n    if (pos < 0 || pos > this._length - 1) {\n      throw new RangeError();\n    }\n    const node = this._inOrderTraversal(pos);\n    this._eraseNode(node);\n    return this._length;\n  }\n  /**\n   * @description Remove the element of the specified key.\n   * @param key - The key you want to remove.\n   * @returns Whether erase successfully.\n   */\n  eraseElementByKey(key) {\n    if (this._length === 0) return false;\n    const curNode = this._getTreeNodeByKey(this._root, key);\n    if (curNode === this._header) return false;\n    this._eraseNode(curNode);\n    return true;\n  }\n  eraseElementByIterator(iter) {\n    const node = iter._node;\n    if (node === this._header) {\n      throwIteratorAccessError();\n    }\n    const hasNoRight = node._right === undefined;\n    const isNormal = iter.iteratorType === 0 /* IteratorType.NORMAL */;\n    // For the normal iterator, the `next` node will be swapped to `this` node when has right.\n    if (isNormal) {\n      // So we should move it to next when it's right is null.\n      if (hasNoRight) iter.next();\n    } else {\n      // For the reverse iterator, only when it doesn't have right and has left the `next` node will be swapped.\n      // So when it has right, or it is a leaf node we should move it to `next`.\n      if (!hasNoRight || node._left === undefined) iter.next();\n    }\n    this._eraseNode(node);\n    return iter;\n  }\n  /**\n   * @description Get the height of the tree.\n   * @returns Number about the height of the RB-tree.\n   */\n  getHeight() {\n    if (this._length === 0) return 0;\n    function traversal(curNode) {\n      if (!curNode) return 0;\n      return Math.max(traversal(curNode._left), traversal(curNode._right)) + 1;\n    }\n    return traversal(this._root);\n  }\n}\n\nclass TreeIterator extends ContainerIterator {\n  /**\n   * @internal\n   */\n  constructor(node, header, iteratorType) {\n    super(iteratorType);\n    this._node = node;\n    this._header = header;\n    if (this.iteratorType === 0 /* IteratorType.NORMAL */) {\n      this.pre = function () {\n        if (this._node === this._header._left) {\n          throwIteratorAccessError();\n        }\n        this._node = this._node._pre();\n        return this;\n      };\n      this.next = function () {\n        if (this._node === this._header) {\n          throwIteratorAccessError();\n        }\n        this._node = this._node._next();\n        return this;\n      };\n    } else {\n      this.pre = function () {\n        if (this._node === this._header._right) {\n          throwIteratorAccessError();\n        }\n        this._node = this._node._next();\n        return this;\n      };\n      this.next = function () {\n        if (this._node === this._header) {\n          throwIteratorAccessError();\n        }\n        this._node = this._node._pre();\n        return this;\n      };\n    }\n  }\n  /**\n   * @description Get the sequential index of the iterator in the tree container.<br/>\n   *              <strong>Note:</strong>\n   *              This function only takes effect when the specified tree container `enableIndex = true`.\n   * @returns The index subscript of the node in the tree.\n   * @example\n   * const st = new OrderedSet([1, 2, 3], true);\n   * console.log(st.begin().next().index);  // 1\n   */\n  get index() {\n    let _node = this._node;\n    const root = this._header._parent;\n    if (_node === this._header) {\n      if (root) {\n        return root._subTreeSize - 1;\n      }\n      return 0;\n    }\n    let index = 0;\n    if (_node._left) {\n      index += _node._left._subTreeSize;\n    }\n    while (_node !== root) {\n      const _parent = _node._parent;\n      if (_node === _parent._right) {\n        index += 1;\n        if (_parent._left) {\n          index += _parent._left._subTreeSize;\n        }\n      }\n      _node = _parent;\n    }\n    return index;\n  }\n  isAccessible() {\n    return this._node !== this._header;\n  }\n}\n\nclass OrderedMapIterator extends TreeIterator {\n  constructor(node, header, container, iteratorType) {\n    super(node, header, iteratorType);\n    this.container = container;\n  }\n  get pointer() {\n    if (this._node === this._header) {\n      throwIteratorAccessError();\n    }\n    const self = this;\n    return new Proxy([], {\n      get(target, prop) {\n        if (prop === '0') return self._node._key;else if (prop === '1') return self._node._value;\n        target[0] = self._node._key;\n        target[1] = self._node._value;\n        return target[prop];\n      },\n      set(_, prop, newValue) {\n        if (prop !== '1') {\n          throw new TypeError('prop must be 1');\n        }\n        self._node._value = newValue;\n        return true;\n      }\n    });\n  }\n  copy() {\n    return new OrderedMapIterator(this._node, this._header, this.container, this.iteratorType);\n  }\n}\nclass OrderedMap extends TreeContainer {\n  /**\n   * @param container - The initialization container.\n   * @param cmp - The compare function.\n   * @param enableIndex - Whether to enable iterator indexing function.\n   * @example\n   * new OrderedMap();\n   * new OrderedMap([[0, 1], [2, 1]]);\n   * new OrderedMap([[0, 1], [2, 1]], (x, y) => x - y);\n   * new OrderedMap([[0, 1], [2, 1]], (x, y) => x - y, true);\n   */\n  constructor(container = [], cmp, enableIndex) {\n    super(cmp, enableIndex);\n    const self = this;\n    container.forEach(function (el) {\n      self.setElement(el[0], el[1]);\n    });\n  }\n  begin() {\n    return new OrderedMapIterator(this._header._left || this._header, this._header, this);\n  }\n  end() {\n    return new OrderedMapIterator(this._header, this._header, this);\n  }\n  rBegin() {\n    return new OrderedMapIterator(this._header._right || this._header, this._header, this, 1 /* IteratorType.REVERSE */);\n  }\n\n  rEnd() {\n    return new OrderedMapIterator(this._header, this._header, this, 1 /* IteratorType.REVERSE */);\n  }\n\n  front() {\n    if (this._length === 0) return;\n    const minNode = this._header._left;\n    return [minNode._key, minNode._value];\n  }\n  back() {\n    if (this._length === 0) return;\n    const maxNode = this._header._right;\n    return [maxNode._key, maxNode._value];\n  }\n  lowerBound(key) {\n    const resNode = this._lowerBound(this._root, key);\n    return new OrderedMapIterator(resNode, this._header, this);\n  }\n  upperBound(key) {\n    const resNode = this._upperBound(this._root, key);\n    return new OrderedMapIterator(resNode, this._header, this);\n  }\n  reverseLowerBound(key) {\n    const resNode = this._reverseLowerBound(this._root, key);\n    return new OrderedMapIterator(resNode, this._header, this);\n  }\n  reverseUpperBound(key) {\n    const resNode = this._reverseUpperBound(this._root, key);\n    return new OrderedMapIterator(resNode, this._header, this);\n  }\n  forEach(callback) {\n    this._inOrderTraversal(function (node, index, map) {\n      callback([node._key, node._value], index, map);\n    });\n  }\n  /**\n   * @description Insert a key-value pair or set value by the given key.\n   * @param key - The key want to insert.\n   * @param value - The value want to set.\n   * @param hint - You can give an iterator hint to improve insertion efficiency.\n   * @return The size of container after setting.\n   * @example\n   * const mp = new OrderedMap([[2, 0], [4, 0], [5, 0]]);\n   * const iter = mp.begin();\n   * mp.setElement(1, 0);\n   * mp.setElement(3, 0, iter);  // give a hint will be faster.\n   */\n  setElement(key, value, hint) {\n    return this._set(key, value, hint);\n  }\n  getElementByPos(pos) {\n    if (pos < 0 || pos > this._length - 1) {\n      throw new RangeError();\n    }\n    const node = this._inOrderTraversal(pos);\n    return [node._key, node._value];\n  }\n  find(key) {\n    const curNode = this._getTreeNodeByKey(this._root, key);\n    return new OrderedMapIterator(curNode, this._header, this);\n  }\n  /**\n   * @description Get the value of the element of the specified key.\n   * @param key - The specified key you want to get.\n   * @example\n   * const val = container.getElementByKey(1);\n   */\n  getElementByKey(key) {\n    const curNode = this._getTreeNodeByKey(this._root, key);\n    return curNode._value;\n  }\n  union(other) {\n    const self = this;\n    other.forEach(function (el) {\n      self.setElement(el[0], el[1]);\n    });\n    return this._length;\n  }\n  *[Symbol.iterator]() {\n    const length = this._length;\n    const nodeList = this._inOrderTraversal();\n    for (let i = 0; i < length; ++i) {\n      const node = nodeList[i];\n      yield [node._key, node._value];\n    }\n  }\n}\n\nexports.OrderedMap = OrderedMap;\n//# sourceMappingURL=index.js.map\n", "export const enum TreeNodeColor {\n  RED = 1,\n  BLACK = 0\n}\n\nexport class TreeNode<K, V> {\n  _color: TreeNodeColor;\n  _key: K | undefined;\n  _value: V | undefined;\n  _left: TreeNode<K, V> | undefined = undefined;\n  _right: TreeNode<K, V> | undefined = undefined;\n  _parent: TreeNode<K, V> | undefined = undefined;\n  constructor(\n    key?: K,\n    value?: V,\n    color: TreeNodeColor = TreeNodeColor.RED\n  ) {\n    this._key = key;\n    this._value = value;\n    this._color = color;\n  }\n  /**\n   * @description Get the pre node.\n   * @returns TreeNode about the pre node.\n   */\n  _pre() {\n    let preNode: TreeNode<K, V> = this;\n    const isRootOrHeader = preNode._parent!._parent === preNode;\n    if (isRootOrHeader && preNode._color === TreeNodeColor.RED) {\n      preNode = preNode._right!;\n    } else if (preNode._left) {\n      preNode = preNode._left;\n      while (preNode._right) {\n        preNode = preNode._right;\n      }\n    } else {\n      // Must be root and left is null\n      if (isRootOrHeader) {\n        return preNode._parent!;\n      }\n      let pre = preNode._parent!;\n      while (pre._left === preNode) {\n        preNode = pre;\n        pre = preNode._parent!;\n      }\n      preNode = pre;\n    }\n    return preNode;\n  }\n  /**\n   * @description Get the next node.\n   * @returns TreeNode about the next node.\n   */\n  _next() {\n    let nextNode: TreeNode<K, V> = this;\n    if (nextNode._right) {\n      nextNode = nextNode._right;\n      while (nextNode._left) {\n        nextNode = nextNode._left;\n      }\n      return nextNode;\n    } else {\n      let pre = nextNode._parent!;\n      while (pre._right === nextNode) {\n        nextNode = pre;\n        pre = nextNode._parent!;\n      }\n      if (nextNode._right !== pre) {\n        return pre;\n      } else return nextNode;\n    }\n  }\n  /**\n   * @description Rotate left.\n   * @returns TreeNode about moved to original position after rotation.\n   */\n  _rotateLeft() {\n    const PP = this._parent!;\n    const V = this._right!;\n    const R = V._left;\n\n    if (PP._parent === this) PP._parent = V;\n    else if (PP._left === this) PP._left = V;\n    else PP._right = V;\n\n    V._parent = PP;\n    V._left = this;\n\n    this._parent = V;\n    this._right = R;\n\n    if (R) R._parent = this;\n\n    return V;\n  }\n  /**\n   * @description Rotate right.\n   * @returns TreeNode about moved to original position after rotation.\n   */\n  _rotateRight() {\n    const PP = this._parent!;\n    const F = this._left!;\n    const K = F._right;\n\n    if (PP._parent === this) PP._parent = F;\n    else if (PP._left === this) PP._left = F;\n    else PP._right = F;\n\n    F._parent = PP;\n    F._right = this;\n\n    this._parent = F;\n    this._left = K;\n\n    if (K) K._parent = this;\n\n    return F;\n  }\n}\n\nexport class TreeNodeEnableIndex<K, V> extends TreeNode<K, V> {\n  _subTreeSize = 1;\n  /**\n   * @description Rotate left and do recount.\n   * @returns TreeNode about moved to original position after rotation.\n   */\n  _rotateLeft() {\n    const parent = super._rotateLeft() as TreeNodeEnableIndex<K, V>;\n    this._recount();\n    parent._recount();\n    return parent;\n  }\n  /**\n   * @description Rotate right and do recount.\n   * @returns TreeNode about moved to original position after rotation.\n   */\n  _rotateRight() {\n    const parent = super._rotateRight() as TreeNodeEnableIndex<K, V>;\n    this._recount();\n    parent._recount();\n    return parent;\n  }\n  _recount() {\n    this._subTreeSize = 1;\n    if (this._left) {\n      this._subTreeSize += (this._left as TreeNodeEnableIndex<K, V>)._subTreeSize;\n    }\n    if (this._right) {\n      this._subTreeSize += (this._right as TreeNodeEnableIndex<K, V>)._subTreeSize;\n    }\n  }\n}\n", "/**\n * @description The iterator type including `NORMAL` and `REVERSE`.\n */\nexport const enum IteratorType {\n  NORMAL = 0,\n  REVERSE = 1\n}\n\nexport abstract class ContainerIterator<T> {\n  /**\n   * @description The container pointed to by the iterator.\n   */\n  abstract readonly container: Container<T>;\n  /**\n   * @internal\n   */\n  abstract _node: unknown;\n  /**\n   * @description Iterator's type.\n   * @example\n   * console.log(container.end().iteratorType === IteratorType.NORMAL);  // true\n   */\n  readonly iteratorType: IteratorType;\n  /**\n   * @internal\n   */\n  protected constructor(iteratorType = IteratorType.NORMAL) {\n    this.iteratorType = iteratorType;\n  }\n  /**\n   * @param iter - The other iterator you want to compare.\n   * @returns Whether this equals to obj.\n   * @example\n   * container.find(1).equals(container.end());\n   */\n  equals(iter: ContainerIterator<T>) {\n    return this._node === iter._node;\n  }\n  /**\n   * @description Pointers to element.\n   * @returns The value of the pointer's element.\n   * @example\n   * const val = container.begin().pointer;\n   */\n  abstract get pointer(): T;\n  /**\n   * @description Set pointer's value (some containers are unavailable).\n   * @param newValue - The new value you want to set.\n   * @example\n   * (<LinkList<number>>container).begin().pointer = 1;\n   */\n  abstract set pointer(newValue: T);\n  /**\n   * @description Move `this` iterator to pre.\n   * @returns The iterator's self.\n   * @example\n   * const iter = container.find(1);  // container = [0, 1]\n   * const pre = iter.pre();\n   * console.log(pre === iter);  // true\n   * console.log(pre.equals(iter));  // true\n   * console.log(pre.pointer, iter.pointer); // 0, 0\n   */\n  abstract pre(): this;\n  /**\n   * @description Move `this` iterator to next.\n   * @returns The iterator's self.\n   * @example\n   * const iter = container.find(1);  // container = [1, 2]\n   * const next = iter.next();\n   * console.log(next === iter);  // true\n   * console.log(next.equals(iter));  // true\n   * console.log(next.pointer, iter.pointer); // 2, 2\n   */\n  abstract next(): this;\n  /**\n   * @description Get a copy of itself.\n   * @returns The copy of self.\n   * @example\n   * const iter = container.find(1);  // container = [1, 2]\n   * const next = iter.copy().next();\n   * console.log(next === iter);  // false\n   * console.log(next.equals(iter));  // false\n   * console.log(next.pointer, iter.pointer); // 2, 1\n   */\n  abstract copy(): ContainerIterator<T>;\n  abstract isAccessible(): boolean;\n}\n\nexport abstract class Base {\n  /**\n   * @description Container's size.\n   * @internal\n   */\n  protected _length = 0;\n  /**\n   * @returns The size of the container.\n   * @example\n   * const container = new Vector([1, 2]);\n   * console.log(container.length); // 2\n   */\n  get length() {\n    return this._length;\n  }\n  /**\n   * @returns The size of the container.\n   * @example\n   * const container = new Vector([1, 2]);\n   * console.log(container.size()); // 2\n   */\n  size() {\n    return this._length;\n  }\n  /**\n   * @returns Whether the container is empty.\n   * @example\n   * container.clear();\n   * console.log(container.empty());  // true\n   */\n  empty() {\n    return this._length === 0;\n  }\n  /**\n   * @description Clear the container.\n   * @example\n   * container.clear();\n   * console.log(container.empty());  // true\n   */\n  abstract clear(): void;\n}\n\nexport abstract class Container<T> extends Base {\n  /**\n   * @returns Iterator pointing to the beginning element.\n   * @example\n   * const begin = container.begin();\n   * const end = container.end();\n   * for (const it = begin; !it.equals(end); it.next()) {\n   *   doSomething(it.pointer);\n   * }\n   */\n  abstract begin(): ContainerIterator<T>;\n  /**\n   * @returns Iterator pointing to the super end like c++.\n   * @example\n   * const begin = container.begin();\n   * const end = container.end();\n   * for (const it = begin; !it.equals(end); it.next()) {\n   *   doSomething(it.pointer);\n   * }\n   */\n  abstract end(): ContainerIterator<T>;\n  /**\n   * @returns Iterator pointing to the end element.\n   * @example\n   * const rBegin = container.rBegin();\n   * const rEnd = container.rEnd();\n   * for (const it = rBegin; !it.equals(rEnd); it.next()) {\n   *   doSomething(it.pointer);\n   * }\n   */\n  abstract rBegin(): ContainerIterator<T>;\n  /**\n   * @returns Iterator pointing to the super begin like c++.\n   * @example\n   * const rBegin = container.rBegin();\n   * const rEnd = container.rEnd();\n   * for (const it = rBegin; !it.equals(rEnd); it.next()) {\n   *   doSomething(it.pointer);\n   * }\n   */\n  abstract rEnd(): ContainerIterator<T>;\n  /**\n   * @returns The first element of the container.\n   */\n  abstract front(): T | undefined;\n  /**\n   * @returns The last element of the container.\n   */\n  abstract back(): T | undefined;\n  /**\n   * @param element - The element you want to find.\n   * @returns An iterator pointing to the element if found, or super end if not found.\n   * @example\n   * container.find(1).equals(container.end());\n   */\n  abstract find(element: T): ContainerIterator<T>;\n  /**\n   * @description Iterate over all elements in the container.\n   * @param callback - Callback function like Array.forEach.\n   * @example\n   * container.forEach((element, index) => console.log(element, index));\n   */\n  abstract forEach(callback: (element: T, index: number, container: Container<T>) => void): void;\n  /**\n   * @description Gets the value of the element at the specified position.\n   * @example\n   * const val = container.getElementByPos(-1); // throw a RangeError\n   */\n  abstract getElementByPos(pos: number): T;\n  /**\n   * @description Removes the element at the specified position.\n   * @param pos - The element's position you want to remove.\n   * @returns The container length after erasing.\n   * @example\n   * container.eraseElementByPos(-1); // throw a RangeError\n   */\n  abstract eraseElementByPos(pos: number): number;\n  /**\n   * @description Removes element by iterator and move `iter` to next.\n   * @param iter - The iterator you want to erase.\n   * @returns The next iterator.\n   * @example\n   * container.eraseElementByIterator(container.begin());\n   * container.eraseElementByIterator(container.end()); // throw a RangeError\n   */\n  abstract eraseElementByIterator(\n    iter: ContainerIterator<T>\n  ): ContainerIterator<T>;\n  /**\n   * @description Using for `for...of` syntax like Array.\n   * @example\n   * for (const element of container) {\n   *   console.log(element);\n   * }\n   */\n  abstract [Symbol.iterator](): Generator<T, void>;\n}\n\n/**\n * @description The initial data type passed in when initializing the container.\n */\nexport type initContainer<T> = {\n  size?: number | (() => number);\n  length?: number;\n  forEach: (callback: (el: T) => void) => void;\n}\n", "/**\n * @description Throw an iterator access error.\n * @internal\n */\nexport function throwIteratorAccessError() {\n  throw new RangeError('Iterator access denied!');\n}\n", "import type TreeIterator from './TreeIterator';\nimport { TreeNode, TreeNodeColor, TreeNodeEnableIndex } from './TreeNode';\nimport { Container, IteratorType } from '@/container/ContainerBase';\nimport $checkWithinAccessParams from '@/utils/checkParams.macro';\nimport { throwIteratorAccessError } from '@/utils/throwError';\n\nabstract class TreeContainer<K, V> extends Container<K | [K, V]> {\n  enableIndex: boolean;\n  /**\n   * @internal\n   */\n  protected _header: TreeNode<K, V>;\n  /**\n   * @internal\n   */\n  protected _root: TreeNode<K, V> | undefined = undefined;\n  /**\n   * @internal\n   */\n  protected readonly _cmp: (x: K, y: K) => number;\n  /**\n   * @internal\n   */\n  protected readonly _TreeNodeClass: typeof TreeNode | typeof TreeNodeEnableIndex;\n  /**\n   * @internal\n   */\n  protected constructor(\n    cmp: (x: K, y: K) => number =\n    function (x: K, y: K) {\n      if (x < y) return -1;\n      if (x > y) return 1;\n      return 0;\n    },\n    enableIndex = false\n  ) {\n    super();\n    this._cmp = cmp;\n    this.enableIndex = enableIndex;\n    this._TreeNodeClass = enableIndex ? TreeNodeEnableIndex : TreeNode;\n    this._header = new this._TreeNodeClass();\n  }\n  /**\n   * @internal\n   */\n  protected _lowerBound(curNode: TreeNode<K, V> | undefined, key: K) {\n    let resNode = this._header;\n    while (curNode) {\n      const cmpResult = this._cmp(curNode._key!, key);\n      if (cmpResult < 0) {\n        curNode = curNode._right;\n      } else if (cmpResult > 0) {\n        resNode = curNode;\n        curNode = curNode._left;\n      } else return curNode;\n    }\n    return resNode;\n  }\n  /**\n   * @internal\n   */\n  protected _upperBound(curNode: TreeNode<K, V> | undefined, key: K) {\n    let resNode = this._header;\n    while (curNode) {\n      const cmpResult = this._cmp(curNode._key!, key);\n      if (cmpResult <= 0) {\n        curNode = curNode._right;\n      } else {\n        resNode = curNode;\n        curNode = curNode._left;\n      }\n    }\n    return resNode;\n  }\n  /**\n   * @internal\n   */\n  protected _reverseLowerBound(curNode: TreeNode<K, V> | undefined, key: K) {\n    let resNode = this._header;\n    while (curNode) {\n      const cmpResult = this._cmp(curNode._key!, key);\n      if (cmpResult < 0) {\n        resNode = curNode;\n        curNode = curNode._right;\n      } else if (cmpResult > 0) {\n        curNode = curNode._left;\n      } else return curNode;\n    }\n    return resNode;\n  }\n  /**\n   * @internal\n   */\n  protected _reverseUpperBound(curNode: TreeNode<K, V> | undefined, key: K) {\n    let resNode = this._header;\n    while (curNode) {\n      const cmpResult = this._cmp(curNode._key!, key);\n      if (cmpResult < 0) {\n        resNode = curNode;\n        curNode = curNode._right;\n      } else {\n        curNode = curNode._left;\n      }\n    }\n    return resNode;\n  }\n  /**\n   * @internal\n   */\n  protected _eraseNodeSelfBalance(curNode: TreeNode<K, V>) {\n    while (true) {\n      const parentNode = curNode._parent!;\n      if (parentNode === this._header) return;\n      if (curNode._color === TreeNodeColor.RED) {\n        curNode._color = TreeNodeColor.BLACK;\n        return;\n      }\n      if (curNode === parentNode._left) {\n        const brother = parentNode._right!;\n        if (brother._color === TreeNodeColor.RED) {\n          brother._color = TreeNodeColor.BLACK;\n          parentNode._color = TreeNodeColor.RED;\n          if (parentNode === this._root) {\n            this._root = parentNode._rotateLeft();\n          } else parentNode._rotateLeft();\n        } else {\n          if (brother._right && brother._right._color === TreeNodeColor.RED) {\n            brother._color = parentNode._color;\n            parentNode._color = TreeNodeColor.BLACK;\n            brother._right._color = TreeNodeColor.BLACK;\n            if (parentNode === this._root) {\n              this._root = parentNode._rotateLeft();\n            } else parentNode._rotateLeft();\n            return;\n          } else if (brother._left && brother._left._color === TreeNodeColor.RED) {\n            brother._color = TreeNodeColor.RED;\n            brother._left._color = TreeNodeColor.BLACK;\n            brother._rotateRight();\n          } else {\n            brother._color = TreeNodeColor.RED;\n            curNode = parentNode;\n          }\n        }\n      } else {\n        const brother = parentNode._left!;\n        if (brother._color === TreeNodeColor.RED) {\n          brother._color = TreeNodeColor.BLACK;\n          parentNode._color = TreeNodeColor.RED;\n          if (parentNode === this._root) {\n            this._root = parentNode._rotateRight();\n          } else parentNode._rotateRight();\n        } else {\n          if (brother._left && brother._left._color === TreeNodeColor.RED) {\n            brother._color = parentNode._color;\n            parentNode._color = TreeNodeColor.BLACK;\n            brother._left._color = TreeNodeColor.BLACK;\n            if (parentNode === this._root) {\n              this._root = parentNode._rotateRight();\n            } else parentNode._rotateRight();\n            return;\n          } else if (brother._right && brother._right._color === TreeNodeColor.RED) {\n            brother._color = TreeNodeColor.RED;\n            brother._right._color = TreeNodeColor.BLACK;\n            brother._rotateLeft();\n          } else {\n            brother._color = TreeNodeColor.RED;\n            curNode = parentNode;\n          }\n        }\n      }\n    }\n  }\n  /**\n   * @internal\n   */\n  protected _eraseNode(curNode: TreeNode<K, V>) {\n    if (this._length === 1) {\n      this.clear();\n      return;\n    }\n    let swapNode = curNode;\n    while (swapNode._left || swapNode._right) {\n      if (swapNode._right) {\n        swapNode = swapNode._right;\n        while (swapNode._left) swapNode = swapNode._left;\n      } else {\n        swapNode = swapNode._left!;\n      }\n      const key = curNode._key;\n      curNode._key = swapNode._key;\n      swapNode._key = key;\n      const value = curNode._value;\n      curNode._value = swapNode._value;\n      swapNode._value = value;\n      curNode = swapNode;\n    }\n    if (this._header._left === swapNode) {\n      this._header._left = swapNode._parent;\n    } else if (this._header._right === swapNode) {\n      this._header._right = swapNode._parent;\n    }\n    this._eraseNodeSelfBalance(swapNode);\n    let _parent = swapNode._parent as TreeNodeEnableIndex<K, V>;\n    if (swapNode === _parent._left) {\n      _parent._left = undefined;\n    } else _parent._right = undefined;\n    this._length -= 1;\n    this._root!._color = TreeNodeColor.BLACK;\n    if (this.enableIndex) {\n      while (_parent !== this._header) {\n        _parent._subTreeSize -= 1;\n        _parent = _parent._parent as TreeNodeEnableIndex<K, V>;\n      }\n    }\n  }\n  protected _inOrderTraversal(): TreeNode<K, V>[];\n  protected _inOrderTraversal(pos: number): TreeNode<K, V>;\n  protected _inOrderTraversal(\n    callback: (node: TreeNode<K, V>, index: number, map: this) => void\n  ): TreeNode<K, V>;\n  /**\n   * @internal\n   */\n  protected _inOrderTraversal(\n    param?: number | ((node: TreeNode<K, V>, index: number, map: this) => void)\n  ) {\n    const pos = typeof param === 'number' ? param : undefined;\n    const callback = typeof param === 'function' ? param : undefined;\n    const nodeList = typeof param === 'undefined' ? <TreeNode<K, V>[]>[] : undefined;\n    let index = 0;\n    let curNode = this._root;\n    const stack: TreeNode<K, V>[] = [];\n    while (stack.length || curNode) {\n      if (curNode) {\n        stack.push(curNode);\n        curNode = curNode._left;\n      } else {\n        curNode = stack.pop()!;\n        if (index === pos) return curNode;\n        nodeList && nodeList.push(curNode);\n        callback && callback(curNode, index, this);\n        index += 1;\n        curNode = curNode._right;\n      }\n    }\n    return nodeList;\n  }\n  /**\n   * @internal\n   */\n  protected _insertNodeSelfBalance(curNode: TreeNode<K, V>) {\n    while (true) {\n      const parentNode = curNode._parent!;\n      if (parentNode._color === TreeNodeColor.BLACK) return;\n      const grandParent = parentNode._parent!;\n      if (parentNode === grandParent._left) {\n        const uncle = grandParent._right;\n        if (uncle && uncle._color === TreeNodeColor.RED) {\n          uncle._color = parentNode._color = TreeNodeColor.BLACK;\n          if (grandParent === this._root) return;\n          grandParent._color = TreeNodeColor.RED;\n          curNode = grandParent;\n          continue;\n        } else if (curNode === parentNode._right) {\n          curNode._color = TreeNodeColor.BLACK;\n          if (curNode._left) {\n            curNode._left._parent = parentNode;\n          }\n          if (curNode._right) {\n            curNode._right._parent = grandParent;\n          }\n          parentNode._right = curNode._left;\n          grandParent._left = curNode._right;\n          curNode._left = parentNode;\n          curNode._right = grandParent;\n          if (grandParent === this._root) {\n            this._root = curNode;\n            this._header._parent = curNode;\n          } else {\n            const GP = grandParent._parent!;\n            if (GP._left === grandParent) {\n              GP._left = curNode;\n            } else GP._right = curNode;\n          }\n          curNode._parent = grandParent._parent;\n          parentNode._parent = curNode;\n          grandParent._parent = curNode;\n          grandParent._color = TreeNodeColor.RED;\n        } else {\n          parentNode._color = TreeNodeColor.BLACK;\n          if (grandParent === this._root) {\n            this._root = grandParent._rotateRight();\n          } else grandParent._rotateRight();\n          grandParent._color = TreeNodeColor.RED;\n          return;\n        }\n      } else {\n        const uncle = grandParent._left;\n        if (uncle && uncle._color === TreeNodeColor.RED) {\n          uncle._color = parentNode._color = TreeNodeColor.BLACK;\n          if (grandParent === this._root) return;\n          grandParent._color = TreeNodeColor.RED;\n          curNode = grandParent;\n          continue;\n        } else if (curNode === parentNode._left) {\n          curNode._color = TreeNodeColor.BLACK;\n          if (curNode._left) {\n            curNode._left._parent = grandParent;\n          }\n          if (curNode._right) {\n            curNode._right._parent = parentNode;\n          }\n          grandParent._right = curNode._left;\n          parentNode._left = curNode._right;\n          curNode._left = grandParent;\n          curNode._right = parentNode;\n          if (grandParent === this._root) {\n            this._root = curNode;\n            this._header._parent = curNode;\n          } else {\n            const GP = grandParent._parent!;\n            if (GP._left === grandParent) {\n              GP._left = curNode;\n            } else GP._right = curNode;\n          }\n          curNode._parent = grandParent._parent;\n          parentNode._parent = curNode;\n          grandParent._parent = curNode;\n          grandParent._color = TreeNodeColor.RED;\n        } else {\n          parentNode._color = TreeNodeColor.BLACK;\n          if (grandParent === this._root) {\n            this._root = grandParent._rotateLeft();\n          } else grandParent._rotateLeft();\n          grandParent._color = TreeNodeColor.RED;\n          return;\n        }\n      }\n      if (this.enableIndex) {\n        (<TreeNodeEnableIndex<K, V>>parentNode)._recount();\n        (<TreeNodeEnableIndex<K, V>>grandParent)._recount();\n        (<TreeNodeEnableIndex<K, V>>curNode)._recount();\n      }\n      return;\n    }\n  }\n  /**\n   * @internal\n   */\n  protected _set(key: K, value?: V, hint?: TreeIterator<K, V>) {\n    if (this._root === undefined) {\n      this._length += 1;\n      this._root = new this._TreeNodeClass(key, value, TreeNodeColor.BLACK);\n      this._root._parent = this._header;\n      this._header._parent = this._header._left = this._header._right = this._root;\n      return this._length;\n    }\n    let curNode;\n    const minNode = this._header._left!;\n    const compareToMin = this._cmp(minNode._key!, key);\n    if (compareToMin === 0) {\n      minNode._value = value;\n      return this._length;\n    } else if (compareToMin > 0) {\n      minNode._left = new this._TreeNodeClass(key, value);\n      minNode._left._parent = minNode;\n      curNode = minNode._left;\n      this._header._left = curNode;\n    } else {\n      const maxNode = this._header._right!;\n      const compareToMax = this._cmp(maxNode._key!, key);\n      if (compareToMax === 0) {\n        maxNode._value = value;\n        return this._length;\n      } else if (compareToMax < 0) {\n        maxNode._right = new this._TreeNodeClass(key, value);\n        maxNode._right._parent = maxNode;\n        curNode = maxNode._right;\n        this._header._right = curNode;\n      } else {\n        if (hint !== undefined) {\n          const iterNode = hint._node;\n          if (iterNode !== this._header) {\n            const iterCmpRes = this._cmp(iterNode._key!, key);\n            if (iterCmpRes === 0) {\n              iterNode._value = value;\n              return this._length;\n            } else /* istanbul ignore else */ if (iterCmpRes > 0) {\n              const preNode = iterNode._pre();\n              const preCmpRes = this._cmp(preNode._key!, key);\n              if (preCmpRes === 0) {\n                preNode._value = value;\n                return this._length;\n              } else if (preCmpRes < 0) {\n                curNode = new this._TreeNodeClass(key, value);\n                if (preNode._right === undefined) {\n                  preNode._right = curNode;\n                  curNode._parent = preNode;\n                } else {\n                  iterNode._left = curNode;\n                  curNode._parent = iterNode;\n                }\n              }\n            }\n          }\n        }\n        if (curNode === undefined) {\n          curNode = this._root;\n          while (true) {\n            const cmpResult = this._cmp(curNode._key!, key);\n            if (cmpResult > 0) {\n              if (curNode._left === undefined) {\n                curNode._left = new this._TreeNodeClass(key, value);\n                curNode._left._parent = curNode;\n                curNode = curNode._left;\n                break;\n              }\n              curNode = curNode._left;\n            } else if (cmpResult < 0) {\n              if (curNode._right === undefined) {\n                curNode._right = new this._TreeNodeClass(key, value);\n                curNode._right._parent = curNode;\n                curNode = curNode._right;\n                break;\n              }\n              curNode = curNode._right;\n            } else {\n              curNode._value = value;\n              return this._length;\n            }\n          }\n        }\n      }\n    }\n    if (this.enableIndex) {\n      let parent = curNode._parent as TreeNodeEnableIndex<K, V>;\n      while (parent !== this._header) {\n        parent._subTreeSize += 1;\n        parent = parent._parent as TreeNodeEnableIndex<K, V>;\n      }\n    }\n    this._insertNodeSelfBalance(curNode);\n    this._length += 1;\n    return this._length;\n  }\n  /**\n   * @internal\n   */\n  protected _getTreeNodeByKey(curNode: TreeNode<K, V> | undefined, key: K) {\n    while (curNode) {\n      const cmpResult = this._cmp(curNode._key!, key);\n      if (cmpResult < 0) {\n        curNode = curNode._right;\n      } else if (cmpResult > 0) {\n        curNode = curNode._left;\n      } else return curNode;\n    }\n    return curNode || this._header;\n  }\n  clear() {\n    this._length = 0;\n    this._root = undefined;\n    this._header._parent = undefined;\n    this._header._left = this._header._right = undefined;\n  }\n  /**\n   * @description Update node's key by iterator.\n   * @param iter - The iterator you want to change.\n   * @param key - The key you want to update.\n   * @returns Whether the modification is successful.\n   * @example\n   * const st = new orderedSet([1, 2, 5]);\n   * const iter = st.find(2);\n   * st.updateKeyByIterator(iter, 3); // then st will become [1, 3, 5]\n   */\n  updateKeyByIterator(iter: TreeIterator<K, V>, key: K): boolean {\n    const node = iter._node;\n    if (node === this._header) {\n      throwIteratorAccessError();\n    }\n    if (this._length === 1) {\n      node._key = key;\n      return true;\n    }\n    const nextKey = node._next()._key!;\n    if (node === this._header._left) {\n      if (this._cmp(nextKey, key) > 0) {\n        node._key = key;\n        return true;\n      }\n      return false;\n    }\n    const preKey = node._pre()._key!;\n    if (node === this._header._right) {\n      if (this._cmp(preKey, key) < 0) {\n        node._key = key;\n        return true;\n      }\n      return false;\n    }\n    if (\n      this._cmp(preKey, key) >= 0 ||\n      this._cmp(nextKey, key) <= 0\n    ) return false;\n    node._key = key;\n    return true;\n  }\n  eraseElementByPos(pos: number) {\n    $checkWithinAccessParams!(pos, 0, this._length - 1);\n    const node = this._inOrderTraversal(pos);\n    this._eraseNode(node);\n    return this._length;\n  }\n  /**\n   * @description Remove the element of the specified key.\n   * @param key - The key you want to remove.\n   * @returns Whether erase successfully.\n   */\n  eraseElementByKey(key: K) {\n    if (this._length === 0) return false;\n    const curNode = this._getTreeNodeByKey(this._root, key);\n    if (curNode === this._header) return false;\n    this._eraseNode(curNode);\n    return true;\n  }\n  eraseElementByIterator(iter: TreeIterator<K, V>) {\n    const node = iter._node;\n    if (node === this._header) {\n      throwIteratorAccessError();\n    }\n    const hasNoRight = node._right === undefined;\n    const isNormal = iter.iteratorType === IteratorType.NORMAL;\n    // For the normal iterator, the `next` node will be swapped to `this` node when has right.\n    if (isNormal) {\n      // So we should move it to next when it's right is null.\n      if (hasNoRight) iter.next();\n    } else {\n      // For the reverse iterator, only when it doesn't have right and has left the `next` node will be swapped.\n      // So when it has right, or it is a leaf node we should move it to `next`.\n      if (!hasNoRight || node._left === undefined) iter.next();\n    }\n    this._eraseNode(node);\n    return iter;\n  }\n  /**\n   * @description Get the height of the tree.\n   * @returns Number about the height of the RB-tree.\n   */\n  getHeight() {\n    if (this._length === 0) return 0;\n    function traversal(curNode: TreeNode<K, V> | undefined): number {\n      if (!curNode) return 0;\n      return Math.max(traversal(curNode._left), traversal(curNode._right)) + 1;\n    }\n    return traversal(this._root);\n  }\n  /**\n   * @param key - The given key you want to compare.\n   * @returns An iterator to the first element less than the given key.\n   */\n  abstract reverseUpperBound(key: K): TreeIterator<K, V>;\n  /**\n   * @description Union the other tree to self.\n   * @param other - The other tree container you want to merge.\n   * @returns The size of the tree after union.\n   */\n  abstract union(other: TreeContainer<K, V>): number;\n  /**\n   * @param key - The given key you want to compare.\n   * @returns An iterator to the first element not greater than the given key.\n   */\n  abstract reverseLowerBound(key: K): TreeIterator<K, V>;\n  /**\n   * @param key - The given key you want to compare.\n   * @returns An iterator to the first element not less than the given key.\n   */\n  abstract lowerBound(key: K): TreeIterator<K, V>;\n  /**\n   * @param key - The given key you want to compare.\n   * @returns An iterator to the first element greater than the given key.\n   */\n  abstract upperBound(key: K): TreeIterator<K, V>;\n}\n\nexport default TreeContainer;\n", "import { TreeNode } from './TreeNode';\nimport type { TreeNodeEnableIndex } from './TreeNode';\nimport { ContainerIterator, IteratorType } from '@/container/ContainerBase';\nimport TreeContainer from '@/container/TreeContainer/Base/index';\nimport { throwIteratorAccessError } from '@/utils/throwError';\n\nabstract class TreeIterator<K, V> extends ContainerIterator<K | [K, V]> {\n  abstract readonly container: TreeContainer<K, V>;\n  /**\n   * @internal\n   */\n  _node: TreeNode<K, V>;\n  /**\n   * @internal\n   */\n  protected _header: TreeNode<K, V>;\n  /**\n   * @internal\n   */\n  protected constructor(\n    node: TreeNode<K, V>,\n    header: TreeNode<K, V>,\n    iteratorType?: IteratorType\n  ) {\n    super(iteratorType);\n    this._node = node;\n    this._header = header;\n    if (this.iteratorType === IteratorType.NORMAL) {\n      this.pre = function () {\n        if (this._node === this._header._left) {\n          throwIteratorAccessError();\n        }\n        this._node = this._node._pre();\n        return this;\n      };\n\n      this.next = function () {\n        if (this._node === this._header) {\n          throwIteratorAccessError();\n        }\n        this._node = this._node._next();\n        return this;\n      };\n    } else {\n      this.pre = function () {\n        if (this._node === this._header._right) {\n          throwIteratorAccessError();\n        }\n        this._node = this._node._next();\n        return this;\n      };\n\n      this.next = function () {\n        if (this._node === this._header) {\n          throwIteratorAccessError();\n        }\n        this._node = this._node._pre();\n        return this;\n      };\n    }\n  }\n  /**\n   * @description Get the sequential index of the iterator in the tree container.<br/>\n   *              <strong>Note:</strong>\n   *              This function only takes effect when the specified tree container `enableIndex = true`.\n   * @returns The index subscript of the node in the tree.\n   * @example\n   * const st = new OrderedSet([1, 2, 3], true);\n   * console.log(st.begin().next().index);  // 1\n   */\n  get index() {\n    let _node = this._node as TreeNodeEnableIndex<K, V>;\n    const root = this._header._parent as TreeNodeEnableIndex<K, V>;\n    if (_node === this._header) {\n      if (root) {\n        return root._subTreeSize - 1;\n      }\n      return 0;\n    }\n    let index = 0;\n    if (_node._left) {\n      index += (_node._left as TreeNodeEnableIndex<K, V>)._subTreeSize;\n    }\n    while (_node !== root) {\n      const _parent = _node._parent as TreeNodeEnableIndex<K, V>;\n      if (_node === _parent._right) {\n        index += 1;\n        if (_parent._left) {\n          index += (_parent._left as TreeNodeEnableIndex<K, V>)._subTreeSize;\n        }\n      }\n      _node = _parent;\n    }\n    return index;\n  }\n  isAccessible() {\n    return this._node !== this._header;\n  }\n  // @ts-ignore\n  pre(): this;\n  // @ts-ignore\n  next(): this;\n}\n\nexport default TreeIterator;\n", "import TreeContainer from './Base';\nimport TreeIterator from './Base/TreeIterator';\nimport { TreeNode } from './Base/TreeNode';\nimport { initContainer, IteratorType } from '@/container/ContainerBase';\nimport $checkWithinAccessParams from '@/utils/checkParams.macro';\nimport { throwIteratorAccessError } from '@/utils/throwError';\n\nclass OrderedMapIterator<K, V> extends TreeIterator<K, V> {\n  container: OrderedMap<K, V>;\n  constructor(\n    node: TreeNode<K, V>,\n    header: TreeNode<K, V>,\n    container: OrderedMap<K, V>,\n    iteratorType?: IteratorType\n  ) {\n    super(node, header, iteratorType);\n    this.container = container;\n  }\n  get pointer() {\n    if (this._node === this._header) {\n      throwIteratorAccessError();\n    }\n    const self = this;\n    return new Proxy(<[K, V]><unknown>[], {\n      get(target, prop: '0' | '1') {\n        if (prop === '0') return self._node._key!;\n        else if (prop === '1') return self._node._value!;\n        target[0] = self._node._key!;\n        target[1] = self._node._value!;\n        return target[prop];\n      },\n      set(_, prop: '1', newValue: V) {\n        if (prop !== '1') {\n          throw new TypeError('prop must be 1');\n        }\n        self._node._value = newValue;\n        return true;\n      }\n    });\n  }\n  copy() {\n    return new OrderedMapIterator<K, V>(\n      this._node,\n      this._header,\n      this.container,\n      this.iteratorType\n    );\n  }\n  // @ts-ignore\n  equals(iter: OrderedMapIterator<K, V>): boolean;\n}\n\nexport type { OrderedMapIterator };\n\nclass OrderedMap<K, V> extends TreeContainer<K, V> {\n  /**\n   * @param container - The initialization container.\n   * @param cmp - The compare function.\n   * @param enableIndex - Whether to enable iterator indexing function.\n   * @example\n   * new OrderedMap();\n   * new OrderedMap([[0, 1], [2, 1]]);\n   * new OrderedMap([[0, 1], [2, 1]], (x, y) => x - y);\n   * new OrderedMap([[0, 1], [2, 1]], (x, y) => x - y, true);\n   */\n  constructor(\n    container: initContainer<[K, V]> = [],\n    cmp?: (x: K, y: K) => number,\n    enableIndex?: boolean\n  ) {\n    super(cmp, enableIndex);\n    const self = this;\n    container.forEach(function (el) {\n      self.setElement(el[0], el[1]);\n    });\n  }\n  begin() {\n    return new OrderedMapIterator<K, V>(this._header._left || this._header, this._header, this);\n  }\n  end() {\n    return new OrderedMapIterator<K, V>(this._header, this._header, this);\n  }\n  rBegin() {\n    return new OrderedMapIterator<K, V>(\n      this._header._right || this._header,\n      this._header,\n      this,\n      IteratorType.REVERSE\n    );\n  }\n  rEnd() {\n    return new OrderedMapIterator<K, V>(this._header, this._header, this, IteratorType.REVERSE);\n  }\n  front() {\n    if (this._length === 0) return;\n    const minNode = this._header._left!;\n    return <[K, V]>[minNode._key, minNode._value];\n  }\n  back() {\n    if (this._length === 0) return;\n    const maxNode = this._header._right!;\n    return <[K, V]>[maxNode._key, maxNode._value];\n  }\n  lowerBound(key: K) {\n    const resNode = this._lowerBound(this._root, key);\n    return new OrderedMapIterator<K, V>(resNode, this._header, this);\n  }\n  upperBound(key: K) {\n    const resNode = this._upperBound(this._root, key);\n    return new OrderedMapIterator<K, V>(resNode, this._header, this);\n  }\n  reverseLowerBound(key: K) {\n    const resNode = this._reverseLowerBound(this._root, key);\n    return new OrderedMapIterator<K, V>(resNode, this._header, this);\n  }\n  reverseUpperBound(key: K) {\n    const resNode = this._reverseUpperBound(this._root, key);\n    return new OrderedMapIterator<K, V>(resNode, this._header, this);\n  }\n  forEach(callback: (element: [K, V], index: number, map: OrderedMap<K, V>) => void) {\n    this._inOrderTraversal(function (node, index, map) {\n      callback(<[K, V]>[node._key, node._value], index, map);\n    });\n  }\n  /**\n   * @description Insert a key-value pair or set value by the given key.\n   * @param key - The key want to insert.\n   * @param value - The value want to set.\n   * @param hint - You can give an iterator hint to improve insertion efficiency.\n   * @return The size of container after setting.\n   * @example\n   * const mp = new OrderedMap([[2, 0], [4, 0], [5, 0]]);\n   * const iter = mp.begin();\n   * mp.setElement(1, 0);\n   * mp.setElement(3, 0, iter);  // give a hint will be faster.\n   */\n  setElement(key: K, value: V, hint?: OrderedMapIterator<K, V>) {\n    return this._set(key, value, hint);\n  }\n  getElementByPos(pos: number) {\n    $checkWithinAccessParams!(pos, 0, this._length - 1);\n    const node = this._inOrderTraversal(pos);\n    return <[K, V]>[node._key, node._value];\n  }\n  find(key: K) {\n    const curNode = this._getTreeNodeByKey(this._root, key);\n    return new OrderedMapIterator<K, V>(curNode, this._header, this);\n  }\n  /**\n   * @description Get the value of the element of the specified key.\n   * @param key - The specified key you want to get.\n   * @example\n   * const val = container.getElementByKey(1);\n   */\n  getElementByKey(key: K) {\n    const curNode = this._getTreeNodeByKey(this._root, key);\n    return curNode._value;\n  }\n  union(other: OrderedMap<K, V>) {\n    const self = this;\n    other.forEach(function (el) {\n      self.setElement(el[0], el[1]);\n    });\n    return this._length;\n  }\n  * [Symbol.iterator]() {\n    const length = this._length;\n    const nodeList = this._inOrderTraversal();\n    for (let i = 0; i < length; ++i) {\n      const node = nodeList[i];\n      yield <[K, V]>[node._key, node._value];\n    }\n  }\n  // @ts-ignore\n  eraseElementByIterator(iter: OrderedMapIterator<K, V>): OrderedMapIterator<K, V>;\n}\n\nexport default OrderedMap;\n", "/*\n * Copyright 2021 gRPC authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n */\n\nimport { ServiceDefinition } from './make-client';\nimport { Server, UntypedServiceImplementation } from './server';\n\ninterface GetServiceDefinition {\n  (): ServiceDefinition;\n}\n\ninterface GetHandlers {\n  (): UntypedServiceImplementation;\n}\n\nconst registeredAdminServices: {\n  getServiceDefinition: GetServiceDefinition;\n  getHandlers: GetHandlers;\n}[] = [];\n\nexport function registerAdminService(\n  getServiceDefinition: GetServiceDefinition,\n  getHandlers: GetHandlers\n) {\n  registeredAdminServices.push({ getServiceDefinition, getHandlers });\n}\n\nexport function addAdminServicesToServer(server: Server): void {\n  for (const { getServiceDefinition, getHandlers } of registeredAdminServices) {\n    server.addService(getServiceDefinition(), getHandlers());\n  }\n}\n", "/*\n * Copyright 2019 gRPC authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n */\n\nimport { EventEmitter } from 'events';\nimport { Duplex, Readable, Writable } from 'stream';\n\nimport { StatusObject, MessageContext } from './call-interface';\nimport { Status } from './constants';\nimport { EmitterAugmentation1 } from './events';\nimport { Metadata } from './metadata';\nimport { ObjectReadable, ObjectWritable, WriteCallback } from './object-stream';\nimport { InterceptingCallInterface } from './client-interceptors';\nimport { AuthContext } from './auth-context';\n\n/**\n * A type extending the built-in Error object with additional fields.\n */\nexport type ServiceError = StatusObject & Error;\n\n/**\n * A base type for all user-facing values returned by client-side method calls.\n */\nexport type SurfaceCall = {\n  call?: InterceptingCallInterface;\n  cancel(): void;\n  getPeer(): string;\n  getAuthContext(): AuthContext | null;\n} & EmitterAugmentation1<'metadata', Metadata> &\n  EmitterAugmentation1<'status', StatusObject> &\n  EventEmitter;\n\n/**\n * A type representing the return value of a unary method call.\n */\nexport type ClientUnaryCall = SurfaceCall;\n\n/**\n * A type representing the return value of a server stream method call.\n */\nexport type ClientReadableStream<ResponseType> = {\n  deserialize: (chunk: Buffer) => ResponseType;\n} & SurfaceCall &\n  ObjectReadable<ResponseType>;\n\n/**\n * A type representing the return value of a client stream method call.\n */\nexport type ClientWritableStream<RequestType> = {\n  serialize: (value: RequestType) => Buffer;\n} & SurfaceCall &\n  ObjectWritable<RequestType>;\n\n/**\n * A type representing the return value of a bidirectional stream method call.\n */\nexport type ClientDuplexStream<RequestType, ResponseType> =\n  ClientWritableStream<RequestType> & ClientReadableStream<ResponseType>;\n\n/**\n * Construct a ServiceError from a StatusObject. This function exists primarily\n * as an attempt to make the error stack trace clearly communicate that the\n * error is not necessarily a problem in gRPC itself.\n * @param status\n */\nexport function callErrorFromStatus(\n  status: StatusObject,\n  callerStack: string\n): ServiceError {\n  const message = `${status.code} ${Status[status.code]}: ${status.details}`;\n  const error = new Error(message);\n  const stack = `${error.stack}\\nfor call at\\n${callerStack}`;\n  return Object.assign(new Error(message), status, { stack });\n}\n\nexport class ClientUnaryCallImpl\n  extends EventEmitter\n  implements ClientUnaryCall\n{\n  public call?: InterceptingCallInterface;\n  constructor() {\n    super();\n  }\n\n  cancel(): void {\n    this.call?.cancelWithStatus(Status.CANCELLED, 'Cancelled on client');\n  }\n\n  getPeer(): string {\n    return this.call?.getPeer() ?? 'unknown';\n  }\n\n  getAuthContext(): AuthContext | null {\n    return this.call?.getAuthContext() ?? null;\n  }\n}\n\nexport class ClientReadableStreamImpl<ResponseType>\n  extends Readable\n  implements ClientReadableStream<ResponseType>\n{\n  public call?: InterceptingCallInterface;\n  constructor(readonly deserialize: (chunk: Buffer) => ResponseType) {\n    super({ objectMode: true });\n  }\n\n  cancel(): void {\n    this.call?.cancelWithStatus(Status.CANCELLED, 'Cancelled on client');\n  }\n\n  getPeer(): string {\n    return this.call?.getPeer() ?? 'unknown';\n  }\n\n  getAuthContext(): AuthContext | null {\n    return this.call?.getAuthContext() ?? null;\n  }\n\n  _read(_size: number): void {\n    this.call?.startRead();\n  }\n}\n\nexport class ClientWritableStreamImpl<RequestType>\n  extends Writable\n  implements ClientWritableStream<RequestType>\n{\n  public call?: InterceptingCallInterface;\n  constructor(readonly serialize: (value: RequestType) => Buffer) {\n    super({ objectMode: true });\n  }\n\n  cancel(): void {\n    this.call?.cancelWithStatus(Status.CANCELLED, 'Cancelled on client');\n  }\n\n  getPeer(): string {\n    return this.call?.getPeer() ?? 'unknown';\n  }\n\n  getAuthContext(): AuthContext | null {\n    return this.call?.getAuthContext() ?? null;\n  }\n\n  _write(chunk: RequestType, encoding: string, cb: WriteCallback) {\n    const context: MessageContext = {\n      callback: cb,\n    };\n    const flags = Number(encoding);\n    if (!Number.isNaN(flags)) {\n      context.flags = flags;\n    }\n    this.call?.sendMessageWithContext(context, chunk);\n  }\n\n  _final(cb: Function) {\n    this.call?.halfClose();\n    cb();\n  }\n}\n\nexport class ClientDuplexStreamImpl<RequestType, ResponseType>\n  extends Duplex\n  implements ClientDuplexStream<RequestType, ResponseType>\n{\n  public call?: InterceptingCallInterface;\n  constructor(\n    readonly serialize: (value: RequestType) => Buffer,\n    readonly deserialize: (chunk: Buffer) => ResponseType\n  ) {\n    super({ objectMode: true });\n  }\n\n  cancel(): void {\n    this.call?.cancelWithStatus(Status.CANCELLED, 'Cancelled on client');\n  }\n\n  getPeer(): string {\n    return this.call?.getPeer() ?? 'unknown';\n  }\n\n  getAuthContext(): AuthContext | null {\n    return this.call?.getAuthContext() ?? null;\n  }\n\n  _read(_size: number): void {\n    this.call?.startRead();\n  }\n\n  _write(chunk: RequestType, encoding: string, cb: WriteCallback) {\n    const context: MessageContext = {\n      callback: cb,\n    };\n    const flags = Number(encoding);\n    if (!Number.isNaN(flags)) {\n      context.flags = flags;\n    }\n    this.call?.sendMessageWithContext(context, chunk);\n  }\n\n  _final(cb: Function) {\n    this.call?.halfClose();\n    cb();\n  }\n}\n", "/*\n * Copyright 2022 gRPC authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n */\n\nimport { AuthContext } from './auth-context';\nimport { CallCredentials } from './call-credentials';\nimport { Status } from './constants';\nimport { Deadline } from './deadline';\nimport { Metadata } from './metadata';\nimport { ServerSurfaceCall } from './server-call';\n\nexport interface CallStreamOptions {\n  deadline: Deadline;\n  flags: number;\n  host: string;\n  parentCall: ServerSurfaceCall | null;\n}\n\nexport type PartialCallStreamOptions = Partial<CallStreamOptions>;\n\nexport interface StatusObject {\n  code: Status;\n  details: string;\n  metadata: Metadata;\n}\n\nexport type PartialStatusObject = Pick<StatusObject, 'code' | 'details'> & {\n  metadata?: Metadata | null | undefined;\n};\n\nexport interface StatusOrOk<T> {\n  ok: true;\n  value: T;\n}\n\nexport interface StatusOrError {\n  ok: false;\n  error: StatusObject;\n}\n\nexport type StatusOr<T> = StatusOrOk<T> | StatusOrError;\n\nexport function statusOrFromValue<T>(value: T): StatusOr<T> {\n  return {\n    ok: true,\n    value: value\n  };\n}\n\nexport function statusOrFromError<T>(error: PartialStatusObject): StatusOr<T> {\n  return {\n    ok: false,\n    error: {\n      ...error,\n      metadata: error.metadata ?? new Metadata()\n    }\n  };\n}\n\nexport const enum WriteFlags {\n  BufferHint = 1,\n  NoCompress = 2,\n  WriteThrough = 4,\n}\n\nexport interface WriteObject {\n  message: Buffer;\n  flags?: number;\n}\n\nexport interface MetadataListener {\n  (metadata: Metadata, next: (metadata: Metadata) => void): void;\n}\n\nexport interface MessageListener {\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  (message: any, next: (message: any) => void): void;\n}\n\nexport interface StatusListener {\n  (status: StatusObject, next: (status: StatusObject) => void): void;\n}\n\nexport interface FullListener {\n  onReceiveMetadata: MetadataListener;\n  onReceiveMessage: MessageListener;\n  onReceiveStatus: StatusListener;\n}\n\nexport type Listener = Partial<FullListener>;\n\n/**\n * An object with methods for handling the responses to a call.\n */\nexport interface InterceptingListener {\n  onReceiveMetadata(metadata: Metadata): void;\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  onReceiveMessage(message: any): void;\n  onReceiveStatus(status: StatusObject): void;\n}\n\nexport function isInterceptingListener(\n  listener: Listener | InterceptingListener\n): listener is InterceptingListener {\n  return (\n    listener.onReceiveMetadata !== undefined &&\n    listener.onReceiveMetadata.length === 1\n  );\n}\n\nexport class InterceptingListenerImpl implements InterceptingListener {\n  private processingMetadata = false;\n  private hasPendingMessage = false;\n  private pendingMessage: any;\n  private processingMessage = false;\n  private pendingStatus: StatusObject | null = null;\n  constructor(\n    private listener: FullListener,\n    private nextListener: InterceptingListener\n  ) {}\n\n  private processPendingMessage() {\n    if (this.hasPendingMessage) {\n      this.nextListener.onReceiveMessage(this.pendingMessage);\n      this.pendingMessage = null;\n      this.hasPendingMessage = false;\n    }\n  }\n\n  private processPendingStatus() {\n    if (this.pendingStatus) {\n      this.nextListener.onReceiveStatus(this.pendingStatus);\n    }\n  }\n\n  onReceiveMetadata(metadata: Metadata): void {\n    this.processingMetadata = true;\n    this.listener.onReceiveMetadata(metadata, metadata => {\n      this.processingMetadata = false;\n      this.nextListener.onReceiveMetadata(metadata);\n      this.processPendingMessage();\n      this.processPendingStatus();\n    });\n  }\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  onReceiveMessage(message: any): void {\n    /* If this listener processes messages asynchronously, the last message may\n     * be reordered with respect to the status */\n    this.processingMessage = true;\n    this.listener.onReceiveMessage(message, msg => {\n      this.processingMessage = false;\n      if (this.processingMetadata) {\n        this.pendingMessage = msg;\n        this.hasPendingMessage = true;\n      } else {\n        this.nextListener.onReceiveMessage(msg);\n        this.processPendingStatus();\n      }\n    });\n  }\n  onReceiveStatus(status: StatusObject): void {\n    this.listener.onReceiveStatus(status, processedStatus => {\n      if (this.processingMetadata || this.processingMessage) {\n        this.pendingStatus = processedStatus;\n      } else {\n        this.nextListener.onReceiveStatus(processedStatus);\n      }\n    });\n  }\n}\n\nexport interface WriteCallback {\n  (error?: Error | null): void;\n}\n\nexport interface MessageContext {\n  callback?: WriteCallback;\n  flags?: number;\n}\n\nexport interface Call {\n  cancelWithStatus(status: Status, details: string): void;\n  getPeer(): string;\n  start(metadata: Metadata, listener: InterceptingListener): void;\n  sendMessageWithContext(context: MessageContext, message: Buffer): void;\n  startRead(): void;\n  halfClose(): void;\n  getCallNumber(): number;\n  setCredentials(credentials: CallCredentials): void;\n  getAuthContext(): AuthContext | null;\n}\n\nexport interface DeadlineInfoProvider {\n  getDeadlineInfo(): string[];\n}\n", "/*\n * Copyright 2019 gRPC authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n */\n\nimport { Metadata } from './metadata';\nimport {\n  StatusObject,\n  Listener,\n  MetadataListener,\n  MessageListener,\n  StatusListener,\n  FullListener,\n  InterceptingListener,\n  InterceptingListenerImpl,\n  isInterceptingListener,\n  MessageContext,\n  Call,\n} from './call-interface';\nimport { Status } from './constants';\nimport { Channel } from './channel';\nimport { CallOptions } from './client';\nimport { ClientMethodDefinition } from './make-client';\nimport { getErrorMessage } from './error';\nimport { AuthContext } from './auth-context';\n\n/**\n * Error class associated with passing both interceptors and interceptor\n * providers to a client constructor or as call options.\n */\nexport class InterceptorConfigurationError extends Error {\n  constructor(message: string) {\n    super(message);\n    this.name = 'InterceptorConfigurationError';\n    Error.captureStackTrace(this, InterceptorConfigurationError);\n  }\n}\n\nexport interface MetadataRequester {\n  (\n    metadata: Metadata,\n    listener: InterceptingListener,\n    next: (\n      metadata: Metadata,\n      listener: InterceptingListener | Listener\n    ) => void\n  ): void;\n}\n\nexport interface MessageRequester {\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  (message: any, next: (message: any) => void): void;\n}\n\nexport interface CloseRequester {\n  (next: () => void): void;\n}\n\nexport interface CancelRequester {\n  (next: () => void): void;\n}\n\n/**\n * An object with methods for intercepting and modifying outgoing call operations.\n */\nexport interface FullRequester {\n  start: MetadataRequester;\n  sendMessage: MessageRequester;\n  halfClose: CloseRequester;\n  cancel: CancelRequester;\n}\n\nexport type Requester = Partial<FullRequester>;\n\nexport class ListenerBuilder {\n  private metadata: MetadataListener | undefined = undefined;\n  private message: MessageListener | undefined = undefined;\n  private status: StatusListener | undefined = undefined;\n\n  withOnReceiveMetadata(onReceiveMetadata: MetadataListener): this {\n    this.metadata = onReceiveMetadata;\n    return this;\n  }\n\n  withOnReceiveMessage(onReceiveMessage: MessageListener): this {\n    this.message = onReceiveMessage;\n    return this;\n  }\n\n  withOnReceiveStatus(onReceiveStatus: StatusListener): this {\n    this.status = onReceiveStatus;\n    return this;\n  }\n\n  build(): Listener {\n    return {\n      onReceiveMetadata: this.metadata,\n      onReceiveMessage: this.message,\n      onReceiveStatus: this.status,\n    };\n  }\n}\n\nexport class RequesterBuilder {\n  private start: MetadataRequester | undefined = undefined;\n  private message: MessageRequester | undefined = undefined;\n  private halfClose: CloseRequester | undefined = undefined;\n  private cancel: CancelRequester | undefined = undefined;\n\n  withStart(start: MetadataRequester): this {\n    this.start = start;\n    return this;\n  }\n\n  withSendMessage(sendMessage: MessageRequester): this {\n    this.message = sendMessage;\n    return this;\n  }\n\n  withHalfClose(halfClose: CloseRequester): this {\n    this.halfClose = halfClose;\n    return this;\n  }\n\n  withCancel(cancel: CancelRequester): this {\n    this.cancel = cancel;\n    return this;\n  }\n\n  build(): Requester {\n    return {\n      start: this.start,\n      sendMessage: this.message,\n      halfClose: this.halfClose,\n      cancel: this.cancel,\n    };\n  }\n}\n\n/**\n * A Listener with a default pass-through implementation of each method. Used\n * for filling out Listeners with some methods omitted.\n */\nconst defaultListener: FullListener = {\n  onReceiveMetadata: (metadata, next) => {\n    next(metadata);\n  },\n  onReceiveMessage: (message, next) => {\n    next(message);\n  },\n  onReceiveStatus: (status, next) => {\n    next(status);\n  },\n};\n\n/**\n * A Requester with a default pass-through implementation of each method. Used\n * for filling out Requesters with some methods omitted.\n */\nconst defaultRequester: FullRequester = {\n  start: (metadata, listener, next) => {\n    next(metadata, listener);\n  },\n  sendMessage: (message, next) => {\n    next(message);\n  },\n  halfClose: next => {\n    next();\n  },\n  cancel: next => {\n    next();\n  },\n};\n\nexport interface InterceptorOptions extends CallOptions {\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  method_definition: ClientMethodDefinition<any, any>;\n}\n\nexport interface InterceptingCallInterface {\n  cancelWithStatus(status: Status, details: string): void;\n  getPeer(): string;\n  start(metadata: Metadata, listener?: Partial<InterceptingListener>): void;\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  sendMessageWithContext(context: MessageContext, message: any): void;\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  sendMessage(message: any): void;\n  startRead(): void;\n  halfClose(): void;\n  getAuthContext(): AuthContext | null;\n}\n\nexport class InterceptingCall implements InterceptingCallInterface {\n  /**\n   * The requester that this InterceptingCall uses to modify outgoing operations\n   */\n  private requester: FullRequester;\n  /**\n   * Indicates that metadata has been passed to the requester's start\n   * method but it has not been passed to the corresponding next callback\n   */\n  private processingMetadata = false;\n  /**\n   * Message context for a pending message that is waiting for\n   */\n  private pendingMessageContext: MessageContext | null = null;\n  private pendingMessage: any;\n  /**\n   * Indicates that a message has been passed to the requester's sendMessage\n   * method but it has not been passed to the corresponding next callback\n   */\n  private processingMessage = false;\n  /**\n   * Indicates that a status was received but could not be propagated because\n   * a message was still being processed.\n   */\n  private pendingHalfClose = false;\n  constructor(\n    private nextCall: InterceptingCallInterface,\n    requester?: Requester\n  ) {\n    if (requester) {\n      this.requester = {\n        start: requester.start ?? defaultRequester.start,\n        sendMessage: requester.sendMessage ?? defaultRequester.sendMessage,\n        halfClose: requester.halfClose ?? defaultRequester.halfClose,\n        cancel: requester.cancel ?? defaultRequester.cancel,\n      };\n    } else {\n      this.requester = defaultRequester;\n    }\n  }\n\n  cancelWithStatus(status: Status, details: string) {\n    this.requester.cancel(() => {\n      this.nextCall.cancelWithStatus(status, details);\n    });\n  }\n\n  getPeer() {\n    return this.nextCall.getPeer();\n  }\n\n  private processPendingMessage() {\n    if (this.pendingMessageContext) {\n      this.nextCall.sendMessageWithContext(\n        this.pendingMessageContext,\n        this.pendingMessage\n      );\n      this.pendingMessageContext = null;\n      this.pendingMessage = null;\n    }\n  }\n\n  private processPendingHalfClose() {\n    if (this.pendingHalfClose) {\n      this.nextCall.halfClose();\n    }\n  }\n\n  start(\n    metadata: Metadata,\n    interceptingListener?: Partial<InterceptingListener>\n  ): void {\n    const fullInterceptingListener: InterceptingListener = {\n      onReceiveMetadata:\n        interceptingListener?.onReceiveMetadata?.bind(interceptingListener) ??\n        (metadata => {}),\n      onReceiveMessage:\n        interceptingListener?.onReceiveMessage?.bind(interceptingListener) ??\n        (message => {}),\n      onReceiveStatus:\n        interceptingListener?.onReceiveStatus?.bind(interceptingListener) ??\n        (status => {}),\n    };\n    this.processingMetadata = true;\n    this.requester.start(metadata, fullInterceptingListener, (md, listener) => {\n      this.processingMetadata = false;\n      let finalInterceptingListener: InterceptingListener;\n      if (isInterceptingListener(listener)) {\n        finalInterceptingListener = listener;\n      } else {\n        const fullListener: FullListener = {\n          onReceiveMetadata:\n            listener.onReceiveMetadata ?? defaultListener.onReceiveMetadata,\n          onReceiveMessage:\n            listener.onReceiveMessage ?? defaultListener.onReceiveMessage,\n          onReceiveStatus:\n            listener.onReceiveStatus ?? defaultListener.onReceiveStatus,\n        };\n        finalInterceptingListener = new InterceptingListenerImpl(\n          fullListener,\n          fullInterceptingListener\n        );\n      }\n      this.nextCall.start(md, finalInterceptingListener);\n      this.processPendingMessage();\n      this.processPendingHalfClose();\n    });\n  }\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  sendMessageWithContext(context: MessageContext, message: any): void {\n    this.processingMessage = true;\n    this.requester.sendMessage(message, finalMessage => {\n      this.processingMessage = false;\n      if (this.processingMetadata) {\n        this.pendingMessageContext = context;\n        this.pendingMessage = message;\n      } else {\n        this.nextCall.sendMessageWithContext(context, finalMessage);\n        this.processPendingHalfClose();\n      }\n    });\n  }\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  sendMessage(message: any): void {\n    this.sendMessageWithContext({}, message);\n  }\n  startRead(): void {\n    this.nextCall.startRead();\n  }\n  halfClose(): void {\n    this.requester.halfClose(() => {\n      if (this.processingMetadata || this.processingMessage) {\n        this.pendingHalfClose = true;\n      } else {\n        this.nextCall.halfClose();\n      }\n    });\n  }\n  getAuthContext(): AuthContext | null {\n    return this.nextCall.getAuthContext();\n  }\n}\n\nfunction getCall(channel: Channel, path: string, options: CallOptions): Call {\n  const deadline = options.deadline ?? Infinity;\n  const host = options.host;\n  const parent = options.parent ?? null;\n  const propagateFlags = options.propagate_flags;\n  const credentials = options.credentials;\n  const call = channel.createCall(path, deadline, host, parent, propagateFlags);\n  if (credentials) {\n    call.setCredentials(credentials);\n  }\n  return call;\n}\n\n/**\n * InterceptingCall implementation that directly owns the underlying Call\n * object and handles serialization and deseraizliation.\n */\nclass BaseInterceptingCall implements InterceptingCallInterface {\n  constructor(\n    protected call: Call,\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    protected methodDefinition: ClientMethodDefinition<any, any>\n  ) {}\n  cancelWithStatus(status: Status, details: string): void {\n    this.call.cancelWithStatus(status, details);\n  }\n  getPeer(): string {\n    return this.call.getPeer();\n  }\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  sendMessageWithContext(context: MessageContext, message: any): void {\n    let serialized: Buffer;\n    try {\n      serialized = this.methodDefinition.requestSerialize(message);\n    } catch (e) {\n      this.call.cancelWithStatus(\n        Status.INTERNAL,\n        `Request message serialization failure: ${getErrorMessage(e)}`\n      );\n      return;\n    }\n    this.call.sendMessageWithContext(context, serialized);\n  }\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  sendMessage(message: any) {\n    this.sendMessageWithContext({}, message);\n  }\n  start(\n    metadata: Metadata,\n    interceptingListener?: Partial<InterceptingListener>\n  ): void {\n    let readError: StatusObject | null = null;\n    this.call.start(metadata, {\n      onReceiveMetadata: metadata => {\n        interceptingListener?.onReceiveMetadata?.(metadata);\n      },\n      onReceiveMessage: message => {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        let deserialized: any;\n        try {\n          deserialized = this.methodDefinition.responseDeserialize(message);\n        } catch (e) {\n          readError = {\n            code: Status.INTERNAL,\n            details: `Response message parsing error: ${getErrorMessage(e)}`,\n            metadata: new Metadata(),\n          };\n          this.call.cancelWithStatus(readError.code, readError.details);\n          return;\n        }\n        interceptingListener?.onReceiveMessage?.(deserialized);\n      },\n      onReceiveStatus: status => {\n        if (readError) {\n          interceptingListener?.onReceiveStatus?.(readError);\n        } else {\n          interceptingListener?.onReceiveStatus?.(status);\n        }\n      },\n    });\n  }\n  startRead() {\n    this.call.startRead();\n  }\n  halfClose(): void {\n    this.call.halfClose();\n  }\n  getAuthContext(): AuthContext | null {\n    return this.call.getAuthContext();\n  }\n}\n\n/**\n * BaseInterceptingCall with special-cased behavior for methods with unary\n * responses.\n */\nclass BaseUnaryInterceptingCall\n  extends BaseInterceptingCall\n  implements InterceptingCallInterface\n{\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  constructor(call: Call, methodDefinition: ClientMethodDefinition<any, any>) {\n    super(call, methodDefinition);\n  }\n  start(metadata: Metadata, listener?: Partial<InterceptingListener>): void {\n    let receivedMessage = false;\n    const wrapperListener: InterceptingListener = {\n      onReceiveMetadata:\n        listener?.onReceiveMetadata?.bind(listener) ?? (metadata => {}),\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      onReceiveMessage: (message: any) => {\n        receivedMessage = true;\n        listener?.onReceiveMessage?.(message);\n      },\n      onReceiveStatus: (status: StatusObject) => {\n        if (!receivedMessage) {\n          listener?.onReceiveMessage?.(null);\n        }\n        listener?.onReceiveStatus?.(status);\n      },\n    };\n    super.start(metadata, wrapperListener);\n    this.call.startRead();\n  }\n}\n\n/**\n * BaseInterceptingCall with special-cased behavior for methods with streaming\n * responses.\n */\nclass BaseStreamingInterceptingCall\n  extends BaseInterceptingCall\n  implements InterceptingCallInterface {}\n\nfunction getBottomInterceptingCall(\n  channel: Channel,\n  options: InterceptorOptions,\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  methodDefinition: ClientMethodDefinition<any, any>\n) {\n  const call = getCall(channel, methodDefinition.path, options);\n  if (methodDefinition.responseStream) {\n    return new BaseStreamingInterceptingCall(call, methodDefinition);\n  } else {\n    return new BaseUnaryInterceptingCall(call, methodDefinition);\n  }\n}\n\nexport interface NextCall {\n  (options: InterceptorOptions): InterceptingCallInterface;\n}\n\nexport interface Interceptor {\n  (options: InterceptorOptions, nextCall: NextCall): InterceptingCall;\n}\n\nexport interface InterceptorProvider {\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  (methodDefinition: ClientMethodDefinition<any, any>): Interceptor;\n}\n\nexport interface InterceptorArguments {\n  clientInterceptors: Interceptor[];\n  clientInterceptorProviders: InterceptorProvider[];\n  callInterceptors: Interceptor[];\n  callInterceptorProviders: InterceptorProvider[];\n}\n\nexport function getInterceptingCall(\n  interceptorArgs: InterceptorArguments,\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  methodDefinition: ClientMethodDefinition<any, any>,\n  options: CallOptions,\n  channel: Channel\n): InterceptingCallInterface {\n  if (\n    interceptorArgs.clientInterceptors.length > 0 &&\n    interceptorArgs.clientInterceptorProviders.length > 0\n  ) {\n    throw new InterceptorConfigurationError(\n      'Both interceptors and interceptor_providers were passed as options ' +\n        'to the client constructor. Only one of these is allowed.'\n    );\n  }\n  if (\n    interceptorArgs.callInterceptors.length > 0 &&\n    interceptorArgs.callInterceptorProviders.length > 0\n  ) {\n    throw new InterceptorConfigurationError(\n      'Both interceptors and interceptor_providers were passed as call ' +\n        'options. Only one of these is allowed.'\n    );\n  }\n  let interceptors: Interceptor[] = [];\n  // Interceptors passed to the call override interceptors passed to the client constructor\n  if (\n    interceptorArgs.callInterceptors.length > 0 ||\n    interceptorArgs.callInterceptorProviders.length > 0\n  ) {\n    interceptors = ([] as Interceptor[])\n      .concat(\n        interceptorArgs.callInterceptors,\n        interceptorArgs.callInterceptorProviders.map(provider =>\n          provider(methodDefinition)\n        )\n      )\n      .filter(interceptor => interceptor);\n    // Filter out falsy values when providers return nothing\n  } else {\n    interceptors = ([] as Interceptor[])\n      .concat(\n        interceptorArgs.clientInterceptors,\n        interceptorArgs.clientInterceptorProviders.map(provider =>\n          provider(methodDefinition)\n        )\n      )\n      .filter(interceptor => interceptor);\n    // Filter out falsy values when providers return nothing\n  }\n  const interceptorOptions = Object.assign({}, options, {\n    method_definition: methodDefinition,\n  });\n  /* For each interceptor in the list, the nextCall function passed to it is\n   * based on the next interceptor in the list, using a nextCall function\n   * constructed with the following interceptor in the list, and so on. The\n   * initialValue, which is effectively at the end of the list, is a nextCall\n   * function that invokes getBottomInterceptingCall, the result of which\n   * handles (de)serialization and also gets the underlying call from the\n   * channel. */\n  const getCall: NextCall = interceptors.reduceRight<NextCall>(\n    (nextCall: NextCall, nextInterceptor: Interceptor) => {\n      return currentOptions => nextInterceptor(currentOptions, nextCall);\n    },\n    (finalOptions: InterceptorOptions) =>\n      getBottomInterceptingCall(channel, finalOptions, methodDefinition)\n  );\n  return getCall(interceptorOptions);\n}\n", "/*\n * Copyright 2019 gRPC authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n */\n\nimport {\n  ClientDuplexStream,\n  ClientDuplexStreamImpl,\n  ClientReadableStream,\n  ClientReadableStreamImpl,\n  ClientUnaryCall,\n  ClientUnaryCallImpl,\n  ClientWritableStream,\n  ClientWritableStreamImpl,\n  ServiceError,\n  callErrorFromStatus,\n  SurfaceCall,\n} from './call';\nimport { CallCredentials } from './call-credentials';\nimport { StatusObject } from './call-interface';\nimport { Channel, ChannelImplementation } from './channel';\nimport { ConnectivityState } from './connectivity-state';\nimport { ChannelCredentials } from './channel-credentials';\nimport { ChannelOptions } from './channel-options';\nimport { Status } from './constants';\nimport { Metadata } from './metadata';\nimport { ClientMethodDefinition } from './make-client';\nimport {\n  getInterceptingCall,\n  Interceptor,\n  InterceptorProvider,\n  InterceptorArguments,\n  InterceptingCallInterface,\n} from './client-interceptors';\nimport {\n  ServerUnaryCall,\n  ServerReadableStream,\n  ServerWritableStream,\n  ServerDuplexStream,\n} from './server-call';\nimport { Deadline } from './deadline';\n\nconst CHANNEL_SYMBOL = Symbol();\nconst INTERCEPTOR_SYMBOL = Symbol();\nconst INTERCEPTOR_PROVIDER_SYMBOL = Symbol();\nconst CALL_INVOCATION_TRANSFORMER_SYMBOL = Symbol();\n\nfunction isFunction<ResponseType>(\n  arg: Metadata | CallOptions | UnaryCallback<ResponseType> | undefined\n): arg is UnaryCallback<ResponseType> {\n  return typeof arg === 'function';\n}\n\nexport interface UnaryCallback<ResponseType> {\n  (err: ServiceError | null, value?: ResponseType): void;\n}\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\nexport interface CallOptions {\n  deadline?: Deadline;\n  host?: string;\n  parent?:\n    | ServerUnaryCall<any, any>\n    | ServerReadableStream<any, any>\n    | ServerWritableStream<any, any>\n    | ServerDuplexStream<any, any>;\n  propagate_flags?: number;\n  credentials?: CallCredentials;\n  interceptors?: Interceptor[];\n  interceptor_providers?: InterceptorProvider[];\n}\n/* eslint-enable @typescript-eslint/no-explicit-any */\n\nexport interface CallProperties<RequestType, ResponseType> {\n  argument?: RequestType;\n  metadata: Metadata;\n  call: SurfaceCall;\n  channel: Channel;\n  methodDefinition: ClientMethodDefinition<RequestType, ResponseType>;\n  callOptions: CallOptions;\n  callback?: UnaryCallback<ResponseType>;\n}\n\nexport interface CallInvocationTransformer {\n  (callProperties: CallProperties<any, any>): CallProperties<any, any>; // eslint-disable-line @typescript-eslint/no-explicit-any\n}\n\nexport type ClientOptions = Partial<ChannelOptions> & {\n  channelOverride?: Channel;\n  channelFactoryOverride?: (\n    address: string,\n    credentials: ChannelCredentials,\n    options: ClientOptions\n  ) => Channel;\n  interceptors?: Interceptor[];\n  interceptor_providers?: InterceptorProvider[];\n  callInvocationTransformer?: CallInvocationTransformer;\n};\n\nfunction getErrorStackString(error: Error): string {\n  return error.stack?.split('\\n').slice(1).join('\\n') || 'no stack trace available';\n}\n\n/**\n * A generic gRPC client. Primarily useful as a base class for all generated\n * clients.\n */\nexport class Client {\n  private readonly [CHANNEL_SYMBOL]: Channel;\n  private readonly [INTERCEPTOR_SYMBOL]: Interceptor[];\n  private readonly [INTERCEPTOR_PROVIDER_SYMBOL]: InterceptorProvider[];\n  private readonly [CALL_INVOCATION_TRANSFORMER_SYMBOL]?: CallInvocationTransformer;\n  constructor(\n    address: string,\n    credentials: ChannelCredentials,\n    options: ClientOptions = {}\n  ) {\n    options = Object.assign({}, options);\n    this[INTERCEPTOR_SYMBOL] = options.interceptors ?? [];\n    delete options.interceptors;\n    this[INTERCEPTOR_PROVIDER_SYMBOL] = options.interceptor_providers ?? [];\n    delete options.interceptor_providers;\n    if (\n      this[INTERCEPTOR_SYMBOL].length > 0 &&\n      this[INTERCEPTOR_PROVIDER_SYMBOL].length > 0\n    ) {\n      throw new Error(\n        'Both interceptors and interceptor_providers were passed as options ' +\n          'to the client constructor. Only one of these is allowed.'\n      );\n    }\n    this[CALL_INVOCATION_TRANSFORMER_SYMBOL] =\n      options.callInvocationTransformer;\n    delete options.callInvocationTransformer;\n    if (options.channelOverride) {\n      this[CHANNEL_SYMBOL] = options.channelOverride;\n    } else if (options.channelFactoryOverride) {\n      const channelFactoryOverride = options.channelFactoryOverride;\n      delete options.channelFactoryOverride;\n      this[CHANNEL_SYMBOL] = channelFactoryOverride(\n        address,\n        credentials,\n        options\n      );\n    } else {\n      this[CHANNEL_SYMBOL] = new ChannelImplementation(\n        address,\n        credentials,\n        options\n      );\n    }\n  }\n\n  close(): void {\n    this[CHANNEL_SYMBOL].close();\n  }\n\n  getChannel(): Channel {\n    return this[CHANNEL_SYMBOL];\n  }\n\n  waitForReady(deadline: Deadline, callback: (error?: Error) => void): void {\n    const checkState = (err?: Error) => {\n      if (err) {\n        callback(new Error('Failed to connect before the deadline'));\n        return;\n      }\n      let newState;\n      try {\n        newState = this[CHANNEL_SYMBOL].getConnectivityState(true);\n      } catch (e) {\n        callback(new Error('The channel has been closed'));\n        return;\n      }\n      if (newState === ConnectivityState.READY) {\n        callback();\n      } else {\n        try {\n          this[CHANNEL_SYMBOL].watchConnectivityState(\n            newState,\n            deadline,\n            checkState\n          );\n        } catch (e) {\n          callback(new Error('The channel has been closed'));\n        }\n      }\n    };\n    setImmediate(checkState);\n  }\n\n  private checkOptionalUnaryResponseArguments<ResponseType>(\n    arg1: Metadata | CallOptions | UnaryCallback<ResponseType>,\n    arg2?: CallOptions | UnaryCallback<ResponseType>,\n    arg3?: UnaryCallback<ResponseType>\n  ): {\n    metadata: Metadata;\n    options: CallOptions;\n    callback: UnaryCallback<ResponseType>;\n  } {\n    if (isFunction(arg1)) {\n      return { metadata: new Metadata(), options: {}, callback: arg1 };\n    } else if (isFunction(arg2)) {\n      if (arg1 instanceof Metadata) {\n        return { metadata: arg1, options: {}, callback: arg2 };\n      } else {\n        return { metadata: new Metadata(), options: arg1, callback: arg2 };\n      }\n    } else {\n      if (\n        !(\n          arg1 instanceof Metadata &&\n          arg2 instanceof Object &&\n          isFunction(arg3)\n        )\n      ) {\n        throw new Error('Incorrect arguments passed');\n      }\n      return { metadata: arg1, options: arg2, callback: arg3 };\n    }\n  }\n\n  makeUnaryRequest<RequestType, ResponseType>(\n    method: string,\n    serialize: (value: RequestType) => Buffer,\n    deserialize: (value: Buffer) => ResponseType,\n    argument: RequestType,\n    metadata: Metadata,\n    options: CallOptions,\n    callback: UnaryCallback<ResponseType>\n  ): ClientUnaryCall;\n  makeUnaryRequest<RequestType, ResponseType>(\n    method: string,\n    serialize: (value: RequestType) => Buffer,\n    deserialize: (value: Buffer) => ResponseType,\n    argument: RequestType,\n    metadata: Metadata,\n    callback: UnaryCallback<ResponseType>\n  ): ClientUnaryCall;\n  makeUnaryRequest<RequestType, ResponseType>(\n    method: string,\n    serialize: (value: RequestType) => Buffer,\n    deserialize: (value: Buffer) => ResponseType,\n    argument: RequestType,\n    options: CallOptions,\n    callback: UnaryCallback<ResponseType>\n  ): ClientUnaryCall;\n  makeUnaryRequest<RequestType, ResponseType>(\n    method: string,\n    serialize: (value: RequestType) => Buffer,\n    deserialize: (value: Buffer) => ResponseType,\n    argument: RequestType,\n    callback: UnaryCallback<ResponseType>\n  ): ClientUnaryCall;\n  makeUnaryRequest<RequestType, ResponseType>(\n    method: string,\n    serialize: (value: RequestType) => Buffer,\n    deserialize: (value: Buffer) => ResponseType,\n    argument: RequestType,\n    metadata: Metadata | CallOptions | UnaryCallback<ResponseType>,\n    options?: CallOptions | UnaryCallback<ResponseType>,\n    callback?: UnaryCallback<ResponseType>\n  ): ClientUnaryCall {\n    const checkedArguments =\n      this.checkOptionalUnaryResponseArguments<ResponseType>(\n        metadata,\n        options,\n        callback\n      );\n    const methodDefinition: ClientMethodDefinition<RequestType, ResponseType> =\n      {\n        path: method,\n        requestStream: false,\n        responseStream: false,\n        requestSerialize: serialize,\n        responseDeserialize: deserialize,\n      };\n    let callProperties: CallProperties<RequestType, ResponseType> = {\n      argument: argument,\n      metadata: checkedArguments.metadata,\n      call: new ClientUnaryCallImpl(),\n      channel: this[CHANNEL_SYMBOL],\n      methodDefinition: methodDefinition,\n      callOptions: checkedArguments.options,\n      callback: checkedArguments.callback,\n    };\n    if (this[CALL_INVOCATION_TRANSFORMER_SYMBOL]) {\n      callProperties = this[CALL_INVOCATION_TRANSFORMER_SYMBOL]!(\n        callProperties\n      ) as CallProperties<RequestType, ResponseType>;\n    }\n    const emitter: ClientUnaryCall = callProperties.call;\n    const interceptorArgs: InterceptorArguments = {\n      clientInterceptors: this[INTERCEPTOR_SYMBOL],\n      clientInterceptorProviders: this[INTERCEPTOR_PROVIDER_SYMBOL],\n      callInterceptors: callProperties.callOptions.interceptors ?? [],\n      callInterceptorProviders:\n        callProperties.callOptions.interceptor_providers ?? [],\n    };\n    const call: InterceptingCallInterface = getInterceptingCall(\n      interceptorArgs,\n      callProperties.methodDefinition,\n      callProperties.callOptions,\n      callProperties.channel\n    );\n    /* This needs to happen before the emitter is used. Unfortunately we can't\n     * enforce this with the type system. We need to construct this emitter\n     * before calling the CallInvocationTransformer, and we need to create the\n     * call after that. */\n    emitter.call = call;\n    let responseMessage: ResponseType | null = null;\n    let receivedStatus = false;\n    let callerStackError: Error | null = new Error();\n    call.start(callProperties.metadata, {\n      onReceiveMetadata: metadata => {\n        emitter.emit('metadata', metadata);\n      },\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      onReceiveMessage(message: any) {\n        if (responseMessage !== null) {\n          call.cancelWithStatus(Status.UNIMPLEMENTED, 'Too many responses received');\n        }\n        responseMessage = message;\n      },\n      onReceiveStatus(status: StatusObject) {\n        if (receivedStatus) {\n          return;\n        }\n        receivedStatus = true;\n        if (status.code === Status.OK) {\n          if (responseMessage === null) {\n            const callerStack = getErrorStackString(callerStackError!);\n            callProperties.callback!(\n              callErrorFromStatus(\n                {\n                  code: Status.UNIMPLEMENTED,\n                  details: 'No message received',\n                  metadata: status.metadata,\n                },\n                callerStack\n              )\n            );\n          } else {\n            callProperties.callback!(null, responseMessage);\n          }\n        } else {\n          const callerStack = getErrorStackString(callerStackError!);\n          callProperties.callback!(callErrorFromStatus(status, callerStack));\n        }\n        /* Avoid retaining the callerStackError object in the call context of\n         * the status event handler. */\n        callerStackError = null;\n        emitter.emit('status', status);\n      },\n    });\n    call.sendMessage(argument);\n    call.halfClose();\n    return emitter;\n  }\n\n  makeClientStreamRequest<RequestType, ResponseType>(\n    method: string,\n    serialize: (value: RequestType) => Buffer,\n    deserialize: (value: Buffer) => ResponseType,\n    metadata: Metadata,\n    options: CallOptions,\n    callback: UnaryCallback<ResponseType>\n  ): ClientWritableStream<RequestType>;\n  makeClientStreamRequest<RequestType, ResponseType>(\n    method: string,\n    serialize: (value: RequestType) => Buffer,\n    deserialize: (value: Buffer) => ResponseType,\n    metadata: Metadata,\n    callback: UnaryCallback<ResponseType>\n  ): ClientWritableStream<RequestType>;\n  makeClientStreamRequest<RequestType, ResponseType>(\n    method: string,\n    serialize: (value: RequestType) => Buffer,\n    deserialize: (value: Buffer) => ResponseType,\n    options: CallOptions,\n    callback: UnaryCallback<ResponseType>\n  ): ClientWritableStream<RequestType>;\n  makeClientStreamRequest<RequestType, ResponseType>(\n    method: string,\n    serialize: (value: RequestType) => Buffer,\n    deserialize: (value: Buffer) => ResponseType,\n    callback: UnaryCallback<ResponseType>\n  ): ClientWritableStream<RequestType>;\n  makeClientStreamRequest<RequestType, ResponseType>(\n    method: string,\n    serialize: (value: RequestType) => Buffer,\n    deserialize: (value: Buffer) => ResponseType,\n    metadata: Metadata | CallOptions | UnaryCallback<ResponseType>,\n    options?: CallOptions | UnaryCallback<ResponseType>,\n    callback?: UnaryCallback<ResponseType>\n  ): ClientWritableStream<RequestType> {\n    const checkedArguments =\n      this.checkOptionalUnaryResponseArguments<ResponseType>(\n        metadata,\n        options,\n        callback\n      );\n    const methodDefinition: ClientMethodDefinition<RequestType, ResponseType> =\n      {\n        path: method,\n        requestStream: true,\n        responseStream: false,\n        requestSerialize: serialize,\n        responseDeserialize: deserialize,\n      };\n    let callProperties: CallProperties<RequestType, ResponseType> = {\n      metadata: checkedArguments.metadata,\n      call: new ClientWritableStreamImpl<RequestType>(serialize),\n      channel: this[CHANNEL_SYMBOL],\n      methodDefinition: methodDefinition,\n      callOptions: checkedArguments.options,\n      callback: checkedArguments.callback,\n    };\n    if (this[CALL_INVOCATION_TRANSFORMER_SYMBOL]) {\n      callProperties = this[CALL_INVOCATION_TRANSFORMER_SYMBOL]!(\n        callProperties\n      ) as CallProperties<RequestType, ResponseType>;\n    }\n    const emitter: ClientWritableStream<RequestType> =\n      callProperties.call as ClientWritableStream<RequestType>;\n    const interceptorArgs: InterceptorArguments = {\n      clientInterceptors: this[INTERCEPTOR_SYMBOL],\n      clientInterceptorProviders: this[INTERCEPTOR_PROVIDER_SYMBOL],\n      callInterceptors: callProperties.callOptions.interceptors ?? [],\n      callInterceptorProviders:\n        callProperties.callOptions.interceptor_providers ?? [],\n    };\n    const call: InterceptingCallInterface = getInterceptingCall(\n      interceptorArgs,\n      callProperties.methodDefinition,\n      callProperties.callOptions,\n      callProperties.channel\n    );\n    /* This needs to happen before the emitter is used. Unfortunately we can't\n     * enforce this with the type system. We need to construct this emitter\n     * before calling the CallInvocationTransformer, and we need to create the\n     * call after that. */\n    emitter.call = call;\n    let responseMessage: ResponseType | null = null;\n    let receivedStatus = false;\n    let callerStackError: Error | null = new Error();\n    call.start(callProperties.metadata, {\n      onReceiveMetadata: metadata => {\n        emitter.emit('metadata', metadata);\n      },\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      onReceiveMessage(message: any) {\n        if (responseMessage !== null) {\n          call.cancelWithStatus(Status.UNIMPLEMENTED, 'Too many responses received');\n        }\n        responseMessage = message;\n        call.startRead();\n      },\n      onReceiveStatus(status: StatusObject) {\n        if (receivedStatus) {\n          return;\n        }\n        receivedStatus = true;\n        if (status.code === Status.OK) {\n          if (responseMessage === null) {\n            const callerStack = getErrorStackString(callerStackError!);\n            callProperties.callback!(\n              callErrorFromStatus(\n                {\n                  code: Status.UNIMPLEMENTED,\n                  details: 'No message received',\n                  metadata: status.metadata,\n                },\n                callerStack\n              )\n            );\n          } else {\n            callProperties.callback!(null, responseMessage);\n          }\n        } else {\n          const callerStack = getErrorStackString(callerStackError!);\n          callProperties.callback!(callErrorFromStatus(status, callerStack));\n        }\n        /* Avoid retaining the callerStackError object in the call context of\n         * the status event handler. */\n        callerStackError = null;\n        emitter.emit('status', status);\n      },\n    });\n    return emitter;\n  }\n\n  private checkMetadataAndOptions(\n    arg1?: Metadata | CallOptions,\n    arg2?: CallOptions\n  ): { metadata: Metadata; options: CallOptions } {\n    let metadata: Metadata;\n    let options: CallOptions;\n    if (arg1 instanceof Metadata) {\n      metadata = arg1;\n      if (arg2) {\n        options = arg2;\n      } else {\n        options = {};\n      }\n    } else {\n      if (arg1) {\n        options = arg1;\n      } else {\n        options = {};\n      }\n      metadata = new Metadata();\n    }\n    return { metadata, options };\n  }\n\n  makeServerStreamRequest<RequestType, ResponseType>(\n    method: string,\n    serialize: (value: RequestType) => Buffer,\n    deserialize: (value: Buffer) => ResponseType,\n    argument: RequestType,\n    metadata: Metadata,\n    options?: CallOptions\n  ): ClientReadableStream<ResponseType>;\n  makeServerStreamRequest<RequestType, ResponseType>(\n    method: string,\n    serialize: (value: RequestType) => Buffer,\n    deserialize: (value: Buffer) => ResponseType,\n    argument: RequestType,\n    options?: CallOptions\n  ): ClientReadableStream<ResponseType>;\n  makeServerStreamRequest<RequestType, ResponseType>(\n    method: string,\n    serialize: (value: RequestType) => Buffer,\n    deserialize: (value: Buffer) => ResponseType,\n    argument: RequestType,\n    metadata?: Metadata | CallOptions,\n    options?: CallOptions\n  ): ClientReadableStream<ResponseType> {\n    const checkedArguments = this.checkMetadataAndOptions(metadata, options);\n    const methodDefinition: ClientMethodDefinition<RequestType, ResponseType> =\n      {\n        path: method,\n        requestStream: false,\n        responseStream: true,\n        requestSerialize: serialize,\n        responseDeserialize: deserialize,\n      };\n    let callProperties: CallProperties<RequestType, ResponseType> = {\n      argument: argument,\n      metadata: checkedArguments.metadata,\n      call: new ClientReadableStreamImpl<ResponseType>(deserialize),\n      channel: this[CHANNEL_SYMBOL],\n      methodDefinition: methodDefinition,\n      callOptions: checkedArguments.options,\n    };\n    if (this[CALL_INVOCATION_TRANSFORMER_SYMBOL]) {\n      callProperties = this[CALL_INVOCATION_TRANSFORMER_SYMBOL]!(\n        callProperties\n      ) as CallProperties<RequestType, ResponseType>;\n    }\n    const stream: ClientReadableStream<ResponseType> =\n      callProperties.call as ClientReadableStream<ResponseType>;\n    const interceptorArgs: InterceptorArguments = {\n      clientInterceptors: this[INTERCEPTOR_SYMBOL],\n      clientInterceptorProviders: this[INTERCEPTOR_PROVIDER_SYMBOL],\n      callInterceptors: callProperties.callOptions.interceptors ?? [],\n      callInterceptorProviders:\n        callProperties.callOptions.interceptor_providers ?? [],\n    };\n    const call: InterceptingCallInterface = getInterceptingCall(\n      interceptorArgs,\n      callProperties.methodDefinition,\n      callProperties.callOptions,\n      callProperties.channel\n    );\n    /* This needs to happen before the emitter is used. Unfortunately we can't\n     * enforce this with the type system. We need to construct this emitter\n     * before calling the CallInvocationTransformer, and we need to create the\n     * call after that. */\n    stream.call = call;\n    let receivedStatus = false;\n    let callerStackError: Error | null = new Error();\n    call.start(callProperties.metadata, {\n      onReceiveMetadata(metadata: Metadata) {\n        stream.emit('metadata', metadata);\n      },\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      onReceiveMessage(message: any) {\n        stream.push(message);\n      },\n      onReceiveStatus(status: StatusObject) {\n        if (receivedStatus) {\n          return;\n        }\n        receivedStatus = true;\n        stream.push(null);\n        if (status.code !== Status.OK) {\n          const callerStack = getErrorStackString(callerStackError!);\n          stream.emit('error', callErrorFromStatus(status, callerStack));\n        }\n        /* Avoid retaining the callerStackError object in the call context of\n         * the status event handler. */\n        callerStackError = null;\n        stream.emit('status', status);\n      },\n    });\n    call.sendMessage(argument);\n    call.halfClose();\n    return stream;\n  }\n\n  makeBidiStreamRequest<RequestType, ResponseType>(\n    method: string,\n    serialize: (value: RequestType) => Buffer,\n    deserialize: (value: Buffer) => ResponseType,\n    metadata: Metadata,\n    options?: CallOptions\n  ): ClientDuplexStream<RequestType, ResponseType>;\n  makeBidiStreamRequest<RequestType, ResponseType>(\n    method: string,\n    serialize: (value: RequestType) => Buffer,\n    deserialize: (value: Buffer) => ResponseType,\n    options?: CallOptions\n  ): ClientDuplexStream<RequestType, ResponseType>;\n  makeBidiStreamRequest<RequestType, ResponseType>(\n    method: string,\n    serialize: (value: RequestType) => Buffer,\n    deserialize: (value: Buffer) => ResponseType,\n    metadata?: Metadata | CallOptions,\n    options?: CallOptions\n  ): ClientDuplexStream<RequestType, ResponseType> {\n    const checkedArguments = this.checkMetadataAndOptions(metadata, options);\n    const methodDefinition: ClientMethodDefinition<RequestType, ResponseType> =\n      {\n        path: method,\n        requestStream: true,\n        responseStream: true,\n        requestSerialize: serialize,\n        responseDeserialize: deserialize,\n      };\n    let callProperties: CallProperties<RequestType, ResponseType> = {\n      metadata: checkedArguments.metadata,\n      call: new ClientDuplexStreamImpl<RequestType, ResponseType>(\n        serialize,\n        deserialize\n      ),\n      channel: this[CHANNEL_SYMBOL],\n      methodDefinition: methodDefinition,\n      callOptions: checkedArguments.options,\n    };\n    if (this[CALL_INVOCATION_TRANSFORMER_SYMBOL]) {\n      callProperties = this[CALL_INVOCATION_TRANSFORMER_SYMBOL]!(\n        callProperties\n      ) as CallProperties<RequestType, ResponseType>;\n    }\n    const stream: ClientDuplexStream<RequestType, ResponseType> =\n      callProperties.call as ClientDuplexStream<RequestType, ResponseType>;\n    const interceptorArgs: InterceptorArguments = {\n      clientInterceptors: this[INTERCEPTOR_SYMBOL],\n      clientInterceptorProviders: this[INTERCEPTOR_PROVIDER_SYMBOL],\n      callInterceptors: callProperties.callOptions.interceptors ?? [],\n      callInterceptorProviders:\n        callProperties.callOptions.interceptor_providers ?? [],\n    };\n    const call: InterceptingCallInterface = getInterceptingCall(\n      interceptorArgs,\n      callProperties.methodDefinition,\n      callProperties.callOptions,\n      callProperties.channel\n    );\n    /* This needs to happen before the emitter is used. Unfortunately we can't\n     * enforce this with the type system. We need to construct this emitter\n     * before calling the CallInvocationTransformer, and we need to create the\n     * call after that. */\n    stream.call = call;\n    let receivedStatus = false;\n    let callerStackError: Error | null = new Error();\n    call.start(callProperties.metadata, {\n      onReceiveMetadata(metadata: Metadata) {\n        stream.emit('metadata', metadata);\n      },\n      onReceiveMessage(message: Buffer) {\n        stream.push(message);\n      },\n      onReceiveStatus(status: StatusObject) {\n        if (receivedStatus) {\n          return;\n        }\n        receivedStatus = true;\n        stream.push(null);\n        if (status.code !== Status.OK) {\n          const callerStack = getErrorStackString(callerStackError!);\n          stream.emit('error', callErrorFromStatus(status, callerStack));\n        }\n        /* Avoid retaining the callerStackError object in the call context of\n         * the status event handler. */\n        callerStackError = null;\n        stream.emit('status', status);\n      },\n    });\n    return stream;\n  }\n}\n", "/*\n * Copyright 2019 gRPC authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n */\n\nimport { ChannelCredentials } from './channel-credentials';\nimport { ChannelOptions } from './channel-options';\nimport { Client } from './client';\nimport { UntypedServiceImplementation } from './server';\n\nexport interface Serialize<T> {\n  (value: T): Buffer;\n}\n\nexport interface Deserialize<T> {\n  (bytes: Buffer): T;\n}\n\nexport interface ClientMethodDefinition<RequestType, ResponseType> {\n  path: string;\n  requestStream: boolean;\n  responseStream: boolean;\n  requestSerialize: Serialize<RequestType>;\n  responseDeserialize: Deserialize<ResponseType>;\n  originalName?: string;\n}\n\nexport interface ServerMethodDefinition<RequestType, ResponseType> {\n  path: string;\n  requestStream: boolean;\n  responseStream: boolean;\n  responseSerialize: Serialize<ResponseType>;\n  requestDeserialize: Deserialize<RequestType>;\n  originalName?: string;\n}\n\nexport interface MethodDefinition<RequestType, ResponseType>\n  extends ClientMethodDefinition<RequestType, ResponseType>,\n    ServerMethodDefinition<RequestType, ResponseType> {}\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\nexport type ServiceDefinition<\n  ImplementationType = UntypedServiceImplementation\n> = {\n  readonly [index in keyof ImplementationType]: MethodDefinition<any, any>;\n};\n/* eslint-enable @typescript-eslint/no-explicit-any */\n\nexport interface ProtobufTypeDefinition {\n  format: string;\n  type: object;\n  fileDescriptorProtos: Buffer[];\n}\n\nexport interface PackageDefinition {\n  [index: string]: ServiceDefinition | ProtobufTypeDefinition;\n}\n\n/**\n * Map with short names for each of the requester maker functions. Used in\n * makeClientConstructor\n * @private\n */\nconst requesterFuncs = {\n  unary: Client.prototype.makeUnaryRequest,\n  server_stream: Client.prototype.makeServerStreamRequest,\n  client_stream: Client.prototype.makeClientStreamRequest,\n  bidi: Client.prototype.makeBidiStreamRequest,\n};\n\nexport interface ServiceClient extends Client {\n  [methodName: string]: Function;\n}\n\nexport interface ServiceClientConstructor {\n  new (\n    address: string,\n    credentials: ChannelCredentials,\n    options?: Partial<ChannelOptions>\n  ): ServiceClient;\n  service: ServiceDefinition;\n  serviceName: string;\n}\n\n/**\n * Returns true, if given key is included in the blacklisted\n * keys.\n * @param key key for check, string.\n */\nfunction isPrototypePolluted(key: string): boolean {\n  return ['__proto__', 'prototype', 'constructor'].includes(key);\n}\n\n/**\n * Creates a constructor for a client with the given methods, as specified in\n * the methods argument. The resulting class will have an instance method for\n * each method in the service, which is a partial application of one of the\n * [Client]{@link grpc.Client} request methods, depending on `requestSerialize`\n * and `responseSerialize`, with the `method`, `serialize`, and `deserialize`\n * arguments predefined.\n * @param methods An object mapping method names to\n *     method attributes\n * @param serviceName The fully qualified name of the service\n * @param classOptions An options object.\n * @return New client constructor, which is a subclass of\n *     {@link grpc.Client}, and has the same arguments as that constructor.\n */\nexport function makeClientConstructor(\n  methods: ServiceDefinition,\n  serviceName: string,\n  classOptions?: {}\n): ServiceClientConstructor {\n  if (!classOptions) {\n    classOptions = {};\n  }\n\n  class ServiceClientImpl extends Client implements ServiceClient {\n    static service: ServiceDefinition;\n    static serviceName: string;\n    [methodName: string]: Function;\n  }\n\n  Object.keys(methods).forEach(name => {\n    if (isPrototypePolluted(name)) {\n      return;\n    }\n    const attrs = methods[name];\n    let methodType: keyof typeof requesterFuncs;\n    // TODO(murgatroid99): Verify that we don't need this anymore\n    if (typeof name === 'string' && name.charAt(0) === '$') {\n      throw new Error('Method names cannot start with $');\n    }\n    if (attrs.requestStream) {\n      if (attrs.responseStream) {\n        methodType = 'bidi';\n      } else {\n        methodType = 'client_stream';\n      }\n    } else {\n      if (attrs.responseStream) {\n        methodType = 'server_stream';\n      } else {\n        methodType = 'unary';\n      }\n    }\n    const serialize = attrs.requestSerialize;\n    const deserialize = attrs.responseDeserialize;\n    const methodFunc = partial(\n      requesterFuncs[methodType],\n      attrs.path,\n      serialize,\n      deserialize\n    );\n    ServiceClientImpl.prototype[name] = methodFunc;\n    // Associate all provided attributes with the method\n    Object.assign(ServiceClientImpl.prototype[name], attrs);\n    if (attrs.originalName && !isPrototypePolluted(attrs.originalName)) {\n      ServiceClientImpl.prototype[attrs.originalName] =\n        ServiceClientImpl.prototype[name];\n    }\n  });\n\n  ServiceClientImpl.service = methods;\n  ServiceClientImpl.serviceName = serviceName;\n\n  return ServiceClientImpl;\n}\n\nfunction partial(\n  fn: Function,\n  path: string,\n  serialize: Function,\n  deserialize: Function\n): Function {\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  return function (this: any, ...args: any[]) {\n    return fn.call(this, path, serialize, deserialize, ...args);\n  };\n}\n\nexport interface GrpcObject {\n  [index: string]:\n    | GrpcObject\n    | ServiceClientConstructor\n    | ProtobufTypeDefinition;\n}\n\nfunction isProtobufTypeDefinition(\n  obj: ServiceDefinition | ProtobufTypeDefinition\n): obj is ProtobufTypeDefinition {\n  return 'format' in obj;\n}\n\n/**\n * Load a gRPC package definition as a gRPC object hierarchy.\n * @param packageDef The package definition object.\n * @return The resulting gRPC object.\n */\nexport function loadPackageDefinition(\n  packageDef: PackageDefinition\n): GrpcObject {\n  const result: GrpcObject = {};\n  for (const serviceFqn in packageDef) {\n    if (Object.prototype.hasOwnProperty.call(packageDef, serviceFqn)) {\n      const service = packageDef[serviceFqn];\n      const nameComponents = serviceFqn.split('.');\n      if (nameComponents.some((comp: string) => isPrototypePolluted(comp))) {\n        continue;\n      }\n      const serviceName = nameComponents[nameComponents.length - 1];\n      let current = result;\n      for (const packageName of nameComponents.slice(0, -1)) {\n        if (!current[packageName]) {\n          current[packageName] = {};\n        }\n        current = current[packageName] as GrpcObject;\n      }\n      if (isProtobufTypeDefinition(service)) {\n        current[serviceName] = service;\n      } else {\n        current[serviceName] = makeClientConstructor(service, serviceName, {});\n      }\n    }\n  }\n  return result;\n}\n", "/**\n * lodash (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright jQuery Foundation and other contributors <https://jquery.org/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0;\n\n/** `Object#toString` result references. */\nvar symbolTag = '[object Symbol]';\n\n/** Used to match words composed of alphanumeric characters. */\nvar reAsciiWord = /[^\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\x7f]+/g;\n\n/** Used to match Latin Unicode letters (excluding mathematical operators). */\nvar reLatin = /[\\xc0-\\xd6\\xd8-\\xf6\\xf8-\\xff\\u0100-\\u017f]/g;\n\n/** Used to compose unicode character classes. */\nvar rsAstralRange = '\\\\ud800-\\\\udfff',\n    rsComboMarksRange = '\\\\u0300-\\\\u036f\\\\ufe20-\\\\ufe23',\n    rsComboSymbolsRange = '\\\\u20d0-\\\\u20f0',\n    rsDingbatRange = '\\\\u2700-\\\\u27bf',\n    rsLowerRange = 'a-z\\\\xdf-\\\\xf6\\\\xf8-\\\\xff',\n    rsMathOpRange = '\\\\xac\\\\xb1\\\\xd7\\\\xf7',\n    rsNonCharRange = '\\\\x00-\\\\x2f\\\\x3a-\\\\x40\\\\x5b-\\\\x60\\\\x7b-\\\\xbf',\n    rsPunctuationRange = '\\\\u2000-\\\\u206f',\n    rsSpaceRange = ' \\\\t\\\\x0b\\\\f\\\\xa0\\\\ufeff\\\\n\\\\r\\\\u2028\\\\u2029\\\\u1680\\\\u180e\\\\u2000\\\\u2001\\\\u2002\\\\u2003\\\\u2004\\\\u2005\\\\u2006\\\\u2007\\\\u2008\\\\u2009\\\\u200a\\\\u202f\\\\u205f\\\\u3000',\n    rsUpperRange = 'A-Z\\\\xc0-\\\\xd6\\\\xd8-\\\\xde',\n    rsVarRange = '\\\\ufe0e\\\\ufe0f',\n    rsBreakRange = rsMathOpRange + rsNonCharRange + rsPunctuationRange + rsSpaceRange;\n\n/** Used to compose unicode capture groups. */\nvar rsApos = \"['\\u2019]\",\n    rsAstral = '[' + rsAstralRange + ']',\n    rsBreak = '[' + rsBreakRange + ']',\n    rsCombo = '[' + rsComboMarksRange + rsComboSymbolsRange + ']',\n    rsDigits = '\\\\d+',\n    rsDingbat = '[' + rsDingbatRange + ']',\n    rsLower = '[' + rsLowerRange + ']',\n    rsMisc = '[^' + rsAstralRange + rsBreakRange + rsDigits + rsDingbatRange + rsLowerRange + rsUpperRange + ']',\n    rsFitz = '\\\\ud83c[\\\\udffb-\\\\udfff]',\n    rsModifier = '(?:' + rsCombo + '|' + rsFitz + ')',\n    rsNonAstral = '[^' + rsAstralRange + ']',\n    rsRegional = '(?:\\\\ud83c[\\\\udde6-\\\\uddff]){2}',\n    rsSurrPair = '[\\\\ud800-\\\\udbff][\\\\udc00-\\\\udfff]',\n    rsUpper = '[' + rsUpperRange + ']',\n    rsZWJ = '\\\\u200d';\n\n/** Used to compose unicode regexes. */\nvar rsLowerMisc = '(?:' + rsLower + '|' + rsMisc + ')',\n    rsUpperMisc = '(?:' + rsUpper + '|' + rsMisc + ')',\n    rsOptLowerContr = '(?:' + rsApos + '(?:d|ll|m|re|s|t|ve))?',\n    rsOptUpperContr = '(?:' + rsApos + '(?:D|LL|M|RE|S|T|VE))?',\n    reOptMod = rsModifier + '?',\n    rsOptVar = '[' + rsVarRange + ']?',\n    rsOptJoin = '(?:' + rsZWJ + '(?:' + [rsNonAstral, rsRegional, rsSurrPair].join('|') + ')' + rsOptVar + reOptMod + ')*',\n    rsSeq = rsOptVar + reOptMod + rsOptJoin,\n    rsEmoji = '(?:' + [rsDingbat, rsRegional, rsSurrPair].join('|') + ')' + rsSeq,\n    rsSymbol = '(?:' + [rsNonAstral + rsCombo + '?', rsCombo, rsRegional, rsSurrPair, rsAstral].join('|') + ')';\n\n/** Used to match apostrophes. */\nvar reApos = RegExp(rsApos, 'g');\n\n/**\n * Used to match [combining diacritical marks](https://en.wikipedia.org/wiki/Combining_Diacritical_Marks) and\n * [combining diacritical marks for symbols](https://en.wikipedia.org/wiki/Combining_Diacritical_Marks_for_Symbols).\n */\nvar reComboMark = RegExp(rsCombo, 'g');\n\n/** Used to match [string symbols](https://mathiasbynens.be/notes/javascript-unicode). */\nvar reUnicode = RegExp(rsFitz + '(?=' + rsFitz + ')|' + rsSymbol + rsSeq, 'g');\n\n/** Used to match complex or compound words. */\nvar reUnicodeWord = RegExp([\n  rsUpper + '?' + rsLower + '+' + rsOptLowerContr + '(?=' + [rsBreak, rsUpper, '$'].join('|') + ')',\n  rsUpperMisc + '+' + rsOptUpperContr + '(?=' + [rsBreak, rsUpper + rsLowerMisc, '$'].join('|') + ')',\n  rsUpper + '?' + rsLowerMisc + '+' + rsOptLowerContr,\n  rsUpper + '+' + rsOptUpperContr,\n  rsDigits,\n  rsEmoji\n].join('|'), 'g');\n\n/** Used to detect strings with [zero-width joiners or code points from the astral planes](http://eev.ee/blog/2015/09/12/dark-corners-of-unicode/). */\nvar reHasUnicode = RegExp('[' + rsZWJ + rsAstralRange  + rsComboMarksRange + rsComboSymbolsRange + rsVarRange + ']');\n\n/** Used to detect strings that need a more robust regexp to match words. */\nvar reHasUnicodeWord = /[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;\n\n/** Used to map Latin Unicode letters to basic Latin letters. */\nvar deburredLetters = {\n  // Latin-1 Supplement block.\n  '\\xc0': 'A',  '\\xc1': 'A', '\\xc2': 'A', '\\xc3': 'A', '\\xc4': 'A', '\\xc5': 'A',\n  '\\xe0': 'a',  '\\xe1': 'a', '\\xe2': 'a', '\\xe3': 'a', '\\xe4': 'a', '\\xe5': 'a',\n  '\\xc7': 'C',  '\\xe7': 'c',\n  '\\xd0': 'D',  '\\xf0': 'd',\n  '\\xc8': 'E',  '\\xc9': 'E', '\\xca': 'E', '\\xcb': 'E',\n  '\\xe8': 'e',  '\\xe9': 'e', '\\xea': 'e', '\\xeb': 'e',\n  '\\xcc': 'I',  '\\xcd': 'I', '\\xce': 'I', '\\xcf': 'I',\n  '\\xec': 'i',  '\\xed': 'i', '\\xee': 'i', '\\xef': 'i',\n  '\\xd1': 'N',  '\\xf1': 'n',\n  '\\xd2': 'O',  '\\xd3': 'O', '\\xd4': 'O', '\\xd5': 'O', '\\xd6': 'O', '\\xd8': 'O',\n  '\\xf2': 'o',  '\\xf3': 'o', '\\xf4': 'o', '\\xf5': 'o', '\\xf6': 'o', '\\xf8': 'o',\n  '\\xd9': 'U',  '\\xda': 'U', '\\xdb': 'U', '\\xdc': 'U',\n  '\\xf9': 'u',  '\\xfa': 'u', '\\xfb': 'u', '\\xfc': 'u',\n  '\\xdd': 'Y',  '\\xfd': 'y', '\\xff': 'y',\n  '\\xc6': 'Ae', '\\xe6': 'ae',\n  '\\xde': 'Th', '\\xfe': 'th',\n  '\\xdf': 'ss',\n  // Latin Extended-A block.\n  '\\u0100': 'A',  '\\u0102': 'A', '\\u0104': 'A',\n  '\\u0101': 'a',  '\\u0103': 'a', '\\u0105': 'a',\n  '\\u0106': 'C',  '\\u0108': 'C', '\\u010a': 'C', '\\u010c': 'C',\n  '\\u0107': 'c',  '\\u0109': 'c', '\\u010b': 'c', '\\u010d': 'c',\n  '\\u010e': 'D',  '\\u0110': 'D', '\\u010f': 'd', '\\u0111': 'd',\n  '\\u0112': 'E',  '\\u0114': 'E', '\\u0116': 'E', '\\u0118': 'E', '\\u011a': 'E',\n  '\\u0113': 'e',  '\\u0115': 'e', '\\u0117': 'e', '\\u0119': 'e', '\\u011b': 'e',\n  '\\u011c': 'G',  '\\u011e': 'G', '\\u0120': 'G', '\\u0122': 'G',\n  '\\u011d': 'g',  '\\u011f': 'g', '\\u0121': 'g', '\\u0123': 'g',\n  '\\u0124': 'H',  '\\u0126': 'H', '\\u0125': 'h', '\\u0127': 'h',\n  '\\u0128': 'I',  '\\u012a': 'I', '\\u012c': 'I', '\\u012e': 'I', '\\u0130': 'I',\n  '\\u0129': 'i',  '\\u012b': 'i', '\\u012d': 'i', '\\u012f': 'i', '\\u0131': 'i',\n  '\\u0134': 'J',  '\\u0135': 'j',\n  '\\u0136': 'K',  '\\u0137': 'k', '\\u0138': 'k',\n  '\\u0139': 'L',  '\\u013b': 'L', '\\u013d': 'L', '\\u013f': 'L', '\\u0141': 'L',\n  '\\u013a': 'l',  '\\u013c': 'l', '\\u013e': 'l', '\\u0140': 'l', '\\u0142': 'l',\n  '\\u0143': 'N',  '\\u0145': 'N', '\\u0147': 'N', '\\u014a': 'N',\n  '\\u0144': 'n',  '\\u0146': 'n', '\\u0148': 'n', '\\u014b': 'n',\n  '\\u014c': 'O',  '\\u014e': 'O', '\\u0150': 'O',\n  '\\u014d': 'o',  '\\u014f': 'o', '\\u0151': 'o',\n  '\\u0154': 'R',  '\\u0156': 'R', '\\u0158': 'R',\n  '\\u0155': 'r',  '\\u0157': 'r', '\\u0159': 'r',\n  '\\u015a': 'S',  '\\u015c': 'S', '\\u015e': 'S', '\\u0160': 'S',\n  '\\u015b': 's',  '\\u015d': 's', '\\u015f': 's', '\\u0161': 's',\n  '\\u0162': 'T',  '\\u0164': 'T', '\\u0166': 'T',\n  '\\u0163': 't',  '\\u0165': 't', '\\u0167': 't',\n  '\\u0168': 'U',  '\\u016a': 'U', '\\u016c': 'U', '\\u016e': 'U', '\\u0170': 'U', '\\u0172': 'U',\n  '\\u0169': 'u',  '\\u016b': 'u', '\\u016d': 'u', '\\u016f': 'u', '\\u0171': 'u', '\\u0173': 'u',\n  '\\u0174': 'W',  '\\u0175': 'w',\n  '\\u0176': 'Y',  '\\u0177': 'y', '\\u0178': 'Y',\n  '\\u0179': 'Z',  '\\u017b': 'Z', '\\u017d': 'Z',\n  '\\u017a': 'z',  '\\u017c': 'z', '\\u017e': 'z',\n  '\\u0132': 'IJ', '\\u0133': 'ij',\n  '\\u0152': 'Oe', '\\u0153': 'oe',\n  '\\u0149': \"'n\", '\\u017f': 'ss'\n};\n\n/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\n/**\n * A specialized version of `_.reduce` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @param {*} [accumulator] The initial value.\n * @param {boolean} [initAccum] Specify using the first element of `array` as\n *  the initial value.\n * @returns {*} Returns the accumulated value.\n */\nfunction arrayReduce(array, iteratee, accumulator, initAccum) {\n  var index = -1,\n      length = array ? array.length : 0;\n\n  if (initAccum && length) {\n    accumulator = array[++index];\n  }\n  while (++index < length) {\n    accumulator = iteratee(accumulator, array[index], index, array);\n  }\n  return accumulator;\n}\n\n/**\n * Converts an ASCII `string` to an array.\n *\n * @private\n * @param {string} string The string to convert.\n * @returns {Array} Returns the converted array.\n */\nfunction asciiToArray(string) {\n  return string.split('');\n}\n\n/**\n * Splits an ASCII `string` into an array of its words.\n *\n * @private\n * @param {string} The string to inspect.\n * @returns {Array} Returns the words of `string`.\n */\nfunction asciiWords(string) {\n  return string.match(reAsciiWord) || [];\n}\n\n/**\n * The base implementation of `_.propertyOf` without support for deep paths.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Function} Returns the new accessor function.\n */\nfunction basePropertyOf(object) {\n  return function(key) {\n    return object == null ? undefined : object[key];\n  };\n}\n\n/**\n * Used by `_.deburr` to convert Latin-1 Supplement and Latin Extended-A\n * letters to basic Latin letters.\n *\n * @private\n * @param {string} letter The matched letter to deburr.\n * @returns {string} Returns the deburred letter.\n */\nvar deburrLetter = basePropertyOf(deburredLetters);\n\n/**\n * Checks if `string` contains Unicode symbols.\n *\n * @private\n * @param {string} string The string to inspect.\n * @returns {boolean} Returns `true` if a symbol is found, else `false`.\n */\nfunction hasUnicode(string) {\n  return reHasUnicode.test(string);\n}\n\n/**\n * Checks if `string` contains a word composed of Unicode symbols.\n *\n * @private\n * @param {string} string The string to inspect.\n * @returns {boolean} Returns `true` if a word is found, else `false`.\n */\nfunction hasUnicodeWord(string) {\n  return reHasUnicodeWord.test(string);\n}\n\n/**\n * Converts `string` to an array.\n *\n * @private\n * @param {string} string The string to convert.\n * @returns {Array} Returns the converted array.\n */\nfunction stringToArray(string) {\n  return hasUnicode(string)\n    ? unicodeToArray(string)\n    : asciiToArray(string);\n}\n\n/**\n * Converts a Unicode `string` to an array.\n *\n * @private\n * @param {string} string The string to convert.\n * @returns {Array} Returns the converted array.\n */\nfunction unicodeToArray(string) {\n  return string.match(reUnicode) || [];\n}\n\n/**\n * Splits a Unicode `string` into an array of its words.\n *\n * @private\n * @param {string} The string to inspect.\n * @returns {Array} Returns the words of `string`.\n */\nfunction unicodeWords(string) {\n  return string.match(reUnicodeWord) || [];\n}\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = objectProto.toString;\n\n/** Built-in value references. */\nvar Symbol = root.Symbol;\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolToString = symbolProto ? symbolProto.toString : undefined;\n\n/**\n * The base implementation of `_.slice` without an iteratee call guard.\n *\n * @private\n * @param {Array} array The array to slice.\n * @param {number} [start=0] The start position.\n * @param {number} [end=array.length] The end position.\n * @returns {Array} Returns the slice of `array`.\n */\nfunction baseSlice(array, start, end) {\n  var index = -1,\n      length = array.length;\n\n  if (start < 0) {\n    start = -start > length ? 0 : (length + start);\n  }\n  end = end > length ? length : end;\n  if (end < 0) {\n    end += length;\n  }\n  length = start > end ? 0 : ((end - start) >>> 0);\n  start >>>= 0;\n\n  var result = Array(length);\n  while (++index < length) {\n    result[index] = array[index + start];\n  }\n  return result;\n}\n\n/**\n * The base implementation of `_.toString` which doesn't convert nullish\n * values to empty strings.\n *\n * @private\n * @param {*} value The value to process.\n * @returns {string} Returns the string.\n */\nfunction baseToString(value) {\n  // Exit early for strings to avoid a performance hit in some environments.\n  if (typeof value == 'string') {\n    return value;\n  }\n  if (isSymbol(value)) {\n    return symbolToString ? symbolToString.call(value) : '';\n  }\n  var result = (value + '');\n  return (result == '0' && (1 / value) == -INFINITY) ? '-0' : result;\n}\n\n/**\n * Casts `array` to a slice if it's needed.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {number} start The start position.\n * @param {number} [end=array.length] The end position.\n * @returns {Array} Returns the cast slice.\n */\nfunction castSlice(array, start, end) {\n  var length = array.length;\n  end = end === undefined ? length : end;\n  return (!start && end >= length) ? array : baseSlice(array, start, end);\n}\n\n/**\n * Creates a function like `_.lowerFirst`.\n *\n * @private\n * @param {string} methodName The name of the `String` case method to use.\n * @returns {Function} Returns the new case function.\n */\nfunction createCaseFirst(methodName) {\n  return function(string) {\n    string = toString(string);\n\n    var strSymbols = hasUnicode(string)\n      ? stringToArray(string)\n      : undefined;\n\n    var chr = strSymbols\n      ? strSymbols[0]\n      : string.charAt(0);\n\n    var trailing = strSymbols\n      ? castSlice(strSymbols, 1).join('')\n      : string.slice(1);\n\n    return chr[methodName]() + trailing;\n  };\n}\n\n/**\n * Creates a function like `_.camelCase`.\n *\n * @private\n * @param {Function} callback The function to combine each word.\n * @returns {Function} Returns the new compounder function.\n */\nfunction createCompounder(callback) {\n  return function(string) {\n    return arrayReduce(words(deburr(string).replace(reApos, '')), callback, '');\n  };\n}\n\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return !!value && typeof value == 'object';\n}\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == 'symbol' ||\n    (isObjectLike(value) && objectToString.call(value) == symbolTag);\n}\n\n/**\n * Converts `value` to a string. An empty string is returned for `null`\n * and `undefined` values. The sign of `-0` is preserved.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to process.\n * @returns {string} Returns the string.\n * @example\n *\n * _.toString(null);\n * // => ''\n *\n * _.toString(-0);\n * // => '-0'\n *\n * _.toString([1, 2, 3]);\n * // => '1,2,3'\n */\nfunction toString(value) {\n  return value == null ? '' : baseToString(value);\n}\n\n/**\n * Converts `string` to [camel case](https://en.wikipedia.org/wiki/CamelCase).\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category String\n * @param {string} [string=''] The string to convert.\n * @returns {string} Returns the camel cased string.\n * @example\n *\n * _.camelCase('Foo Bar');\n * // => 'fooBar'\n *\n * _.camelCase('--foo-bar--');\n * // => 'fooBar'\n *\n * _.camelCase('__FOO_BAR__');\n * // => 'fooBar'\n */\nvar camelCase = createCompounder(function(result, word, index) {\n  word = word.toLowerCase();\n  return result + (index ? capitalize(word) : word);\n});\n\n/**\n * Converts the first character of `string` to upper case and the remaining\n * to lower case.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category String\n * @param {string} [string=''] The string to capitalize.\n * @returns {string} Returns the capitalized string.\n * @example\n *\n * _.capitalize('FRED');\n * // => 'Fred'\n */\nfunction capitalize(string) {\n  return upperFirst(toString(string).toLowerCase());\n}\n\n/**\n * Deburrs `string` by converting\n * [Latin-1 Supplement](https://en.wikipedia.org/wiki/Latin-1_Supplement_(Unicode_block)#Character_table)\n * and [Latin Extended-A](https://en.wikipedia.org/wiki/Latin_Extended-A)\n * letters to basic Latin letters and removing\n * [combining diacritical marks](https://en.wikipedia.org/wiki/Combining_Diacritical_Marks).\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category String\n * @param {string} [string=''] The string to deburr.\n * @returns {string} Returns the deburred string.\n * @example\n *\n * _.deburr('d\u00E9j\u00E0 vu');\n * // => 'deja vu'\n */\nfunction deburr(string) {\n  string = toString(string);\n  return string && string.replace(reLatin, deburrLetter).replace(reComboMark, '');\n}\n\n/**\n * Converts the first character of `string` to upper case.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category String\n * @param {string} [string=''] The string to convert.\n * @returns {string} Returns the converted string.\n * @example\n *\n * _.upperFirst('fred');\n * // => 'Fred'\n *\n * _.upperFirst('FRED');\n * // => 'FRED'\n */\nvar upperFirst = createCaseFirst('toUpperCase');\n\n/**\n * Splits `string` into an array of its words.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category String\n * @param {string} [string=''] The string to inspect.\n * @param {RegExp|string} [pattern] The pattern to match words.\n * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n * @returns {Array} Returns the words of `string`.\n * @example\n *\n * _.words('fred, barney, & pebbles');\n * // => ['fred', 'barney', 'pebbles']\n *\n * _.words('fred, barney, & pebbles', /[^, ]+/g);\n * // => ['fred', 'barney', '&', 'pebbles']\n */\nfunction words(string, pattern, guard) {\n  string = toString(string);\n  pattern = guard ? undefined : pattern;\n\n  if (pattern === undefined) {\n    return hasUnicodeWord(string) ? unicodeWords(string) : asciiWords(string);\n  }\n  return string.match(pattern) || [];\n}\n\nmodule.exports = camelCase;\n", "\"use strict\";\r\nmodule.exports = asPromise;\r\n\r\n/**\r\n * Callback as used by {@link util.asPromise}.\r\n * @typedef asPromiseCallback\r\n * @type {function}\r\n * @param {Error|null} error Error, if any\r\n * @param {...*} params Additional arguments\r\n * @returns {undefined}\r\n */\r\n\r\n/**\r\n * Returns a promise from a node-style callback function.\r\n * @memberof util\r\n * @param {asPromiseCallback} fn Function to call\r\n * @param {*} ctx Function context\r\n * @param {...*} params Function arguments\r\n * @returns {Promise<*>} Promisified function\r\n */\r\nfunction asPromise(fn, ctx/*, varargs */) {\r\n    var params  = new Array(arguments.length - 1),\r\n        offset  = 0,\r\n        index   = 2,\r\n        pending = true;\r\n    while (index < arguments.length)\r\n        params[offset++] = arguments[index++];\r\n    return new Promise(function executor(resolve, reject) {\r\n        params[offset] = function callback(err/*, varargs */) {\r\n            if (pending) {\r\n                pending = false;\r\n                if (err)\r\n                    reject(err);\r\n                else {\r\n                    var params = new Array(arguments.length - 1),\r\n                        offset = 0;\r\n                    while (offset < params.length)\r\n                        params[offset++] = arguments[offset];\r\n                    resolve.apply(null, params);\r\n                }\r\n            }\r\n        };\r\n        try {\r\n            fn.apply(ctx || null, params);\r\n        } catch (err) {\r\n            if (pending) {\r\n                pending = false;\r\n                reject(err);\r\n            }\r\n        }\r\n    });\r\n}\r\n", "\"use strict\";\r\n\r\n/**\r\n * A minimal base64 implementation for number arrays.\r\n * @memberof util\r\n * @namespace\r\n */\r\nvar base64 = exports;\r\n\r\n/**\r\n * Calculates the byte length of a base64 encoded string.\r\n * @param {string} string Base64 encoded string\r\n * @returns {number} Byte length\r\n */\r\nbase64.length = function length(string) {\r\n    var p = string.length;\r\n    if (!p)\r\n        return 0;\r\n    var n = 0;\r\n    while (--p % 4 > 1 && string.charAt(p) === \"=\")\r\n        ++n;\r\n    return Math.ceil(string.length * 3) / 4 - n;\r\n};\r\n\r\n// Base64 encoding table\r\nvar b64 = new Array(64);\r\n\r\n// Base64 decoding table\r\nvar s64 = new Array(123);\r\n\r\n// 65..90, 97..122, 48..57, 43, 47\r\nfor (var i = 0; i < 64;)\r\n    s64[b64[i] = i < 26 ? i + 65 : i < 52 ? i + 71 : i < 62 ? i - 4 : i - 59 | 43] = i++;\r\n\r\n/**\r\n * Encodes a buffer to a base64 encoded string.\r\n * @param {Uint8Array} buffer Source buffer\r\n * @param {number} start Source start\r\n * @param {number} end Source end\r\n * @returns {string} Base64 encoded string\r\n */\r\nbase64.encode = function encode(buffer, start, end) {\r\n    var parts = null,\r\n        chunk = [];\r\n    var i = 0, // output index\r\n        j = 0, // goto index\r\n        t;     // temporary\r\n    while (start < end) {\r\n        var b = buffer[start++];\r\n        switch (j) {\r\n            case 0:\r\n                chunk[i++] = b64[b >> 2];\r\n                t = (b & 3) << 4;\r\n                j = 1;\r\n                break;\r\n            case 1:\r\n                chunk[i++] = b64[t | b >> 4];\r\n                t = (b & 15) << 2;\r\n                j = 2;\r\n                break;\r\n            case 2:\r\n                chunk[i++] = b64[t | b >> 6];\r\n                chunk[i++] = b64[b & 63];\r\n                j = 0;\r\n                break;\r\n        }\r\n        if (i > 8191) {\r\n            (parts || (parts = [])).push(String.fromCharCode.apply(String, chunk));\r\n            i = 0;\r\n        }\r\n    }\r\n    if (j) {\r\n        chunk[i++] = b64[t];\r\n        chunk[i++] = 61;\r\n        if (j === 1)\r\n            chunk[i++] = 61;\r\n    }\r\n    if (parts) {\r\n        if (i)\r\n            parts.push(String.fromCharCode.apply(String, chunk.slice(0, i)));\r\n        return parts.join(\"\");\r\n    }\r\n    return String.fromCharCode.apply(String, chunk.slice(0, i));\r\n};\r\n\r\nvar invalidEncoding = \"invalid encoding\";\r\n\r\n/**\r\n * Decodes a base64 encoded string to a buffer.\r\n * @param {string} string Source string\r\n * @param {Uint8Array} buffer Destination buffer\r\n * @param {number} offset Destination offset\r\n * @returns {number} Number of bytes written\r\n * @throws {Error} If encoding is invalid\r\n */\r\nbase64.decode = function decode(string, buffer, offset) {\r\n    var start = offset;\r\n    var j = 0, // goto index\r\n        t;     // temporary\r\n    for (var i = 0; i < string.length;) {\r\n        var c = string.charCodeAt(i++);\r\n        if (c === 61 && j > 1)\r\n            break;\r\n        if ((c = s64[c]) === undefined)\r\n            throw Error(invalidEncoding);\r\n        switch (j) {\r\n            case 0:\r\n                t = c;\r\n                j = 1;\r\n                break;\r\n            case 1:\r\n                buffer[offset++] = t << 2 | (c & 48) >> 4;\r\n                t = c;\r\n                j = 2;\r\n                break;\r\n            case 2:\r\n                buffer[offset++] = (t & 15) << 4 | (c & 60) >> 2;\r\n                t = c;\r\n                j = 3;\r\n                break;\r\n            case 3:\r\n                buffer[offset++] = (t & 3) << 6 | c;\r\n                j = 0;\r\n                break;\r\n        }\r\n    }\r\n    if (j === 1)\r\n        throw Error(invalidEncoding);\r\n    return offset - start;\r\n};\r\n\r\n/**\r\n * Tests if the specified string appears to be base64 encoded.\r\n * @param {string} string String to test\r\n * @returns {boolean} `true` if probably base64 encoded, otherwise false\r\n */\r\nbase64.test = function test(string) {\r\n    return /^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(string);\r\n};\r\n", "\"use strict\";\r\nmodule.exports = EventEmitter;\r\n\r\n/**\r\n * Constructs a new event emitter instance.\r\n * @classdesc A minimal event emitter.\r\n * @memberof util\r\n * @constructor\r\n */\r\nfunction EventEmitter() {\r\n\r\n    /**\r\n     * Registered listeners.\r\n     * @type {Object.<string,*>}\r\n     * @private\r\n     */\r\n    this._listeners = {};\r\n}\r\n\r\n/**\r\n * Registers an event listener.\r\n * @param {string} evt Event name\r\n * @param {function} fn Listener\r\n * @param {*} [ctx] Listener context\r\n * @returns {util.EventEmitter} `this`\r\n */\r\nEventEmitter.prototype.on = function on(evt, fn, ctx) {\r\n    (this._listeners[evt] || (this._listeners[evt] = [])).push({\r\n        fn  : fn,\r\n        ctx : ctx || this\r\n    });\r\n    return this;\r\n};\r\n\r\n/**\r\n * Removes an event listener or any matching listeners if arguments are omitted.\r\n * @param {string} [evt] Event name. Removes all listeners if omitted.\r\n * @param {function} [fn] Listener to remove. Removes all listeners of `evt` if omitted.\r\n * @returns {util.EventEmitter} `this`\r\n */\r\nEventEmitter.prototype.off = function off(evt, fn) {\r\n    if (evt === undefined)\r\n        this._listeners = {};\r\n    else {\r\n        if (fn === undefined)\r\n            this._listeners[evt] = [];\r\n        else {\r\n            var listeners = this._listeners[evt];\r\n            for (var i = 0; i < listeners.length;)\r\n                if (listeners[i].fn === fn)\r\n                    listeners.splice(i, 1);\r\n                else\r\n                    ++i;\r\n        }\r\n    }\r\n    return this;\r\n};\r\n\r\n/**\r\n * Emits an event by calling its listeners with the specified arguments.\r\n * @param {string} evt Event name\r\n * @param {...*} args Arguments\r\n * @returns {util.EventEmitter} `this`\r\n */\r\nEventEmitter.prototype.emit = function emit(evt) {\r\n    var listeners = this._listeners[evt];\r\n    if (listeners) {\r\n        var args = [],\r\n            i = 1;\r\n        for (; i < arguments.length;)\r\n            args.push(arguments[i++]);\r\n        for (i = 0; i < listeners.length;)\r\n            listeners[i].fn.apply(listeners[i++].ctx, args);\r\n    }\r\n    return this;\r\n};\r\n", "\"use strict\";\r\n\r\nmodule.exports = factory(factory);\r\n\r\n/**\r\n * Reads / writes floats / doubles from / to buffers.\r\n * @name util.float\r\n * @namespace\r\n */\r\n\r\n/**\r\n * Writes a 32 bit float to a buffer using little endian byte order.\r\n * @name util.float.writeFloatLE\r\n * @function\r\n * @param {number} val Value to write\r\n * @param {Uint8Array} buf Target buffer\r\n * @param {number} pos Target buffer offset\r\n * @returns {undefined}\r\n */\r\n\r\n/**\r\n * Writes a 32 bit float to a buffer using big endian byte order.\r\n * @name util.float.writeFloatBE\r\n * @function\r\n * @param {number} val Value to write\r\n * @param {Uint8Array} buf Target buffer\r\n * @param {number} pos Target buffer offset\r\n * @returns {undefined}\r\n */\r\n\r\n/**\r\n * Reads a 32 bit float from a buffer using little endian byte order.\r\n * @name util.float.readFloatLE\r\n * @function\r\n * @param {Uint8Array} buf Source buffer\r\n * @param {number} pos Source buffer offset\r\n * @returns {number} Value read\r\n */\r\n\r\n/**\r\n * Reads a 32 bit float from a buffer using big endian byte order.\r\n * @name util.float.readFloatBE\r\n * @function\r\n * @param {Uint8Array} buf Source buffer\r\n * @param {number} pos Source buffer offset\r\n * @returns {number} Value read\r\n */\r\n\r\n/**\r\n * Writes a 64 bit double to a buffer using little endian byte order.\r\n * @name util.float.writeDoubleLE\r\n * @function\r\n * @param {number} val Value to write\r\n * @param {Uint8Array} buf Target buffer\r\n * @param {number} pos Target buffer offset\r\n * @returns {undefined}\r\n */\r\n\r\n/**\r\n * Writes a 64 bit double to a buffer using big endian byte order.\r\n * @name util.float.writeDoubleBE\r\n * @function\r\n * @param {number} val Value to write\r\n * @param {Uint8Array} buf Target buffer\r\n * @param {number} pos Target buffer offset\r\n * @returns {undefined}\r\n */\r\n\r\n/**\r\n * Reads a 64 bit double from a buffer using little endian byte order.\r\n * @name util.float.readDoubleLE\r\n * @function\r\n * @param {Uint8Array} buf Source buffer\r\n * @param {number} pos Source buffer offset\r\n * @returns {number} Value read\r\n */\r\n\r\n/**\r\n * Reads a 64 bit double from a buffer using big endian byte order.\r\n * @name util.float.readDoubleBE\r\n * @function\r\n * @param {Uint8Array} buf Source buffer\r\n * @param {number} pos Source buffer offset\r\n * @returns {number} Value read\r\n */\r\n\r\n// Factory function for the purpose of node-based testing in modified global environments\r\nfunction factory(exports) {\r\n\r\n    // float: typed array\r\n    if (typeof Float32Array !== \"undefined\") (function() {\r\n\r\n        var f32 = new Float32Array([ -0 ]),\r\n            f8b = new Uint8Array(f32.buffer),\r\n            le  = f8b[3] === 128;\r\n\r\n        function writeFloat_f32_cpy(val, buf, pos) {\r\n            f32[0] = val;\r\n            buf[pos    ] = f8b[0];\r\n            buf[pos + 1] = f8b[1];\r\n            buf[pos + 2] = f8b[2];\r\n            buf[pos + 3] = f8b[3];\r\n        }\r\n\r\n        function writeFloat_f32_rev(val, buf, pos) {\r\n            f32[0] = val;\r\n            buf[pos    ] = f8b[3];\r\n            buf[pos + 1] = f8b[2];\r\n            buf[pos + 2] = f8b[1];\r\n            buf[pos + 3] = f8b[0];\r\n        }\r\n\r\n        /* istanbul ignore next */\r\n        exports.writeFloatLE = le ? writeFloat_f32_cpy : writeFloat_f32_rev;\r\n        /* istanbul ignore next */\r\n        exports.writeFloatBE = le ? writeFloat_f32_rev : writeFloat_f32_cpy;\r\n\r\n        function readFloat_f32_cpy(buf, pos) {\r\n            f8b[0] = buf[pos    ];\r\n            f8b[1] = buf[pos + 1];\r\n            f8b[2] = buf[pos + 2];\r\n            f8b[3] = buf[pos + 3];\r\n            return f32[0];\r\n        }\r\n\r\n        function readFloat_f32_rev(buf, pos) {\r\n            f8b[3] = buf[pos    ];\r\n            f8b[2] = buf[pos + 1];\r\n            f8b[1] = buf[pos + 2];\r\n            f8b[0] = buf[pos + 3];\r\n            return f32[0];\r\n        }\r\n\r\n        /* istanbul ignore next */\r\n        exports.readFloatLE = le ? readFloat_f32_cpy : readFloat_f32_rev;\r\n        /* istanbul ignore next */\r\n        exports.readFloatBE = le ? readFloat_f32_rev : readFloat_f32_cpy;\r\n\r\n    // float: ieee754\r\n    })(); else (function() {\r\n\r\n        function writeFloat_ieee754(writeUint, val, buf, pos) {\r\n            var sign = val < 0 ? 1 : 0;\r\n            if (sign)\r\n                val = -val;\r\n            if (val === 0)\r\n                writeUint(1 / val > 0 ? /* positive */ 0 : /* negative 0 */ 2147483648, buf, pos);\r\n            else if (isNaN(val))\r\n                writeUint(2143289344, buf, pos);\r\n            else if (val > 3.4028234663852886e+38) // +-Infinity\r\n                writeUint((sign << 31 | 2139095040) >>> 0, buf, pos);\r\n            else if (val < 1.1754943508222875e-38) // denormal\r\n                writeUint((sign << 31 | Math.round(val / 1.401298464324817e-45)) >>> 0, buf, pos);\r\n            else {\r\n                var exponent = Math.floor(Math.log(val) / Math.LN2),\r\n                    mantissa = Math.round(val * Math.pow(2, -exponent) * 8388608) & 8388607;\r\n                writeUint((sign << 31 | exponent + 127 << 23 | mantissa) >>> 0, buf, pos);\r\n            }\r\n        }\r\n\r\n        exports.writeFloatLE = writeFloat_ieee754.bind(null, writeUintLE);\r\n        exports.writeFloatBE = writeFloat_ieee754.bind(null, writeUintBE);\r\n\r\n        function readFloat_ieee754(readUint, buf, pos) {\r\n            var uint = readUint(buf, pos),\r\n                sign = (uint >> 31) * 2 + 1,\r\n                exponent = uint >>> 23 & 255,\r\n                mantissa = uint & 8388607;\r\n            return exponent === 255\r\n                ? mantissa\r\n                ? NaN\r\n                : sign * Infinity\r\n                : exponent === 0 // denormal\r\n                ? sign * 1.401298464324817e-45 * mantissa\r\n                : sign * Math.pow(2, exponent - 150) * (mantissa + 8388608);\r\n        }\r\n\r\n        exports.readFloatLE = readFloat_ieee754.bind(null, readUintLE);\r\n        exports.readFloatBE = readFloat_ieee754.bind(null, readUintBE);\r\n\r\n    })();\r\n\r\n    // double: typed array\r\n    if (typeof Float64Array !== \"undefined\") (function() {\r\n\r\n        var f64 = new Float64Array([-0]),\r\n            f8b = new Uint8Array(f64.buffer),\r\n            le  = f8b[7] === 128;\r\n\r\n        function writeDouble_f64_cpy(val, buf, pos) {\r\n            f64[0] = val;\r\n            buf[pos    ] = f8b[0];\r\n            buf[pos + 1] = f8b[1];\r\n            buf[pos + 2] = f8b[2];\r\n            buf[pos + 3] = f8b[3];\r\n            buf[pos + 4] = f8b[4];\r\n            buf[pos + 5] = f8b[5];\r\n            buf[pos + 6] = f8b[6];\r\n            buf[pos + 7] = f8b[7];\r\n        }\r\n\r\n        function writeDouble_f64_rev(val, buf, pos) {\r\n            f64[0] = val;\r\n            buf[pos    ] = f8b[7];\r\n            buf[pos + 1] = f8b[6];\r\n            buf[pos + 2] = f8b[5];\r\n            buf[pos + 3] = f8b[4];\r\n            buf[pos + 4] = f8b[3];\r\n            buf[pos + 5] = f8b[2];\r\n            buf[pos + 6] = f8b[1];\r\n            buf[pos + 7] = f8b[0];\r\n        }\r\n\r\n        /* istanbul ignore next */\r\n        exports.writeDoubleLE = le ? writeDouble_f64_cpy : writeDouble_f64_rev;\r\n        /* istanbul ignore next */\r\n        exports.writeDoubleBE = le ? writeDouble_f64_rev : writeDouble_f64_cpy;\r\n\r\n        function readDouble_f64_cpy(buf, pos) {\r\n            f8b[0] = buf[pos    ];\r\n            f8b[1] = buf[pos + 1];\r\n            f8b[2] = buf[pos + 2];\r\n            f8b[3] = buf[pos + 3];\r\n            f8b[4] = buf[pos + 4];\r\n            f8b[5] = buf[pos + 5];\r\n            f8b[6] = buf[pos + 6];\r\n            f8b[7] = buf[pos + 7];\r\n            return f64[0];\r\n        }\r\n\r\n        function readDouble_f64_rev(buf, pos) {\r\n            f8b[7] = buf[pos    ];\r\n            f8b[6] = buf[pos + 1];\r\n            f8b[5] = buf[pos + 2];\r\n            f8b[4] = buf[pos + 3];\r\n            f8b[3] = buf[pos + 4];\r\n            f8b[2] = buf[pos + 5];\r\n            f8b[1] = buf[pos + 6];\r\n            f8b[0] = buf[pos + 7];\r\n            return f64[0];\r\n        }\r\n\r\n        /* istanbul ignore next */\r\n        exports.readDoubleLE = le ? readDouble_f64_cpy : readDouble_f64_rev;\r\n        /* istanbul ignore next */\r\n        exports.readDoubleBE = le ? readDouble_f64_rev : readDouble_f64_cpy;\r\n\r\n    // double: ieee754\r\n    })(); else (function() {\r\n\r\n        function writeDouble_ieee754(writeUint, off0, off1, val, buf, pos) {\r\n            var sign = val < 0 ? 1 : 0;\r\n            if (sign)\r\n                val = -val;\r\n            if (val === 0) {\r\n                writeUint(0, buf, pos + off0);\r\n                writeUint(1 / val > 0 ? /* positive */ 0 : /* negative 0 */ 2147483648, buf, pos + off1);\r\n            } else if (isNaN(val)) {\r\n                writeUint(0, buf, pos + off0);\r\n                writeUint(2146959360, buf, pos + off1);\r\n            } else if (val > 1.7976931348623157e+308) { // +-Infinity\r\n                writeUint(0, buf, pos + off0);\r\n                writeUint((sign << 31 | 2146435072) >>> 0, buf, pos + off1);\r\n            } else {\r\n                var mantissa;\r\n                if (val < 2.2250738585072014e-308) { // denormal\r\n                    mantissa = val / 5e-324;\r\n                    writeUint(mantissa >>> 0, buf, pos + off0);\r\n                    writeUint((sign << 31 | mantissa / 4294967296) >>> 0, buf, pos + off1);\r\n                } else {\r\n                    var exponent = Math.floor(Math.log(val) / Math.LN2);\r\n                    if (exponent === 1024)\r\n                        exponent = 1023;\r\n                    mantissa = val * Math.pow(2, -exponent);\r\n                    writeUint(mantissa * 4503599627370496 >>> 0, buf, pos + off0);\r\n                    writeUint((sign << 31 | exponent + 1023 << 20 | mantissa * 1048576 & 1048575) >>> 0, buf, pos + off1);\r\n                }\r\n            }\r\n        }\r\n\r\n        exports.writeDoubleLE = writeDouble_ieee754.bind(null, writeUintLE, 0, 4);\r\n        exports.writeDoubleBE = writeDouble_ieee754.bind(null, writeUintBE, 4, 0);\r\n\r\n        function readDouble_ieee754(readUint, off0, off1, buf, pos) {\r\n            var lo = readUint(buf, pos + off0),\r\n                hi = readUint(buf, pos + off1);\r\n            var sign = (hi >> 31) * 2 + 1,\r\n                exponent = hi >>> 20 & 2047,\r\n                mantissa = 4294967296 * (hi & 1048575) + lo;\r\n            return exponent === 2047\r\n                ? mantissa\r\n                ? NaN\r\n                : sign * Infinity\r\n                : exponent === 0 // denormal\r\n                ? sign * 5e-324 * mantissa\r\n                : sign * Math.pow(2, exponent - 1075) * (mantissa + 4503599627370496);\r\n        }\r\n\r\n        exports.readDoubleLE = readDouble_ieee754.bind(null, readUintLE, 0, 4);\r\n        exports.readDoubleBE = readDouble_ieee754.bind(null, readUintBE, 4, 0);\r\n\r\n    })();\r\n\r\n    return exports;\r\n}\r\n\r\n// uint helpers\r\n\r\nfunction writeUintLE(val, buf, pos) {\r\n    buf[pos    ] =  val        & 255;\r\n    buf[pos + 1] =  val >>> 8  & 255;\r\n    buf[pos + 2] =  val >>> 16 & 255;\r\n    buf[pos + 3] =  val >>> 24;\r\n}\r\n\r\nfunction writeUintBE(val, buf, pos) {\r\n    buf[pos    ] =  val >>> 24;\r\n    buf[pos + 1] =  val >>> 16 & 255;\r\n    buf[pos + 2] =  val >>> 8  & 255;\r\n    buf[pos + 3] =  val        & 255;\r\n}\r\n\r\nfunction readUintLE(buf, pos) {\r\n    return (buf[pos    ]\r\n          | buf[pos + 1] << 8\r\n          | buf[pos + 2] << 16\r\n          | buf[pos + 3] << 24) >>> 0;\r\n}\r\n\r\nfunction readUintBE(buf, pos) {\r\n    return (buf[pos    ] << 24\r\n          | buf[pos + 1] << 16\r\n          | buf[pos + 2] << 8\r\n          | buf[pos + 3]) >>> 0;\r\n}\r\n", "\"use strict\";\r\nmodule.exports = inquire;\r\n\r\n/**\r\n * Requires a module only if available.\r\n * @memberof util\r\n * @param {string} moduleName Module to require\r\n * @returns {?Object} Required module if available and not empty, otherwise `null`\r\n */\r\nfunction inquire(moduleName) {\r\n    try {\r\n        var mod = eval(\"quire\".replace(/^/,\"re\"))(moduleName); // eslint-disable-line no-eval\r\n        if (mod && (mod.length || Object.keys(mod).length))\r\n            return mod;\r\n    } catch (e) {} // eslint-disable-line no-empty\r\n    return null;\r\n}\r\n", "\"use strict\";\r\n\r\n/**\r\n * A minimal UTF8 implementation for number arrays.\r\n * @memberof util\r\n * @namespace\r\n */\r\nvar utf8 = exports;\r\n\r\n/**\r\n * Calculates the UTF8 byte length of a string.\r\n * @param {string} string String\r\n * @returns {number} Byte length\r\n */\r\nutf8.length = function utf8_length(string) {\r\n    var len = 0,\r\n        c = 0;\r\n    for (var i = 0; i < string.length; ++i) {\r\n        c = string.charCodeAt(i);\r\n        if (c < 128)\r\n            len += 1;\r\n        else if (c < 2048)\r\n            len += 2;\r\n        else if ((c & 0xFC00) === 0xD800 && (string.charCodeAt(i + 1) & 0xFC00) === 0xDC00) {\r\n            ++i;\r\n            len += 4;\r\n        } else\r\n            len += 3;\r\n    }\r\n    return len;\r\n};\r\n\r\n/**\r\n * Reads UTF8 bytes as a string.\r\n * @param {Uint8Array} buffer Source buffer\r\n * @param {number} start Source start\r\n * @param {number} end Source end\r\n * @returns {string} String read\r\n */\r\nutf8.read = function utf8_read(buffer, start, end) {\r\n    var len = end - start;\r\n    if (len < 1)\r\n        return \"\";\r\n    var parts = null,\r\n        chunk = [],\r\n        i = 0, // char offset\r\n        t;     // temporary\r\n    while (start < end) {\r\n        t = buffer[start++];\r\n        if (t < 128)\r\n            chunk[i++] = t;\r\n        else if (t > 191 && t < 224)\r\n            chunk[i++] = (t & 31) << 6 | buffer[start++] & 63;\r\n        else if (t > 239 && t < 365) {\r\n            t = ((t & 7) << 18 | (buffer[start++] & 63) << 12 | (buffer[start++] & 63) << 6 | buffer[start++] & 63) - 0x10000;\r\n            chunk[i++] = 0xD800 + (t >> 10);\r\n            chunk[i++] = 0xDC00 + (t & 1023);\r\n        } else\r\n            chunk[i++] = (t & 15) << 12 | (buffer[start++] & 63) << 6 | buffer[start++] & 63;\r\n        if (i > 8191) {\r\n            (parts || (parts = [])).push(String.fromCharCode.apply(String, chunk));\r\n            i = 0;\r\n        }\r\n    }\r\n    if (parts) {\r\n        if (i)\r\n            parts.push(String.fromCharCode.apply(String, chunk.slice(0, i)));\r\n        return parts.join(\"\");\r\n    }\r\n    return String.fromCharCode.apply(String, chunk.slice(0, i));\r\n};\r\n\r\n/**\r\n * Writes a string as UTF8 bytes.\r\n * @param {string} string Source string\r\n * @param {Uint8Array} buffer Destination buffer\r\n * @param {number} offset Destination offset\r\n * @returns {number} Bytes written\r\n */\r\nutf8.write = function utf8_write(string, buffer, offset) {\r\n    var start = offset,\r\n        c1, // character 1\r\n        c2; // character 2\r\n    for (var i = 0; i < string.length; ++i) {\r\n        c1 = string.charCodeAt(i);\r\n        if (c1 < 128) {\r\n            buffer[offset++] = c1;\r\n        } else if (c1 < 2048) {\r\n            buffer[offset++] = c1 >> 6       | 192;\r\n            buffer[offset++] = c1       & 63 | 128;\r\n        } else if ((c1 & 0xFC00) === 0xD800 && ((c2 = string.charCodeAt(i + 1)) & 0xFC00) === 0xDC00) {\r\n            c1 = 0x10000 + ((c1 & 0x03FF) << 10) + (c2 & 0x03FF);\r\n            ++i;\r\n            buffer[offset++] = c1 >> 18      | 240;\r\n            buffer[offset++] = c1 >> 12 & 63 | 128;\r\n            buffer[offset++] = c1 >> 6  & 63 | 128;\r\n            buffer[offset++] = c1       & 63 | 128;\r\n        } else {\r\n            buffer[offset++] = c1 >> 12      | 224;\r\n            buffer[offset++] = c1 >> 6  & 63 | 128;\r\n            buffer[offset++] = c1       & 63 | 128;\r\n        }\r\n    }\r\n    return offset - start;\r\n};\r\n", "\"use strict\";\r\nmodule.exports = pool;\r\n\r\n/**\r\n * An allocator as used by {@link util.pool}.\r\n * @typedef PoolAllocator\r\n * @type {function}\r\n * @param {number} size Buffer size\r\n * @returns {Uint8Array} Buffer\r\n */\r\n\r\n/**\r\n * A slicer as used by {@link util.pool}.\r\n * @typedef PoolSlicer\r\n * @type {function}\r\n * @param {number} start Start offset\r\n * @param {number} end End offset\r\n * @returns {Uint8Array} Buffer slice\r\n * @this {Uint8Array}\r\n */\r\n\r\n/**\r\n * A general purpose buffer pool.\r\n * @memberof util\r\n * @function\r\n * @param {PoolAllocator} alloc Allocator\r\n * @param {PoolSlicer} slice Slicer\r\n * @param {number} [size=8192] Slab size\r\n * @returns {PoolAllocator} Pooled allocator\r\n */\r\nfunction pool(alloc, slice, size) {\r\n    var SIZE   = size || 8192;\r\n    var MAX    = SIZE >>> 1;\r\n    var slab   = null;\r\n    var offset = SIZE;\r\n    return function pool_alloc(size) {\r\n        if (size < 1 || size > MAX)\r\n            return alloc(size);\r\n        if (offset + size > SIZE) {\r\n            slab = alloc(SIZE);\r\n            offset = 0;\r\n        }\r\n        var buf = slice.call(slab, offset, offset += size);\r\n        if (offset & 7) // align to 32 bit\r\n            offset = (offset | 7) + 1;\r\n        return buf;\r\n    };\r\n}\r\n", "\"use strict\";\nmodule.exports = LongBits;\n\nvar util = require(\"../util/minimal\");\n\n/**\n * Constructs new long bits.\n * @classdesc Helper class for working with the low and high bits of a 64 bit value.\n * @memberof util\n * @constructor\n * @param {number} lo Low 32 bits, unsigned\n * @param {number} hi High 32 bits, unsigned\n */\nfunction LongBits(lo, hi) {\n\n    // note that the casts below are theoretically unnecessary as of today, but older statically\n    // generated converter code might still call the ctor with signed 32bits. kept for compat.\n\n    /**\n     * Low bits.\n     * @type {number}\n     */\n    this.lo = lo >>> 0;\n\n    /**\n     * High bits.\n     * @type {number}\n     */\n    this.hi = hi >>> 0;\n}\n\n/**\n * Zero bits.\n * @memberof util.LongBits\n * @type {util.LongBits}\n */\nvar zero = LongBits.zero = new LongBits(0, 0);\n\nzero.toNumber = function() { return 0; };\nzero.zzEncode = zero.zzDecode = function() { return this; };\nzero.length = function() { return 1; };\n\n/**\n * Zero hash.\n * @memberof util.LongBits\n * @type {string}\n */\nvar zeroHash = LongBits.zeroHash = \"\\0\\0\\0\\0\\0\\0\\0\\0\";\n\n/**\n * Constructs new long bits from the specified number.\n * @param {number} value Value\n * @returns {util.LongBits} Instance\n */\nLongBits.fromNumber = function fromNumber(value) {\n    if (value === 0)\n        return zero;\n    var sign = value < 0;\n    if (sign)\n        value = -value;\n    var lo = value >>> 0,\n        hi = (value - lo) / 4294967296 >>> 0;\n    if (sign) {\n        hi = ~hi >>> 0;\n        lo = ~lo >>> 0;\n        if (++lo > 4294967295) {\n            lo = 0;\n            if (++hi > 4294967295)\n                hi = 0;\n        }\n    }\n    return new LongBits(lo, hi);\n};\n\n/**\n * Constructs new long bits from a number, long or string.\n * @param {Long|number|string} value Value\n * @returns {util.LongBits} Instance\n */\nLongBits.from = function from(value) {\n    if (typeof value === \"number\")\n        return LongBits.fromNumber(value);\n    if (util.isString(value)) {\n        /* istanbul ignore else */\n        if (util.Long)\n            value = util.Long.fromString(value);\n        else\n            return LongBits.fromNumber(parseInt(value, 10));\n    }\n    return value.low || value.high ? new LongBits(value.low >>> 0, value.high >>> 0) : zero;\n};\n\n/**\n * Converts this long bits to a possibly unsafe JavaScript number.\n * @param {boolean} [unsigned=false] Whether unsigned or not\n * @returns {number} Possibly unsafe number\n */\nLongBits.prototype.toNumber = function toNumber(unsigned) {\n    if (!unsigned && this.hi >>> 31) {\n        var lo = ~this.lo + 1 >>> 0,\n            hi = ~this.hi     >>> 0;\n        if (!lo)\n            hi = hi + 1 >>> 0;\n        return -(lo + hi * 4294967296);\n    }\n    return this.lo + this.hi * 4294967296;\n};\n\n/**\n * Converts this long bits to a long.\n * @param {boolean} [unsigned=false] Whether unsigned or not\n * @returns {Long} Long\n */\nLongBits.prototype.toLong = function toLong(unsigned) {\n    return util.Long\n        ? new util.Long(this.lo | 0, this.hi | 0, Boolean(unsigned))\n        /* istanbul ignore next */\n        : { low: this.lo | 0, high: this.hi | 0, unsigned: Boolean(unsigned) };\n};\n\nvar charCodeAt = String.prototype.charCodeAt;\n\n/**\n * Constructs new long bits from the specified 8 characters long hash.\n * @param {string} hash Hash\n * @returns {util.LongBits} Bits\n */\nLongBits.fromHash = function fromHash(hash) {\n    if (hash === zeroHash)\n        return zero;\n    return new LongBits(\n        ( charCodeAt.call(hash, 0)\n        | charCodeAt.call(hash, 1) << 8\n        | charCodeAt.call(hash, 2) << 16\n        | charCodeAt.call(hash, 3) << 24) >>> 0\n    ,\n        ( charCodeAt.call(hash, 4)\n        | charCodeAt.call(hash, 5) << 8\n        | charCodeAt.call(hash, 6) << 16\n        | charCodeAt.call(hash, 7) << 24) >>> 0\n    );\n};\n\n/**\n * Converts this long bits to a 8 characters long hash.\n * @returns {string} Hash\n */\nLongBits.prototype.toHash = function toHash() {\n    return String.fromCharCode(\n        this.lo        & 255,\n        this.lo >>> 8  & 255,\n        this.lo >>> 16 & 255,\n        this.lo >>> 24      ,\n        this.hi        & 255,\n        this.hi >>> 8  & 255,\n        this.hi >>> 16 & 255,\n        this.hi >>> 24\n    );\n};\n\n/**\n * Zig-zag encodes this long bits.\n * @returns {util.LongBits} `this`\n */\nLongBits.prototype.zzEncode = function zzEncode() {\n    var mask =   this.hi >> 31;\n    this.hi  = ((this.hi << 1 | this.lo >>> 31) ^ mask) >>> 0;\n    this.lo  = ( this.lo << 1                   ^ mask) >>> 0;\n    return this;\n};\n\n/**\n * Zig-zag decodes this long bits.\n * @returns {util.LongBits} `this`\n */\nLongBits.prototype.zzDecode = function zzDecode() {\n    var mask = -(this.lo & 1);\n    this.lo  = ((this.lo >>> 1 | this.hi << 31) ^ mask) >>> 0;\n    this.hi  = ( this.hi >>> 1                  ^ mask) >>> 0;\n    return this;\n};\n\n/**\n * Calculates the length of this longbits when encoded as a varint.\n * @returns {number} Length\n */\nLongBits.prototype.length = function length() {\n    var part0 =  this.lo,\n        part1 = (this.lo >>> 28 | this.hi << 4) >>> 0,\n        part2 =  this.hi >>> 24;\n    return part2 === 0\n         ? part1 === 0\n           ? part0 < 16384\n             ? part0 < 128 ? 1 : 2\n             : part0 < 2097152 ? 3 : 4\n           : part1 < 16384\n             ? part1 < 128 ? 5 : 6\n             : part1 < 2097152 ? 7 : 8\n         : part2 < 128 ? 9 : 10;\n};\n", "\"use strict\";\nvar util = exports;\n\n// used to return a Promise where callback is omitted\nutil.asPromise = require(\"@protobufjs/aspromise\");\n\n// converts to / from base64 encoded strings\nutil.base64 = require(\"@protobufjs/base64\");\n\n// base class of rpc.Service\nutil.EventEmitter = require(\"@protobufjs/eventemitter\");\n\n// float handling accross browsers\nutil.float = require(\"@protobufjs/float\");\n\n// requires modules optionally and hides the call from bundlers\nutil.inquire = require(\"@protobufjs/inquire\");\n\n// converts to / from utf8 encoded strings\nutil.utf8 = require(\"@protobufjs/utf8\");\n\n// provides a node-like buffer pool in the browser\nutil.pool = require(\"@protobufjs/pool\");\n\n// utility to work with the low and high bits of a 64 bit value\nutil.LongBits = require(\"./longbits\");\n\n/**\n * Whether running within node or not.\n * @memberof util\n * @type {boolean}\n */\nutil.isNode = Boolean(typeof global !== \"undefined\"\n                   && global\n                   && global.process\n                   && global.process.versions\n                   && global.process.versions.node);\n\n/**\n * Global object reference.\n * @memberof util\n * @type {Object}\n */\nutil.global = util.isNode && global\n           || typeof window !== \"undefined\" && window\n           || typeof self   !== \"undefined\" && self\n           || this; // eslint-disable-line no-invalid-this\n\n/**\n * An immuable empty array.\n * @memberof util\n * @type {Array.<*>}\n * @const\n */\nutil.emptyArray = Object.freeze ? Object.freeze([]) : /* istanbul ignore next */ []; // used on prototypes\n\n/**\n * An immutable empty object.\n * @type {Object}\n * @const\n */\nutil.emptyObject = Object.freeze ? Object.freeze({}) : /* istanbul ignore next */ {}; // used on prototypes\n\n/**\n * Tests if the specified value is an integer.\n * @function\n * @param {*} value Value to test\n * @returns {boolean} `true` if the value is an integer\n */\nutil.isInteger = Number.isInteger || /* istanbul ignore next */ function isInteger(value) {\n    return typeof value === \"number\" && isFinite(value) && Math.floor(value) === value;\n};\n\n/**\n * Tests if the specified value is a string.\n * @param {*} value Value to test\n * @returns {boolean} `true` if the value is a string\n */\nutil.isString = function isString(value) {\n    return typeof value === \"string\" || value instanceof String;\n};\n\n/**\n * Tests if the specified value is a non-null object.\n * @param {*} value Value to test\n * @returns {boolean} `true` if the value is a non-null object\n */\nutil.isObject = function isObject(value) {\n    return value && typeof value === \"object\";\n};\n\n/**\n * Checks if a property on a message is considered to be present.\n * This is an alias of {@link util.isSet}.\n * @function\n * @param {Object} obj Plain object or message instance\n * @param {string} prop Property name\n * @returns {boolean} `true` if considered to be present, otherwise `false`\n */\nutil.isset =\n\n/**\n * Checks if a property on a message is considered to be present.\n * @param {Object} obj Plain object or message instance\n * @param {string} prop Property name\n * @returns {boolean} `true` if considered to be present, otherwise `false`\n */\nutil.isSet = function isSet(obj, prop) {\n    var value = obj[prop];\n    if (value != null && obj.hasOwnProperty(prop)) // eslint-disable-line eqeqeq, no-prototype-builtins\n        return typeof value !== \"object\" || (Array.isArray(value) ? value.length : Object.keys(value).length) > 0;\n    return false;\n};\n\n/**\n * Any compatible Buffer instance.\n * This is a minimal stand-alone definition of a Buffer instance. The actual type is that exported by node's typings.\n * @interface Buffer\n * @extends Uint8Array\n */\n\n/**\n * Node's Buffer class if available.\n * @type {Constructor<Buffer>}\n */\nutil.Buffer = (function() {\n    try {\n        var Buffer = util.inquire(\"buffer\").Buffer;\n        // refuse to use non-node buffers if not explicitly assigned (perf reasons):\n        return Buffer.prototype.utf8Write ? Buffer : /* istanbul ignore next */ null;\n    } catch (e) {\n        /* istanbul ignore next */\n        return null;\n    }\n})();\n\n// Internal alias of or polyfull for Buffer.from.\nutil._Buffer_from = null;\n\n// Internal alias of or polyfill for Buffer.allocUnsafe.\nutil._Buffer_allocUnsafe = null;\n\n/**\n * Creates a new buffer of whatever type supported by the environment.\n * @param {number|number[]} [sizeOrArray=0] Buffer size or number array\n * @returns {Uint8Array|Buffer} Buffer\n */\nutil.newBuffer = function newBuffer(sizeOrArray) {\n    /* istanbul ignore next */\n    return typeof sizeOrArray === \"number\"\n        ? util.Buffer\n            ? util._Buffer_allocUnsafe(sizeOrArray)\n            : new util.Array(sizeOrArray)\n        : util.Buffer\n            ? util._Buffer_from(sizeOrArray)\n            : typeof Uint8Array === \"undefined\"\n                ? sizeOrArray\n                : new Uint8Array(sizeOrArray);\n};\n\n/**\n * Array implementation used in the browser. `Uint8Array` if supported, otherwise `Array`.\n * @type {Constructor<Uint8Array>}\n */\nutil.Array = typeof Uint8Array !== \"undefined\" ? Uint8Array /* istanbul ignore next */ : Array;\n\n/**\n * Any compatible Long instance.\n * This is a minimal stand-alone definition of a Long instance. The actual type is that exported by long.js.\n * @interface Long\n * @property {number} low Low bits\n * @property {number} high High bits\n * @property {boolean} unsigned Whether unsigned or not\n */\n\n/**\n * Long.js's Long class if available.\n * @type {Constructor<Long>}\n */\nutil.Long = /* istanbul ignore next */ util.global.dcodeIO && /* istanbul ignore next */ util.global.dcodeIO.Long\n         || /* istanbul ignore next */ util.global.Long\n         || util.inquire(\"long\");\n\n/**\n * Regular expression used to verify 2 bit (`bool`) map keys.\n * @type {RegExp}\n * @const\n */\nutil.key2Re = /^true|false|0|1$/;\n\n/**\n * Regular expression used to verify 32 bit (`int32` etc.) map keys.\n * @type {RegExp}\n * @const\n */\nutil.key32Re = /^-?(?:0|[1-9][0-9]*)$/;\n\n/**\n * Regular expression used to verify 64 bit (`int64` etc.) map keys.\n * @type {RegExp}\n * @const\n */\nutil.key64Re = /^(?:[\\\\x00-\\\\xff]{8}|-?(?:0|[1-9][0-9]*))$/;\n\n/**\n * Converts a number or long to an 8 characters long hash string.\n * @param {Long|number} value Value to convert\n * @returns {string} Hash\n */\nutil.longToHash = function longToHash(value) {\n    return value\n        ? util.LongBits.from(value).toHash()\n        : util.LongBits.zeroHash;\n};\n\n/**\n * Converts an 8 characters long hash string to a long or number.\n * @param {string} hash Hash\n * @param {boolean} [unsigned=false] Whether unsigned or not\n * @returns {Long|number} Original value\n */\nutil.longFromHash = function longFromHash(hash, unsigned) {\n    var bits = util.LongBits.fromHash(hash);\n    if (util.Long)\n        return util.Long.fromBits(bits.lo, bits.hi, unsigned);\n    return bits.toNumber(Boolean(unsigned));\n};\n\n/**\n * Merges the properties of the source object into the destination object.\n * @memberof util\n * @param {Object.<string,*>} dst Destination object\n * @param {Object.<string,*>} src Source object\n * @param {boolean} [ifNotSet=false] Merges only if the key is not already set\n * @returns {Object.<string,*>} Destination object\n */\nfunction merge(dst, src, ifNotSet) { // used by converters\n    for (var keys = Object.keys(src), i = 0; i < keys.length; ++i)\n        if (dst[keys[i]] === undefined || !ifNotSet)\n            dst[keys[i]] = src[keys[i]];\n    return dst;\n}\n\nutil.merge = merge;\n\n/**\n * Converts the first character of a string to lower case.\n * @param {string} str String to convert\n * @returns {string} Converted string\n */\nutil.lcFirst = function lcFirst(str) {\n    return str.charAt(0).toLowerCase() + str.substring(1);\n};\n\n/**\n * Creates a custom error constructor.\n * @memberof util\n * @param {string} name Error name\n * @returns {Constructor<Error>} Custom error constructor\n */\nfunction newError(name) {\n\n    function CustomError(message, properties) {\n\n        if (!(this instanceof CustomError))\n            return new CustomError(message, properties);\n\n        // Error.call(this, message);\n        // ^ just returns a new error instance because the ctor can be called as a function\n\n        Object.defineProperty(this, \"message\", { get: function() { return message; } });\n\n        /* istanbul ignore next */\n        if (Error.captureStackTrace) // node\n            Error.captureStackTrace(this, CustomError);\n        else\n            Object.defineProperty(this, \"stack\", { value: new Error().stack || \"\" });\n\n        if (properties)\n            merge(this, properties);\n    }\n\n    CustomError.prototype = Object.create(Error.prototype, {\n        constructor: {\n            value: CustomError,\n            writable: true,\n            enumerable: false,\n            configurable: true,\n        },\n        name: {\n            get: function get() { return name; },\n            set: undefined,\n            enumerable: false,\n            // configurable: false would accurately preserve the behavior of\n            // the original, but I'm guessing that was not intentional.\n            // For an actual error subclass, this property would\n            // be configurable.\n            configurable: true,\n        },\n        toString: {\n            value: function value() { return this.name + \": \" + this.message; },\n            writable: true,\n            enumerable: false,\n            configurable: true,\n        },\n    });\n\n    return CustomError;\n}\n\nutil.newError = newError;\n\n/**\n * Constructs a new protocol error.\n * @classdesc Error subclass indicating a protocol specifc error.\n * @memberof util\n * @extends Error\n * @template T extends Message<T>\n * @constructor\n * @param {string} message Error message\n * @param {Object.<string,*>} [properties] Additional properties\n * @example\n * try {\n *     MyMessage.decode(someBuffer); // throws if required fields are missing\n * } catch (e) {\n *     if (e instanceof ProtocolError && e.instance)\n *         console.log(\"decoded so far: \" + JSON.stringify(e.instance));\n * }\n */\nutil.ProtocolError = newError(\"ProtocolError\");\n\n/**\n * So far decoded message instance.\n * @name util.ProtocolError#instance\n * @type {Message<T>}\n */\n\n/**\n * A OneOf getter as returned by {@link util.oneOfGetter}.\n * @typedef OneOfGetter\n * @type {function}\n * @returns {string|undefined} Set field name, if any\n */\n\n/**\n * Builds a getter for a oneof's present field name.\n * @param {string[]} fieldNames Field names\n * @returns {OneOfGetter} Unbound getter\n */\nutil.oneOfGetter = function getOneOf(fieldNames) {\n    var fieldMap = {};\n    for (var i = 0; i < fieldNames.length; ++i)\n        fieldMap[fieldNames[i]] = 1;\n\n    /**\n     * @returns {string|undefined} Set field name, if any\n     * @this Object\n     * @ignore\n     */\n    return function() { // eslint-disable-line consistent-return\n        for (var keys = Object.keys(this), i = keys.length - 1; i > -1; --i)\n            if (fieldMap[keys[i]] === 1 && this[keys[i]] !== undefined && this[keys[i]] !== null)\n                return keys[i];\n    };\n};\n\n/**\n * A OneOf setter as returned by {@link util.oneOfSetter}.\n * @typedef OneOfSetter\n * @type {function}\n * @param {string|undefined} value Field name\n * @returns {undefined}\n */\n\n/**\n * Builds a setter for a oneof's present field name.\n * @param {string[]} fieldNames Field names\n * @returns {OneOfSetter} Unbound setter\n */\nutil.oneOfSetter = function setOneOf(fieldNames) {\n\n    /**\n     * @param {string} name Field name\n     * @returns {undefined}\n     * @this Object\n     * @ignore\n     */\n    return function(name) {\n        for (var i = 0; i < fieldNames.length; ++i)\n            if (fieldNames[i] !== name)\n                delete this[fieldNames[i]];\n    };\n};\n\n/**\n * Default conversion options used for {@link Message#toJSON} implementations.\n *\n * These options are close to proto3's JSON mapping with the exception that internal types like Any are handled just like messages. More precisely:\n *\n * - Longs become strings\n * - Enums become string keys\n * - Bytes become base64 encoded strings\n * - (Sub-)Messages become plain objects\n * - Maps become plain objects with all string keys\n * - Repeated fields become arrays\n * - NaN and Infinity for float and double fields become strings\n *\n * @type {IConversionOptions}\n * @see https://developers.google.com/protocol-buffers/docs/proto3?hl=en#json\n */\nutil.toJSONOptions = {\n    longs: String,\n    enums: String,\n    bytes: String,\n    json: true\n};\n\n// Sets up buffer utility according to the environment (called in index-minimal)\nutil._configure = function() {\n    var Buffer = util.Buffer;\n    /* istanbul ignore if */\n    if (!Buffer) {\n        util._Buffer_from = util._Buffer_allocUnsafe = null;\n        return;\n    }\n    // because node 4.x buffers are incompatible & immutable\n    // see: https://github.com/dcodeIO/protobuf.js/pull/665\n    util._Buffer_from = Buffer.from !== Uint8Array.from && Buffer.from ||\n        /* istanbul ignore next */\n        function Buffer_from(value, encoding) {\n            return new Buffer(value, encoding);\n        };\n    util._Buffer_allocUnsafe = Buffer.allocUnsafe ||\n        /* istanbul ignore next */\n        function Buffer_allocUnsafe(size) {\n            return new Buffer(size);\n        };\n};\n", "\"use strict\";\nmodule.exports = Writer;\n\nvar util      = require(\"./util/minimal\");\n\nvar BufferWriter; // cyclic\n\nvar LongBits  = util.LongBits,\n    base64    = util.base64,\n    utf8      = util.utf8;\n\n/**\n * Constructs a new writer operation instance.\n * @classdesc Scheduled writer operation.\n * @constructor\n * @param {function(*, Uint8Array, number)} fn Function to call\n * @param {number} len Value byte length\n * @param {*} val Value to write\n * @ignore\n */\nfunction Op(fn, len, val) {\n\n    /**\n     * Function to call.\n     * @type {function(Uint8Array, number, *)}\n     */\n    this.fn = fn;\n\n    /**\n     * Value byte length.\n     * @type {number}\n     */\n    this.len = len;\n\n    /**\n     * Next operation.\n     * @type {Writer.Op|undefined}\n     */\n    this.next = undefined;\n\n    /**\n     * Value to write.\n     * @type {*}\n     */\n    this.val = val; // type varies\n}\n\n/* istanbul ignore next */\nfunction noop() {} // eslint-disable-line no-empty-function\n\n/**\n * Constructs a new writer state instance.\n * @classdesc Copied writer state.\n * @memberof Writer\n * @constructor\n * @param {Writer} writer Writer to copy state from\n * @ignore\n */\nfunction State(writer) {\n\n    /**\n     * Current head.\n     * @type {Writer.Op}\n     */\n    this.head = writer.head;\n\n    /**\n     * Current tail.\n     * @type {Writer.Op}\n     */\n    this.tail = writer.tail;\n\n    /**\n     * Current buffer length.\n     * @type {number}\n     */\n    this.len = writer.len;\n\n    /**\n     * Next state.\n     * @type {State|null}\n     */\n    this.next = writer.states;\n}\n\n/**\n * Constructs a new writer instance.\n * @classdesc Wire format writer using `Uint8Array` if available, otherwise `Array`.\n * @constructor\n */\nfunction Writer() {\n\n    /**\n     * Current length.\n     * @type {number}\n     */\n    this.len = 0;\n\n    /**\n     * Operations head.\n     * @type {Object}\n     */\n    this.head = new Op(noop, 0, 0);\n\n    /**\n     * Operations tail\n     * @type {Object}\n     */\n    this.tail = this.head;\n\n    /**\n     * Linked forked states.\n     * @type {Object|null}\n     */\n    this.states = null;\n\n    // When a value is written, the writer calculates its byte length and puts it into a linked\n    // list of operations to perform when finish() is called. This both allows us to allocate\n    // buffers of the exact required size and reduces the amount of work we have to do compared\n    // to first calculating over objects and then encoding over objects. In our case, the encoding\n    // part is just a linked list walk calling operations with already prepared values.\n}\n\nvar create = function create() {\n    return util.Buffer\n        ? function create_buffer_setup() {\n            return (Writer.create = function create_buffer() {\n                return new BufferWriter();\n            })();\n        }\n        /* istanbul ignore next */\n        : function create_array() {\n            return new Writer();\n        };\n};\n\n/**\n * Creates a new writer.\n * @function\n * @returns {BufferWriter|Writer} A {@link BufferWriter} when Buffers are supported, otherwise a {@link Writer}\n */\nWriter.create = create();\n\n/**\n * Allocates a buffer of the specified size.\n * @param {number} size Buffer size\n * @returns {Uint8Array} Buffer\n */\nWriter.alloc = function alloc(size) {\n    return new util.Array(size);\n};\n\n// Use Uint8Array buffer pool in the browser, just like node does with buffers\n/* istanbul ignore else */\nif (util.Array !== Array)\n    Writer.alloc = util.pool(Writer.alloc, util.Array.prototype.subarray);\n\n/**\n * Pushes a new operation to the queue.\n * @param {function(Uint8Array, number, *)} fn Function to call\n * @param {number} len Value byte length\n * @param {number} val Value to write\n * @returns {Writer} `this`\n * @private\n */\nWriter.prototype._push = function push(fn, len, val) {\n    this.tail = this.tail.next = new Op(fn, len, val);\n    this.len += len;\n    return this;\n};\n\nfunction writeByte(val, buf, pos) {\n    buf[pos] = val & 255;\n}\n\nfunction writeVarint32(val, buf, pos) {\n    while (val > 127) {\n        buf[pos++] = val & 127 | 128;\n        val >>>= 7;\n    }\n    buf[pos] = val;\n}\n\n/**\n * Constructs a new varint writer operation instance.\n * @classdesc Scheduled varint writer operation.\n * @extends Op\n * @constructor\n * @param {number} len Value byte length\n * @param {number} val Value to write\n * @ignore\n */\nfunction VarintOp(len, val) {\n    this.len = len;\n    this.next = undefined;\n    this.val = val;\n}\n\nVarintOp.prototype = Object.create(Op.prototype);\nVarintOp.prototype.fn = writeVarint32;\n\n/**\n * Writes an unsigned 32 bit value as a varint.\n * @param {number} value Value to write\n * @returns {Writer} `this`\n */\nWriter.prototype.uint32 = function write_uint32(value) {\n    // here, the call to this.push has been inlined and a varint specific Op subclass is used.\n    // uint32 is by far the most frequently used operation and benefits significantly from this.\n    this.len += (this.tail = this.tail.next = new VarintOp(\n        (value = value >>> 0)\n                < 128       ? 1\n        : value < 16384     ? 2\n        : value < 2097152   ? 3\n        : value < 268435456 ? 4\n        :                     5,\n    value)).len;\n    return this;\n};\n\n/**\n * Writes a signed 32 bit value as a varint.\n * @function\n * @param {number} value Value to write\n * @returns {Writer} `this`\n */\nWriter.prototype.int32 = function write_int32(value) {\n    return value < 0\n        ? this._push(writeVarint64, 10, LongBits.fromNumber(value)) // 10 bytes per spec\n        : this.uint32(value);\n};\n\n/**\n * Writes a 32 bit value as a varint, zig-zag encoded.\n * @param {number} value Value to write\n * @returns {Writer} `this`\n */\nWriter.prototype.sint32 = function write_sint32(value) {\n    return this.uint32((value << 1 ^ value >> 31) >>> 0);\n};\n\nfunction writeVarint64(val, buf, pos) {\n    while (val.hi) {\n        buf[pos++] = val.lo & 127 | 128;\n        val.lo = (val.lo >>> 7 | val.hi << 25) >>> 0;\n        val.hi >>>= 7;\n    }\n    while (val.lo > 127) {\n        buf[pos++] = val.lo & 127 | 128;\n        val.lo = val.lo >>> 7;\n    }\n    buf[pos++] = val.lo;\n}\n\n/**\n * Writes an unsigned 64 bit value as a varint.\n * @param {Long|number|string} value Value to write\n * @returns {Writer} `this`\n * @throws {TypeError} If `value` is a string and no long library is present.\n */\nWriter.prototype.uint64 = function write_uint64(value) {\n    var bits = LongBits.from(value);\n    return this._push(writeVarint64, bits.length(), bits);\n};\n\n/**\n * Writes a signed 64 bit value as a varint.\n * @function\n * @param {Long|number|string} value Value to write\n * @returns {Writer} `this`\n * @throws {TypeError} If `value` is a string and no long library is present.\n */\nWriter.prototype.int64 = Writer.prototype.uint64;\n\n/**\n * Writes a signed 64 bit value as a varint, zig-zag encoded.\n * @param {Long|number|string} value Value to write\n * @returns {Writer} `this`\n * @throws {TypeError} If `value` is a string and no long library is present.\n */\nWriter.prototype.sint64 = function write_sint64(value) {\n    var bits = LongBits.from(value).zzEncode();\n    return this._push(writeVarint64, bits.length(), bits);\n};\n\n/**\n * Writes a boolish value as a varint.\n * @param {boolean} value Value to write\n * @returns {Writer} `this`\n */\nWriter.prototype.bool = function write_bool(value) {\n    return this._push(writeByte, 1, value ? 1 : 0);\n};\n\nfunction writeFixed32(val, buf, pos) {\n    buf[pos    ] =  val         & 255;\n    buf[pos + 1] =  val >>> 8   & 255;\n    buf[pos + 2] =  val >>> 16  & 255;\n    buf[pos + 3] =  val >>> 24;\n}\n\n/**\n * Writes an unsigned 32 bit value as fixed 32 bits.\n * @param {number} value Value to write\n * @returns {Writer} `this`\n */\nWriter.prototype.fixed32 = function write_fixed32(value) {\n    return this._push(writeFixed32, 4, value >>> 0);\n};\n\n/**\n * Writes a signed 32 bit value as fixed 32 bits.\n * @function\n * @param {number} value Value to write\n * @returns {Writer} `this`\n */\nWriter.prototype.sfixed32 = Writer.prototype.fixed32;\n\n/**\n * Writes an unsigned 64 bit value as fixed 64 bits.\n * @param {Long|number|string} value Value to write\n * @returns {Writer} `this`\n * @throws {TypeError} If `value` is a string and no long library is present.\n */\nWriter.prototype.fixed64 = function write_fixed64(value) {\n    var bits = LongBits.from(value);\n    return this._push(writeFixed32, 4, bits.lo)._push(writeFixed32, 4, bits.hi);\n};\n\n/**\n * Writes a signed 64 bit value as fixed 64 bits.\n * @function\n * @param {Long|number|string} value Value to write\n * @returns {Writer} `this`\n * @throws {TypeError} If `value` is a string and no long library is present.\n */\nWriter.prototype.sfixed64 = Writer.prototype.fixed64;\n\n/**\n * Writes a float (32 bit).\n * @function\n * @param {number} value Value to write\n * @returns {Writer} `this`\n */\nWriter.prototype.float = function write_float(value) {\n    return this._push(util.float.writeFloatLE, 4, value);\n};\n\n/**\n * Writes a double (64 bit float).\n * @function\n * @param {number} value Value to write\n * @returns {Writer} `this`\n */\nWriter.prototype.double = function write_double(value) {\n    return this._push(util.float.writeDoubleLE, 8, value);\n};\n\nvar writeBytes = util.Array.prototype.set\n    ? function writeBytes_set(val, buf, pos) {\n        buf.set(val, pos); // also works for plain array values\n    }\n    /* istanbul ignore next */\n    : function writeBytes_for(val, buf, pos) {\n        for (var i = 0; i < val.length; ++i)\n            buf[pos + i] = val[i];\n    };\n\n/**\n * Writes a sequence of bytes.\n * @param {Uint8Array|string} value Buffer or base64 encoded string to write\n * @returns {Writer} `this`\n */\nWriter.prototype.bytes = function write_bytes(value) {\n    var len = value.length >>> 0;\n    if (!len)\n        return this._push(writeByte, 1, 0);\n    if (util.isString(value)) {\n        var buf = Writer.alloc(len = base64.length(value));\n        base64.decode(value, buf, 0);\n        value = buf;\n    }\n    return this.uint32(len)._push(writeBytes, len, value);\n};\n\n/**\n * Writes a string.\n * @param {string} value Value to write\n * @returns {Writer} `this`\n */\nWriter.prototype.string = function write_string(value) {\n    var len = utf8.length(value);\n    return len\n        ? this.uint32(len)._push(utf8.write, len, value)\n        : this._push(writeByte, 1, 0);\n};\n\n/**\n * Forks this writer's state by pushing it to a stack.\n * Calling {@link Writer#reset|reset} or {@link Writer#ldelim|ldelim} resets the writer to the previous state.\n * @returns {Writer} `this`\n */\nWriter.prototype.fork = function fork() {\n    this.states = new State(this);\n    this.head = this.tail = new Op(noop, 0, 0);\n    this.len = 0;\n    return this;\n};\n\n/**\n * Resets this instance to the last state.\n * @returns {Writer} `this`\n */\nWriter.prototype.reset = function reset() {\n    if (this.states) {\n        this.head   = this.states.head;\n        this.tail   = this.states.tail;\n        this.len    = this.states.len;\n        this.states = this.states.next;\n    } else {\n        this.head = this.tail = new Op(noop, 0, 0);\n        this.len  = 0;\n    }\n    return this;\n};\n\n/**\n * Resets to the last state and appends the fork state's current write length as a varint followed by its operations.\n * @returns {Writer} `this`\n */\nWriter.prototype.ldelim = function ldelim() {\n    var head = this.head,\n        tail = this.tail,\n        len  = this.len;\n    this.reset().uint32(len);\n    if (len) {\n        this.tail.next = head.next; // skip noop\n        this.tail = tail;\n        this.len += len;\n    }\n    return this;\n};\n\n/**\n * Finishes the write operation.\n * @returns {Uint8Array} Finished buffer\n */\nWriter.prototype.finish = function finish() {\n    var head = this.head.next, // skip noop\n        buf  = this.constructor.alloc(this.len),\n        pos  = 0;\n    while (head) {\n        head.fn(head.val, buf, pos);\n        pos += head.len;\n        head = head.next;\n    }\n    // this.head = this.tail = null;\n    return buf;\n};\n\nWriter._configure = function(BufferWriter_) {\n    BufferWriter = BufferWriter_;\n    Writer.create = create();\n    BufferWriter._configure();\n};\n", "\"use strict\";\nmodule.exports = BufferWriter;\n\n// extends Writer\nvar Writer = require(\"./writer\");\n(BufferWriter.prototype = Object.create(Writer.prototype)).constructor = BufferWriter;\n\nvar util = require(\"./util/minimal\");\n\n/**\n * Constructs a new buffer writer instance.\n * @classdesc Wire format writer using node buffers.\n * @extends Writer\n * @constructor\n */\nfunction BufferWriter() {\n    Writer.call(this);\n}\n\nBufferWriter._configure = function () {\n    /**\n     * Allocates a buffer of the specified size.\n     * @function\n     * @param {number} size Buffer size\n     * @returns {Buffer} Buffer\n     */\n    BufferWriter.alloc = util._Buffer_allocUnsafe;\n\n    BufferWriter.writeBytesBuffer = util.Buffer && util.Buffer.prototype instanceof Uint8Array && util.Buffer.prototype.set.name === \"set\"\n        ? function writeBytesBuffer_set(val, buf, pos) {\n          buf.set(val, pos); // faster than copy (requires node >= 4 where Buffers extend Uint8Array and set is properly inherited)\n          // also works for plain array values\n        }\n        /* istanbul ignore next */\n        : function writeBytesBuffer_copy(val, buf, pos) {\n          if (val.copy) // Buffer values\n            val.copy(buf, pos, 0, val.length);\n          else for (var i = 0; i < val.length;) // plain array values\n            buf[pos++] = val[i++];\n        };\n};\n\n\n/**\n * @override\n */\nBufferWriter.prototype.bytes = function write_bytes_buffer(value) {\n    if (util.isString(value))\n        value = util._Buffer_from(value, \"base64\");\n    var len = value.length >>> 0;\n    this.uint32(len);\n    if (len)\n        this._push(BufferWriter.writeBytesBuffer, len, value);\n    return this;\n};\n\nfunction writeStringBuffer(val, buf, pos) {\n    if (val.length < 40) // plain js is faster for short strings (probably due to redundant assertions)\n        util.utf8.write(val, buf, pos);\n    else if (buf.utf8Write)\n        buf.utf8Write(val, pos);\n    else\n        buf.write(val, pos);\n}\n\n/**\n * @override\n */\nBufferWriter.prototype.string = function write_string_buffer(value) {\n    var len = util.Buffer.byteLength(value);\n    this.uint32(len);\n    if (len)\n        this._push(writeStringBuffer, len, value);\n    return this;\n};\n\n\n/**\n * Finishes the write operation.\n * @name BufferWriter#finish\n * @function\n * @returns {Buffer} Finished buffer\n */\n\nBufferWriter._configure();\n", "\"use strict\";\nmodule.exports = Reader;\n\nvar util      = require(\"./util/minimal\");\n\nvar BufferReader; // cyclic\n\nvar LongBits  = util.LongBits,\n    utf8      = util.utf8;\n\n/* istanbul ignore next */\nfunction indexOutOfRange(reader, writeLength) {\n    return RangeError(\"index out of range: \" + reader.pos + \" + \" + (writeLength || 1) + \" > \" + reader.len);\n}\n\n/**\n * Constructs a new reader instance using the specified buffer.\n * @classdesc Wire format reader using `Uint8Array` if available, otherwise `Array`.\n * @constructor\n * @param {Uint8Array} buffer Buffer to read from\n */\nfunction Reader(buffer) {\n\n    /**\n     * Read buffer.\n     * @type {Uint8Array}\n     */\n    this.buf = buffer;\n\n    /**\n     * Read buffer position.\n     * @type {number}\n     */\n    this.pos = 0;\n\n    /**\n     * Read buffer length.\n     * @type {number}\n     */\n    this.len = buffer.length;\n}\n\nvar create_array = typeof Uint8Array !== \"undefined\"\n    ? function create_typed_array(buffer) {\n        if (buffer instanceof Uint8Array || Array.isArray(buffer))\n            return new Reader(buffer);\n        throw Error(\"illegal buffer\");\n    }\n    /* istanbul ignore next */\n    : function create_array(buffer) {\n        if (Array.isArray(buffer))\n            return new Reader(buffer);\n        throw Error(\"illegal buffer\");\n    };\n\nvar create = function create() {\n    return util.Buffer\n        ? function create_buffer_setup(buffer) {\n            return (Reader.create = function create_buffer(buffer) {\n                return util.Buffer.isBuffer(buffer)\n                    ? new BufferReader(buffer)\n                    /* istanbul ignore next */\n                    : create_array(buffer);\n            })(buffer);\n        }\n        /* istanbul ignore next */\n        : create_array;\n};\n\n/**\n * Creates a new reader using the specified buffer.\n * @function\n * @param {Uint8Array|Buffer} buffer Buffer to read from\n * @returns {Reader|BufferReader} A {@link BufferReader} if `buffer` is a Buffer, otherwise a {@link Reader}\n * @throws {Error} If `buffer` is not a valid buffer\n */\nReader.create = create();\n\nReader.prototype._slice = util.Array.prototype.subarray || /* istanbul ignore next */ util.Array.prototype.slice;\n\n/**\n * Reads a varint as an unsigned 32 bit value.\n * @function\n * @returns {number} Value read\n */\nReader.prototype.uint32 = (function read_uint32_setup() {\n    var value = 4294967295; // optimizer type-hint, tends to deopt otherwise (?!)\n    return function read_uint32() {\n        value = (         this.buf[this.pos] & 127       ) >>> 0; if (this.buf[this.pos++] < 128) return value;\n        value = (value | (this.buf[this.pos] & 127) <<  7) >>> 0; if (this.buf[this.pos++] < 128) return value;\n        value = (value | (this.buf[this.pos] & 127) << 14) >>> 0; if (this.buf[this.pos++] < 128) return value;\n        value = (value | (this.buf[this.pos] & 127) << 21) >>> 0; if (this.buf[this.pos++] < 128) return value;\n        value = (value | (this.buf[this.pos] &  15) << 28) >>> 0; if (this.buf[this.pos++] < 128) return value;\n\n        /* istanbul ignore if */\n        if ((this.pos += 5) > this.len) {\n            this.pos = this.len;\n            throw indexOutOfRange(this, 10);\n        }\n        return value;\n    };\n})();\n\n/**\n * Reads a varint as a signed 32 bit value.\n * @returns {number} Value read\n */\nReader.prototype.int32 = function read_int32() {\n    return this.uint32() | 0;\n};\n\n/**\n * Reads a zig-zag encoded varint as a signed 32 bit value.\n * @returns {number} Value read\n */\nReader.prototype.sint32 = function read_sint32() {\n    var value = this.uint32();\n    return value >>> 1 ^ -(value & 1) | 0;\n};\n\n/* eslint-disable no-invalid-this */\n\nfunction readLongVarint() {\n    // tends to deopt with local vars for octet etc.\n    var bits = new LongBits(0, 0);\n    var i = 0;\n    if (this.len - this.pos > 4) { // fast route (lo)\n        for (; i < 4; ++i) {\n            // 1st..4th\n            bits.lo = (bits.lo | (this.buf[this.pos] & 127) << i * 7) >>> 0;\n            if (this.buf[this.pos++] < 128)\n                return bits;\n        }\n        // 5th\n        bits.lo = (bits.lo | (this.buf[this.pos] & 127) << 28) >>> 0;\n        bits.hi = (bits.hi | (this.buf[this.pos] & 127) >>  4) >>> 0;\n        if (this.buf[this.pos++] < 128)\n            return bits;\n        i = 0;\n    } else {\n        for (; i < 3; ++i) {\n            /* istanbul ignore if */\n            if (this.pos >= this.len)\n                throw indexOutOfRange(this);\n            // 1st..3th\n            bits.lo = (bits.lo | (this.buf[this.pos] & 127) << i * 7) >>> 0;\n            if (this.buf[this.pos++] < 128)\n                return bits;\n        }\n        // 4th\n        bits.lo = (bits.lo | (this.buf[this.pos++] & 127) << i * 7) >>> 0;\n        return bits;\n    }\n    if (this.len - this.pos > 4) { // fast route (hi)\n        for (; i < 5; ++i) {\n            // 6th..10th\n            bits.hi = (bits.hi | (this.buf[this.pos] & 127) << i * 7 + 3) >>> 0;\n            if (this.buf[this.pos++] < 128)\n                return bits;\n        }\n    } else {\n        for (; i < 5; ++i) {\n            /* istanbul ignore if */\n            if (this.pos >= this.len)\n                throw indexOutOfRange(this);\n            // 6th..10th\n            bits.hi = (bits.hi | (this.buf[this.pos] & 127) << i * 7 + 3) >>> 0;\n            if (this.buf[this.pos++] < 128)\n                return bits;\n        }\n    }\n    /* istanbul ignore next */\n    throw Error(\"invalid varint encoding\");\n}\n\n/* eslint-enable no-invalid-this */\n\n/**\n * Reads a varint as a signed 64 bit value.\n * @name Reader#int64\n * @function\n * @returns {Long} Value read\n */\n\n/**\n * Reads a varint as an unsigned 64 bit value.\n * @name Reader#uint64\n * @function\n * @returns {Long} Value read\n */\n\n/**\n * Reads a zig-zag encoded varint as a signed 64 bit value.\n * @name Reader#sint64\n * @function\n * @returns {Long} Value read\n */\n\n/**\n * Reads a varint as a boolean.\n * @returns {boolean} Value read\n */\nReader.prototype.bool = function read_bool() {\n    return this.uint32() !== 0;\n};\n\nfunction readFixed32_end(buf, end) { // note that this uses `end`, not `pos`\n    return (buf[end - 4]\n          | buf[end - 3] << 8\n          | buf[end - 2] << 16\n          | buf[end - 1] << 24) >>> 0;\n}\n\n/**\n * Reads fixed 32 bits as an unsigned 32 bit integer.\n * @returns {number} Value read\n */\nReader.prototype.fixed32 = function read_fixed32() {\n\n    /* istanbul ignore if */\n    if (this.pos + 4 > this.len)\n        throw indexOutOfRange(this, 4);\n\n    return readFixed32_end(this.buf, this.pos += 4);\n};\n\n/**\n * Reads fixed 32 bits as a signed 32 bit integer.\n * @returns {number} Value read\n */\nReader.prototype.sfixed32 = function read_sfixed32() {\n\n    /* istanbul ignore if */\n    if (this.pos + 4 > this.len)\n        throw indexOutOfRange(this, 4);\n\n    return readFixed32_end(this.buf, this.pos += 4) | 0;\n};\n\n/* eslint-disable no-invalid-this */\n\nfunction readFixed64(/* this: Reader */) {\n\n    /* istanbul ignore if */\n    if (this.pos + 8 > this.len)\n        throw indexOutOfRange(this, 8);\n\n    return new LongBits(readFixed32_end(this.buf, this.pos += 4), readFixed32_end(this.buf, this.pos += 4));\n}\n\n/* eslint-enable no-invalid-this */\n\n/**\n * Reads fixed 64 bits.\n * @name Reader#fixed64\n * @function\n * @returns {Long} Value read\n */\n\n/**\n * Reads zig-zag encoded fixed 64 bits.\n * @name Reader#sfixed64\n * @function\n * @returns {Long} Value read\n */\n\n/**\n * Reads a float (32 bit) as a number.\n * @function\n * @returns {number} Value read\n */\nReader.prototype.float = function read_float() {\n\n    /* istanbul ignore if */\n    if (this.pos + 4 > this.len)\n        throw indexOutOfRange(this, 4);\n\n    var value = util.float.readFloatLE(this.buf, this.pos);\n    this.pos += 4;\n    return value;\n};\n\n/**\n * Reads a double (64 bit float) as a number.\n * @function\n * @returns {number} Value read\n */\nReader.prototype.double = function read_double() {\n\n    /* istanbul ignore if */\n    if (this.pos + 8 > this.len)\n        throw indexOutOfRange(this, 4);\n\n    var value = util.float.readDoubleLE(this.buf, this.pos);\n    this.pos += 8;\n    return value;\n};\n\n/**\n * Reads a sequence of bytes preceeded by its length as a varint.\n * @returns {Uint8Array} Value read\n */\nReader.prototype.bytes = function read_bytes() {\n    var length = this.uint32(),\n        start  = this.pos,\n        end    = this.pos + length;\n\n    /* istanbul ignore if */\n    if (end > this.len)\n        throw indexOutOfRange(this, length);\n\n    this.pos += length;\n    if (Array.isArray(this.buf)) // plain array\n        return this.buf.slice(start, end);\n\n    if (start === end) { // fix for IE 10/Win8 and others' subarray returning array of size 1\n        var nativeBuffer = util.Buffer;\n        return nativeBuffer\n            ? nativeBuffer.alloc(0)\n            : new this.buf.constructor(0);\n    }\n    return this._slice.call(this.buf, start, end);\n};\n\n/**\n * Reads a string preceeded by its byte length as a varint.\n * @returns {string} Value read\n */\nReader.prototype.string = function read_string() {\n    var bytes = this.bytes();\n    return utf8.read(bytes, 0, bytes.length);\n};\n\n/**\n * Skips the specified number of bytes if specified, otherwise skips a varint.\n * @param {number} [length] Length if known, otherwise a varint is assumed\n * @returns {Reader} `this`\n */\nReader.prototype.skip = function skip(length) {\n    if (typeof length === \"number\") {\n        /* istanbul ignore if */\n        if (this.pos + length > this.len)\n            throw indexOutOfRange(this, length);\n        this.pos += length;\n    } else {\n        do {\n            /* istanbul ignore if */\n            if (this.pos >= this.len)\n                throw indexOutOfRange(this);\n        } while (this.buf[this.pos++] & 128);\n    }\n    return this;\n};\n\n/**\n * Skips the next element of the specified wire type.\n * @param {number} wireType Wire type received\n * @returns {Reader} `this`\n */\nReader.prototype.skipType = function(wireType) {\n    switch (wireType) {\n        case 0:\n            this.skip();\n            break;\n        case 1:\n            this.skip(8);\n            break;\n        case 2:\n            this.skip(this.uint32());\n            break;\n        case 3:\n            while ((wireType = this.uint32() & 7) !== 4) {\n                this.skipType(wireType);\n            }\n            break;\n        case 5:\n            this.skip(4);\n            break;\n\n        /* istanbul ignore next */\n        default:\n            throw Error(\"invalid wire type \" + wireType + \" at offset \" + this.pos);\n    }\n    return this;\n};\n\nReader._configure = function(BufferReader_) {\n    BufferReader = BufferReader_;\n    Reader.create = create();\n    BufferReader._configure();\n\n    var fn = util.Long ? \"toLong\" : /* istanbul ignore next */ \"toNumber\";\n    util.merge(Reader.prototype, {\n\n        int64: function read_int64() {\n            return readLongVarint.call(this)[fn](false);\n        },\n\n        uint64: function read_uint64() {\n            return readLongVarint.call(this)[fn](true);\n        },\n\n        sint64: function read_sint64() {\n            return readLongVarint.call(this).zzDecode()[fn](false);\n        },\n\n        fixed64: function read_fixed64() {\n            return readFixed64.call(this)[fn](true);\n        },\n\n        sfixed64: function read_sfixed64() {\n            return readFixed64.call(this)[fn](false);\n        }\n\n    });\n};\n", "\"use strict\";\nmodule.exports = BufferReader;\n\n// extends Reader\nvar Reader = require(\"./reader\");\n(BufferReader.prototype = Object.create(Reader.prototype)).constructor = BufferReader;\n\nvar util = require(\"./util/minimal\");\n\n/**\n * Constructs a new buffer reader instance.\n * @classdesc Wire format reader using node buffers.\n * @extends Reader\n * @constructor\n * @param {Buffer} buffer Buffer to read from\n */\nfunction BufferReader(buffer) {\n    Reader.call(this, buffer);\n\n    /**\n     * Read buffer.\n     * @name BufferReader#buf\n     * @type {Buffer}\n     */\n}\n\nBufferReader._configure = function () {\n    /* istanbul ignore else */\n    if (util.Buffer)\n        BufferReader.prototype._slice = util.Buffer.prototype.slice;\n};\n\n\n/**\n * @override\n */\nBufferReader.prototype.string = function read_string_buffer() {\n    var len = this.uint32(); // modifies pos\n    return this.buf.utf8Slice\n        ? this.buf.utf8Slice(this.pos, this.pos = Math.min(this.pos + len, this.len))\n        : this.buf.toString(\"utf-8\", this.pos, this.pos = Math.min(this.pos + len, this.len));\n};\n\n/**\n * Reads a sequence of bytes preceeded by its length as a varint.\n * @name BufferReader#bytes\n * @function\n * @returns {Buffer} Value read\n */\n\nBufferReader._configure();\n", "\"use strict\";\nmodule.exports = Service;\n\nvar util = require(\"../util/minimal\");\n\n// Extends EventEmitter\n(Service.prototype = Object.create(util.EventEmitter.prototype)).constructor = Service;\n\n/**\n * A service method callback as used by {@link rpc.ServiceMethod|ServiceMethod}.\n *\n * Differs from {@link RPCImplCallback} in that it is an actual callback of a service method which may not return `response = null`.\n * @typedef rpc.ServiceMethodCallback\n * @template TRes extends Message<TRes>\n * @type {function}\n * @param {Error|null} error Error, if any\n * @param {TRes} [response] Response message\n * @returns {undefined}\n */\n\n/**\n * A service method part of a {@link rpc.Service} as created by {@link Service.create}.\n * @typedef rpc.ServiceMethod\n * @template TReq extends Message<TReq>\n * @template TRes extends Message<TRes>\n * @type {function}\n * @param {TReq|Properties<TReq>} request Request message or plain object\n * @param {rpc.ServiceMethodCallback<TRes>} [callback] Node-style callback called with the error, if any, and the response message\n * @returns {Promise<Message<TRes>>} Promise if `callback` has been omitted, otherwise `undefined`\n */\n\n/**\n * Constructs a new RPC service instance.\n * @classdesc An RPC service as returned by {@link Service#create}.\n * @exports rpc.Service\n * @extends util.EventEmitter\n * @constructor\n * @param {RPCImpl} rpcImpl RPC implementation\n * @param {boolean} [requestDelimited=false] Whether requests are length-delimited\n * @param {boolean} [responseDelimited=false] Whether responses are length-delimited\n */\nfunction Service(rpcImpl, requestDelimited, responseDelimited) {\n\n    if (typeof rpcImpl !== \"function\")\n        throw TypeError(\"rpcImpl must be a function\");\n\n    util.EventEmitter.call(this);\n\n    /**\n     * RPC implementation. Becomes `null` once the service is ended.\n     * @type {RPCImpl|null}\n     */\n    this.rpcImpl = rpcImpl;\n\n    /**\n     * Whether requests are length-delimited.\n     * @type {boolean}\n     */\n    this.requestDelimited = Boolean(requestDelimited);\n\n    /**\n     * Whether responses are length-delimited.\n     * @type {boolean}\n     */\n    this.responseDelimited = Boolean(responseDelimited);\n}\n\n/**\n * Calls a service method through {@link rpc.Service#rpcImpl|rpcImpl}.\n * @param {Method|rpc.ServiceMethod<TReq,TRes>} method Reflected or static method\n * @param {Constructor<TReq>} requestCtor Request constructor\n * @param {Constructor<TRes>} responseCtor Response constructor\n * @param {TReq|Properties<TReq>} request Request message or plain object\n * @param {rpc.ServiceMethodCallback<TRes>} callback Service callback\n * @returns {undefined}\n * @template TReq extends Message<TReq>\n * @template TRes extends Message<TRes>\n */\nService.prototype.rpcCall = function rpcCall(method, requestCtor, responseCtor, request, callback) {\n\n    if (!request)\n        throw TypeError(\"request must be specified\");\n\n    var self = this;\n    if (!callback)\n        return util.asPromise(rpcCall, self, method, requestCtor, responseCtor, request);\n\n    if (!self.rpcImpl) {\n        setTimeout(function() { callback(Error(\"already ended\")); }, 0);\n        return undefined;\n    }\n\n    try {\n        return self.rpcImpl(\n            method,\n            requestCtor[self.requestDelimited ? \"encodeDelimited\" : \"encode\"](request).finish(),\n            function rpcCallback(err, response) {\n\n                if (err) {\n                    self.emit(\"error\", err, method);\n                    return callback(err);\n                }\n\n                if (response === null) {\n                    self.end(/* endedByRPC */ true);\n                    return undefined;\n                }\n\n                if (!(response instanceof responseCtor)) {\n                    try {\n                        response = responseCtor[self.responseDelimited ? \"decodeDelimited\" : \"decode\"](response);\n                    } catch (err) {\n                        self.emit(\"error\", err, method);\n                        return callback(err);\n                    }\n                }\n\n                self.emit(\"data\", response, method);\n                return callback(null, response);\n            }\n        );\n    } catch (err) {\n        self.emit(\"error\", err, method);\n        setTimeout(function() { callback(err); }, 0);\n        return undefined;\n    }\n};\n\n/**\n * Ends this service and emits the `end` event.\n * @param {boolean} [endedByRPC=false] Whether the service has been ended by the RPC implementation.\n * @returns {rpc.Service} `this`\n */\nService.prototype.end = function end(endedByRPC) {\n    if (this.rpcImpl) {\n        if (!endedByRPC) // signal end to rpcImpl\n            this.rpcImpl(null, null, null);\n        this.rpcImpl = null;\n        this.emit(\"end\").off();\n    }\n    return this;\n};\n", "\"use strict\";\n\n/**\n * Streaming RPC helpers.\n * @namespace\n */\nvar rpc = exports;\n\n/**\n * RPC implementation passed to {@link Service#create} performing a service request on network level, i.e. by utilizing http requests or websockets.\n * @typedef RPCImpl\n * @type {function}\n * @param {Method|rpc.ServiceMethod<Message<{}>,Message<{}>>} method Reflected or static method being called\n * @param {Uint8Array} requestData Request data\n * @param {RPCImplCallback} callback Callback function\n * @returns {undefined}\n * @example\n * function rpcImpl(method, requestData, callback) {\n *     if (protobuf.util.lcFirst(method.name) !== \"myMethod\") // compatible with static code\n *         throw Error(\"no such method\");\n *     asynchronouslyObtainAResponse(requestData, function(err, responseData) {\n *         callback(err, responseData);\n *     });\n * }\n */\n\n/**\n * Node-style callback as used by {@link RPCImpl}.\n * @typedef RPCImplCallback\n * @type {function}\n * @param {Error|null} error Error, if any, otherwise `null`\n * @param {Uint8Array|null} [response] Response data or `null` to signal end of stream, if there hasn't been an error\n * @returns {undefined}\n */\n\nrpc.Service = require(\"./rpc/service\");\n", "\"use strict\";\nmodule.exports = {};\n\n/**\n * Named roots.\n * This is where pbjs stores generated structures (the option `-r, --root` specifies a name).\n * Can also be used manually to make roots available across modules.\n * @name roots\n * @type {Object.<string,Root>}\n * @example\n * // pbjs -r myroot -o compiled.js ...\n *\n * // in another module:\n * require(\"./compiled.js\");\n *\n * // in any subsequent module:\n * var root = protobuf.roots[\"myroot\"];\n */\n", "\"use strict\";\nvar protobuf = exports;\n\n/**\n * Build type, one of `\"full\"`, `\"light\"` or `\"minimal\"`.\n * @name build\n * @type {string}\n * @const\n */\nprotobuf.build = \"minimal\";\n\n// Serialization\nprotobuf.Writer       = require(\"./writer\");\nprotobuf.BufferWriter = require(\"./writer_buffer\");\nprotobuf.Reader       = require(\"./reader\");\nprotobuf.BufferReader = require(\"./reader_buffer\");\n\n// Utility\nprotobuf.util         = require(\"./util/minimal\");\nprotobuf.rpc          = require(\"./rpc\");\nprotobuf.roots        = require(\"./roots\");\nprotobuf.configure    = configure;\n\n/* istanbul ignore next */\n/**\n * Reconfigures the library according to the environment.\n * @returns {undefined}\n */\nfunction configure() {\n    protobuf.util._configure();\n    protobuf.Writer._configure(protobuf.BufferWriter);\n    protobuf.Reader._configure(protobuf.BufferReader);\n}\n\n// Set up buffer utility according to the environment\nconfigure();\n", "\"use strict\";\r\nmodule.exports = codegen;\r\n\r\n/**\r\n * Begins generating a function.\r\n * @memberof util\r\n * @param {string[]} functionParams Function parameter names\r\n * @param {string} [functionName] Function name if not anonymous\r\n * @returns {Codegen} Appender that appends code to the function's body\r\n */\r\nfunction codegen(functionParams, functionName) {\r\n\r\n    /* istanbul ignore if */\r\n    if (typeof functionParams === \"string\") {\r\n        functionName = functionParams;\r\n        functionParams = undefined;\r\n    }\r\n\r\n    var body = [];\r\n\r\n    /**\r\n     * Appends code to the function's body or finishes generation.\r\n     * @typedef Codegen\r\n     * @type {function}\r\n     * @param {string|Object.<string,*>} [formatStringOrScope] Format string or, to finish the function, an object of additional scope variables, if any\r\n     * @param {...*} [formatParams] Format parameters\r\n     * @returns {Codegen|Function} Itself or the generated function if finished\r\n     * @throws {Error} If format parameter counts do not match\r\n     */\r\n\r\n    function Codegen(formatStringOrScope) {\r\n        // note that explicit array handling below makes this ~50% faster\r\n\r\n        // finish the function\r\n        if (typeof formatStringOrScope !== \"string\") {\r\n            var source = toString();\r\n            if (codegen.verbose)\r\n                console.log(\"codegen: \" + source); // eslint-disable-line no-console\r\n            source = \"return \" + source;\r\n            if (formatStringOrScope) {\r\n                var scopeKeys   = Object.keys(formatStringOrScope),\r\n                    scopeParams = new Array(scopeKeys.length + 1),\r\n                    scopeValues = new Array(scopeKeys.length),\r\n                    scopeOffset = 0;\r\n                while (scopeOffset < scopeKeys.length) {\r\n                    scopeParams[scopeOffset] = scopeKeys[scopeOffset];\r\n                    scopeValues[scopeOffset] = formatStringOrScope[scopeKeys[scopeOffset++]];\r\n                }\r\n                scopeParams[scopeOffset] = source;\r\n                return Function.apply(null, scopeParams).apply(null, scopeValues); // eslint-disable-line no-new-func\r\n            }\r\n            return Function(source)(); // eslint-disable-line no-new-func\r\n        }\r\n\r\n        // otherwise append to body\r\n        var formatParams = new Array(arguments.length - 1),\r\n            formatOffset = 0;\r\n        while (formatOffset < formatParams.length)\r\n            formatParams[formatOffset] = arguments[++formatOffset];\r\n        formatOffset = 0;\r\n        formatStringOrScope = formatStringOrScope.replace(/%([%dfijs])/g, function replace($0, $1) {\r\n            var value = formatParams[formatOffset++];\r\n            switch ($1) {\r\n                case \"d\": case \"f\": return String(Number(value));\r\n                case \"i\": return String(Math.floor(value));\r\n                case \"j\": return JSON.stringify(value);\r\n                case \"s\": return String(value);\r\n            }\r\n            return \"%\";\r\n        });\r\n        if (formatOffset !== formatParams.length)\r\n            throw Error(\"parameter count mismatch\");\r\n        body.push(formatStringOrScope);\r\n        return Codegen;\r\n    }\r\n\r\n    function toString(functionNameOverride) {\r\n        return \"function \" + (functionNameOverride || functionName || \"\") + \"(\" + (functionParams && functionParams.join(\",\") || \"\") + \"){\\n  \" + body.join(\"\\n  \") + \"\\n}\";\r\n    }\r\n\r\n    Codegen.toString = toString;\r\n    return Codegen;\r\n}\r\n\r\n/**\r\n * Begins generating a function.\r\n * @memberof util\r\n * @function codegen\r\n * @param {string} [functionName] Function name if not anonymous\r\n * @returns {Codegen} Appender that appends code to the function's body\r\n * @variation 2\r\n */\r\n\r\n/**\r\n * When set to `true`, codegen will log generated code to console. Useful for debugging.\r\n * @name util.codegen.verbose\r\n * @type {boolean}\r\n */\r\ncodegen.verbose = false;\r\n", "\"use strict\";\r\nmodule.exports = fetch;\r\n\r\nvar asPromise = require(\"@protobufjs/aspromise\"),\r\n    inquire   = require(\"@protobufjs/inquire\");\r\n\r\nvar fs = inquire(\"fs\");\r\n\r\n/**\r\n * Node-style callback as used by {@link util.fetch}.\r\n * @typedef FetchCallback\r\n * @type {function}\r\n * @param {?Error} error Error, if any, otherwise `null`\r\n * @param {string} [contents] File contents, if there hasn't been an error\r\n * @returns {undefined}\r\n */\r\n\r\n/**\r\n * Options as used by {@link util.fetch}.\r\n * @typedef FetchOptions\r\n * @type {Object}\r\n * @property {boolean} [binary=false] Whether expecting a binary response\r\n * @property {boolean} [xhr=false] If `true`, forces the use of XMLHttpRequest\r\n */\r\n\r\n/**\r\n * Fetches the contents of a file.\r\n * @memberof util\r\n * @param {string} filename File path or url\r\n * @param {FetchOptions} options Fetch options\r\n * @param {FetchCallback} callback Callback function\r\n * @returns {undefined}\r\n */\r\nfunction fetch(filename, options, callback) {\r\n    if (typeof options === \"function\") {\r\n        callback = options;\r\n        options = {};\r\n    } else if (!options)\r\n        options = {};\r\n\r\n    if (!callback)\r\n        return asPromise(fetch, this, filename, options); // eslint-disable-line no-invalid-this\r\n\r\n    // if a node-like filesystem is present, try it first but fall back to XHR if nothing is found.\r\n    if (!options.xhr && fs && fs.readFile)\r\n        return fs.readFile(filename, function fetchReadFileCallback(err, contents) {\r\n            return err && typeof XMLHttpRequest !== \"undefined\"\r\n                ? fetch.xhr(filename, options, callback)\r\n                : err\r\n                ? callback(err)\r\n                : callback(null, options.binary ? contents : contents.toString(\"utf8\"));\r\n        });\r\n\r\n    // use the XHR version otherwise.\r\n    return fetch.xhr(filename, options, callback);\r\n}\r\n\r\n/**\r\n * Fetches the contents of a file.\r\n * @name util.fetch\r\n * @function\r\n * @param {string} path File path or url\r\n * @param {FetchCallback} callback Callback function\r\n * @returns {undefined}\r\n * @variation 2\r\n */\r\n\r\n/**\r\n * Fetches the contents of a file.\r\n * @name util.fetch\r\n * @function\r\n * @param {string} path File path or url\r\n * @param {FetchOptions} [options] Fetch options\r\n * @returns {Promise<string|Uint8Array>} Promise\r\n * @variation 3\r\n */\r\n\r\n/**/\r\nfetch.xhr = function fetch_xhr(filename, options, callback) {\r\n    var xhr = new XMLHttpRequest();\r\n    xhr.onreadystatechange /* works everywhere */ = function fetchOnReadyStateChange() {\r\n\r\n        if (xhr.readyState !== 4)\r\n            return undefined;\r\n\r\n        // local cors security errors return status 0 / empty string, too. afaik this cannot be\r\n        // reliably distinguished from an actually empty file for security reasons. feel free\r\n        // to send a pull request if you are aware of a solution.\r\n        if (xhr.status !== 0 && xhr.status !== 200)\r\n            return callback(Error(\"status \" + xhr.status));\r\n\r\n        // if binary data is expected, make sure that some sort of array is returned, even if\r\n        // ArrayBuffers are not supported. the binary string fallback, however, is unsafe.\r\n        if (options.binary) {\r\n            var buffer = xhr.response;\r\n            if (!buffer) {\r\n                buffer = [];\r\n                for (var i = 0; i < xhr.responseText.length; ++i)\r\n                    buffer.push(xhr.responseText.charCodeAt(i) & 255);\r\n            }\r\n            return callback(null, typeof Uint8Array !== \"undefined\" ? new Uint8Array(buffer) : buffer);\r\n        }\r\n        return callback(null, xhr.responseText);\r\n    };\r\n\r\n    if (options.binary) {\r\n        // ref: https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/Sending_and_Receiving_Binary_Data#Receiving_binary_data_in_older_browsers\r\n        if (\"overrideMimeType\" in xhr)\r\n            xhr.overrideMimeType(\"text/plain; charset=x-user-defined\");\r\n        xhr.responseType = \"arraybuffer\";\r\n    }\r\n\r\n    xhr.open(\"GET\", filename);\r\n    xhr.send();\r\n};\r\n", "\"use strict\";\r\n\r\n/**\r\n * A minimal path module to resolve Unix, Windows and URL paths alike.\r\n * @memberof util\r\n * @namespace\r\n */\r\nvar path = exports;\r\n\r\nvar isAbsolute =\r\n/**\r\n * Tests if the specified path is absolute.\r\n * @param {string} path Path to test\r\n * @returns {boolean} `true` if path is absolute\r\n */\r\npath.isAbsolute = function isAbsolute(path) {\r\n    return /^(?:\\/|\\w+:)/.test(path);\r\n};\r\n\r\nvar normalize =\r\n/**\r\n * Normalizes the specified path.\r\n * @param {string} path Path to normalize\r\n * @returns {string} Normalized path\r\n */\r\npath.normalize = function normalize(path) {\r\n    path = path.replace(/\\\\/g, \"/\")\r\n               .replace(/\\/{2,}/g, \"/\");\r\n    var parts    = path.split(\"/\"),\r\n        absolute = isAbsolute(path),\r\n        prefix   = \"\";\r\n    if (absolute)\r\n        prefix = parts.shift() + \"/\";\r\n    for (var i = 0; i < parts.length;) {\r\n        if (parts[i] === \"..\") {\r\n            if (i > 0 && parts[i - 1] !== \"..\")\r\n                parts.splice(--i, 2);\r\n            else if (absolute)\r\n                parts.splice(i, 1);\r\n            else\r\n                ++i;\r\n        } else if (parts[i] === \".\")\r\n            parts.splice(i, 1);\r\n        else\r\n            ++i;\r\n    }\r\n    return prefix + parts.join(\"/\");\r\n};\r\n\r\n/**\r\n * Resolves the specified include path against the specified origin path.\r\n * @param {string} originPath Path to the origin file\r\n * @param {string} includePath Include path relative to origin path\r\n * @param {boolean} [alreadyNormalized=false] `true` if both paths are already known to be normalized\r\n * @returns {string} Path to the include file\r\n */\r\npath.resolve = function resolve(originPath, includePath, alreadyNormalized) {\r\n    if (!alreadyNormalized)\r\n        includePath = normalize(includePath);\r\n    if (isAbsolute(includePath))\r\n        return includePath;\r\n    if (!alreadyNormalized)\r\n        originPath = normalize(originPath);\r\n    return (originPath = originPath.replace(/(?:\\/|^)[^/]+$/, \"\")).length ? normalize(originPath + \"/\" + includePath) : includePath;\r\n};\r\n", "\"use strict\";\nmodule.exports = Namespace;\n\n// extends ReflectionObject\nvar ReflectionObject = require(\"./object\");\n((Namespace.prototype = Object.create(ReflectionObject.prototype)).constructor = Namespace).className = \"Namespace\";\n\nvar Field    = require(\"./field\"),\n    util     = require(\"./util\"),\n    OneOf    = require(\"./oneof\");\n\nvar Type,    // cyclic\n    Service,\n    Enum;\n\n/**\n * Constructs a new namespace instance.\n * @name Namespace\n * @classdesc Reflected namespace.\n * @extends NamespaceBase\n * @constructor\n * @param {string} name Namespace name\n * @param {Object.<string,*>} [options] Declared options\n */\n\n/**\n * Constructs a namespace from JSON.\n * @memberof Namespace\n * @function\n * @param {string} name Namespace name\n * @param {Object.<string,*>} json JSON object\n * @returns {Namespace} Created namespace\n * @throws {TypeError} If arguments are invalid\n */\nNamespace.fromJSON = function fromJSON(name, json) {\n    return new Namespace(name, json.options).addJSON(json.nested);\n};\n\n/**\n * Converts an array of reflection objects to JSON.\n * @memberof Namespace\n * @param {ReflectionObject[]} array Object array\n * @param {IToJSONOptions} [toJSONOptions] JSON conversion options\n * @returns {Object.<string,*>|undefined} JSON object or `undefined` when array is empty\n */\nfunction arrayToJSON(array, toJSONOptions) {\n    if (!(array && array.length))\n        return undefined;\n    var obj = {};\n    for (var i = 0; i < array.length; ++i)\n        obj[array[i].name] = array[i].toJSON(toJSONOptions);\n    return obj;\n}\n\nNamespace.arrayToJSON = arrayToJSON;\n\n/**\n * Tests if the specified id is reserved.\n * @param {Array.<number[]|string>|undefined} reserved Array of reserved ranges and names\n * @param {number} id Id to test\n * @returns {boolean} `true` if reserved, otherwise `false`\n */\nNamespace.isReservedId = function isReservedId(reserved, id) {\n    if (reserved)\n        for (var i = 0; i < reserved.length; ++i)\n            if (typeof reserved[i] !== \"string\" && reserved[i][0] <= id && reserved[i][1] > id)\n                return true;\n    return false;\n};\n\n/**\n * Tests if the specified name is reserved.\n * @param {Array.<number[]|string>|undefined} reserved Array of reserved ranges and names\n * @param {string} name Name to test\n * @returns {boolean} `true` if reserved, otherwise `false`\n */\nNamespace.isReservedName = function isReservedName(reserved, name) {\n    if (reserved)\n        for (var i = 0; i < reserved.length; ++i)\n            if (reserved[i] === name)\n                return true;\n    return false;\n};\n\n/**\n * Not an actual constructor. Use {@link Namespace} instead.\n * @classdesc Base class of all reflection objects containing nested objects. This is not an actual class but here for the sake of having consistent type definitions.\n * @exports NamespaceBase\n * @extends ReflectionObject\n * @abstract\n * @constructor\n * @param {string} name Namespace name\n * @param {Object.<string,*>} [options] Declared options\n * @see {@link Namespace}\n */\nfunction Namespace(name, options) {\n    ReflectionObject.call(this, name, options);\n\n    /**\n     * Nested objects by name.\n     * @type {Object.<string,ReflectionObject>|undefined}\n     */\n    this.nested = undefined; // toJSON\n\n    /**\n     * Cached nested objects as an array.\n     * @type {ReflectionObject[]|null}\n     * @private\n     */\n    this._nestedArray = null;\n\n    /**\n     * Cache lookup calls for any objects contains anywhere under this namespace.\n     * This drastically speeds up resolve for large cross-linked protos where the same\n     * types are looked up repeatedly.\n     * @type {Object.<string,ReflectionObject|null>}\n     * @private\n     */\n    this._lookupCache = {};\n\n    /**\n     * Whether or not objects contained in this namespace need feature resolution.\n     * @type {boolean}\n     * @protected\n     */\n    this._needsRecursiveFeatureResolution = true;\n\n    /**\n     * Whether or not objects contained in this namespace need a resolve.\n     * @type {boolean}\n     * @protected\n     */\n    this._needsRecursiveResolve = true;\n}\n\nfunction clearCache(namespace) {\n    namespace._nestedArray = null;\n    namespace._lookupCache = {};\n\n    // Also clear parent caches, since they include nested lookups.\n    var parent = namespace;\n    while(parent = parent.parent) {\n        parent._lookupCache = {};\n    }\n    return namespace;\n}\n\n/**\n * Nested objects of this namespace as an array for iteration.\n * @name NamespaceBase#nestedArray\n * @type {ReflectionObject[]}\n * @readonly\n */\nObject.defineProperty(Namespace.prototype, \"nestedArray\", {\n    get: function() {\n        return this._nestedArray || (this._nestedArray = util.toArray(this.nested));\n    }\n});\n\n/**\n * Namespace descriptor.\n * @interface INamespace\n * @property {Object.<string,*>} [options] Namespace options\n * @property {Object.<string,AnyNestedObject>} [nested] Nested object descriptors\n */\n\n/**\n * Any extension field descriptor.\n * @typedef AnyExtensionField\n * @type {IExtensionField|IExtensionMapField}\n */\n\n/**\n * Any nested object descriptor.\n * @typedef AnyNestedObject\n * @type {IEnum|IType|IService|AnyExtensionField|INamespace|IOneOf}\n */\n\n/**\n * Converts this namespace to a namespace descriptor.\n * @param {IToJSONOptions} [toJSONOptions] JSON conversion options\n * @returns {INamespace} Namespace descriptor\n */\nNamespace.prototype.toJSON = function toJSON(toJSONOptions) {\n    return util.toObject([\n        \"options\" , this.options,\n        \"nested\"  , arrayToJSON(this.nestedArray, toJSONOptions)\n    ]);\n};\n\n/**\n * Adds nested objects to this namespace from nested object descriptors.\n * @param {Object.<string,AnyNestedObject>} nestedJson Any nested object descriptors\n * @returns {Namespace} `this`\n */\nNamespace.prototype.addJSON = function addJSON(nestedJson) {\n    var ns = this;\n    /* istanbul ignore else */\n    if (nestedJson) {\n        for (var names = Object.keys(nestedJson), i = 0, nested; i < names.length; ++i) {\n            nested = nestedJson[names[i]];\n            ns.add( // most to least likely\n                ( nested.fields !== undefined\n                ? Type.fromJSON\n                : nested.values !== undefined\n                ? Enum.fromJSON\n                : nested.methods !== undefined\n                ? Service.fromJSON\n                : nested.id !== undefined\n                ? Field.fromJSON\n                : Namespace.fromJSON )(names[i], nested)\n            );\n        }\n    }\n    return this;\n};\n\n/**\n * Gets the nested object of the specified name.\n * @param {string} name Nested object name\n * @returns {ReflectionObject|null} The reflection object or `null` if it doesn't exist\n */\nNamespace.prototype.get = function get(name) {\n    return this.nested && this.nested[name]\n        || null;\n};\n\n/**\n * Gets the values of the nested {@link Enum|enum} of the specified name.\n * This methods differs from {@link Namespace#get|get} in that it returns an enum's values directly and throws instead of returning `null`.\n * @param {string} name Nested enum name\n * @returns {Object.<string,number>} Enum values\n * @throws {Error} If there is no such enum\n */\nNamespace.prototype.getEnum = function getEnum(name) {\n    if (this.nested && this.nested[name] instanceof Enum)\n        return this.nested[name].values;\n    throw Error(\"no such enum: \" + name);\n};\n\n/**\n * Adds a nested object to this namespace.\n * @param {ReflectionObject} object Nested object to add\n * @returns {Namespace} `this`\n * @throws {TypeError} If arguments are invalid\n * @throws {Error} If there is already a nested object with this name\n */\nNamespace.prototype.add = function add(object) {\n\n    if (!(object instanceof Field && object.extend !== undefined || object instanceof Type  || object instanceof OneOf || object instanceof Enum || object instanceof Service || object instanceof Namespace))\n        throw TypeError(\"object must be a valid nested object\");\n\n    if (!this.nested)\n        this.nested = {};\n    else {\n        var prev = this.get(object.name);\n        if (prev) {\n            if (prev instanceof Namespace && object instanceof Namespace && !(prev instanceof Type || prev instanceof Service)) {\n                // replace plain namespace but keep existing nested elements and options\n                var nested = prev.nestedArray;\n                for (var i = 0; i < nested.length; ++i)\n                    object.add(nested[i]);\n                this.remove(prev);\n                if (!this.nested)\n                    this.nested = {};\n                object.setOptions(prev.options, true);\n\n            } else\n                throw Error(\"duplicate name '\" + object.name + \"' in \" + this);\n        }\n    }\n    this.nested[object.name] = object;\n\n    if (!(this instanceof Type || this instanceof Service || this instanceof Enum || this instanceof Field)) {\n        // This is a package or a root namespace.\n        if (!object._edition) {\n            // Make sure that some edition is set if it hasn't already been specified.\n            object._edition = object._defaultEdition;\n        }\n    }\n\n    this._needsRecursiveFeatureResolution = true;\n    this._needsRecursiveResolve = true;\n\n    // Also clear parent caches, since they need to recurse down.\n    var parent = this;\n    while(parent = parent.parent) {\n        parent._needsRecursiveFeatureResolution = true;\n        parent._needsRecursiveResolve = true;\n    }\n\n    object.onAdd(this);\n    return clearCache(this);\n};\n\n/**\n * Removes a nested object from this namespace.\n * @param {ReflectionObject} object Nested object to remove\n * @returns {Namespace} `this`\n * @throws {TypeError} If arguments are invalid\n * @throws {Error} If `object` is not a member of this namespace\n */\nNamespace.prototype.remove = function remove(object) {\n\n    if (!(object instanceof ReflectionObject))\n        throw TypeError(\"object must be a ReflectionObject\");\n    if (object.parent !== this)\n        throw Error(object + \" is not a member of \" + this);\n\n    delete this.nested[object.name];\n    if (!Object.keys(this.nested).length)\n        this.nested = undefined;\n\n    object.onRemove(this);\n    return clearCache(this);\n};\n\n/**\n * Defines additial namespaces within this one if not yet existing.\n * @param {string|string[]} path Path to create\n * @param {*} [json] Nested types to create from JSON\n * @returns {Namespace} Pointer to the last namespace created or `this` if path is empty\n */\nNamespace.prototype.define = function define(path, json) {\n\n    if (util.isString(path))\n        path = path.split(\".\");\n    else if (!Array.isArray(path))\n        throw TypeError(\"illegal path\");\n    if (path && path.length && path[0] === \"\")\n        throw Error(\"path must be relative\");\n\n    var ptr = this;\n    while (path.length > 0) {\n        var part = path.shift();\n        if (ptr.nested && ptr.nested[part]) {\n            ptr = ptr.nested[part];\n            if (!(ptr instanceof Namespace))\n                throw Error(\"path conflicts with non-namespace objects\");\n        } else\n            ptr.add(ptr = new Namespace(part));\n    }\n    if (json)\n        ptr.addJSON(json);\n    return ptr;\n};\n\n/**\n * Resolves this namespace's and all its nested objects' type references. Useful to validate a reflection tree, but comes at a cost.\n * @returns {Namespace} `this`\n */\nNamespace.prototype.resolveAll = function resolveAll() {\n    if (!this._needsRecursiveResolve) return this;\n\n    this._resolveFeaturesRecursive(this._edition);\n\n    var nested = this.nestedArray, i = 0;\n    this.resolve();\n    while (i < nested.length)\n        if (nested[i] instanceof Namespace)\n            nested[i++].resolveAll();\n        else\n            nested[i++].resolve();\n    this._needsRecursiveResolve = false;\n    return this;\n};\n\n/**\n * @override\n */\nNamespace.prototype._resolveFeaturesRecursive = function _resolveFeaturesRecursive(edition) {\n    if (!this._needsRecursiveFeatureResolution) return this;\n    this._needsRecursiveFeatureResolution = false;\n\n    edition = this._edition || edition;\n\n    ReflectionObject.prototype._resolveFeaturesRecursive.call(this, edition);\n    this.nestedArray.forEach(nested => {\n        nested._resolveFeaturesRecursive(edition);\n    });\n    return this;\n};\n\n/**\n * Recursively looks up the reflection object matching the specified path in the scope of this namespace.\n * @param {string|string[]} path Path to look up\n * @param {*|Array.<*>} filterTypes Filter types, any combination of the constructors of `protobuf.Type`, `protobuf.Enum`, `protobuf.Service` etc.\n * @param {boolean} [parentAlreadyChecked=false] If known, whether the parent has already been checked\n * @returns {ReflectionObject|null} Looked up object or `null` if none could be found\n */\nNamespace.prototype.lookup = function lookup(path, filterTypes, parentAlreadyChecked) {\n    /* istanbul ignore next */\n    if (typeof filterTypes === \"boolean\") {\n        parentAlreadyChecked = filterTypes;\n        filterTypes = undefined;\n    } else if (filterTypes && !Array.isArray(filterTypes))\n        filterTypes = [ filterTypes ];\n\n    if (util.isString(path) && path.length) {\n        if (path === \".\")\n            return this.root;\n        path = path.split(\".\");\n    } else if (!path.length)\n        return this;\n\n    var flatPath = path.join(\".\");\n\n    // Start at root if path is absolute\n    if (path[0] === \"\")\n        return this.root.lookup(path.slice(1), filterTypes);\n\n    // Early bailout for objects with matching absolute paths\n    var found = this.root._fullyQualifiedObjects && this.root._fullyQualifiedObjects[\".\" + flatPath];\n    if (found && (!filterTypes || filterTypes.indexOf(found.constructor) > -1)) {\n        return found;\n    }\n\n    // Do a regular lookup at this namespace and below\n    found = this._lookupImpl(path, flatPath);\n    if (found && (!filterTypes || filterTypes.indexOf(found.constructor) > -1)) {\n        return found;\n    }\n\n    if (parentAlreadyChecked)\n        return null;\n\n    // If there hasn't been a match, walk up the tree and look more broadly\n    var current = this;\n    while (current.parent) {\n        found = current.parent._lookupImpl(path, flatPath);\n        if (found && (!filterTypes || filterTypes.indexOf(found.constructor) > -1)) {\n            return found;\n        }\n        current = current.parent;\n    }\n    return null;\n};\n\n/**\n * Internal helper for lookup that handles searching just at this namespace and below along with caching.\n * @param {string[]} path Path to look up\n * @param {string} flatPath Flattened version of the path to use as a cache key\n * @returns {ReflectionObject|null} Looked up object or `null` if none could be found\n * @private\n */\nNamespace.prototype._lookupImpl = function lookup(path, flatPath) {\n    if(Object.prototype.hasOwnProperty.call(this._lookupCache, flatPath)) {\n        return this._lookupCache[flatPath];\n    }\n\n    // Test if the first part matches any nested object, and if so, traverse if path contains more\n    var found = this.get(path[0]);\n    var exact = null;\n    if (found) {\n        if (path.length === 1) {\n            exact = found;\n        } else if (found instanceof Namespace) {\n            path = path.slice(1);\n            exact = found._lookupImpl(path, path.join(\".\"));\n        }\n\n    // Otherwise try each nested namespace\n    } else {\n        for (var i = 0; i < this.nestedArray.length; ++i)\n            if (this._nestedArray[i] instanceof Namespace && (found = this._nestedArray[i]._lookupImpl(path, flatPath)))\n                exact = found;\n    }\n\n    // Set this even when null, so that when we walk up the tree we can quickly bail on repeated checks back down.\n    this._lookupCache[flatPath] = exact;\n    return exact;\n};\n\n/**\n * Looks up the reflection object at the specified path, relative to this namespace.\n * @name NamespaceBase#lookup\n * @function\n * @param {string|string[]} path Path to look up\n * @param {boolean} [parentAlreadyChecked=false] Whether the parent has already been checked\n * @returns {ReflectionObject|null} Looked up object or `null` if none could be found\n * @variation 2\n */\n// lookup(path: string, [parentAlreadyChecked: boolean])\n\n/**\n * Looks up the {@link Type|type} at the specified path, relative to this namespace.\n * Besides its signature, this methods differs from {@link Namespace#lookup|lookup} in that it throws instead of returning `null`.\n * @param {string|string[]} path Path to look up\n * @returns {Type} Looked up type\n * @throws {Error} If `path` does not point to a type\n */\nNamespace.prototype.lookupType = function lookupType(path) {\n    var found = this.lookup(path, [ Type ]);\n    if (!found)\n        throw Error(\"no such type: \" + path);\n    return found;\n};\n\n/**\n * Looks up the values of the {@link Enum|enum} at the specified path, relative to this namespace.\n * Besides its signature, this methods differs from {@link Namespace#lookup|lookup} in that it throws instead of returning `null`.\n * @param {string|string[]} path Path to look up\n * @returns {Enum} Looked up enum\n * @throws {Error} If `path` does not point to an enum\n */\nNamespace.prototype.lookupEnum = function lookupEnum(path) {\n    var found = this.lookup(path, [ Enum ]);\n    if (!found)\n        throw Error(\"no such Enum '\" + path + \"' in \" + this);\n    return found;\n};\n\n/**\n * Looks up the {@link Type|type} or {@link Enum|enum} at the specified path, relative to this namespace.\n * Besides its signature, this methods differs from {@link Namespace#lookup|lookup} in that it throws instead of returning `null`.\n * @param {string|string[]} path Path to look up\n * @returns {Type} Looked up type or enum\n * @throws {Error} If `path` does not point to a type or enum\n */\nNamespace.prototype.lookupTypeOrEnum = function lookupTypeOrEnum(path) {\n    var found = this.lookup(path, [ Type, Enum ]);\n    if (!found)\n        throw Error(\"no such Type or Enum '\" + path + \"' in \" + this);\n    return found;\n};\n\n/**\n * Looks up the {@link Service|service} at the specified path, relative to this namespace.\n * Besides its signature, this methods differs from {@link Namespace#lookup|lookup} in that it throws instead of returning `null`.\n * @param {string|string[]} path Path to look up\n * @returns {Service} Looked up service\n * @throws {Error} If `path` does not point to a service\n */\nNamespace.prototype.lookupService = function lookupService(path) {\n    var found = this.lookup(path, [ Service ]);\n    if (!found)\n        throw Error(\"no such Service '\" + path + \"' in \" + this);\n    return found;\n};\n\n// Sets up cyclic dependencies (called in index-light)\nNamespace._configure = function(Type_, Service_, Enum_) {\n    Type    = Type_;\n    Service = Service_;\n    Enum    = Enum_;\n};\n", "\"use strict\";\nmodule.exports = MapField;\n\n// extends Field\nvar Field = require(\"./field\");\n((MapField.prototype = Object.create(Field.prototype)).constructor = MapField).className = \"MapField\";\n\nvar types   = require(\"./types\"),\n    util    = require(\"./util\");\n\n/**\n * Constructs a new map field instance.\n * @classdesc Reflected map field.\n * @extends FieldBase\n * @constructor\n * @param {string} name Unique name within its namespace\n * @param {number} id Unique id within its namespace\n * @param {string} keyType Key type\n * @param {string} type Value type\n * @param {Object.<string,*>} [options] Declared options\n * @param {string} [comment] Comment associated with this field\n */\nfunction MapField(name, id, keyType, type, options, comment) {\n    Field.call(this, name, id, type, undefined, undefined, options, comment);\n\n    /* istanbul ignore if */\n    if (!util.isString(keyType))\n        throw TypeError(\"keyType must be a string\");\n\n    /**\n     * Key type.\n     * @type {string}\n     */\n    this.keyType = keyType; // toJSON, marker\n\n    /**\n     * Resolved key type if not a basic type.\n     * @type {ReflectionObject|null}\n     */\n    this.resolvedKeyType = null;\n\n    // Overrides Field#map\n    this.map = true;\n}\n\n/**\n * Map field descriptor.\n * @interface IMapField\n * @extends {IField}\n * @property {string} keyType Key type\n */\n\n/**\n * Extension map field descriptor.\n * @interface IExtensionMapField\n * @extends IMapField\n * @property {string} extend Extended type\n */\n\n/**\n * Constructs a map field from a map field descriptor.\n * @param {string} name Field name\n * @param {IMapField} json Map field descriptor\n * @returns {MapField} Created map field\n * @throws {TypeError} If arguments are invalid\n */\nMapField.fromJSON = function fromJSON(name, json) {\n    return new MapField(name, json.id, json.keyType, json.type, json.options, json.comment);\n};\n\n/**\n * Converts this map field to a map field descriptor.\n * @param {IToJSONOptions} [toJSONOptions] JSON conversion options\n * @returns {IMapField} Map field descriptor\n */\nMapField.prototype.toJSON = function toJSON(toJSONOptions) {\n    var keepComments = toJSONOptions ? Boolean(toJSONOptions.keepComments) : false;\n    return util.toObject([\n        \"keyType\" , this.keyType,\n        \"type\"    , this.type,\n        \"id\"      , this.id,\n        \"extend\"  , this.extend,\n        \"options\" , this.options,\n        \"comment\" , keepComments ? this.comment : undefined\n    ]);\n};\n\n/**\n * @override\n */\nMapField.prototype.resolve = function resolve() {\n    if (this.resolved)\n        return this;\n\n    // Besides a value type, map fields have a key type that may be \"any scalar type except for floating point types and bytes\"\n    if (types.mapKey[this.keyType] === undefined)\n        throw Error(\"invalid key type: \" + this.keyType);\n\n    return Field.prototype.resolve.call(this);\n};\n\n/**\n * Map field decorator (TypeScript).\n * @name MapField.d\n * @function\n * @param {number} fieldId Field id\n * @param {\"int32\"|\"uint32\"|\"sint32\"|\"fixed32\"|\"sfixed32\"|\"int64\"|\"uint64\"|\"sint64\"|\"fixed64\"|\"sfixed64\"|\"bool\"|\"string\"} fieldKeyType Field key type\n * @param {\"double\"|\"float\"|\"int32\"|\"uint32\"|\"sint32\"|\"fixed32\"|\"sfixed32\"|\"int64\"|\"uint64\"|\"sint64\"|\"fixed64\"|\"sfixed64\"|\"bool\"|\"string\"|\"bytes\"|Object|Constructor<{}>} fieldValueType Field value type\n * @returns {FieldDecorator} Decorator function\n * @template T extends { [key: string]: number | Long | string | boolean | Uint8Array | Buffer | number[] | Message<{}> }\n */\nMapField.d = function decorateMapField(fieldId, fieldKeyType, fieldValueType) {\n\n    // submessage value: decorate the submessage and use its name as the type\n    if (typeof fieldValueType === \"function\")\n        fieldValueType = util.decorateType(fieldValueType).name;\n\n    // enum reference value: create a reflected copy of the enum and keep reuseing it\n    else if (fieldValueType && typeof fieldValueType === \"object\")\n        fieldValueType = util.decorateEnum(fieldValueType).name;\n\n    return function mapFieldDecorator(prototype, fieldName) {\n        util.decorateType(prototype.constructor)\n            .add(new MapField(fieldName, fieldId, fieldKeyType, fieldValueType));\n    };\n};\n", "\"use strict\";\nmodule.exports = Method;\n\n// extends ReflectionObject\nvar ReflectionObject = require(\"./object\");\n((Method.prototype = Object.create(ReflectionObject.prototype)).constructor = Method).className = \"Method\";\n\nvar util = require(\"./util\");\n\n/**\n * Constructs a new service method instance.\n * @classdesc Reflected service method.\n * @extends ReflectionObject\n * @constructor\n * @param {string} name Method name\n * @param {string|undefined} type Method type, usually `\"rpc\"`\n * @param {string} requestType Request message type\n * @param {string} responseType Response message type\n * @param {boolean|Object.<string,*>} [requestStream] Whether the request is streamed\n * @param {boolean|Object.<string,*>} [responseStream] Whether the response is streamed\n * @param {Object.<string,*>} [options] Declared options\n * @param {string} [comment] The comment for this method\n * @param {Object.<string,*>} [parsedOptions] Declared options, properly parsed into an object\n */\nfunction Method(name, type, requestType, responseType, requestStream, responseStream, options, comment, parsedOptions) {\n\n    /* istanbul ignore next */\n    if (util.isObject(requestStream)) {\n        options = requestStream;\n        requestStream = responseStream = undefined;\n    } else if (util.isObject(responseStream)) {\n        options = responseStream;\n        responseStream = undefined;\n    }\n\n    /* istanbul ignore if */\n    if (!(type === undefined || util.isString(type)))\n        throw TypeError(\"type must be a string\");\n\n    /* istanbul ignore if */\n    if (!util.isString(requestType))\n        throw TypeError(\"requestType must be a string\");\n\n    /* istanbul ignore if */\n    if (!util.isString(responseType))\n        throw TypeError(\"responseType must be a string\");\n\n    ReflectionObject.call(this, name, options);\n\n    /**\n     * Method type.\n     * @type {string}\n     */\n    this.type = type || \"rpc\"; // toJSON\n\n    /**\n     * Request type.\n     * @type {string}\n     */\n    this.requestType = requestType; // toJSON, marker\n\n    /**\n     * Whether requests are streamed or not.\n     * @type {boolean|undefined}\n     */\n    this.requestStream = requestStream ? true : undefined; // toJSON\n\n    /**\n     * Response type.\n     * @type {string}\n     */\n    this.responseType = responseType; // toJSON\n\n    /**\n     * Whether responses are streamed or not.\n     * @type {boolean|undefined}\n     */\n    this.responseStream = responseStream ? true : undefined; // toJSON\n\n    /**\n     * Resolved request type.\n     * @type {Type|null}\n     */\n    this.resolvedRequestType = null;\n\n    /**\n     * Resolved response type.\n     * @type {Type|null}\n     */\n    this.resolvedResponseType = null;\n\n    /**\n     * Comment for this method\n     * @type {string|null}\n     */\n    this.comment = comment;\n\n    /**\n     * Options properly parsed into an object\n     */\n    this.parsedOptions = parsedOptions;\n}\n\n/**\n * Method descriptor.\n * @interface IMethod\n * @property {string} [type=\"rpc\"] Method type\n * @property {string} requestType Request type\n * @property {string} responseType Response type\n * @property {boolean} [requestStream=false] Whether requests are streamed\n * @property {boolean} [responseStream=false] Whether responses are streamed\n * @property {Object.<string,*>} [options] Method options\n * @property {string} comment Method comments\n * @property {Object.<string,*>} [parsedOptions] Method options properly parsed into an object\n */\n\n/**\n * Constructs a method from a method descriptor.\n * @param {string} name Method name\n * @param {IMethod} json Method descriptor\n * @returns {Method} Created method\n * @throws {TypeError} If arguments are invalid\n */\nMethod.fromJSON = function fromJSON(name, json) {\n    return new Method(name, json.type, json.requestType, json.responseType, json.requestStream, json.responseStream, json.options, json.comment, json.parsedOptions);\n};\n\n/**\n * Converts this method to a method descriptor.\n * @param {IToJSONOptions} [toJSONOptions] JSON conversion options\n * @returns {IMethod} Method descriptor\n */\nMethod.prototype.toJSON = function toJSON(toJSONOptions) {\n    var keepComments = toJSONOptions ? Boolean(toJSONOptions.keepComments) : false;\n    return util.toObject([\n        \"type\"           , this.type !== \"rpc\" && /* istanbul ignore next */ this.type || undefined,\n        \"requestType\"    , this.requestType,\n        \"requestStream\"  , this.requestStream,\n        \"responseType\"   , this.responseType,\n        \"responseStream\" , this.responseStream,\n        \"options\"        , this.options,\n        \"comment\"        , keepComments ? this.comment : undefined,\n        \"parsedOptions\"  , this.parsedOptions,\n    ]);\n};\n\n/**\n * @override\n */\nMethod.prototype.resolve = function resolve() {\n\n    /* istanbul ignore if */\n    if (this.resolved)\n        return this;\n\n    this.resolvedRequestType = this.parent.lookupType(this.requestType);\n    this.resolvedResponseType = this.parent.lookupType(this.responseType);\n\n    return ReflectionObject.prototype.resolve.call(this);\n};\n", "\"use strict\";\nmodule.exports = Service;\n\n// extends Namespace\nvar Namespace = require(\"./namespace\");\n((Service.prototype = Object.create(Namespace.prototype)).constructor = Service).className = \"Service\";\n\nvar Method = require(\"./method\"),\n    util   = require(\"./util\"),\n    rpc    = require(\"./rpc\");\n\n/**\n * Constructs a new service instance.\n * @classdesc Reflected service.\n * @extends NamespaceBase\n * @constructor\n * @param {string} name Service name\n * @param {Object.<string,*>} [options] Service options\n * @throws {TypeError} If arguments are invalid\n */\nfunction Service(name, options) {\n    Namespace.call(this, name, options);\n\n    /**\n     * Service methods.\n     * @type {Object.<string,Method>}\n     */\n    this.methods = {}; // toJSON, marker\n\n    /**\n     * Cached methods as an array.\n     * @type {Method[]|null}\n     * @private\n     */\n    this._methodsArray = null;\n}\n\n/**\n * Service descriptor.\n * @interface IService\n * @extends INamespace\n * @property {Object.<string,IMethod>} methods Method descriptors\n */\n\n/**\n * Constructs a service from a service descriptor.\n * @param {string} name Service name\n * @param {IService} json Service descriptor\n * @returns {Service} Created service\n * @throws {TypeError} If arguments are invalid\n */\nService.fromJSON = function fromJSON(name, json) {\n    var service = new Service(name, json.options);\n    /* istanbul ignore else */\n    if (json.methods)\n        for (var names = Object.keys(json.methods), i = 0; i < names.length; ++i)\n            service.add(Method.fromJSON(names[i], json.methods[names[i]]));\n    if (json.nested)\n        service.addJSON(json.nested);\n    if (json.edition)\n        service._edition = json.edition;\n    service.comment = json.comment;\n    service._defaultEdition = \"proto3\";  // For backwards-compatibility.\n    return service;\n};\n\n/**\n * Converts this service to a service descriptor.\n * @param {IToJSONOptions} [toJSONOptions] JSON conversion options\n * @returns {IService} Service descriptor\n */\nService.prototype.toJSON = function toJSON(toJSONOptions) {\n    var inherited = Namespace.prototype.toJSON.call(this, toJSONOptions);\n    var keepComments = toJSONOptions ? Boolean(toJSONOptions.keepComments) : false;\n    return util.toObject([\n        \"edition\" , this._editionToJSON(),\n        \"options\" , inherited && inherited.options || undefined,\n        \"methods\" , Namespace.arrayToJSON(this.methodsArray, toJSONOptions) || /* istanbul ignore next */ {},\n        \"nested\"  , inherited && inherited.nested || undefined,\n        \"comment\" , keepComments ? this.comment : undefined\n    ]);\n};\n\n/**\n * Methods of this service as an array for iteration.\n * @name Service#methodsArray\n * @type {Method[]}\n * @readonly\n */\nObject.defineProperty(Service.prototype, \"methodsArray\", {\n    get: function() {\n        return this._methodsArray || (this._methodsArray = util.toArray(this.methods));\n    }\n});\n\nfunction clearCache(service) {\n    service._methodsArray = null;\n    return service;\n}\n\n/**\n * @override\n */\nService.prototype.get = function get(name) {\n    return this.methods[name]\n        || Namespace.prototype.get.call(this, name);\n};\n\n/**\n * @override\n */\nService.prototype.resolveAll = function resolveAll() {\n    if (!this._needsRecursiveResolve) return this;\n\n    Namespace.prototype.resolve.call(this);\n    var methods = this.methodsArray;\n    for (var i = 0; i < methods.length; ++i)\n        methods[i].resolve();\n    return this;\n};\n\n/**\n * @override\n */\nService.prototype._resolveFeaturesRecursive = function _resolveFeaturesRecursive(edition) {\n    if (!this._needsRecursiveFeatureResolution) return this;\n\n    edition = this._edition || edition;\n\n    Namespace.prototype._resolveFeaturesRecursive.call(this, edition);\n    this.methodsArray.forEach(method => {\n        method._resolveFeaturesRecursive(edition);\n    });\n    return this;\n};\n\n/**\n * @override\n */\nService.prototype.add = function add(object) {\n\n    /* istanbul ignore if */\n    if (this.get(object.name))\n        throw Error(\"duplicate name '\" + object.name + \"' in \" + this);\n\n    if (object instanceof Method) {\n        this.methods[object.name] = object;\n        object.parent = this;\n        return clearCache(this);\n    }\n    return Namespace.prototype.add.call(this, object);\n};\n\n/**\n * @override\n */\nService.prototype.remove = function remove(object) {\n    if (object instanceof Method) {\n\n        /* istanbul ignore if */\n        if (this.methods[object.name] !== object)\n            throw Error(object + \" is not a member of \" + this);\n\n        delete this.methods[object.name];\n        object.parent = null;\n        return clearCache(this);\n    }\n    return Namespace.prototype.remove.call(this, object);\n};\n\n/**\n * Creates a runtime service using the specified rpc implementation.\n * @param {RPCImpl} rpcImpl RPC implementation\n * @param {boolean} [requestDelimited=false] Whether requests are length-delimited\n * @param {boolean} [responseDelimited=false] Whether responses are length-delimited\n * @returns {rpc.Service} RPC service. Useful where requests and/or responses are streamed.\n */\nService.prototype.create = function create(rpcImpl, requestDelimited, responseDelimited) {\n    var rpcService = new rpc.Service(rpcImpl, requestDelimited, responseDelimited);\n    for (var i = 0, method; i < /* initializes */ this.methodsArray.length; ++i) {\n        var methodName = util.lcFirst((method = this._methodsArray[i]).resolve().name).replace(/[^$\\w_]/g, \"\");\n        rpcService[methodName] = util.codegen([\"r\",\"c\"], util.isReserved(methodName) ? methodName + \"_\" : methodName)(\"return this.rpcCall(m,q,s,r,c)\")({\n            m: method,\n            q: method.resolvedRequestType.ctor,\n            s: method.resolvedResponseType.ctor\n        });\n    }\n    return rpcService;\n};\n", "\"use strict\";\nmodule.exports = Message;\n\nvar util = require(\"./util/minimal\");\n\n/**\n * Constructs a new message instance.\n * @classdesc Abstract runtime message.\n * @constructor\n * @param {Properties<T>} [properties] Properties to set\n * @template T extends object = object\n */\nfunction Message(properties) {\n    // not used internally\n    if (properties)\n        for (var keys = Object.keys(properties), i = 0; i < keys.length; ++i)\n            this[keys[i]] = properties[keys[i]];\n}\n\n/**\n * Reference to the reflected type.\n * @name Message.$type\n * @type {Type}\n * @readonly\n */\n\n/**\n * Reference to the reflected type.\n * @name Message#$type\n * @type {Type}\n * @readonly\n */\n\n/*eslint-disable valid-jsdoc*/\n\n/**\n * Creates a new message of this type using the specified properties.\n * @param {Object.<string,*>} [properties] Properties to set\n * @returns {Message<T>} Message instance\n * @template T extends Message<T>\n * @this Constructor<T>\n */\nMessage.create = function create(properties) {\n    return this.$type.create(properties);\n};\n\n/**\n * Encodes a message of this type.\n * @param {T|Object.<string,*>} message Message to encode\n * @param {Writer} [writer] Writer to use\n * @returns {Writer} Writer\n * @template T extends Message<T>\n * @this Constructor<T>\n */\nMessage.encode = function encode(message, writer) {\n    return this.$type.encode(message, writer);\n};\n\n/**\n * Encodes a message of this type preceeded by its length as a varint.\n * @param {T|Object.<string,*>} message Message to encode\n * @param {Writer} [writer] Writer to use\n * @returns {Writer} Writer\n * @template T extends Message<T>\n * @this Constructor<T>\n */\nMessage.encodeDelimited = function encodeDelimited(message, writer) {\n    return this.$type.encodeDelimited(message, writer);\n};\n\n/**\n * Decodes a message of this type.\n * @name Message.decode\n * @function\n * @param {Reader|Uint8Array} reader Reader or buffer to decode\n * @returns {T} Decoded message\n * @template T extends Message<T>\n * @this Constructor<T>\n */\nMessage.decode = function decode(reader) {\n    return this.$type.decode(reader);\n};\n\n/**\n * Decodes a message of this type preceeded by its length as a varint.\n * @name Message.decodeDelimited\n * @function\n * @param {Reader|Uint8Array} reader Reader or buffer to decode\n * @returns {T} Decoded message\n * @template T extends Message<T>\n * @this Constructor<T>\n */\nMessage.decodeDelimited = function decodeDelimited(reader) {\n    return this.$type.decodeDelimited(reader);\n};\n\n/**\n * Verifies a message of this type.\n * @name Message.verify\n * @function\n * @param {Object.<string,*>} message Plain object to verify\n * @returns {string|null} `null` if valid, otherwise the reason why it is not\n */\nMessage.verify = function verify(message) {\n    return this.$type.verify(message);\n};\n\n/**\n * Creates a new message of this type from a plain object. Also converts values to their respective internal types.\n * @param {Object.<string,*>} object Plain object\n * @returns {T} Message instance\n * @template T extends Message<T>\n * @this Constructor<T>\n */\nMessage.fromObject = function fromObject(object) {\n    return this.$type.fromObject(object);\n};\n\n/**\n * Creates a plain object from a message of this type. Also converts values to other types if specified.\n * @param {T} message Message instance\n * @param {IConversionOptions} [options] Conversion options\n * @returns {Object.<string,*>} Plain object\n * @template T extends Message<T>\n * @this Constructor<T>\n */\nMessage.toObject = function toObject(message, options) {\n    return this.$type.toObject(message, options);\n};\n\n/**\n * Converts this message to JSON.\n * @returns {Object.<string,*>} JSON object\n */\nMessage.prototype.toJSON = function toJSON() {\n    return this.$type.toObject(this, util.toJSONOptions);\n};\n\n/*eslint-enable valid-jsdoc*/", "\"use strict\";\nmodule.exports = decoder;\n\nvar Enum    = require(\"./enum\"),\n    types   = require(\"./types\"),\n    util    = require(\"./util\");\n\nfunction missing(field) {\n    return \"missing required '\" + field.name + \"'\";\n}\n\n/**\n * Generates a decoder specific to the specified message type.\n * @param {Type} mtype Message type\n * @returns {Codegen} Codegen instance\n */\nfunction decoder(mtype) {\n    /* eslint-disable no-unexpected-multiline */\n    var gen = util.codegen([\"r\", \"l\", \"e\"], mtype.name + \"$decode\")\n    (\"if(!(r instanceof Reader))\")\n        (\"r=Reader.create(r)\")\n    (\"var c=l===undefined?r.len:r.pos+l,m=new this.ctor\" + (mtype.fieldsArray.filter(function(field) { return field.map; }).length ? \",k,value\" : \"\"))\n    (\"while(r.pos<c){\")\n        (\"var t=r.uint32()\")\n        (\"if(t===e)\")\n            (\"break\")\n        (\"switch(t>>>3){\");\n\n    var i = 0;\n    for (; i < /* initializes */ mtype.fieldsArray.length; ++i) {\n        var field = mtype._fieldsArray[i].resolve(),\n            type  = field.resolvedType instanceof Enum ? \"int32\" : field.type,\n            ref   = \"m\" + util.safeProp(field.name); gen\n            (\"case %i: {\", field.id);\n\n        // Map fields\n        if (field.map) { gen\n                (\"if(%s===util.emptyObject)\", ref)\n                    (\"%s={}\", ref)\n                (\"var c2 = r.uint32()+r.pos\");\n\n            if (types.defaults[field.keyType] !== undefined) gen\n                (\"k=%j\", types.defaults[field.keyType]);\n            else gen\n                (\"k=null\");\n\n            if (types.defaults[type] !== undefined) gen\n                (\"value=%j\", types.defaults[type]);\n            else gen\n                (\"value=null\");\n\n            gen\n                (\"while(r.pos<c2){\")\n                    (\"var tag2=r.uint32()\")\n                    (\"switch(tag2>>>3){\")\n                        (\"case 1: k=r.%s(); break\", field.keyType)\n                        (\"case 2:\");\n\n            if (types.basic[type] === undefined) gen\n                            (\"value=types[%i].decode(r,r.uint32())\", i); // can't be groups\n            else gen\n                            (\"value=r.%s()\", type);\n\n            gen\n                            (\"break\")\n                        (\"default:\")\n                            (\"r.skipType(tag2&7)\")\n                            (\"break\")\n                    (\"}\")\n                (\"}\");\n\n            if (types.long[field.keyType] !== undefined) gen\n                (\"%s[typeof k===\\\"object\\\"?util.longToHash(k):k]=value\", ref);\n            else gen\n                (\"%s[k]=value\", ref);\n\n        // Repeated fields\n        } else if (field.repeated) { gen\n\n                (\"if(!(%s&&%s.length))\", ref, ref)\n                    (\"%s=[]\", ref);\n\n            // Packable (always check for forward and backward compatiblity)\n            if (types.packed[type] !== undefined) gen\n                (\"if((t&7)===2){\")\n                    (\"var c2=r.uint32()+r.pos\")\n                    (\"while(r.pos<c2)\")\n                        (\"%s.push(r.%s())\", ref, type)\n                (\"}else\");\n\n            // Non-packed\n            if (types.basic[type] === undefined) gen(field.delimited\n                    ? \"%s.push(types[%i].decode(r,undefined,((t&~7)|4)))\"\n                    : \"%s.push(types[%i].decode(r,r.uint32()))\", ref, i);\n            else gen\n                    (\"%s.push(r.%s())\", ref, type);\n\n        // Non-repeated\n        } else if (types.basic[type] === undefined) gen(field.delimited\n                ? \"%s=types[%i].decode(r,undefined,((t&~7)|4))\"\n                : \"%s=types[%i].decode(r,r.uint32())\", ref, i);\n        else gen\n                (\"%s=r.%s()\", ref, type);\n        gen\n                (\"break\")\n            (\"}\");\n        // Unknown fields\n    } gen\n            (\"default:\")\n                (\"r.skipType(t&7)\")\n                (\"break\")\n\n        (\"}\")\n    (\"}\");\n\n    // Field presence\n    for (i = 0; i < mtype._fieldsArray.length; ++i) {\n        var rfield = mtype._fieldsArray[i];\n        if (rfield.required) gen\n    (\"if(!m.hasOwnProperty(%j))\", rfield.name)\n        (\"throw util.ProtocolError(%j,{instance:m})\", missing(rfield));\n    }\n\n    return gen\n    (\"return m\");\n    /* eslint-enable no-unexpected-multiline */\n}\n", "\"use strict\";\nmodule.exports = verifier;\n\nvar Enum      = require(\"./enum\"),\n    util      = require(\"./util\");\n\nfunction invalid(field, expected) {\n    return field.name + \": \" + expected + (field.repeated && expected !== \"array\" ? \"[]\" : field.map && expected !== \"object\" ? \"{k:\"+field.keyType+\"}\" : \"\") + \" expected\";\n}\n\n/**\n * Generates a partial value verifier.\n * @param {Codegen} gen Codegen instance\n * @param {Field} field Reflected field\n * @param {number} fieldIndex Field index\n * @param {string} ref Variable reference\n * @returns {Codegen} Codegen instance\n * @ignore\n */\nfunction genVerifyValue(gen, field, fieldIndex, ref) {\n    /* eslint-disable no-unexpected-multiline */\n    if (field.resolvedType) {\n        if (field.resolvedType instanceof Enum) { gen\n            (\"switch(%s){\", ref)\n                (\"default:\")\n                    (\"return%j\", invalid(field, \"enum value\"));\n            for (var keys = Object.keys(field.resolvedType.values), j = 0; j < keys.length; ++j) gen\n                (\"case %i:\", field.resolvedType.values[keys[j]]);\n            gen\n                    (\"break\")\n            (\"}\");\n        } else {\n            gen\n            (\"{\")\n                (\"var e=types[%i].verify(%s);\", fieldIndex, ref)\n                (\"if(e)\")\n                    (\"return%j+e\", field.name + \".\")\n            (\"}\");\n        }\n    } else {\n        switch (field.type) {\n            case \"int32\":\n            case \"uint32\":\n            case \"sint32\":\n            case \"fixed32\":\n            case \"sfixed32\": gen\n                (\"if(!util.isInteger(%s))\", ref)\n                    (\"return%j\", invalid(field, \"integer\"));\n                break;\n            case \"int64\":\n            case \"uint64\":\n            case \"sint64\":\n            case \"fixed64\":\n            case \"sfixed64\": gen\n                (\"if(!util.isInteger(%s)&&!(%s&&util.isInteger(%s.low)&&util.isInteger(%s.high)))\", ref, ref, ref, ref)\n                    (\"return%j\", invalid(field, \"integer|Long\"));\n                break;\n            case \"float\":\n            case \"double\": gen\n                (\"if(typeof %s!==\\\"number\\\")\", ref)\n                    (\"return%j\", invalid(field, \"number\"));\n                break;\n            case \"bool\": gen\n                (\"if(typeof %s!==\\\"boolean\\\")\", ref)\n                    (\"return%j\", invalid(field, \"boolean\"));\n                break;\n            case \"string\": gen\n                (\"if(!util.isString(%s))\", ref)\n                    (\"return%j\", invalid(field, \"string\"));\n                break;\n            case \"bytes\": gen\n                (\"if(!(%s&&typeof %s.length===\\\"number\\\"||util.isString(%s)))\", ref, ref, ref)\n                    (\"return%j\", invalid(field, \"buffer\"));\n                break;\n        }\n    }\n    return gen;\n    /* eslint-enable no-unexpected-multiline */\n}\n\n/**\n * Generates a partial key verifier.\n * @param {Codegen} gen Codegen instance\n * @param {Field} field Reflected field\n * @param {string} ref Variable reference\n * @returns {Codegen} Codegen instance\n * @ignore\n */\nfunction genVerifyKey(gen, field, ref) {\n    /* eslint-disable no-unexpected-multiline */\n    switch (field.keyType) {\n        case \"int32\":\n        case \"uint32\":\n        case \"sint32\":\n        case \"fixed32\":\n        case \"sfixed32\": gen\n            (\"if(!util.key32Re.test(%s))\", ref)\n                (\"return%j\", invalid(field, \"integer key\"));\n            break;\n        case \"int64\":\n        case \"uint64\":\n        case \"sint64\":\n        case \"fixed64\":\n        case \"sfixed64\": gen\n            (\"if(!util.key64Re.test(%s))\", ref) // see comment above: x is ok, d is not\n                (\"return%j\", invalid(field, \"integer|Long key\"));\n            break;\n        case \"bool\": gen\n            (\"if(!util.key2Re.test(%s))\", ref)\n                (\"return%j\", invalid(field, \"boolean key\"));\n            break;\n    }\n    return gen;\n    /* eslint-enable no-unexpected-multiline */\n}\n\n/**\n * Generates a verifier specific to the specified message type.\n * @param {Type} mtype Message type\n * @returns {Codegen} Codegen instance\n */\nfunction verifier(mtype) {\n    /* eslint-disable no-unexpected-multiline */\n\n    var gen = util.codegen([\"m\"], mtype.name + \"$verify\")\n    (\"if(typeof m!==\\\"object\\\"||m===null)\")\n        (\"return%j\", \"object expected\");\n    var oneofs = mtype.oneofsArray,\n        seenFirstField = {};\n    if (oneofs.length) gen\n    (\"var p={}\");\n\n    for (var i = 0; i < /* initializes */ mtype.fieldsArray.length; ++i) {\n        var field = mtype._fieldsArray[i].resolve(),\n            ref   = \"m\" + util.safeProp(field.name);\n\n        if (field.optional) gen\n        (\"if(%s!=null&&m.hasOwnProperty(%j)){\", ref, field.name); // !== undefined && !== null\n\n        // map fields\n        if (field.map) { gen\n            (\"if(!util.isObject(%s))\", ref)\n                (\"return%j\", invalid(field, \"object\"))\n            (\"var k=Object.keys(%s)\", ref)\n            (\"for(var i=0;i<k.length;++i){\");\n                genVerifyKey(gen, field, \"k[i]\");\n                genVerifyValue(gen, field, i, ref + \"[k[i]]\")\n            (\"}\");\n\n        // repeated fields\n        } else if (field.repeated) { gen\n            (\"if(!Array.isArray(%s))\", ref)\n                (\"return%j\", invalid(field, \"array\"))\n            (\"for(var i=0;i<%s.length;++i){\", ref);\n                genVerifyValue(gen, field, i, ref + \"[i]\")\n            (\"}\");\n\n        // required or present fields\n        } else {\n            if (field.partOf) {\n                var oneofProp = util.safeProp(field.partOf.name);\n                if (seenFirstField[field.partOf.name] === 1) gen\n            (\"if(p%s===1)\", oneofProp)\n                (\"return%j\", field.partOf.name + \": multiple values\");\n                seenFirstField[field.partOf.name] = 1;\n                gen\n            (\"p%s=1\", oneofProp);\n            }\n            genVerifyValue(gen, field, i, ref);\n        }\n        if (field.optional) gen\n        (\"}\");\n    }\n    return gen\n    (\"return null\");\n    /* eslint-enable no-unexpected-multiline */\n}", "\"use strict\";\n/**\n * Runtime message from/to plain object converters.\n * @namespace\n */\nvar converter = exports;\n\nvar Enum = require(\"./enum\"),\n    util = require(\"./util\");\n\n/**\n * Generates a partial value fromObject conveter.\n * @param {Codegen} gen Codegen instance\n * @param {Field} field Reflected field\n * @param {number} fieldIndex Field index\n * @param {string} prop Property reference\n * @returns {Codegen} Codegen instance\n * @ignore\n */\nfunction genValuePartial_fromObject(gen, field, fieldIndex, prop) {\n    var defaultAlreadyEmitted = false;\n    /* eslint-disable no-unexpected-multiline, block-scoped-var, no-redeclare */\n    if (field.resolvedType) {\n        if (field.resolvedType instanceof Enum) { gen\n            (\"switch(d%s){\", prop);\n            for (var values = field.resolvedType.values, keys = Object.keys(values), i = 0; i < keys.length; ++i) {\n                // enum unknown values passthrough\n                if (values[keys[i]] === field.typeDefault && !defaultAlreadyEmitted) { gen\n                    (\"default:\")\n                        (\"if(typeof(d%s)===\\\"number\\\"){m%s=d%s;break}\", prop, prop, prop);\n                    if (!field.repeated) gen // fallback to default value only for\n                                             // arrays, to avoid leaving holes.\n                        (\"break\");           // for non-repeated fields, just ignore\n                    defaultAlreadyEmitted = true;\n                }\n                gen\n                (\"case%j:\", keys[i])\n                (\"case %i:\", values[keys[i]])\n                    (\"m%s=%j\", prop, values[keys[i]])\n                    (\"break\");\n            } gen\n            (\"}\");\n        } else gen\n            (\"if(typeof d%s!==\\\"object\\\")\", prop)\n                (\"throw TypeError(%j)\", field.fullName + \": object expected\")\n            (\"m%s=types[%i].fromObject(d%s)\", prop, fieldIndex, prop);\n    } else {\n        var isUnsigned = false;\n        switch (field.type) {\n            case \"double\":\n            case \"float\": gen\n                (\"m%s=Number(d%s)\", prop, prop); // also catches \"NaN\", \"Infinity\"\n                break;\n            case \"uint32\":\n            case \"fixed32\": gen\n                (\"m%s=d%s>>>0\", prop, prop);\n                break;\n            case \"int32\":\n            case \"sint32\":\n            case \"sfixed32\": gen\n                (\"m%s=d%s|0\", prop, prop);\n                break;\n            case \"uint64\":\n                isUnsigned = true;\n                // eslint-disable-next-line no-fallthrough\n            case \"int64\":\n            case \"sint64\":\n            case \"fixed64\":\n            case \"sfixed64\": gen\n                (\"if(util.Long)\")\n                    (\"(m%s=util.Long.fromValue(d%s)).unsigned=%j\", prop, prop, isUnsigned)\n                (\"else if(typeof d%s===\\\"string\\\")\", prop)\n                    (\"m%s=parseInt(d%s,10)\", prop, prop)\n                (\"else if(typeof d%s===\\\"number\\\")\", prop)\n                    (\"m%s=d%s\", prop, prop)\n                (\"else if(typeof d%s===\\\"object\\\")\", prop)\n                    (\"m%s=new util.LongBits(d%s.low>>>0,d%s.high>>>0).toNumber(%s)\", prop, prop, prop, isUnsigned ? \"true\" : \"\");\n                break;\n            case \"bytes\": gen\n                (\"if(typeof d%s===\\\"string\\\")\", prop)\n                    (\"util.base64.decode(d%s,m%s=util.newBuffer(util.base64.length(d%s)),0)\", prop, prop, prop)\n                (\"else if(d%s.length >= 0)\", prop)\n                    (\"m%s=d%s\", prop, prop);\n                break;\n            case \"string\": gen\n                (\"m%s=String(d%s)\", prop, prop);\n                break;\n            case \"bool\": gen\n                (\"m%s=Boolean(d%s)\", prop, prop);\n                break;\n            /* default: gen\n                (\"m%s=d%s\", prop, prop);\n                break; */\n        }\n    }\n    return gen;\n    /* eslint-enable no-unexpected-multiline, block-scoped-var, no-redeclare */\n}\n\n/**\n * Generates a plain object to runtime message converter specific to the specified message type.\n * @param {Type} mtype Message type\n * @returns {Codegen} Codegen instance\n */\nconverter.fromObject = function fromObject(mtype) {\n    /* eslint-disable no-unexpected-multiline, block-scoped-var, no-redeclare */\n    var fields = mtype.fieldsArray;\n    var gen = util.codegen([\"d\"], mtype.name + \"$fromObject\")\n    (\"if(d instanceof this.ctor)\")\n        (\"return d\");\n    if (!fields.length) return gen\n    (\"return new this.ctor\");\n    gen\n    (\"var m=new this.ctor\");\n    for (var i = 0; i < fields.length; ++i) {\n        var field  = fields[i].resolve(),\n            prop   = util.safeProp(field.name);\n\n        // Map fields\n        if (field.map) { gen\n    (\"if(d%s){\", prop)\n        (\"if(typeof d%s!==\\\"object\\\")\", prop)\n            (\"throw TypeError(%j)\", field.fullName + \": object expected\")\n        (\"m%s={}\", prop)\n        (\"for(var ks=Object.keys(d%s),i=0;i<ks.length;++i){\", prop);\n            genValuePartial_fromObject(gen, field, /* not sorted */ i, prop + \"[ks[i]]\")\n        (\"}\")\n    (\"}\");\n\n        // Repeated fields\n        } else if (field.repeated) { gen\n    (\"if(d%s){\", prop)\n        (\"if(!Array.isArray(d%s))\", prop)\n            (\"throw TypeError(%j)\", field.fullName + \": array expected\")\n        (\"m%s=[]\", prop)\n        (\"for(var i=0;i<d%s.length;++i){\", prop);\n            genValuePartial_fromObject(gen, field, /* not sorted */ i, prop + \"[i]\")\n        (\"}\")\n    (\"}\");\n\n        // Non-repeated fields\n        } else {\n            if (!(field.resolvedType instanceof Enum)) gen // no need to test for null/undefined if an enum (uses switch)\n    (\"if(d%s!=null){\", prop); // !== undefined && !== null\n        genValuePartial_fromObject(gen, field, /* not sorted */ i, prop);\n            if (!(field.resolvedType instanceof Enum)) gen\n    (\"}\");\n        }\n    } return gen\n    (\"return m\");\n    /* eslint-enable no-unexpected-multiline, block-scoped-var, no-redeclare */\n};\n\n/**\n * Generates a partial value toObject converter.\n * @param {Codegen} gen Codegen instance\n * @param {Field} field Reflected field\n * @param {number} fieldIndex Field index\n * @param {string} prop Property reference\n * @returns {Codegen} Codegen instance\n * @ignore\n */\nfunction genValuePartial_toObject(gen, field, fieldIndex, prop) {\n    /* eslint-disable no-unexpected-multiline, block-scoped-var, no-redeclare */\n    if (field.resolvedType) {\n        if (field.resolvedType instanceof Enum) gen\n            (\"d%s=o.enums===String?(types[%i].values[m%s]===undefined?m%s:types[%i].values[m%s]):m%s\", prop, fieldIndex, prop, prop, fieldIndex, prop, prop);\n        else gen\n            (\"d%s=types[%i].toObject(m%s,o)\", prop, fieldIndex, prop);\n    } else {\n        var isUnsigned = false;\n        switch (field.type) {\n            case \"double\":\n            case \"float\": gen\n            (\"d%s=o.json&&!isFinite(m%s)?String(m%s):m%s\", prop, prop, prop, prop);\n                break;\n            case \"uint64\":\n                isUnsigned = true;\n                // eslint-disable-next-line no-fallthrough\n            case \"int64\":\n            case \"sint64\":\n            case \"fixed64\":\n            case \"sfixed64\": gen\n            (\"if(typeof m%s===\\\"number\\\")\", prop)\n                (\"d%s=o.longs===String?String(m%s):m%s\", prop, prop, prop)\n            (\"else\") // Long-like\n                (\"d%s=o.longs===String?util.Long.prototype.toString.call(m%s):o.longs===Number?new util.LongBits(m%s.low>>>0,m%s.high>>>0).toNumber(%s):m%s\", prop, prop, prop, prop, isUnsigned ? \"true\": \"\", prop);\n                break;\n            case \"bytes\": gen\n            (\"d%s=o.bytes===String?util.base64.encode(m%s,0,m%s.length):o.bytes===Array?Array.prototype.slice.call(m%s):m%s\", prop, prop, prop, prop, prop);\n                break;\n            default: gen\n            (\"d%s=m%s\", prop, prop);\n                break;\n        }\n    }\n    return gen;\n    /* eslint-enable no-unexpected-multiline, block-scoped-var, no-redeclare */\n}\n\n/**\n * Generates a runtime message to plain object converter specific to the specified message type.\n * @param {Type} mtype Message type\n * @returns {Codegen} Codegen instance\n */\nconverter.toObject = function toObject(mtype) {\n    /* eslint-disable no-unexpected-multiline, block-scoped-var, no-redeclare */\n    var fields = mtype.fieldsArray.slice().sort(util.compareFieldsById);\n    if (!fields.length)\n        return util.codegen()(\"return {}\");\n    var gen = util.codegen([\"m\", \"o\"], mtype.name + \"$toObject\")\n    (\"if(!o)\")\n        (\"o={}\")\n    (\"var d={}\");\n\n    var repeatedFields = [],\n        mapFields = [],\n        normalFields = [],\n        i = 0;\n    for (; i < fields.length; ++i)\n        if (!fields[i].partOf)\n            ( fields[i].resolve().repeated ? repeatedFields\n            : fields[i].map ? mapFields\n            : normalFields).push(fields[i]);\n\n    if (repeatedFields.length) { gen\n    (\"if(o.arrays||o.defaults){\");\n        for (i = 0; i < repeatedFields.length; ++i) gen\n        (\"d%s=[]\", util.safeProp(repeatedFields[i].name));\n        gen\n    (\"}\");\n    }\n\n    if (mapFields.length) { gen\n    (\"if(o.objects||o.defaults){\");\n        for (i = 0; i < mapFields.length; ++i) gen\n        (\"d%s={}\", util.safeProp(mapFields[i].name));\n        gen\n    (\"}\");\n    }\n\n    if (normalFields.length) { gen\n    (\"if(o.defaults){\");\n        for (i = 0; i < normalFields.length; ++i) {\n            var field = normalFields[i],\n                prop  = util.safeProp(field.name);\n            if (field.resolvedType instanceof Enum) gen\n        (\"d%s=o.enums===String?%j:%j\", prop, field.resolvedType.valuesById[field.typeDefault], field.typeDefault);\n            else if (field.long) gen\n        (\"if(util.Long){\")\n            (\"var n=new util.Long(%i,%i,%j)\", field.typeDefault.low, field.typeDefault.high, field.typeDefault.unsigned)\n            (\"d%s=o.longs===String?n.toString():o.longs===Number?n.toNumber():n\", prop)\n        (\"}else\")\n            (\"d%s=o.longs===String?%j:%i\", prop, field.typeDefault.toString(), field.typeDefault.toNumber());\n            else if (field.bytes) {\n                var arrayDefault = \"[\" + Array.prototype.slice.call(field.typeDefault).join(\",\") + \"]\";\n                gen\n        (\"if(o.bytes===String)d%s=%j\", prop, String.fromCharCode.apply(String, field.typeDefault))\n        (\"else{\")\n            (\"d%s=%s\", prop, arrayDefault)\n            (\"if(o.bytes!==Array)d%s=util.newBuffer(d%s)\", prop, prop)\n        (\"}\");\n            } else gen\n        (\"d%s=%j\", prop, field.typeDefault); // also messages (=null)\n        } gen\n    (\"}\");\n    }\n    var hasKs2 = false;\n    for (i = 0; i < fields.length; ++i) {\n        var field = fields[i],\n            index = mtype._fieldsArray.indexOf(field),\n            prop  = util.safeProp(field.name);\n        if (field.map) {\n            if (!hasKs2) { hasKs2 = true; gen\n    (\"var ks2\");\n            } gen\n    (\"if(m%s&&(ks2=Object.keys(m%s)).length){\", prop, prop)\n        (\"d%s={}\", prop)\n        (\"for(var j=0;j<ks2.length;++j){\");\n            genValuePartial_toObject(gen, field, /* sorted */ index, prop + \"[ks2[j]]\")\n        (\"}\");\n        } else if (field.repeated) { gen\n    (\"if(m%s&&m%s.length){\", prop, prop)\n        (\"d%s=[]\", prop)\n        (\"for(var j=0;j<m%s.length;++j){\", prop);\n            genValuePartial_toObject(gen, field, /* sorted */ index, prop + \"[j]\")\n        (\"}\");\n        } else { gen\n    (\"if(m%s!=null&&m.hasOwnProperty(%j)){\", prop, field.name); // !== undefined && !== null\n        genValuePartial_toObject(gen, field, /* sorted */ index, prop);\n        if (field.partOf) gen\n        (\"if(o.oneofs)\")\n            (\"d%s=%j\", util.safeProp(field.partOf.name), field.name);\n        }\n        gen\n    (\"}\");\n    }\n    return gen\n    (\"return d\");\n    /* eslint-enable no-unexpected-multiline, block-scoped-var, no-redeclare */\n};\n", "\"use strict\";\n\n/**\n * Wrappers for common types.\n * @type {Object.<string,IWrapper>}\n * @const\n */\nvar wrappers = exports;\n\nvar Message = require(\"./message\");\n\n/**\n * From object converter part of an {@link IWrapper}.\n * @typedef WrapperFromObjectConverter\n * @type {function}\n * @param {Object.<string,*>} object Plain object\n * @returns {Message<{}>} Message instance\n * @this Type\n */\n\n/**\n * To object converter part of an {@link IWrapper}.\n * @typedef WrapperToObjectConverter\n * @type {function}\n * @param {Message<{}>} message Message instance\n * @param {IConversionOptions} [options] Conversion options\n * @returns {Object.<string,*>} Plain object\n * @this Type\n */\n\n/**\n * Common type wrapper part of {@link wrappers}.\n * @interface IWrapper\n * @property {WrapperFromObjectConverter} [fromObject] From object converter\n * @property {WrapperToObjectConverter} [toObject] To object converter\n */\n\n// Custom wrapper for Any\nwrappers[\".google.protobuf.Any\"] = {\n\n    fromObject: function(object) {\n\n        // unwrap value type if mapped\n        if (object && object[\"@type\"]) {\n             // Only use fully qualified type name after the last '/'\n            var name = object[\"@type\"].substring(object[\"@type\"].lastIndexOf(\"/\") + 1);\n            var type = this.lookup(name);\n            /* istanbul ignore else */\n            if (type) {\n                // type_url does not accept leading \".\"\n                var type_url = object[\"@type\"].charAt(0) === \".\" ?\n                    object[\"@type\"].slice(1) : object[\"@type\"];\n                // type_url prefix is optional, but path seperator is required\n                if (type_url.indexOf(\"/\") === -1) {\n                    type_url = \"/\" + type_url;\n                }\n                return this.create({\n                    type_url: type_url,\n                    value: type.encode(type.fromObject(object)).finish()\n                });\n            }\n        }\n\n        return this.fromObject(object);\n    },\n\n    toObject: function(message, options) {\n\n        // Default prefix\n        var googleApi = \"type.googleapis.com/\";\n        var prefix = \"\";\n        var name = \"\";\n\n        // decode value if requested and unmapped\n        if (options && options.json && message.type_url && message.value) {\n            // Only use fully qualified type name after the last '/'\n            name = message.type_url.substring(message.type_url.lastIndexOf(\"/\") + 1);\n            // Separate the prefix used\n            prefix = message.type_url.substring(0, message.type_url.lastIndexOf(\"/\") + 1);\n            var type = this.lookup(name);\n            /* istanbul ignore else */\n            if (type)\n                message = type.decode(message.value);\n        }\n\n        // wrap value if unmapped\n        if (!(message instanceof this.ctor) && message instanceof Message) {\n            var object = message.$type.toObject(message, options);\n            var messageName = message.$type.fullName[0] === \".\" ?\n                message.$type.fullName.slice(1) : message.$type.fullName;\n            // Default to type.googleapis.com prefix if no prefix is used\n            if (prefix === \"\") {\n                prefix = googleApi;\n            }\n            name = prefix + messageName;\n            object[\"@type\"] = name;\n            return object;\n        }\n\n        return this.toObject(message, options);\n    }\n};\n", "\"use strict\";\nmodule.exports = Type;\n\n// extends Namespace\nvar Namespace = require(\"./namespace\");\n((Type.prototype = Object.create(Namespace.prototype)).constructor = Type).className = \"Type\";\n\nvar Enum      = require(\"./enum\"),\n    OneOf     = require(\"./oneof\"),\n    Field     = require(\"./field\"),\n    MapField  = require(\"./mapfield\"),\n    Service   = require(\"./service\"),\n    Message   = require(\"./message\"),\n    Reader    = require(\"./reader\"),\n    Writer    = require(\"./writer\"),\n    util      = require(\"./util\"),\n    encoder   = require(\"./encoder\"),\n    decoder   = require(\"./decoder\"),\n    verifier  = require(\"./verifier\"),\n    converter = require(\"./converter\"),\n    wrappers  = require(\"./wrappers\");\n\n/**\n * Constructs a new reflected message type instance.\n * @classdesc Reflected message type.\n * @extends NamespaceBase\n * @constructor\n * @param {string} name Message name\n * @param {Object.<string,*>} [options] Declared options\n */\nfunction Type(name, options) {\n    Namespace.call(this, name, options);\n\n    /**\n     * Message fields.\n     * @type {Object.<string,Field>}\n     */\n    this.fields = {};  // toJSON, marker\n\n    /**\n     * Oneofs declared within this namespace, if any.\n     * @type {Object.<string,OneOf>}\n     */\n    this.oneofs = undefined; // toJSON\n\n    /**\n     * Extension ranges, if any.\n     * @type {number[][]}\n     */\n    this.extensions = undefined; // toJSON\n\n    /**\n     * Reserved ranges, if any.\n     * @type {Array.<number[]|string>}\n     */\n    this.reserved = undefined; // toJSON\n\n    /*?\n     * Whether this type is a legacy group.\n     * @type {boolean|undefined}\n     */\n    this.group = undefined; // toJSON\n\n    /**\n     * Cached fields by id.\n     * @type {Object.<number,Field>|null}\n     * @private\n     */\n    this._fieldsById = null;\n\n    /**\n     * Cached fields as an array.\n     * @type {Field[]|null}\n     * @private\n     */\n    this._fieldsArray = null;\n\n    /**\n     * Cached oneofs as an array.\n     * @type {OneOf[]|null}\n     * @private\n     */\n    this._oneofsArray = null;\n\n    /**\n     * Cached constructor.\n     * @type {Constructor<{}>}\n     * @private\n     */\n    this._ctor = null;\n}\n\nObject.defineProperties(Type.prototype, {\n\n    /**\n     * Message fields by id.\n     * @name Type#fieldsById\n     * @type {Object.<number,Field>}\n     * @readonly\n     */\n    fieldsById: {\n        get: function() {\n\n            /* istanbul ignore if */\n            if (this._fieldsById)\n                return this._fieldsById;\n\n            this._fieldsById = {};\n            for (var names = Object.keys(this.fields), i = 0; i < names.length; ++i) {\n                var field = this.fields[names[i]],\n                    id = field.id;\n\n                /* istanbul ignore if */\n                if (this._fieldsById[id])\n                    throw Error(\"duplicate id \" + id + \" in \" + this);\n\n                this._fieldsById[id] = field;\n            }\n            return this._fieldsById;\n        }\n    },\n\n    /**\n     * Fields of this message as an array for iteration.\n     * @name Type#fieldsArray\n     * @type {Field[]}\n     * @readonly\n     */\n    fieldsArray: {\n        get: function() {\n            return this._fieldsArray || (this._fieldsArray = util.toArray(this.fields));\n        }\n    },\n\n    /**\n     * Oneofs of this message as an array for iteration.\n     * @name Type#oneofsArray\n     * @type {OneOf[]}\n     * @readonly\n     */\n    oneofsArray: {\n        get: function() {\n            return this._oneofsArray || (this._oneofsArray = util.toArray(this.oneofs));\n        }\n    },\n\n    /**\n     * The registered constructor, if any registered, otherwise a generic constructor.\n     * Assigning a function replaces the internal constructor. If the function does not extend {@link Message} yet, its prototype will be setup accordingly and static methods will be populated. If it already extends {@link Message}, it will just replace the internal constructor.\n     * @name Type#ctor\n     * @type {Constructor<{}>}\n     */\n    ctor: {\n        get: function() {\n            return this._ctor || (this.ctor = Type.generateConstructor(this)());\n        },\n        set: function(ctor) {\n\n            // Ensure proper prototype\n            var prototype = ctor.prototype;\n            if (!(prototype instanceof Message)) {\n                (ctor.prototype = new Message()).constructor = ctor;\n                util.merge(ctor.prototype, prototype);\n            }\n\n            // Classes and messages reference their reflected type\n            ctor.$type = ctor.prototype.$type = this;\n\n            // Mix in static methods\n            util.merge(ctor, Message, true);\n\n            this._ctor = ctor;\n\n            // Messages have non-enumerable default values on their prototype\n            var i = 0;\n            for (; i < /* initializes */ this.fieldsArray.length; ++i)\n                this._fieldsArray[i].resolve(); // ensures a proper value\n\n            // Messages have non-enumerable getters and setters for each virtual oneof field\n            var ctorProperties = {};\n            for (i = 0; i < /* initializes */ this.oneofsArray.length; ++i)\n                ctorProperties[this._oneofsArray[i].resolve().name] = {\n                    get: util.oneOfGetter(this._oneofsArray[i].oneof),\n                    set: util.oneOfSetter(this._oneofsArray[i].oneof)\n                };\n            if (i)\n                Object.defineProperties(ctor.prototype, ctorProperties);\n        }\n    }\n});\n\n/**\n * Generates a constructor function for the specified type.\n * @param {Type} mtype Message type\n * @returns {Codegen} Codegen instance\n */\nType.generateConstructor = function generateConstructor(mtype) {\n    /* eslint-disable no-unexpected-multiline */\n    var gen = util.codegen([\"p\"], mtype.name);\n    // explicitly initialize mutable object/array fields so that these aren't just inherited from the prototype\n    for (var i = 0, field; i < mtype.fieldsArray.length; ++i)\n        if ((field = mtype._fieldsArray[i]).map) gen\n            (\"this%s={}\", util.safeProp(field.name));\n        else if (field.repeated) gen\n            (\"this%s=[]\", util.safeProp(field.name));\n    return gen\n    (\"if(p)for(var ks=Object.keys(p),i=0;i<ks.length;++i)if(p[ks[i]]!=null)\") // omit undefined or null\n        (\"this[ks[i]]=p[ks[i]]\");\n    /* eslint-enable no-unexpected-multiline */\n};\n\nfunction clearCache(type) {\n    type._fieldsById = type._fieldsArray = type._oneofsArray = null;\n    delete type.encode;\n    delete type.decode;\n    delete type.verify;\n    return type;\n}\n\n/**\n * Message type descriptor.\n * @interface IType\n * @extends INamespace\n * @property {Object.<string,IOneOf>} [oneofs] Oneof descriptors\n * @property {Object.<string,IField>} fields Field descriptors\n * @property {number[][]} [extensions] Extension ranges\n * @property {Array.<number[]|string>} [reserved] Reserved ranges\n * @property {boolean} [group=false] Whether a legacy group or not\n */\n\n/**\n * Creates a message type from a message type descriptor.\n * @param {string} name Message name\n * @param {IType} json Message type descriptor\n * @returns {Type} Created message type\n */\nType.fromJSON = function fromJSON(name, json) {\n    var type = new Type(name, json.options);\n    type.extensions = json.extensions;\n    type.reserved = json.reserved;\n    var names = Object.keys(json.fields),\n        i = 0;\n    for (; i < names.length; ++i)\n        type.add(\n            ( typeof json.fields[names[i]].keyType !== \"undefined\"\n            ? MapField.fromJSON\n            : Field.fromJSON )(names[i], json.fields[names[i]])\n        );\n    if (json.oneofs)\n        for (names = Object.keys(json.oneofs), i = 0; i < names.length; ++i)\n            type.add(OneOf.fromJSON(names[i], json.oneofs[names[i]]));\n    if (json.nested)\n        for (names = Object.keys(json.nested), i = 0; i < names.length; ++i) {\n            var nested = json.nested[names[i]];\n            type.add( // most to least likely\n                ( nested.id !== undefined\n                ? Field.fromJSON\n                : nested.fields !== undefined\n                ? Type.fromJSON\n                : nested.values !== undefined\n                ? Enum.fromJSON\n                : nested.methods !== undefined\n                ? Service.fromJSON\n                : Namespace.fromJSON )(names[i], nested)\n            );\n        }\n    if (json.extensions && json.extensions.length)\n        type.extensions = json.extensions;\n    if (json.reserved && json.reserved.length)\n        type.reserved = json.reserved;\n    if (json.group)\n        type.group = true;\n    if (json.comment)\n        type.comment = json.comment;\n    if (json.edition)\n        type._edition = json.edition;\n    type._defaultEdition = \"proto3\";  // For backwards-compatibility.\n    return type;\n};\n\n/**\n * Converts this message type to a message type descriptor.\n * @param {IToJSONOptions} [toJSONOptions] JSON conversion options\n * @returns {IType} Message type descriptor\n */\nType.prototype.toJSON = function toJSON(toJSONOptions) {\n    var inherited = Namespace.prototype.toJSON.call(this, toJSONOptions);\n    var keepComments = toJSONOptions ? Boolean(toJSONOptions.keepComments) : false;\n    return util.toObject([\n        \"edition\"    , this._editionToJSON(),\n        \"options\"    , inherited && inherited.options || undefined,\n        \"oneofs\"     , Namespace.arrayToJSON(this.oneofsArray, toJSONOptions),\n        \"fields\"     , Namespace.arrayToJSON(this.fieldsArray.filter(function(obj) { return !obj.declaringField; }), toJSONOptions) || {},\n        \"extensions\" , this.extensions && this.extensions.length ? this.extensions : undefined,\n        \"reserved\"   , this.reserved && this.reserved.length ? this.reserved : undefined,\n        \"group\"      , this.group || undefined,\n        \"nested\"     , inherited && inherited.nested || undefined,\n        \"comment\"    , keepComments ? this.comment : undefined\n    ]);\n};\n\n/**\n * @override\n */\nType.prototype.resolveAll = function resolveAll() {\n    if (!this._needsRecursiveResolve) return this;\n\n    Namespace.prototype.resolveAll.call(this);\n    var oneofs = this.oneofsArray; i = 0;\n    while (i < oneofs.length)\n        oneofs[i++].resolve();\n    var fields = this.fieldsArray, i = 0;\n    while (i < fields.length)\n        fields[i++].resolve();\n    return this;\n};\n\n/**\n * @override\n */\nType.prototype._resolveFeaturesRecursive = function _resolveFeaturesRecursive(edition) {\n    if (!this._needsRecursiveFeatureResolution) return this;\n\n    edition = this._edition || edition;\n\n    Namespace.prototype._resolveFeaturesRecursive.call(this, edition);\n    this.oneofsArray.forEach(oneof => {\n        oneof._resolveFeatures(edition);\n    });\n    this.fieldsArray.forEach(field => {\n        field._resolveFeatures(edition);\n    });\n    return this;\n};\n\n/**\n * @override\n */\nType.prototype.get = function get(name) {\n    return this.fields[name]\n        || this.oneofs && this.oneofs[name]\n        || this.nested && this.nested[name]\n        || null;\n};\n\n/**\n * Adds a nested object to this type.\n * @param {ReflectionObject} object Nested object to add\n * @returns {Type} `this`\n * @throws {TypeError} If arguments are invalid\n * @throws {Error} If there is already a nested object with this name or, if a field, when there is already a field with this id\n */\nType.prototype.add = function add(object) {\n\n    if (this.get(object.name))\n        throw Error(\"duplicate name '\" + object.name + \"' in \" + this);\n\n    if (object instanceof Field && object.extend === undefined) {\n        // NOTE: Extension fields aren't actual fields on the declaring type, but nested objects.\n        // The root object takes care of adding distinct sister-fields to the respective extended\n        // type instead.\n\n        // avoids calling the getter if not absolutely necessary because it's called quite frequently\n        if (this._fieldsById ? /* istanbul ignore next */ this._fieldsById[object.id] : this.fieldsById[object.id])\n            throw Error(\"duplicate id \" + object.id + \" in \" + this);\n        if (this.isReservedId(object.id))\n            throw Error(\"id \" + object.id + \" is reserved in \" + this);\n        if (this.isReservedName(object.name))\n            throw Error(\"name '\" + object.name + \"' is reserved in \" + this);\n\n        if (object.parent)\n            object.parent.remove(object);\n        this.fields[object.name] = object;\n        object.message = this;\n        object.onAdd(this);\n        return clearCache(this);\n    }\n    if (object instanceof OneOf) {\n        if (!this.oneofs)\n            this.oneofs = {};\n        this.oneofs[object.name] = object;\n        object.onAdd(this);\n        return clearCache(this);\n    }\n    return Namespace.prototype.add.call(this, object);\n};\n\n/**\n * Removes a nested object from this type.\n * @param {ReflectionObject} object Nested object to remove\n * @returns {Type} `this`\n * @throws {TypeError} If arguments are invalid\n * @throws {Error} If `object` is not a member of this type\n */\nType.prototype.remove = function remove(object) {\n    if (object instanceof Field && object.extend === undefined) {\n        // See Type#add for the reason why extension fields are excluded here.\n\n        /* istanbul ignore if */\n        if (!this.fields || this.fields[object.name] !== object)\n            throw Error(object + \" is not a member of \" + this);\n\n        delete this.fields[object.name];\n        object.parent = null;\n        object.onRemove(this);\n        return clearCache(this);\n    }\n    if (object instanceof OneOf) {\n\n        /* istanbul ignore if */\n        if (!this.oneofs || this.oneofs[object.name] !== object)\n            throw Error(object + \" is not a member of \" + this);\n\n        delete this.oneofs[object.name];\n        object.parent = null;\n        object.onRemove(this);\n        return clearCache(this);\n    }\n    return Namespace.prototype.remove.call(this, object);\n};\n\n/**\n * Tests if the specified id is reserved.\n * @param {number} id Id to test\n * @returns {boolean} `true` if reserved, otherwise `false`\n */\nType.prototype.isReservedId = function isReservedId(id) {\n    return Namespace.isReservedId(this.reserved, id);\n};\n\n/**\n * Tests if the specified name is reserved.\n * @param {string} name Name to test\n * @returns {boolean} `true` if reserved, otherwise `false`\n */\nType.prototype.isReservedName = function isReservedName(name) {\n    return Namespace.isReservedName(this.reserved, name);\n};\n\n/**\n * Creates a new message of this type using the specified properties.\n * @param {Object.<string,*>} [properties] Properties to set\n * @returns {Message<{}>} Message instance\n */\nType.prototype.create = function create(properties) {\n    return new this.ctor(properties);\n};\n\n/**\n * Sets up {@link Type#encode|encode}, {@link Type#decode|decode} and {@link Type#verify|verify}.\n * @returns {Type} `this`\n */\nType.prototype.setup = function setup() {\n    // Sets up everything at once so that the prototype chain does not have to be re-evaluated\n    // multiple times (V8, soft-deopt prototype-check).\n\n    var fullName = this.fullName,\n        types    = [];\n    for (var i = 0; i < /* initializes */ this.fieldsArray.length; ++i)\n        types.push(this._fieldsArray[i].resolve().resolvedType);\n\n    // Replace setup methods with type-specific generated functions\n    this.encode = encoder(this)({\n        Writer : Writer,\n        types  : types,\n        util   : util\n    });\n    this.decode = decoder(this)({\n        Reader : Reader,\n        types  : types,\n        util   : util\n    });\n    this.verify = verifier(this)({\n        types : types,\n        util  : util\n    });\n    this.fromObject = converter.fromObject(this)({\n        types : types,\n        util  : util\n    });\n    this.toObject = converter.toObject(this)({\n        types : types,\n        util  : util\n    });\n\n    // Inject custom wrappers for common types\n    var wrapper = wrappers[fullName];\n    if (wrapper) {\n        var originalThis = Object.create(this);\n        // if (wrapper.fromObject) {\n            originalThis.fromObject = this.fromObject;\n            this.fromObject = wrapper.fromObject.bind(originalThis);\n        // }\n        // if (wrapper.toObject) {\n            originalThis.toObject = this.toObject;\n            this.toObject = wrapper.toObject.bind(originalThis);\n        // }\n    }\n\n    return this;\n};\n\n/**\n * Encodes a message of this type. Does not implicitly {@link Type#verify|verify} messages.\n * @param {Message<{}>|Object.<string,*>} message Message instance or plain object\n * @param {Writer} [writer] Writer to encode to\n * @returns {Writer} writer\n */\nType.prototype.encode = function encode_setup(message, writer) {\n    return this.setup().encode(message, writer); // overrides this method\n};\n\n/**\n * Encodes a message of this type preceeded by its byte length as a varint. Does not implicitly {@link Type#verify|verify} messages.\n * @param {Message<{}>|Object.<string,*>} message Message instance or plain object\n * @param {Writer} [writer] Writer to encode to\n * @returns {Writer} writer\n */\nType.prototype.encodeDelimited = function encodeDelimited(message, writer) {\n    return this.encode(message, writer && writer.len ? writer.fork() : writer).ldelim();\n};\n\n/**\n * Decodes a message of this type.\n * @param {Reader|Uint8Array} reader Reader or buffer to decode from\n * @param {number} [length] Length of the message, if known beforehand\n * @returns {Message<{}>} Decoded message\n * @throws {Error} If the payload is not a reader or valid buffer\n * @throws {util.ProtocolError<{}>} If required fields are missing\n */\nType.prototype.decode = function decode_setup(reader, length) {\n    return this.setup().decode(reader, length); // overrides this method\n};\n\n/**\n * Decodes a message of this type preceeded by its byte length as a varint.\n * @param {Reader|Uint8Array} reader Reader or buffer to decode from\n * @returns {Message<{}>} Decoded message\n * @throws {Error} If the payload is not a reader or valid buffer\n * @throws {util.ProtocolError} If required fields are missing\n */\nType.prototype.decodeDelimited = function decodeDelimited(reader) {\n    if (!(reader instanceof Reader))\n        reader = Reader.create(reader);\n    return this.decode(reader, reader.uint32());\n};\n\n/**\n * Verifies that field values are valid and that required fields are present.\n * @param {Object.<string,*>} message Plain object to verify\n * @returns {null|string} `null` if valid, otherwise the reason why it is not\n */\nType.prototype.verify = function verify_setup(message) {\n    return this.setup().verify(message); // overrides this method\n};\n\n/**\n * Creates a new message of this type from a plain object. Also converts values to their respective internal types.\n * @param {Object.<string,*>} object Plain object to convert\n * @returns {Message<{}>} Message instance\n */\nType.prototype.fromObject = function fromObject(object) {\n    return this.setup().fromObject(object);\n};\n\n/**\n * Conversion options as used by {@link Type#toObject} and {@link Message.toObject}.\n * @interface IConversionOptions\n * @property {Function} [longs] Long conversion type.\n * Valid values are `String` and `Number` (the global types).\n * Defaults to copy the present value, which is a possibly unsafe number without and a {@link Long} with a long library.\n * @property {Function} [enums] Enum value conversion type.\n * Only valid value is `String` (the global type).\n * Defaults to copy the present value, which is the numeric id.\n * @property {Function} [bytes] Bytes value conversion type.\n * Valid values are `Array` and (a base64 encoded) `String` (the global types).\n * Defaults to copy the present value, which usually is a Buffer under node and an Uint8Array in the browser.\n * @property {boolean} [defaults=false] Also sets default values on the resulting object\n * @property {boolean} [arrays=false] Sets empty arrays for missing repeated fields even if `defaults=false`\n * @property {boolean} [objects=false] Sets empty objects for missing map fields even if `defaults=false`\n * @property {boolean} [oneofs=false] Includes virtual oneof properties set to the present field's name, if any\n * @property {boolean} [json=false] Performs additional JSON compatibility conversions, i.e. NaN and Infinity to strings\n */\n\n/**\n * Creates a plain object from a message of this type. Also converts values to other types if specified.\n * @param {Message<{}>} message Message instance\n * @param {IConversionOptions} [options] Conversion options\n * @returns {Object.<string,*>} Plain object\n */\nType.prototype.toObject = function toObject(message, options) {\n    return this.setup().toObject(message, options);\n};\n\n/**\n * Decorator function as returned by {@link Type.d} (TypeScript).\n * @typedef TypeDecorator\n * @type {function}\n * @param {Constructor<T>} target Target constructor\n * @returns {undefined}\n * @template T extends Message<T>\n */\n\n/**\n * Type decorator (TypeScript).\n * @param {string} [typeName] Type name, defaults to the constructor's name\n * @returns {TypeDecorator<T>} Decorator function\n * @template T extends Message<T>\n */\nType.d = function decorateType(typeName) {\n    return function typeDecorator(target) {\n        util.decorateType(target, typeName);\n    };\n};\n", "\"use strict\";\nmodule.exports = Root;\n\n// extends Namespace\nvar Namespace = require(\"./namespace\");\n((Root.prototype = Object.create(Namespace.prototype)).constructor = Root).className = \"Root\";\n\nvar Field   = require(\"./field\"),\n    Enum    = require(\"./enum\"),\n    OneOf   = require(\"./oneof\"),\n    util    = require(\"./util\");\n\nvar Type,   // cyclic\n    parse,  // might be excluded\n    common; // \"\n\n/**\n * Constructs a new root namespace instance.\n * @classdesc Root namespace wrapping all types, enums, services, sub-namespaces etc. that belong together.\n * @extends NamespaceBase\n * @constructor\n * @param {Object.<string,*>} [options] Top level options\n */\nfunction Root(options) {\n    Namespace.call(this, \"\", options);\n\n    /**\n     * Deferred extension fields.\n     * @type {Field[]}\n     */\n    this.deferred = [];\n\n    /**\n     * Resolved file names of loaded files.\n     * @type {string[]}\n     */\n    this.files = [];\n\n    /**\n     * Edition, defaults to proto2 if unspecified.\n     * @type {string}\n     * @private\n     */\n    this._edition = \"proto2\";\n\n    /**\n     * Global lookup cache of fully qualified names.\n     * @type {Object.<string,ReflectionObject>}\n     * @private\n     */\n    this._fullyQualifiedObjects = {};\n}\n\n/**\n * Loads a namespace descriptor into a root namespace.\n * @param {INamespace} json Namespace descriptor\n * @param {Root} [root] Root namespace, defaults to create a new one if omitted\n * @returns {Root} Root namespace\n */\nRoot.fromJSON = function fromJSON(json, root) {\n    if (!root)\n        root = new Root();\n    if (json.options)\n        root.setOptions(json.options);\n    return root.addJSON(json.nested).resolveAll();\n};\n\n/**\n * Resolves the path of an imported file, relative to the importing origin.\n * This method exists so you can override it with your own logic in case your imports are scattered over multiple directories.\n * @function\n * @param {string} origin The file name of the importing file\n * @param {string} target The file name being imported\n * @returns {string|null} Resolved path to `target` or `null` to skip the file\n */\nRoot.prototype.resolvePath = util.path.resolve;\n\n/**\n * Fetch content from file path or url\n * This method exists so you can override it with your own logic.\n * @function\n * @param {string} path File path or url\n * @param {FetchCallback} callback Callback function\n * @returns {undefined}\n */\nRoot.prototype.fetch = util.fetch;\n\n// A symbol-like function to safely signal synchronous loading\n/* istanbul ignore next */\nfunction SYNC() {} // eslint-disable-line no-empty-function\n\n/**\n * Loads one or multiple .proto or preprocessed .json files into this root namespace and calls the callback.\n * @param {string|string[]} filename Names of one or multiple files to load\n * @param {IParseOptions} options Parse options\n * @param {LoadCallback} callback Callback function\n * @returns {undefined}\n */\nRoot.prototype.load = function load(filename, options, callback) {\n    if (typeof options === \"function\") {\n        callback = options;\n        options = undefined;\n    }\n    var self = this;\n    if (!callback) {\n        return util.asPromise(load, self, filename, options);\n    }\n\n    var sync = callback === SYNC; // undocumented\n\n    // Finishes loading by calling the callback (exactly once)\n    function finish(err, root) {\n        /* istanbul ignore if */\n        if (!callback) {\n            return;\n        }\n        if (sync) {\n            throw err;\n        }\n        if (root) {\n            root.resolveAll();\n        }\n        var cb = callback;\n        callback = null;\n        cb(err, root);\n    }\n\n    // Bundled definition existence checking\n    function getBundledFileName(filename) {\n        var idx = filename.lastIndexOf(\"google/protobuf/\");\n        if (idx > -1) {\n            var altname = filename.substring(idx);\n            if (altname in common) return altname;\n        }\n        return null;\n    }\n\n    // Processes a single file\n    function process(filename, source) {\n        try {\n            if (util.isString(source) && source.charAt(0) === \"{\")\n                source = JSON.parse(source);\n            if (!util.isString(source))\n                self.setOptions(source.options).addJSON(source.nested);\n            else {\n                parse.filename = filename;\n                var parsed = parse(source, self, options),\n                    resolved,\n                    i = 0;\n                if (parsed.imports)\n                    for (; i < parsed.imports.length; ++i)\n                        if (resolved = getBundledFileName(parsed.imports[i]) || self.resolvePath(filename, parsed.imports[i]))\n                            fetch(resolved);\n                if (parsed.weakImports)\n                    for (i = 0; i < parsed.weakImports.length; ++i)\n                        if (resolved = getBundledFileName(parsed.weakImports[i]) || self.resolvePath(filename, parsed.weakImports[i]))\n                            fetch(resolved, true);\n            }\n        } catch (err) {\n            finish(err);\n        }\n        if (!sync && !queued) {\n            finish(null, self); // only once anyway\n        }\n    }\n\n    // Fetches a single file\n    function fetch(filename, weak) {\n        filename = getBundledFileName(filename) || filename;\n\n        // Skip if already loaded / attempted\n        if (self.files.indexOf(filename) > -1) {\n            return;\n        }\n        self.files.push(filename);\n\n        // Shortcut bundled definitions\n        if (filename in common) {\n            if (sync) {\n                process(filename, common[filename]);\n            } else {\n                ++queued;\n                setTimeout(function() {\n                    --queued;\n                    process(filename, common[filename]);\n                });\n            }\n            return;\n        }\n\n        // Otherwise fetch from disk or network\n        if (sync) {\n            var source;\n            try {\n                source = util.fs.readFileSync(filename).toString(\"utf8\");\n            } catch (err) {\n                if (!weak)\n                    finish(err);\n                return;\n            }\n            process(filename, source);\n        } else {\n            ++queued;\n            self.fetch(filename, function(err, source) {\n                --queued;\n                /* istanbul ignore if */\n                if (!callback) {\n                    return; // terminated meanwhile\n                }\n                if (err) {\n                    /* istanbul ignore else */\n                    if (!weak)\n                        finish(err);\n                    else if (!queued) // can't be covered reliably\n                        finish(null, self);\n                    return;\n                }\n                process(filename, source);\n            });\n        }\n    }\n    var queued = 0;\n\n    // Assembling the root namespace doesn't require working type\n    // references anymore, so we can load everything in parallel\n    if (util.isString(filename)) {\n        filename = [ filename ];\n    }\n    for (var i = 0, resolved; i < filename.length; ++i)\n        if (resolved = self.resolvePath(\"\", filename[i]))\n            fetch(resolved);\n    if (sync) {\n        self.resolveAll();\n        return self;\n    }\n    if (!queued) {\n        finish(null, self);\n    }\n\n    return self;\n};\n// function load(filename:string, options:IParseOptions, callback:LoadCallback):undefined\n\n/**\n * Loads one or multiple .proto or preprocessed .json files into this root namespace and calls the callback.\n * @function Root#load\n * @param {string|string[]} filename Names of one or multiple files to load\n * @param {LoadCallback} callback Callback function\n * @returns {undefined}\n * @variation 2\n */\n// function load(filename:string, callback:LoadCallback):undefined\n\n/**\n * Loads one or multiple .proto or preprocessed .json files into this root namespace and returns a promise.\n * @function Root#load\n * @param {string|string[]} filename Names of one or multiple files to load\n * @param {IParseOptions} [options] Parse options. Defaults to {@link parse.defaults} when omitted.\n * @returns {Promise<Root>} Promise\n * @variation 3\n */\n// function load(filename:string, [options:IParseOptions]):Promise<Root>\n\n/**\n * Synchronously loads one or multiple .proto or preprocessed .json files into this root namespace (node only).\n * @function Root#loadSync\n * @param {string|string[]} filename Names of one or multiple files to load\n * @param {IParseOptions} [options] Parse options. Defaults to {@link parse.defaults} when omitted.\n * @returns {Root} Root namespace\n * @throws {Error} If synchronous fetching is not supported (i.e. in browsers) or if a file's syntax is invalid\n */\nRoot.prototype.loadSync = function loadSync(filename, options) {\n    if (!util.isNode)\n        throw Error(\"not supported\");\n    return this.load(filename, options, SYNC);\n};\n\n/**\n * @override\n */\nRoot.prototype.resolveAll = function resolveAll() {\n    if (!this._needsRecursiveResolve) return this;\n\n    if (this.deferred.length)\n        throw Error(\"unresolvable extensions: \" + this.deferred.map(function(field) {\n            return \"'extend \" + field.extend + \"' in \" + field.parent.fullName;\n        }).join(\", \"));\n    return Namespace.prototype.resolveAll.call(this);\n};\n\n// only uppercased (and thus conflict-free) children are exposed, see below\nvar exposeRe = /^[A-Z]/;\n\n/**\n * Handles a deferred declaring extension field by creating a sister field to represent it within its extended type.\n * @param {Root} root Root instance\n * @param {Field} field Declaring extension field witin the declaring type\n * @returns {boolean} `true` if successfully added to the extended type, `false` otherwise\n * @inner\n * @ignore\n */\nfunction tryHandleExtension(root, field) {\n    var extendedType = field.parent.lookup(field.extend);\n    if (extendedType) {\n        var sisterField = new Field(field.fullName, field.id, field.type, field.rule, undefined, field.options);\n        //do not allow to extend same field twice to prevent the error\n        if (extendedType.get(sisterField.name)) {\n            return true;\n        }\n        sisterField.declaringField = field;\n        field.extensionField = sisterField;\n        extendedType.add(sisterField);\n        return true;\n    }\n    return false;\n}\n\n/**\n * Called when any object is added to this root or its sub-namespaces.\n * @param {ReflectionObject} object Object added\n * @returns {undefined}\n * @private\n */\nRoot.prototype._handleAdd = function _handleAdd(object) {\n    if (object instanceof Field) {\n\n        if (/* an extension field (implies not part of a oneof) */ object.extend !== undefined && /* not already handled */ !object.extensionField)\n            if (!tryHandleExtension(this, object))\n                this.deferred.push(object);\n\n    } else if (object instanceof Enum) {\n\n        if (exposeRe.test(object.name))\n            object.parent[object.name] = object.values; // expose enum values as property of its parent\n\n    } else if (!(object instanceof OneOf)) /* everything else is a namespace */ {\n\n        if (object instanceof Type) // Try to handle any deferred extensions\n            for (var i = 0; i < this.deferred.length;)\n                if (tryHandleExtension(this, this.deferred[i]))\n                    this.deferred.splice(i, 1);\n                else\n                    ++i;\n        for (var j = 0; j < /* initializes */ object.nestedArray.length; ++j) // recurse into the namespace\n            this._handleAdd(object._nestedArray[j]);\n        if (exposeRe.test(object.name))\n            object.parent[object.name] = object; // expose namespace as property of its parent\n    }\n\n    if (object instanceof Type || object instanceof Enum || object instanceof Field) {\n        // Only store types and enums for quick lookup during resolve.\n        this._fullyQualifiedObjects[object.fullName] = object;\n    }\n\n    // The above also adds uppercased (and thus conflict-free) nested types, services and enums as\n    // properties of namespaces just like static code does. This allows using a .d.ts generated for\n    // a static module with reflection-based solutions where the condition is met.\n};\n\n/**\n * Called when any object is removed from this root or its sub-namespaces.\n * @param {ReflectionObject} object Object removed\n * @returns {undefined}\n * @private\n */\nRoot.prototype._handleRemove = function _handleRemove(object) {\n    if (object instanceof Field) {\n\n        if (/* an extension field */ object.extend !== undefined) {\n            if (/* already handled */ object.extensionField) { // remove its sister field\n                object.extensionField.parent.remove(object.extensionField);\n                object.extensionField = null;\n            } else { // cancel the extension\n                var index = this.deferred.indexOf(object);\n                /* istanbul ignore else */\n                if (index > -1)\n                    this.deferred.splice(index, 1);\n            }\n        }\n\n    } else if (object instanceof Enum) {\n\n        if (exposeRe.test(object.name))\n            delete object.parent[object.name]; // unexpose enum values\n\n    } else if (object instanceof Namespace) {\n\n        for (var i = 0; i < /* initializes */ object.nestedArray.length; ++i) // recurse into the namespace\n            this._handleRemove(object._nestedArray[i]);\n\n        if (exposeRe.test(object.name))\n            delete object.parent[object.name]; // unexpose namespaces\n\n    }\n\n    delete this._fullyQualifiedObjects[object.fullName];\n};\n\n// Sets up cyclic dependencies (called in index-light)\nRoot._configure = function(Type_, parse_, common_) {\n    Type   = Type_;\n    parse  = parse_;\n    common = common_;\n};\n", "\"use strict\";\n\n/**\n * Various utility functions.\n * @namespace\n */\nvar util = module.exports = require(\"./util/minimal\");\n\nvar roots = require(\"./roots\");\n\nvar Type, // cyclic\n    Enum;\n\nutil.codegen = require(\"@protobufjs/codegen\");\nutil.fetch   = require(\"@protobufjs/fetch\");\nutil.path    = require(\"@protobufjs/path\");\n\n/**\n * Node's fs module if available.\n * @type {Object.<string,*>}\n */\nutil.fs = util.inquire(\"fs\");\n\n/**\n * Converts an object's values to an array.\n * @param {Object.<string,*>} object Object to convert\n * @returns {Array.<*>} Converted array\n */\nutil.toArray = function toArray(object) {\n    if (object) {\n        var keys  = Object.keys(object),\n            array = new Array(keys.length),\n            index = 0;\n        while (index < keys.length)\n            array[index] = object[keys[index++]];\n        return array;\n    }\n    return [];\n};\n\n/**\n * Converts an array of keys immediately followed by their respective value to an object, omitting undefined values.\n * @param {Array.<*>} array Array to convert\n * @returns {Object.<string,*>} Converted object\n */\nutil.toObject = function toObject(array) {\n    var object = {},\n        index  = 0;\n    while (index < array.length) {\n        var key = array[index++],\n            val = array[index++];\n        if (val !== undefined)\n            object[key] = val;\n    }\n    return object;\n};\n\nvar safePropBackslashRe = /\\\\/g,\n    safePropQuoteRe     = /\"/g;\n\n/**\n * Tests whether the specified name is a reserved word in JS.\n * @param {string} name Name to test\n * @returns {boolean} `true` if reserved, otherwise `false`\n */\nutil.isReserved = function isReserved(name) {\n    return /^(?:do|if|in|for|let|new|try|var|case|else|enum|eval|false|null|this|true|void|with|break|catch|class|const|super|throw|while|yield|delete|export|import|public|return|static|switch|typeof|default|extends|finally|package|private|continue|debugger|function|arguments|interface|protected|implements|instanceof)$/.test(name);\n};\n\n/**\n * Returns a safe property accessor for the specified property name.\n * @param {string} prop Property name\n * @returns {string} Safe accessor\n */\nutil.safeProp = function safeProp(prop) {\n    if (!/^[$\\w_]+$/.test(prop) || util.isReserved(prop))\n        return \"[\\\"\" + prop.replace(safePropBackslashRe, \"\\\\\\\\\").replace(safePropQuoteRe, \"\\\\\\\"\") + \"\\\"]\";\n    return \".\" + prop;\n};\n\n/**\n * Converts the first character of a string to upper case.\n * @param {string} str String to convert\n * @returns {string} Converted string\n */\nutil.ucFirst = function ucFirst(str) {\n    return str.charAt(0).toUpperCase() + str.substring(1);\n};\n\nvar camelCaseRe = /_([a-z])/g;\n\n/**\n * Converts a string to camel case.\n * @param {string} str String to convert\n * @returns {string} Converted string\n */\nutil.camelCase = function camelCase(str) {\n    return str.substring(0, 1)\n         + str.substring(1)\n               .replace(camelCaseRe, function($0, $1) { return $1.toUpperCase(); });\n};\n\n/**\n * Compares reflected fields by id.\n * @param {Field} a First field\n * @param {Field} b Second field\n * @returns {number} Comparison value\n */\nutil.compareFieldsById = function compareFieldsById(a, b) {\n    return a.id - b.id;\n};\n\n/**\n * Decorator helper for types (TypeScript).\n * @param {Constructor<T>} ctor Constructor function\n * @param {string} [typeName] Type name, defaults to the constructor's name\n * @returns {Type} Reflected type\n * @template T extends Message<T>\n * @property {Root} root Decorators root\n */\nutil.decorateType = function decorateType(ctor, typeName) {\n\n    /* istanbul ignore if */\n    if (ctor.$type) {\n        if (typeName && ctor.$type.name !== typeName) {\n            util.decorateRoot.remove(ctor.$type);\n            ctor.$type.name = typeName;\n            util.decorateRoot.add(ctor.$type);\n        }\n        return ctor.$type;\n    }\n\n    /* istanbul ignore next */\n    if (!Type)\n        Type = require(\"./type\");\n\n    var type = new Type(typeName || ctor.name);\n    util.decorateRoot.add(type);\n    type.ctor = ctor; // sets up .encode, .decode etc.\n    Object.defineProperty(ctor, \"$type\", { value: type, enumerable: false });\n    Object.defineProperty(ctor.prototype, \"$type\", { value: type, enumerable: false });\n    return type;\n};\n\nvar decorateEnumIndex = 0;\n\n/**\n * Decorator helper for enums (TypeScript).\n * @param {Object} object Enum object\n * @returns {Enum} Reflected enum\n */\nutil.decorateEnum = function decorateEnum(object) {\n\n    /* istanbul ignore if */\n    if (object.$type)\n        return object.$type;\n\n    /* istanbul ignore next */\n    if (!Enum)\n        Enum = require(\"./enum\");\n\n    var enm = new Enum(\"Enum\" + decorateEnumIndex++, object);\n    util.decorateRoot.add(enm);\n    Object.defineProperty(object, \"$type\", { value: enm, enumerable: false });\n    return enm;\n};\n\n\n/**\n * Sets the value of a property by property path. If a value already exists, it is turned to an array\n * @param {Object.<string,*>} dst Destination object\n * @param {string} path dot '.' delimited path of the property to set\n * @param {Object} value the value to set\n * @param {boolean|undefined} [ifNotSet] Sets the option only if it isn't currently set\n * @returns {Object.<string,*>} Destination object\n */\nutil.setProperty = function setProperty(dst, path, value, ifNotSet) {\n    function setProp(dst, path, value) {\n        var part = path.shift();\n        if (part === \"__proto__\" || part === \"prototype\") {\n          return dst;\n        }\n        if (path.length > 0) {\n            dst[part] = setProp(dst[part] || {}, path, value);\n        } else {\n            var prevValue = dst[part];\n            if (prevValue && ifNotSet)\n                return dst;\n            if (prevValue)\n                value = [].concat(prevValue).concat(value);\n            dst[part] = value;\n        }\n        return dst;\n    }\n\n    if (typeof dst !== \"object\")\n        throw TypeError(\"dst must be an object\");\n    if (!path)\n        throw TypeError(\"path must be specified\");\n\n    path = path.split(\".\");\n    return setProp(dst, path, value);\n};\n\n/**\n * Decorator root (TypeScript).\n * @name util.decorateRoot\n * @type {Root}\n * @readonly\n */\nObject.defineProperty(util, \"decorateRoot\", {\n    get: function() {\n        return roots[\"decorated\"] || (roots[\"decorated\"] = new (require(\"./root\"))());\n    }\n});\n", "\"use strict\";\n\n/**\n * Common type constants.\n * @namespace\n */\nvar types = exports;\n\nvar util = require(\"./util\");\n\nvar s = [\n    \"double\",   // 0\n    \"float\",    // 1\n    \"int32\",    // 2\n    \"uint32\",   // 3\n    \"sint32\",   // 4\n    \"fixed32\",  // 5\n    \"sfixed32\", // 6\n    \"int64\",    // 7\n    \"uint64\",   // 8\n    \"sint64\",   // 9\n    \"fixed64\",  // 10\n    \"sfixed64\", // 11\n    \"bool\",     // 12\n    \"string\",   // 13\n    \"bytes\"     // 14\n];\n\nfunction bake(values, offset) {\n    var i = 0, o = {};\n    offset |= 0;\n    while (i < values.length) o[s[i + offset]] = values[i++];\n    return o;\n}\n\n/**\n * Basic type wire types.\n * @type {Object.<string,number>}\n * @const\n * @property {number} double=1 Fixed64 wire type\n * @property {number} float=5 Fixed32 wire type\n * @property {number} int32=0 Varint wire type\n * @property {number} uint32=0 Varint wire type\n * @property {number} sint32=0 Varint wire type\n * @property {number} fixed32=5 Fixed32 wire type\n * @property {number} sfixed32=5 Fixed32 wire type\n * @property {number} int64=0 Varint wire type\n * @property {number} uint64=0 Varint wire type\n * @property {number} sint64=0 Varint wire type\n * @property {number} fixed64=1 Fixed64 wire type\n * @property {number} sfixed64=1 Fixed64 wire type\n * @property {number} bool=0 Varint wire type\n * @property {number} string=2 Ldelim wire type\n * @property {number} bytes=2 Ldelim wire type\n */\ntypes.basic = bake([\n    /* double   */ 1,\n    /* float    */ 5,\n    /* int32    */ 0,\n    /* uint32   */ 0,\n    /* sint32   */ 0,\n    /* fixed32  */ 5,\n    /* sfixed32 */ 5,\n    /* int64    */ 0,\n    /* uint64   */ 0,\n    /* sint64   */ 0,\n    /* fixed64  */ 1,\n    /* sfixed64 */ 1,\n    /* bool     */ 0,\n    /* string   */ 2,\n    /* bytes    */ 2\n]);\n\n/**\n * Basic type defaults.\n * @type {Object.<string,*>}\n * @const\n * @property {number} double=0 Double default\n * @property {number} float=0 Float default\n * @property {number} int32=0 Int32 default\n * @property {number} uint32=0 Uint32 default\n * @property {number} sint32=0 Sint32 default\n * @property {number} fixed32=0 Fixed32 default\n * @property {number} sfixed32=0 Sfixed32 default\n * @property {number} int64=0 Int64 default\n * @property {number} uint64=0 Uint64 default\n * @property {number} sint64=0 Sint32 default\n * @property {number} fixed64=0 Fixed64 default\n * @property {number} sfixed64=0 Sfixed64 default\n * @property {boolean} bool=false Bool default\n * @property {string} string=\"\" String default\n * @property {Array.<number>} bytes=Array(0) Bytes default\n * @property {null} message=null Message default\n */\ntypes.defaults = bake([\n    /* double   */ 0,\n    /* float    */ 0,\n    /* int32    */ 0,\n    /* uint32   */ 0,\n    /* sint32   */ 0,\n    /* fixed32  */ 0,\n    /* sfixed32 */ 0,\n    /* int64    */ 0,\n    /* uint64   */ 0,\n    /* sint64   */ 0,\n    /* fixed64  */ 0,\n    /* sfixed64 */ 0,\n    /* bool     */ false,\n    /* string   */ \"\",\n    /* bytes    */ util.emptyArray,\n    /* message  */ null\n]);\n\n/**\n * Basic long type wire types.\n * @type {Object.<string,number>}\n * @const\n * @property {number} int64=0 Varint wire type\n * @property {number} uint64=0 Varint wire type\n * @property {number} sint64=0 Varint wire type\n * @property {number} fixed64=1 Fixed64 wire type\n * @property {number} sfixed64=1 Fixed64 wire type\n */\ntypes.long = bake([\n    /* int64    */ 0,\n    /* uint64   */ 0,\n    /* sint64   */ 0,\n    /* fixed64  */ 1,\n    /* sfixed64 */ 1\n], 7);\n\n/**\n * Allowed types for map keys with their associated wire type.\n * @type {Object.<string,number>}\n * @const\n * @property {number} int32=0 Varint wire type\n * @property {number} uint32=0 Varint wire type\n * @property {number} sint32=0 Varint wire type\n * @property {number} fixed32=5 Fixed32 wire type\n * @property {number} sfixed32=5 Fixed32 wire type\n * @property {number} int64=0 Varint wire type\n * @property {number} uint64=0 Varint wire type\n * @property {number} sint64=0 Varint wire type\n * @property {number} fixed64=1 Fixed64 wire type\n * @property {number} sfixed64=1 Fixed64 wire type\n * @property {number} bool=0 Varint wire type\n * @property {number} string=2 Ldelim wire type\n */\ntypes.mapKey = bake([\n    /* int32    */ 0,\n    /* uint32   */ 0,\n    /* sint32   */ 0,\n    /* fixed32  */ 5,\n    /* sfixed32 */ 5,\n    /* int64    */ 0,\n    /* uint64   */ 0,\n    /* sint64   */ 0,\n    /* fixed64  */ 1,\n    /* sfixed64 */ 1,\n    /* bool     */ 0,\n    /* string   */ 2\n], 2);\n\n/**\n * Allowed types for packed repeated fields with their associated wire type.\n * @type {Object.<string,number>}\n * @const\n * @property {number} double=1 Fixed64 wire type\n * @property {number} float=5 Fixed32 wire type\n * @property {number} int32=0 Varint wire type\n * @property {number} uint32=0 Varint wire type\n * @property {number} sint32=0 Varint wire type\n * @property {number} fixed32=5 Fixed32 wire type\n * @property {number} sfixed32=5 Fixed32 wire type\n * @property {number} int64=0 Varint wire type\n * @property {number} uint64=0 Varint wire type\n * @property {number} sint64=0 Varint wire type\n * @property {number} fixed64=1 Fixed64 wire type\n * @property {number} sfixed64=1 Fixed64 wire type\n * @property {number} bool=0 Varint wire type\n */\ntypes.packed = bake([\n    /* double   */ 1,\n    /* float    */ 5,\n    /* int32    */ 0,\n    /* uint32   */ 0,\n    /* sint32   */ 0,\n    /* fixed32  */ 5,\n    /* sfixed32 */ 5,\n    /* int64    */ 0,\n    /* uint64   */ 0,\n    /* sint64   */ 0,\n    /* fixed64  */ 1,\n    /* sfixed64 */ 1,\n    /* bool     */ 0\n]);\n", "\"use strict\";\nmodule.exports = Field;\n\n// extends ReflectionObject\nvar ReflectionObject = require(\"./object\");\n((Field.prototype = Object.create(ReflectionObject.prototype)).constructor = Field).className = \"Field\";\n\nvar Enum  = require(\"./enum\"),\n    types = require(\"./types\"),\n    util  = require(\"./util\");\n\nvar Type; // cyclic\n\nvar ruleRe = /^required|optional|repeated$/;\n\n/**\n * Constructs a new message field instance. Note that {@link MapField|map fields} have their own class.\n * @name Field\n * @classdesc Reflected message field.\n * @extends FieldBase\n * @constructor\n * @param {string} name Unique name within its namespace\n * @param {number} id Unique id within its namespace\n * @param {string} type Value type\n * @param {string|Object.<string,*>} [rule=\"optional\"] Field rule\n * @param {string|Object.<string,*>} [extend] Extended type if different from parent\n * @param {Object.<string,*>} [options] Declared options\n */\n\n/**\n * Constructs a field from a field descriptor.\n * @param {string} name Field name\n * @param {IField} json Field descriptor\n * @returns {Field} Created field\n * @throws {TypeError} If arguments are invalid\n */\nField.fromJSON = function fromJSON(name, json) {\n    var field = new Field(name, json.id, json.type, json.rule, json.extend, json.options, json.comment);\n    if (json.edition)\n        field._edition = json.edition;\n    field._defaultEdition = \"proto3\";  // For backwards-compatibility.\n    return field;\n};\n\n/**\n * Not an actual constructor. Use {@link Field} instead.\n * @classdesc Base class of all reflected message fields. This is not an actual class but here for the sake of having consistent type definitions.\n * @exports FieldBase\n * @extends ReflectionObject\n * @constructor\n * @param {string} name Unique name within its namespace\n * @param {number} id Unique id within its namespace\n * @param {string} type Value type\n * @param {string|Object.<string,*>} [rule=\"optional\"] Field rule\n * @param {string|Object.<string,*>} [extend] Extended type if different from parent\n * @param {Object.<string,*>} [options] Declared options\n * @param {string} [comment] Comment associated with this field\n */\nfunction Field(name, id, type, rule, extend, options, comment) {\n\n    if (util.isObject(rule)) {\n        comment = extend;\n        options = rule;\n        rule = extend = undefined;\n    } else if (util.isObject(extend)) {\n        comment = options;\n        options = extend;\n        extend = undefined;\n    }\n\n    ReflectionObject.call(this, name, options);\n\n    if (!util.isInteger(id) || id < 0)\n        throw TypeError(\"id must be a non-negative integer\");\n\n    if (!util.isString(type))\n        throw TypeError(\"type must be a string\");\n\n    if (rule !== undefined && !ruleRe.test(rule = rule.toString().toLowerCase()))\n        throw TypeError(\"rule must be a string rule\");\n\n    if (extend !== undefined && !util.isString(extend))\n        throw TypeError(\"extend must be a string\");\n\n    /**\n     * Field rule, if any.\n     * @type {string|undefined}\n     */\n    if (rule === \"proto3_optional\") {\n        rule = \"optional\";\n    }\n    this.rule = rule && rule !== \"optional\" ? rule : undefined; // toJSON\n\n    /**\n     * Field type.\n     * @type {string}\n     */\n    this.type = type; // toJSON\n\n    /**\n     * Unique field id.\n     * @type {number}\n     */\n    this.id = id; // toJSON, marker\n\n    /**\n     * Extended type if different from parent.\n     * @type {string|undefined}\n     */\n    this.extend = extend || undefined; // toJSON\n\n    /**\n     * Whether this field is repeated.\n     * @type {boolean}\n     */\n    this.repeated = rule === \"repeated\";\n\n    /**\n     * Whether this field is a map or not.\n     * @type {boolean}\n     */\n    this.map = false;\n\n    /**\n     * Message this field belongs to.\n     * @type {Type|null}\n     */\n    this.message = null;\n\n    /**\n     * OneOf this field belongs to, if any,\n     * @type {OneOf|null}\n     */\n    this.partOf = null;\n\n    /**\n     * The field type's default value.\n     * @type {*}\n     */\n    this.typeDefault = null;\n\n    /**\n     * The field's default value on prototypes.\n     * @type {*}\n     */\n    this.defaultValue = null;\n\n    /**\n     * Whether this field's value should be treated as a long.\n     * @type {boolean}\n     */\n    this.long = util.Long ? types.long[type] !== undefined : /* istanbul ignore next */ false;\n\n    /**\n     * Whether this field's value is a buffer.\n     * @type {boolean}\n     */\n    this.bytes = type === \"bytes\";\n\n    /**\n     * Resolved type if not a basic type.\n     * @type {Type|Enum|null}\n     */\n    this.resolvedType = null;\n\n    /**\n     * Sister-field within the extended type if a declaring extension field.\n     * @type {Field|null}\n     */\n    this.extensionField = null;\n\n    /**\n     * Sister-field within the declaring namespace if an extended field.\n     * @type {Field|null}\n     */\n    this.declaringField = null;\n\n    /**\n     * Comment for this field.\n     * @type {string|null}\n     */\n    this.comment = comment;\n}\n\n/**\n * Determines whether this field is required.\n * @name Field#required\n * @type {boolean}\n * @readonly\n */\nObject.defineProperty(Field.prototype, \"required\", {\n    get: function() {\n        return this._features.field_presence === \"LEGACY_REQUIRED\";\n    }\n});\n\n/**\n * Determines whether this field is not required.\n * @name Field#optional\n * @type {boolean}\n * @readonly\n */\nObject.defineProperty(Field.prototype, \"optional\", {\n    get: function() {\n        return !this.required;\n    }\n});\n\n/**\n * Determines whether this field uses tag-delimited encoding.  In proto2 this\n * corresponded to group syntax.\n * @name Field#delimited\n * @type {boolean}\n * @readonly\n */\nObject.defineProperty(Field.prototype, \"delimited\", {\n    get: function() {\n        return this.resolvedType instanceof Type &&\n            this._features.message_encoding === \"DELIMITED\";\n    }\n});\n\n/**\n * Determines whether this field is packed. Only relevant when repeated.\n * @name Field#packed\n * @type {boolean}\n * @readonly\n */\nObject.defineProperty(Field.prototype, \"packed\", {\n    get: function() {\n        return this._features.repeated_field_encoding === \"PACKED\";\n    }\n});\n\n/**\n * Determines whether this field tracks presence.\n * @name Field#hasPresence\n * @type {boolean}\n * @readonly\n */\nObject.defineProperty(Field.prototype, \"hasPresence\", {\n    get: function() {\n        if (this.repeated || this.map) {\n            return false;\n        }\n        return this.partOf || // oneofs\n            this.declaringField || this.extensionField || // extensions\n            this._features.field_presence !== \"IMPLICIT\";\n    }\n});\n\n/**\n * @override\n */\nField.prototype.setOption = function setOption(name, value, ifNotSet) {\n    return ReflectionObject.prototype.setOption.call(this, name, value, ifNotSet);\n};\n\n/**\n * Field descriptor.\n * @interface IField\n * @property {string} [rule=\"optional\"] Field rule\n * @property {string} type Field type\n * @property {number} id Field id\n * @property {Object.<string,*>} [options] Field options\n */\n\n/**\n * Extension field descriptor.\n * @interface IExtensionField\n * @extends IField\n * @property {string} extend Extended type\n */\n\n/**\n * Converts this field to a field descriptor.\n * @param {IToJSONOptions} [toJSONOptions] JSON conversion options\n * @returns {IField} Field descriptor\n */\nField.prototype.toJSON = function toJSON(toJSONOptions) {\n    var keepComments = toJSONOptions ? Boolean(toJSONOptions.keepComments) : false;\n    return util.toObject([\n        \"edition\" , this._editionToJSON(),\n        \"rule\"    , this.rule !== \"optional\" && this.rule || undefined,\n        \"type\"    , this.type,\n        \"id\"      , this.id,\n        \"extend\"  , this.extend,\n        \"options\" , this.options,\n        \"comment\" , keepComments ? this.comment : undefined\n    ]);\n};\n\n/**\n * Resolves this field's type references.\n * @returns {Field} `this`\n * @throws {Error} If any reference cannot be resolved\n */\nField.prototype.resolve = function resolve() {\n\n    if (this.resolved)\n        return this;\n\n    if ((this.typeDefault = types.defaults[this.type]) === undefined) { // if not a basic type, resolve it\n        this.resolvedType = (this.declaringField ? this.declaringField.parent : this.parent).lookupTypeOrEnum(this.type);\n        if (this.resolvedType instanceof Type)\n            this.typeDefault = null;\n        else // instanceof Enum\n            this.typeDefault = this.resolvedType.values[Object.keys(this.resolvedType.values)[0]]; // first defined\n    } else if (this.options && this.options.proto3_optional) {\n        // proto3 scalar value marked optional; should default to null\n        this.typeDefault = null;\n    }\n\n    // use explicitly set default value if present\n    if (this.options && this.options[\"default\"] != null) {\n        this.typeDefault = this.options[\"default\"];\n        if (this.resolvedType instanceof Enum && typeof this.typeDefault === \"string\")\n            this.typeDefault = this.resolvedType.values[this.typeDefault];\n    }\n\n    // remove unnecessary options\n    if (this.options) {\n        if (this.options.packed !== undefined && this.resolvedType && !(this.resolvedType instanceof Enum))\n            delete this.options.packed;\n        if (!Object.keys(this.options).length)\n            this.options = undefined;\n    }\n\n    // convert to internal data type if necesssary\n    if (this.long) {\n        this.typeDefault = util.Long.fromNumber(this.typeDefault, this.type.charAt(0) === \"u\");\n\n        /* istanbul ignore else */\n        if (Object.freeze)\n            Object.freeze(this.typeDefault); // long instances are meant to be immutable anyway (i.e. use small int cache that even requires it)\n\n    } else if (this.bytes && typeof this.typeDefault === \"string\") {\n        var buf;\n        if (util.base64.test(this.typeDefault))\n            util.base64.decode(this.typeDefault, buf = util.newBuffer(util.base64.length(this.typeDefault)), 0);\n        else\n            util.utf8.write(this.typeDefault, buf = util.newBuffer(util.utf8.length(this.typeDefault)), 0);\n        this.typeDefault = buf;\n    }\n\n    // take special care of maps and repeated fields\n    if (this.map)\n        this.defaultValue = util.emptyObject;\n    else if (this.repeated)\n        this.defaultValue = util.emptyArray;\n    else\n        this.defaultValue = this.typeDefault;\n\n    // ensure proper value on prototype\n    if (this.parent instanceof Type)\n        this.parent.ctor.prototype[this.name] = this.defaultValue;\n\n    return ReflectionObject.prototype.resolve.call(this);\n};\n\n/**\n * Infers field features from legacy syntax that may have been specified differently.\n * in older editions.\n * @param {string|undefined} edition The edition this proto is on, or undefined if pre-editions\n * @returns {object} The feature values to override\n */\nField.prototype._inferLegacyProtoFeatures = function _inferLegacyProtoFeatures(edition) {\n    if (edition !== \"proto2\" && edition !== \"proto3\") {\n        return {};\n    }\n\n    var features = {};\n\n    if (this.rule === \"required\") {\n        features.field_presence = \"LEGACY_REQUIRED\";\n    }\n    if (this.parent && types.defaults[this.type] === undefined) {\n        // We can't use resolvedType because types may not have been resolved yet.  However,\n        // legacy groups are always in the same scope as the field so we don't have to do a\n        // full scan of the tree.\n        var type = this.parent.get(this.type.split(\".\").pop());\n        if (type && type instanceof Type && type.group) {\n            features.message_encoding = \"DELIMITED\";\n        }\n    }\n    if (this.getOption(\"packed\") === true) {\n        features.repeated_field_encoding = \"PACKED\";\n    } else if (this.getOption(\"packed\") === false) {\n        features.repeated_field_encoding = \"EXPANDED\";\n    }\n    return features;\n};\n\n/**\n * @override\n */\nField.prototype._resolveFeatures = function _resolveFeatures(edition) {\n    return ReflectionObject.prototype._resolveFeatures.call(this, this._edition || edition);\n};\n\n/**\n * Decorator function as returned by {@link Field.d} and {@link MapField.d} (TypeScript).\n * @typedef FieldDecorator\n * @type {function}\n * @param {Object} prototype Target prototype\n * @param {string} fieldName Field name\n * @returns {undefined}\n */\n\n/**\n * Field decorator (TypeScript).\n * @name Field.d\n * @function\n * @param {number} fieldId Field id\n * @param {\"double\"|\"float\"|\"int32\"|\"uint32\"|\"sint32\"|\"fixed32\"|\"sfixed32\"|\"int64\"|\"uint64\"|\"sint64\"|\"fixed64\"|\"sfixed64\"|\"string\"|\"bool\"|\"bytes\"|Object} fieldType Field type\n * @param {\"optional\"|\"required\"|\"repeated\"} [fieldRule=\"optional\"] Field rule\n * @param {T} [defaultValue] Default value\n * @returns {FieldDecorator} Decorator function\n * @template T extends number | number[] | Long | Long[] | string | string[] | boolean | boolean[] | Uint8Array | Uint8Array[] | Buffer | Buffer[]\n */\nField.d = function decorateField(fieldId, fieldType, fieldRule, defaultValue) {\n\n    // submessage: decorate the submessage and use its name as the type\n    if (typeof fieldType === \"function\")\n        fieldType = util.decorateType(fieldType).name;\n\n    // enum reference: create a reflected copy of the enum and keep reuseing it\n    else if (fieldType && typeof fieldType === \"object\")\n        fieldType = util.decorateEnum(fieldType).name;\n\n    return function fieldDecorator(prototype, fieldName) {\n        util.decorateType(prototype.constructor)\n            .add(new Field(fieldName, fieldId, fieldType, fieldRule, { \"default\": defaultValue }));\n    };\n};\n\n/**\n * Field decorator (TypeScript).\n * @name Field.d\n * @function\n * @param {number} fieldId Field id\n * @param {Constructor<T>|string} fieldType Field type\n * @param {\"optional\"|\"required\"|\"repeated\"} [fieldRule=\"optional\"] Field rule\n * @returns {FieldDecorator} Decorator function\n * @template T extends Message<T>\n * @variation 2\n */\n// like Field.d but without a default value\n\n// Sets up cyclic dependencies (called in index-light)\nField._configure = function configure(Type_) {\n    Type = Type_;\n};\n", "\"use strict\";\nmodule.exports = OneOf;\n\n// extends ReflectionObject\nvar ReflectionObject = require(\"./object\");\n((OneOf.prototype = Object.create(ReflectionObject.prototype)).constructor = OneOf).className = \"OneOf\";\n\nvar Field = require(\"./field\"),\n    util  = require(\"./util\");\n\n/**\n * Constructs a new oneof instance.\n * @classdesc Reflected oneof.\n * @extends ReflectionObject\n * @constructor\n * @param {string} name Oneof name\n * @param {string[]|Object.<string,*>} [fieldNames] Field names\n * @param {Object.<string,*>} [options] Declared options\n * @param {string} [comment] Comment associated with this field\n */\nfunction OneOf(name, fieldNames, options, comment) {\n    if (!Array.isArray(fieldNames)) {\n        options = fieldNames;\n        fieldNames = undefined;\n    }\n    ReflectionObject.call(this, name, options);\n\n    /* istanbul ignore if */\n    if (!(fieldNames === undefined || Array.isArray(fieldNames)))\n        throw TypeError(\"fieldNames must be an Array\");\n\n    /**\n     * Field names that belong to this oneof.\n     * @type {string[]}\n     */\n    this.oneof = fieldNames || []; // toJSON, marker\n\n    /**\n     * Fields that belong to this oneof as an array for iteration.\n     * @type {Field[]}\n     * @readonly\n     */\n    this.fieldsArray = []; // declared readonly for conformance, possibly not yet added to parent\n\n    /**\n     * Comment for this field.\n     * @type {string|null}\n     */\n    this.comment = comment;\n}\n\n/**\n * Oneof descriptor.\n * @interface IOneOf\n * @property {Array.<string>} oneof Oneof field names\n * @property {Object.<string,*>} [options] Oneof options\n */\n\n/**\n * Constructs a oneof from a oneof descriptor.\n * @param {string} name Oneof name\n * @param {IOneOf} json Oneof descriptor\n * @returns {OneOf} Created oneof\n * @throws {TypeError} If arguments are invalid\n */\nOneOf.fromJSON = function fromJSON(name, json) {\n    return new OneOf(name, json.oneof, json.options, json.comment);\n};\n\n/**\n * Converts this oneof to a oneof descriptor.\n * @param {IToJSONOptions} [toJSONOptions] JSON conversion options\n * @returns {IOneOf} Oneof descriptor\n */\nOneOf.prototype.toJSON = function toJSON(toJSONOptions) {\n    var keepComments = toJSONOptions ? Boolean(toJSONOptions.keepComments) : false;\n    return util.toObject([\n        \"options\" , this.options,\n        \"oneof\"   , this.oneof,\n        \"comment\" , keepComments ? this.comment : undefined\n    ]);\n};\n\n/**\n * Adds the fields of the specified oneof to the parent if not already done so.\n * @param {OneOf} oneof The oneof\n * @returns {undefined}\n * @inner\n * @ignore\n */\nfunction addFieldsToParent(oneof) {\n    if (oneof.parent)\n        for (var i = 0; i < oneof.fieldsArray.length; ++i)\n            if (!oneof.fieldsArray[i].parent)\n                oneof.parent.add(oneof.fieldsArray[i]);\n}\n\n/**\n * Adds a field to this oneof and removes it from its current parent, if any.\n * @param {Field} field Field to add\n * @returns {OneOf} `this`\n */\nOneOf.prototype.add = function add(field) {\n\n    /* istanbul ignore if */\n    if (!(field instanceof Field))\n        throw TypeError(\"field must be a Field\");\n\n    if (field.parent && field.parent !== this.parent)\n        field.parent.remove(field);\n    this.oneof.push(field.name);\n    this.fieldsArray.push(field);\n    field.partOf = this; // field.parent remains null\n    addFieldsToParent(this);\n    return this;\n};\n\n/**\n * Removes a field from this oneof and puts it back to the oneof's parent.\n * @param {Field} field Field to remove\n * @returns {OneOf} `this`\n */\nOneOf.prototype.remove = function remove(field) {\n\n    /* istanbul ignore if */\n    if (!(field instanceof Field))\n        throw TypeError(\"field must be a Field\");\n\n    var index = this.fieldsArray.indexOf(field);\n\n    /* istanbul ignore if */\n    if (index < 0)\n        throw Error(field + \" is not a member of \" + this);\n\n    this.fieldsArray.splice(index, 1);\n    index = this.oneof.indexOf(field.name);\n\n    /* istanbul ignore else */\n    if (index > -1) // theoretical\n        this.oneof.splice(index, 1);\n\n    field.partOf = null;\n    return this;\n};\n\n/**\n * @override\n */\nOneOf.prototype.onAdd = function onAdd(parent) {\n    ReflectionObject.prototype.onAdd.call(this, parent);\n    var self = this;\n    // Collect present fields\n    for (var i = 0; i < this.oneof.length; ++i) {\n        var field = parent.get(this.oneof[i]);\n        if (field && !field.partOf) {\n            field.partOf = self;\n            self.fieldsArray.push(field);\n        }\n    }\n    // Add not yet present fields\n    addFieldsToParent(this);\n};\n\n/**\n * @override\n */\nOneOf.prototype.onRemove = function onRemove(parent) {\n    for (var i = 0, field; i < this.fieldsArray.length; ++i)\n        if ((field = this.fieldsArray[i]).parent)\n            field.parent.remove(field);\n    ReflectionObject.prototype.onRemove.call(this, parent);\n};\n\n/**\n * Determines whether this field corresponds to a synthetic oneof created for\n * a proto3 optional field.  No behavioral logic should depend on this, but it\n * can be relevant for reflection.\n * @name OneOf#isProto3Optional\n * @type {boolean}\n * @readonly\n */\nObject.defineProperty(OneOf.prototype, \"isProto3Optional\", {\n    get: function() {\n        if (this.fieldsArray == null || this.fieldsArray.length !== 1) {\n            return false;\n        }\n\n        var field = this.fieldsArray[0];\n        return field.options != null && field.options[\"proto3_optional\"] === true;\n    }\n});\n\n/**\n * Decorator function as returned by {@link OneOf.d} (TypeScript).\n * @typedef OneOfDecorator\n * @type {function}\n * @param {Object} prototype Target prototype\n * @param {string} oneofName OneOf name\n * @returns {undefined}\n */\n\n/**\n * OneOf decorator (TypeScript).\n * @function\n * @param {...string} fieldNames Field names\n * @returns {OneOfDecorator} Decorator function\n * @template T extends string\n */\nOneOf.d = function decorateOneOf() {\n    var fieldNames = new Array(arguments.length),\n        index = 0;\n    while (index < arguments.length)\n        fieldNames[index] = arguments[index++];\n    return function oneOfDecorator(prototype, oneofName) {\n        util.decorateType(prototype.constructor)\n            .add(new OneOf(oneofName, fieldNames));\n        Object.defineProperty(prototype, oneofName, {\n            get: util.oneOfGetter(fieldNames),\n            set: util.oneOfSetter(fieldNames)\n        });\n    };\n};\n", "\"use strict\";\nmodule.exports = ReflectionObject;\n\nReflectionObject.className = \"ReflectionObject\";\n\nconst OneOf = require(\"./oneof\");\nvar util = require(\"./util\");\n\nvar Root; // cyclic\n\n/* eslint-disable no-warning-comments */\n// TODO: Replace with embedded proto.\nvar editions2023Defaults = {enum_type: \"OPEN\", field_presence: \"EXPLICIT\", json_format: \"ALLOW\", message_encoding: \"LENGTH_PREFIXED\", repeated_field_encoding: \"PACKED\", utf8_validation: \"VERIFY\"};\nvar proto2Defaults = {enum_type: \"CLOSED\", field_presence: \"EXPLICIT\", json_format: \"LEGACY_BEST_EFFORT\", message_encoding: \"LENGTH_PREFIXED\", repeated_field_encoding: \"EXPANDED\", utf8_validation: \"NONE\"};\nvar proto3Defaults = {enum_type: \"OPEN\", field_presence: \"IMPLICIT\", json_format: \"ALLOW\", message_encoding: \"LENGTH_PREFIXED\", repeated_field_encoding: \"PACKED\", utf8_validation: \"VERIFY\"};\n\n/**\n * Constructs a new reflection object instance.\n * @classdesc Base class of all reflection objects.\n * @constructor\n * @param {string} name Object name\n * @param {Object.<string,*>} [options] Declared options\n * @abstract\n */\nfunction ReflectionObject(name, options) {\n\n    if (!util.isString(name))\n        throw TypeError(\"name must be a string\");\n\n    if (options && !util.isObject(options))\n        throw TypeError(\"options must be an object\");\n\n    /**\n     * Options.\n     * @type {Object.<string,*>|undefined}\n     */\n    this.options = options; // toJSON\n\n    /**\n     * Parsed Options.\n     * @type {Array.<Object.<string,*>>|undefined}\n     */\n    this.parsedOptions = null;\n\n    /**\n     * Unique name within its namespace.\n     * @type {string}\n     */\n    this.name = name;\n\n    /**\n     * The edition specified for this object.  Only relevant for top-level objects.\n     * @type {string}\n     * @private\n     */\n    this._edition = null;\n\n    /**\n     * The default edition to use for this object if none is specified.  For legacy reasons,\n     * this is proto2 except in the JSON parsing case where it was proto3.\n     * @type {string}\n     * @private\n     */\n    this._defaultEdition = \"proto2\";\n\n    /**\n     * Resolved Features.\n     * @type {object}\n     * @private\n     */\n    this._features = {};\n\n    /**\n     * Whether or not features have been resolved.\n     * @type {boolean}\n     * @private\n     */\n    this._featuresResolved = false;\n\n    /**\n     * Parent namespace.\n     * @type {Namespace|null}\n     */\n    this.parent = null;\n\n    /**\n     * Whether already resolved or not.\n     * @type {boolean}\n     */\n    this.resolved = false;\n\n    /**\n     * Comment text, if any.\n     * @type {string|null}\n     */\n    this.comment = null;\n\n    /**\n     * Defining file name.\n     * @type {string|null}\n     */\n    this.filename = null;\n}\n\nObject.defineProperties(ReflectionObject.prototype, {\n\n    /**\n     * Reference to the root namespace.\n     * @name ReflectionObject#root\n     * @type {Root}\n     * @readonly\n     */\n    root: {\n        get: function() {\n            var ptr = this;\n            while (ptr.parent !== null)\n                ptr = ptr.parent;\n            return ptr;\n        }\n    },\n\n    /**\n     * Full name including leading dot.\n     * @name ReflectionObject#fullName\n     * @type {string}\n     * @readonly\n     */\n    fullName: {\n        get: function() {\n            var path = [ this.name ],\n                ptr = this.parent;\n            while (ptr) {\n                path.unshift(ptr.name);\n                ptr = ptr.parent;\n            }\n            return path.join(\".\");\n        }\n    }\n});\n\n/**\n * Converts this reflection object to its descriptor representation.\n * @returns {Object.<string,*>} Descriptor\n * @abstract\n */\nReflectionObject.prototype.toJSON = /* istanbul ignore next */ function toJSON() {\n    throw Error(); // not implemented, shouldn't happen\n};\n\n/**\n * Called when this object is added to a parent.\n * @param {ReflectionObject} parent Parent added to\n * @returns {undefined}\n */\nReflectionObject.prototype.onAdd = function onAdd(parent) {\n    if (this.parent && this.parent !== parent)\n        this.parent.remove(this);\n    this.parent = parent;\n    this.resolved = false;\n    var root = parent.root;\n    if (root instanceof Root)\n        root._handleAdd(this);\n};\n\n/**\n * Called when this object is removed from a parent.\n * @param {ReflectionObject} parent Parent removed from\n * @returns {undefined}\n */\nReflectionObject.prototype.onRemove = function onRemove(parent) {\n    var root = parent.root;\n    if (root instanceof Root)\n        root._handleRemove(this);\n    this.parent = null;\n    this.resolved = false;\n};\n\n/**\n * Resolves this objects type references.\n * @returns {ReflectionObject} `this`\n */\nReflectionObject.prototype.resolve = function resolve() {\n    if (this.resolved)\n        return this;\n    if (this.root instanceof Root)\n        this.resolved = true; // only if part of a root\n    return this;\n};\n\n/**\n * Resolves this objects editions features.\n * @param {string} edition The edition we're currently resolving for.\n * @returns {ReflectionObject} `this`\n */\nReflectionObject.prototype._resolveFeaturesRecursive = function _resolveFeaturesRecursive(edition) {\n    return this._resolveFeatures(this._edition || edition);\n};\n\n/**\n * Resolves child features from parent features\n * @param {string} edition The edition we're currently resolving for.\n * @returns {undefined}\n */\nReflectionObject.prototype._resolveFeatures = function _resolveFeatures(edition) {\n    if (this._featuresResolved) {\n        return;\n    }\n\n    var defaults = {};\n\n    /* istanbul ignore if */\n    if (!edition) {\n        throw new Error(\"Unknown edition for \" + this.fullName);\n    }\n\n    var protoFeatures = Object.assign(this.options ? Object.assign({},  this.options.features) : {},\n        this._inferLegacyProtoFeatures(edition));\n\n    if (this._edition) {\n        // For a namespace marked with a specific edition, reset defaults.\n        /* istanbul ignore else */\n        if (edition === \"proto2\") {\n            defaults = Object.assign({}, proto2Defaults);\n        } else if (edition === \"proto3\") {\n            defaults = Object.assign({}, proto3Defaults);\n        } else if (edition === \"2023\") {\n            defaults = Object.assign({}, editions2023Defaults);\n        } else {\n            throw new Error(\"Unknown edition: \" + edition);\n        }\n        this._features = Object.assign(defaults, protoFeatures || {});\n        this._featuresResolved = true;\n        return;\n    }\n\n    // fields in Oneofs aren't actually children of them, so we have to\n    // special-case it\n    /* istanbul ignore else */\n    if (this.partOf instanceof OneOf) {\n        var lexicalParentFeaturesCopy = Object.assign({}, this.partOf._features);\n        this._features = Object.assign(lexicalParentFeaturesCopy, protoFeatures || {});\n    } else if (this.declaringField) {\n        // Skip feature resolution of sister fields.\n    } else if (this.parent) {\n        var parentFeaturesCopy = Object.assign({}, this.parent._features);\n        this._features = Object.assign(parentFeaturesCopy, protoFeatures || {});\n    } else {\n        throw new Error(\"Unable to find a parent for \" + this.fullName);\n    }\n    if (this.extensionField) {\n        // Sister fields should have the same features as their extensions.\n        this.extensionField._features = this._features;\n    }\n    this._featuresResolved = true;\n};\n\n/**\n * Infers features from legacy syntax that may have been specified differently.\n * in older editions.\n * @param {string|undefined} edition The edition this proto is on, or undefined if pre-editions\n * @returns {object} The feature values to override\n */\nReflectionObject.prototype._inferLegacyProtoFeatures = function _inferLegacyProtoFeatures(/*edition*/) {\n    return {};\n};\n\n/**\n * Gets an option value.\n * @param {string} name Option name\n * @returns {*} Option value or `undefined` if not set\n */\nReflectionObject.prototype.getOption = function getOption(name) {\n    if (this.options)\n        return this.options[name];\n    return undefined;\n};\n\n/**\n * Sets an option.\n * @param {string} name Option name\n * @param {*} value Option value\n * @param {boolean|undefined} [ifNotSet] Sets the option only if it isn't currently set\n * @returns {ReflectionObject} `this`\n */\nReflectionObject.prototype.setOption = function setOption(name, value, ifNotSet) {\n    if (!this.options)\n        this.options = {};\n    if (/^features\\./.test(name)) {\n        util.setProperty(this.options, name, value, ifNotSet);\n    } else if (!ifNotSet || this.options[name] === undefined) {\n        if (this.getOption(name) !== value) this.resolved = false;\n        this.options[name] = value;\n    }\n\n    return this;\n};\n\n/**\n * Sets a parsed option.\n * @param {string} name parsed Option name\n * @param {*} value Option value\n * @param {string} propName dot '.' delimited full path of property within the option to set. if undefined\\empty, will add a new option with that value\n * @returns {ReflectionObject} `this`\n */\nReflectionObject.prototype.setParsedOption = function setParsedOption(name, value, propName) {\n    if (!this.parsedOptions) {\n        this.parsedOptions = [];\n    }\n    var parsedOptions = this.parsedOptions;\n    if (propName) {\n        // If setting a sub property of an option then try to merge it\n        // with an existing option\n        var opt = parsedOptions.find(function (opt) {\n            return Object.prototype.hasOwnProperty.call(opt, name);\n        });\n        if (opt) {\n            // If we found an existing option - just merge the property value\n            // (If it's a feature, will just write over)\n            var newValue = opt[name];\n            util.setProperty(newValue, propName, value);\n        } else {\n            // otherwise, create a new option, set its property and add it to the list\n            opt = {};\n            opt[name] = util.setProperty({}, propName, value);\n            parsedOptions.push(opt);\n        }\n    } else {\n        // Always create a new option when setting the value of the option itself\n        var newOpt = {};\n        newOpt[name] = value;\n        parsedOptions.push(newOpt);\n    }\n\n    return this;\n};\n\n/**\n * Sets multiple options.\n * @param {Object.<string,*>} options Options to set\n * @param {boolean} [ifNotSet] Sets an option only if it isn't currently set\n * @returns {ReflectionObject} `this`\n */\nReflectionObject.prototype.setOptions = function setOptions(options, ifNotSet) {\n    if (options)\n        for (var keys = Object.keys(options), i = 0; i < keys.length; ++i)\n            this.setOption(keys[i], options[keys[i]], ifNotSet);\n    return this;\n};\n\n/**\n * Converts this instance to its string representation.\n * @returns {string} Class name[, space, full name]\n */\nReflectionObject.prototype.toString = function toString() {\n    var className = this.constructor.className,\n        fullName  = this.fullName;\n    if (fullName.length)\n        return className + \" \" + fullName;\n    return className;\n};\n\n/**\n * Converts the edition this object is pinned to for JSON format.\n * @returns {string|undefined} The edition string for JSON representation\n */\nReflectionObject.prototype._editionToJSON = function _editionToJSON() {\n    if (!this._edition || this._edition === \"proto3\") {\n        // Avoid emitting proto3 since we need to default to it for backwards\n        // compatibility anyway.\n        return undefined;\n    }\n    return this._edition;\n};\n\n// Sets up cyclic dependencies (called in index-light)\nReflectionObject._configure = function(Root_) {\n    Root = Root_;\n};\n", "\"use strict\";\nmodule.exports = Enum;\n\n// extends ReflectionObject\nvar ReflectionObject = require(\"./object\");\n((Enum.prototype = Object.create(ReflectionObject.prototype)).constructor = Enum).className = \"Enum\";\n\nvar Namespace = require(\"./namespace\"),\n    util = require(\"./util\");\n\n/**\n * Constructs a new enum instance.\n * @classdesc Reflected enum.\n * @extends ReflectionObject\n * @constructor\n * @param {string} name Unique name within its namespace\n * @param {Object.<string,number>} [values] Enum values as an object, by name\n * @param {Object.<string,*>} [options] Declared options\n * @param {string} [comment] The comment for this enum\n * @param {Object.<string,string>} [comments] The value comments for this enum\n * @param {Object.<string,Object<string,*>>|undefined} [valuesOptions] The value options for this enum\n */\nfunction Enum(name, values, options, comment, comments, valuesOptions) {\n    ReflectionObject.call(this, name, options);\n\n    if (values && typeof values !== \"object\")\n        throw TypeError(\"values must be an object\");\n\n    /**\n     * Enum values by id.\n     * @type {Object.<number,string>}\n     */\n    this.valuesById = {};\n\n    /**\n     * Enum values by name.\n     * @type {Object.<string,number>}\n     */\n    this.values = Object.create(this.valuesById); // toJSON, marker\n\n    /**\n     * Enum comment text.\n     * @type {string|null}\n     */\n    this.comment = comment;\n\n    /**\n     * Value comment texts, if any.\n     * @type {Object.<string,string>}\n     */\n    this.comments = comments || {};\n\n    /**\n     * Values options, if any\n     * @type {Object<string, Object<string, *>>|undefined}\n     */\n    this.valuesOptions = valuesOptions;\n\n    /**\n     * Resolved values features, if any\n     * @type {Object<string, Object<string, *>>|undefined}\n     */\n    this._valuesFeatures = {};\n\n    /**\n     * Reserved ranges, if any.\n     * @type {Array.<number[]|string>}\n     */\n    this.reserved = undefined; // toJSON\n\n    // Note that values inherit valuesById on their prototype which makes them a TypeScript-\n    // compatible enum. This is used by pbts to write actual enum definitions that work for\n    // static and reflection code alike instead of emitting generic object definitions.\n\n    if (values)\n        for (var keys = Object.keys(values), i = 0; i < keys.length; ++i)\n            if (typeof values[keys[i]] === \"number\") // use forward entries only\n                this.valuesById[ this.values[keys[i]] = values[keys[i]] ] = keys[i];\n}\n\n/**\n * @override\n */\nEnum.prototype._resolveFeatures = function _resolveFeatures(edition) {\n    edition = this._edition || edition;\n    ReflectionObject.prototype._resolveFeatures.call(this, edition);\n\n    Object.keys(this.values).forEach(key => {\n        var parentFeaturesCopy = Object.assign({}, this._features);\n        this._valuesFeatures[key] = Object.assign(parentFeaturesCopy, this.valuesOptions && this.valuesOptions[key] && this.valuesOptions[key].features);\n    });\n\n    return this;\n};\n\n/**\n * Enum descriptor.\n * @interface IEnum\n * @property {Object.<string,number>} values Enum values\n * @property {Object.<string,*>} [options] Enum options\n */\n\n/**\n * Constructs an enum from an enum descriptor.\n * @param {string} name Enum name\n * @param {IEnum} json Enum descriptor\n * @returns {Enum} Created enum\n * @throws {TypeError} If arguments are invalid\n */\nEnum.fromJSON = function fromJSON(name, json) {\n    var enm = new Enum(name, json.values, json.options, json.comment, json.comments);\n    enm.reserved = json.reserved;\n    if (json.edition)\n        enm._edition = json.edition;\n    enm._defaultEdition = \"proto3\";  // For backwards-compatibility.\n    return enm;\n};\n\n/**\n * Converts this enum to an enum descriptor.\n * @param {IToJSONOptions} [toJSONOptions] JSON conversion options\n * @returns {IEnum} Enum descriptor\n */\nEnum.prototype.toJSON = function toJSON(toJSONOptions) {\n    var keepComments = toJSONOptions ? Boolean(toJSONOptions.keepComments) : false;\n    return util.toObject([\n        \"edition\"       , this._editionToJSON(),\n        \"options\"       , this.options,\n        \"valuesOptions\" , this.valuesOptions,\n        \"values\"        , this.values,\n        \"reserved\"      , this.reserved && this.reserved.length ? this.reserved : undefined,\n        \"comment\"       , keepComments ? this.comment : undefined,\n        \"comments\"      , keepComments ? this.comments : undefined\n    ]);\n};\n\n/**\n * Adds a value to this enum.\n * @param {string} name Value name\n * @param {number} id Value id\n * @param {string} [comment] Comment, if any\n * @param {Object.<string, *>|undefined} [options] Options, if any\n * @returns {Enum} `this`\n * @throws {TypeError} If arguments are invalid\n * @throws {Error} If there is already a value with this name or id\n */\nEnum.prototype.add = function add(name, id, comment, options) {\n    // utilized by the parser but not by .fromJSON\n\n    if (!util.isString(name))\n        throw TypeError(\"name must be a string\");\n\n    if (!util.isInteger(id))\n        throw TypeError(\"id must be an integer\");\n\n    if (this.values[name] !== undefined)\n        throw Error(\"duplicate name '\" + name + \"' in \" + this);\n\n    if (this.isReservedId(id))\n        throw Error(\"id \" + id + \" is reserved in \" + this);\n\n    if (this.isReservedName(name))\n        throw Error(\"name '\" + name + \"' is reserved in \" + this);\n\n    if (this.valuesById[id] !== undefined) {\n        if (!(this.options && this.options.allow_alias))\n            throw Error(\"duplicate id \" + id + \" in \" + this);\n        this.values[name] = id;\n    } else\n        this.valuesById[this.values[name] = id] = name;\n\n    if (options) {\n        if (this.valuesOptions === undefined)\n            this.valuesOptions = {};\n        this.valuesOptions[name] = options || null;\n    }\n\n    this.comments[name] = comment || null;\n    return this;\n};\n\n/**\n * Removes a value from this enum\n * @param {string} name Value name\n * @returns {Enum} `this`\n * @throws {TypeError} If arguments are invalid\n * @throws {Error} If `name` is not a name of this enum\n */\nEnum.prototype.remove = function remove(name) {\n\n    if (!util.isString(name))\n        throw TypeError(\"name must be a string\");\n\n    var val = this.values[name];\n    if (val == null)\n        throw Error(\"name '\" + name + \"' does not exist in \" + this);\n\n    delete this.valuesById[val];\n    delete this.values[name];\n    delete this.comments[name];\n    if (this.valuesOptions)\n        delete this.valuesOptions[name];\n\n    return this;\n};\n\n/**\n * Tests if the specified id is reserved.\n * @param {number} id Id to test\n * @returns {boolean} `true` if reserved, otherwise `false`\n */\nEnum.prototype.isReservedId = function isReservedId(id) {\n    return Namespace.isReservedId(this.reserved, id);\n};\n\n/**\n * Tests if the specified name is reserved.\n * @param {string} name Name to test\n * @returns {boolean} `true` if reserved, otherwise `false`\n */\nEnum.prototype.isReservedName = function isReservedName(name) {\n    return Namespace.isReservedName(this.reserved, name);\n};\n", "\"use strict\";\nmodule.exports = encoder;\n\nvar Enum     = require(\"./enum\"),\n    types    = require(\"./types\"),\n    util     = require(\"./util\");\n\n/**\n * Generates a partial message type encoder.\n * @param {Codegen} gen Codegen instance\n * @param {Field} field Reflected field\n * @param {number} fieldIndex Field index\n * @param {string} ref Variable reference\n * @returns {Codegen} Codegen instance\n * @ignore\n */\nfunction genTypePartial(gen, field, fieldIndex, ref) {\n    return field.delimited\n        ? gen(\"types[%i].encode(%s,w.uint32(%i)).uint32(%i)\", fieldIndex, ref, (field.id << 3 | 3) >>> 0, (field.id << 3 | 4) >>> 0)\n        : gen(\"types[%i].encode(%s,w.uint32(%i).fork()).ldelim()\", fieldIndex, ref, (field.id << 3 | 2) >>> 0);\n}\n\n/**\n * Generates an encoder specific to the specified message type.\n * @param {Type} mtype Message type\n * @returns {Codegen} Codegen instance\n */\nfunction encoder(mtype) {\n    /* eslint-disable no-unexpected-multiline, block-scoped-var, no-redeclare */\n    var gen = util.codegen([\"m\", \"w\"], mtype.name + \"$encode\")\n    (\"if(!w)\")\n        (\"w=Writer.create()\");\n\n    var i, ref;\n\n    // \"when a message is serialized its known fields should be written sequentially by field number\"\n    var fields = /* initializes */ mtype.fieldsArray.slice().sort(util.compareFieldsById);\n\n    for (var i = 0; i < fields.length; ++i) {\n        var field    = fields[i].resolve(),\n            index    = mtype._fieldsArray.indexOf(field),\n            type     = field.resolvedType instanceof Enum ? \"int32\" : field.type,\n            wireType = types.basic[type];\n            ref      = \"m\" + util.safeProp(field.name);\n\n        // Map fields\n        if (field.map) {\n            gen\n    (\"if(%s!=null&&Object.hasOwnProperty.call(m,%j)){\", ref, field.name) // !== undefined && !== null\n        (\"for(var ks=Object.keys(%s),i=0;i<ks.length;++i){\", ref)\n            (\"w.uint32(%i).fork().uint32(%i).%s(ks[i])\", (field.id << 3 | 2) >>> 0, 8 | types.mapKey[field.keyType], field.keyType);\n            if (wireType === undefined) gen\n            (\"types[%i].encode(%s[ks[i]],w.uint32(18).fork()).ldelim().ldelim()\", index, ref); // can't be groups\n            else gen\n            (\".uint32(%i).%s(%s[ks[i]]).ldelim()\", 16 | wireType, type, ref);\n            gen\n        (\"}\")\n    (\"}\");\n\n            // Repeated fields\n        } else if (field.repeated) { gen\n    (\"if(%s!=null&&%s.length){\", ref, ref); // !== undefined && !== null\n\n            // Packed repeated\n            if (field.packed && types.packed[type] !== undefined) { gen\n\n        (\"w.uint32(%i).fork()\", (field.id << 3 | 2) >>> 0)\n        (\"for(var i=0;i<%s.length;++i)\", ref)\n            (\"w.%s(%s[i])\", type, ref)\n        (\"w.ldelim()\");\n\n            // Non-packed\n            } else { gen\n\n        (\"for(var i=0;i<%s.length;++i)\", ref);\n                if (wireType === undefined)\n            genTypePartial(gen, field, index, ref + \"[i]\");\n                else gen\n            (\"w.uint32(%i).%s(%s[i])\", (field.id << 3 | wireType) >>> 0, type, ref);\n\n            } gen\n    (\"}\");\n\n        // Non-repeated\n        } else {\n            if (field.optional) gen\n    (\"if(%s!=null&&Object.hasOwnProperty.call(m,%j))\", ref, field.name); // !== undefined && !== null\n\n            if (wireType === undefined)\n        genTypePartial(gen, field, index, ref);\n            else gen\n        (\"w.uint32(%i).%s(%s)\", (field.id << 3 | wireType) >>> 0, type, ref);\n\n        }\n    }\n\n    return gen\n    (\"return w\");\n    /* eslint-enable no-unexpected-multiline, block-scoped-var, no-redeclare */\n}\n", "\"use strict\";\nvar protobuf = module.exports = require(\"./index-minimal\");\n\nprotobuf.build = \"light\";\n\n/**\n * A node-style callback as used by {@link load} and {@link Root#load}.\n * @typedef LoadCallback\n * @type {function}\n * @param {Error|null} error Error, if any, otherwise `null`\n * @param {Root} [root] Root, if there hasn't been an error\n * @returns {undefined}\n */\n\n/**\n * Loads one or multiple .proto or preprocessed .json files into a common root namespace and calls the callback.\n * @param {string|string[]} filename One or multiple files to load\n * @param {Root} root Root namespace, defaults to create a new one if omitted.\n * @param {LoadCallback} callback Callback function\n * @returns {undefined}\n * @see {@link Root#load}\n */\nfunction load(filename, root, callback) {\n    if (typeof root === \"function\") {\n        callback = root;\n        root = new protobuf.Root();\n    } else if (!root)\n        root = new protobuf.Root();\n    return root.load(filename, callback);\n}\n\n/**\n * Loads one or multiple .proto or preprocessed .json files into a common root namespace and calls the callback.\n * @name load\n * @function\n * @param {string|string[]} filename One or multiple files to load\n * @param {LoadCallback} callback Callback function\n * @returns {undefined}\n * @see {@link Root#load}\n * @variation 2\n */\n// function load(filename:string, callback:LoadCallback):undefined\n\n/**\n * Loads one or multiple .proto or preprocessed .json files into a common root namespace and returns a promise.\n * @name load\n * @function\n * @param {string|string[]} filename One or multiple files to load\n * @param {Root} [root] Root namespace, defaults to create a new one if omitted.\n * @returns {Promise<Root>} Promise\n * @see {@link Root#load}\n * @variation 3\n */\n// function load(filename:string, [root:Root]):Promise<Root>\n\nprotobuf.load = load;\n\n/**\n * Synchronously loads one or multiple .proto or preprocessed .json files into a common root namespace (node only).\n * @param {string|string[]} filename One or multiple files to load\n * @param {Root} [root] Root namespace, defaults to create a new one if omitted.\n * @returns {Root} Root namespace\n * @throws {Error} If synchronous fetching is not supported (i.e. in browsers) or if a file's syntax is invalid\n * @see {@link Root#loadSync}\n */\nfunction loadSync(filename, root) {\n    if (!root)\n        root = new protobuf.Root();\n    return root.loadSync(filename);\n}\n\nprotobuf.loadSync = loadSync;\n\n// Serialization\nprotobuf.encoder          = require(\"./encoder\");\nprotobuf.decoder          = require(\"./decoder\");\nprotobuf.verifier         = require(\"./verifier\");\nprotobuf.converter        = require(\"./converter\");\n\n// Reflection\nprotobuf.ReflectionObject = require(\"./object\");\nprotobuf.Namespace        = require(\"./namespace\");\nprotobuf.Root             = require(\"./root\");\nprotobuf.Enum             = require(\"./enum\");\nprotobuf.Type             = require(\"./type\");\nprotobuf.Field            = require(\"./field\");\nprotobuf.OneOf            = require(\"./oneof\");\nprotobuf.MapField         = require(\"./mapfield\");\nprotobuf.Service          = require(\"./service\");\nprotobuf.Method           = require(\"./method\");\n\n// Runtime\nprotobuf.Message          = require(\"./message\");\nprotobuf.wrappers         = require(\"./wrappers\");\n\n// Utility\nprotobuf.types            = require(\"./types\");\nprotobuf.util             = require(\"./util\");\n\n// Set up possibly cyclic reflection dependencies\nprotobuf.ReflectionObject._configure(protobuf.Root);\nprotobuf.Namespace._configure(protobuf.Type, protobuf.Service, protobuf.Enum);\nprotobuf.Root._configure(protobuf.Type);\nprotobuf.Field._configure(protobuf.Type);\n", "\"use strict\";\nmodule.exports = tokenize;\n\nvar delimRe        = /[\\s{}=;:[\\],'\"()<>]/g,\n    stringDoubleRe = /(?:\"([^\"\\\\]*(?:\\\\.[^\"\\\\]*)*)\")/g,\n    stringSingleRe = /(?:'([^'\\\\]*(?:\\\\.[^'\\\\]*)*)')/g;\n\nvar setCommentRe = /^ *[*/]+ */,\n    setCommentAltRe = /^\\s*\\*?\\/*/,\n    setCommentSplitRe = /\\n/g,\n    whitespaceRe = /\\s/,\n    unescapeRe = /\\\\(.?)/g;\n\nvar unescapeMap = {\n    \"0\": \"\\0\",\n    \"r\": \"\\r\",\n    \"n\": \"\\n\",\n    \"t\": \"\\t\"\n};\n\n/**\n * Unescapes a string.\n * @param {string} str String to unescape\n * @returns {string} Unescaped string\n * @property {Object.<string,string>} map Special characters map\n * @memberof tokenize\n */\nfunction unescape(str) {\n    return str.replace(unescapeRe, function($0, $1) {\n        switch ($1) {\n            case \"\\\\\":\n            case \"\":\n                return $1;\n            default:\n                return unescapeMap[$1] || \"\";\n        }\n    });\n}\n\ntokenize.unescape = unescape;\n\n/**\n * Gets the next token and advances.\n * @typedef TokenizerHandleNext\n * @type {function}\n * @returns {string|null} Next token or `null` on eof\n */\n\n/**\n * Peeks for the next token.\n * @typedef TokenizerHandlePeek\n * @type {function}\n * @returns {string|null} Next token or `null` on eof\n */\n\n/**\n * Pushes a token back to the stack.\n * @typedef TokenizerHandlePush\n * @type {function}\n * @param {string} token Token\n * @returns {undefined}\n */\n\n/**\n * Skips the next token.\n * @typedef TokenizerHandleSkip\n * @type {function}\n * @param {string} expected Expected token\n * @param {boolean} [optional=false] If optional\n * @returns {boolean} Whether the token matched\n * @throws {Error} If the token didn't match and is not optional\n */\n\n/**\n * Gets the comment on the previous line or, alternatively, the line comment on the specified line.\n * @typedef TokenizerHandleCmnt\n * @type {function}\n * @param {number} [line] Line number\n * @returns {string|null} Comment text or `null` if none\n */\n\n/**\n * Handle object returned from {@link tokenize}.\n * @interface ITokenizerHandle\n * @property {TokenizerHandleNext} next Gets the next token and advances (`null` on eof)\n * @property {TokenizerHandlePeek} peek Peeks for the next token (`null` on eof)\n * @property {TokenizerHandlePush} push Pushes a token back to the stack\n * @property {TokenizerHandleSkip} skip Skips a token, returns its presence and advances or, if non-optional and not present, throws\n * @property {TokenizerHandleCmnt} cmnt Gets the comment on the previous line or the line comment on the specified line, if any\n * @property {number} line Current line number\n */\n\n/**\n * Tokenizes the given .proto source and returns an object with useful utility functions.\n * @param {string} source Source contents\n * @param {boolean} alternateCommentMode Whether we should activate alternate comment parsing mode.\n * @returns {ITokenizerHandle} Tokenizer handle\n */\nfunction tokenize(source, alternateCommentMode) {\n    /* eslint-disable callback-return */\n    source = source.toString();\n\n    var offset = 0,\n        length = source.length,\n        line = 1,\n        lastCommentLine = 0,\n        comments = {};\n\n    var stack = [];\n\n    var stringDelim = null;\n\n    /* istanbul ignore next */\n    /**\n     * Creates an error for illegal syntax.\n     * @param {string} subject Subject\n     * @returns {Error} Error created\n     * @inner\n     */\n    function illegal(subject) {\n        return Error(\"illegal \" + subject + \" (line \" + line + \")\");\n    }\n\n    /**\n     * Reads a string till its end.\n     * @returns {string} String read\n     * @inner\n     */\n    function readString() {\n        var re = stringDelim === \"'\" ? stringSingleRe : stringDoubleRe;\n        re.lastIndex = offset - 1;\n        var match = re.exec(source);\n        if (!match)\n            throw illegal(\"string\");\n        offset = re.lastIndex;\n        push(stringDelim);\n        stringDelim = null;\n        return unescape(match[1]);\n    }\n\n    /**\n     * Gets the character at `pos` within the source.\n     * @param {number} pos Position\n     * @returns {string} Character\n     * @inner\n     */\n    function charAt(pos) {\n        return source.charAt(pos);\n    }\n\n    /**\n     * Sets the current comment text.\n     * @param {number} start Start offset\n     * @param {number} end End offset\n     * @param {boolean} isLeading set if a leading comment\n     * @returns {undefined}\n     * @inner\n     */\n    function setComment(start, end, isLeading) {\n        var comment = {\n            type: source.charAt(start++),\n            lineEmpty: false,\n            leading: isLeading,\n        };\n        var lookback;\n        if (alternateCommentMode) {\n            lookback = 2;  // alternate comment parsing: \"//\" or \"/*\"\n        } else {\n            lookback = 3;  // \"///\" or \"/**\"\n        }\n        var commentOffset = start - lookback,\n            c;\n        do {\n            if (--commentOffset < 0 ||\n                    (c = source.charAt(commentOffset)) === \"\\n\") {\n                comment.lineEmpty = true;\n                break;\n            }\n        } while (c === \" \" || c === \"\\t\");\n        var lines = source\n            .substring(start, end)\n            .split(setCommentSplitRe);\n        for (var i = 0; i < lines.length; ++i)\n            lines[i] = lines[i]\n                .replace(alternateCommentMode ? setCommentAltRe : setCommentRe, \"\")\n                .trim();\n        comment.text = lines\n            .join(\"\\n\")\n            .trim();\n\n        comments[line] = comment;\n        lastCommentLine = line;\n    }\n\n    function isDoubleSlashCommentLine(startOffset) {\n        var endOffset = findEndOfLine(startOffset);\n\n        // see if remaining line matches comment pattern\n        var lineText = source.substring(startOffset, endOffset);\n        var isComment = /^\\s*\\/\\//.test(lineText);\n        return isComment;\n    }\n\n    function findEndOfLine(cursor) {\n        // find end of cursor's line\n        var endOffset = cursor;\n        while (endOffset < length && charAt(endOffset) !== \"\\n\") {\n            endOffset++;\n        }\n        return endOffset;\n    }\n\n    /**\n     * Obtains the next token.\n     * @returns {string|null} Next token or `null` on eof\n     * @inner\n     */\n    function next() {\n        if (stack.length > 0)\n            return stack.shift();\n        if (stringDelim)\n            return readString();\n        var repeat,\n            prev,\n            curr,\n            start,\n            isDoc,\n            isLeadingComment = offset === 0;\n        do {\n            if (offset === length)\n                return null;\n            repeat = false;\n            while (whitespaceRe.test(curr = charAt(offset))) {\n                if (curr === \"\\n\") {\n                    isLeadingComment = true;\n                    ++line;\n                }\n                if (++offset === length)\n                    return null;\n            }\n\n            if (charAt(offset) === \"/\") {\n                if (++offset === length) {\n                    throw illegal(\"comment\");\n                }\n                if (charAt(offset) === \"/\") { // Line\n                    if (!alternateCommentMode) {\n                        // check for triple-slash comment\n                        isDoc = charAt(start = offset + 1) === \"/\";\n\n                        while (charAt(++offset) !== \"\\n\") {\n                            if (offset === length) {\n                                return null;\n                            }\n                        }\n                        ++offset;\n                        if (isDoc) {\n                            setComment(start, offset - 1, isLeadingComment);\n                            // Trailing comment cannot not be multi-line,\n                            // so leading comment state should be reset to handle potential next comments\n                            isLeadingComment = true;\n                        }\n                        ++line;\n                        repeat = true;\n                    } else {\n                        // check for double-slash comments, consolidating consecutive lines\n                        start = offset;\n                        isDoc = false;\n                        if (isDoubleSlashCommentLine(offset - 1)) {\n                            isDoc = true;\n                            do {\n                                offset = findEndOfLine(offset);\n                                if (offset === length) {\n                                    break;\n                                }\n                                offset++;\n                                if (!isLeadingComment) {\n                                    // Trailing comment cannot not be multi-line\n                                    break;\n                                }\n                            } while (isDoubleSlashCommentLine(offset));\n                        } else {\n                            offset = Math.min(length, findEndOfLine(offset) + 1);\n                        }\n                        if (isDoc) {\n                            setComment(start, offset, isLeadingComment);\n                            isLeadingComment = true;\n                        }\n                        line++;\n                        repeat = true;\n                    }\n                } else if ((curr = charAt(offset)) === \"*\") { /* Block */\n                    // check for /** (regular comment mode) or /* (alternate comment mode)\n                    start = offset + 1;\n                    isDoc = alternateCommentMode || charAt(start) === \"*\";\n                    do {\n                        if (curr === \"\\n\") {\n                            ++line;\n                        }\n                        if (++offset === length) {\n                            throw illegal(\"comment\");\n                        }\n                        prev = curr;\n                        curr = charAt(offset);\n                    } while (prev !== \"*\" || curr !== \"/\");\n                    ++offset;\n                    if (isDoc) {\n                        setComment(start, offset - 2, isLeadingComment);\n                        isLeadingComment = true;\n                    }\n                    repeat = true;\n                } else {\n                    return \"/\";\n                }\n            }\n        } while (repeat);\n\n        // offset !== length if we got here\n\n        var end = offset;\n        delimRe.lastIndex = 0;\n        var delim = delimRe.test(charAt(end++));\n        if (!delim)\n            while (end < length && !delimRe.test(charAt(end)))\n                ++end;\n        var token = source.substring(offset, offset = end);\n        if (token === \"\\\"\" || token === \"'\")\n            stringDelim = token;\n        return token;\n    }\n\n    /**\n     * Pushes a token back to the stack.\n     * @param {string} token Token\n     * @returns {undefined}\n     * @inner\n     */\n    function push(token) {\n        stack.push(token);\n    }\n\n    /**\n     * Peeks for the next token.\n     * @returns {string|null} Token or `null` on eof\n     * @inner\n     */\n    function peek() {\n        if (!stack.length) {\n            var token = next();\n            if (token === null)\n                return null;\n            push(token);\n        }\n        return stack[0];\n    }\n\n    /**\n     * Skips a token.\n     * @param {string} expected Expected token\n     * @param {boolean} [optional=false] Whether the token is optional\n     * @returns {boolean} `true` when skipped, `false` if not\n     * @throws {Error} When a required token is not present\n     * @inner\n     */\n    function skip(expected, optional) {\n        var actual = peek(),\n            equals = actual === expected;\n        if (equals) {\n            next();\n            return true;\n        }\n        if (!optional)\n            throw illegal(\"token '\" + actual + \"', '\" + expected + \"' expected\");\n        return false;\n    }\n\n    /**\n     * Gets a comment.\n     * @param {number} [trailingLine] Line number if looking for a trailing comment\n     * @returns {string|null} Comment text\n     * @inner\n     */\n    function cmnt(trailingLine) {\n        var ret = null;\n        var comment;\n        if (trailingLine === undefined) {\n            comment = comments[line - 1];\n            delete comments[line - 1];\n            if (comment && (alternateCommentMode || comment.type === \"*\" || comment.lineEmpty)) {\n                ret = comment.leading ? comment.text : null;\n            }\n        } else {\n            /* istanbul ignore else */\n            if (lastCommentLine < trailingLine) {\n                peek();\n            }\n            comment = comments[trailingLine];\n            delete comments[trailingLine];\n            if (comment && !comment.lineEmpty && (alternateCommentMode || comment.type === \"/\")) {\n                ret = comment.leading ? null : comment.text;\n            }\n        }\n        return ret;\n    }\n\n    return Object.defineProperty({\n        next: next,\n        peek: peek,\n        push: push,\n        skip: skip,\n        cmnt: cmnt\n    }, \"line\", {\n        get: function() { return line; }\n    });\n    /* eslint-enable callback-return */\n}\n", "\"use strict\";\nmodule.exports = parse;\n\nparse.filename = null;\nparse.defaults = { keepCase: false };\n\nvar tokenize  = require(\"./tokenize\"),\n    Root      = require(\"./root\"),\n    Type      = require(\"./type\"),\n    Field     = require(\"./field\"),\n    MapField  = require(\"./mapfield\"),\n    OneOf     = require(\"./oneof\"),\n    Enum      = require(\"./enum\"),\n    Service   = require(\"./service\"),\n    Method    = require(\"./method\"),\n    ReflectionObject = require(\"./object\"),\n    types     = require(\"./types\"),\n    util      = require(\"./util\");\n\nvar base10Re    = /^[1-9][0-9]*$/,\n    base10NegRe = /^-?[1-9][0-9]*$/,\n    base16Re    = /^0[x][0-9a-fA-F]+$/,\n    base16NegRe = /^-?0[x][0-9a-fA-F]+$/,\n    base8Re     = /^0[0-7]+$/,\n    base8NegRe  = /^-?0[0-7]+$/,\n    numberRe    = /^(?![eE])[0-9]*(?:\\.[0-9]*)?(?:[eE][+-]?[0-9]+)?$/,\n    nameRe      = /^[a-zA-Z_][a-zA-Z_0-9]*$/,\n    typeRefRe   = /^(?:\\.?[a-zA-Z_][a-zA-Z_0-9]*)(?:\\.[a-zA-Z_][a-zA-Z_0-9]*)*$/;\n\n/**\n * Result object returned from {@link parse}.\n * @interface IParserResult\n * @property {string|undefined} package Package name, if declared\n * @property {string[]|undefined} imports Imports, if any\n * @property {string[]|undefined} weakImports Weak imports, if any\n * @property {Root} root Populated root instance\n */\n\n/**\n * Options modifying the behavior of {@link parse}.\n * @interface IParseOptions\n * @property {boolean} [keepCase=false] Keeps field casing instead of converting to camel case\n * @property {boolean} [alternateCommentMode=false] Recognize double-slash comments in addition to doc-block comments.\n * @property {boolean} [preferTrailingComment=false] Use trailing comment when both leading comment and trailing comment exist.\n */\n\n/**\n * Options modifying the behavior of JSON serialization.\n * @interface IToJSONOptions\n * @property {boolean} [keepComments=false] Serializes comments.\n */\n\n/**\n * Parses the given .proto source and returns an object with the parsed contents.\n * @param {string} source Source contents\n * @param {Root} root Root to populate\n * @param {IParseOptions} [options] Parse options. Defaults to {@link parse.defaults} when omitted.\n * @returns {IParserResult} Parser result\n * @property {string} filename=null Currently processing file name for error reporting, if known\n * @property {IParseOptions} defaults Default {@link IParseOptions}\n */\nfunction parse(source, root, options) {\n    /* eslint-disable callback-return */\n    if (!(root instanceof Root)) {\n        options = root;\n        root = new Root();\n    }\n    if (!options)\n        options = parse.defaults;\n\n    var preferTrailingComment = options.preferTrailingComment || false;\n    var tn = tokenize(source, options.alternateCommentMode || false),\n        next = tn.next,\n        push = tn.push,\n        peek = tn.peek,\n        skip = tn.skip,\n        cmnt = tn.cmnt;\n\n    var head = true,\n        pkg,\n        imports,\n        weakImports,\n        edition = \"proto2\";\n\n    var ptr = root;\n\n    var topLevelObjects = [];\n    var topLevelOptions = {};\n\n    var applyCase = options.keepCase ? function(name) { return name; } : util.camelCase;\n\n    function resolveFileFeatures() {\n        topLevelObjects.forEach(obj => {\n            obj._edition = edition;\n            Object.keys(topLevelOptions).forEach(opt => {\n                if (obj.getOption(opt) !== undefined) return;\n                obj.setOption(opt, topLevelOptions[opt], true);\n            });\n        });\n    }\n\n    /* istanbul ignore next */\n    function illegal(token, name, insideTryCatch) {\n        var filename = parse.filename;\n        if (!insideTryCatch)\n            parse.filename = null;\n        return Error(\"illegal \" + (name || \"token\") + \" '\" + token + \"' (\" + (filename ? filename + \", \" : \"\") + \"line \" + tn.line + \")\");\n    }\n\n    function readString() {\n        var values = [],\n            token;\n        do {\n            /* istanbul ignore if */\n            if ((token = next()) !== \"\\\"\" && token !== \"'\")\n                throw illegal(token);\n\n            values.push(next());\n            skip(token);\n            token = peek();\n        } while (token === \"\\\"\" || token === \"'\");\n        return values.join(\"\");\n    }\n\n    function readValue(acceptTypeRef) {\n        var token = next();\n        switch (token) {\n            case \"'\":\n            case \"\\\"\":\n                push(token);\n                return readString();\n            case \"true\": case \"TRUE\":\n                return true;\n            case \"false\": case \"FALSE\":\n                return false;\n        }\n        try {\n            return parseNumber(token, /* insideTryCatch */ true);\n        } catch (e) {\n            /* istanbul ignore else */\n            if (acceptTypeRef && typeRefRe.test(token))\n                return token;\n\n            /* istanbul ignore next */\n            throw illegal(token, \"value\");\n        }\n    }\n\n    function readRanges(target, acceptStrings) {\n        var token, start;\n        do {\n            if (acceptStrings && ((token = peek()) === \"\\\"\" || token === \"'\")) {\n                var str = readString();\n                target.push(str);\n                if (edition >= 2023) {\n                    throw illegal(str, \"id\");\n                }\n            } else {\n                try {\n                    target.push([ start = parseId(next()), skip(\"to\", true) ? parseId(next()) : start ]);\n                } catch (err) {\n                    if (acceptStrings && typeRefRe.test(token) && edition >= 2023) {\n                        target.push(token);\n                    } else {\n                        throw err;\n                    }\n                }\n            }\n        } while (skip(\",\", true));\n        var dummy = {options: undefined};\n        dummy.setOption = function(name, value) {\n          if (this.options === undefined) this.options = {};\n          this.options[name] = value;\n        };\n        ifBlock(\n            dummy,\n            function parseRange_block(token) {\n              /* istanbul ignore else */\n              if (token === \"option\") {\n                parseOption(dummy, token);  // skip\n                skip(\";\");\n              } else\n                throw illegal(token);\n            },\n            function parseRange_line() {\n              parseInlineOptions(dummy);  // skip\n            });\n    }\n\n    function parseNumber(token, insideTryCatch) {\n        var sign = 1;\n        if (token.charAt(0) === \"-\") {\n            sign = -1;\n            token = token.substring(1);\n        }\n        switch (token) {\n            case \"inf\": case \"INF\": case \"Inf\":\n                return sign * Infinity;\n            case \"nan\": case \"NAN\": case \"Nan\": case \"NaN\":\n                return NaN;\n            case \"0\":\n                return 0;\n        }\n        if (base10Re.test(token))\n            return sign * parseInt(token, 10);\n        if (base16Re.test(token))\n            return sign * parseInt(token, 16);\n        if (base8Re.test(token))\n            return sign * parseInt(token, 8);\n\n        /* istanbul ignore else */\n        if (numberRe.test(token))\n            return sign * parseFloat(token);\n\n        /* istanbul ignore next */\n        throw illegal(token, \"number\", insideTryCatch);\n    }\n\n    function parseId(token, acceptNegative) {\n        switch (token) {\n            case \"max\": case \"MAX\": case \"Max\":\n                return 536870911;\n            case \"0\":\n                return 0;\n        }\n\n        /* istanbul ignore if */\n        if (!acceptNegative && token.charAt(0) === \"-\")\n            throw illegal(token, \"id\");\n\n        if (base10NegRe.test(token))\n            return parseInt(token, 10);\n        if (base16NegRe.test(token))\n            return parseInt(token, 16);\n\n        /* istanbul ignore else */\n        if (base8NegRe.test(token))\n            return parseInt(token, 8);\n\n        /* istanbul ignore next */\n        throw illegal(token, \"id\");\n    }\n\n    function parsePackage() {\n        /* istanbul ignore if */\n        if (pkg !== undefined)\n            throw illegal(\"package\");\n\n        pkg = next();\n\n        /* istanbul ignore if */\n        if (!typeRefRe.test(pkg))\n            throw illegal(pkg, \"name\");\n\n        ptr = ptr.define(pkg);\n\n        skip(\";\");\n    }\n\n    function parseImport() {\n        var token = peek();\n        var whichImports;\n        switch (token) {\n            case \"weak\":\n                whichImports = weakImports || (weakImports = []);\n                next();\n                break;\n            case \"public\":\n                next();\n                // eslint-disable-next-line no-fallthrough\n            default:\n                whichImports = imports || (imports = []);\n                break;\n        }\n        token = readString();\n        skip(\";\");\n        whichImports.push(token);\n    }\n\n    function parseSyntax() {\n        skip(\"=\");\n        edition = readString();\n\n        /* istanbul ignore if */\n        if (edition < 2023)\n            throw illegal(edition, \"syntax\");\n\n        skip(\";\");\n    }\n\n    function parseEdition() {\n        skip(\"=\");\n        edition = readString();\n        const supportedEditions = [\"2023\"];\n\n        /* istanbul ignore if */\n        if (!supportedEditions.includes(edition))\n            throw illegal(edition, \"edition\");\n\n        skip(\";\");\n    }\n\n\n    function parseCommon(parent, token) {\n        switch (token) {\n\n            case \"option\":\n                parseOption(parent, token);\n                skip(\";\");\n                return true;\n\n            case \"message\":\n                parseType(parent, token);\n                return true;\n\n            case \"enum\":\n                parseEnum(parent, token);\n                return true;\n\n            case \"service\":\n                parseService(parent, token);\n                return true;\n\n            case \"extend\":\n                parseExtension(parent, token);\n                return true;\n        }\n        return false;\n    }\n\n    function ifBlock(obj, fnIf, fnElse) {\n        var trailingLine = tn.line;\n        if (obj) {\n            if(typeof obj.comment !== \"string\") {\n              obj.comment = cmnt(); // try block-type comment\n            }\n            obj.filename = parse.filename;\n        }\n        if (skip(\"{\", true)) {\n            var token;\n            while ((token = next()) !== \"}\")\n                fnIf(token);\n            skip(\";\", true);\n        } else {\n            if (fnElse)\n                fnElse();\n            skip(\";\");\n            if (obj && (typeof obj.comment !== \"string\" || preferTrailingComment))\n                obj.comment = cmnt(trailingLine) || obj.comment; // try line-type comment\n        }\n    }\n\n    function parseType(parent, token) {\n\n        /* istanbul ignore if */\n        if (!nameRe.test(token = next()))\n            throw illegal(token, \"type name\");\n\n        var type = new Type(token);\n        ifBlock(type, function parseType_block(token) {\n            if (parseCommon(type, token))\n                return;\n\n            switch (token) {\n\n                case \"map\":\n                    parseMapField(type, token);\n                    break;\n\n                case \"required\":\n                    if (edition !== \"proto2\")\n                        throw illegal(token);\n                /* eslint-disable no-fallthrough */\n                case \"repeated\":\n                    parseField(type, token);\n                    break;\n\n                case \"optional\":\n                    /* istanbul ignore if */\n                    if (edition === \"proto3\") {\n                        parseField(type, \"proto3_optional\");\n                    } else if (edition !== \"proto2\") {\n                        throw illegal(token);\n                    } else {\n                        parseField(type, \"optional\");\n                    }\n                    break;\n\n                case \"oneof\":\n                    parseOneOf(type, token);\n                    break;\n\n                case \"extensions\":\n                    readRanges(type.extensions || (type.extensions = []));\n                    break;\n\n                case \"reserved\":\n                    readRanges(type.reserved || (type.reserved = []), true);\n                    break;\n\n                default:\n                    /* istanbul ignore if */\n                    if (edition === \"proto2\" || !typeRefRe.test(token)) {\n                        throw illegal(token);\n                    }\n\n                    push(token);\n                    parseField(type, \"optional\");\n                    break;\n            }\n        });\n        parent.add(type);\n        if (parent === ptr) {\n            topLevelObjects.push(type);\n        }\n    }\n\n    function parseField(parent, rule, extend) {\n        var type = next();\n        if (type === \"group\") {\n            parseGroup(parent, rule);\n            return;\n        }\n        // Type names can consume multiple tokens, in multiple variants:\n        //    package.subpackage   field       tokens: \"package.subpackage\" [TYPE NAME ENDS HERE] \"field\"\n        //    package . subpackage field       tokens: \"package\" \".\" \"subpackage\" [TYPE NAME ENDS HERE] \"field\"\n        //    package.  subpackage field       tokens: \"package.\" \"subpackage\" [TYPE NAME ENDS HERE] \"field\"\n        //    package  .subpackage field       tokens: \"package\" \".subpackage\" [TYPE NAME ENDS HERE] \"field\"\n        // Keep reading tokens until we get a type name with no period at the end,\n        // and the next token does not start with a period.\n        while (type.endsWith(\".\") || peek().startsWith(\".\")) {\n            type += next();\n        }\n\n        /* istanbul ignore if */\n        if (!typeRefRe.test(type))\n            throw illegal(type, \"type\");\n\n        var name = next();\n\n        /* istanbul ignore if */\n\n        if (!nameRe.test(name))\n            throw illegal(name, \"name\");\n\n        name = applyCase(name);\n        skip(\"=\");\n\n        var field = new Field(name, parseId(next()), type, rule, extend);\n\n        ifBlock(field, function parseField_block(token) {\n\n            /* istanbul ignore else */\n            if (token === \"option\") {\n                parseOption(field, token);\n                skip(\";\");\n            } else\n                throw illegal(token);\n\n        }, function parseField_line() {\n            parseInlineOptions(field);\n        });\n\n        if (rule === \"proto3_optional\") {\n            // for proto3 optional fields, we create a single-member Oneof to mimic \"optional\" behavior\n            var oneof = new OneOf(\"_\" + name);\n            field.setOption(\"proto3_optional\", true);\n            oneof.add(field);\n            parent.add(oneof);\n        } else {\n            parent.add(field);\n        }\n        if (parent === ptr) {\n            topLevelObjects.push(field);\n        }\n    }\n\n    function parseGroup(parent, rule) {\n        if (edition >= 2023) {\n            throw illegal(\"group\");\n        }\n        var name = next();\n\n        /* istanbul ignore if */\n        if (!nameRe.test(name))\n            throw illegal(name, \"name\");\n\n        var fieldName = util.lcFirst(name);\n        if (name === fieldName)\n            name = util.ucFirst(name);\n        skip(\"=\");\n        var id = parseId(next());\n        var type = new Type(name);\n        type.group = true;\n        var field = new Field(fieldName, id, name, rule);\n        field.filename = parse.filename;\n        ifBlock(type, function parseGroup_block(token) {\n            switch (token) {\n\n                case \"option\":\n                    parseOption(type, token);\n                    skip(\";\");\n                    break;\n                case \"required\":\n                case \"repeated\":\n                    parseField(type, token);\n                    break;\n\n                case \"optional\":\n                    /* istanbul ignore if */\n                    if (edition === \"proto3\") {\n                        parseField(type, \"proto3_optional\");\n                    } else {\n                        parseField(type, \"optional\");\n                    }\n                    break;\n\n                case \"message\":\n                    parseType(type, token);\n                    break;\n\n                case \"enum\":\n                    parseEnum(type, token);\n                    break;\n\n                case \"reserved\":\n                    readRanges(type.reserved || (type.reserved = []), true);\n                    break;\n\n                /* istanbul ignore next */\n                default:\n                    throw illegal(token); // there are no groups with proto3 semantics\n            }\n        });\n        parent.add(type)\n              .add(field);\n    }\n\n    function parseMapField(parent) {\n        skip(\"<\");\n        var keyType = next();\n\n        /* istanbul ignore if */\n        if (types.mapKey[keyType] === undefined)\n            throw illegal(keyType, \"type\");\n\n        skip(\",\");\n        var valueType = next();\n\n        /* istanbul ignore if */\n        if (!typeRefRe.test(valueType))\n            throw illegal(valueType, \"type\");\n\n        skip(\">\");\n        var name = next();\n\n        /* istanbul ignore if */\n        if (!nameRe.test(name))\n            throw illegal(name, \"name\");\n\n        skip(\"=\");\n        var field = new MapField(applyCase(name), parseId(next()), keyType, valueType);\n        ifBlock(field, function parseMapField_block(token) {\n\n            /* istanbul ignore else */\n            if (token === \"option\") {\n                parseOption(field, token);\n                skip(\";\");\n            } else\n                throw illegal(token);\n\n        }, function parseMapField_line() {\n            parseInlineOptions(field);\n        });\n        parent.add(field);\n    }\n\n    function parseOneOf(parent, token) {\n\n        /* istanbul ignore if */\n        if (!nameRe.test(token = next()))\n            throw illegal(token, \"name\");\n\n        var oneof = new OneOf(applyCase(token));\n        ifBlock(oneof, function parseOneOf_block(token) {\n            if (token === \"option\") {\n                parseOption(oneof, token);\n                skip(\";\");\n            } else {\n                push(token);\n                parseField(oneof, \"optional\");\n            }\n        });\n        parent.add(oneof);\n    }\n\n    function parseEnum(parent, token) {\n\n        /* istanbul ignore if */\n        if (!nameRe.test(token = next()))\n            throw illegal(token, \"name\");\n\n        var enm = new Enum(token);\n        ifBlock(enm, function parseEnum_block(token) {\n          switch(token) {\n            case \"option\":\n              parseOption(enm, token);\n              skip(\";\");\n              break;\n\n            case \"reserved\":\n              readRanges(enm.reserved || (enm.reserved = []), true);\n              if(enm.reserved === undefined) enm.reserved = [];\n              break;\n\n            default:\n              parseEnumValue(enm, token);\n          }\n        });\n        parent.add(enm);\n        if (parent === ptr) {\n            topLevelObjects.push(enm);\n        }\n    }\n\n    function parseEnumValue(parent, token) {\n\n        /* istanbul ignore if */\n        if (!nameRe.test(token))\n            throw illegal(token, \"name\");\n\n        skip(\"=\");\n        var value = parseId(next(), true),\n            dummy = {\n                options: undefined\n            };\n        dummy.getOption = function(name) {\n            return this.options[name];\n        };\n        dummy.setOption = function(name, value) {\n            ReflectionObject.prototype.setOption.call(dummy, name, value);\n        };\n        dummy.setParsedOption = function() {\n            return undefined;\n        };\n        ifBlock(dummy, function parseEnumValue_block(token) {\n\n            /* istanbul ignore else */\n            if (token === \"option\") {\n                parseOption(dummy, token); // skip\n                skip(\";\");\n            } else\n                throw illegal(token);\n\n        }, function parseEnumValue_line() {\n            parseInlineOptions(dummy); // skip\n        });\n        parent.add(token, value, dummy.comment, dummy.parsedOptions || dummy.options);\n    }\n\n    function parseOption(parent, token) {\n            var option;\n            var propName;\n            var isOption = true;\n            if (token === \"option\") {\n                token = next();\n            }\n\n            while (token !== \"=\") {\n                if (token === \"(\") {\n                    var parensValue = next();\n                    skip(\")\");\n                    token = \"(\" + parensValue + \")\";\n                }\n                if (isOption) {\n                    isOption = false;\n                    if (token.includes(\".\") && !token.includes(\"(\")) {\n                        var tokens = token.split(\".\");\n                        option = tokens[0] + \".\";\n                        token = tokens[1];\n                        continue;\n                    }\n                    option = token;\n                } else {\n                    propName = propName ? propName += token : token;\n                }\n                token = next();\n            }\n            var name = propName ? option.concat(propName) : option;\n            var optionValue = parseOptionValue(parent, name);\n            propName = propName && propName[0] === \".\" ? propName.slice(1) : propName;\n            option = option && option[option.length - 1] === \".\" ? option.slice(0, -1) : option;\n            setParsedOption(parent, option, optionValue, propName);\n    }\n\n    function parseOptionValue(parent, name) {\n        // { a: \"foo\" b { c: \"bar\" } }\n        if (skip(\"{\", true)) {\n            var objectResult = {};\n\n            while (!skip(\"}\", true)) {\n                /* istanbul ignore if */\n                if (!nameRe.test(token = next())) {\n                    throw illegal(token, \"name\");\n                }\n                if (token === null) {\n                  throw illegal(token, \"end of input\");\n                }\n\n                var value;\n                var propName = token;\n\n                skip(\":\", true);\n\n                if (peek() === \"{\") {\n                    // option (my_option) = {\n                    //     repeated_value: [ \"foo\", \"bar\" ]\n                    // };\n                    value = parseOptionValue(parent, name + \".\" + token);\n                } else if (peek() === \"[\") {\n                    value = [];\n                    var lastValue;\n                    if (skip(\"[\", true)) {\n                        do {\n                            lastValue = readValue(true);\n                            value.push(lastValue);\n                        } while (skip(\",\", true));\n                        skip(\"]\");\n                        if (typeof lastValue !== \"undefined\") {\n                            setOption(parent, name + \".\" + token, lastValue);\n                        }\n                    }\n                } else {\n                    value = readValue(true);\n                    setOption(parent, name + \".\" + token, value);\n                }\n\n                var prevValue = objectResult[propName];\n\n                if (prevValue)\n                    value = [].concat(prevValue).concat(value);\n\n                objectResult[propName] = value;\n\n                // Semicolons and commas can be optional\n                skip(\",\", true);\n                skip(\";\", true);\n            }\n\n            return objectResult;\n        }\n\n        var simpleValue = readValue(true);\n        setOption(parent, name, simpleValue);\n        return simpleValue;\n        // Does not enforce a delimiter to be universal\n    }\n\n    function setOption(parent, name, value) {\n        if (ptr === parent && /^features\\./.test(name)) {\n            topLevelOptions[name] = value;\n            return;\n        }\n        if (parent.setOption)\n            parent.setOption(name, value);\n    }\n\n    function setParsedOption(parent, name, value, propName) {\n        if (parent.setParsedOption)\n            parent.setParsedOption(name, value, propName);\n    }\n\n    function parseInlineOptions(parent) {\n        if (skip(\"[\", true)) {\n            do {\n                parseOption(parent, \"option\");\n            } while (skip(\",\", true));\n            skip(\"]\");\n        }\n        return parent;\n    }\n\n    function parseService(parent, token) {\n\n        /* istanbul ignore if */\n        if (!nameRe.test(token = next()))\n            throw illegal(token, \"service name\");\n\n        var service = new Service(token);\n        ifBlock(service, function parseService_block(token) {\n            if (parseCommon(service, token)) {\n                return;\n            }\n\n            /* istanbul ignore else */\n            if (token === \"rpc\")\n                parseMethod(service, token);\n            else\n                throw illegal(token);\n        });\n        parent.add(service);\n        if (parent === ptr) {\n            topLevelObjects.push(service);\n        }\n    }\n\n    function parseMethod(parent, token) {\n        // Get the comment of the preceding line now (if one exists) in case the\n        // method is defined across multiple lines.\n        var commentText = cmnt();\n\n        var type = token;\n\n        /* istanbul ignore if */\n        if (!nameRe.test(token = next()))\n            throw illegal(token, \"name\");\n\n        var name = token,\n            requestType, requestStream,\n            responseType, responseStream;\n\n        skip(\"(\");\n        if (skip(\"stream\", true))\n            requestStream = true;\n\n        /* istanbul ignore if */\n        if (!typeRefRe.test(token = next()))\n            throw illegal(token);\n\n        requestType = token;\n        skip(\")\"); skip(\"returns\"); skip(\"(\");\n        if (skip(\"stream\", true))\n            responseStream = true;\n\n        /* istanbul ignore if */\n        if (!typeRefRe.test(token = next()))\n            throw illegal(token);\n\n        responseType = token;\n        skip(\")\");\n\n        var method = new Method(name, type, requestType, responseType, requestStream, responseStream);\n        method.comment = commentText;\n        ifBlock(method, function parseMethod_block(token) {\n\n            /* istanbul ignore else */\n            if (token === \"option\") {\n                parseOption(method, token);\n                skip(\";\");\n            } else\n                throw illegal(token);\n\n        });\n        parent.add(method);\n    }\n\n    function parseExtension(parent, token) {\n\n        /* istanbul ignore if */\n        if (!typeRefRe.test(token = next()))\n            throw illegal(token, \"reference\");\n\n        var reference = token;\n        ifBlock(null, function parseExtension_block(token) {\n            switch (token) {\n\n                case \"required\":\n                case \"repeated\":\n                    parseField(parent, token, reference);\n                    break;\n\n                case \"optional\":\n                    /* istanbul ignore if */\n                    if (edition === \"proto3\") {\n                        parseField(parent, \"proto3_optional\", reference);\n                    } else {\n                        parseField(parent, \"optional\", reference);\n                    }\n                    break;\n\n                default:\n                    /* istanbul ignore if */\n                    if (edition === \"proto2\" || !typeRefRe.test(token))\n                        throw illegal(token);\n                    push(token);\n                    parseField(parent, \"optional\", reference);\n                    break;\n            }\n        });\n    }\n\n    var token;\n    while ((token = next()) !== null) {\n        switch (token) {\n\n            case \"package\":\n\n                /* istanbul ignore if */\n                if (!head)\n                    throw illegal(token);\n\n                parsePackage();\n                break;\n\n            case \"import\":\n\n                /* istanbul ignore if */\n                if (!head)\n                    throw illegal(token);\n\n                parseImport();\n                break;\n\n            case \"syntax\":\n\n                /* istanbul ignore if */\n                if (!head)\n                    throw illegal(token);\n\n                parseSyntax();\n                break;\n\n            case \"edition\":\n                /* istanbul ignore if */\n                if (!head)\n                    throw illegal(token);\n                parseEdition();\n                break;\n\n            case \"option\":\n                parseOption(ptr, token);\n                skip(\";\", true);\n                break;\n\n            default:\n\n                /* istanbul ignore else */\n                if (parseCommon(ptr, token)) {\n                    head = false;\n                    continue;\n                }\n\n                /* istanbul ignore next */\n                throw illegal(token);\n        }\n    }\n\n    resolveFileFeatures();\n\n    parse.filename = null;\n    return {\n        \"package\"     : pkg,\n        \"imports\"     : imports,\n         weakImports  : weakImports,\n         root         : root\n    };\n}\n\n/**\n * Parses the given .proto source and returns an object with the parsed contents.\n * @name parse\n * @function\n * @param {string} source Source contents\n * @param {IParseOptions} [options] Parse options. Defaults to {@link parse.defaults} when omitted.\n * @returns {IParserResult} Parser result\n * @property {string} filename=null Currently processing file name for error reporting, if known\n * @property {IParseOptions} defaults Default {@link IParseOptions}\n * @variation 2\n */\n", "\"use strict\";\nmodule.exports = common;\n\nvar commonRe = /\\/|\\./;\n\n/**\n * Provides common type definitions.\n * Can also be used to provide additional google types or your own custom types.\n * @param {string} name Short name as in `google/protobuf/[name].proto` or full file name\n * @param {Object.<string,*>} json JSON definition within `google.protobuf` if a short name, otherwise the file's root definition\n * @returns {undefined}\n * @property {INamespace} google/protobuf/any.proto Any\n * @property {INamespace} google/protobuf/duration.proto Duration\n * @property {INamespace} google/protobuf/empty.proto Empty\n * @property {INamespace} google/protobuf/field_mask.proto FieldMask\n * @property {INamespace} google/protobuf/struct.proto Struct, Value, NullValue and ListValue\n * @property {INamespace} google/protobuf/timestamp.proto Timestamp\n * @property {INamespace} google/protobuf/wrappers.proto Wrappers\n * @example\n * // manually provides descriptor.proto (assumes google/protobuf/ namespace and .proto extension)\n * protobuf.common(\"descriptor\", descriptorJson);\n *\n * // manually provides a custom definition (uses my.foo namespace)\n * protobuf.common(\"my/foo/bar.proto\", myFooBarJson);\n */\nfunction common(name, json) {\n    if (!commonRe.test(name)) {\n        name = \"google/protobuf/\" + name + \".proto\";\n        json = { nested: { google: { nested: { protobuf: { nested: json } } } } };\n    }\n    common[name] = json;\n}\n\n// Not provided because of limited use (feel free to discuss or to provide yourself):\n//\n// google/protobuf/descriptor.proto\n// google/protobuf/source_context.proto\n// google/protobuf/type.proto\n//\n// Stripped and pre-parsed versions of these non-bundled files are instead available as part of\n// the repository or package within the google/protobuf directory.\n\ncommon(\"any\", {\n\n    /**\n     * Properties of a google.protobuf.Any message.\n     * @interface IAny\n     * @type {Object}\n     * @property {string} [typeUrl]\n     * @property {Uint8Array} [bytes]\n     * @memberof common\n     */\n    Any: {\n        fields: {\n            type_url: {\n                type: \"string\",\n                id: 1\n            },\n            value: {\n                type: \"bytes\",\n                id: 2\n            }\n        }\n    }\n});\n\nvar timeType;\n\ncommon(\"duration\", {\n\n    /**\n     * Properties of a google.protobuf.Duration message.\n     * @interface IDuration\n     * @type {Object}\n     * @property {number|Long} [seconds]\n     * @property {number} [nanos]\n     * @memberof common\n     */\n    Duration: timeType = {\n        fields: {\n            seconds: {\n                type: \"int64\",\n                id: 1\n            },\n            nanos: {\n                type: \"int32\",\n                id: 2\n            }\n        }\n    }\n});\n\ncommon(\"timestamp\", {\n\n    /**\n     * Properties of a google.protobuf.Timestamp message.\n     * @interface ITimestamp\n     * @type {Object}\n     * @property {number|Long} [seconds]\n     * @property {number} [nanos]\n     * @memberof common\n     */\n    Timestamp: timeType\n});\n\ncommon(\"empty\", {\n\n    /**\n     * Properties of a google.protobuf.Empty message.\n     * @interface IEmpty\n     * @memberof common\n     */\n    Empty: {\n        fields: {}\n    }\n});\n\ncommon(\"struct\", {\n\n    /**\n     * Properties of a google.protobuf.Struct message.\n     * @interface IStruct\n     * @type {Object}\n     * @property {Object.<string,IValue>} [fields]\n     * @memberof common\n     */\n    Struct: {\n        fields: {\n            fields: {\n                keyType: \"string\",\n                type: \"Value\",\n                id: 1\n            }\n        }\n    },\n\n    /**\n     * Properties of a google.protobuf.Value message.\n     * @interface IValue\n     * @type {Object}\n     * @property {string} [kind]\n     * @property {0} [nullValue]\n     * @property {number} [numberValue]\n     * @property {string} [stringValue]\n     * @property {boolean} [boolValue]\n     * @property {IStruct} [structValue]\n     * @property {IListValue} [listValue]\n     * @memberof common\n     */\n    Value: {\n        oneofs: {\n            kind: {\n                oneof: [\n                    \"nullValue\",\n                    \"numberValue\",\n                    \"stringValue\",\n                    \"boolValue\",\n                    \"structValue\",\n                    \"listValue\"\n                ]\n            }\n        },\n        fields: {\n            nullValue: {\n                type: \"NullValue\",\n                id: 1\n            },\n            numberValue: {\n                type: \"double\",\n                id: 2\n            },\n            stringValue: {\n                type: \"string\",\n                id: 3\n            },\n            boolValue: {\n                type: \"bool\",\n                id: 4\n            },\n            structValue: {\n                type: \"Struct\",\n                id: 5\n            },\n            listValue: {\n                type: \"ListValue\",\n                id: 6\n            }\n        }\n    },\n\n    NullValue: {\n        values: {\n            NULL_VALUE: 0\n        }\n    },\n\n    /**\n     * Properties of a google.protobuf.ListValue message.\n     * @interface IListValue\n     * @type {Object}\n     * @property {Array.<IValue>} [values]\n     * @memberof common\n     */\n    ListValue: {\n        fields: {\n            values: {\n                rule: \"repeated\",\n                type: \"Value\",\n                id: 1\n            }\n        }\n    }\n});\n\ncommon(\"wrappers\", {\n\n    /**\n     * Properties of a google.protobuf.DoubleValue message.\n     * @interface IDoubleValue\n     * @type {Object}\n     * @property {number} [value]\n     * @memberof common\n     */\n    DoubleValue: {\n        fields: {\n            value: {\n                type: \"double\",\n                id: 1\n            }\n        }\n    },\n\n    /**\n     * Properties of a google.protobuf.FloatValue message.\n     * @interface IFloatValue\n     * @type {Object}\n     * @property {number} [value]\n     * @memberof common\n     */\n    FloatValue: {\n        fields: {\n            value: {\n                type: \"float\",\n                id: 1\n            }\n        }\n    },\n\n    /**\n     * Properties of a google.protobuf.Int64Value message.\n     * @interface IInt64Value\n     * @type {Object}\n     * @property {number|Long} [value]\n     * @memberof common\n     */\n    Int64Value: {\n        fields: {\n            value: {\n                type: \"int64\",\n                id: 1\n            }\n        }\n    },\n\n    /**\n     * Properties of a google.protobuf.UInt64Value message.\n     * @interface IUInt64Value\n     * @type {Object}\n     * @property {number|Long} [value]\n     * @memberof common\n     */\n    UInt64Value: {\n        fields: {\n            value: {\n                type: \"uint64\",\n                id: 1\n            }\n        }\n    },\n\n    /**\n     * Properties of a google.protobuf.Int32Value message.\n     * @interface IInt32Value\n     * @type {Object}\n     * @property {number} [value]\n     * @memberof common\n     */\n    Int32Value: {\n        fields: {\n            value: {\n                type: \"int32\",\n                id: 1\n            }\n        }\n    },\n\n    /**\n     * Properties of a google.protobuf.UInt32Value message.\n     * @interface IUInt32Value\n     * @type {Object}\n     * @property {number} [value]\n     * @memberof common\n     */\n    UInt32Value: {\n        fields: {\n            value: {\n                type: \"uint32\",\n                id: 1\n            }\n        }\n    },\n\n    /**\n     * Properties of a google.protobuf.BoolValue message.\n     * @interface IBoolValue\n     * @type {Object}\n     * @property {boolean} [value]\n     * @memberof common\n     */\n    BoolValue: {\n        fields: {\n            value: {\n                type: \"bool\",\n                id: 1\n            }\n        }\n    },\n\n    /**\n     * Properties of a google.protobuf.StringValue message.\n     * @interface IStringValue\n     * @type {Object}\n     * @property {string} [value]\n     * @memberof common\n     */\n    StringValue: {\n        fields: {\n            value: {\n                type: \"string\",\n                id: 1\n            }\n        }\n    },\n\n    /**\n     * Properties of a google.protobuf.BytesValue message.\n     * @interface IBytesValue\n     * @type {Object}\n     * @property {Uint8Array} [value]\n     * @memberof common\n     */\n    BytesValue: {\n        fields: {\n            value: {\n                type: \"bytes\",\n                id: 1\n            }\n        }\n    }\n});\n\ncommon(\"field_mask\", {\n\n    /**\n     * Properties of a google.protobuf.FieldMask message.\n     * @interface IDoubleValue\n     * @type {Object}\n     * @property {number} [value]\n     * @memberof common\n     */\n    FieldMask: {\n        fields: {\n            paths: {\n                rule: \"repeated\",\n                type: \"string\",\n                id: 1\n            }\n        }\n    }\n});\n\n/**\n * Gets the root definition of the specified common proto file.\n *\n * Bundled definitions are:\n * - google/protobuf/any.proto\n * - google/protobuf/duration.proto\n * - google/protobuf/empty.proto\n * - google/protobuf/field_mask.proto\n * - google/protobuf/struct.proto\n * - google/protobuf/timestamp.proto\n * - google/protobuf/wrappers.proto\n *\n * @param {string} file Proto file name\n * @returns {INamespace|null} Root definition or `null` if not defined\n */\ncommon.get = function get(file) {\n    return common[file] || null;\n};\n", "\"use strict\";\nvar protobuf = module.exports = require(\"./index-light\");\n\nprotobuf.build = \"full\";\n\n// Parser\nprotobuf.tokenize         = require(\"./tokenize\");\nprotobuf.parse            = require(\"./parse\");\nprotobuf.common           = require(\"./common\");\n\n// Configure parser\nprotobuf.Root._configure(protobuf.Type, protobuf.parse, protobuf.common);\n", "// full library entry point.\n\n\"use strict\";\nmodule.exports = require(\"./src/index\");\n", "{\n  \"nested\": {\n    \"google\": {\n      \"nested\": {\n        \"protobuf\": {\n          \"options\": {\n            \"go_package\": \"google.golang.org/protobuf/types/descriptorpb\",\n            \"java_package\": \"com.google.protobuf\",\n            \"java_outer_classname\": \"DescriptorProtos\",\n            \"csharp_namespace\": \"Google.Protobuf.Reflection\",\n            \"objc_class_prefix\": \"GPB\",\n            \"cc_enable_arenas\": true,\n            \"optimize_for\": \"SPEED\"\n          },\n          \"nested\": {\n            \"FileDescriptorSet\": {\n              \"edition\": \"proto2\",\n              \"fields\": {\n                \"file\": {\n                  \"rule\": \"repeated\",\n                  \"type\": \"FileDescriptorProto\",\n                  \"id\": 1\n                }\n              },\n              \"extensions\": [\n                [\n                  536000000,\n                  536000000\n                ]\n              ]\n            },\n            \"Edition\": {\n              \"edition\": \"proto2\",\n              \"values\": {\n                \"EDITION_UNKNOWN\": 0,\n                \"EDITION_LEGACY\": 900,\n                \"EDITION_PROTO2\": 998,\n                \"EDITION_PROTO3\": 999,\n                \"EDITION_2023\": 1000,\n                \"EDITION_2024\": 1001,\n                \"EDITION_1_TEST_ONLY\": 1,\n                \"EDITION_2_TEST_ONLY\": 2,\n                \"EDITION_99997_TEST_ONLY\": 99997,\n                \"EDITION_99998_TEST_ONLY\": 99998,\n                \"EDITION_99999_TEST_ONLY\": 99999,\n                \"EDITION_MAX\": 2147483647\n              }\n            },\n            \"FileDescriptorProto\": {\n              \"edition\": \"proto2\",\n              \"fields\": {\n                \"name\": {\n                  \"type\": \"string\",\n                  \"id\": 1\n                },\n                \"package\": {\n                  \"type\": \"string\",\n                  \"id\": 2\n                },\n                \"dependency\": {\n                  \"rule\": \"repeated\",\n                  \"type\": \"string\",\n                  \"id\": 3\n                },\n                \"publicDependency\": {\n                  \"rule\": \"repeated\",\n                  \"type\": \"int32\",\n                  \"id\": 10\n                },\n                \"weakDependency\": {\n                  \"rule\": \"repeated\",\n                  \"type\": \"int32\",\n                  \"id\": 11\n                },\n                \"optionDependency\": {\n                  \"rule\": \"repeated\",\n                  \"type\": \"string\",\n                  \"id\": 15\n                },\n                \"messageType\": {\n                  \"rule\": \"repeated\",\n                  \"type\": \"DescriptorProto\",\n                  \"id\": 4\n                },\n                \"enumType\": {\n                  \"rule\": \"repeated\",\n                  \"type\": \"EnumDescriptorProto\",\n                  \"id\": 5\n                },\n                \"service\": {\n                  \"rule\": \"repeated\",\n                  \"type\": \"ServiceDescriptorProto\",\n                  \"id\": 6\n                },\n                \"extension\": {\n                  \"rule\": \"repeated\",\n                  \"type\": \"FieldDescriptorProto\",\n                  \"id\": 7\n                },\n                \"options\": {\n                  \"type\": \"FileOptions\",\n                  \"id\": 8\n                },\n                \"sourceCodeInfo\": {\n                  \"type\": \"SourceCodeInfo\",\n                  \"id\": 9\n                },\n                \"syntax\": {\n                  \"type\": \"string\",\n                  \"id\": 12\n                },\n                \"edition\": {\n                  \"type\": \"Edition\",\n                  \"id\": 14\n                }\n              }\n            },\n            \"DescriptorProto\": {\n              \"edition\": \"proto2\",\n              \"fields\": {\n                \"name\": {\n                  \"type\": \"string\",\n                  \"id\": 1\n                },\n                \"field\": {\n                  \"rule\": \"repeated\",\n                  \"type\": \"FieldDescriptorProto\",\n                  \"id\": 2\n                },\n                \"extension\": {\n                  \"rule\": \"repeated\",\n                  \"type\": \"FieldDescriptorProto\",\n                  \"id\": 6\n                },\n                \"nestedType\": {\n                  \"rule\": \"repeated\",\n                  \"type\": \"DescriptorProto\",\n                  \"id\": 3\n                },\n                \"enumType\": {\n                  \"rule\": \"repeated\",\n                  \"type\": \"EnumDescriptorProto\",\n                  \"id\": 4\n                },\n                \"extensionRange\": {\n                  \"rule\": \"repeated\",\n                  \"type\": \"ExtensionRange\",\n                  \"id\": 5\n                },\n                \"oneofDecl\": {\n                  \"rule\": \"repeated\",\n                  \"type\": \"OneofDescriptorProto\",\n                  \"id\": 8\n                },\n                \"options\": {\n                  \"type\": \"MessageOptions\",\n                  \"id\": 7\n                },\n                \"reservedRange\": {\n                  \"rule\": \"repeated\",\n                  \"type\": \"ReservedRange\",\n                  \"id\": 9\n                },\n                \"reservedName\": {\n                  \"rule\": \"repeated\",\n                  \"type\": \"string\",\n                  \"id\": 10\n                },\n                \"visibility\": {\n                  \"type\": \"SymbolVisibility\",\n                  \"id\": 11\n                }\n              },\n              \"nested\": {\n                \"ExtensionRange\": {\n                  \"fields\": {\n                    \"start\": {\n                      \"type\": \"int32\",\n                      \"id\": 1\n                    },\n                    \"end\": {\n                      \"type\": \"int32\",\n                      \"id\": 2\n                    },\n                    \"options\": {\n                      \"type\": \"ExtensionRangeOptions\",\n                      \"id\": 3\n                    }\n                  }\n                },\n                \"ReservedRange\": {\n                  \"fields\": {\n                    \"start\": {\n                      \"type\": \"int32\",\n                      \"id\": 1\n                    },\n                    \"end\": {\n                      \"type\": \"int32\",\n                      \"id\": 2\n                    }\n                  }\n                }\n              }\n            },\n            \"ExtensionRangeOptions\": {\n              \"edition\": \"proto2\",\n              \"fields\": {\n                \"uninterpretedOption\": {\n                  \"rule\": \"repeated\",\n                  \"type\": \"UninterpretedOption\",\n                  \"id\": 999\n                },\n                \"declaration\": {\n                  \"rule\": \"repeated\",\n                  \"type\": \"Declaration\",\n                  \"id\": 2,\n                  \"options\": {\n                    \"retention\": \"RETENTION_SOURCE\"\n                  }\n                },\n                \"features\": {\n                  \"type\": \"FeatureSet\",\n                  \"id\": 50\n                },\n                \"verification\": {\n                  \"type\": \"VerificationState\",\n                  \"id\": 3,\n                  \"options\": {\n                    \"default\": \"UNVERIFIED\",\n                    \"retention\": \"RETENTION_SOURCE\"\n                  }\n                }\n              },\n              \"extensions\": [\n                [\n                  1000,\n                  536870911\n                ]\n              ],\n              \"nested\": {\n                \"Declaration\": {\n                  \"fields\": {\n                    \"number\": {\n                      \"type\": \"int32\",\n                      \"id\": 1\n                    },\n                    \"fullName\": {\n                      \"type\": \"string\",\n                      \"id\": 2\n                    },\n                    \"type\": {\n                      \"type\": \"string\",\n                      \"id\": 3\n                    },\n                    \"reserved\": {\n                      \"type\": \"bool\",\n                      \"id\": 5\n                    },\n                    \"repeated\": {\n                      \"type\": \"bool\",\n                      \"id\": 6\n                    }\n                  },\n                  \"reserved\": [\n                    [\n                      4,\n                      4\n                    ]\n                  ]\n                },\n                \"VerificationState\": {\n                  \"values\": {\n                    \"DECLARATION\": 0,\n                    \"UNVERIFIED\": 1\n                  }\n                }\n              }\n            },\n            \"FieldDescriptorProto\": {\n              \"edition\": \"proto2\",\n              \"fields\": {\n                \"name\": {\n                  \"type\": \"string\",\n                  \"id\": 1\n                },\n                \"number\": {\n                  \"type\": \"int32\",\n                  \"id\": 3\n                },\n                \"label\": {\n                  \"type\": \"Label\",\n                  \"id\": 4\n                },\n                \"type\": {\n                  \"type\": \"Type\",\n                  \"id\": 5\n                },\n                \"typeName\": {\n                  \"type\": \"string\",\n                  \"id\": 6\n                },\n                \"extendee\": {\n                  \"type\": \"string\",\n                  \"id\": 2\n                },\n                \"defaultValue\": {\n                  \"type\": \"string\",\n                  \"id\": 7\n                },\n                \"oneofIndex\": {\n                  \"type\": \"int32\",\n                  \"id\": 9\n                },\n                \"jsonName\": {\n                  \"type\": \"string\",\n                  \"id\": 10\n                },\n                \"options\": {\n                  \"type\": \"FieldOptions\",\n                  \"id\": 8\n                },\n                \"proto3Optional\": {\n                  \"type\": \"bool\",\n                  \"id\": 17\n                }\n              },\n              \"nested\": {\n                \"Type\": {\n                  \"values\": {\n                    \"TYPE_DOUBLE\": 1,\n                    \"TYPE_FLOAT\": 2,\n                    \"TYPE_INT64\": 3,\n                    \"TYPE_UINT64\": 4,\n                    \"TYPE_INT32\": 5,\n                    \"TYPE_FIXED64\": 6,\n                    \"TYPE_FIXED32\": 7,\n                    \"TYPE_BOOL\": 8,\n                    \"TYPE_STRING\": 9,\n                    \"TYPE_GROUP\": 10,\n                    \"TYPE_MESSAGE\": 11,\n                    \"TYPE_BYTES\": 12,\n                    \"TYPE_UINT32\": 13,\n                    \"TYPE_ENUM\": 14,\n                    \"TYPE_SFIXED32\": 15,\n                    \"TYPE_SFIXED64\": 16,\n                    \"TYPE_SINT32\": 17,\n                    \"TYPE_SINT64\": 18\n                  }\n                },\n                \"Label\": {\n                  \"values\": {\n                    \"LABEL_OPTIONAL\": 1,\n                    \"LABEL_REPEATED\": 3,\n                    \"LABEL_REQUIRED\": 2\n                  }\n                }\n              }\n            },\n            \"OneofDescriptorProto\": {\n              \"edition\": \"proto2\",\n              \"fields\": {\n                \"name\": {\n                  \"type\": \"string\",\n                  \"id\": 1\n                },\n                \"options\": {\n                  \"type\": \"OneofOptions\",\n                  \"id\": 2\n                }\n              }\n            },\n            \"EnumDescriptorProto\": {\n              \"edition\": \"proto2\",\n              \"fields\": {\n                \"name\": {\n                  \"type\": \"string\",\n                  \"id\": 1\n                },\n                \"value\": {\n                  \"rule\": \"repeated\",\n                  \"type\": \"EnumValueDescriptorProto\",\n                  \"id\": 2\n                },\n                \"options\": {\n                  \"type\": \"EnumOptions\",\n                  \"id\": 3\n                },\n                \"reservedRange\": {\n                  \"rule\": \"repeated\",\n                  \"type\": \"EnumReservedRange\",\n                  \"id\": 4\n                },\n                \"reservedName\": {\n                  \"rule\": \"repeated\",\n                  \"type\": \"string\",\n                  \"id\": 5\n                },\n                \"visibility\": {\n                  \"type\": \"SymbolVisibility\",\n                  \"id\": 6\n                }\n              },\n              \"nested\": {\n                \"EnumReservedRange\": {\n                  \"fields\": {\n                    \"start\": {\n                      \"type\": \"int32\",\n                      \"id\": 1\n                    },\n                    \"end\": {\n                      \"type\": \"int32\",\n                      \"id\": 2\n                    }\n                  }\n                }\n              }\n            },\n            \"EnumValueDescriptorProto\": {\n              \"edition\": \"proto2\",\n              \"fields\": {\n                \"name\": {\n                  \"type\": \"string\",\n                  \"id\": 1\n                },\n                \"number\": {\n                  \"type\": \"int32\",\n                  \"id\": 2\n                },\n                \"options\": {\n                  \"type\": \"EnumValueOptions\",\n                  \"id\": 3\n                }\n              }\n            },\n            \"ServiceDescriptorProto\": {\n              \"edition\": \"proto2\",\n              \"fields\": {\n                \"name\": {\n                  \"type\": \"string\",\n                  \"id\": 1\n                },\n                \"method\": {\n                  \"rule\": \"repeated\",\n                  \"type\": \"MethodDescriptorProto\",\n                  \"id\": 2\n                },\n                \"options\": {\n                  \"type\": \"ServiceOptions\",\n                  \"id\": 3\n                }\n              }\n            },\n            \"MethodDescriptorProto\": {\n              \"edition\": \"proto2\",\n              \"fields\": {\n                \"name\": {\n                  \"type\": \"string\",\n                  \"id\": 1\n                },\n                \"inputType\": {\n                  \"type\": \"string\",\n                  \"id\": 2\n                },\n                \"outputType\": {\n                  \"type\": \"string\",\n                  \"id\": 3\n                },\n                \"options\": {\n                  \"type\": \"MethodOptions\",\n                  \"id\": 4\n                },\n                \"clientStreaming\": {\n                  \"type\": \"bool\",\n                  \"id\": 5\n                },\n                \"serverStreaming\": {\n                  \"type\": \"bool\",\n                  \"id\": 6\n                }\n              }\n            },\n            \"FileOptions\": {\n              \"edition\": \"proto2\",\n              \"fields\": {\n                \"javaPackage\": {\n                  \"type\": \"string\",\n                  \"id\": 1\n                },\n                \"javaOuterClassname\": {\n                  \"type\": \"string\",\n                  \"id\": 8\n                },\n                \"javaMultipleFiles\": {\n                  \"type\": \"bool\",\n                  \"id\": 10\n                },\n                \"javaGenerateEqualsAndHash\": {\n                  \"type\": \"bool\",\n                  \"id\": 20,\n                  \"options\": {\n                    \"deprecated\": true\n                  }\n                },\n                \"javaStringCheckUtf8\": {\n                  \"type\": \"bool\",\n                  \"id\": 27\n                },\n                \"optimizeFor\": {\n                  \"type\": \"OptimizeMode\",\n                  \"id\": 9,\n                  \"options\": {\n                    \"default\": \"SPEED\"\n                  }\n                },\n                \"goPackage\": {\n                  \"type\": \"string\",\n                  \"id\": 11\n                },\n                \"ccGenericServices\": {\n                  \"type\": \"bool\",\n                  \"id\": 16\n                },\n                \"javaGenericServices\": {\n                  \"type\": \"bool\",\n                  \"id\": 17\n                },\n                \"pyGenericServices\": {\n                  \"type\": \"bool\",\n                  \"id\": 18\n                },\n                \"deprecated\": {\n                  \"type\": \"bool\",\n                  \"id\": 23\n                },\n                \"ccEnableArenas\": {\n                  \"type\": \"bool\",\n                  \"id\": 31,\n                  \"options\": {\n                    \"default\": true\n                  }\n                },\n                \"objcClassPrefix\": {\n                  \"type\": \"string\",\n                  \"id\": 36\n                },\n                \"csharpNamespace\": {\n                  \"type\": \"string\",\n                  \"id\": 37\n                },\n                \"swiftPrefix\": {\n                  \"type\": \"string\",\n                  \"id\": 39\n                },\n                \"phpClassPrefix\": {\n                  \"type\": \"string\",\n                  \"id\": 40\n                },\n                \"phpNamespace\": {\n                  \"type\": \"string\",\n                  \"id\": 41\n                },\n                \"phpMetadataNamespace\": {\n                  \"type\": \"string\",\n                  \"id\": 44\n                },\n                \"rubyPackage\": {\n                  \"type\": \"string\",\n                  \"id\": 45\n                },\n                \"features\": {\n                  \"type\": \"FeatureSet\",\n                  \"id\": 50\n                },\n                \"uninterpretedOption\": {\n                  \"rule\": \"repeated\",\n                  \"type\": \"UninterpretedOption\",\n                  \"id\": 999\n                }\n              },\n              \"extensions\": [\n                [\n                  1000,\n                  536870911\n                ]\n              ],\n              \"reserved\": [\n                [\n                  42,\n                  42\n                ],\n                [\n                  38,\n                  38\n                ],\n                \"php_generic_services\"\n              ],\n              \"nested\": {\n                \"OptimizeMode\": {\n                  \"values\": {\n                    \"SPEED\": 1,\n                    \"CODE_SIZE\": 2,\n                    \"LITE_RUNTIME\": 3\n                  }\n                }\n              }\n            },\n            \"MessageOptions\": {\n              \"edition\": \"proto2\",\n              \"fields\": {\n                \"messageSetWireFormat\": {\n                  \"type\": \"bool\",\n                  \"id\": 1\n                },\n                \"noStandardDescriptorAccessor\": {\n                  \"type\": \"bool\",\n                  \"id\": 2\n                },\n                \"deprecated\": {\n                  \"type\": \"bool\",\n                  \"id\": 3\n                },\n                \"mapEntry\": {\n                  \"type\": \"bool\",\n                  \"id\": 7\n                },\n                \"deprecatedLegacyJsonFieldConflicts\": {\n                  \"type\": \"bool\",\n                  \"id\": 11,\n                  \"options\": {\n                    \"deprecated\": true\n                  }\n                },\n                \"features\": {\n                  \"type\": \"FeatureSet\",\n                  \"id\": 12\n                },\n                \"uninterpretedOption\": {\n                  \"rule\": \"repeated\",\n                  \"type\": \"UninterpretedOption\",\n                  \"id\": 999\n                }\n              },\n              \"extensions\": [\n                [\n                  1000,\n                  536870911\n                ]\n              ],\n              \"reserved\": [\n                [\n                  4,\n                  4\n                ],\n                [\n                  5,\n                  5\n                ],\n                [\n                  6,\n                  6\n                ],\n                [\n                  8,\n                  8\n                ],\n                [\n                  9,\n                  9\n                ]\n              ]\n            },\n            \"FieldOptions\": {\n              \"edition\": \"proto2\",\n              \"fields\": {\n                \"ctype\": {\n                  \"type\": \"CType\",\n                  \"id\": 1,\n                  \"options\": {\n                    \"default\": \"STRING\"\n                  }\n                },\n                \"packed\": {\n                  \"type\": \"bool\",\n                  \"id\": 2\n                },\n                \"jstype\": {\n                  \"type\": \"JSType\",\n                  \"id\": 6,\n                  \"options\": {\n                    \"default\": \"JS_NORMAL\"\n                  }\n                },\n                \"lazy\": {\n                  \"type\": \"bool\",\n                  \"id\": 5\n                },\n                \"unverifiedLazy\": {\n                  \"type\": \"bool\",\n                  \"id\": 15\n                },\n                \"deprecated\": {\n                  \"type\": \"bool\",\n                  \"id\": 3\n                },\n                \"weak\": {\n                  \"type\": \"bool\",\n                  \"id\": 10,\n                  \"options\": {\n                    \"deprecated\": true\n                  }\n                },\n                \"debugRedact\": {\n                  \"type\": \"bool\",\n                  \"id\": 16\n                },\n                \"retention\": {\n                  \"type\": \"OptionRetention\",\n                  \"id\": 17\n                },\n                \"targets\": {\n                  \"rule\": \"repeated\",\n                  \"type\": \"OptionTargetType\",\n                  \"id\": 19\n                },\n                \"editionDefaults\": {\n                  \"rule\": \"repeated\",\n                  \"type\": \"EditionDefault\",\n                  \"id\": 20\n                },\n                \"features\": {\n                  \"type\": \"FeatureSet\",\n                  \"id\": 21\n                },\n                \"featureSupport\": {\n                  \"type\": \"FeatureSupport\",\n                  \"id\": 22\n                },\n                \"uninterpretedOption\": {\n                  \"rule\": \"repeated\",\n                  \"type\": \"UninterpretedOption\",\n                  \"id\": 999\n                }\n              },\n              \"extensions\": [\n                [\n                  1000,\n                  536870911\n                ]\n              ],\n              \"reserved\": [\n                [\n                  4,\n                  4\n                ],\n                [\n                  18,\n                  18\n                ]\n              ],\n              \"nested\": {\n                \"CType\": {\n                  \"values\": {\n                    \"STRING\": 0,\n                    \"CORD\": 1,\n                    \"STRING_PIECE\": 2\n                  }\n                },\n                \"JSType\": {\n                  \"values\": {\n                    \"JS_NORMAL\": 0,\n                    \"JS_STRING\": 1,\n                    \"JS_NUMBER\": 2\n                  }\n                },\n                \"OptionRetention\": {\n                  \"values\": {\n                    \"RETENTION_UNKNOWN\": 0,\n                    \"RETENTION_RUNTIME\": 1,\n                    \"RETENTION_SOURCE\": 2\n                  }\n                },\n                \"OptionTargetType\": {\n                  \"values\": {\n                    \"TARGET_TYPE_UNKNOWN\": 0,\n                    \"TARGET_TYPE_FILE\": 1,\n                    \"TARGET_TYPE_EXTENSION_RANGE\": 2,\n                    \"TARGET_TYPE_MESSAGE\": 3,\n                    \"TARGET_TYPE_FIELD\": 4,\n                    \"TARGET_TYPE_ONEOF\": 5,\n                    \"TARGET_TYPE_ENUM\": 6,\n                    \"TARGET_TYPE_ENUM_ENTRY\": 7,\n                    \"TARGET_TYPE_SERVICE\": 8,\n                    \"TARGET_TYPE_METHOD\": 9\n                  }\n                },\n                \"EditionDefault\": {\n                  \"fields\": {\n                    \"edition\": {\n                      \"type\": \"Edition\",\n                      \"id\": 3\n                    },\n                    \"value\": {\n                      \"type\": \"string\",\n                      \"id\": 2\n                    }\n                  }\n                },\n                \"FeatureSupport\": {\n                  \"fields\": {\n                    \"editionIntroduced\": {\n                      \"type\": \"Edition\",\n                      \"id\": 1\n                    },\n                    \"editionDeprecated\": {\n                      \"type\": \"Edition\",\n                      \"id\": 2\n                    },\n                    \"deprecationWarning\": {\n                      \"type\": \"string\",\n                      \"id\": 3\n                    },\n                    \"editionRemoved\": {\n                      \"type\": \"Edition\",\n                      \"id\": 4\n                    }\n                  }\n                }\n              }\n            },\n            \"OneofOptions\": {\n              \"edition\": \"proto2\",\n              \"fields\": {\n                \"features\": {\n                  \"type\": \"FeatureSet\",\n                  \"id\": 1\n                },\n                \"uninterpretedOption\": {\n                  \"rule\": \"repeated\",\n                  \"type\": \"UninterpretedOption\",\n                  \"id\": 999\n                }\n              },\n              \"extensions\": [\n                [\n                  1000,\n                  536870911\n                ]\n              ]\n            },\n            \"EnumOptions\": {\n              \"edition\": \"proto2\",\n              \"fields\": {\n                \"allowAlias\": {\n                  \"type\": \"bool\",\n                  \"id\": 2\n                },\n                \"deprecated\": {\n                  \"type\": \"bool\",\n                  \"id\": 3\n                },\n                \"deprecatedLegacyJsonFieldConflicts\": {\n                  \"type\": \"bool\",\n                  \"id\": 6,\n                  \"options\": {\n                    \"deprecated\": true\n                  }\n                },\n                \"features\": {\n                  \"type\": \"FeatureSet\",\n                  \"id\": 7\n                },\n                \"uninterpretedOption\": {\n                  \"rule\": \"repeated\",\n                  \"type\": \"UninterpretedOption\",\n                  \"id\": 999\n                }\n              },\n              \"extensions\": [\n                [\n                  1000,\n                  536870911\n                ]\n              ],\n              \"reserved\": [\n                [\n                  5,\n                  5\n                ]\n              ]\n            },\n            \"EnumValueOptions\": {\n              \"edition\": \"proto2\",\n              \"fields\": {\n                \"deprecated\": {\n                  \"type\": \"bool\",\n                  \"id\": 1\n                },\n                \"features\": {\n                  \"type\": \"FeatureSet\",\n                  \"id\": 2\n                },\n                \"debugRedact\": {\n                  \"type\": \"bool\",\n                  \"id\": 3\n                },\n                \"featureSupport\": {\n                  \"type\": \"FieldOptions.FeatureSupport\",\n                  \"id\": 4\n                },\n                \"uninterpretedOption\": {\n                  \"rule\": \"repeated\",\n                  \"type\": \"UninterpretedOption\",\n                  \"id\": 999\n                }\n              },\n              \"extensions\": [\n                [\n                  1000,\n                  536870911\n                ]\n              ]\n            },\n            \"ServiceOptions\": {\n              \"edition\": \"proto2\",\n              \"fields\": {\n                \"features\": {\n                  \"type\": \"FeatureSet\",\n                  \"id\": 34\n                },\n                \"deprecated\": {\n                  \"type\": \"bool\",\n                  \"id\": 33\n                },\n                \"uninterpretedOption\": {\n                  \"rule\": \"repeated\",\n                  \"type\": \"UninterpretedOption\",\n                  \"id\": 999\n                }\n              },\n              \"extensions\": [\n                [\n                  1000,\n                  536870911\n                ]\n              ]\n            },\n            \"MethodOptions\": {\n              \"edition\": \"proto2\",\n              \"fields\": {\n                \"deprecated\": {\n                  \"type\": \"bool\",\n                  \"id\": 33\n                },\n                \"idempotencyLevel\": {\n                  \"type\": \"IdempotencyLevel\",\n                  \"id\": 34,\n                  \"options\": {\n                    \"default\": \"IDEMPOTENCY_UNKNOWN\"\n                  }\n                },\n                \"features\": {\n                  \"type\": \"FeatureSet\",\n                  \"id\": 35\n                },\n                \"uninterpretedOption\": {\n                  \"rule\": \"repeated\",\n                  \"type\": \"UninterpretedOption\",\n                  \"id\": 999\n                }\n              },\n              \"extensions\": [\n                [\n                  1000,\n                  536870911\n                ]\n              ],\n              \"nested\": {\n                \"IdempotencyLevel\": {\n                  \"values\": {\n                    \"IDEMPOTENCY_UNKNOWN\": 0,\n                    \"NO_SIDE_EFFECTS\": 1,\n                    \"IDEMPOTENT\": 2\n                  }\n                }\n              }\n            },\n            \"UninterpretedOption\": {\n              \"edition\": \"proto2\",\n              \"fields\": {\n                \"name\": {\n                  \"rule\": \"repeated\",\n                  \"type\": \"NamePart\",\n                  \"id\": 2\n                },\n                \"identifierValue\": {\n                  \"type\": \"string\",\n                  \"id\": 3\n                },\n                \"positiveIntValue\": {\n                  \"type\": \"uint64\",\n                  \"id\": 4\n                },\n                \"negativeIntValue\": {\n                  \"type\": \"int64\",\n                  \"id\": 5\n                },\n                \"doubleValue\": {\n                  \"type\": \"double\",\n                  \"id\": 6\n                },\n                \"stringValue\": {\n                  \"type\": \"bytes\",\n                  \"id\": 7\n                },\n                \"aggregateValue\": {\n                  \"type\": \"string\",\n                  \"id\": 8\n                }\n              },\n              \"nested\": {\n                \"NamePart\": {\n                  \"fields\": {\n                    \"namePart\": {\n                      \"rule\": \"required\",\n                      \"type\": \"string\",\n                      \"id\": 1\n                    },\n                    \"isExtension\": {\n                      \"rule\": \"required\",\n                      \"type\": \"bool\",\n                      \"id\": 2\n                    }\n                  }\n                }\n              }\n            },\n            \"FeatureSet\": {\n              \"edition\": \"proto2\",\n              \"fields\": {\n                \"fieldPresence\": {\n                  \"type\": \"FieldPresence\",\n                  \"id\": 1,\n                  \"options\": {\n                    \"retention\": \"RETENTION_RUNTIME\",\n                    \"targets\": \"TARGET_TYPE_FILE\",\n                    \"feature_support.edition_introduced\": \"EDITION_2023\",\n                    \"edition_defaults.edition\": \"EDITION_2023\",\n                    \"edition_defaults.value\": \"EXPLICIT\"\n                  }\n                },\n                \"enumType\": {\n                  \"type\": \"EnumType\",\n                  \"id\": 2,\n                  \"options\": {\n                    \"retention\": \"RETENTION_RUNTIME\",\n                    \"targets\": \"TARGET_TYPE_FILE\",\n                    \"feature_support.edition_introduced\": \"EDITION_2023\",\n                    \"edition_defaults.edition\": \"EDITION_PROTO3\",\n                    \"edition_defaults.value\": \"OPEN\"\n                  }\n                },\n                \"repeatedFieldEncoding\": {\n                  \"type\": \"RepeatedFieldEncoding\",\n                  \"id\": 3,\n                  \"options\": {\n                    \"retention\": \"RETENTION_RUNTIME\",\n                    \"targets\": \"TARGET_TYPE_FILE\",\n                    \"feature_support.edition_introduced\": \"EDITION_2023\",\n                    \"edition_defaults.edition\": \"EDITION_PROTO3\",\n                    \"edition_defaults.value\": \"PACKED\"\n                  }\n                },\n                \"utf8Validation\": {\n                  \"type\": \"Utf8Validation\",\n                  \"id\": 4,\n                  \"options\": {\n                    \"retention\": \"RETENTION_RUNTIME\",\n                    \"targets\": \"TARGET_TYPE_FILE\",\n                    \"feature_support.edition_introduced\": \"EDITION_2023\",\n                    \"edition_defaults.edition\": \"EDITION_PROTO3\",\n                    \"edition_defaults.value\": \"VERIFY\"\n                  }\n                },\n                \"messageEncoding\": {\n                  \"type\": \"MessageEncoding\",\n                  \"id\": 5,\n                  \"options\": {\n                    \"retention\": \"RETENTION_RUNTIME\",\n                    \"targets\": \"TARGET_TYPE_FILE\",\n                    \"feature_support.edition_introduced\": \"EDITION_2023\",\n                    \"edition_defaults.edition\": \"EDITION_LEGACY\",\n                    \"edition_defaults.value\": \"LENGTH_PREFIXED\"\n                  }\n                },\n                \"jsonFormat\": {\n                  \"type\": \"JsonFormat\",\n                  \"id\": 6,\n                  \"options\": {\n                    \"retention\": \"RETENTION_RUNTIME\",\n                    \"targets\": \"TARGET_TYPE_FILE\",\n                    \"feature_support.edition_introduced\": \"EDITION_2023\",\n                    \"edition_defaults.edition\": \"EDITION_PROTO3\",\n                    \"edition_defaults.value\": \"ALLOW\"\n                  }\n                },\n                \"enforceNamingStyle\": {\n                  \"type\": \"EnforceNamingStyle\",\n                  \"id\": 7,\n                  \"options\": {\n                    \"retention\": \"RETENTION_SOURCE\",\n                    \"targets\": \"TARGET_TYPE_METHOD\",\n                    \"feature_support.edition_introduced\": \"EDITION_2024\",\n                    \"edition_defaults.edition\": \"EDITION_2024\",\n                    \"edition_defaults.value\": \"STYLE2024\"\n                  }\n                },\n                \"defaultSymbolVisibility\": {\n                  \"type\": \"VisibilityFeature.DefaultSymbolVisibility\",\n                  \"id\": 8,\n                  \"options\": {\n                    \"retention\": \"RETENTION_SOURCE\",\n                    \"targets\": \"TARGET_TYPE_FILE\",\n                    \"feature_support.edition_introduced\": \"EDITION_2024\",\n                    \"edition_defaults.edition\": \"EDITION_2024\",\n                    \"edition_defaults.value\": \"EXPORT_TOP_LEVEL\"\n                  }\n                }\n              },\n              \"extensions\": [\n                [\n                  1000,\n                  9994\n                ],\n                [\n                  9995,\n                  9999\n                ],\n                [\n                  10000,\n                  10000\n                ]\n              ],\n              \"reserved\": [\n                [\n                  999,\n                  999\n                ]\n              ],\n              \"nested\": {\n                \"FieldPresence\": {\n                  \"values\": {\n                    \"FIELD_PRESENCE_UNKNOWN\": 0,\n                    \"EXPLICIT\": 1,\n                    \"IMPLICIT\": 2,\n                    \"LEGACY_REQUIRED\": 3\n                  }\n                },\n                \"EnumType\": {\n                  \"values\": {\n                    \"ENUM_TYPE_UNKNOWN\": 0,\n                    \"OPEN\": 1,\n                    \"CLOSED\": 2\n                  }\n                },\n                \"RepeatedFieldEncoding\": {\n                  \"values\": {\n                    \"REPEATED_FIELD_ENCODING_UNKNOWN\": 0,\n                    \"PACKED\": 1,\n                    \"EXPANDED\": 2\n                  }\n                },\n                \"Utf8Validation\": {\n                  \"values\": {\n                    \"UTF8_VALIDATION_UNKNOWN\": 0,\n                    \"VERIFY\": 2,\n                    \"NONE\": 3\n                  }\n                },\n                \"MessageEncoding\": {\n                  \"values\": {\n                    \"MESSAGE_ENCODING_UNKNOWN\": 0,\n                    \"LENGTH_PREFIXED\": 1,\n                    \"DELIMITED\": 2\n                  }\n                },\n                \"JsonFormat\": {\n                  \"values\": {\n                    \"JSON_FORMAT_UNKNOWN\": 0,\n                    \"ALLOW\": 1,\n                    \"LEGACY_BEST_EFFORT\": 2\n                  }\n                },\n                \"EnforceNamingStyle\": {\n                  \"values\": {\n                    \"ENFORCE_NAMING_STYLE_UNKNOWN\": 0,\n                    \"STYLE2024\": 1,\n                    \"STYLE_LEGACY\": 2\n                  }\n                },\n                \"VisibilityFeature\": {\n                  \"fields\": {},\n                  \"reserved\": [\n                    [\n                      1,\n                      536870911\n                    ]\n                  ],\n                  \"nested\": {\n                    \"DefaultSymbolVisibility\": {\n                      \"values\": {\n                        \"DEFAULT_SYMBOL_VISIBILITY_UNKNOWN\": 0,\n                        \"EXPORT_ALL\": 1,\n                        \"EXPORT_TOP_LEVEL\": 2,\n                        \"LOCAL_ALL\": 3,\n                        \"STRICT\": 4\n                      }\n                    }\n                  }\n                }\n              }\n            },\n            \"FeatureSetDefaults\": {\n              \"edition\": \"proto2\",\n              \"fields\": {\n                \"defaults\": {\n                  \"rule\": \"repeated\",\n                  \"type\": \"FeatureSetEditionDefault\",\n                  \"id\": 1\n                },\n                \"minimumEdition\": {\n                  \"type\": \"Edition\",\n                  \"id\": 4\n                },\n                \"maximumEdition\": {\n                  \"type\": \"Edition\",\n                  \"id\": 5\n                }\n              },\n              \"nested\": {\n                \"FeatureSetEditionDefault\": {\n                  \"fields\": {\n                    \"edition\": {\n                      \"type\": \"Edition\",\n                      \"id\": 3\n                    },\n                    \"overridableFeatures\": {\n                      \"type\": \"FeatureSet\",\n                      \"id\": 4\n                    },\n                    \"fixedFeatures\": {\n                      \"type\": \"FeatureSet\",\n                      \"id\": 5\n                    }\n                  },\n                  \"reserved\": [\n                    [\n                      1,\n                      1\n                    ],\n                    [\n                      2,\n                      2\n                    ],\n                    \"features\"\n                  ]\n                }\n              }\n            },\n            \"SourceCodeInfo\": {\n              \"edition\": \"proto2\",\n              \"fields\": {\n                \"location\": {\n                  \"rule\": \"repeated\",\n                  \"type\": \"Location\",\n                  \"id\": 1\n                }\n              },\n              \"extensions\": [\n                [\n                  536000000,\n                  536000000\n                ]\n              ],\n              \"nested\": {\n                \"Location\": {\n                  \"fields\": {\n                    \"path\": {\n                      \"rule\": \"repeated\",\n                      \"type\": \"int32\",\n                      \"id\": 1,\n                      \"options\": {\n                        \"packed\": true\n                      }\n                    },\n                    \"span\": {\n                      \"rule\": \"repeated\",\n                      \"type\": \"int32\",\n                      \"id\": 2,\n                      \"options\": {\n                        \"packed\": true\n                      }\n                    },\n                    \"leadingComments\": {\n                      \"type\": \"string\",\n                      \"id\": 3\n                    },\n                    \"trailingComments\": {\n                      \"type\": \"string\",\n                      \"id\": 4\n                    },\n                    \"leadingDetachedComments\": {\n                      \"rule\": \"repeated\",\n                      \"type\": \"string\",\n                      \"id\": 6\n                    }\n                  }\n                }\n              }\n            },\n            \"GeneratedCodeInfo\": {\n              \"edition\": \"proto2\",\n              \"fields\": {\n                \"annotation\": {\n                  \"rule\": \"repeated\",\n                  \"type\": \"Annotation\",\n                  \"id\": 1\n                }\n              },\n              \"nested\": {\n                \"Annotation\": {\n                  \"fields\": {\n                    \"path\": {\n                      \"rule\": \"repeated\",\n                      \"type\": \"int32\",\n                      \"id\": 1,\n                      \"options\": {\n                        \"packed\": true\n                      }\n                    },\n                    \"sourceFile\": {\n                      \"type\": \"string\",\n                      \"id\": 2\n                    },\n                    \"begin\": {\n                      \"type\": \"int32\",\n                      \"id\": 3\n                    },\n                    \"end\": {\n                      \"type\": \"int32\",\n                      \"id\": 4\n                    },\n                    \"semantic\": {\n                      \"type\": \"Semantic\",\n                      \"id\": 5\n                    }\n                  },\n                  \"nested\": {\n                    \"Semantic\": {\n                      \"values\": {\n                        \"NONE\": 0,\n                        \"SET\": 1,\n                        \"ALIAS\": 2\n                      }\n                    }\n                  }\n                }\n              }\n            },\n            \"SymbolVisibility\": {\n              \"edition\": \"proto2\",\n              \"values\": {\n                \"VISIBILITY_UNSET\": 0,\n                \"VISIBILITY_LOCAL\": 1,\n                \"VISIBILITY_EXPORT\": 2\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n}", "\"use strict\";\nvar $protobuf = require(\"../..\");\nmodule.exports = exports = $protobuf.descriptor = $protobuf.Root.fromJSON(require(\"../../google/protobuf/descriptor.json\")).lookup(\".google.protobuf\");\n\nvar Namespace = $protobuf.Namespace,\n    Root      = $protobuf.Root,\n    Enum      = $protobuf.Enum,\n    Type      = $protobuf.Type,\n    Field     = $protobuf.Field,\n    MapField  = $protobuf.MapField,\n    OneOf     = $protobuf.OneOf,\n    Service   = $protobuf.Service,\n    Method    = $protobuf.Method;\n\n// --- Root ---\n\n/**\n * Properties of a FileDescriptorSet message.\n * @interface IFileDescriptorSet\n * @property {IFileDescriptorProto[]} file Files\n */\n\n/**\n * Properties of a FileDescriptorProto message.\n * @interface IFileDescriptorProto\n * @property {string} [name] File name\n * @property {string} [package] Package\n * @property {*} [dependency] Not supported\n * @property {*} [publicDependency] Not supported\n * @property {*} [weakDependency] Not supported\n * @property {IDescriptorProto[]} [messageType] Nested message types\n * @property {IEnumDescriptorProto[]} [enumType] Nested enums\n * @property {IServiceDescriptorProto[]} [service] Nested services\n * @property {IFieldDescriptorProto[]} [extension] Nested extension fields\n * @property {IFileOptions} [options] Options\n * @property {*} [sourceCodeInfo] Not supported\n * @property {string} [syntax=\"proto2\"] Syntax\n * @property {IEdition} [edition] Edition\n */\n\n/**\n * Values of the Edition enum.\n * @typedef IEdition\n * @type {number}\n * @property {number} EDITION_UNKNOWN=0\n * @property {number} EDITION_LEGACY=900\n * @property {number} EDITION_PROTO2=998\n * @property {number} EDITION_PROTO3=999\n * @property {number} EDITION_2023=1000\n * @property {number} EDITION_2024=1001\n * @property {number} EDITION_1_TEST_ONLY=1\n * @property {number} EDITION_2_TEST_ONLY=2\n * @property {number} EDITION_99997_TEST_ONLY=99997\n * @property {number} EDITION_99998_TEST_ONLY=99998\n * @property {number} EDITION_99998_TEST_ONLY=99999\n * @property {number} EDITION_MAX=2147483647\n */\n\n/**\n * Properties of a FileOptions message.\n * @interface IFileOptions\n * @property {string} [javaPackage]\n * @property {string} [javaOuterClassname]\n * @property {boolean} [javaMultipleFiles]\n * @property {boolean} [javaGenerateEqualsAndHash]\n * @property {boolean} [javaStringCheckUtf8]\n * @property {IFileOptionsOptimizeMode} [optimizeFor=1]\n * @property {string} [goPackage]\n * @property {boolean} [ccGenericServices]\n * @property {boolean} [javaGenericServices]\n * @property {boolean} [pyGenericServices]\n * @property {boolean} [deprecated]\n * @property {boolean} [ccEnableArenas]\n * @property {string} [objcClassPrefix]\n * @property {string} [csharpNamespace]\n */\n\n/**\n * Values of he FileOptions.OptimizeMode enum.\n * @typedef IFileOptionsOptimizeMode\n * @type {number}\n * @property {number} SPEED=1\n * @property {number} CODE_SIZE=2\n * @property {number} LITE_RUNTIME=3\n */\n\n/**\n * Creates a root from a descriptor set.\n * @param {IFileDescriptorSet|Reader|Uint8Array} descriptor Descriptor\n * @returns {Root} Root instance\n */\nRoot.fromDescriptor = function fromDescriptor(descriptor) {\n\n    // Decode the descriptor message if specified as a buffer:\n    if (typeof descriptor.length === \"number\")\n        descriptor = exports.FileDescriptorSet.decode(descriptor);\n\n    var root = new Root();\n\n    if (descriptor.file) {\n        var fileDescriptor,\n            filePackage;\n        for (var j = 0, i; j < descriptor.file.length; ++j) {\n            filePackage = root;\n            if ((fileDescriptor = descriptor.file[j])[\"package\"] && fileDescriptor[\"package\"].length)\n                filePackage = root.define(fileDescriptor[\"package\"]);\n            var edition = editionFromDescriptor(fileDescriptor);\n            if (fileDescriptor.name && fileDescriptor.name.length)\n                root.files.push(filePackage.filename = fileDescriptor.name);\n            if (fileDescriptor.messageType)\n                for (i = 0; i < fileDescriptor.messageType.length; ++i)\n                    filePackage.add(Type.fromDescriptor(fileDescriptor.messageType[i], edition));\n            if (fileDescriptor.enumType)\n                for (i = 0; i < fileDescriptor.enumType.length; ++i)\n                    filePackage.add(Enum.fromDescriptor(fileDescriptor.enumType[i], edition));\n            if (fileDescriptor.extension)\n                for (i = 0; i < fileDescriptor.extension.length; ++i)\n                    filePackage.add(Field.fromDescriptor(fileDescriptor.extension[i], edition));\n            if (fileDescriptor.service)\n                for (i = 0; i < fileDescriptor.service.length; ++i)\n                    filePackage.add(Service.fromDescriptor(fileDescriptor.service[i], edition));\n            var opts = fromDescriptorOptions(fileDescriptor.options, exports.FileOptions);\n            if (opts) {\n                var ks = Object.keys(opts);\n                for (i = 0; i < ks.length; ++i)\n                    filePackage.setOption(ks[i], opts[ks[i]]);\n            }\n        }\n    }\n\n    return root.resolveAll();\n};\n\n/**\n * Converts a root to a descriptor set.\n * @returns {Message<IFileDescriptorSet>} Descriptor\n * @param {string} [edition=\"proto2\"] The syntax or edition to use\n */\nRoot.prototype.toDescriptor = function toDescriptor(edition) {\n    var set = exports.FileDescriptorSet.create();\n    Root_toDescriptorRecursive(this, set.file, edition);\n    return set;\n};\n\n// Traverses a namespace and assembles the descriptor set\nfunction Root_toDescriptorRecursive(ns, files, edition) {\n\n    // Create a new file\n    var file = exports.FileDescriptorProto.create({ name: ns.filename || (ns.fullName.substring(1).replace(/\\./g, \"_\") || \"root\") + \".proto\" });\n    editionToDescriptor(edition, file);\n    if (!(ns instanceof Root))\n        file[\"package\"] = ns.fullName.substring(1);\n\n    // Add nested types\n    for (var i = 0, nested; i < ns.nestedArray.length; ++i)\n        if ((nested = ns._nestedArray[i]) instanceof Type)\n            file.messageType.push(nested.toDescriptor(edition));\n        else if (nested instanceof Enum)\n            file.enumType.push(nested.toDescriptor());\n        else if (nested instanceof Field)\n            file.extension.push(nested.toDescriptor(edition));\n        else if (nested instanceof Service)\n            file.service.push(nested.toDescriptor());\n        else if (nested instanceof /* plain */ Namespace)\n            Root_toDescriptorRecursive(nested, files, edition); // requires new file\n\n    // Keep package-level options\n    file.options = toDescriptorOptions(ns.options, exports.FileOptions);\n\n    // And keep the file only if there is at least one nested object\n    if (file.messageType.length + file.enumType.length + file.extension.length + file.service.length)\n        files.push(file);\n}\n\n// --- Type ---\n\n/**\n * Properties of a DescriptorProto message.\n * @interface IDescriptorProto\n * @property {string} [name] Message type name\n * @property {IFieldDescriptorProto[]} [field] Fields\n * @property {IFieldDescriptorProto[]} [extension] Extension fields\n * @property {IDescriptorProto[]} [nestedType] Nested message types\n * @property {IEnumDescriptorProto[]} [enumType] Nested enums\n * @property {IDescriptorProtoExtensionRange[]} [extensionRange] Extension ranges\n * @property {IOneofDescriptorProto[]} [oneofDecl] Oneofs\n * @property {IMessageOptions} [options] Not supported\n * @property {IDescriptorProtoReservedRange[]} [reservedRange] Reserved ranges\n * @property {string[]} [reservedName] Reserved names\n */\n\n/**\n * Properties of a MessageOptions message.\n * @interface IMessageOptions\n * @property {boolean} [mapEntry=false] Whether this message is a map entry\n */\n\n/**\n * Properties of an ExtensionRange message.\n * @interface IDescriptorProtoExtensionRange\n * @property {number} [start] Start field id\n * @property {number} [end] End field id\n */\n\n/**\n * Properties of a ReservedRange message.\n * @interface IDescriptorProtoReservedRange\n * @property {number} [start] Start field id\n * @property {number} [end] End field id\n */\n\nvar unnamedMessageIndex = 0;\n\n/**\n * Creates a type from a descriptor.\n *\n * Warning: this is not safe to use with editions protos, since it discards relevant file context.\n *\n * @param {IDescriptorProto|Reader|Uint8Array} descriptor Descriptor\n * @param {string} [edition=\"proto2\"] The syntax or edition to use\n * @param {boolean} [nested=false] Whether or not this is a nested object\n * @returns {Type} Type instance\n */\nType.fromDescriptor = function fromDescriptor(descriptor, edition, nested) {\n    // Decode the descriptor message if specified as a buffer:\n    if (typeof descriptor.length === \"number\")\n        descriptor = exports.DescriptorProto.decode(descriptor);\n\n    // Create the message type\n    var type = new Type(descriptor.name.length ? descriptor.name : \"Type\" + unnamedMessageIndex++, fromDescriptorOptions(descriptor.options, exports.MessageOptions)),\n        i;\n\n    if (!nested)\n        type._edition = edition;\n\n    /* Oneofs */ if (descriptor.oneofDecl)\n        for (i = 0; i < descriptor.oneofDecl.length; ++i)\n            type.add(OneOf.fromDescriptor(descriptor.oneofDecl[i]));\n    /* Fields */ if (descriptor.field)\n        for (i = 0; i < descriptor.field.length; ++i) {\n            var field = Field.fromDescriptor(descriptor.field[i], edition, true);\n            type.add(field);\n            if (descriptor.field[i].hasOwnProperty(\"oneofIndex\")) // eslint-disable-line no-prototype-builtins\n                type.oneofsArray[descriptor.field[i].oneofIndex].add(field);\n        }\n    /* Extension fields */ if (descriptor.extension)\n        for (i = 0; i < descriptor.extension.length; ++i)\n            type.add(Field.fromDescriptor(descriptor.extension[i], edition, true));\n    /* Nested types */ if (descriptor.nestedType)\n        for (i = 0; i < descriptor.nestedType.length; ++i) {\n            type.add(Type.fromDescriptor(descriptor.nestedType[i], edition, true));\n            if (descriptor.nestedType[i].options && descriptor.nestedType[i].options.mapEntry)\n                type.setOption(\"map_entry\", true);\n        }\n    /* Nested enums */ if (descriptor.enumType)\n        for (i = 0; i < descriptor.enumType.length; ++i)\n            type.add(Enum.fromDescriptor(descriptor.enumType[i], edition, true));\n    /* Extension ranges */ if (descriptor.extensionRange && descriptor.extensionRange.length) {\n        type.extensions = [];\n        for (i = 0; i < descriptor.extensionRange.length; ++i)\n            type.extensions.push([ descriptor.extensionRange[i].start, descriptor.extensionRange[i].end ]);\n    }\n    /* Reserved... */ if (descriptor.reservedRange && descriptor.reservedRange.length || descriptor.reservedName && descriptor.reservedName.length) {\n        type.reserved = [];\n        /* Ranges */ if (descriptor.reservedRange)\n            for (i = 0; i < descriptor.reservedRange.length; ++i)\n                type.reserved.push([ descriptor.reservedRange[i].start, descriptor.reservedRange[i].end ]);\n        /* Names */ if (descriptor.reservedName)\n            for (i = 0; i < descriptor.reservedName.length; ++i)\n                type.reserved.push(descriptor.reservedName[i]);\n    }\n\n    return type;\n};\n\n/**\n * Converts a type to a descriptor.\n * @returns {Message<IDescriptorProto>} Descriptor\n * @param {string} [edition=\"proto2\"] The syntax or edition to use\n */\nType.prototype.toDescriptor = function toDescriptor(edition) {\n    var descriptor = exports.DescriptorProto.create({ name: this.name }),\n        i;\n\n    /* Fields */ for (i = 0; i < this.fieldsArray.length; ++i) {\n        var fieldDescriptor;\n        descriptor.field.push(fieldDescriptor = this._fieldsArray[i].toDescriptor(edition));\n        if (this._fieldsArray[i] instanceof MapField) { // map fields are repeated FieldNameEntry\n            var keyType = toDescriptorType(this._fieldsArray[i].keyType, this._fieldsArray[i].resolvedKeyType, false),\n                valueType = toDescriptorType(this._fieldsArray[i].type, this._fieldsArray[i].resolvedType, false),\n                valueTypeName = valueType === /* type */ 11 || valueType === /* enum */ 14\n                    ? this._fieldsArray[i].resolvedType && shortname(this.parent, this._fieldsArray[i].resolvedType) || this._fieldsArray[i].type\n                    : undefined;\n            descriptor.nestedType.push(exports.DescriptorProto.create({\n                name: fieldDescriptor.typeName,\n                field: [\n                    exports.FieldDescriptorProto.create({ name: \"key\", number: 1, label: 1, type: keyType }), // can't reference a type or enum\n                    exports.FieldDescriptorProto.create({ name: \"value\", number: 2, label: 1, type: valueType, typeName: valueTypeName })\n                ],\n                options: exports.MessageOptions.create({ mapEntry: true })\n            }));\n        }\n    }\n    /* Oneofs */ for (i = 0; i < this.oneofsArray.length; ++i)\n        descriptor.oneofDecl.push(this._oneofsArray[i].toDescriptor());\n    /* Nested... */ for (i = 0; i < this.nestedArray.length; ++i) {\n        /* Extension fields */ if (this._nestedArray[i] instanceof Field)\n            descriptor.field.push(this._nestedArray[i].toDescriptor(edition));\n        /* Types */ else if (this._nestedArray[i] instanceof Type)\n            descriptor.nestedType.push(this._nestedArray[i].toDescriptor(edition));\n        /* Enums */ else if (this._nestedArray[i] instanceof Enum)\n            descriptor.enumType.push(this._nestedArray[i].toDescriptor());\n        // plain nested namespaces become packages instead in Root#toDescriptor\n    }\n    /* Extension ranges */ if (this.extensions)\n        for (i = 0; i < this.extensions.length; ++i)\n            descriptor.extensionRange.push(exports.DescriptorProto.ExtensionRange.create({ start: this.extensions[i][0], end: this.extensions[i][1] }));\n    /* Reserved... */ if (this.reserved)\n        for (i = 0; i < this.reserved.length; ++i)\n            /* Names */ if (typeof this.reserved[i] === \"string\")\n                descriptor.reservedName.push(this.reserved[i]);\n            /* Ranges */ else\n                descriptor.reservedRange.push(exports.DescriptorProto.ReservedRange.create({ start: this.reserved[i][0], end: this.reserved[i][1] }));\n\n    descriptor.options = toDescriptorOptions(this.options, exports.MessageOptions);\n\n    return descriptor;\n};\n\n// --- Field ---\n\n/**\n * Properties of a FieldDescriptorProto message.\n * @interface IFieldDescriptorProto\n * @property {string} [name] Field name\n * @property {number} [number] Field id\n * @property {IFieldDescriptorProtoLabel} [label] Field rule\n * @property {IFieldDescriptorProtoType} [type] Field basic type\n * @property {string} [typeName] Field type name\n * @property {string} [extendee] Extended type name\n * @property {string} [defaultValue] Literal default value\n * @property {number} [oneofIndex] Oneof index if part of a oneof\n * @property {*} [jsonName] Not supported\n * @property {IFieldOptions} [options] Field options\n */\n\n/**\n * Values of the FieldDescriptorProto.Label enum.\n * @typedef IFieldDescriptorProtoLabel\n * @type {number}\n * @property {number} LABEL_OPTIONAL=1\n * @property {number} LABEL_REQUIRED=2\n * @property {number} LABEL_REPEATED=3\n */\n\n/**\n * Values of the FieldDescriptorProto.Type enum.\n * @typedef IFieldDescriptorProtoType\n * @type {number}\n * @property {number} TYPE_DOUBLE=1\n * @property {number} TYPE_FLOAT=2\n * @property {number} TYPE_INT64=3\n * @property {number} TYPE_UINT64=4\n * @property {number} TYPE_INT32=5\n * @property {number} TYPE_FIXED64=6\n * @property {number} TYPE_FIXED32=7\n * @property {number} TYPE_BOOL=8\n * @property {number} TYPE_STRING=9\n * @property {number} TYPE_GROUP=10\n * @property {number} TYPE_MESSAGE=11\n * @property {number} TYPE_BYTES=12\n * @property {number} TYPE_UINT32=13\n * @property {number} TYPE_ENUM=14\n * @property {number} TYPE_SFIXED32=15\n * @property {number} TYPE_SFIXED64=16\n * @property {number} TYPE_SINT32=17\n * @property {number} TYPE_SINT64=18\n */\n\n/**\n * Properties of a FieldOptions message.\n * @interface IFieldOptions\n * @property {boolean} [packed] Whether packed or not (defaults to `false` for proto2 and `true` for proto3)\n * @property {IFieldOptionsJSType} [jstype] JavaScript value type (not used by protobuf.js)\n */\n\n/**\n * Values of the FieldOptions.JSType enum.\n * @typedef IFieldOptionsJSType\n * @type {number}\n * @property {number} JS_NORMAL=0\n * @property {number} JS_STRING=1\n * @property {number} JS_NUMBER=2\n */\n\n// copied here from parse.js\nvar numberRe = /^(?![eE])[0-9]*(?:\\.[0-9]*)?(?:[eE][+-]?[0-9]+)?$/;\n\n/**\n * Creates a field from a descriptor.\n *\n * Warning: this is not safe to use with editions protos, since it discards relevant file context.\n *\n * @param {IFieldDescriptorProto|Reader|Uint8Array} descriptor Descriptor\n * @param {string} [edition=\"proto2\"] The syntax or edition to use\n * @param {boolean} [nested=false] Whether or not this is a top-level object\n * @returns {Field} Field instance\n */\nField.fromDescriptor = function fromDescriptor(descriptor, edition, nested) {\n\n    // Decode the descriptor message if specified as a buffer:\n    if (typeof descriptor.length === \"number\")\n        descriptor = exports.DescriptorProto.decode(descriptor);\n\n    if (typeof descriptor.number !== \"number\")\n        throw Error(\"missing field id\");\n\n    // Rewire field type\n    var fieldType;\n    if (descriptor.typeName && descriptor.typeName.length)\n        fieldType = descriptor.typeName;\n    else\n        fieldType = fromDescriptorType(descriptor.type);\n\n    // Rewire field rule\n    var fieldRule;\n    switch (descriptor.label) {\n        // 0 is reserved for errors\n        case 1: fieldRule = undefined; break;\n        case 2: fieldRule = \"required\"; break;\n        case 3: fieldRule = \"repeated\"; break;\n        default: throw Error(\"illegal label: \" + descriptor.label);\n    }\n\n\tvar extendee = descriptor.extendee;\n\tif (descriptor.extendee !== undefined) {\n\t\textendee = extendee.length ? extendee : undefined;\n\t}\n    var field = new Field(\n        descriptor.name.length ? descriptor.name : \"field\" + descriptor.number,\n        descriptor.number,\n        fieldType,\n        fieldRule,\n        extendee\n    );\n\n    if (!nested)\n        field._edition = edition;\n\n    field.options = fromDescriptorOptions(descriptor.options, exports.FieldOptions);\n    if (descriptor.proto3_optional)\n        field.options.proto3_optional = true;\n\n    if (descriptor.defaultValue && descriptor.defaultValue.length) {\n        var defaultValue = descriptor.defaultValue;\n        switch (defaultValue) {\n            case \"true\": case \"TRUE\":\n                defaultValue = true;\n                break;\n            case \"false\": case \"FALSE\":\n                defaultValue = false;\n                break;\n            default:\n                var match = numberRe.exec(defaultValue);\n                if (match)\n                    defaultValue = parseInt(defaultValue); // eslint-disable-line radix\n                break;\n        }\n        field.setOption(\"default\", defaultValue);\n    }\n\n    if (packableDescriptorType(descriptor.type)) {\n        if (edition === \"proto3\") { // defaults to packed=true (internal preset is packed=true)\n            if (descriptor.options && !descriptor.options.packed)\n                field.setOption(\"packed\", false);\n        } else if ((!edition || edition === \"proto2\") && descriptor.options && descriptor.options.packed) // defaults to packed=false\n            field.setOption(\"packed\", true);\n    }\n\n    return field;\n};\n\n/**\n * Converts a field to a descriptor.\n * @returns {Message<IFieldDescriptorProto>} Descriptor\n * @param {string} [edition=\"proto2\"] The syntax or edition to use\n */\nField.prototype.toDescriptor = function toDescriptor(edition) {\n    var descriptor = exports.FieldDescriptorProto.create({ name: this.name, number: this.id });\n\n    if (this.map) {\n\n        descriptor.type = 11; // message\n        descriptor.typeName = $protobuf.util.ucFirst(this.name); // fieldName -> FieldNameEntry (built in Type#toDescriptor)\n        descriptor.label = 3; // repeated\n\n    } else {\n\n        // Rewire field type\n        switch (descriptor.type = toDescriptorType(this.type, this.resolve().resolvedType, this.delimited)) {\n            case 10: // group\n            case 11: // type\n            case 14: // enum\n                descriptor.typeName = this.resolvedType ? shortname(this.parent, this.resolvedType) : this.type;\n                break;\n        }\n\n        // Rewire field rule\n        if (this.rule === \"repeated\") {\n            descriptor.label = 3;\n        } else if (this.required && edition === \"proto2\") {\n            descriptor.label = 2;\n        } else {\n            descriptor.label = 1;\n        }\n    }\n\n    // Handle extension field\n    descriptor.extendee = this.extensionField ? this.extensionField.parent.fullName : this.extend;\n\n    // Handle part of oneof\n    if (this.partOf)\n        if ((descriptor.oneofIndex = this.parent.oneofsArray.indexOf(this.partOf)) < 0)\n            throw Error(\"missing oneof\");\n\n    if (this.options) {\n        descriptor.options = toDescriptorOptions(this.options, exports.FieldOptions);\n        if (this.options[\"default\"] != null)\n            descriptor.defaultValue = String(this.options[\"default\"]);\n        if (this.options.proto3_optional)\n            descriptor.proto3_optional = true;\n    }\n\n    if (edition === \"proto3\") { // defaults to packed=true\n        if (!this.packed)\n            (descriptor.options || (descriptor.options = exports.FieldOptions.create())).packed = false;\n    } else if ((!edition || edition === \"proto2\") && this.packed) // defaults to packed=false\n        (descriptor.options || (descriptor.options = exports.FieldOptions.create())).packed = true;\n\n    return descriptor;\n};\n\n// --- Enum ---\n\n/**\n * Properties of an EnumDescriptorProto message.\n * @interface IEnumDescriptorProto\n * @property {string} [name] Enum name\n * @property {IEnumValueDescriptorProto[]} [value] Enum values\n * @property {IEnumOptions} [options] Enum options\n */\n\n/**\n * Properties of an EnumValueDescriptorProto message.\n * @interface IEnumValueDescriptorProto\n * @property {string} [name] Name\n * @property {number} [number] Value\n * @property {*} [options] Not supported\n */\n\n/**\n * Properties of an EnumOptions message.\n * @interface IEnumOptions\n * @property {boolean} [allowAlias] Whether aliases are allowed\n * @property {boolean} [deprecated]\n */\n\nvar unnamedEnumIndex = 0;\n\n/**\n * Creates an enum from a descriptor.\n *\n * Warning: this is not safe to use with editions protos, since it discards relevant file context.\n *\n * @param {IEnumDescriptorProto|Reader|Uint8Array} descriptor Descriptor\n * @param {string} [edition=\"proto2\"] The syntax or edition to use\n * @param {boolean} [nested=false] Whether or not this is a top-level object\n * @returns {Enum} Enum instance\n */\nEnum.fromDescriptor = function fromDescriptor(descriptor, edition, nested) {\n\n    // Decode the descriptor message if specified as a buffer:\n    if (typeof descriptor.length === \"number\")\n        descriptor = exports.EnumDescriptorProto.decode(descriptor);\n\n    // Construct values object\n    var values = {};\n    if (descriptor.value)\n        for (var i = 0; i < descriptor.value.length; ++i) {\n            var name  = descriptor.value[i].name,\n                value = descriptor.value[i].number || 0;\n            values[name && name.length ? name : \"NAME\" + value] = value;\n        }\n\n    var enm = new Enum(\n        descriptor.name && descriptor.name.length ? descriptor.name : \"Enum\" + unnamedEnumIndex++,\n        values,\n        fromDescriptorOptions(descriptor.options, exports.EnumOptions)\n    );\n\n    if (!nested)\n        enm._edition = edition;\n\n    return enm;\n};\n\n/**\n * Converts an enum to a descriptor.\n * @returns {Message<IEnumDescriptorProto>} Descriptor\n */\nEnum.prototype.toDescriptor = function toDescriptor() {\n\n    // Values\n    var values = [];\n    for (var i = 0, ks = Object.keys(this.values); i < ks.length; ++i)\n        values.push(exports.EnumValueDescriptorProto.create({ name: ks[i], number: this.values[ks[i]] }));\n\n    return exports.EnumDescriptorProto.create({\n        name: this.name,\n        value: values,\n        options: toDescriptorOptions(this.options, exports.EnumOptions)\n    });\n};\n\n// --- OneOf ---\n\n/**\n * Properties of a OneofDescriptorProto message.\n * @interface IOneofDescriptorProto\n * @property {string} [name] Oneof name\n * @property {*} [options] Not supported\n */\n\nvar unnamedOneofIndex = 0;\n\n/**\n * Creates a oneof from a descriptor.\n *\n * Warning: this is not safe to use with editions protos, since it discards relevant file context.\n *\n * @param {IOneofDescriptorProto|Reader|Uint8Array} descriptor Descriptor\n * @returns {OneOf} OneOf instance\n */\nOneOf.fromDescriptor = function fromDescriptor(descriptor) {\n\n    // Decode the descriptor message if specified as a buffer:\n    if (typeof descriptor.length === \"number\")\n        descriptor = exports.OneofDescriptorProto.decode(descriptor);\n\n    return new OneOf(\n        // unnamedOneOfIndex is global, not per type, because we have no ref to a type here\n        descriptor.name && descriptor.name.length ? descriptor.name : \"oneof\" + unnamedOneofIndex++\n        // fromDescriptorOptions(descriptor.options, exports.OneofOptions) - only uninterpreted_option\n    );\n};\n\n/**\n * Converts a oneof to a descriptor.\n * @returns {Message<IOneofDescriptorProto>} Descriptor\n */\nOneOf.prototype.toDescriptor = function toDescriptor() {\n    return exports.OneofDescriptorProto.create({\n        name: this.name\n        // options: toDescriptorOptions(this.options, exports.OneofOptions) - only uninterpreted_option\n    });\n};\n\n// --- Service ---\n\n/**\n * Properties of a ServiceDescriptorProto message.\n * @interface IServiceDescriptorProto\n * @property {string} [name] Service name\n * @property {IMethodDescriptorProto[]} [method] Methods\n * @property {IServiceOptions} [options] Options\n */\n\n/**\n * Properties of a ServiceOptions message.\n * @interface IServiceOptions\n * @property {boolean} [deprecated]\n */\n\nvar unnamedServiceIndex = 0;\n\n/**\n * Creates a service from a descriptor.\n *\n * Warning: this is not safe to use with editions protos, since it discards relevant file context.\n *\n * @param {IServiceDescriptorProto|Reader|Uint8Array} descriptor Descriptor\n * @param {string} [edition=\"proto2\"] The syntax or edition to use\n * @param {boolean} [nested=false] Whether or not this is a top-level object\n * @returns {Service} Service instance\n */\nService.fromDescriptor = function fromDescriptor(descriptor, edition, nested) {\n\n    // Decode the descriptor message if specified as a buffer:\n    if (typeof descriptor.length === \"number\")\n        descriptor = exports.ServiceDescriptorProto.decode(descriptor);\n\n    var service = new Service(descriptor.name && descriptor.name.length ? descriptor.name : \"Service\" + unnamedServiceIndex++, fromDescriptorOptions(descriptor.options, exports.ServiceOptions));\n    if (!nested)\n        service._edition = edition;\n    if (descriptor.method)\n        for (var i = 0; i < descriptor.method.length; ++i)\n            service.add(Method.fromDescriptor(descriptor.method[i]));\n\n    return service;\n};\n\n/**\n * Converts a service to a descriptor.\n * @returns {Message<IServiceDescriptorProto>} Descriptor\n */\nService.prototype.toDescriptor = function toDescriptor() {\n\n    // Methods\n    var methods = [];\n    for (var i = 0; i < this.methodsArray.length; ++i)\n        methods.push(this._methodsArray[i].toDescriptor());\n\n    return exports.ServiceDescriptorProto.create({\n        name: this.name,\n        method: methods,\n        options: toDescriptorOptions(this.options, exports.ServiceOptions)\n    });\n};\n\n// --- Method ---\n\n/**\n * Properties of a MethodDescriptorProto message.\n * @interface IMethodDescriptorProto\n * @property {string} [name] Method name\n * @property {string} [inputType] Request type name\n * @property {string} [outputType] Response type name\n * @property {IMethodOptions} [options] Not supported\n * @property {boolean} [clientStreaming=false] Whether requests are streamed\n * @property {boolean} [serverStreaming=false] Whether responses are streamed\n */\n\n/**\n * Properties of a MethodOptions message.\n *\n * Warning: this is not safe to use with editions protos, since it discards relevant file context.\n *\n * @interface IMethodOptions\n * @property {boolean} [deprecated]\n */\n\nvar unnamedMethodIndex = 0;\n\n/**\n * Creates a method from a descriptor.\n * @param {IMethodDescriptorProto|Reader|Uint8Array} descriptor Descriptor\n * @returns {Method} Reflected method instance\n */\nMethod.fromDescriptor = function fromDescriptor(descriptor) {\n\n    // Decode the descriptor message if specified as a buffer:\n    if (typeof descriptor.length === \"number\")\n        descriptor = exports.MethodDescriptorProto.decode(descriptor);\n\n    return new Method(\n        // unnamedMethodIndex is global, not per service, because we have no ref to a service here\n        descriptor.name && descriptor.name.length ? descriptor.name : \"Method\" + unnamedMethodIndex++,\n        \"rpc\",\n        descriptor.inputType,\n        descriptor.outputType,\n        Boolean(descriptor.clientStreaming),\n        Boolean(descriptor.serverStreaming),\n        fromDescriptorOptions(descriptor.options, exports.MethodOptions)\n    );\n};\n\n/**\n * Converts a method to a descriptor.\n * @returns {Message<IMethodDescriptorProto>} Descriptor\n */\nMethod.prototype.toDescriptor = function toDescriptor() {\n    return exports.MethodDescriptorProto.create({\n        name: this.name,\n        inputType: this.resolvedRequestType ? this.resolvedRequestType.fullName : this.requestType,\n        outputType: this.resolvedResponseType ? this.resolvedResponseType.fullName : this.responseType,\n        clientStreaming: this.requestStream,\n        serverStreaming: this.responseStream,\n        options: toDescriptorOptions(this.options, exports.MethodOptions)\n    });\n};\n\n// --- utility ---\n\n// Converts a descriptor type to a protobuf.js basic type\nfunction fromDescriptorType(type) {\n    switch (type) {\n        // 0 is reserved for errors\n        case 1: return \"double\";\n        case 2: return \"float\";\n        case 3: return \"int64\";\n        case 4: return \"uint64\";\n        case 5: return \"int32\";\n        case 6: return \"fixed64\";\n        case 7: return \"fixed32\";\n        case 8: return \"bool\";\n        case 9: return \"string\";\n        case 12: return \"bytes\";\n        case 13: return \"uint32\";\n        case 15: return \"sfixed32\";\n        case 16: return \"sfixed64\";\n        case 17: return \"sint32\";\n        case 18: return \"sint64\";\n    }\n    throw Error(\"illegal type: \" + type);\n}\n\n// Tests if a descriptor type is packable\nfunction packableDescriptorType(type) {\n    switch (type) {\n        case 1: // double\n        case 2: // float\n        case 3: // int64\n        case 4: // uint64\n        case 5: // int32\n        case 6: // fixed64\n        case 7: // fixed32\n        case 8: // bool\n        case 13: // uint32\n        case 14: // enum (!)\n        case 15: // sfixed32\n        case 16: // sfixed64\n        case 17: // sint32\n        case 18: // sint64\n            return true;\n    }\n    return false;\n}\n\n// Converts a protobuf.js basic type to a descriptor type\nfunction toDescriptorType(type, resolvedType, delimited) {\n    switch (type) {\n        // 0 is reserved for errors\n        case \"double\": return 1;\n        case \"float\": return 2;\n        case \"int64\": return 3;\n        case \"uint64\": return 4;\n        case \"int32\": return 5;\n        case \"fixed64\": return 6;\n        case \"fixed32\": return 7;\n        case \"bool\": return 8;\n        case \"string\": return 9;\n        case \"bytes\": return 12;\n        case \"uint32\": return 13;\n        case \"sfixed32\": return 15;\n        case \"sfixed64\": return 16;\n        case \"sint32\": return 17;\n        case \"sint64\": return 18;\n    }\n    if (resolvedType instanceof Enum)\n        return 14;\n    if (resolvedType instanceof Type)\n        return delimited ? 10 : 11;\n    throw Error(\"illegal type: \" + type);\n}\n\nfunction fromDescriptorOptionsRecursive(obj, type) {\n    var val = {};\n    for (var i = 0, field, key; i < type.fieldsArray.length; ++i) {\n        if ((key = (field = type._fieldsArray[i]).name) === \"uninterpretedOption\") continue;\n        if (!Object.prototype.hasOwnProperty.call(obj, key)) continue;\n\n        var newKey = underScore(key);\n        if (field.resolvedType instanceof Type) {\n            val[newKey] = fromDescriptorOptionsRecursive(obj[key], field.resolvedType);\n        } else if(field.resolvedType instanceof Enum) {\n            val[newKey] = field.resolvedType.valuesById[obj[key]];\n        } else {\n            val[newKey] = obj[key];\n        }\n    }\n    return val;\n}\n\n// Converts descriptor options to an options object\nfunction fromDescriptorOptions(options, type) {\n    if (!options)\n        return undefined;\n    return fromDescriptorOptionsRecursive(type.toObject(options), type);\n}\n\nfunction toDescriptorOptionsRecursive(obj, type) {\n    var val = {};\n    var keys = Object.keys(obj);\n    for (var i = 0; i < keys.length; ++i) {\n        var key = keys[i];\n        var newKey = $protobuf.util.camelCase(key);\n        if (!Object.prototype.hasOwnProperty.call(type.fields, newKey)) continue;\n        var field = type.fields[newKey];\n        if (field.resolvedType instanceof Type) {\n            val[newKey] = toDescriptorOptionsRecursive(obj[key], field.resolvedType);\n        } else {\n            val[newKey] = obj[key];\n        }\n        if (field.repeated && !Array.isArray(val[newKey])) {\n            val[newKey] = [val[newKey]];\n        }\n    }\n    return val;\n}\n\n// Converts an options object to descriptor options\nfunction toDescriptorOptions(options, type) {\n    if (!options)\n        return undefined;\n    return type.fromObject(toDescriptorOptionsRecursive(options, type));\n}\n\n// Calculates the shortest relative path from `from` to `to`.\nfunction shortname(from, to) {\n    var fromPath = from.fullName.split(\".\"),\n        toPath = to.fullName.split(\".\"),\n        i = 0,\n        j = 0,\n        k = toPath.length - 1;\n    if (!(from instanceof Root) && to instanceof Namespace)\n        while (i < fromPath.length && j < k && fromPath[i] === toPath[j]) {\n            var other = to.lookup(fromPath[i++], true);\n            if (other !== null && other !== to)\n                break;\n            ++j;\n        }\n    else\n        for (; i < fromPath.length && j < k && fromPath[i] === toPath[j]; ++i, ++j);\n    return toPath.slice(j).join(\".\");\n}\n\n// copied here from cli/targets/proto.js\nfunction underScore(str) {\n    return str.substring(0,1)\n         + str.substring(1)\n               .replace(/([A-Z])(?=[a-z]|$)/g, function($0, $1) { return \"_\" + $1.toLowerCase(); });\n}\n\nfunction editionFromDescriptor(fileDescriptor) {\n    if (fileDescriptor.syntax === \"editions\") {\n        switch(fileDescriptor.edition) {\n            case exports.Edition.EDITION_2023:\n                return \"2023\";\n            default:\n                throw new Error(\"Unsupported edition \" + fileDescriptor.edition);\n        }\n    }\n    if (fileDescriptor.syntax === \"proto3\") {\n        return \"proto3\";\n    }\n    return \"proto2\";\n}\n\nfunction editionToDescriptor(edition, fileDescriptor) {\n    if (!edition) return;\n    if (edition === \"proto2\" || edition === \"proto3\") {\n        fileDescriptor.syntax = edition;\n    } else {\n        fileDescriptor.syntax = \"editions\";\n        switch(edition) {\n            case \"2023\":\n                fileDescriptor.edition = exports.Edition.EDITION_2023;\n                break;\n            default:\n                throw new Error(\"Unsupported edition \" + edition);\n        }\n    }\n}\n\n// --- exports ---\n\n/**\n * Reflected file descriptor set.\n * @name FileDescriptorSet\n * @type {Type}\n * @const\n * @tstype $protobuf.Type\n */\n\n/**\n * Reflected file descriptor proto.\n * @name FileDescriptorProto\n * @type {Type}\n * @const\n * @tstype $protobuf.Type\n */\n\n/**\n * Reflected descriptor proto.\n * @name DescriptorProto\n * @type {Type}\n * @property {Type} ExtensionRange\n * @property {Type} ReservedRange\n * @const\n * @tstype $protobuf.Type & {\n *     ExtensionRange: $protobuf.Type,\n *     ReservedRange: $protobuf.Type\n * }\n */\n\n/**\n * Reflected field descriptor proto.\n * @name FieldDescriptorProto\n * @type {Type}\n * @property {Enum} Label\n * @property {Enum} Type\n * @const\n * @tstype $protobuf.Type & {\n *     Label: $protobuf.Enum,\n *     Type: $protobuf.Enum\n * }\n */\n\n/**\n * Reflected oneof descriptor proto.\n * @name OneofDescriptorProto\n * @type {Type}\n * @const\n * @tstype $protobuf.Type\n */\n\n/**\n * Reflected enum descriptor proto.\n * @name EnumDescriptorProto\n * @type {Type}\n * @const\n * @tstype $protobuf.Type\n */\n\n/**\n * Reflected service descriptor proto.\n * @name ServiceDescriptorProto\n * @type {Type}\n * @const\n * @tstype $protobuf.Type\n */\n\n/**\n * Reflected enum value descriptor proto.\n * @name EnumValueDescriptorProto\n * @type {Type}\n * @const\n * @tstype $protobuf.Type\n */\n\n/**\n * Reflected method descriptor proto.\n * @name MethodDescriptorProto\n * @type {Type}\n * @const\n * @tstype $protobuf.Type\n */\n\n/**\n * Reflected file options.\n * @name FileOptions\n * @type {Type}\n * @property {Enum} OptimizeMode\n * @const\n * @tstype $protobuf.Type & {\n *     OptimizeMode: $protobuf.Enum\n * }\n */\n\n/**\n * Reflected message options.\n * @name MessageOptions\n * @type {Type}\n * @const\n * @tstype $protobuf.Type\n */\n\n/**\n * Reflected field options.\n * @name FieldOptions\n * @type {Type}\n * @property {Enum} CType\n * @property {Enum} JSType\n * @const\n * @tstype $protobuf.Type & {\n *     CType: $protobuf.Enum,\n *     JSType: $protobuf.Enum\n * }\n */\n\n/**\n * Reflected oneof options.\n * @name OneofOptions\n * @type {Type}\n * @const\n * @tstype $protobuf.Type\n */\n\n/**\n * Reflected enum options.\n * @name EnumOptions\n * @type {Type}\n * @const\n * @tstype $protobuf.Type\n */\n\n/**\n * Reflected enum value options.\n * @name EnumValueOptions\n * @type {Type}\n * @const\n * @tstype $protobuf.Type\n */\n\n/**\n * Reflected service options.\n * @name ServiceOptions\n * @type {Type}\n * @const\n * @tstype $protobuf.Type\n */\n\n/**\n * Reflected method options.\n * @name MethodOptions\n * @type {Type}\n * @const\n * @tstype $protobuf.Type\n */\n\n/**\n * Reflected uninterpretet option.\n * @name UninterpretedOption\n * @type {Type}\n * @property {Type} NamePart\n * @const\n * @tstype $protobuf.Type & {\n *     NamePart: $protobuf.Type\n * }\n */\n\n/**\n * Reflected source code info.\n * @name SourceCodeInfo\n * @type {Type}\n * @property {Type} Location\n * @const\n * @tstype $protobuf.Type & {\n *     Location: $protobuf.Type\n * }\n */\n\n/**\n * Reflected generated code info.\n * @name GeneratedCodeInfo\n * @type {Type}\n * @property {Type} Annotation\n * @const\n * @tstype $protobuf.Type & {\n *     Annotation: $protobuf.Type\n * }\n */\n", "{\n  \"nested\": {\n    \"google\": {\n      \"nested\": {\n        \"protobuf\": {\n          \"nested\": {\n            \"Api\": {\n              \"fields\": {\n                \"name\": {\n                  \"type\": \"string\",\n                  \"id\": 1\n                },\n                \"methods\": {\n                  \"rule\": \"repeated\",\n                  \"type\": \"Method\",\n                  \"id\": 2\n                },\n                \"options\": {\n                  \"rule\": \"repeated\",\n                  \"type\": \"Option\",\n                  \"id\": 3\n                },\n                \"version\": {\n                  \"type\": \"string\",\n                  \"id\": 4\n                },\n                \"sourceContext\": {\n                  \"type\": \"SourceContext\",\n                  \"id\": 5\n                },\n                \"mixins\": {\n                  \"rule\": \"repeated\",\n                  \"type\": \"Mixin\",\n                  \"id\": 6\n                },\n                \"syntax\": {\n                  \"type\": \"Syntax\",\n                  \"id\": 7\n                }\n              }\n            },\n            \"Method\": {\n              \"fields\": {\n                \"name\": {\n                  \"type\": \"string\",\n                  \"id\": 1\n                },\n                \"requestTypeUrl\": {\n                  \"type\": \"string\",\n                  \"id\": 2\n                },\n                \"requestStreaming\": {\n                  \"type\": \"bool\",\n                  \"id\": 3\n                },\n                \"responseTypeUrl\": {\n                  \"type\": \"string\",\n                  \"id\": 4\n                },\n                \"responseStreaming\": {\n                  \"type\": \"bool\",\n                  \"id\": 5\n                },\n                \"options\": {\n                  \"rule\": \"repeated\",\n                  \"type\": \"Option\",\n                  \"id\": 6\n                },\n                \"syntax\": {\n                  \"type\": \"Syntax\",\n                  \"id\": 7\n                }\n              }\n            },\n            \"Mixin\": {\n              \"fields\": {\n                \"name\": {\n                  \"type\": \"string\",\n                  \"id\": 1\n                },\n                \"root\": {\n                  \"type\": \"string\",\n                  \"id\": 2\n                }\n              }\n            },\n            \"SourceContext\": {\n              \"fields\": {\n                \"fileName\": {\n                  \"type\": \"string\",\n                  \"id\": 1\n                }\n              }\n            },\n            \"Option\": {\n              \"fields\": {\n                \"name\": {\n                  \"type\": \"string\",\n                  \"id\": 1\n                },\n                \"value\": {\n                  \"type\": \"Any\",\n                  \"id\": 2\n                }\n              }\n            },\n            \"Syntax\": {\n              \"values\": {\n                \"SYNTAX_PROTO2\": 0,\n                \"SYNTAX_PROTO3\": 1\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n}", "{\n  \"nested\": {\n    \"google\": {\n      \"nested\": {\n        \"protobuf\": {\n          \"nested\": {\n            \"SourceContext\": {\n              \"fields\": {\n                \"fileName\": {\n                  \"type\": \"string\",\n                  \"id\": 1\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n}", "{\n  \"nested\": {\n    \"google\": {\n      \"nested\": {\n        \"protobuf\": {\n          \"nested\": {\n            \"Type\": {\n              \"fields\": {\n                \"name\": {\n                  \"type\": \"string\",\n                  \"id\": 1\n                },\n                \"fields\": {\n                  \"rule\": \"repeated\",\n                  \"type\": \"Field\",\n                  \"id\": 2\n                },\n                \"oneofs\": {\n                  \"rule\": \"repeated\",\n                  \"type\": \"string\",\n                  \"id\": 3\n                },\n                \"options\": {\n                  \"rule\": \"repeated\",\n                  \"type\": \"Option\",\n                  \"id\": 4\n                },\n                \"sourceContext\": {\n                  \"type\": \"SourceContext\",\n                  \"id\": 5\n                },\n                \"syntax\": {\n                  \"type\": \"Syntax\",\n                  \"id\": 6\n                }\n              }\n            },\n            \"Field\": {\n              \"fields\": {\n                \"kind\": {\n                  \"type\": \"Kind\",\n                  \"id\": 1\n                },\n                \"cardinality\": {\n                  \"type\": \"Cardinality\",\n                  \"id\": 2\n                },\n                \"number\": {\n                  \"type\": \"int32\",\n                  \"id\": 3\n                },\n                \"name\": {\n                  \"type\": \"string\",\n                  \"id\": 4\n                },\n                \"typeUrl\": {\n                  \"type\": \"string\",\n                  \"id\": 6\n                },\n                \"oneofIndex\": {\n                  \"type\": \"int32\",\n                  \"id\": 7\n                },\n                \"packed\": {\n                  \"type\": \"bool\",\n                  \"id\": 8\n                },\n                \"options\": {\n                  \"rule\": \"repeated\",\n                  \"type\": \"Option\",\n                  \"id\": 9\n                },\n                \"jsonName\": {\n                  \"type\": \"string\",\n                  \"id\": 10\n                },\n                \"defaultValue\": {\n                  \"type\": \"string\",\n                  \"id\": 11\n                }\n              },\n              \"nested\": {\n                \"Kind\": {\n                  \"values\": {\n                    \"TYPE_UNKNOWN\": 0,\n                    \"TYPE_DOUBLE\": 1,\n                    \"TYPE_FLOAT\": 2,\n                    \"TYPE_INT64\": 3,\n                    \"TYPE_UINT64\": 4,\n                    \"TYPE_INT32\": 5,\n                    \"TYPE_FIXED64\": 6,\n                    \"TYPE_FIXED32\": 7,\n                    \"TYPE_BOOL\": 8,\n                    \"TYPE_STRING\": 9,\n                    \"TYPE_GROUP\": 10,\n                    \"TYPE_MESSAGE\": 11,\n                    \"TYPE_BYTES\": 12,\n                    \"TYPE_UINT32\": 13,\n                    \"TYPE_ENUM\": 14,\n                    \"TYPE_SFIXED32\": 15,\n                    \"TYPE_SFIXED64\": 16,\n                    \"TYPE_SINT32\": 17,\n                    \"TYPE_SINT64\": 18\n                  }\n                },\n                \"Cardinality\": {\n                  \"values\": {\n                    \"CARDINALITY_UNKNOWN\": 0,\n                    \"CARDINALITY_OPTIONAL\": 1,\n                    \"CARDINALITY_REQUIRED\": 2,\n                    \"CARDINALITY_REPEATED\": 3\n                  }\n                }\n              }\n            },\n            \"Enum\": {\n              \"fields\": {\n                \"name\": {\n                  \"type\": \"string\",\n                  \"id\": 1\n                },\n                \"enumvalue\": {\n                  \"rule\": \"repeated\",\n                  \"type\": \"EnumValue\",\n                  \"id\": 2\n                },\n                \"options\": {\n                  \"rule\": \"repeated\",\n                  \"type\": \"Option\",\n                  \"id\": 3\n                },\n                \"sourceContext\": {\n                  \"type\": \"SourceContext\",\n                  \"id\": 4\n                },\n                \"syntax\": {\n                  \"type\": \"Syntax\",\n                  \"id\": 5\n                }\n              }\n            },\n            \"EnumValue\": {\n              \"fields\": {\n                \"name\": {\n                  \"type\": \"string\",\n                  \"id\": 1\n                },\n                \"number\": {\n                  \"type\": \"int32\",\n                  \"id\": 2\n                },\n                \"options\": {\n                  \"rule\": \"repeated\",\n                  \"type\": \"Option\",\n                  \"id\": 3\n                }\n              }\n            },\n            \"Option\": {\n              \"fields\": {\n                \"name\": {\n                  \"type\": \"string\",\n                  \"id\": 1\n                },\n                \"value\": {\n                  \"type\": \"Any\",\n                  \"id\": 2\n                }\n              }\n            },\n            \"Syntax\": {\n              \"values\": {\n                \"SYNTAX_PROTO2\": 0,\n                \"SYNTAX_PROTO3\": 1\n              }\n            },\n            \"Any\": {\n              \"fields\": {\n                \"type_url\": {\n                  \"type\": \"string\",\n                  \"id\": 1\n                },\n                \"value\": {\n                  \"type\": \"bytes\",\n                  \"id\": 2\n                }\n              }\n            },\n            \"SourceContext\": {\n              \"fields\": {\n                \"fileName\": {\n                  \"type\": \"string\",\n                  \"id\": 1\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n}", null, "// GENERATED FILE. DO NOT EDIT.\n(function (global, factory) {\n  function preferDefault(exports) {\n    return exports.default || exports;\n  }\n  if (typeof define === \"function\" && define.amd) {\n    define([], function () {\n      var exports = {};\n      factory(exports);\n      return preferDefault(exports);\n    });\n  } else if (typeof exports === \"object\") {\n    factory(exports);\n    if (typeof module === \"object\") module.exports = preferDefault(exports);\n  } else {\n    (function () {\n      var exports = {};\n      factory(exports);\n      global.Long = preferDefault(exports);\n    })();\n  }\n})(\n  typeof globalThis !== \"undefined\"\n    ? globalThis\n    : typeof self !== \"undefined\"\n      ? self\n      : this,\n  function (_exports) {\n    \"use strict\";\n\n    Object.defineProperty(_exports, \"__esModule\", {\n      value: true,\n    });\n    _exports.default = void 0;\n    /**\n     * @license\n     * Copyright 2009 The Closure Library Authors\n     * Copyright 2020 Daniel Wirtz / The long.js Authors.\n     *\n     * Licensed under the Apache License, Version 2.0 (the \"License\");\n     * you may not use this file except in compliance with the License.\n     * You may obtain a copy of the License at\n     *\n     *     http://www.apache.org/licenses/LICENSE-2.0\n     *\n     * Unless required by applicable law or agreed to in writing, software\n     * distributed under the License is distributed on an \"AS IS\" BASIS,\n     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n     * See the License for the specific language governing permissions and\n     * limitations under the License.\n     *\n     * SPDX-License-Identifier: Apache-2.0\n     */\n\n    // WebAssembly optimizations to do native i64 multiplication and divide\n    var wasm = null;\n    try {\n      wasm = new WebAssembly.Instance(\n        new WebAssembly.Module(\n          new Uint8Array([\n            // \\0asm\n            0, 97, 115, 109,\n            // version 1\n            1, 0, 0, 0,\n            // section \"type\"\n            1, 13, 2,\n            // 0, () => i32\n            96, 0, 1, 127,\n            // 1, (i32, i32, i32, i32) => i32\n            96, 4, 127, 127, 127, 127, 1, 127,\n            // section \"function\"\n            3, 7, 6,\n            // 0, type 0\n            0,\n            // 1, type 1\n            1,\n            // 2, type 1\n            1,\n            // 3, type 1\n            1,\n            // 4, type 1\n            1,\n            // 5, type 1\n            1,\n            // section \"global\"\n            6, 6, 1,\n            // 0, \"high\", mutable i32\n            127, 1, 65, 0, 11,\n            // section \"export\"\n            7, 50, 6,\n            // 0, \"mul\"\n            3, 109, 117, 108, 0, 1,\n            // 1, \"div_s\"\n            5, 100, 105, 118, 95, 115, 0, 2,\n            // 2, \"div_u\"\n            5, 100, 105, 118, 95, 117, 0, 3,\n            // 3, \"rem_s\"\n            5, 114, 101, 109, 95, 115, 0, 4,\n            // 4, \"rem_u\"\n            5, 114, 101, 109, 95, 117, 0, 5,\n            // 5, \"get_high\"\n            8, 103, 101, 116, 95, 104, 105, 103, 104, 0, 0,\n            // section \"code\"\n            10, 191, 1, 6,\n            // 0, \"get_high\"\n            4, 0, 35, 0, 11,\n            // 1, \"mul\"\n            36, 1, 1, 126, 32, 0, 173, 32, 1, 173, 66, 32, 134, 132, 32, 2, 173,\n            32, 3, 173, 66, 32, 134, 132, 126, 34, 4, 66, 32, 135, 167, 36, 0,\n            32, 4, 167, 11,\n            // 2, \"div_s\"\n            36, 1, 1, 126, 32, 0, 173, 32, 1, 173, 66, 32, 134, 132, 32, 2, 173,\n            32, 3, 173, 66, 32, 134, 132, 127, 34, 4, 66, 32, 135, 167, 36, 0,\n            32, 4, 167, 11,\n            // 3, \"div_u\"\n            36, 1, 1, 126, 32, 0, 173, 32, 1, 173, 66, 32, 134, 132, 32, 2, 173,\n            32, 3, 173, 66, 32, 134, 132, 128, 34, 4, 66, 32, 135, 167, 36, 0,\n            32, 4, 167, 11,\n            // 4, \"rem_s\"\n            36, 1, 1, 126, 32, 0, 173, 32, 1, 173, 66, 32, 134, 132, 32, 2, 173,\n            32, 3, 173, 66, 32, 134, 132, 129, 34, 4, 66, 32, 135, 167, 36, 0,\n            32, 4, 167, 11,\n            // 5, \"rem_u\"\n            36, 1, 1, 126, 32, 0, 173, 32, 1, 173, 66, 32, 134, 132, 32, 2, 173,\n            32, 3, 173, 66, 32, 134, 132, 130, 34, 4, 66, 32, 135, 167, 36, 0,\n            32, 4, 167, 11,\n          ]),\n        ),\n        {},\n      ).exports;\n    } catch {\n      // no wasm support :(\n    }\n\n    /**\n     * Constructs a 64 bit two's-complement integer, given its low and high 32 bit values as *signed* integers.\n     *  See the from* functions below for more convenient ways of constructing Longs.\n     * @exports Long\n     * @class A Long class for representing a 64 bit two's-complement integer value.\n     * @param {number} low The low (signed) 32 bits of the long\n     * @param {number} high The high (signed) 32 bits of the long\n     * @param {boolean=} unsigned Whether unsigned or not, defaults to signed\n     * @constructor\n     */\n    function Long(low, high, unsigned) {\n      /**\n       * The low 32 bits as a signed value.\n       * @type {number}\n       */\n      this.low = low | 0;\n\n      /**\n       * The high 32 bits as a signed value.\n       * @type {number}\n       */\n      this.high = high | 0;\n\n      /**\n       * Whether unsigned or not.\n       * @type {boolean}\n       */\n      this.unsigned = !!unsigned;\n    }\n\n    // The internal representation of a long is the two given signed, 32-bit values.\n    // We use 32-bit pieces because these are the size of integers on which\n    // Javascript performs bit-operations.  For operations like addition and\n    // multiplication, we split each number into 16 bit pieces, which can easily be\n    // multiplied within Javascript's floating-point representation without overflow\n    // or change in sign.\n    //\n    // In the algorithms below, we frequently reduce the negative case to the\n    // positive case by negating the input(s) and then post-processing the result.\n    // Note that we must ALWAYS check specially whether those values are MIN_VALUE\n    // (-2^63) because -MIN_VALUE == MIN_VALUE (since 2^63 cannot be represented as\n    // a positive number, it overflows back into a negative).  Not handling this\n    // case would often result in infinite recursion.\n    //\n    // Common constant values ZERO, ONE, NEG_ONE, etc. are defined below the from*\n    // methods on which they depend.\n\n    /**\n     * An indicator used to reliably determine if an object is a Long or not.\n     * @type {boolean}\n     * @const\n     * @private\n     */\n    Long.prototype.__isLong__;\n    Object.defineProperty(Long.prototype, \"__isLong__\", {\n      value: true,\n    });\n\n    /**\n     * @function\n     * @param {*} obj Object\n     * @returns {boolean}\n     * @inner\n     */\n    function isLong(obj) {\n      return (obj && obj[\"__isLong__\"]) === true;\n    }\n\n    /**\n     * @function\n     * @param {*} value number\n     * @returns {number}\n     * @inner\n     */\n    function ctz32(value) {\n      var c = Math.clz32(value & -value);\n      return value ? 31 - c : c;\n    }\n\n    /**\n     * Tests if the specified object is a Long.\n     * @function\n     * @param {*} obj Object\n     * @returns {boolean}\n     */\n    Long.isLong = isLong;\n\n    /**\n     * A cache of the Long representations of small integer values.\n     * @type {!Object}\n     * @inner\n     */\n    var INT_CACHE = {};\n\n    /**\n     * A cache of the Long representations of small unsigned integer values.\n     * @type {!Object}\n     * @inner\n     */\n    var UINT_CACHE = {};\n\n    /**\n     * @param {number} value\n     * @param {boolean=} unsigned\n     * @returns {!Long}\n     * @inner\n     */\n    function fromInt(value, unsigned) {\n      var obj, cachedObj, cache;\n      if (unsigned) {\n        value >>>= 0;\n        if ((cache = 0 <= value && value < 256)) {\n          cachedObj = UINT_CACHE[value];\n          if (cachedObj) return cachedObj;\n        }\n        obj = fromBits(value, 0, true);\n        if (cache) UINT_CACHE[value] = obj;\n        return obj;\n      } else {\n        value |= 0;\n        if ((cache = -128 <= value && value < 128)) {\n          cachedObj = INT_CACHE[value];\n          if (cachedObj) return cachedObj;\n        }\n        obj = fromBits(value, value < 0 ? -1 : 0, false);\n        if (cache) INT_CACHE[value] = obj;\n        return obj;\n      }\n    }\n\n    /**\n     * Returns a Long representing the given 32 bit integer value.\n     * @function\n     * @param {number} value The 32 bit integer in question\n     * @param {boolean=} unsigned Whether unsigned or not, defaults to signed\n     * @returns {!Long} The corresponding Long value\n     */\n    Long.fromInt = fromInt;\n\n    /**\n     * @param {number} value\n     * @param {boolean=} unsigned\n     * @returns {!Long}\n     * @inner\n     */\n    function fromNumber(value, unsigned) {\n      if (isNaN(value)) return unsigned ? UZERO : ZERO;\n      if (unsigned) {\n        if (value < 0) return UZERO;\n        if (value >= TWO_PWR_64_DBL) return MAX_UNSIGNED_VALUE;\n      } else {\n        if (value <= -TWO_PWR_63_DBL) return MIN_VALUE;\n        if (value + 1 >= TWO_PWR_63_DBL) return MAX_VALUE;\n      }\n      if (value < 0) return fromNumber(-value, unsigned).neg();\n      return fromBits(\n        value % TWO_PWR_32_DBL | 0,\n        (value / TWO_PWR_32_DBL) | 0,\n        unsigned,\n      );\n    }\n\n    /**\n     * Returns a Long representing the given value, provided that it is a finite number. Otherwise, zero is returned.\n     * @function\n     * @param {number} value The number in question\n     * @param {boolean=} unsigned Whether unsigned or not, defaults to signed\n     * @returns {!Long} The corresponding Long value\n     */\n    Long.fromNumber = fromNumber;\n\n    /**\n     * @param {number} lowBits\n     * @param {number} highBits\n     * @param {boolean=} unsigned\n     * @returns {!Long}\n     * @inner\n     */\n    function fromBits(lowBits, highBits, unsigned) {\n      return new Long(lowBits, highBits, unsigned);\n    }\n\n    /**\n     * Returns a Long representing the 64 bit integer that comes by concatenating the given low and high bits. Each is\n     *  assumed to use 32 bits.\n     * @function\n     * @param {number} lowBits The low 32 bits\n     * @param {number} highBits The high 32 bits\n     * @param {boolean=} unsigned Whether unsigned or not, defaults to signed\n     * @returns {!Long} The corresponding Long value\n     */\n    Long.fromBits = fromBits;\n\n    /**\n     * @function\n     * @param {number} base\n     * @param {number} exponent\n     * @returns {number}\n     * @inner\n     */\n    var pow_dbl = Math.pow; // Used 4 times (4*8 to 15+4)\n\n    /**\n     * @param {string} str\n     * @param {(boolean|number)=} unsigned\n     * @param {number=} radix\n     * @returns {!Long}\n     * @inner\n     */\n    function fromString(str, unsigned, radix) {\n      if (str.length === 0) throw Error(\"empty string\");\n      if (typeof unsigned === \"number\") {\n        // For goog.math.long compatibility\n        radix = unsigned;\n        unsigned = false;\n      } else {\n        unsigned = !!unsigned;\n      }\n      if (\n        str === \"NaN\" ||\n        str === \"Infinity\" ||\n        str === \"+Infinity\" ||\n        str === \"-Infinity\"\n      )\n        return unsigned ? UZERO : ZERO;\n      radix = radix || 10;\n      if (radix < 2 || 36 < radix) throw RangeError(\"radix\");\n      var p;\n      if ((p = str.indexOf(\"-\")) > 0) throw Error(\"interior hyphen\");\n      else if (p === 0) {\n        return fromString(str.substring(1), unsigned, radix).neg();\n      }\n\n      // Do several (8) digits each time through the loop, so as to\n      // minimize the calls to the very expensive emulated div.\n      var radixToPower = fromNumber(pow_dbl(radix, 8));\n      var result = ZERO;\n      for (var i = 0; i < str.length; i += 8) {\n        var size = Math.min(8, str.length - i),\n          value = parseInt(str.substring(i, i + size), radix);\n        if (size < 8) {\n          var power = fromNumber(pow_dbl(radix, size));\n          result = result.mul(power).add(fromNumber(value));\n        } else {\n          result = result.mul(radixToPower);\n          result = result.add(fromNumber(value));\n        }\n      }\n      result.unsigned = unsigned;\n      return result;\n    }\n\n    /**\n     * Returns a Long representation of the given string, written using the specified radix.\n     * @function\n     * @param {string} str The textual representation of the Long\n     * @param {(boolean|number)=} unsigned Whether unsigned or not, defaults to signed\n     * @param {number=} radix The radix in which the text is written (2-36), defaults to 10\n     * @returns {!Long} The corresponding Long value\n     */\n    Long.fromString = fromString;\n\n    /**\n     * @function\n     * @param {!Long|number|string|!{low: number, high: number, unsigned: boolean}} val\n     * @param {boolean=} unsigned\n     * @returns {!Long}\n     * @inner\n     */\n    function fromValue(val, unsigned) {\n      if (typeof val === \"number\") return fromNumber(val, unsigned);\n      if (typeof val === \"string\") return fromString(val, unsigned);\n      // Throws for non-objects, converts non-instanceof Long:\n      return fromBits(\n        val.low,\n        val.high,\n        typeof unsigned === \"boolean\" ? unsigned : val.unsigned,\n      );\n    }\n\n    /**\n     * Converts the specified value to a Long using the appropriate from* function for its type.\n     * @function\n     * @param {!Long|number|bigint|string|!{low: number, high: number, unsigned: boolean}} val Value\n     * @param {boolean=} unsigned Whether unsigned or not, defaults to signed\n     * @returns {!Long}\n     */\n    Long.fromValue = fromValue;\n\n    // NOTE: the compiler should inline these constant values below and then remove these variables, so there should be\n    // no runtime penalty for these.\n\n    /**\n     * @type {number}\n     * @const\n     * @inner\n     */\n    var TWO_PWR_16_DBL = 1 << 16;\n\n    /**\n     * @type {number}\n     * @const\n     * @inner\n     */\n    var TWO_PWR_24_DBL = 1 << 24;\n\n    /**\n     * @type {number}\n     * @const\n     * @inner\n     */\n    var TWO_PWR_32_DBL = TWO_PWR_16_DBL * TWO_PWR_16_DBL;\n\n    /**\n     * @type {number}\n     * @const\n     * @inner\n     */\n    var TWO_PWR_64_DBL = TWO_PWR_32_DBL * TWO_PWR_32_DBL;\n\n    /**\n     * @type {number}\n     * @const\n     * @inner\n     */\n    var TWO_PWR_63_DBL = TWO_PWR_64_DBL / 2;\n\n    /**\n     * @type {!Long}\n     * @const\n     * @inner\n     */\n    var TWO_PWR_24 = fromInt(TWO_PWR_24_DBL);\n\n    /**\n     * @type {!Long}\n     * @inner\n     */\n    var ZERO = fromInt(0);\n\n    /**\n     * Signed zero.\n     * @type {!Long}\n     */\n    Long.ZERO = ZERO;\n\n    /**\n     * @type {!Long}\n     * @inner\n     */\n    var UZERO = fromInt(0, true);\n\n    /**\n     * Unsigned zero.\n     * @type {!Long}\n     */\n    Long.UZERO = UZERO;\n\n    /**\n     * @type {!Long}\n     * @inner\n     */\n    var ONE = fromInt(1);\n\n    /**\n     * Signed one.\n     * @type {!Long}\n     */\n    Long.ONE = ONE;\n\n    /**\n     * @type {!Long}\n     * @inner\n     */\n    var UONE = fromInt(1, true);\n\n    /**\n     * Unsigned one.\n     * @type {!Long}\n     */\n    Long.UONE = UONE;\n\n    /**\n     * @type {!Long}\n     * @inner\n     */\n    var NEG_ONE = fromInt(-1);\n\n    /**\n     * Signed negative one.\n     * @type {!Long}\n     */\n    Long.NEG_ONE = NEG_ONE;\n\n    /**\n     * @type {!Long}\n     * @inner\n     */\n    var MAX_VALUE = fromBits(0xffffffff | 0, 0x7fffffff | 0, false);\n\n    /**\n     * Maximum signed value.\n     * @type {!Long}\n     */\n    Long.MAX_VALUE = MAX_VALUE;\n\n    /**\n     * @type {!Long}\n     * @inner\n     */\n    var MAX_UNSIGNED_VALUE = fromBits(0xffffffff | 0, 0xffffffff | 0, true);\n\n    /**\n     * Maximum unsigned value.\n     * @type {!Long}\n     */\n    Long.MAX_UNSIGNED_VALUE = MAX_UNSIGNED_VALUE;\n\n    /**\n     * @type {!Long}\n     * @inner\n     */\n    var MIN_VALUE = fromBits(0, 0x80000000 | 0, false);\n\n    /**\n     * Minimum signed value.\n     * @type {!Long}\n     */\n    Long.MIN_VALUE = MIN_VALUE;\n\n    /**\n     * @alias Long.prototype\n     * @inner\n     */\n    var LongPrototype = Long.prototype;\n\n    /**\n     * Converts the Long to a 32 bit integer, assuming it is a 32 bit integer.\n     * @this {!Long}\n     * @returns {number}\n     */\n    LongPrototype.toInt = function toInt() {\n      return this.unsigned ? this.low >>> 0 : this.low;\n    };\n\n    /**\n     * Converts the Long to a the nearest floating-point representation of this value (double, 53 bit mantissa).\n     * @this {!Long}\n     * @returns {number}\n     */\n    LongPrototype.toNumber = function toNumber() {\n      if (this.unsigned)\n        return (this.high >>> 0) * TWO_PWR_32_DBL + (this.low >>> 0);\n      return this.high * TWO_PWR_32_DBL + (this.low >>> 0);\n    };\n\n    /**\n     * Converts the Long to a string written in the specified radix.\n     * @this {!Long}\n     * @param {number=} radix Radix (2-36), defaults to 10\n     * @returns {string}\n     * @override\n     * @throws {RangeError} If `radix` is out of range\n     */\n    LongPrototype.toString = function toString(radix) {\n      radix = radix || 10;\n      if (radix < 2 || 36 < radix) throw RangeError(\"radix\");\n      if (this.isZero()) return \"0\";\n      if (this.isNegative()) {\n        // Unsigned Longs are never negative\n        if (this.eq(MIN_VALUE)) {\n          // We need to change the Long value before it can be negated, so we remove\n          // the bottom-most digit in this base and then recurse to do the rest.\n          var radixLong = fromNumber(radix),\n            div = this.div(radixLong),\n            rem1 = div.mul(radixLong).sub(this);\n          return div.toString(radix) + rem1.toInt().toString(radix);\n        } else return \"-\" + this.neg().toString(radix);\n      }\n\n      // Do several (6) digits each time through the loop, so as to\n      // minimize the calls to the very expensive emulated div.\n      var radixToPower = fromNumber(pow_dbl(radix, 6), this.unsigned),\n        rem = this;\n      var result = \"\";\n      while (true) {\n        var remDiv = rem.div(radixToPower),\n          intval = rem.sub(remDiv.mul(radixToPower)).toInt() >>> 0,\n          digits = intval.toString(radix);\n        rem = remDiv;\n        if (rem.isZero()) return digits + result;\n        else {\n          while (digits.length < 6) digits = \"0\" + digits;\n          result = \"\" + digits + result;\n        }\n      }\n    };\n\n    /**\n     * Gets the high 32 bits as a signed integer.\n     * @this {!Long}\n     * @returns {number} Signed high bits\n     */\n    LongPrototype.getHighBits = function getHighBits() {\n      return this.high;\n    };\n\n    /**\n     * Gets the high 32 bits as an unsigned integer.\n     * @this {!Long}\n     * @returns {number} Unsigned high bits\n     */\n    LongPrototype.getHighBitsUnsigned = function getHighBitsUnsigned() {\n      return this.high >>> 0;\n    };\n\n    /**\n     * Gets the low 32 bits as a signed integer.\n     * @this {!Long}\n     * @returns {number} Signed low bits\n     */\n    LongPrototype.getLowBits = function getLowBits() {\n      return this.low;\n    };\n\n    /**\n     * Gets the low 32 bits as an unsigned integer.\n     * @this {!Long}\n     * @returns {number} Unsigned low bits\n     */\n    LongPrototype.getLowBitsUnsigned = function getLowBitsUnsigned() {\n      return this.low >>> 0;\n    };\n\n    /**\n     * Gets the number of bits needed to represent the absolute value of this Long.\n     * @this {!Long}\n     * @returns {number}\n     */\n    LongPrototype.getNumBitsAbs = function getNumBitsAbs() {\n      if (this.isNegative())\n        // Unsigned Longs are never negative\n        return this.eq(MIN_VALUE) ? 64 : this.neg().getNumBitsAbs();\n      var val = this.high != 0 ? this.high : this.low;\n      for (var bit = 31; bit > 0; bit--) if ((val & (1 << bit)) != 0) break;\n      return this.high != 0 ? bit + 33 : bit + 1;\n    };\n\n    /**\n     * Tests if this Long can be safely represented as a JavaScript number.\n     * @this {!Long}\n     * @returns {boolean}\n     */\n    LongPrototype.isSafeInteger = function isSafeInteger() {\n      // 2^53-1 is the maximum safe value\n      var top11Bits = this.high >> 21;\n      // [0, 2^53-1]\n      if (!top11Bits) return true;\n      // > 2^53-1\n      if (this.unsigned) return false;\n      // [-2^53, -1] except -2^53\n      return top11Bits === -1 && !(this.low === 0 && this.high === -0x200000);\n    };\n\n    /**\n     * Tests if this Long's value equals zero.\n     * @this {!Long}\n     * @returns {boolean}\n     */\n    LongPrototype.isZero = function isZero() {\n      return this.high === 0 && this.low === 0;\n    };\n\n    /**\n     * Tests if this Long's value equals zero. This is an alias of {@link Long#isZero}.\n     * @returns {boolean}\n     */\n    LongPrototype.eqz = LongPrototype.isZero;\n\n    /**\n     * Tests if this Long's value is negative.\n     * @this {!Long}\n     * @returns {boolean}\n     */\n    LongPrototype.isNegative = function isNegative() {\n      return !this.unsigned && this.high < 0;\n    };\n\n    /**\n     * Tests if this Long's value is positive or zero.\n     * @this {!Long}\n     * @returns {boolean}\n     */\n    LongPrototype.isPositive = function isPositive() {\n      return this.unsigned || this.high >= 0;\n    };\n\n    /**\n     * Tests if this Long's value is odd.\n     * @this {!Long}\n     * @returns {boolean}\n     */\n    LongPrototype.isOdd = function isOdd() {\n      return (this.low & 1) === 1;\n    };\n\n    /**\n     * Tests if this Long's value is even.\n     * @this {!Long}\n     * @returns {boolean}\n     */\n    LongPrototype.isEven = function isEven() {\n      return (this.low & 1) === 0;\n    };\n\n    /**\n     * Tests if this Long's value equals the specified's.\n     * @this {!Long}\n     * @param {!Long|number|bigint|string} other Other value\n     * @returns {boolean}\n     */\n    LongPrototype.equals = function equals(other) {\n      if (!isLong(other)) other = fromValue(other);\n      if (\n        this.unsigned !== other.unsigned &&\n        this.high >>> 31 === 1 &&\n        other.high >>> 31 === 1\n      )\n        return false;\n      return this.high === other.high && this.low === other.low;\n    };\n\n    /**\n     * Tests if this Long's value equals the specified's. This is an alias of {@link Long#equals}.\n     * @function\n     * @param {!Long|number|bigint|string} other Other value\n     * @returns {boolean}\n     */\n    LongPrototype.eq = LongPrototype.equals;\n\n    /**\n     * Tests if this Long's value differs from the specified's.\n     * @this {!Long}\n     * @param {!Long|number|bigint|string} other Other value\n     * @returns {boolean}\n     */\n    LongPrototype.notEquals = function notEquals(other) {\n      return !this.eq(/* validates */ other);\n    };\n\n    /**\n     * Tests if this Long's value differs from the specified's. This is an alias of {@link Long#notEquals}.\n     * @function\n     * @param {!Long|number|bigint|string} other Other value\n     * @returns {boolean}\n     */\n    LongPrototype.neq = LongPrototype.notEquals;\n\n    /**\n     * Tests if this Long's value differs from the specified's. This is an alias of {@link Long#notEquals}.\n     * @function\n     * @param {!Long|number|bigint|string} other Other value\n     * @returns {boolean}\n     */\n    LongPrototype.ne = LongPrototype.notEquals;\n\n    /**\n     * Tests if this Long's value is less than the specified's.\n     * @this {!Long}\n     * @param {!Long|number|bigint|string} other Other value\n     * @returns {boolean}\n     */\n    LongPrototype.lessThan = function lessThan(other) {\n      return this.comp(/* validates */ other) < 0;\n    };\n\n    /**\n     * Tests if this Long's value is less than the specified's. This is an alias of {@link Long#lessThan}.\n     * @function\n     * @param {!Long|number|bigint|string} other Other value\n     * @returns {boolean}\n     */\n    LongPrototype.lt = LongPrototype.lessThan;\n\n    /**\n     * Tests if this Long's value is less than or equal the specified's.\n     * @this {!Long}\n     * @param {!Long|number|bigint|string} other Other value\n     * @returns {boolean}\n     */\n    LongPrototype.lessThanOrEqual = function lessThanOrEqual(other) {\n      return this.comp(/* validates */ other) <= 0;\n    };\n\n    /**\n     * Tests if this Long's value is less than or equal the specified's. This is an alias of {@link Long#lessThanOrEqual}.\n     * @function\n     * @param {!Long|number|bigint|string} other Other value\n     * @returns {boolean}\n     */\n    LongPrototype.lte = LongPrototype.lessThanOrEqual;\n\n    /**\n     * Tests if this Long's value is less than or equal the specified's. This is an alias of {@link Long#lessThanOrEqual}.\n     * @function\n     * @param {!Long|number|bigint|string} other Other value\n     * @returns {boolean}\n     */\n    LongPrototype.le = LongPrototype.lessThanOrEqual;\n\n    /**\n     * Tests if this Long's value is greater than the specified's.\n     * @this {!Long}\n     * @param {!Long|number|bigint|string} other Other value\n     * @returns {boolean}\n     */\n    LongPrototype.greaterThan = function greaterThan(other) {\n      return this.comp(/* validates */ other) > 0;\n    };\n\n    /**\n     * Tests if this Long's value is greater than the specified's. This is an alias of {@link Long#greaterThan}.\n     * @function\n     * @param {!Long|number|bigint|string} other Other value\n     * @returns {boolean}\n     */\n    LongPrototype.gt = LongPrototype.greaterThan;\n\n    /**\n     * Tests if this Long's value is greater than or equal the specified's.\n     * @this {!Long}\n     * @param {!Long|number|bigint|string} other Other value\n     * @returns {boolean}\n     */\n    LongPrototype.greaterThanOrEqual = function greaterThanOrEqual(other) {\n      return this.comp(/* validates */ other) >= 0;\n    };\n\n    /**\n     * Tests if this Long's value is greater than or equal the specified's. This is an alias of {@link Long#greaterThanOrEqual}.\n     * @function\n     * @param {!Long|number|bigint|string} other Other value\n     * @returns {boolean}\n     */\n    LongPrototype.gte = LongPrototype.greaterThanOrEqual;\n\n    /**\n     * Tests if this Long's value is greater than or equal the specified's. This is an alias of {@link Long#greaterThanOrEqual}.\n     * @function\n     * @param {!Long|number|bigint|string} other Other value\n     * @returns {boolean}\n     */\n    LongPrototype.ge = LongPrototype.greaterThanOrEqual;\n\n    /**\n     * Compares this Long's value with the specified's.\n     * @this {!Long}\n     * @param {!Long|number|bigint|string} other Other value\n     * @returns {number} 0 if they are the same, 1 if the this is greater and -1\n     *  if the given one is greater\n     */\n    LongPrototype.compare = function compare(other) {\n      if (!isLong(other)) other = fromValue(other);\n      if (this.eq(other)) return 0;\n      var thisNeg = this.isNegative(),\n        otherNeg = other.isNegative();\n      if (thisNeg && !otherNeg) return -1;\n      if (!thisNeg && otherNeg) return 1;\n      // At this point the sign bits are the same\n      if (!this.unsigned) return this.sub(other).isNegative() ? -1 : 1;\n      // Both are positive if at least one is unsigned\n      return other.high >>> 0 > this.high >>> 0 ||\n        (other.high === this.high && other.low >>> 0 > this.low >>> 0)\n        ? -1\n        : 1;\n    };\n\n    /**\n     * Compares this Long's value with the specified's. This is an alias of {@link Long#compare}.\n     * @function\n     * @param {!Long|number|bigint|string} other Other value\n     * @returns {number} 0 if they are the same, 1 if the this is greater and -1\n     *  if the given one is greater\n     */\n    LongPrototype.comp = LongPrototype.compare;\n\n    /**\n     * Negates this Long's value.\n     * @this {!Long}\n     * @returns {!Long} Negated Long\n     */\n    LongPrototype.negate = function negate() {\n      if (!this.unsigned && this.eq(MIN_VALUE)) return MIN_VALUE;\n      return this.not().add(ONE);\n    };\n\n    /**\n     * Negates this Long's value. This is an alias of {@link Long#negate}.\n     * @function\n     * @returns {!Long} Negated Long\n     */\n    LongPrototype.neg = LongPrototype.negate;\n\n    /**\n     * Returns the sum of this and the specified Long.\n     * @this {!Long}\n     * @param {!Long|number|bigint|string} addend Addend\n     * @returns {!Long} Sum\n     */\n    LongPrototype.add = function add(addend) {\n      if (!isLong(addend)) addend = fromValue(addend);\n\n      // Divide each number into 4 chunks of 16 bits, and then sum the chunks.\n\n      var a48 = this.high >>> 16;\n      var a32 = this.high & 0xffff;\n      var a16 = this.low >>> 16;\n      var a00 = this.low & 0xffff;\n      var b48 = addend.high >>> 16;\n      var b32 = addend.high & 0xffff;\n      var b16 = addend.low >>> 16;\n      var b00 = addend.low & 0xffff;\n      var c48 = 0,\n        c32 = 0,\n        c16 = 0,\n        c00 = 0;\n      c00 += a00 + b00;\n      c16 += c00 >>> 16;\n      c00 &= 0xffff;\n      c16 += a16 + b16;\n      c32 += c16 >>> 16;\n      c16 &= 0xffff;\n      c32 += a32 + b32;\n      c48 += c32 >>> 16;\n      c32 &= 0xffff;\n      c48 += a48 + b48;\n      c48 &= 0xffff;\n      return fromBits((c16 << 16) | c00, (c48 << 16) | c32, this.unsigned);\n    };\n\n    /**\n     * Returns the difference of this and the specified Long.\n     * @this {!Long}\n     * @param {!Long|number|bigint|string} subtrahend Subtrahend\n     * @returns {!Long} Difference\n     */\n    LongPrototype.subtract = function subtract(subtrahend) {\n      if (!isLong(subtrahend)) subtrahend = fromValue(subtrahend);\n      return this.add(subtrahend.neg());\n    };\n\n    /**\n     * Returns the difference of this and the specified Long. This is an alias of {@link Long#subtract}.\n     * @function\n     * @param {!Long|number|bigint|string} subtrahend Subtrahend\n     * @returns {!Long} Difference\n     */\n    LongPrototype.sub = LongPrototype.subtract;\n\n    /**\n     * Returns the product of this and the specified Long.\n     * @this {!Long}\n     * @param {!Long|number|bigint|string} multiplier Multiplier\n     * @returns {!Long} Product\n     */\n    LongPrototype.multiply = function multiply(multiplier) {\n      if (this.isZero()) return this;\n      if (!isLong(multiplier)) multiplier = fromValue(multiplier);\n\n      // use wasm support if present\n      if (wasm) {\n        var low = wasm[\"mul\"](\n          this.low,\n          this.high,\n          multiplier.low,\n          multiplier.high,\n        );\n        return fromBits(low, wasm[\"get_high\"](), this.unsigned);\n      }\n      if (multiplier.isZero()) return this.unsigned ? UZERO : ZERO;\n      if (this.eq(MIN_VALUE)) return multiplier.isOdd() ? MIN_VALUE : ZERO;\n      if (multiplier.eq(MIN_VALUE)) return this.isOdd() ? MIN_VALUE : ZERO;\n      if (this.isNegative()) {\n        if (multiplier.isNegative()) return this.neg().mul(multiplier.neg());\n        else return this.neg().mul(multiplier).neg();\n      } else if (multiplier.isNegative())\n        return this.mul(multiplier.neg()).neg();\n\n      // If both longs are small, use float multiplication\n      if (this.lt(TWO_PWR_24) && multiplier.lt(TWO_PWR_24))\n        return fromNumber(\n          this.toNumber() * multiplier.toNumber(),\n          this.unsigned,\n        );\n\n      // Divide each long into 4 chunks of 16 bits, and then add up 4x4 products.\n      // We can skip products that would overflow.\n\n      var a48 = this.high >>> 16;\n      var a32 = this.high & 0xffff;\n      var a16 = this.low >>> 16;\n      var a00 = this.low & 0xffff;\n      var b48 = multiplier.high >>> 16;\n      var b32 = multiplier.high & 0xffff;\n      var b16 = multiplier.low >>> 16;\n      var b00 = multiplier.low & 0xffff;\n      var c48 = 0,\n        c32 = 0,\n        c16 = 0,\n        c00 = 0;\n      c00 += a00 * b00;\n      c16 += c00 >>> 16;\n      c00 &= 0xffff;\n      c16 += a16 * b00;\n      c32 += c16 >>> 16;\n      c16 &= 0xffff;\n      c16 += a00 * b16;\n      c32 += c16 >>> 16;\n      c16 &= 0xffff;\n      c32 += a32 * b00;\n      c48 += c32 >>> 16;\n      c32 &= 0xffff;\n      c32 += a16 * b16;\n      c48 += c32 >>> 16;\n      c32 &= 0xffff;\n      c32 += a00 * b32;\n      c48 += c32 >>> 16;\n      c32 &= 0xffff;\n      c48 += a48 * b00 + a32 * b16 + a16 * b32 + a00 * b48;\n      c48 &= 0xffff;\n      return fromBits((c16 << 16) | c00, (c48 << 16) | c32, this.unsigned);\n    };\n\n    /**\n     * Returns the product of this and the specified Long. This is an alias of {@link Long#multiply}.\n     * @function\n     * @param {!Long|number|bigint|string} multiplier Multiplier\n     * @returns {!Long} Product\n     */\n    LongPrototype.mul = LongPrototype.multiply;\n\n    /**\n     * Returns this Long divided by the specified. The result is signed if this Long is signed or\n     *  unsigned if this Long is unsigned.\n     * @this {!Long}\n     * @param {!Long|number|bigint|string} divisor Divisor\n     * @returns {!Long} Quotient\n     */\n    LongPrototype.divide = function divide(divisor) {\n      if (!isLong(divisor)) divisor = fromValue(divisor);\n      if (divisor.isZero()) throw Error(\"division by zero\");\n\n      // use wasm support if present\n      if (wasm) {\n        // guard against signed division overflow: the largest\n        // negative number / -1 would be 1 larger than the largest\n        // positive number, due to two's complement.\n        if (\n          !this.unsigned &&\n          this.high === -0x80000000 &&\n          divisor.low === -1 &&\n          divisor.high === -1\n        ) {\n          // be consistent with non-wasm code path\n          return this;\n        }\n        var low = (this.unsigned ? wasm[\"div_u\"] : wasm[\"div_s\"])(\n          this.low,\n          this.high,\n          divisor.low,\n          divisor.high,\n        );\n        return fromBits(low, wasm[\"get_high\"](), this.unsigned);\n      }\n      if (this.isZero()) return this.unsigned ? UZERO : ZERO;\n      var approx, rem, res;\n      if (!this.unsigned) {\n        // This section is only relevant for signed longs and is derived from the\n        // closure library as a whole.\n        if (this.eq(MIN_VALUE)) {\n          if (divisor.eq(ONE) || divisor.eq(NEG_ONE))\n            return MIN_VALUE; // recall that -MIN_VALUE == MIN_VALUE\n          else if (divisor.eq(MIN_VALUE)) return ONE;\n          else {\n            // At this point, we have |other| >= 2, so |this/other| < |MIN_VALUE|.\n            var halfThis = this.shr(1);\n            approx = halfThis.div(divisor).shl(1);\n            if (approx.eq(ZERO)) {\n              return divisor.isNegative() ? ONE : NEG_ONE;\n            } else {\n              rem = this.sub(divisor.mul(approx));\n              res = approx.add(rem.div(divisor));\n              return res;\n            }\n          }\n        } else if (divisor.eq(MIN_VALUE)) return this.unsigned ? UZERO : ZERO;\n        if (this.isNegative()) {\n          if (divisor.isNegative()) return this.neg().div(divisor.neg());\n          return this.neg().div(divisor).neg();\n        } else if (divisor.isNegative()) return this.div(divisor.neg()).neg();\n        res = ZERO;\n      } else {\n        // The algorithm below has not been made for unsigned longs. It's therefore\n        // required to take special care of the MSB prior to running it.\n        if (!divisor.unsigned) divisor = divisor.toUnsigned();\n        if (divisor.gt(this)) return UZERO;\n        if (divisor.gt(this.shru(1)))\n          // 15 >>> 1 = 7 ; with divisor = 8 ; true\n          return UONE;\n        res = UZERO;\n      }\n\n      // Repeat the following until the remainder is less than other:  find a\n      // floating-point that approximates remainder / other *from below*, add this\n      // into the result, and subtract it from the remainder.  It is critical that\n      // the approximate value is less than or equal to the real value so that the\n      // remainder never becomes negative.\n      rem = this;\n      while (rem.gte(divisor)) {\n        // Approximate the result of division. This may be a little greater or\n        // smaller than the actual value.\n        approx = Math.max(1, Math.floor(rem.toNumber() / divisor.toNumber()));\n\n        // We will tweak the approximate result by changing it in the 48-th digit or\n        // the smallest non-fractional digit, whichever is larger.\n        var log2 = Math.ceil(Math.log(approx) / Math.LN2),\n          delta = log2 <= 48 ? 1 : pow_dbl(2, log2 - 48),\n          // Decrease the approximation until it is smaller than the remainder.  Note\n          // that if it is too large, the product overflows and is negative.\n          approxRes = fromNumber(approx),\n          approxRem = approxRes.mul(divisor);\n        while (approxRem.isNegative() || approxRem.gt(rem)) {\n          approx -= delta;\n          approxRes = fromNumber(approx, this.unsigned);\n          approxRem = approxRes.mul(divisor);\n        }\n\n        // We know the answer can't be zero... and actually, zero would cause\n        // infinite recursion since we would make no progress.\n        if (approxRes.isZero()) approxRes = ONE;\n        res = res.add(approxRes);\n        rem = rem.sub(approxRem);\n      }\n      return res;\n    };\n\n    /**\n     * Returns this Long divided by the specified. This is an alias of {@link Long#divide}.\n     * @function\n     * @param {!Long|number|bigint|string} divisor Divisor\n     * @returns {!Long} Quotient\n     */\n    LongPrototype.div = LongPrototype.divide;\n\n    /**\n     * Returns this Long modulo the specified.\n     * @this {!Long}\n     * @param {!Long|number|bigint|string} divisor Divisor\n     * @returns {!Long} Remainder\n     */\n    LongPrototype.modulo = function modulo(divisor) {\n      if (!isLong(divisor)) divisor = fromValue(divisor);\n\n      // use wasm support if present\n      if (wasm) {\n        var low = (this.unsigned ? wasm[\"rem_u\"] : wasm[\"rem_s\"])(\n          this.low,\n          this.high,\n          divisor.low,\n          divisor.high,\n        );\n        return fromBits(low, wasm[\"get_high\"](), this.unsigned);\n      }\n      return this.sub(this.div(divisor).mul(divisor));\n    };\n\n    /**\n     * Returns this Long modulo the specified. This is an alias of {@link Long#modulo}.\n     * @function\n     * @param {!Long|number|bigint|string} divisor Divisor\n     * @returns {!Long} Remainder\n     */\n    LongPrototype.mod = LongPrototype.modulo;\n\n    /**\n     * Returns this Long modulo the specified. This is an alias of {@link Long#modulo}.\n     * @function\n     * @param {!Long|number|bigint|string} divisor Divisor\n     * @returns {!Long} Remainder\n     */\n    LongPrototype.rem = LongPrototype.modulo;\n\n    /**\n     * Returns the bitwise NOT of this Long.\n     * @this {!Long}\n     * @returns {!Long}\n     */\n    LongPrototype.not = function not() {\n      return fromBits(~this.low, ~this.high, this.unsigned);\n    };\n\n    /**\n     * Returns count leading zeros of this Long.\n     * @this {!Long}\n     * @returns {!number}\n     */\n    LongPrototype.countLeadingZeros = function countLeadingZeros() {\n      return this.high ? Math.clz32(this.high) : Math.clz32(this.low) + 32;\n    };\n\n    /**\n     * Returns count leading zeros. This is an alias of {@link Long#countLeadingZeros}.\n     * @function\n     * @param {!Long}\n     * @returns {!number}\n     */\n    LongPrototype.clz = LongPrototype.countLeadingZeros;\n\n    /**\n     * Returns count trailing zeros of this Long.\n     * @this {!Long}\n     * @returns {!number}\n     */\n    LongPrototype.countTrailingZeros = function countTrailingZeros() {\n      return this.low ? ctz32(this.low) : ctz32(this.high) + 32;\n    };\n\n    /**\n     * Returns count trailing zeros. This is an alias of {@link Long#countTrailingZeros}.\n     * @function\n     * @param {!Long}\n     * @returns {!number}\n     */\n    LongPrototype.ctz = LongPrototype.countTrailingZeros;\n\n    /**\n     * Returns the bitwise AND of this Long and the specified.\n     * @this {!Long}\n     * @param {!Long|number|bigint|string} other Other Long\n     * @returns {!Long}\n     */\n    LongPrototype.and = function and(other) {\n      if (!isLong(other)) other = fromValue(other);\n      return fromBits(\n        this.low & other.low,\n        this.high & other.high,\n        this.unsigned,\n      );\n    };\n\n    /**\n     * Returns the bitwise OR of this Long and the specified.\n     * @this {!Long}\n     * @param {!Long|number|bigint|string} other Other Long\n     * @returns {!Long}\n     */\n    LongPrototype.or = function or(other) {\n      if (!isLong(other)) other = fromValue(other);\n      return fromBits(\n        this.low | other.low,\n        this.high | other.high,\n        this.unsigned,\n      );\n    };\n\n    /**\n     * Returns the bitwise XOR of this Long and the given one.\n     * @this {!Long}\n     * @param {!Long|number|bigint|string} other Other Long\n     * @returns {!Long}\n     */\n    LongPrototype.xor = function xor(other) {\n      if (!isLong(other)) other = fromValue(other);\n      return fromBits(\n        this.low ^ other.low,\n        this.high ^ other.high,\n        this.unsigned,\n      );\n    };\n\n    /**\n     * Returns this Long with bits shifted to the left by the given amount.\n     * @this {!Long}\n     * @param {number|!Long} numBits Number of bits\n     * @returns {!Long} Shifted Long\n     */\n    LongPrototype.shiftLeft = function shiftLeft(numBits) {\n      if (isLong(numBits)) numBits = numBits.toInt();\n      if ((numBits &= 63) === 0) return this;\n      else if (numBits < 32)\n        return fromBits(\n          this.low << numBits,\n          (this.high << numBits) | (this.low >>> (32 - numBits)),\n          this.unsigned,\n        );\n      else return fromBits(0, this.low << (numBits - 32), this.unsigned);\n    };\n\n    /**\n     * Returns this Long with bits shifted to the left by the given amount. This is an alias of {@link Long#shiftLeft}.\n     * @function\n     * @param {number|!Long} numBits Number of bits\n     * @returns {!Long} Shifted Long\n     */\n    LongPrototype.shl = LongPrototype.shiftLeft;\n\n    /**\n     * Returns this Long with bits arithmetically shifted to the right by the given amount.\n     * @this {!Long}\n     * @param {number|!Long} numBits Number of bits\n     * @returns {!Long} Shifted Long\n     */\n    LongPrototype.shiftRight = function shiftRight(numBits) {\n      if (isLong(numBits)) numBits = numBits.toInt();\n      if ((numBits &= 63) === 0) return this;\n      else if (numBits < 32)\n        return fromBits(\n          (this.low >>> numBits) | (this.high << (32 - numBits)),\n          this.high >> numBits,\n          this.unsigned,\n        );\n      else\n        return fromBits(\n          this.high >> (numBits - 32),\n          this.high >= 0 ? 0 : -1,\n          this.unsigned,\n        );\n    };\n\n    /**\n     * Returns this Long with bits arithmetically shifted to the right by the given amount. This is an alias of {@link Long#shiftRight}.\n     * @function\n     * @param {number|!Long} numBits Number of bits\n     * @returns {!Long} Shifted Long\n     */\n    LongPrototype.shr = LongPrototype.shiftRight;\n\n    /**\n     * Returns this Long with bits logically shifted to the right by the given amount.\n     * @this {!Long}\n     * @param {number|!Long} numBits Number of bits\n     * @returns {!Long} Shifted Long\n     */\n    LongPrototype.shiftRightUnsigned = function shiftRightUnsigned(numBits) {\n      if (isLong(numBits)) numBits = numBits.toInt();\n      if ((numBits &= 63) === 0) return this;\n      if (numBits < 32)\n        return fromBits(\n          (this.low >>> numBits) | (this.high << (32 - numBits)),\n          this.high >>> numBits,\n          this.unsigned,\n        );\n      if (numBits === 32) return fromBits(this.high, 0, this.unsigned);\n      return fromBits(this.high >>> (numBits - 32), 0, this.unsigned);\n    };\n\n    /**\n     * Returns this Long with bits logically shifted to the right by the given amount. This is an alias of {@link Long#shiftRightUnsigned}.\n     * @function\n     * @param {number|!Long} numBits Number of bits\n     * @returns {!Long} Shifted Long\n     */\n    LongPrototype.shru = LongPrototype.shiftRightUnsigned;\n\n    /**\n     * Returns this Long with bits logically shifted to the right by the given amount. This is an alias of {@link Long#shiftRightUnsigned}.\n     * @function\n     * @param {number|!Long} numBits Number of bits\n     * @returns {!Long} Shifted Long\n     */\n    LongPrototype.shr_u = LongPrototype.shiftRightUnsigned;\n\n    /**\n     * Returns this Long with bits rotated to the left by the given amount.\n     * @this {!Long}\n     * @param {number|!Long} numBits Number of bits\n     * @returns {!Long} Rotated Long\n     */\n    LongPrototype.rotateLeft = function rotateLeft(numBits) {\n      var b;\n      if (isLong(numBits)) numBits = numBits.toInt();\n      if ((numBits &= 63) === 0) return this;\n      if (numBits === 32) return fromBits(this.high, this.low, this.unsigned);\n      if (numBits < 32) {\n        b = 32 - numBits;\n        return fromBits(\n          (this.low << numBits) | (this.high >>> b),\n          (this.high << numBits) | (this.low >>> b),\n          this.unsigned,\n        );\n      }\n      numBits -= 32;\n      b = 32 - numBits;\n      return fromBits(\n        (this.high << numBits) | (this.low >>> b),\n        (this.low << numBits) | (this.high >>> b),\n        this.unsigned,\n      );\n    };\n    /**\n     * Returns this Long with bits rotated to the left by the given amount. This is an alias of {@link Long#rotateLeft}.\n     * @function\n     * @param {number|!Long} numBits Number of bits\n     * @returns {!Long} Rotated Long\n     */\n    LongPrototype.rotl = LongPrototype.rotateLeft;\n\n    /**\n     * Returns this Long with bits rotated to the right by the given amount.\n     * @this {!Long}\n     * @param {number|!Long} numBits Number of bits\n     * @returns {!Long} Rotated Long\n     */\n    LongPrototype.rotateRight = function rotateRight(numBits) {\n      var b;\n      if (isLong(numBits)) numBits = numBits.toInt();\n      if ((numBits &= 63) === 0) return this;\n      if (numBits === 32) return fromBits(this.high, this.low, this.unsigned);\n      if (numBits < 32) {\n        b = 32 - numBits;\n        return fromBits(\n          (this.high << b) | (this.low >>> numBits),\n          (this.low << b) | (this.high >>> numBits),\n          this.unsigned,\n        );\n      }\n      numBits -= 32;\n      b = 32 - numBits;\n      return fromBits(\n        (this.low << b) | (this.high >>> numBits),\n        (this.high << b) | (this.low >>> numBits),\n        this.unsigned,\n      );\n    };\n    /**\n     * Returns this Long with bits rotated to the right by the given amount. This is an alias of {@link Long#rotateRight}.\n     * @function\n     * @param {number|!Long} numBits Number of bits\n     * @returns {!Long} Rotated Long\n     */\n    LongPrototype.rotr = LongPrototype.rotateRight;\n\n    /**\n     * Converts this Long to signed.\n     * @this {!Long}\n     * @returns {!Long} Signed long\n     */\n    LongPrototype.toSigned = function toSigned() {\n      if (!this.unsigned) return this;\n      return fromBits(this.low, this.high, false);\n    };\n\n    /**\n     * Converts this Long to unsigned.\n     * @this {!Long}\n     * @returns {!Long} Unsigned long\n     */\n    LongPrototype.toUnsigned = function toUnsigned() {\n      if (this.unsigned) return this;\n      return fromBits(this.low, this.high, true);\n    };\n\n    /**\n     * Converts this Long to its byte representation.\n     * @param {boolean=} le Whether little or big endian, defaults to big endian\n     * @this {!Long}\n     * @returns {!Array.<number>} Byte representation\n     */\n    LongPrototype.toBytes = function toBytes(le) {\n      return le ? this.toBytesLE() : this.toBytesBE();\n    };\n\n    /**\n     * Converts this Long to its little endian byte representation.\n     * @this {!Long}\n     * @returns {!Array.<number>} Little endian byte representation\n     */\n    LongPrototype.toBytesLE = function toBytesLE() {\n      var hi = this.high,\n        lo = this.low;\n      return [\n        lo & 0xff,\n        (lo >>> 8) & 0xff,\n        (lo >>> 16) & 0xff,\n        lo >>> 24,\n        hi & 0xff,\n        (hi >>> 8) & 0xff,\n        (hi >>> 16) & 0xff,\n        hi >>> 24,\n      ];\n    };\n\n    /**\n     * Converts this Long to its big endian byte representation.\n     * @this {!Long}\n     * @returns {!Array.<number>} Big endian byte representation\n     */\n    LongPrototype.toBytesBE = function toBytesBE() {\n      var hi = this.high,\n        lo = this.low;\n      return [\n        hi >>> 24,\n        (hi >>> 16) & 0xff,\n        (hi >>> 8) & 0xff,\n        hi & 0xff,\n        lo >>> 24,\n        (lo >>> 16) & 0xff,\n        (lo >>> 8) & 0xff,\n        lo & 0xff,\n      ];\n    };\n\n    /**\n     * Creates a Long from its byte representation.\n     * @param {!Array.<number>} bytes Byte representation\n     * @param {boolean=} unsigned Whether unsigned or not, defaults to signed\n     * @param {boolean=} le Whether little or big endian, defaults to big endian\n     * @returns {Long} The corresponding Long value\n     */\n    Long.fromBytes = function fromBytes(bytes, unsigned, le) {\n      return le\n        ? Long.fromBytesLE(bytes, unsigned)\n        : Long.fromBytesBE(bytes, unsigned);\n    };\n\n    /**\n     * Creates a Long from its little endian byte representation.\n     * @param {!Array.<number>} bytes Little endian byte representation\n     * @param {boolean=} unsigned Whether unsigned or not, defaults to signed\n     * @returns {Long} The corresponding Long value\n     */\n    Long.fromBytesLE = function fromBytesLE(bytes, unsigned) {\n      return new Long(\n        bytes[0] | (bytes[1] << 8) | (bytes[2] << 16) | (bytes[3] << 24),\n        bytes[4] | (bytes[5] << 8) | (bytes[6] << 16) | (bytes[7] << 24),\n        unsigned,\n      );\n    };\n\n    /**\n     * Creates a Long from its big endian byte representation.\n     * @param {!Array.<number>} bytes Big endian byte representation\n     * @param {boolean=} unsigned Whether unsigned or not, defaults to signed\n     * @returns {Long} The corresponding Long value\n     */\n    Long.fromBytesBE = function fromBytesBE(bytes, unsigned) {\n      return new Long(\n        (bytes[4] << 24) | (bytes[5] << 16) | (bytes[6] << 8) | bytes[7],\n        (bytes[0] << 24) | (bytes[1] << 16) | (bytes[2] << 8) | bytes[3],\n        unsigned,\n      );\n    };\n\n    // Support conversion to/from BigInt where available\n    if (typeof BigInt === \"function\") {\n      /**\n       * Returns a Long representing the given big integer.\n       * @function\n       * @param {number} value The big integer value\n       * @param {boolean=} unsigned Whether unsigned or not, defaults to signed\n       * @returns {!Long} The corresponding Long value\n       */\n      Long.fromBigInt = function fromBigInt(value, unsigned) {\n        var lowBits = Number(BigInt.asIntN(32, value));\n        var highBits = Number(BigInt.asIntN(32, value >> BigInt(32)));\n        return fromBits(lowBits, highBits, unsigned);\n      };\n\n      // Override\n      Long.fromValue = function fromValueWithBigInt(value, unsigned) {\n        if (typeof value === \"bigint\") return Long.fromBigInt(value, unsigned);\n        return fromValue(value, unsigned);\n      };\n\n      /**\n       * Converts the Long to its big integer representation.\n       * @this {!Long}\n       * @returns {bigint}\n       */\n      LongPrototype.toBigInt = function toBigInt() {\n        var lowBigInt = BigInt(this.low >>> 0);\n        var highBigInt = BigInt(this.unsigned ? this.high >>> 0 : this.high);\n        return (highBigInt << BigInt(32)) | lowBigInt;\n      };\n    }\n    var _default = (_exports.default = Long);\n  },\n);\n", null, "/*\n * Copyright 2021 gRPC authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n */\n\nimport { isIPv4, isIPv6 } from 'net';\nimport { OrderedMap, type OrderedMapIterator } from '@js-sdsl/ordered-map';\nimport { ConnectivityState } from './connectivity-state';\nimport { Status } from './constants';\nimport { Timestamp } from './generated/google/protobuf/Timestamp';\nimport { Channel as ChannelMessage } from './generated/grpc/channelz/v1/Channel';\nimport { ChannelConnectivityState__Output } from './generated/grpc/channelz/v1/ChannelConnectivityState';\nimport { ChannelRef as ChannelRefMessage } from './generated/grpc/channelz/v1/ChannelRef';\nimport { ChannelTrace } from './generated/grpc/channelz/v1/ChannelTrace';\nimport { GetChannelRequest__Output } from './generated/grpc/channelz/v1/GetChannelRequest';\nimport { GetChannelResponse } from './generated/grpc/channelz/v1/GetChannelResponse';\nimport { sendUnaryData, ServerUnaryCall } from './server-call';\nimport { ServerRef as ServerRefMessage } from './generated/grpc/channelz/v1/ServerRef';\nimport { SocketRef as SocketRefMessage } from './generated/grpc/channelz/v1/SocketRef';\nimport {\n  isTcpSubchannelAddress,\n  SubchannelAddress,\n} from './subchannel-address';\nimport { SubchannelRef as SubchannelRefMessage } from './generated/grpc/channelz/v1/SubchannelRef';\nimport { GetServerRequest__Output } from './generated/grpc/channelz/v1/GetServerRequest';\nimport { GetServerResponse } from './generated/grpc/channelz/v1/GetServerResponse';\nimport { Server as ServerMessage } from './generated/grpc/channelz/v1/Server';\nimport { GetServersRequest__Output } from './generated/grpc/channelz/v1/GetServersRequest';\nimport { GetServersResponse } from './generated/grpc/channelz/v1/GetServersResponse';\nimport { GetTopChannelsRequest__Output } from './generated/grpc/channelz/v1/GetTopChannelsRequest';\nimport { GetTopChannelsResponse } from './generated/grpc/channelz/v1/GetTopChannelsResponse';\nimport { GetSubchannelRequest__Output } from './generated/grpc/channelz/v1/GetSubchannelRequest';\nimport { GetSubchannelResponse } from './generated/grpc/channelz/v1/GetSubchannelResponse';\nimport { Subchannel as SubchannelMessage } from './generated/grpc/channelz/v1/Subchannel';\nimport { GetSocketRequest__Output } from './generated/grpc/channelz/v1/GetSocketRequest';\nimport { GetSocketResponse } from './generated/grpc/channelz/v1/GetSocketResponse';\nimport { Socket as SocketMessage } from './generated/grpc/channelz/v1/Socket';\nimport { Address } from './generated/grpc/channelz/v1/Address';\nimport { Security } from './generated/grpc/channelz/v1/Security';\nimport { GetServerSocketsRequest__Output } from './generated/grpc/channelz/v1/GetServerSocketsRequest';\nimport { GetServerSocketsResponse } from './generated/grpc/channelz/v1/GetServerSocketsResponse';\nimport {\n  ChannelzDefinition,\n  ChannelzHandlers,\n} from './generated/grpc/channelz/v1/Channelz';\nimport { ProtoGrpcType as ChannelzProtoGrpcType } from './generated/channelz';\nimport type { loadSync } from '@grpc/proto-loader';\nimport { registerAdminService } from './admin';\nimport { loadPackageDefinition } from './make-client';\n\nexport type TraceSeverity =\n  | 'CT_UNKNOWN'\n  | 'CT_INFO'\n  | 'CT_WARNING'\n  | 'CT_ERROR';\n\ninterface Ref {\n  kind: EntityTypes;\n  id: number;\n  name: string;\n}\n\nexport interface ChannelRef extends Ref {\n  kind: EntityTypes.channel;\n}\n\nexport interface SubchannelRef extends Ref {\n  kind: EntityTypes.subchannel;\n}\n\nexport interface ServerRef extends Ref {\n  kind: EntityTypes.server;\n}\n\nexport interface SocketRef extends Ref {\n  kind: EntityTypes.socket;\n}\n\nfunction channelRefToMessage(ref: ChannelRef): ChannelRefMessage {\n  return {\n    channel_id: ref.id,\n    name: ref.name,\n  };\n}\n\nfunction subchannelRefToMessage(ref: SubchannelRef): SubchannelRefMessage {\n  return {\n    subchannel_id: ref.id,\n    name: ref.name,\n  };\n}\n\nfunction serverRefToMessage(ref: ServerRef): ServerRefMessage {\n  return {\n    server_id: ref.id,\n  };\n}\n\nfunction socketRefToMessage(ref: SocketRef): SocketRefMessage {\n  return {\n    socket_id: ref.id,\n    name: ref.name,\n  };\n}\n\ninterface TraceEvent {\n  description: string;\n  severity: TraceSeverity;\n  timestamp: Date;\n  childChannel?: ChannelRef;\n  childSubchannel?: SubchannelRef;\n}\n\n/**\n * The loose upper bound on the number of events that should be retained in a\n * trace. This may be exceeded by up to a factor of 2. Arbitrarily chosen as a\n * number that should be large enough to contain the recent relevant\n * information, but small enough to not use excessive memory.\n */\nconst TARGET_RETAINED_TRACES = 32;\n\n/**\n * Default number of sockets/servers/channels/subchannels to return\n */\nconst DEFAULT_MAX_RESULTS = 100;\n\nexport class ChannelzTraceStub {\n  readonly events: TraceEvent[] = [];\n  readonly creationTimestamp: Date = new Date();\n  readonly eventsLogged = 0;\n\n  addTrace(): void {}\n  getTraceMessage(): ChannelTrace {\n    return {\n      creation_timestamp: dateToProtoTimestamp(this.creationTimestamp),\n      num_events_logged: this.eventsLogged,\n      events: [],\n    };\n  }\n}\n\nexport class ChannelzTrace {\n  events: TraceEvent[] = [];\n  creationTimestamp: Date;\n  eventsLogged = 0;\n\n  constructor() {\n    this.creationTimestamp = new Date();\n  }\n\n  addTrace(\n    severity: TraceSeverity,\n    description: string,\n    child?: ChannelRef | SubchannelRef\n  ) {\n    const timestamp = new Date();\n    this.events.push({\n      description: description,\n      severity: severity,\n      timestamp: timestamp,\n      childChannel: child?.kind === 'channel' ? child : undefined,\n      childSubchannel: child?.kind === 'subchannel' ? child : undefined,\n    });\n    // Whenever the trace array gets too large, discard the first half\n    if (this.events.length >= TARGET_RETAINED_TRACES * 2) {\n      this.events = this.events.slice(TARGET_RETAINED_TRACES);\n    }\n    this.eventsLogged += 1;\n  }\n\n  getTraceMessage(): ChannelTrace {\n    return {\n      creation_timestamp: dateToProtoTimestamp(this.creationTimestamp),\n      num_events_logged: this.eventsLogged,\n      events: this.events.map(event => {\n        return {\n          description: event.description,\n          severity: event.severity,\n          timestamp: dateToProtoTimestamp(event.timestamp),\n          channel_ref: event.childChannel\n            ? channelRefToMessage(event.childChannel)\n            : null,\n          subchannel_ref: event.childSubchannel\n            ? subchannelRefToMessage(event.childSubchannel)\n            : null,\n        };\n      }),\n    };\n  }\n}\n\ntype RefOrderedMap = OrderedMap<\n  number,\n  { ref: { id: number; kind: EntityTypes; name: string }; count: number }\n>;\n\nexport class ChannelzChildrenTracker {\n  private channelChildren: RefOrderedMap = new OrderedMap();\n  private subchannelChildren: RefOrderedMap = new OrderedMap();\n  private socketChildren: RefOrderedMap = new OrderedMap();\n  private trackerMap = {\n    [EntityTypes.channel]: this.channelChildren,\n    [EntityTypes.subchannel]: this.subchannelChildren,\n    [EntityTypes.socket]: this.socketChildren,\n  } as const;\n\n  refChild(child: ChannelRef | SubchannelRef | SocketRef) {\n    const tracker = this.trackerMap[child.kind];\n    const trackedChild = tracker.find(child.id);\n\n    if (trackedChild.equals(tracker.end())) {\n      tracker.setElement(\n        child.id,\n        {\n          ref: child,\n          count: 1,\n        },\n        trackedChild\n      );\n    } else {\n      trackedChild.pointer[1].count += 1;\n    }\n  }\n\n  unrefChild(child: ChannelRef | SubchannelRef | SocketRef) {\n    const tracker = this.trackerMap[child.kind];\n    const trackedChild = tracker.getElementByKey(child.id);\n    if (trackedChild !== undefined) {\n      trackedChild.count -= 1;\n      if (trackedChild.count === 0) {\n        tracker.eraseElementByKey(child.id);\n      }\n    }\n  }\n\n  getChildLists(): ChannelzChildren {\n    return {\n      channels: this.channelChildren as ChannelzChildren['channels'],\n      subchannels: this.subchannelChildren as ChannelzChildren['subchannels'],\n      sockets: this.socketChildren as ChannelzChildren['sockets'],\n    };\n  }\n}\n\nexport class ChannelzChildrenTrackerStub extends ChannelzChildrenTracker {\n  override refChild(): void {}\n  override unrefChild(): void {}\n}\n\nexport class ChannelzCallTracker {\n  callsStarted = 0;\n  callsSucceeded = 0;\n  callsFailed = 0;\n  lastCallStartedTimestamp: Date | null = null;\n\n  addCallStarted() {\n    this.callsStarted += 1;\n    this.lastCallStartedTimestamp = new Date();\n  }\n  addCallSucceeded() {\n    this.callsSucceeded += 1;\n  }\n  addCallFailed() {\n    this.callsFailed += 1;\n  }\n}\n\nexport class ChannelzCallTrackerStub extends ChannelzCallTracker {\n  override addCallStarted() {}\n  override addCallSucceeded() {}\n  override addCallFailed() {}\n}\n\nexport interface ChannelzChildren {\n  channels: OrderedMap<number, { ref: ChannelRef; count: number }>;\n  subchannels: OrderedMap<number, { ref: SubchannelRef; count: number }>;\n  sockets: OrderedMap<number, { ref: SocketRef; count: number }>;\n}\n\nexport interface ChannelInfo {\n  target: string;\n  state: ConnectivityState;\n  trace: ChannelzTrace | ChannelzTraceStub;\n  callTracker: ChannelzCallTracker | ChannelzCallTrackerStub;\n  children: ChannelzChildren;\n}\n\nexport type SubchannelInfo = ChannelInfo;\n\nexport interface ServerInfo {\n  trace: ChannelzTrace;\n  callTracker: ChannelzCallTracker;\n  listenerChildren: ChannelzChildren;\n  sessionChildren: ChannelzChildren;\n}\n\nexport interface TlsInfo {\n  cipherSuiteStandardName: string | null;\n  cipherSuiteOtherName: string | null;\n  localCertificate: Buffer | null;\n  remoteCertificate: Buffer | null;\n}\n\nexport interface SocketInfo {\n  localAddress: SubchannelAddress | null;\n  remoteAddress: SubchannelAddress | null;\n  security: TlsInfo | null;\n  remoteName: string | null;\n  streamsStarted: number;\n  streamsSucceeded: number;\n  streamsFailed: number;\n  messagesSent: number;\n  messagesReceived: number;\n  keepAlivesSent: number;\n  lastLocalStreamCreatedTimestamp: Date | null;\n  lastRemoteStreamCreatedTimestamp: Date | null;\n  lastMessageSentTimestamp: Date | null;\n  lastMessageReceivedTimestamp: Date | null;\n  localFlowControlWindow: number | null;\n  remoteFlowControlWindow: number | null;\n}\n\ninterface ChannelEntry {\n  ref: ChannelRef;\n  getInfo(): ChannelInfo;\n}\n\ninterface SubchannelEntry {\n  ref: SubchannelRef;\n  getInfo(): SubchannelInfo;\n}\n\ninterface ServerEntry {\n  ref: ServerRef;\n  getInfo(): ServerInfo;\n}\n\ninterface SocketEntry {\n  ref: SocketRef;\n  getInfo(): SocketInfo;\n}\n\nexport const enum EntityTypes {\n  channel = 'channel',\n  subchannel = 'subchannel',\n  server = 'server',\n  socket = 'socket',\n}\n\ntype EntryOrderedMap = OrderedMap<number, { ref: Ref; getInfo: () => any }>;\n\nconst entityMaps = {\n  [EntityTypes.channel]: new OrderedMap<number, ChannelEntry>(),\n  [EntityTypes.subchannel]: new OrderedMap<number, SubchannelEntry>(),\n  [EntityTypes.server]: new OrderedMap<number, ServerEntry>(),\n  [EntityTypes.socket]: new OrderedMap<number, SocketEntry>(),\n} as const;\n\nexport type RefByType<T extends EntityTypes> = T extends EntityTypes.channel\n  ? ChannelRef\n  : T extends EntityTypes.server\n  ? ServerRef\n  : T extends EntityTypes.socket\n  ? SocketRef\n  : T extends EntityTypes.subchannel\n  ? SubchannelRef\n  : never;\n\nexport type EntryByType<T extends EntityTypes> = T extends EntityTypes.channel\n  ? ChannelEntry\n  : T extends EntityTypes.server\n  ? ServerEntry\n  : T extends EntityTypes.socket\n  ? SocketEntry\n  : T extends EntityTypes.subchannel\n  ? SubchannelEntry\n  : never;\n\nexport type InfoByType<T extends EntityTypes> = T extends EntityTypes.channel\n  ? ChannelInfo\n  : T extends EntityTypes.subchannel\n  ? SubchannelInfo\n  : T extends EntityTypes.server\n  ? ServerInfo\n  : T extends EntityTypes.socket\n  ? SocketInfo\n  : never;\n\nconst generateRegisterFn = <R extends EntityTypes>(kind: R) => {\n  let nextId = 1;\n  function getNextId(): number {\n    return nextId++;\n  }\n\n  const entityMap: EntryOrderedMap = entityMaps[kind];\n\n  return (\n    name: string,\n    getInfo: () => InfoByType<R>,\n    channelzEnabled: boolean\n  ): RefByType<R> => {\n    const id = getNextId();\n    const ref = { id, name, kind } as RefByType<R>;\n    if (channelzEnabled) {\n      entityMap.setElement(id, { ref, getInfo });\n    }\n    return ref;\n  };\n};\n\nexport const registerChannelzChannel = generateRegisterFn(EntityTypes.channel);\nexport const registerChannelzSubchannel = generateRegisterFn(\n  EntityTypes.subchannel\n);\nexport const registerChannelzServer = generateRegisterFn(EntityTypes.server);\nexport const registerChannelzSocket = generateRegisterFn(EntityTypes.socket);\n\nexport function unregisterChannelzRef(\n  ref: ChannelRef | SubchannelRef | ServerRef | SocketRef\n) {\n  entityMaps[ref.kind].eraseElementByKey(ref.id);\n}\n\n/**\n * Parse a single section of an IPv6 address as two bytes\n * @param addressSection A hexadecimal string of length up to 4\n * @returns The pair of bytes representing this address section\n */\nfunction parseIPv6Section(addressSection: string): [number, number] {\n  const numberValue = Number.parseInt(addressSection, 16);\n  return [(numberValue / 256) | 0, numberValue % 256];\n}\n\n/**\n * Parse a chunk of an IPv6 address string to some number of bytes\n * @param addressChunk Some number of segments of up to 4 hexadecimal\n *   characters each, joined by colons.\n * @returns The list of bytes representing this address chunk\n */\nfunction parseIPv6Chunk(addressChunk: string): number[] {\n  if (addressChunk === '') {\n    return [];\n  }\n  const bytePairs = addressChunk\n    .split(':')\n    .map(section => parseIPv6Section(section));\n  const result: number[] = [];\n  return result.concat(...bytePairs);\n}\n\nfunction isIPv6MappedIPv4(ipAddress: string) {\n  return isIPv6(ipAddress) && ipAddress.toLowerCase().startsWith('::ffff:') && isIPv4(ipAddress.substring(7));\n}\n\n/**\n * Prerequisite: isIPv4(ipAddress)\n * @param ipAddress\n * @returns\n */\nfunction ipv4AddressStringToBuffer(ipAddress: string): Buffer {\n  return Buffer.from(\n    Uint8Array.from(\n      ipAddress.split('.').map(segment => Number.parseInt(segment))\n    )\n  );\n}\n\n/**\n * Converts an IPv4 or IPv6 address from string representation to binary\n * representation\n * @param ipAddress an IP address in standard IPv4 or IPv6 text format\n * @returns\n */\nfunction ipAddressStringToBuffer(ipAddress: string): Buffer | null {\n  if (isIPv4(ipAddress)) {\n    return ipv4AddressStringToBuffer(ipAddress);\n  } else if (isIPv6MappedIPv4(ipAddress)) {\n    return ipv4AddressStringToBuffer(ipAddress.substring(7));\n  } else if (isIPv6(ipAddress)) {\n    let leftSection: string;\n    let rightSection: string;\n    const doubleColonIndex = ipAddress.indexOf('::');\n    if (doubleColonIndex === -1) {\n      leftSection = ipAddress;\n      rightSection = '';\n    } else {\n      leftSection = ipAddress.substring(0, doubleColonIndex);\n      rightSection = ipAddress.substring(doubleColonIndex + 2);\n    }\n    const leftBuffer = Buffer.from(parseIPv6Chunk(leftSection));\n    const rightBuffer = Buffer.from(parseIPv6Chunk(rightSection));\n    const middleBuffer = Buffer.alloc(\n      16 - leftBuffer.length - rightBuffer.length,\n      0\n    );\n    return Buffer.concat([leftBuffer, middleBuffer, rightBuffer]);\n  } else {\n    return null;\n  }\n}\n\nfunction connectivityStateToMessage(\n  state: ConnectivityState\n): ChannelConnectivityState__Output {\n  switch (state) {\n    case ConnectivityState.CONNECTING:\n      return {\n        state: 'CONNECTING',\n      };\n    case ConnectivityState.IDLE:\n      return {\n        state: 'IDLE',\n      };\n    case ConnectivityState.READY:\n      return {\n        state: 'READY',\n      };\n    case ConnectivityState.SHUTDOWN:\n      return {\n        state: 'SHUTDOWN',\n      };\n    case ConnectivityState.TRANSIENT_FAILURE:\n      return {\n        state: 'TRANSIENT_FAILURE',\n      };\n    default:\n      return {\n        state: 'UNKNOWN',\n      };\n  }\n}\n\nfunction dateToProtoTimestamp(date?: Date | null): Timestamp | null {\n  if (!date) {\n    return null;\n  }\n  const millisSinceEpoch = date.getTime();\n  return {\n    seconds: (millisSinceEpoch / 1000) | 0,\n    nanos: (millisSinceEpoch % 1000) * 1_000_000,\n  };\n}\n\nfunction getChannelMessage(channelEntry: ChannelEntry): ChannelMessage {\n  const resolvedInfo = channelEntry.getInfo();\n  const channelRef: ChannelRefMessage[] = [];\n  const subchannelRef: SubchannelRefMessage[] = [];\n\n  resolvedInfo.children.channels.forEach(el => {\n    channelRef.push(channelRefToMessage(el[1].ref));\n  });\n\n  resolvedInfo.children.subchannels.forEach(el => {\n    subchannelRef.push(subchannelRefToMessage(el[1].ref));\n  });\n\n  return {\n    ref: channelRefToMessage(channelEntry.ref),\n    data: {\n      target: resolvedInfo.target,\n      state: connectivityStateToMessage(resolvedInfo.state),\n      calls_started: resolvedInfo.callTracker.callsStarted,\n      calls_succeeded: resolvedInfo.callTracker.callsSucceeded,\n      calls_failed: resolvedInfo.callTracker.callsFailed,\n      last_call_started_timestamp: dateToProtoTimestamp(\n        resolvedInfo.callTracker.lastCallStartedTimestamp\n      ),\n      trace: resolvedInfo.trace.getTraceMessage(),\n    },\n    channel_ref: channelRef,\n    subchannel_ref: subchannelRef,\n  };\n}\n\nfunction GetChannel(\n  call: ServerUnaryCall<GetChannelRequest__Output, GetChannelResponse>,\n  callback: sendUnaryData<GetChannelResponse>\n): void {\n  const channelId = parseInt(call.request.channel_id, 10);\n  const channelEntry =\n    entityMaps[EntityTypes.channel].getElementByKey(channelId);\n  if (channelEntry === undefined) {\n    callback({\n      code: Status.NOT_FOUND,\n      details: 'No channel data found for id ' + channelId,\n    });\n    return;\n  }\n  callback(null, { channel: getChannelMessage(channelEntry) });\n}\n\nfunction GetTopChannels(\n  call: ServerUnaryCall<GetTopChannelsRequest__Output, GetTopChannelsResponse>,\n  callback: sendUnaryData<GetTopChannelsResponse>\n): void {\n  const maxResults =\n    parseInt(call.request.max_results, 10) || DEFAULT_MAX_RESULTS;\n  const resultList: ChannelMessage[] = [];\n  const startId = parseInt(call.request.start_channel_id, 10);\n  const channelEntries = entityMaps[EntityTypes.channel];\n\n  let i: OrderedMapIterator<number, ChannelEntry>;\n  for (\n    i = channelEntries.lowerBound(startId);\n    !i.equals(channelEntries.end()) && resultList.length < maxResults;\n    i = i.next()\n  ) {\n    resultList.push(getChannelMessage(i.pointer[1]));\n  }\n\n  callback(null, {\n    channel: resultList,\n    end: i.equals(channelEntries.end()),\n  });\n}\n\nfunction getServerMessage(serverEntry: ServerEntry): ServerMessage {\n  const resolvedInfo = serverEntry.getInfo();\n  const listenSocket: SocketRefMessage[] = [];\n\n  resolvedInfo.listenerChildren.sockets.forEach(el => {\n    listenSocket.push(socketRefToMessage(el[1].ref));\n  });\n\n  return {\n    ref: serverRefToMessage(serverEntry.ref),\n    data: {\n      calls_started: resolvedInfo.callTracker.callsStarted,\n      calls_succeeded: resolvedInfo.callTracker.callsSucceeded,\n      calls_failed: resolvedInfo.callTracker.callsFailed,\n      last_call_started_timestamp: dateToProtoTimestamp(\n        resolvedInfo.callTracker.lastCallStartedTimestamp\n      ),\n      trace: resolvedInfo.trace.getTraceMessage(),\n    },\n    listen_socket: listenSocket,\n  };\n}\n\nfunction GetServer(\n  call: ServerUnaryCall<GetServerRequest__Output, GetServerResponse>,\n  callback: sendUnaryData<GetServerResponse>\n): void {\n  const serverId = parseInt(call.request.server_id, 10);\n  const serverEntries = entityMaps[EntityTypes.server];\n  const serverEntry = serverEntries.getElementByKey(serverId);\n  if (serverEntry === undefined) {\n    callback({\n      code: Status.NOT_FOUND,\n      details: 'No server data found for id ' + serverId,\n    });\n    return;\n  }\n  callback(null, { server: getServerMessage(serverEntry) });\n}\n\nfunction GetServers(\n  call: ServerUnaryCall<GetServersRequest__Output, GetServersResponse>,\n  callback: sendUnaryData<GetServersResponse>\n): void {\n  const maxResults =\n    parseInt(call.request.max_results, 10) || DEFAULT_MAX_RESULTS;\n  const startId = parseInt(call.request.start_server_id, 10);\n  const serverEntries = entityMaps[EntityTypes.server];\n  const resultList: ServerMessage[] = [];\n\n  let i: OrderedMapIterator<number, ServerEntry>;\n  for (\n    i = serverEntries.lowerBound(startId);\n    !i.equals(serverEntries.end()) && resultList.length < maxResults;\n    i = i.next()\n  ) {\n    resultList.push(getServerMessage(i.pointer[1]));\n  }\n\n  callback(null, {\n    server: resultList,\n    end: i.equals(serverEntries.end()),\n  });\n}\n\nfunction GetSubchannel(\n  call: ServerUnaryCall<GetSubchannelRequest__Output, GetSubchannelResponse>,\n  callback: sendUnaryData<GetSubchannelResponse>\n): void {\n  const subchannelId = parseInt(call.request.subchannel_id, 10);\n  const subchannelEntry =\n    entityMaps[EntityTypes.subchannel].getElementByKey(subchannelId);\n  if (subchannelEntry === undefined) {\n    callback({\n      code: Status.NOT_FOUND,\n      details: 'No subchannel data found for id ' + subchannelId,\n    });\n    return;\n  }\n  const resolvedInfo = subchannelEntry.getInfo();\n  const listenSocket: SocketRefMessage[] = [];\n\n  resolvedInfo.children.sockets.forEach(el => {\n    listenSocket.push(socketRefToMessage(el[1].ref));\n  });\n\n  const subchannelMessage: SubchannelMessage = {\n    ref: subchannelRefToMessage(subchannelEntry.ref),\n    data: {\n      target: resolvedInfo.target,\n      state: connectivityStateToMessage(resolvedInfo.state),\n      calls_started: resolvedInfo.callTracker.callsStarted,\n      calls_succeeded: resolvedInfo.callTracker.callsSucceeded,\n      calls_failed: resolvedInfo.callTracker.callsFailed,\n      last_call_started_timestamp: dateToProtoTimestamp(\n        resolvedInfo.callTracker.lastCallStartedTimestamp\n      ),\n      trace: resolvedInfo.trace.getTraceMessage(),\n    },\n    socket_ref: listenSocket,\n  };\n  callback(null, { subchannel: subchannelMessage });\n}\n\nfunction subchannelAddressToAddressMessage(\n  subchannelAddress: SubchannelAddress\n): Address {\n  if (isTcpSubchannelAddress(subchannelAddress)) {\n    return {\n      address: 'tcpip_address',\n      tcpip_address: {\n        ip_address:\n          ipAddressStringToBuffer(subchannelAddress.host) ?? undefined,\n        port: subchannelAddress.port,\n      },\n    };\n  } else {\n    return {\n      address: 'uds_address',\n      uds_address: {\n        filename: subchannelAddress.path,\n      },\n    };\n  }\n}\n\nfunction GetSocket(\n  call: ServerUnaryCall<GetSocketRequest__Output, GetSocketResponse>,\n  callback: sendUnaryData<GetSocketResponse>\n): void {\n  const socketId = parseInt(call.request.socket_id, 10);\n  const socketEntry = entityMaps[EntityTypes.socket].getElementByKey(socketId);\n  if (socketEntry === undefined) {\n    callback({\n      code: Status.NOT_FOUND,\n      details: 'No socket data found for id ' + socketId,\n    });\n    return;\n  }\n  const resolvedInfo = socketEntry.getInfo();\n  const securityMessage: Security | null = resolvedInfo.security\n    ? {\n        model: 'tls',\n        tls: {\n          cipher_suite: resolvedInfo.security.cipherSuiteStandardName\n            ? 'standard_name'\n            : 'other_name',\n          standard_name:\n            resolvedInfo.security.cipherSuiteStandardName ?? undefined,\n          other_name: resolvedInfo.security.cipherSuiteOtherName ?? undefined,\n          local_certificate:\n            resolvedInfo.security.localCertificate ?? undefined,\n          remote_certificate:\n            resolvedInfo.security.remoteCertificate ?? undefined,\n        },\n      }\n    : null;\n  const socketMessage: SocketMessage = {\n    ref: socketRefToMessage(socketEntry.ref),\n    local: resolvedInfo.localAddress\n      ? subchannelAddressToAddressMessage(resolvedInfo.localAddress)\n      : null,\n    remote: resolvedInfo.remoteAddress\n      ? subchannelAddressToAddressMessage(resolvedInfo.remoteAddress)\n      : null,\n    remote_name: resolvedInfo.remoteName ?? undefined,\n    security: securityMessage,\n    data: {\n      keep_alives_sent: resolvedInfo.keepAlivesSent,\n      streams_started: resolvedInfo.streamsStarted,\n      streams_succeeded: resolvedInfo.streamsSucceeded,\n      streams_failed: resolvedInfo.streamsFailed,\n      last_local_stream_created_timestamp: dateToProtoTimestamp(\n        resolvedInfo.lastLocalStreamCreatedTimestamp\n      ),\n      last_remote_stream_created_timestamp: dateToProtoTimestamp(\n        resolvedInfo.lastRemoteStreamCreatedTimestamp\n      ),\n      messages_received: resolvedInfo.messagesReceived,\n      messages_sent: resolvedInfo.messagesSent,\n      last_message_received_timestamp: dateToProtoTimestamp(\n        resolvedInfo.lastMessageReceivedTimestamp\n      ),\n      last_message_sent_timestamp: dateToProtoTimestamp(\n        resolvedInfo.lastMessageSentTimestamp\n      ),\n      local_flow_control_window: resolvedInfo.localFlowControlWindow\n        ? { value: resolvedInfo.localFlowControlWindow }\n        : null,\n      remote_flow_control_window: resolvedInfo.remoteFlowControlWindow\n        ? { value: resolvedInfo.remoteFlowControlWindow }\n        : null,\n    },\n  };\n  callback(null, { socket: socketMessage });\n}\n\nfunction GetServerSockets(\n  call: ServerUnaryCall<\n    GetServerSocketsRequest__Output,\n    GetServerSocketsResponse\n  >,\n  callback: sendUnaryData<GetServerSocketsResponse>\n): void {\n  const serverId = parseInt(call.request.server_id, 10);\n  const serverEntry = entityMaps[EntityTypes.server].getElementByKey(serverId);\n\n  if (serverEntry === undefined) {\n    callback({\n      code: Status.NOT_FOUND,\n      details: 'No server data found for id ' + serverId,\n    });\n    return;\n  }\n\n  const startId = parseInt(call.request.start_socket_id, 10);\n  const maxResults =\n    parseInt(call.request.max_results, 10) || DEFAULT_MAX_RESULTS;\n  const resolvedInfo = serverEntry.getInfo();\n  // If we wanted to include listener sockets in the result, this line would\n  // instead say\n  // const allSockets = resolvedInfo.listenerChildren.sockets.concat(resolvedInfo.sessionChildren.sockets).sort((ref1, ref2) => ref1.id - ref2.id);\n  const allSockets = resolvedInfo.sessionChildren.sockets;\n  const resultList: SocketRefMessage[] = [];\n\n  let i: OrderedMapIterator<number, { ref: SocketRef }>;\n  for (\n    i = allSockets.lowerBound(startId);\n    !i.equals(allSockets.end()) && resultList.length < maxResults;\n    i = i.next()\n  ) {\n    resultList.push(socketRefToMessage(i.pointer[1].ref));\n  }\n\n  callback(null, {\n    socket_ref: resultList,\n    end: i.equals(allSockets.end()),\n  });\n}\n\nexport function getChannelzHandlers(): ChannelzHandlers {\n  return {\n    GetChannel,\n    GetTopChannels,\n    GetServer,\n    GetServers,\n    GetSubchannel,\n    GetSocket,\n    GetServerSockets,\n  };\n}\n\nlet loadedChannelzDefinition: ChannelzDefinition | null = null;\n\nexport function getChannelzServiceDefinition(): ChannelzDefinition {\n  if (loadedChannelzDefinition) {\n    return loadedChannelzDefinition;\n  }\n  /* The purpose of this complexity is to avoid loading @grpc/proto-loader at\n   * runtime for users who will not use/enable channelz. */\n  const loaderLoadSync = require('@grpc/proto-loader')\n    .loadSync as typeof loadSync;\n  const loadedProto = loaderLoadSync('channelz.proto', {\n    keepCase: true,\n    longs: String,\n    enums: String,\n    defaults: true,\n    oneofs: true,\n    includeDirs: [`${__dirname}/../../proto`],\n  });\n  const channelzGrpcObject = loadPackageDefinition(\n    loadedProto\n  ) as unknown as ChannelzProtoGrpcType;\n  loadedChannelzDefinition =\n    channelzGrpcObject.grpc.channelz.v1.Channelz.service;\n  return loadedChannelzDefinition;\n}\n\nexport function setup() {\n  registerAdminService(getChannelzServiceDefinition, getChannelzHandlers);\n}\n", "/*\n * Copyright 2022 gRPC authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n */\n\nlet nextCallNumber = 0;\n\nexport function getNextCallNumber() {\n  return nextCallNumber++;\n}\n", "/*\n * Copyright 2021 gRPC authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n */\n\nexport enum CompressionAlgorithms {\n  identity = 0,\n  deflate = 1,\n  gzip = 2,\n}\n", "/*\n * Copyright 2019 gRPC authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n */\n\nimport { StatusObject, WriteObject } from './call-interface';\nimport { Metadata } from './metadata';\n\n/**\n * Filter classes represent related per-call logic and state that is primarily\n * used to modify incoming and outgoing data. All async filters can be\n * rejected. The rejection error must be a StatusObject, and a rejection will\n * cause the call to end with that status.\n */\nexport interface Filter {\n  sendMetadata(metadata: Promise<Metadata>): Promise<Metadata>;\n\n  receiveMetadata(metadata: Metadata): Metadata;\n\n  sendMessage(message: Promise<WriteObject>): Promise<WriteObject>;\n\n  receiveMessage(message: Promise<Buffer>): Promise<Buffer>;\n\n  receiveTrailers(status: StatusObject): StatusObject;\n}\n\nexport abstract class BaseFilter implements Filter {\n  async sendMetadata(metadata: Promise<Metadata>): Promise<Metadata> {\n    return metadata;\n  }\n\n  receiveMetadata(metadata: Metadata): Metadata {\n    return metadata;\n  }\n\n  async sendMessage(message: Promise<WriteObject>): Promise<WriteObject> {\n    return message;\n  }\n\n  async receiveMessage(message: Promise<Buffer>): Promise<Buffer> {\n    return message;\n  }\n\n  receiveTrailers(status: StatusObject): StatusObject {\n    return status;\n  }\n}\n\nexport interface FilterFactory<T extends Filter> {\n  createFilter(): T;\n}\n", "/*\n * Copyright 2019 gRPC authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n */\n\nimport * as zlib from 'zlib';\n\nimport { WriteObject, WriteFlags } from './call-interface';\nimport { Channel } from './channel';\nimport { ChannelOptions } from './channel-options';\nimport { CompressionAlgorithms } from './compression-algorithms';\nimport { DEFAULT_MAX_RECEIVE_MESSAGE_LENGTH, DEFAULT_MAX_SEND_MESSAGE_LENGTH, LogVerbosity, Status } from './constants';\nimport { BaseFilter, Filter, FilterFactory } from './filter';\nimport * as logging from './logging';\nimport { Metadata, MetadataValue } from './metadata';\n\nconst isCompressionAlgorithmKey = (\n  key: number\n): key is CompressionAlgorithms => {\n  return (\n    typeof key === 'number' && typeof CompressionAlgorithms[key] === 'string'\n  );\n};\n\ntype CompressionAlgorithm = keyof typeof CompressionAlgorithms;\n\ntype SharedCompressionFilterConfig = {\n  serverSupportedEncodingHeader?: string;\n};\n\nabstract class CompressionHandler {\n  protected abstract compressMessage(message: Buffer): Promise<Buffer>;\n  protected abstract decompressMessage(data: Buffer): Promise<Buffer>;\n  /**\n   * @param message Raw uncompressed message bytes\n   * @param compress Indicates whether the message should be compressed\n   * @return Framed message, compressed if applicable\n   */\n  async writeMessage(message: Buffer, compress: boolean): Promise<Buffer> {\n    let messageBuffer = message;\n    if (compress) {\n      messageBuffer = await this.compressMessage(messageBuffer);\n    }\n    const output = Buffer.allocUnsafe(messageBuffer.length + 5);\n    output.writeUInt8(compress ? 1 : 0, 0);\n    output.writeUInt32BE(messageBuffer.length, 1);\n    messageBuffer.copy(output, 5);\n    return output;\n  }\n  /**\n   * @param data Framed message, possibly compressed\n   * @return Uncompressed message\n   */\n  async readMessage(data: Buffer): Promise<Buffer> {\n    const compressed = data.readUInt8(0) === 1;\n    let messageBuffer: Buffer<ArrayBufferLike> = data.slice(5);\n    if (compressed) {\n      messageBuffer = await this.decompressMessage(messageBuffer);\n    }\n    return messageBuffer;\n  }\n}\n\nclass IdentityHandler extends CompressionHandler {\n  async compressMessage(message: Buffer) {\n    return message;\n  }\n\n  async writeMessage(message: Buffer, compress: boolean): Promise<Buffer> {\n    const output = Buffer.allocUnsafe(message.length + 5);\n    /* With \"identity\" compression, messages should always be marked as\n     * uncompressed */\n    output.writeUInt8(0, 0);\n    output.writeUInt32BE(message.length, 1);\n    message.copy(output, 5);\n    return output;\n  }\n\n  decompressMessage(message: Buffer): Promise<Buffer> {\n    return Promise.reject<Buffer>(\n      new Error(\n        'Received compressed message but \"grpc-encoding\" header was identity'\n      )\n    );\n  }\n}\n\nclass DeflateHandler extends CompressionHandler {\n  constructor(private maxRecvMessageLength: number) {\n    super();\n  }\n\n  compressMessage(message: Buffer) {\n    return new Promise<Buffer>((resolve, reject) => {\n      zlib.deflate(message, (err, output) => {\n        if (err) {\n          reject(err);\n        } else {\n          resolve(output);\n        }\n      });\n    });\n  }\n\n  decompressMessage(message: Buffer) {\n    return new Promise<Buffer>((resolve, reject) => {\n      let totalLength = 0;\n      const messageParts: Buffer[] = [];\n      const decompresser = zlib.createInflate();\n      decompresser.on('data', (chunk: Buffer) => {\n        messageParts.push(chunk);\n        totalLength += chunk.byteLength;\n        if (this.maxRecvMessageLength !== -1 && totalLength > this.maxRecvMessageLength) {\n          decompresser.destroy();\n          reject({\n            code: Status.RESOURCE_EXHAUSTED,\n            details: `Received message that decompresses to a size larger than ${this.maxRecvMessageLength}`\n          });\n        }\n      });\n      decompresser.on('end', () => {\n        resolve(Buffer.concat(messageParts));\n      });\n      decompresser.write(message);\n      decompresser.end();\n    });\n  }\n}\n\nclass GzipHandler extends CompressionHandler {\n  constructor(private maxRecvMessageLength: number) {\n    super();\n  }\n\n  compressMessage(message: Buffer) {\n    return new Promise<Buffer>((resolve, reject) => {\n      zlib.gzip(message, (err, output) => {\n        if (err) {\n          reject(err);\n        } else {\n          resolve(output);\n        }\n      });\n    });\n  }\n\n  decompressMessage(message: Buffer) {\n    return new Promise<Buffer>((resolve, reject) => {\n      let totalLength = 0;\n      const messageParts: Buffer[] = [];\n      const decompresser = zlib.createGunzip();\n      decompresser.on('data', (chunk: Buffer) => {\n        messageParts.push(chunk);\n        totalLength += chunk.byteLength;\n        if (this.maxRecvMessageLength !== -1 && totalLength > this.maxRecvMessageLength) {\n          decompresser.destroy();\n          reject({\n            code: Status.RESOURCE_EXHAUSTED,\n            details: `Received message that decompresses to a size larger than ${this.maxRecvMessageLength}`\n          });\n        }\n      });\n      decompresser.on('end', () => {\n        resolve(Buffer.concat(messageParts));\n      });\n      decompresser.write(message);\n      decompresser.end();\n    });\n  }\n}\n\nclass UnknownHandler extends CompressionHandler {\n  constructor(private readonly compressionName: string) {\n    super();\n  }\n  compressMessage(message: Buffer): Promise<Buffer> {\n    return Promise.reject<Buffer>(\n      new Error(\n        `Received message compressed with unsupported compression method ${this.compressionName}`\n      )\n    );\n  }\n\n  decompressMessage(message: Buffer): Promise<Buffer> {\n    // This should be unreachable\n    return Promise.reject<Buffer>(\n      new Error(`Compression method not supported: ${this.compressionName}`)\n    );\n  }\n}\n\nfunction getCompressionHandler(compressionName: string, maxReceiveMessageSize: number): CompressionHandler {\n  switch (compressionName) {\n    case 'identity':\n      return new IdentityHandler();\n    case 'deflate':\n      return new DeflateHandler(maxReceiveMessageSize);\n    case 'gzip':\n      return new GzipHandler(maxReceiveMessageSize);\n    default:\n      return new UnknownHandler(compressionName);\n  }\n}\n\nexport class CompressionFilter extends BaseFilter implements Filter {\n  private sendCompression: CompressionHandler = new IdentityHandler();\n  private receiveCompression: CompressionHandler = new IdentityHandler();\n  private currentCompressionAlgorithm: CompressionAlgorithm = 'identity';\n  private maxReceiveMessageLength: number;\n  private maxSendMessageLength: number;\n\n  constructor(\n    channelOptions: ChannelOptions,\n    private sharedFilterConfig: SharedCompressionFilterConfig\n  ) {\n    super();\n\n    const compressionAlgorithmKey =\n      channelOptions['grpc.default_compression_algorithm'];\n    this.maxReceiveMessageLength = channelOptions['grpc.max_receive_message_length'] ?? DEFAULT_MAX_RECEIVE_MESSAGE_LENGTH;\n    this.maxSendMessageLength = channelOptions['grpc.max_send_message_length'] ?? DEFAULT_MAX_SEND_MESSAGE_LENGTH;\n    if (compressionAlgorithmKey !== undefined) {\n      if (isCompressionAlgorithmKey(compressionAlgorithmKey)) {\n        const clientSelectedEncoding = CompressionAlgorithms[\n          compressionAlgorithmKey\n        ] as CompressionAlgorithm;\n        const serverSupportedEncodings =\n          sharedFilterConfig.serverSupportedEncodingHeader?.split(',');\n        /**\n         * There are two possible situations here:\n         * 1) We don't have any info yet from the server about what compression it supports\n         *    In that case we should just use what the client tells us to use\n         * 2) We've previously received a response from the server including a grpc-accept-encoding header\n         *    In that case we only want to use the encoding chosen by the client if the server supports it\n         */\n        if (\n          !serverSupportedEncodings ||\n          serverSupportedEncodings.includes(clientSelectedEncoding)\n        ) {\n          this.currentCompressionAlgorithm = clientSelectedEncoding;\n          this.sendCompression = getCompressionHandler(\n            this.currentCompressionAlgorithm,\n            -1\n          );\n        }\n      } else {\n        logging.log(\n          LogVerbosity.ERROR,\n          `Invalid value provided for grpc.default_compression_algorithm option: ${compressionAlgorithmKey}`\n        );\n      }\n    }\n  }\n\n  async sendMetadata(metadata: Promise<Metadata>): Promise<Metadata> {\n    const headers: Metadata = await metadata;\n    headers.set('grpc-accept-encoding', 'identity,deflate,gzip');\n    headers.set('accept-encoding', 'identity');\n\n    // No need to send the header if it's \"identity\" -  behavior is identical; save the bandwidth\n    if (this.currentCompressionAlgorithm === 'identity') {\n      headers.remove('grpc-encoding');\n    } else {\n      headers.set('grpc-encoding', this.currentCompressionAlgorithm);\n    }\n\n    return headers;\n  }\n\n  receiveMetadata(metadata: Metadata): Metadata {\n    const receiveEncoding: MetadataValue[] = metadata.get('grpc-encoding');\n    if (receiveEncoding.length > 0) {\n      const encoding: MetadataValue = receiveEncoding[0];\n      if (typeof encoding === 'string') {\n        this.receiveCompression = getCompressionHandler(encoding, this.maxReceiveMessageLength);\n      }\n    }\n    metadata.remove('grpc-encoding');\n\n    /* Check to see if the compression we're using to send messages is supported by the server\n     * If not, reset the sendCompression filter and have it use the default IdentityHandler */\n    const serverSupportedEncodingsHeader = metadata.get(\n      'grpc-accept-encoding'\n    )[0] as string | undefined;\n    if (serverSupportedEncodingsHeader) {\n      this.sharedFilterConfig.serverSupportedEncodingHeader =\n        serverSupportedEncodingsHeader;\n      const serverSupportedEncodings =\n        serverSupportedEncodingsHeader.split(',');\n\n      if (\n        !serverSupportedEncodings.includes(this.currentCompressionAlgorithm)\n      ) {\n        this.sendCompression = new IdentityHandler();\n        this.currentCompressionAlgorithm = 'identity';\n      }\n    }\n    metadata.remove('grpc-accept-encoding');\n    return metadata;\n  }\n\n  async sendMessage(message: Promise<WriteObject>): Promise<WriteObject> {\n    /* This filter is special. The input message is the bare message bytes,\n     * and the output is a framed and possibly compressed message. For this\n     * reason, this filter should be at the bottom of the filter stack */\n    const resolvedMessage: WriteObject = await message;\n    if (this.maxSendMessageLength !== -1 && resolvedMessage.message.length > this.maxSendMessageLength) {\n      throw {\n        code: Status.RESOURCE_EXHAUSTED,\n        details: `Attempted to send message with a size larger than ${this.maxSendMessageLength}`\n      };\n    }\n    let compress: boolean;\n    if (this.sendCompression instanceof IdentityHandler) {\n      compress = false;\n    } else {\n      compress = ((resolvedMessage.flags ?? 0) & WriteFlags.NoCompress) === 0;\n    }\n\n    return {\n      message: await this.sendCompression.writeMessage(\n        resolvedMessage.message,\n        compress\n      ),\n      flags: resolvedMessage.flags,\n    };\n  }\n\n  async receiveMessage(message: Promise<Buffer>) {\n    /* This filter is also special. The input message is framed and possibly\n     * compressed, and the output message is deframed and uncompressed. So\n     * this is another reason that this filter should be at the bottom of the\n     * filter stack. */\n    return this.receiveCompression.readMessage(await message);\n  }\n}\n\nexport class CompressionFilterFactory\n  implements FilterFactory<CompressionFilter>\n{\n  private sharedFilterConfig: SharedCompressionFilterConfig = {};\n  constructor(channel: Channel, private readonly options: ChannelOptions) {}\n  createFilter(): CompressionFilter {\n    return new CompressionFilter(this.options, this.sharedFilterConfig);\n  }\n}\n", "/*\n * Copyright 2022 gRPC authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n */\n\nimport { Status } from './constants';\n\nconst INAPPROPRIATE_CONTROL_PLANE_CODES: Status[] = [\n  Status.OK,\n  Status.INVALID_ARGUMENT,\n  Status.NOT_FOUND,\n  Status.ALREADY_EXISTS,\n  Status.FAILED_PRECONDITION,\n  Status.ABORTED,\n  Status.OUT_OF_RANGE,\n  Status.DATA_LOSS,\n];\n\nexport function restrictControlPlaneStatusCode(\n  code: Status,\n  details: string\n): { code: Status; details: string } {\n  if (INAPPROPRIATE_CONTROL_PLANE_CODES.includes(code)) {\n    return {\n      code: Status.INTERNAL,\n      details: `Invalid status from control plane: ${code} ${Status[code]} ${details}`,\n    };\n  } else {\n    return { code, details };\n  }\n}\n", "/*\n * Copyright 2019 gRPC authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n */\n\nexport type Deadline = Date | number;\n\nexport function minDeadline(...deadlineList: Deadline[]): Deadline {\n  let minValue = Infinity;\n  for (const deadline of deadlineList) {\n    const deadlineMsecs =\n      deadline instanceof Date ? deadline.getTime() : deadline;\n    if (deadlineMsecs < minValue) {\n      minValue = deadlineMsecs;\n    }\n  }\n  return minValue;\n}\n\nconst units: Array<[string, number]> = [\n  ['m', 1],\n  ['S', 1000],\n  ['M', 60 * 1000],\n  ['H', 60 * 60 * 1000],\n];\n\nexport function getDeadlineTimeoutString(deadline: Deadline) {\n  const now = new Date().getTime();\n  if (deadline instanceof Date) {\n    deadline = deadline.getTime();\n  }\n  const timeoutMs = Math.max(deadline - now, 0);\n  for (const [unit, factor] of units) {\n    const amount = timeoutMs / factor;\n    if (amount < 1e8) {\n      return String(Math.ceil(amount)) + unit;\n    }\n  }\n  throw new Error('Deadline is too far in the future');\n}\n\n/**\n * See https://nodejs.org/api/timers.html#settimeoutcallback-delay-args\n * In particular, \"When delay is larger than 2147483647 or less than 1, the\n * delay will be set to 1. Non-integer delays are truncated to an integer.\"\n * This number of milliseconds is almost 25 days.\n */\nconst MAX_TIMEOUT_TIME = 2147483647;\n\n/**\n * Get the timeout value that should be passed to setTimeout now for the timer\n * to end at the deadline. For any deadline before now, the timer should end\n * immediately, represented by a value of 0. For any deadline more than\n * MAX_TIMEOUT_TIME milliseconds in the future, a timer cannot be set that will\n * end at that time, so it is treated as infinitely far in the future.\n * @param deadline\n * @returns\n */\nexport function getRelativeTimeout(deadline: Deadline) {\n  const deadlineMs = deadline instanceof Date ? deadline.getTime() : deadline;\n  const now = new Date().getTime();\n  const timeout = deadlineMs - now;\n  if (timeout < 0) {\n    return 0;\n  } else if (timeout > MAX_TIMEOUT_TIME) {\n    return Infinity;\n  } else {\n    return timeout;\n  }\n}\n\nexport function deadlineToString(deadline: Deadline): string {\n  if (deadline instanceof Date) {\n    return deadline.toISOString();\n  } else {\n    const dateDeadline = new Date(deadline);\n    if (Number.isNaN(dateDeadline.getTime())) {\n      return '' + deadline;\n    } else {\n      return dateDeadline.toISOString();\n    }\n  }\n}\n\n/**\n * Calculate the difference between two dates as a number of seconds and format\n * it as a string.\n * @param startDate\n * @param endDate\n * @returns\n */\nexport function formatDateDifference(startDate: Date, endDate: Date): string {\n  return ((endDate.getTime() - startDate.getTime()) / 1000).toFixed(3) + 's';\n}\n", "/*\n * Copyright 2019 gRPC authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n */\n\nimport { StatusObject, WriteObject } from './call-interface';\nimport { Filter, FilterFactory } from './filter';\nimport { Metadata } from './metadata';\n\nexport class FilterStack implements Filter {\n  constructor(private readonly filters: Filter[]) {}\n\n  sendMetadata(metadata: Promise<Metadata>): Promise<Metadata> {\n    let result: Promise<Metadata> = metadata;\n\n    for (let i = 0; i < this.filters.length; i++) {\n      result = this.filters[i].sendMetadata(result);\n    }\n\n    return result;\n  }\n\n  receiveMetadata(metadata: Metadata) {\n    let result: Metadata = metadata;\n\n    for (let i = this.filters.length - 1; i >= 0; i--) {\n      result = this.filters[i].receiveMetadata(result);\n    }\n\n    return result;\n  }\n\n  sendMessage(message: Promise<WriteObject>): Promise<WriteObject> {\n    let result: Promise<WriteObject> = message;\n\n    for (let i = 0; i < this.filters.length; i++) {\n      result = this.filters[i].sendMessage(result);\n    }\n\n    return result;\n  }\n\n  receiveMessage(message: Promise<Buffer>): Promise<Buffer> {\n    let result: Promise<Buffer> = message;\n\n    for (let i = this.filters.length - 1; i >= 0; i--) {\n      result = this.filters[i].receiveMessage(result);\n    }\n\n    return result;\n  }\n\n  receiveTrailers(status: StatusObject): StatusObject {\n    let result: StatusObject = status;\n\n    for (let i = this.filters.length - 1; i >= 0; i--) {\n      result = this.filters[i].receiveTrailers(result);\n    }\n\n    return result;\n  }\n\n  push(filters: Filter[]) {\n    this.filters.unshift(...filters);\n  }\n\n  getFilters(): Filter[] {\n    return this.filters;\n  }\n}\n\nexport class FilterStackFactory implements FilterFactory<FilterStack> {\n  constructor(private readonly factories: Array<FilterFactory<Filter>>) {}\n\n  push(filterFactories: FilterFactory<Filter>[]) {\n    this.factories.unshift(...filterFactories);\n  }\n\n  clone(): FilterStackFactory {\n    return new FilterStackFactory([...this.factories]);\n  }\n\n  createFilter(): FilterStack {\n    return new FilterStack(\n      this.factories.map(factory => factory.createFilter())\n    );\n  }\n}\n", "/*\n * Copyright 2025 gRPC authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n */\n\nimport { AuthContext } from \"./auth-context\";\nimport { CallCredentials } from \"./call-credentials\";\nimport { Call, CallStreamOptions, InterceptingListener, MessageContext, StatusObject } from \"./call-interface\";\nimport { getNextCallNumber } from \"./call-number\";\nimport { Channel } from \"./channel\";\nimport { ChannelOptions } from \"./channel-options\";\nimport { ChannelRef, ChannelzCallTracker, ChannelzChildrenTracker, ChannelzTrace, registerChannelzChannel, unregisterChannelzRef } from \"./channelz\";\nimport { CompressionFilterFactory } from \"./compression-filter\";\nimport { ConnectivityState } from \"./connectivity-state\";\nimport { Propagate, Status } from \"./constants\";\nimport { restrictControlPlaneStatusCode } from \"./control-plane-status\";\nimport { Deadline, getRelativeTimeout } from \"./deadline\";\nimport { FilterStack, FilterStackFactory } from \"./filter-stack\";\nimport { Metadata } from \"./metadata\";\nimport { getDefaultAuthority } from \"./resolver\";\nimport { Subchannel } from \"./subchannel\";\nimport { SubchannelCall } from \"./subchannel-call\";\nimport { GrpcUri, splitHostPort, uriToString } from \"./uri-parser\";\n\nclass SubchannelCallWrapper implements Call {\n  private childCall: SubchannelCall | null = null;\n  private pendingMessage: { context: MessageContext; message: Buffer } | null =\n    null;\n  private readPending = false;\n  private halfClosePending = false;\n  private pendingStatus: StatusObject | null = null;\n  private serviceUrl: string;\n  private filterStack: FilterStack;\n  private readFilterPending = false;\n  private writeFilterPending = false;\n  constructor(private subchannel: Subchannel, private method: string, filterStackFactory: FilterStackFactory, private options: CallStreamOptions, private callNumber: number) {\n    const splitPath: string[] = this.method.split('/');\n    let serviceName = '';\n    /* The standard path format is \"/{serviceName}/{methodName}\", so if we split\n      * by '/', the first item should be empty and the second should be the\n      * service name */\n    if (splitPath.length >= 2) {\n      serviceName = splitPath[1];\n    }\n    const hostname = splitHostPort(this.options.host)?.host ?? 'localhost';\n    /* Currently, call credentials are only allowed on HTTPS connections, so we\n      * can assume that the scheme is \"https\" */\n    this.serviceUrl = `https://${hostname}/${serviceName}`;\n    const timeout = getRelativeTimeout(options.deadline);\n    if (timeout !== Infinity) {\n      if (timeout <= 0) {\n        this.cancelWithStatus(Status.DEADLINE_EXCEEDED, 'Deadline exceeded');\n      } else {\n        setTimeout(() => {\n          this.cancelWithStatus(Status.DEADLINE_EXCEEDED, 'Deadline exceeded');\n        }, timeout);\n      }\n    }\n    this.filterStack = filterStackFactory.createFilter();\n  }\n\n  cancelWithStatus(status: Status, details: string): void {\n    if (this.childCall) {\n      this.childCall.cancelWithStatus(status, details);\n    } else {\n      this.pendingStatus = {\n        code: status,\n        details: details,\n        metadata: new Metadata()\n      };\n    }\n\n  }\n  getPeer(): string {\n    return this.childCall?.getPeer() ?? this.subchannel.getAddress();\n  }\n  async start(metadata: Metadata, listener: InterceptingListener): Promise<void> {\n    if (this.pendingStatus) {\n      listener.onReceiveStatus(this.pendingStatus);\n      return;\n    }\n    if (this.subchannel.getConnectivityState() !== ConnectivityState.READY) {\n      listener.onReceiveStatus({\n        code: Status.UNAVAILABLE,\n        details: 'Subchannel not ready',\n        metadata: new Metadata()\n      });\n      return;\n    }\n    const filteredMetadata = await this.filterStack.sendMetadata(Promise.resolve(metadata));\n    let credsMetadata: Metadata;\n    try {\n      credsMetadata = await this.subchannel.getCallCredentials()\n        .generateMetadata({method_name: this.method, service_url: this.serviceUrl});\n    } catch (e) {\n      const error = e as (Error & { code: number });\n      const { code, details } = restrictControlPlaneStatusCode(\n        typeof error.code === 'number' ? error.code : Status.UNKNOWN,\n        `Getting metadata from plugin failed with error: ${error.message}`\n      );\n      listener.onReceiveStatus(\n        {\n          code: code,\n          details: details,\n          metadata: new Metadata(),\n        }\n      );\n      return;\n    }\n    credsMetadata.merge(filteredMetadata);\n    const childListener: InterceptingListener = {\n      onReceiveMetadata: async metadata => {\n        listener.onReceiveMetadata(await this.filterStack.receiveMetadata(metadata));\n      },\n      onReceiveMessage: async message => {\n        this.readFilterPending = true;\n        const filteredMessage = await this.filterStack.receiveMessage(message);\n        this.readFilterPending = false;\n        listener.onReceiveMessage(filteredMessage);\n        if (this.pendingStatus) {\n          listener.onReceiveStatus(this.pendingStatus);\n        }\n      },\n      onReceiveStatus: async status => {\n        const filteredStatus = await this.filterStack.receiveTrailers(status);\n        if (this.readFilterPending) {\n          this.pendingStatus = filteredStatus;\n        } else {\n          listener.onReceiveStatus(filteredStatus);\n        }\n      }\n    }\n    this.childCall = this.subchannel.createCall(credsMetadata, this.options.host, this.method, childListener);\n    if (this.readPending) {\n      this.childCall.startRead();\n    }\n    if (this.pendingMessage) {\n      this.childCall.sendMessageWithContext(this.pendingMessage.context, this.pendingMessage.message);\n    }\n    if (this.halfClosePending && !this.writeFilterPending) {\n      this.childCall.halfClose();\n    }\n  }\n  async sendMessageWithContext(context: MessageContext, message: Buffer): Promise<void> {\n    this.writeFilterPending = true;\n    const filteredMessage = await this.filterStack.sendMessage(Promise.resolve({message: message, flags: context.flags}));\n    this.writeFilterPending = false;\n    if (this.childCall) {\n      this.childCall.sendMessageWithContext(context, filteredMessage.message);\n      if (this.halfClosePending) {\n        this.childCall.halfClose();\n      }\n    } else {\n      this.pendingMessage = { context, message: filteredMessage.message };\n    }\n  }\n  startRead(): void {\n    if (this.childCall) {\n      this.childCall.startRead();\n    } else {\n      this.readPending = true;\n    }\n  }\n  halfClose(): void {\n    if (this.childCall && !this.writeFilterPending) {\n      this.childCall.halfClose();\n    } else {\n      this.halfClosePending = true;\n    }\n  }\n  getCallNumber(): number {\n    return this.callNumber;\n  }\n  setCredentials(credentials: CallCredentials): void {\n    throw new Error(\"Method not implemented.\");\n  }\n  getAuthContext(): AuthContext | null {\n    if (this.childCall) {\n      return this.childCall.getAuthContext();\n    } else {\n      return null;\n    }\n  }\n}\n\nexport class SingleSubchannelChannel implements Channel {\n  private channelzRef: ChannelRef;\n  private channelzEnabled = false;\n  private channelzTrace = new ChannelzTrace();\n  private callTracker = new ChannelzCallTracker();\n  private childrenTracker = new ChannelzChildrenTracker();\n  private filterStackFactory: FilterStackFactory;\n  constructor(private subchannel: Subchannel, private target: GrpcUri, options: ChannelOptions) {\n    this.channelzEnabled = options['grpc.enable_channelz'] !== 0;\n    this.channelzRef = registerChannelzChannel(uriToString(target),  () => ({\n      target: `${uriToString(target)} (${subchannel.getAddress()})`,\n      state: this.subchannel.getConnectivityState(),\n      trace: this.channelzTrace,\n      callTracker: this.callTracker,\n      children: this.childrenTracker.getChildLists()\n    }), this.channelzEnabled);\n    if (this.channelzEnabled) {\n      this.childrenTracker.refChild(subchannel.getChannelzRef());\n    }\n    this.filterStackFactory = new FilterStackFactory([new CompressionFilterFactory(this, options)]);\n  }\n\n  close(): void {\n    if (this.channelzEnabled) {\n      this.childrenTracker.unrefChild(this.subchannel.getChannelzRef());\n    }\n    unregisterChannelzRef(this.channelzRef);\n  }\n\n  getTarget(): string {\n    return uriToString(this.target);\n  }\n  getConnectivityState(tryToConnect: boolean): ConnectivityState {\n    throw new Error(\"Method not implemented.\");\n  }\n  watchConnectivityState(currentState: ConnectivityState, deadline: Date | number, callback: (error?: Error) => void): void {\n    throw new Error(\"Method not implemented.\");\n  }\n  getChannelzRef(): ChannelRef {\n    return this.channelzRef;\n  }\n  createCall(method: string, deadline: Deadline): Call {\n    const callOptions: CallStreamOptions = {\n      deadline: deadline,\n      host: getDefaultAuthority(this.target),\n      flags: Propagate.DEFAULTS,\n      parentCall: null\n    };\n    return new SubchannelCallWrapper(this.subchannel, method, this.filterStackFactory, callOptions, getNextCallNumber());\n  }\n}\n", "/*\n * Copyright 2019 gRPC authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n */\n\nimport { ChannelCredentials, SecureConnector } from './channel-credentials';\nimport { Metadata } from './metadata';\nimport { ChannelOptions } from './channel-options';\nimport { ConnectivityState } from './connectivity-state';\nimport { BackoffTimeout, BackoffOptions } from './backoff-timeout';\nimport * as logging from './logging';\nimport { LogVerbosity, Status } from './constants';\nimport { GrpcUri, uriToString } from './uri-parser';\nimport {\n  SubchannelAddress,\n  subchannelAddressToString,\n} from './subchannel-address';\nimport {\n  SubchannelRef,\n  ChannelzTrace,\n  ChannelzChildrenTracker,\n  ChannelzChildrenTrackerStub,\n  SubchannelInfo,\n  registerChannelzSubchannel,\n  ChannelzCallTracker,\n  ChannelzCallTrackerStub,\n  unregisterChannelzRef,\n  ChannelzTraceStub,\n} from './channelz';\nimport {\n  ConnectivityStateListener,\n  DataWatcher,\n  SubchannelInterface,\n} from './subchannel-interface';\nimport { SubchannelCallInterceptingListener } from './subchannel-call';\nimport { SubchannelCall } from './subchannel-call';\nimport { CallEventTracker, SubchannelConnector, Transport } from './transport';\nimport { CallCredentials } from './call-credentials';\nimport { SingleSubchannelChannel } from './single-subchannel-channel';\nimport { Channel } from './channel';\n\nconst TRACER_NAME = 'subchannel';\n\n/* setInterval and setTimeout only accept signed 32 bit integers. JS doesn't\n * have a constant for the max signed 32 bit integer, so this is a simple way\n * to calculate it */\nconst KEEPALIVE_MAX_TIME_MS = ~(1 << 31);\n\nexport interface DataProducer {\n  addDataWatcher(dataWatcher: DataWatcher): void;\n  removeDataWatcher(dataWatcher: DataWatcher): void;\n}\n\nexport class Subchannel implements SubchannelInterface {\n  /**\n   * The subchannel's current connectivity state. Invariant: `session` === `null`\n   * if and only if `connectivityState` is IDLE or TRANSIENT_FAILURE.\n   */\n  private connectivityState: ConnectivityState = ConnectivityState.IDLE;\n  /**\n   * The underlying http2 session used to make requests.\n   */\n  private transport: Transport | null = null;\n  /**\n   * Indicates that the subchannel should transition from TRANSIENT_FAILURE to\n   * CONNECTING instead of IDLE when the backoff timeout ends.\n   */\n  private continueConnecting = false;\n  /**\n   * A list of listener functions that will be called whenever the connectivity\n   * state changes. Will be modified by `addConnectivityStateListener` and\n   * `removeConnectivityStateListener`\n   */\n  private stateListeners: Set<ConnectivityStateListener> = new Set();\n\n  private backoffTimeout: BackoffTimeout;\n\n  private keepaliveTime: number;\n  /**\n   * Tracks channels and subchannel pools with references to this subchannel\n   */\n  private refcount = 0;\n\n  /**\n   * A string representation of the subchannel address, for logging/tracing\n   */\n  private subchannelAddressString: string;\n\n  // Channelz info\n  private readonly channelzEnabled: boolean = true;\n  private channelzRef: SubchannelRef;\n\n  private channelzTrace: ChannelzTrace | ChannelzTraceStub;\n  private callTracker: ChannelzCallTracker | ChannelzCallTrackerStub;\n  private childrenTracker:\n    | ChannelzChildrenTracker\n    | ChannelzChildrenTrackerStub;\n\n  // Channelz socket info\n  private streamTracker: ChannelzCallTracker | ChannelzCallTrackerStub;\n\n  private secureConnector: SecureConnector;\n\n  private dataProducers: Map<string, DataProducer> = new Map();\n\n  private subchannelChannel: Channel | null = null;\n\n  /**\n   * A class representing a connection to a single backend.\n   * @param channelTarget The target string for the channel as a whole\n   * @param subchannelAddress The address for the backend that this subchannel\n   *     will connect to\n   * @param options The channel options, plus any specific subchannel options\n   *     for this subchannel\n   * @param credentials The channel credentials used to establish this\n   *     connection\n   */\n  constructor(\n    private channelTarget: GrpcUri,\n    private subchannelAddress: SubchannelAddress,\n    private options: ChannelOptions,\n    credentials: ChannelCredentials,\n    private connector: SubchannelConnector\n  ) {\n    const backoffOptions: BackoffOptions = {\n      initialDelay: options['grpc.initial_reconnect_backoff_ms'],\n      maxDelay: options['grpc.max_reconnect_backoff_ms'],\n    };\n    this.backoffTimeout = new BackoffTimeout(() => {\n      this.handleBackoffTimer();\n    }, backoffOptions);\n    this.backoffTimeout.unref();\n    this.subchannelAddressString = subchannelAddressToString(subchannelAddress);\n\n    this.keepaliveTime = options['grpc.keepalive_time_ms'] ?? -1;\n\n    if (options['grpc.enable_channelz'] === 0) {\n      this.channelzEnabled = false;\n      this.channelzTrace = new ChannelzTraceStub();\n      this.callTracker = new ChannelzCallTrackerStub();\n      this.childrenTracker = new ChannelzChildrenTrackerStub();\n      this.streamTracker = new ChannelzCallTrackerStub();\n    } else {\n      this.channelzTrace = new ChannelzTrace();\n      this.callTracker = new ChannelzCallTracker();\n      this.childrenTracker = new ChannelzChildrenTracker();\n      this.streamTracker = new ChannelzCallTracker();\n    }\n\n    this.channelzRef = registerChannelzSubchannel(\n      this.subchannelAddressString,\n      () => this.getChannelzInfo(),\n      this.channelzEnabled\n    );\n\n    this.channelzTrace.addTrace('CT_INFO', 'Subchannel created');\n    this.trace(\n      'Subchannel constructed with options ' +\n        JSON.stringify(options, undefined, 2)\n    );\n    this.secureConnector = credentials._createSecureConnector(channelTarget, options);\n  }\n\n  private getChannelzInfo(): SubchannelInfo {\n    return {\n      state: this.connectivityState,\n      trace: this.channelzTrace,\n      callTracker: this.callTracker,\n      children: this.childrenTracker.getChildLists(),\n      target: this.subchannelAddressString,\n    };\n  }\n\n  private trace(text: string): void {\n    logging.trace(\n      LogVerbosity.DEBUG,\n      TRACER_NAME,\n      '(' +\n        this.channelzRef.id +\n        ') ' +\n        this.subchannelAddressString +\n        ' ' +\n        text\n    );\n  }\n\n  private refTrace(text: string): void {\n    logging.trace(\n      LogVerbosity.DEBUG,\n      'subchannel_refcount',\n      '(' +\n        this.channelzRef.id +\n        ') ' +\n        this.subchannelAddressString +\n        ' ' +\n        text\n    );\n  }\n\n  private handleBackoffTimer() {\n    if (this.continueConnecting) {\n      this.transitionToState(\n        [ConnectivityState.TRANSIENT_FAILURE],\n        ConnectivityState.CONNECTING\n      );\n    } else {\n      this.transitionToState(\n        [ConnectivityState.TRANSIENT_FAILURE],\n        ConnectivityState.IDLE\n      );\n    }\n  }\n\n  /**\n   * Start a backoff timer with the current nextBackoff timeout\n   */\n  private startBackoff() {\n    this.backoffTimeout.runOnce();\n  }\n\n  private stopBackoff() {\n    this.backoffTimeout.stop();\n    this.backoffTimeout.reset();\n  }\n\n  private startConnectingInternal() {\n    let options = this.options;\n    if (options['grpc.keepalive_time_ms']) {\n      const adjustedKeepaliveTime = Math.min(\n        this.keepaliveTime,\n        KEEPALIVE_MAX_TIME_MS\n      );\n      options = { ...options, 'grpc.keepalive_time_ms': adjustedKeepaliveTime };\n    }\n    this.connector\n      .connect(this.subchannelAddress, this.secureConnector, options)\n      .then(\n        transport => {\n          if (\n            this.transitionToState(\n              [ConnectivityState.CONNECTING],\n              ConnectivityState.READY\n            )\n          ) {\n            this.transport = transport;\n            if (this.channelzEnabled) {\n              this.childrenTracker.refChild(transport.getChannelzRef());\n            }\n            transport.addDisconnectListener(tooManyPings => {\n              this.transitionToState(\n                [ConnectivityState.READY],\n                ConnectivityState.IDLE\n              );\n              if (tooManyPings && this.keepaliveTime > 0) {\n                this.keepaliveTime *= 2;\n                logging.log(\n                  LogVerbosity.ERROR,\n                  `Connection to ${uriToString(this.channelTarget)} at ${\n                    this.subchannelAddressString\n                  } rejected by server because of excess pings. Increasing ping interval to ${\n                    this.keepaliveTime\n                  } ms`\n                );\n              }\n            });\n          } else {\n            /* If we can't transition from CONNECTING to READY here, we will\n             * not be using this transport, so release its resources. */\n            transport.shutdown();\n          }\n        },\n        error => {\n          this.transitionToState(\n            [ConnectivityState.CONNECTING],\n            ConnectivityState.TRANSIENT_FAILURE,\n            `${error}`\n          );\n        }\n      );\n  }\n\n  /**\n   * Initiate a state transition from any element of oldStates to the new\n   * state. If the current connectivityState is not in oldStates, do nothing.\n   * @param oldStates The set of states to transition from\n   * @param newState The state to transition to\n   * @returns True if the state changed, false otherwise\n   */\n  private transitionToState(\n    oldStates: ConnectivityState[],\n    newState: ConnectivityState,\n    errorMessage?: string\n  ): boolean {\n    if (oldStates.indexOf(this.connectivityState) === -1) {\n      return false;\n    }\n    if (errorMessage) {\n      this.trace(\n        ConnectivityState[this.connectivityState] +\n          ' -> ' +\n          ConnectivityState[newState] +\n          ' with error \"' + errorMessage + '\"'\n      );\n\n    } else {\n      this.trace(\n        ConnectivityState[this.connectivityState] +\n          ' -> ' +\n          ConnectivityState[newState]\n      );\n    }\n    if (this.channelzEnabled) {\n      this.channelzTrace.addTrace(\n        'CT_INFO',\n        'Connectivity state change to ' + ConnectivityState[newState]\n      );\n    }\n    const previousState = this.connectivityState;\n    this.connectivityState = newState;\n    switch (newState) {\n      case ConnectivityState.READY:\n        this.stopBackoff();\n        break;\n      case ConnectivityState.CONNECTING:\n        this.startBackoff();\n        this.startConnectingInternal();\n        this.continueConnecting = false;\n        break;\n      case ConnectivityState.TRANSIENT_FAILURE:\n        if (this.channelzEnabled && this.transport) {\n          this.childrenTracker.unrefChild(this.transport.getChannelzRef());\n        }\n        this.transport?.shutdown();\n        this.transport = null;\n        /* If the backoff timer has already ended by the time we get to the\n         * TRANSIENT_FAILURE state, we want to immediately transition out of\n         * TRANSIENT_FAILURE as though the backoff timer is ending right now */\n        if (!this.backoffTimeout.isRunning()) {\n          process.nextTick(() => {\n            this.handleBackoffTimer();\n          });\n        }\n        break;\n      case ConnectivityState.IDLE:\n        if (this.channelzEnabled && this.transport) {\n          this.childrenTracker.unrefChild(this.transport.getChannelzRef());\n        }\n        this.transport?.shutdown();\n        this.transport = null;\n        break;\n      default:\n        throw new Error(`Invalid state: unknown ConnectivityState ${newState}`);\n    }\n    for (const listener of this.stateListeners) {\n      listener(this, previousState, newState, this.keepaliveTime, errorMessage);\n    }\n    return true;\n  }\n\n  ref() {\n    this.refTrace('refcount ' + this.refcount + ' -> ' + (this.refcount + 1));\n    this.refcount += 1;\n  }\n\n  unref() {\n    this.refTrace('refcount ' + this.refcount + ' -> ' + (this.refcount - 1));\n    this.refcount -= 1;\n    if (this.refcount === 0) {\n      this.channelzTrace.addTrace('CT_INFO', 'Shutting down');\n      unregisterChannelzRef(this.channelzRef);\n      this.secureConnector.destroy();\n      process.nextTick(() => {\n        this.transitionToState(\n          [ConnectivityState.CONNECTING, ConnectivityState.READY],\n          ConnectivityState.IDLE\n        );\n      });\n    }\n  }\n\n  unrefIfOneRef(): boolean {\n    if (this.refcount === 1) {\n      this.unref();\n      return true;\n    }\n    return false;\n  }\n\n  createCall(\n    metadata: Metadata,\n    host: string,\n    method: string,\n    listener: SubchannelCallInterceptingListener\n  ): SubchannelCall {\n    if (!this.transport) {\n      throw new Error('Cannot create call, subchannel not READY');\n    }\n    let statsTracker: Partial<CallEventTracker>;\n    if (this.channelzEnabled) {\n      this.callTracker.addCallStarted();\n      this.streamTracker.addCallStarted();\n      statsTracker = {\n        onCallEnd: status => {\n          if (status.code === Status.OK) {\n            this.callTracker.addCallSucceeded();\n          } else {\n            this.callTracker.addCallFailed();\n          }\n        },\n      };\n    } else {\n      statsTracker = {};\n    }\n    return this.transport.createCall(\n      metadata,\n      host,\n      method,\n      listener,\n      statsTracker\n    );\n  }\n\n  /**\n   * If the subchannel is currently IDLE, start connecting and switch to the\n   * CONNECTING state. If the subchannel is current in TRANSIENT_FAILURE,\n   * the next time it would transition to IDLE, start connecting again instead.\n   * Otherwise, do nothing.\n   */\n  startConnecting() {\n    process.nextTick(() => {\n      /* First, try to transition from IDLE to connecting. If that doesn't happen\n       * because the state is not currently IDLE, check if it is\n       * TRANSIENT_FAILURE, and if so indicate that it should go back to\n       * connecting after the backoff timer ends. Otherwise do nothing */\n      if (\n        !this.transitionToState(\n          [ConnectivityState.IDLE],\n          ConnectivityState.CONNECTING\n        )\n      ) {\n        if (this.connectivityState === ConnectivityState.TRANSIENT_FAILURE) {\n          this.continueConnecting = true;\n        }\n      }\n    });\n  }\n\n  /**\n   * Get the subchannel's current connectivity state.\n   */\n  getConnectivityState() {\n    return this.connectivityState;\n  }\n\n  /**\n   * Add a listener function to be called whenever the subchannel's\n   * connectivity state changes.\n   * @param listener\n   */\n  addConnectivityStateListener(listener: ConnectivityStateListener) {\n    this.stateListeners.add(listener);\n  }\n\n  /**\n   * Remove a listener previously added with `addConnectivityStateListener`\n   * @param listener A reference to a function previously passed to\n   *     `addConnectivityStateListener`\n   */\n  removeConnectivityStateListener(listener: ConnectivityStateListener) {\n    this.stateListeners.delete(listener);\n  }\n\n  /**\n   * Reset the backoff timeout, and immediately start connecting if in backoff.\n   */\n  resetBackoff() {\n    process.nextTick(() => {\n      this.backoffTimeout.reset();\n      this.transitionToState(\n        [ConnectivityState.TRANSIENT_FAILURE],\n        ConnectivityState.CONNECTING\n      );\n    });\n  }\n\n  getAddress(): string {\n    return this.subchannelAddressString;\n  }\n\n  getChannelzRef(): SubchannelRef {\n    return this.channelzRef;\n  }\n\n  isHealthy(): boolean {\n    return true;\n  }\n\n  addHealthStateWatcher(listener: (healthy: boolean) => void): void {\n    // Do nothing with the listener\n  }\n\n  removeHealthStateWatcher(listener: (healthy: boolean) => void): void {\n    // Do nothing with the listener\n  }\n\n  getRealSubchannel(): this {\n    return this;\n  }\n\n  realSubchannelEquals(other: SubchannelInterface): boolean {\n    return other.getRealSubchannel() === this;\n  }\n\n  throttleKeepalive(newKeepaliveTime: number) {\n    if (newKeepaliveTime > this.keepaliveTime) {\n      this.keepaliveTime = newKeepaliveTime;\n    }\n  }\n  getCallCredentials(): CallCredentials {\n    return this.secureConnector.getCallCredentials();\n  }\n\n  getChannel(): Channel {\n    if (!this.subchannelChannel) {\n      this.subchannelChannel = new SingleSubchannelChannel(this, this.channelTarget, this.options);\n    }\n    return this.subchannelChannel;\n  }\n\n  addDataWatcher(dataWatcher: DataWatcher): void {\n    throw new Error('Not implemented');\n  }\n\n  getOrCreateDataProducer(name: string, createDataProducer: (subchannel: Subchannel) => DataProducer): DataProducer {\n    const existingProducer = this.dataProducers.get(name);\n    if (existingProducer){\n      return existingProducer;\n    }\n    const newProducer = createDataProducer(this);\n    this.dataProducers.set(name, newProducer);\n    return newProducer;\n  }\n\n  removeDataProducer(name: string) {\n    this.dataProducers.delete(name);\n  }\n}\n", "/*\n * Copyright 2024 gRPC authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n */\n\nexport const GRPC_NODE_USE_ALTERNATIVE_RESOLVER =\n  (process.env.GRPC_NODE_USE_ALTERNATIVE_RESOLVER ?? 'false') === 'true';\n", "/*\n * Copyright 2019 gRPC authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  Resolver,\n  ResolverListener,\n  registerResolver,\n  registerDefaultScheme,\n} from './resolver';\nimport { promises as dns } from 'dns';\nimport { extractAndSelectServiceConfig, ServiceConfig } from './service-config';\nimport { Status } from './constants';\nimport { StatusObject, StatusOr, statusOrFromError, statusOrFromValue } from './call-interface';\nimport { Metadata } from './metadata';\nimport * as logging from './logging';\nimport { LogVerbosity } from './constants';\nimport { Endpoint, TcpSubchannelAddress } from './subchannel-address';\nimport { GrpcUri, uriToString, splitHostPort } from './uri-parser';\nimport { isIPv6, isIPv4 } from 'net';\nimport { ChannelOptions } from './channel-options';\nimport { BackoffOptions, BackoffTimeout } from './backoff-timeout';\nimport { GRPC_NODE_USE_ALTERNATIVE_RESOLVER } from './environment';\n\nconst TRACER_NAME = 'dns_resolver';\n\nfunction trace(text: string): void {\n  logging.trace(LogVerbosity.DEBUG, TRACER_NAME, text);\n}\n\n/**\n * The default TCP port to connect to if not explicitly specified in the target.\n */\nexport const DEFAULT_PORT = 443;\n\nconst DEFAULT_MIN_TIME_BETWEEN_RESOLUTIONS_MS = 30_000;\n\n/**\n * Resolver implementation that handles DNS names and IP addresses.\n */\nclass DnsResolver implements Resolver {\n  private readonly ipResult: Endpoint[] | null;\n  private readonly dnsHostname: string | null;\n  private readonly port: number | null;\n  /**\n   * Minimum time between resolutions, measured as the time between starting\n   * successive resolution requests. Only applies to successful resolutions.\n   * Failures are handled by the backoff timer.\n   */\n  private readonly minTimeBetweenResolutionsMs: number;\n  private pendingLookupPromise: Promise<TcpSubchannelAddress[]> | null = null;\n  private pendingTxtPromise: Promise<string[][]> | null = null;\n  private latestLookupResult: StatusOr<Endpoint[]> | null = null;\n  private latestServiceConfigResult: StatusOr<ServiceConfig> | null = null;\n  private percentage: number;\n  private defaultResolutionError: StatusObject;\n  private backoff: BackoffTimeout;\n  private continueResolving = false;\n  private nextResolutionTimer: NodeJS.Timeout;\n  private isNextResolutionTimerRunning = false;\n  private isServiceConfigEnabled = true;\n  private returnedIpResult = false;\n  private alternativeResolver = new dns.Resolver();\n\n  constructor(\n    private target: GrpcUri,\n    private listener: ResolverListener,\n    channelOptions: ChannelOptions\n  ) {\n    trace('Resolver constructed for target ' + uriToString(target));\n    if (target.authority) {\n      this.alternativeResolver.setServers([target.authority]);\n    }\n    const hostPort = splitHostPort(target.path);\n    if (hostPort === null) {\n      this.ipResult = null;\n      this.dnsHostname = null;\n      this.port = null;\n    } else {\n      if (isIPv4(hostPort.host) || isIPv6(hostPort.host)) {\n        this.ipResult = [\n          {\n            addresses: [\n              {\n                host: hostPort.host,\n                port: hostPort.port ?? DEFAULT_PORT,\n              },\n            ],\n          },\n        ];\n        this.dnsHostname = null;\n        this.port = null;\n      } else {\n        this.ipResult = null;\n        this.dnsHostname = hostPort.host;\n        this.port = hostPort.port ?? DEFAULT_PORT;\n      }\n    }\n    this.percentage = Math.random() * 100;\n\n    if (channelOptions['grpc.service_config_disable_resolution'] === 1) {\n      this.isServiceConfigEnabled = false;\n    }\n\n    this.defaultResolutionError = {\n      code: Status.UNAVAILABLE,\n      details: `Name resolution failed for target ${uriToString(this.target)}`,\n      metadata: new Metadata(),\n    };\n\n    const backoffOptions: BackoffOptions = {\n      initialDelay: channelOptions['grpc.initial_reconnect_backoff_ms'],\n      maxDelay: channelOptions['grpc.max_reconnect_backoff_ms'],\n    };\n\n    this.backoff = new BackoffTimeout(() => {\n      if (this.continueResolving) {\n        this.startResolutionWithBackoff();\n      }\n    }, backoffOptions);\n    this.backoff.unref();\n\n    this.minTimeBetweenResolutionsMs =\n      channelOptions['grpc.dns_min_time_between_resolutions_ms'] ??\n      DEFAULT_MIN_TIME_BETWEEN_RESOLUTIONS_MS;\n    this.nextResolutionTimer = setTimeout(() => {}, 0);\n    clearTimeout(this.nextResolutionTimer);\n  }\n\n  /**\n   * If the target is an IP address, just provide that address as a result.\n   * Otherwise, initiate A, AAAA, and TXT lookups\n   */\n  private startResolution() {\n    if (this.ipResult !== null) {\n      if (!this.returnedIpResult) {\n        trace('Returning IP address for target ' + uriToString(this.target));\n        setImmediate(() => {\n          this.listener(\n            statusOrFromValue(this.ipResult!),\n            {},\n            null,\n            ''\n          )\n        });\n        this.returnedIpResult = true;\n      }\n      this.backoff.stop();\n      this.backoff.reset();\n      this.stopNextResolutionTimer();\n      return;\n    }\n    if (this.dnsHostname === null) {\n      trace('Failed to parse DNS address ' + uriToString(this.target));\n      setImmediate(() => {\n        this.listener(\n          statusOrFromError({\n            code: Status.UNAVAILABLE,\n            details: `Failed to parse DNS address ${uriToString(this.target)}`\n          }),\n          {},\n          null,\n          ''\n        );\n      });\n      this.stopNextResolutionTimer();\n    } else {\n      if (this.pendingLookupPromise !== null) {\n        return;\n      }\n      trace('Looking up DNS hostname ' + this.dnsHostname);\n      /* We clear out latestLookupResult here to ensure that it contains the\n       * latest result since the last time we started resolving. That way, the\n       * TXT resolution handler can use it, but only if it finishes second. We\n       * don't clear out any previous service config results because it's\n       * better to use a service config that's slightly out of date than to\n       * revert to an effectively blank one. */\n      this.latestLookupResult = null;\n      const hostname: string = this.dnsHostname;\n      this.pendingLookupPromise = this.lookup(hostname);\n      this.pendingLookupPromise.then(\n        addressList => {\n          if (this.pendingLookupPromise === null) {\n            return;\n          }\n          this.pendingLookupPromise = null;\n          this.latestLookupResult = statusOrFromValue(addressList.map(address => ({\n            addresses: [address],\n          })));\n          const allAddressesString: string =\n            '[' +\n            addressList.map(addr => addr.host + ':' + addr.port).join(',') +\n            ']';\n          trace(\n            'Resolved addresses for target ' +\n              uriToString(this.target) +\n              ': ' +\n              allAddressesString\n          );\n          /* If the TXT lookup has not yet finished, both of the last two\n           * arguments will be null, which is the equivalent of getting an\n           * empty TXT response. When the TXT lookup does finish, its handler\n           * can update the service config by using the same address list */\n          const healthStatus = this.listener(\n            this.latestLookupResult,\n            {},\n            this.latestServiceConfigResult,\n            ''\n          );\n          this.handleHealthStatus(healthStatus);\n        },\n        err => {\n          if (this.pendingLookupPromise === null) {\n            return;\n          }\n          trace(\n            'Resolution error for target ' +\n              uriToString(this.target) +\n              ': ' +\n              (err as Error).message\n          );\n          this.pendingLookupPromise = null;\n          this.stopNextResolutionTimer();\n          this.listener(\n            statusOrFromError(this.defaultResolutionError),\n            {},\n            this.latestServiceConfigResult,\n            ''\n          )\n        }\n      );\n      /* If there already is a still-pending TXT resolution, we can just use\n       * that result when it comes in */\n      if (this.isServiceConfigEnabled && this.pendingTxtPromise === null) {\n        /* We handle the TXT query promise differently than the others because\n         * the name resolution attempt as a whole is a success even if the TXT\n         * lookup fails */\n        this.pendingTxtPromise = this.resolveTxt(hostname);\n        this.pendingTxtPromise.then(\n          txtRecord => {\n            if (this.pendingTxtPromise === null) {\n              return;\n            }\n            this.pendingTxtPromise = null;\n            let serviceConfig: ServiceConfig | null;\n            try {\n              serviceConfig = extractAndSelectServiceConfig(\n                txtRecord,\n                this.percentage\n              );\n              if (serviceConfig) {\n                this.latestServiceConfigResult = statusOrFromValue(serviceConfig);\n              } else {\n                this.latestServiceConfigResult = null;\n              }\n            } catch (err) {\n              this.latestServiceConfigResult = statusOrFromError({\n                code: Status.UNAVAILABLE,\n                details: `Parsing service config failed with error ${\n                  (err as Error).message\n                }`\n              });\n            }\n            if (this.latestLookupResult !== null) {\n              /* We rely here on the assumption that calling this function with\n               * identical parameters will be essentialy idempotent, and calling\n               * it with the same address list and a different service config\n               * should result in a fast and seamless switchover. */\n              this.listener(\n                this.latestLookupResult,\n                {},\n                this.latestServiceConfigResult,\n                ''\n              );\n            }\n          },\n          err => {\n            /* If TXT lookup fails we should do nothing, which means that we\n             * continue to use the result of the most recent successful lookup,\n             * or the default null config object if there has never been a\n             * successful lookup. We do not set the latestServiceConfigError\n             * here because that is specifically used for response validation\n             * errors. We still need to handle this error so that it does not\n             * bubble up as an unhandled promise rejection. */\n          }\n        );\n      }\n    }\n  }\n\n  /**\n   * The ResolverListener returns a boolean indicating whether the LB policy\n   * accepted the resolution result. A false result on an otherwise successful\n   * resolution should be treated as a resolution failure.\n   * @param healthStatus\n   */\n  private handleHealthStatus(healthStatus: boolean) {\n    if (healthStatus) {\n      this.backoff.stop();\n      this.backoff.reset();\n    } else {\n      this.continueResolving = true;\n    }\n  }\n\n  private async lookup(hostname: string): Promise<TcpSubchannelAddress[]> {\n    if (GRPC_NODE_USE_ALTERNATIVE_RESOLVER) {\n      trace('Using alternative DNS resolver.');\n\n      const records = await Promise.allSettled([\n        this.alternativeResolver.resolve4(hostname),\n        this.alternativeResolver.resolve6(hostname),\n      ]);\n\n      if (records.every(result => result.status === 'rejected')) {\n        throw new Error((records[0] as PromiseRejectedResult).reason);\n      }\n\n      return records\n        .reduce<string[]>((acc, result) => {\n          return result.status === 'fulfilled'\n            ? [...acc, ...result.value]\n            : acc;\n        }, [])\n        .map(addr => ({\n          host: addr,\n          port: +this.port!,\n        }));\n    }\n\n    /* We lookup both address families here and then split them up later\n     * because when looking up a single family, dns.lookup outputs an error\n     * if the name exists but there are no records for that family, and that\n     * error is indistinguishable from other kinds of errors */\n    const addressList = await dns.lookup(hostname, { all: true });\n    return addressList.map(addr => ({ host: addr.address, port: +this.port! }));\n  }\n\n  private async resolveTxt(hostname: string): Promise<string[][]> {\n    if (GRPC_NODE_USE_ALTERNATIVE_RESOLVER) {\n      trace('Using alternative DNS resolver.');\n      return this.alternativeResolver.resolveTxt(hostname);\n    }\n\n    return dns.resolveTxt(hostname);\n  }\n\n  private startNextResolutionTimer() {\n    clearTimeout(this.nextResolutionTimer);\n    this.nextResolutionTimer = setTimeout(() => {\n      this.stopNextResolutionTimer();\n      if (this.continueResolving) {\n        this.startResolutionWithBackoff();\n      }\n    }, this.minTimeBetweenResolutionsMs);\n    this.nextResolutionTimer.unref?.();\n    this.isNextResolutionTimerRunning = true;\n  }\n\n  private stopNextResolutionTimer() {\n    clearTimeout(this.nextResolutionTimer);\n    this.isNextResolutionTimerRunning = false;\n  }\n\n  private startResolutionWithBackoff() {\n    if (this.pendingLookupPromise === null) {\n      this.continueResolving = false;\n      this.backoff.runOnce();\n      this.startNextResolutionTimer();\n      this.startResolution();\n    }\n  }\n\n  updateResolution() {\n    /* If there is a pending lookup, just let it finish. Otherwise, if the\n     * nextResolutionTimer or backoff timer is running, set the\n     * continueResolving flag to resolve when whichever of those timers\n     * fires. Otherwise, start resolving immediately. */\n    if (this.pendingLookupPromise === null) {\n      if (this.isNextResolutionTimerRunning || this.backoff.isRunning()) {\n        if (this.isNextResolutionTimerRunning) {\n          trace(\n            'resolution update delayed by \"min time between resolutions\" rate limit'\n          );\n        } else {\n          trace(\n            'resolution update delayed by backoff timer until ' +\n              this.backoff.getEndTime().toISOString()\n          );\n        }\n        this.continueResolving = true;\n      } else {\n        this.startResolutionWithBackoff();\n      }\n    }\n  }\n\n  /**\n   * Reset the resolver to the same state it had when it was created. In-flight\n   * DNS requests cannot be cancelled, but they are discarded and their results\n   * will be ignored.\n   */\n  destroy() {\n    this.continueResolving = false;\n    this.backoff.reset();\n    this.backoff.stop();\n    this.stopNextResolutionTimer();\n    this.pendingLookupPromise = null;\n    this.pendingTxtPromise = null;\n    this.latestLookupResult = null;\n    this.latestServiceConfigResult = null;\n    this.returnedIpResult = false;\n  }\n\n  /**\n   * Get the default authority for the given target. For IP targets, that is\n   * the IP address. For DNS targets, it is the hostname.\n   * @param target\n   */\n  static getDefaultAuthority(target: GrpcUri): string {\n    return target.path;\n  }\n}\n\n/**\n * Set up the DNS resolver class by registering it as the handler for the\n * \"dns:\" prefix and as the default resolver.\n */\nexport function setup(): void {\n  registerResolver('dns', DnsResolver);\n  registerDefaultScheme('dns');\n}\n\nexport interface DnsUrl {\n  host: string;\n  port?: string;\n}\n", "/*\n * Copyright 2019 gRPC authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n */\n\nimport { log } from './logging';\nimport { LogVerbosity } from './constants';\nimport { isIPv4, Socket } from 'net';\nimport * as http from 'http';\nimport * as logging from './logging';\nimport {\n  SubchannelAddress,\n  isTcpSubchannelAddress,\n  subchannelAddressToString,\n} from './subchannel-address';\nimport { ChannelOptions } from './channel-options';\nimport { GrpcUri, parseUri, splitHostPort, uriToString } from './uri-parser';\nimport { URL } from 'url';\nimport { DEFAULT_PORT } from './resolver-dns';\n\nconst TRACER_NAME = 'proxy';\n\nfunction trace(text: string): void {\n  logging.trace(LogVerbosity.DEBUG, TRACER_NAME, text);\n}\n\ninterface ProxyInfo {\n  address?: string;\n  creds?: string;\n}\n\nfunction getProxyInfo(): ProxyInfo {\n  let proxyEnv = '';\n  let envVar = '';\n  /* Prefer using 'grpc_proxy'. Fallback on 'http_proxy' if it is not set.\n   * Also prefer using 'https_proxy' with fallback on 'http_proxy'. The\n   * fallback behavior can be removed if there's a demand for it.\n   */\n  if (process.env.grpc_proxy) {\n    envVar = 'grpc_proxy';\n    proxyEnv = process.env.grpc_proxy;\n  } else if (process.env.https_proxy) {\n    envVar = 'https_proxy';\n    proxyEnv = process.env.https_proxy;\n  } else if (process.env.http_proxy) {\n    envVar = 'http_proxy';\n    proxyEnv = process.env.http_proxy;\n  } else {\n    return {};\n  }\n  let proxyUrl: URL;\n  try {\n    proxyUrl = new URL(proxyEnv);\n  } catch (e) {\n    log(LogVerbosity.ERROR, `cannot parse value of \"${envVar}\" env var`);\n    return {};\n  }\n  if (proxyUrl.protocol !== 'http:') {\n    log(\n      LogVerbosity.ERROR,\n      `\"${proxyUrl.protocol}\" scheme not supported in proxy URI`\n    );\n    return {};\n  }\n  let userCred: string | null = null;\n  if (proxyUrl.username) {\n    if (proxyUrl.password) {\n      log(LogVerbosity.INFO, 'userinfo found in proxy URI');\n      userCred = decodeURIComponent(`${proxyUrl.username}:${proxyUrl.password}`);\n    } else {\n      userCred = proxyUrl.username;\n    }\n  }\n  const hostname = proxyUrl.hostname;\n  let port = proxyUrl.port;\n  /* The proxy URL uses the scheme \"http:\", which has a default port number of\n   * 80. We need to set that explicitly here if it is omitted because otherwise\n   * it will use gRPC's default port 443. */\n  if (port === '') {\n    port = '80';\n  }\n  const result: ProxyInfo = {\n    address: `${hostname}:${port}`,\n  };\n  if (userCred) {\n    result.creds = userCred;\n  }\n  trace(\n    'Proxy server ' + result.address + ' set by environment variable ' + envVar\n  );\n  return result;\n}\n\nfunction getNoProxyHostList(): string[] {\n  /* Prefer using 'no_grpc_proxy'. Fallback on 'no_proxy' if it is not set. */\n  let noProxyStr: string | undefined = process.env.no_grpc_proxy;\n  let envVar = 'no_grpc_proxy';\n  if (!noProxyStr) {\n    noProxyStr = process.env.no_proxy;\n    envVar = 'no_proxy';\n  }\n  if (noProxyStr) {\n    trace('No proxy server list set by environment variable ' + envVar);\n    return noProxyStr.split(',');\n  } else {\n    return [];\n  }\n}\n\ninterface CIDRNotation {\n  ip: number;\n  prefixLength: number;\n}\n\n/*\n * The groups correspond to CIDR parts as follows:\n * 1. ip\n * 2. prefixLength\n */\n\nexport function parseCIDR(cidrString: string): CIDRNotation | null {\n  const splitRange = cidrString.split('/');  \n  if (splitRange.length !== 2) {  \n    return null;  \n  }  \n  const prefixLength = parseInt(splitRange[1], 10);  \n  if (!isIPv4(splitRange[0]) || Number.isNaN(prefixLength) || prefixLength < 0 || prefixLength > 32) {  \n    return null;  \n  }  \n  return {  \n    ip: ipToInt(splitRange[0]),  \n    prefixLength: prefixLength  \n  };\n}\n\nfunction ipToInt(ip: string) {\n  return ip.split(\".\").reduce((acc, octet) => (acc << 8) + parseInt(octet, 10), 0);\n}\n\nfunction isIpInCIDR(cidr: CIDRNotation, serverHost: string) {\n  const ip = cidr.ip;\n  const mask = -1 << (32 - cidr.prefixLength);\n  const hostIP = ipToInt(serverHost);\n\n  return (hostIP & mask) === (ip & mask);\n}\n\nfunction hostMatchesNoProxyList(serverHost: string): boolean {\n  for (const host of getNoProxyHostList()) {\n    const parsedCIDR = parseCIDR(host);\n    // host is a CIDR and serverHost is an IP address\n    if (isIPv4(serverHost) && parsedCIDR && isIpInCIDR(parsedCIDR, serverHost)) {\n      return true;\n    } else if (serverHost.endsWith(host)) {\n      // host is a single IP or a domain name suffix\n      return true;\n    }\n  }\n  return false;\n}\n\nexport interface ProxyMapResult {\n  target: GrpcUri;\n  extraOptions: ChannelOptions;\n}\n\nexport function mapProxyName(\n  target: GrpcUri,\n  options: ChannelOptions\n): ProxyMapResult {\n  const noProxyResult: ProxyMapResult = {\n    target: target,\n    extraOptions: {},\n  };\n  if ((options['grpc.enable_http_proxy'] ?? 1) === 0) {\n    return noProxyResult;\n  }\n  if (target.scheme === 'unix') {\n    return noProxyResult;\n  }\n  const proxyInfo = getProxyInfo();\n  if (!proxyInfo.address) {\n    return noProxyResult;\n  }\n  const hostPort = splitHostPort(target.path);\n  if (!hostPort) {\n    return noProxyResult;\n  }\n  const serverHost = hostPort.host;\n  if (hostMatchesNoProxyList(serverHost)) {\n    trace('Not using proxy for target in no_proxy list: ' + uriToString(target));\n    return noProxyResult;\n  }\n  const extraOptions: ChannelOptions = {\n    'grpc.http_connect_target': uriToString(target),\n  };\n  if (proxyInfo.creds) {\n    extraOptions['grpc.http_connect_creds'] = proxyInfo.creds;\n  }\n  return {\n    target: {\n      scheme: 'dns',\n      path: proxyInfo.address,\n    },\n    extraOptions: extraOptions,\n  };\n}\n\nexport function getProxiedConnection(\n  address: SubchannelAddress,\n  channelOptions: ChannelOptions\n): Promise<Socket | null> {\n  if (!('grpc.http_connect_target' in channelOptions)) {\n    return Promise.resolve(null);\n  }\n  const realTarget = channelOptions['grpc.http_connect_target'] as string;\n  const parsedTarget = parseUri(realTarget);\n  if (parsedTarget === null) {\n    return Promise.resolve(null);\n  }\n  const splitHostPost = splitHostPort(parsedTarget.path);\n  if (splitHostPost === null) {\n    return Promise.resolve(null);\n  }\n  const hostPort = `${splitHostPost.host}:${\n    splitHostPost.port ?? DEFAULT_PORT\n  }`;\n  const options: http.RequestOptions = {\n    method: 'CONNECT',\n    path: hostPort,\n  };\n  const headers: http.OutgoingHttpHeaders = {\n    Host: hostPort,\n  };\n  // Connect to the subchannel address as a proxy\n  if (isTcpSubchannelAddress(address)) {\n    options.host = address.host;\n    options.port = address.port;\n  } else {\n    options.socketPath = address.path;\n  }\n  if ('grpc.http_connect_creds' in channelOptions) {\n    headers['Proxy-Authorization'] =\n      'Basic ' +\n      Buffer.from(channelOptions['grpc.http_connect_creds'] as string).toString(\n        'base64'\n      );\n  }\n  options.headers = headers;\n  const proxyAddressString = subchannelAddressToString(address);\n  trace('Using proxy ' + proxyAddressString + ' to connect to ' + options.path);\n  return new Promise<Socket | null>((resolve, reject) => {\n    const request = http.request(options);\n    request.once('connect', (res, socket, head) => {\n      request.removeAllListeners();\n      socket.removeAllListeners();\n      if (res.statusCode === 200) {\n        trace(\n          'Successfully connected to ' +\n            options.path +\n            ' through proxy ' +\n            proxyAddressString\n        );\n        // The HTTP client may have already read a few bytes of the proxied\n        // connection. If that's the case, put them back into the socket.\n        // See https://github.com/grpc/grpc-node/issues/2744.\n        if (head.length > 0) {\n          socket.unshift(head);\n        }\n        trace(\n          'Successfully established a plaintext connection to ' +\n            options.path +\n            ' through proxy ' +\n            proxyAddressString\n        );\n        resolve(socket);\n      } else {\n        log(\n          LogVerbosity.ERROR,\n          'Failed to connect to ' +\n            options.path +\n            ' through proxy ' +\n            proxyAddressString +\n            ' with status ' +\n            res.statusCode\n        );\n        reject();\n      }\n    });\n    request.once('error', err => {\n      request.removeAllListeners();\n      log(\n        LogVerbosity.ERROR,\n        'Failed to connect to proxy ' +\n          proxyAddressString +\n          ' with error ' +\n          err.message\n      );\n      reject();\n    });\n    request.end();\n  });\n}\n", "/*\n * Copyright 2019 gRPC authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n */\n\nenum ReadState {\n  NO_DATA,\n  READING_SIZE,\n  READING_MESSAGE,\n}\n\nexport class StreamDecoder {\n  private readState: ReadState = ReadState.NO_DATA;\n  private readCompressFlag: Buffer = Buffer.alloc(1);\n  private readPartialSize: Buffer = Buffer.alloc(4);\n  private readSizeRemaining = 4;\n  private readMessageSize = 0;\n  private readPartialMessage: Buffer[] = [];\n  private readMessageRemaining = 0;\n\n  constructor(private maxReadMessageLength: number) {}\n\n  write(data: Buffer): Buffer[] {\n    let readHead = 0;\n    let toRead: number;\n    const result: Buffer[] = [];\n\n    while (readHead < data.length) {\n      switch (this.readState) {\n        case ReadState.NO_DATA:\n          this.readCompressFlag = data.slice(readHead, readHead + 1);\n          readHead += 1;\n          this.readState = ReadState.READING_SIZE;\n          this.readPartialSize.fill(0);\n          this.readSizeRemaining = 4;\n          this.readMessageSize = 0;\n          this.readMessageRemaining = 0;\n          this.readPartialMessage = [];\n          break;\n        case ReadState.READING_SIZE:\n          toRead = Math.min(data.length - readHead, this.readSizeRemaining);\n          data.copy(\n            this.readPartialSize,\n            4 - this.readSizeRemaining,\n            readHead,\n            readHead + toRead\n          );\n          this.readSizeRemaining -= toRead;\n          readHead += toRead;\n          // readSizeRemaining >=0 here\n          if (this.readSizeRemaining === 0) {\n            this.readMessageSize = this.readPartialSize.readUInt32BE(0);\n            if (this.maxReadMessageLength !== -1 && this.readMessageSize > this.maxReadMessageLength) {\n              throw new Error(`Received message larger than max (${this.readMessageSize} vs ${this.maxReadMessageLength})`);\n            }\n            this.readMessageRemaining = this.readMessageSize;\n            if (this.readMessageRemaining > 0) {\n              this.readState = ReadState.READING_MESSAGE;\n            } else {\n              const message = Buffer.concat(\n                [this.readCompressFlag, this.readPartialSize],\n                5\n              );\n\n              this.readState = ReadState.NO_DATA;\n              result.push(message);\n            }\n          }\n          break;\n        case ReadState.READING_MESSAGE:\n          toRead = Math.min(data.length - readHead, this.readMessageRemaining);\n          this.readPartialMessage.push(data.slice(readHead, readHead + toRead));\n          this.readMessageRemaining -= toRead;\n          readHead += toRead;\n          // readMessageRemaining >=0 here\n          if (this.readMessageRemaining === 0) {\n            // At this point, we have read a full message\n            const framedMessageBuffers = [\n              this.readCompressFlag,\n              this.readPartialSize,\n            ].concat(this.readPartialMessage);\n            const framedMessage = Buffer.concat(\n              framedMessageBuffers,\n              this.readMessageSize + 5\n            );\n\n            this.readState = ReadState.NO_DATA;\n            result.push(framedMessage);\n          }\n          break;\n        default:\n          throw new Error('Unexpected read state');\n      }\n    }\n\n    return result;\n  }\n}\n", "/*\n * Copyright 2019 gRPC authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n */\n\nimport * as http2 from 'http2';\nimport * as os from 'os';\n\nimport { DEFAULT_MAX_RECEIVE_MESSAGE_LENGTH, Status } from './constants';\nimport { Metadata } from './metadata';\nimport { StreamDecoder } from './stream-decoder';\nimport * as logging from './logging';\nimport { LogVerbosity } from './constants';\nimport {\n  InterceptingListener,\n  MessageContext,\n  StatusObject,\n  WriteCallback,\n} from './call-interface';\nimport { CallEventTracker, Transport } from './transport';\nimport { AuthContext } from './auth-context';\n\nconst TRACER_NAME = 'subchannel_call';\n\n/**\n * https://nodejs.org/api/errors.html#errors_class_systemerror\n */\ninterface SystemError extends Error {\n  address?: string;\n  code: string;\n  dest?: string;\n  errno: number;\n  info?: object;\n  message: string;\n  path?: string;\n  port?: number;\n  syscall: string;\n}\n\n/**\n * Should do approximately the same thing as util.getSystemErrorName but the\n * TypeScript types don't have that function for some reason so I just made my\n * own.\n * @param errno\n */\nfunction getSystemErrorName(errno: number): string {\n  for (const [name, num] of Object.entries(os.constants.errno)) {\n    if (num === errno) {\n      return name;\n    }\n  }\n  return 'Unknown system error ' + errno;\n}\n\nexport interface SubchannelCall {\n  cancelWithStatus(status: Status, details: string): void;\n  getPeer(): string;\n  sendMessageWithContext(context: MessageContext, message: Buffer): void;\n  startRead(): void;\n  halfClose(): void;\n  getCallNumber(): number;\n  getDeadlineInfo(): string[];\n  getAuthContext(): AuthContext;\n}\n\nexport interface StatusObjectWithRstCode extends StatusObject {\n  rstCode?: number;\n}\n\nexport interface SubchannelCallInterceptingListener\n  extends InterceptingListener {\n  onReceiveStatus(status: StatusObjectWithRstCode): void;\n}\n\nfunction mapHttpStatusCode(code: number): StatusObject {\n  const details = `Received HTTP status code ${code}`;\n  let mappedStatusCode: number;\n  switch (code) {\n    // TODO(murgatroid99): handle 100 and 101\n    case 400:\n      mappedStatusCode = Status.INTERNAL;\n      break;\n    case 401:\n      mappedStatusCode = Status.UNAUTHENTICATED;\n      break;\n    case 403:\n      mappedStatusCode = Status.PERMISSION_DENIED;\n      break;\n    case 404:\n      mappedStatusCode = Status.UNIMPLEMENTED;\n      break;\n    case 429:\n    case 502:\n    case 503:\n    case 504:\n      mappedStatusCode = Status.UNAVAILABLE;\n      break;\n    default:\n      mappedStatusCode = Status.UNKNOWN;\n  }\n  return {\n    code: mappedStatusCode,\n    details: details,\n    metadata: new Metadata()\n  };\n}\n\nexport class Http2SubchannelCall implements SubchannelCall {\n  private decoder: StreamDecoder;\n\n  private isReadFilterPending = false;\n  private isPushPending = false;\n  private canPush = false;\n  /**\n   * Indicates that an 'end' event has come from the http2 stream, so there\n   * will be no more data events.\n   */\n  private readsClosed = false;\n\n  private statusOutput = false;\n\n  private unpushedReadMessages: Buffer[] = [];\n\n  private httpStatusCode: number | undefined;\n\n  // This is populated (non-null) if and only if the call has ended\n  private finalStatus: StatusObject | null = null;\n\n  private internalError: SystemError | null = null;\n\n  private serverEndedCall = false;\n\n  private connectionDropped = false;\n\n  constructor(\n    private readonly http2Stream: http2.ClientHttp2Stream,\n    private readonly callEventTracker: CallEventTracker,\n    private readonly listener: SubchannelCallInterceptingListener,\n    private readonly transport: Transport,\n    private readonly callId: number\n  ) {\n    const maxReceiveMessageLength = transport.getOptions()['grpc.max_receive_message_length'] ?? DEFAULT_MAX_RECEIVE_MESSAGE_LENGTH;\n    this.decoder = new StreamDecoder(maxReceiveMessageLength);\n    http2Stream.on('response', (headers, flags) => {\n      let headersString = '';\n      for (const header of Object.keys(headers)) {\n        headersString += '\\t\\t' + header + ': ' + headers[header] + '\\n';\n      }\n      this.trace('Received server headers:\\n' + headersString);\n      this.httpStatusCode = headers[':status'];\n\n      if (flags & http2.constants.NGHTTP2_FLAG_END_STREAM) {\n        this.handleTrailers(headers);\n      } else {\n        let metadata: Metadata;\n        try {\n          metadata = Metadata.fromHttp2Headers(headers);\n        } catch (error) {\n          this.endCall({\n            code: Status.UNKNOWN,\n            details: (error as Error).message,\n            metadata: new Metadata(),\n          });\n          return;\n        }\n        this.listener.onReceiveMetadata(metadata);\n      }\n    });\n    http2Stream.on('trailers', (headers: http2.IncomingHttpHeaders) => {\n      this.handleTrailers(headers);\n    });\n    http2Stream.on('data', (data: Buffer) => {\n      /* If the status has already been output, allow the http2 stream to\n       * drain without processing the data. */\n      if (this.statusOutput) {\n        return;\n      }\n      this.trace('receive HTTP/2 data frame of length ' + data.length);\n      let messages: Buffer[];\n      try {\n        messages = this.decoder.write(data);\n      } catch (e) {\n        /* Some servers send HTML error pages along with HTTP status codes.\n         * When the client attempts to parse this as a length-delimited\n         * message, the parsed message size is greater than the default limit,\n         * resulting in a message decoding error. In that situation, the HTTP\n         * error code information is more useful to the user than the\n         * RESOURCE_EXHAUSTED error is, so we report that instead. Normally,\n         * we delay processing the HTTP status until after the stream ends, to\n         * prioritize reporting the gRPC status from trailers if it is present,\n         * but when there is a message parsing error we end the stream early\n         * before processing trailers. */\n        if (this.httpStatusCode !== undefined && this.httpStatusCode !== 200) {\n          const mappedStatus = mapHttpStatusCode(this.httpStatusCode);\n          this.cancelWithStatus(mappedStatus.code, mappedStatus.details);\n        } else {\n          this.cancelWithStatus(Status.RESOURCE_EXHAUSTED, (e as Error).message);\n        }\n        return;\n      }\n\n      for (const message of messages) {\n        this.trace('parsed message of length ' + message.length);\n        this.callEventTracker!.addMessageReceived();\n        this.tryPush(message);\n      }\n    });\n    http2Stream.on('end', () => {\n      this.readsClosed = true;\n      this.maybeOutputStatus();\n    });\n    http2Stream.on('close', () => {\n      this.serverEndedCall = true;\n      /* Use process.next tick to ensure that this code happens after any\n       * \"error\" event that may be emitted at about the same time, so that\n       * we can bubble up the error message from that event. */\n      process.nextTick(() => {\n        this.trace('HTTP/2 stream closed with code ' + http2Stream.rstCode);\n        /* If we have a final status with an OK status code, that means that\n         * we have received all of the messages and we have processed the\n         * trailers and the call completed successfully, so it doesn't matter\n         * how the stream ends after that */\n        if (this.finalStatus?.code === Status.OK) {\n          return;\n        }\n        let code: Status;\n        let details = '';\n        switch (http2Stream.rstCode) {\n          case http2.constants.NGHTTP2_NO_ERROR:\n            /* If we get a NO_ERROR code and we already have a status, the\n             * stream completed properly and we just haven't fully processed\n             * it yet */\n            if (this.finalStatus !== null) {\n              return;\n            }\n            if (this.httpStatusCode && this.httpStatusCode !== 200) {\n              const mappedStatus = mapHttpStatusCode(this.httpStatusCode);\n              code = mappedStatus.code;\n              details = mappedStatus.details;\n            } else {\n              code = Status.INTERNAL;\n              details = `Received RST_STREAM with code ${http2Stream.rstCode} (Call ended without gRPC status)`;\n            }\n            break;\n          case http2.constants.NGHTTP2_REFUSED_STREAM:\n            code = Status.UNAVAILABLE;\n            details = 'Stream refused by server';\n            break;\n          case http2.constants.NGHTTP2_CANCEL:\n            /* Bug reports indicate that Node synthesizes a NGHTTP2_CANCEL\n             * code from connection drops. We want to prioritize reporting\n             * an unavailable status when that happens. */\n            if (this.connectionDropped) {\n              code = Status.UNAVAILABLE;\n              details = 'Connection dropped';\n            } else {\n              code = Status.CANCELLED;\n              details = 'Call cancelled';\n            }\n            break;\n          case http2.constants.NGHTTP2_ENHANCE_YOUR_CALM:\n            code = Status.RESOURCE_EXHAUSTED;\n            details = 'Bandwidth exhausted or memory limit exceeded';\n            break;\n          case http2.constants.NGHTTP2_INADEQUATE_SECURITY:\n            code = Status.PERMISSION_DENIED;\n            details = 'Protocol not secure enough';\n            break;\n          case http2.constants.NGHTTP2_INTERNAL_ERROR:\n            code = Status.INTERNAL;\n            if (this.internalError === null) {\n              /* This error code was previously handled in the default case, and\n               * there are several instances of it online, so I wanted to\n               * preserve the original error message so that people find existing\n               * information in searches, but also include the more recognizable\n               * \"Internal server error\" message. */\n              details = `Received RST_STREAM with code ${http2Stream.rstCode} (Internal server error)`;\n            } else {\n              if (\n                this.internalError.code === 'ECONNRESET' ||\n                this.internalError.code === 'ETIMEDOUT'\n              ) {\n                code = Status.UNAVAILABLE;\n                details = this.internalError.message;\n              } else {\n                /* The \"Received RST_STREAM with code ...\" error is preserved\n                 * here for continuity with errors reported online, but the\n                 * error message at the end will probably be more relevant in\n                 * most cases. */\n                details = `Received RST_STREAM with code ${http2Stream.rstCode} triggered by internal client error: ${this.internalError.message}`;\n              }\n            }\n            break;\n          default:\n            code = Status.INTERNAL;\n            details = `Received RST_STREAM with code ${http2Stream.rstCode}`;\n        }\n        // This is a no-op if trailers were received at all.\n        // This is OK, because status codes emitted here correspond to more\n        // catastrophic issues that prevent us from receiving trailers in the\n        // first place.\n        this.endCall({\n          code,\n          details,\n          metadata: new Metadata(),\n          rstCode: http2Stream.rstCode,\n        });\n      });\n    });\n    http2Stream.on('error', (err: SystemError) => {\n      /* We need an error handler here to stop \"Uncaught Error\" exceptions\n       * from bubbling up. However, errors here should all correspond to\n       * \"close\" events, where we will handle the error more granularly */\n      /* Specifically looking for stream errors that were *not* constructed\n       * from a RST_STREAM response here:\n       * https://github.com/nodejs/node/blob/8b8620d580314050175983402dfddf2674e8e22a/lib/internal/http2/core.js#L2267\n       */\n      if (err.code !== 'ERR_HTTP2_STREAM_ERROR') {\n        this.trace(\n          'Node error event: message=' +\n            err.message +\n            ' code=' +\n            err.code +\n            ' errno=' +\n            getSystemErrorName(err.errno) +\n            ' syscall=' +\n            err.syscall\n        );\n        this.internalError = err;\n      }\n      this.callEventTracker.onStreamEnd(false);\n    });\n  }\n  getDeadlineInfo(): string[] {\n    return [`remote_addr=${this.getPeer()}`];\n  }\n\n  public onDisconnect() {\n    this.connectionDropped = true;\n    /* Give the call an event loop cycle to finish naturally before reporting\n     * the disconnection as an error. */\n    setImmediate(() => {\n      this.endCall({\n        code: Status.UNAVAILABLE,\n        details: 'Connection dropped',\n        metadata: new Metadata(),\n      });\n    });\n  }\n\n  private outputStatus() {\n    /* Precondition: this.finalStatus !== null */\n    if (!this.statusOutput) {\n      this.statusOutput = true;\n      this.trace(\n        'ended with status: code=' +\n          this.finalStatus!.code +\n          ' details=\"' +\n          this.finalStatus!.details +\n          '\"'\n      );\n      this.callEventTracker.onCallEnd(this.finalStatus!);\n      /* We delay the actual action of bubbling up the status to insulate the\n       * cleanup code in this class from any errors that may be thrown in the\n       * upper layers as a result of bubbling up the status. In particular,\n       * if the status is not OK, the \"error\" event may be emitted\n       * synchronously at the top level, which will result in a thrown error if\n       * the user does not handle that event. */\n      process.nextTick(() => {\n        this.listener.onReceiveStatus(this.finalStatus!);\n      });\n      /* Leave the http2 stream in flowing state to drain incoming messages, to\n       * ensure that the stream closure completes. The call stream already does\n       * not push more messages after the status is output, so the messages go\n       * nowhere either way. */\n      this.http2Stream.resume();\n    }\n  }\n\n  private trace(text: string): void {\n    logging.trace(\n      LogVerbosity.DEBUG,\n      TRACER_NAME,\n      '[' + this.callId + '] ' + text\n    );\n  }\n\n  /**\n   * On first call, emits a 'status' event with the given StatusObject.\n   * Subsequent calls are no-ops.\n   * @param status The status of the call.\n   */\n  private endCall(status: StatusObjectWithRstCode): void {\n    /* If the status is OK and a new status comes in (e.g. from a\n     * deserialization failure), that new status takes priority */\n    if (this.finalStatus === null || this.finalStatus.code === Status.OK) {\n      this.finalStatus = status;\n      this.maybeOutputStatus();\n    }\n    this.destroyHttp2Stream();\n  }\n\n  private maybeOutputStatus() {\n    if (this.finalStatus !== null) {\n      /* The combination check of readsClosed and that the two message buffer\n       * arrays are empty checks that there all incoming data has been fully\n       * processed */\n      if (\n        this.finalStatus.code !== Status.OK ||\n        (this.readsClosed &&\n          this.unpushedReadMessages.length === 0 &&\n          !this.isReadFilterPending &&\n          !this.isPushPending)\n      ) {\n        this.outputStatus();\n      }\n    }\n  }\n\n  private push(message: Buffer): void {\n    this.trace(\n      'pushing to reader message of length ' +\n        (message instanceof Buffer ? message.length : null)\n    );\n    this.canPush = false;\n    this.isPushPending = true;\n    process.nextTick(() => {\n      this.isPushPending = false;\n      /* If we have already output the status any later messages should be\n       * ignored, and can cause out-of-order operation errors higher up in the\n       * stack. Checking as late as possible here to avoid any race conditions.\n       */\n      if (this.statusOutput) {\n        return;\n      }\n      this.listener.onReceiveMessage(message);\n      this.maybeOutputStatus();\n    });\n  }\n\n  private tryPush(messageBytes: Buffer): void {\n    if (this.canPush) {\n      this.http2Stream!.pause();\n      this.push(messageBytes);\n    } else {\n      this.trace(\n        'unpushedReadMessages.push message of length ' + messageBytes.length\n      );\n      this.unpushedReadMessages.push(messageBytes);\n    }\n  }\n\n  private handleTrailers(headers: http2.IncomingHttpHeaders) {\n    this.serverEndedCall = true;\n    this.callEventTracker.onStreamEnd(true);\n    let headersString = '';\n    for (const header of Object.keys(headers)) {\n      headersString += '\\t\\t' + header + ': ' + headers[header] + '\\n';\n    }\n    this.trace('Received server trailers:\\n' + headersString);\n    let metadata: Metadata;\n    try {\n      metadata = Metadata.fromHttp2Headers(headers);\n    } catch (e) {\n      metadata = new Metadata();\n    }\n    const metadataMap = metadata.getMap();\n    let status: StatusObject;\n    if (typeof metadataMap['grpc-status'] === 'string') {\n      const receivedStatus: Status = Number(metadataMap['grpc-status']);\n      this.trace('received status code ' + receivedStatus + ' from server');\n      metadata.remove('grpc-status');\n      let details = '';\n      if (typeof metadataMap['grpc-message'] === 'string') {\n        try {\n          details = decodeURI(metadataMap['grpc-message']);\n        } catch (e) {\n          details = metadataMap['grpc-message'];\n        }\n        metadata.remove('grpc-message');\n        this.trace(\n          'received status details string \"' + details + '\" from server'\n        );\n      }\n      status = {\n        code: receivedStatus,\n        details: details,\n        metadata: metadata\n      };\n    } else if (this.httpStatusCode) {\n      status = mapHttpStatusCode(this.httpStatusCode);\n      status.metadata = metadata;\n    } else {\n      status = {\n        code: Status.UNKNOWN,\n        details: 'No status information received',\n        metadata: metadata\n      };\n    }\n    // This is a no-op if the call was already ended when handling headers.\n    this.endCall(status);\n  }\n\n  private destroyHttp2Stream() {\n    // The http2 stream could already have been destroyed if cancelWithStatus\n    // is called in response to an internal http2 error.\n    if (this.http2Stream.destroyed) {\n      return;\n    }\n    /* If the server ended the call, sending an RST_STREAM is redundant, so we\n     * just half close on the client side instead to finish closing the stream.\n     */\n    if (this.serverEndedCall) {\n      this.http2Stream.end();\n    } else {\n      /* If the call has ended with an OK status, communicate that when closing\n       * the stream, partly to avoid a situation in which we detect an error\n       * RST_STREAM as a result after we have the status */\n      let code: number;\n      if (this.finalStatus?.code === Status.OK) {\n        code = http2.constants.NGHTTP2_NO_ERROR;\n      } else {\n        code = http2.constants.NGHTTP2_CANCEL;\n      }\n      this.trace('close http2 stream with code ' + code);\n      this.http2Stream.close(code);\n    }\n  }\n\n  cancelWithStatus(status: Status, details: string): void {\n    this.trace(\n      'cancelWithStatus code: ' + status + ' details: \"' + details + '\"'\n    );\n    this.endCall({ code: status, details, metadata: new Metadata() });\n  }\n\n  getStatus(): StatusObject | null {\n    return this.finalStatus;\n  }\n\n  getPeer(): string {\n    return this.transport.getPeerName();\n  }\n\n  getCallNumber(): number {\n    return this.callId;\n  }\n\n  getAuthContext(): AuthContext {\n    return this.transport.getAuthContext();\n  }\n\n  startRead() {\n    /* If the stream has ended with an error, we should not emit any more\n     * messages and we should communicate that the stream has ended */\n    if (this.finalStatus !== null && this.finalStatus.code !== Status.OK) {\n      this.readsClosed = true;\n      this.maybeOutputStatus();\n      return;\n    }\n    this.canPush = true;\n    if (this.unpushedReadMessages.length > 0) {\n      const nextMessage: Buffer = this.unpushedReadMessages.shift()!;\n      this.push(nextMessage);\n      return;\n    }\n    /* Only resume reading from the http2Stream if we don't have any pending\n     * messages to emit */\n    this.http2Stream.resume();\n  }\n\n  sendMessageWithContext(context: MessageContext, message: Buffer) {\n    this.trace('write() called with message of length ' + message.length);\n    const cb: WriteCallback = (error?: Error | null) => {\n      /* nextTick here ensures that no stream action can be taken in the call\n       * stack of the write callback, in order to hopefully work around\n       * https://github.com/nodejs/node/issues/49147 */\n      process.nextTick(() => {\n        let code: Status = Status.UNAVAILABLE;\n        if (\n          (error as NodeJS.ErrnoException)?.code ===\n          'ERR_STREAM_WRITE_AFTER_END'\n        ) {\n          code = Status.INTERNAL;\n        }\n        if (error) {\n          this.cancelWithStatus(code, `Write error: ${error.message}`);\n        }\n        context.callback?.();\n      });\n    };\n    this.trace('sending data chunk of length ' + message.length);\n    this.callEventTracker.addMessageSent();\n    try {\n      this.http2Stream!.write(message, cb);\n    } catch (error) {\n      this.endCall({\n        code: Status.UNAVAILABLE,\n        details: `Write failed with error ${(error as Error).message}`,\n        metadata: new Metadata(),\n      });\n    }\n  }\n\n  halfClose() {\n    this.trace('end() called');\n    this.trace('calling end() on HTTP/2 stream');\n    this.http2Stream.end();\n  }\n}\n", "/*\n * Copyright 2023 gRPC authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n */\n\nimport * as http2 from 'http2';\nimport {\n  CipherNameAndProtocol,\n  TLSSocket,\n} from 'tls';\nimport { PartialStatusObject } from './call-interface';\nimport { SecureConnector, SecureConnectResult } from './channel-credentials';\nimport { ChannelOptions } from './channel-options';\nimport {\n  ChannelzCallTracker,\n  ChannelzCallTrackerStub,\n  registerChannelzSocket,\n  SocketInfo,\n  SocketRef,\n  TlsInfo,\n  unregisterChannelzRef,\n} from './channelz';\nimport { LogVerbosity } from './constants';\nimport { getProxiedConnection } from './http_proxy';\nimport * as logging from './logging';\nimport { getDefaultAuthority } from './resolver';\nimport {\n  stringToSubchannelAddress,\n  SubchannelAddress,\n  subchannelAddressToString,\n} from './subchannel-address';\nimport { GrpcUri, parseUri, uriToString } from './uri-parser';\nimport * as net from 'net';\nimport {\n  Http2SubchannelCall,\n  SubchannelCall,\n  SubchannelCallInterceptingListener,\n} from './subchannel-call';\nimport { Metadata } from './metadata';\nimport { getNextCallNumber } from './call-number';\nimport { Socket } from 'net';\nimport { AuthContext } from './auth-context';\n\nconst TRACER_NAME = 'transport';\nconst FLOW_CONTROL_TRACER_NAME = 'transport_flowctrl';\n\nconst clientVersion = require('../../package.json').version;\n\nconst {\n  HTTP2_HEADER_AUTHORITY,\n  HTTP2_HEADER_CONTENT_TYPE,\n  HTTP2_HEADER_METHOD,\n  HTTP2_HEADER_PATH,\n  HTTP2_HEADER_TE,\n  HTTP2_HEADER_USER_AGENT,\n} = http2.constants;\n\nconst KEEPALIVE_TIMEOUT_MS = 20000;\n\nexport interface CallEventTracker {\n  addMessageSent(): void;\n  addMessageReceived(): void;\n  onCallEnd(status: PartialStatusObject): void;\n  onStreamEnd(success: boolean): void;\n}\n\nexport interface TransportDisconnectListener {\n  (tooManyPings: boolean): void;\n}\n\nexport interface Transport {\n  getChannelzRef(): SocketRef;\n  getPeerName(): string;\n  getOptions(): ChannelOptions;\n  getAuthContext(): AuthContext;\n  createCall(\n    metadata: Metadata,\n    host: string,\n    method: string,\n    listener: SubchannelCallInterceptingListener,\n    subchannelCallStatsTracker: Partial<CallEventTracker>\n  ): SubchannelCall;\n  addDisconnectListener(listener: TransportDisconnectListener): void;\n  shutdown(): void;\n}\n\nconst tooManyPingsData: Buffer = Buffer.from('too_many_pings', 'ascii');\n\nclass Http2Transport implements Transport {\n  /**\n   * The amount of time in between sending pings\n   */\n  private readonly keepaliveTimeMs: number;\n  /**\n   * The amount of time to wait for an acknowledgement after sending a ping\n   */\n  private readonly keepaliveTimeoutMs: number;\n  /**\n   * Indicates whether keepalive pings should be sent without any active calls\n   */\n  private readonly keepaliveWithoutCalls: boolean;\n  /**\n   * Timer reference indicating when to send the next ping or when the most recent ping will be considered lost.\n   */\n  private keepaliveTimer: NodeJS.Timeout | null = null;\n  /**\n   * Indicates that the keepalive timer ran out while there were no active\n   * calls, and a ping should be sent the next time a call starts.\n   */\n  private pendingSendKeepalivePing = false;\n\n  private userAgent: string;\n\n  private activeCalls: Set<Http2SubchannelCall> = new Set();\n\n  private subchannelAddressString: string;\n\n  private disconnectListeners: TransportDisconnectListener[] = [];\n\n  private disconnectHandled = false;\n\n  private authContext: AuthContext;\n\n  // Channelz info\n  private channelzRef: SocketRef;\n  private readonly channelzEnabled: boolean = true;\n  private streamTracker: ChannelzCallTracker | ChannelzCallTrackerStub;\n  private keepalivesSent = 0;\n  private messagesSent = 0;\n  private messagesReceived = 0;\n  private lastMessageSentTimestamp: Date | null = null;\n  private lastMessageReceivedTimestamp: Date | null = null;\n\n  constructor(\n    private session: http2.ClientHttp2Session,\n    subchannelAddress: SubchannelAddress,\n    private options: ChannelOptions,\n    /**\n     * Name of the remote server, if it is not the same as the subchannel\n     * address, i.e. if connecting through an HTTP CONNECT proxy.\n     */\n    private remoteName: string | null\n  ) {\n    /* Populate subchannelAddressString and channelzRef before doing anything\n     * else, because they are used in the trace methods. */\n    this.subchannelAddressString = subchannelAddressToString(subchannelAddress);\n\n    if (options['grpc.enable_channelz'] === 0) {\n      this.channelzEnabled = false;\n      this.streamTracker = new ChannelzCallTrackerStub();\n    } else {\n      this.streamTracker = new ChannelzCallTracker();\n    }\n\n    this.channelzRef = registerChannelzSocket(\n      this.subchannelAddressString,\n      () => this.getChannelzInfo(),\n      this.channelzEnabled\n    );\n\n    // Build user-agent string.\n    this.userAgent = [\n      options['grpc.primary_user_agent'],\n      `grpc-node-js/${clientVersion}`,\n      options['grpc.secondary_user_agent'],\n    ]\n      .filter(e => e)\n      .join(' '); // remove falsey values first\n\n    if ('grpc.keepalive_time_ms' in options) {\n      this.keepaliveTimeMs = options['grpc.keepalive_time_ms']!;\n    } else {\n      this.keepaliveTimeMs = -1;\n    }\n    if ('grpc.keepalive_timeout_ms' in options) {\n      this.keepaliveTimeoutMs = options['grpc.keepalive_timeout_ms']!;\n    } else {\n      this.keepaliveTimeoutMs = KEEPALIVE_TIMEOUT_MS;\n    }\n    if ('grpc.keepalive_permit_without_calls' in options) {\n      this.keepaliveWithoutCalls =\n        options['grpc.keepalive_permit_without_calls'] === 1;\n    } else {\n      this.keepaliveWithoutCalls = false;\n    }\n\n    session.once('close', () => {\n      this.trace('session closed');\n      this.handleDisconnect();\n    });\n\n    session.once(\n      'goaway',\n      (errorCode: number, lastStreamID: number, opaqueData?: Buffer) => {\n        let tooManyPings = false;\n        /* See the last paragraph of\n         * https://github.com/grpc/proposal/blob/master/A8-client-side-keepalive.md#basic-keepalive */\n        if (\n          errorCode === http2.constants.NGHTTP2_ENHANCE_YOUR_CALM &&\n          opaqueData &&\n          opaqueData.equals(tooManyPingsData)\n        ) {\n          tooManyPings = true;\n        }\n        this.trace(\n          'connection closed by GOAWAY with code ' +\n            errorCode +\n            ' and data ' +\n            opaqueData?.toString()\n        );\n        this.reportDisconnectToOwner(tooManyPings);\n      }\n    );\n\n    session.once('error', error => {\n      this.trace('connection closed with error ' + (error as Error).message);\n      this.handleDisconnect();\n    });\n\n    session.socket.once('close', (hadError) => {\n      this.trace('connection closed. hadError=' + hadError);\n      this.handleDisconnect();\n    });\n\n    if (logging.isTracerEnabled(TRACER_NAME)) {\n      session.on('remoteSettings', (settings: http2.Settings) => {\n        this.trace(\n          'new settings received' +\n            (this.session !== session ? ' on the old connection' : '') +\n            ': ' +\n            JSON.stringify(settings)\n        );\n      });\n      session.on('localSettings', (settings: http2.Settings) => {\n        this.trace(\n          'local settings acknowledged by remote' +\n            (this.session !== session ? ' on the old connection' : '') +\n            ': ' +\n            JSON.stringify(settings)\n        );\n      });\n    }\n\n    /* Start the keepalive timer last, because this can trigger trace logs,\n     * which should only happen after everything else is set up. */\n    if (this.keepaliveWithoutCalls) {\n      this.maybeStartKeepalivePingTimer();\n    }\n\n    if (session.socket instanceof TLSSocket) {\n      this.authContext = {\n        transportSecurityType: 'ssl',\n        sslPeerCertificate: session.socket.getPeerCertificate()\n      };\n    } else {\n      this.authContext = {};\n    }\n  }\n\n  private getChannelzInfo(): SocketInfo {\n    const sessionSocket = this.session.socket;\n    const remoteAddress = sessionSocket.remoteAddress\n      ? stringToSubchannelAddress(\n          sessionSocket.remoteAddress,\n          sessionSocket.remotePort\n        )\n      : null;\n    const localAddress = sessionSocket.localAddress\n      ? stringToSubchannelAddress(\n          sessionSocket.localAddress,\n          sessionSocket.localPort\n        )\n      : null;\n    let tlsInfo: TlsInfo | null;\n    if (this.session.encrypted) {\n      const tlsSocket: TLSSocket = sessionSocket as TLSSocket;\n      const cipherInfo: CipherNameAndProtocol & { standardName?: string } =\n        tlsSocket.getCipher();\n      const certificate = tlsSocket.getCertificate();\n      const peerCertificate = tlsSocket.getPeerCertificate();\n      tlsInfo = {\n        cipherSuiteStandardName: cipherInfo.standardName ?? null,\n        cipherSuiteOtherName: cipherInfo.standardName ? null : cipherInfo.name,\n        localCertificate:\n          certificate && 'raw' in certificate ? certificate.raw : null,\n        remoteCertificate:\n          peerCertificate && 'raw' in peerCertificate\n            ? peerCertificate.raw\n            : null,\n      };\n    } else {\n      tlsInfo = null;\n    }\n    const socketInfo: SocketInfo = {\n      remoteAddress: remoteAddress,\n      localAddress: localAddress,\n      security: tlsInfo,\n      remoteName: this.remoteName,\n      streamsStarted: this.streamTracker.callsStarted,\n      streamsSucceeded: this.streamTracker.callsSucceeded,\n      streamsFailed: this.streamTracker.callsFailed,\n      messagesSent: this.messagesSent,\n      messagesReceived: this.messagesReceived,\n      keepAlivesSent: this.keepalivesSent,\n      lastLocalStreamCreatedTimestamp:\n        this.streamTracker.lastCallStartedTimestamp,\n      lastRemoteStreamCreatedTimestamp: null,\n      lastMessageSentTimestamp: this.lastMessageSentTimestamp,\n      lastMessageReceivedTimestamp: this.lastMessageReceivedTimestamp,\n      localFlowControlWindow: this.session.state.localWindowSize ?? null,\n      remoteFlowControlWindow: this.session.state.remoteWindowSize ?? null,\n    };\n    return socketInfo;\n  }\n\n  private trace(text: string): void {\n    logging.trace(\n      LogVerbosity.DEBUG,\n      TRACER_NAME,\n      '(' +\n        this.channelzRef.id +\n        ') ' +\n        this.subchannelAddressString +\n        ' ' +\n        text\n    );\n  }\n\n  private keepaliveTrace(text: string): void {\n    logging.trace(\n      LogVerbosity.DEBUG,\n      'keepalive',\n      '(' +\n        this.channelzRef.id +\n        ') ' +\n        this.subchannelAddressString +\n        ' ' +\n        text\n    );\n  }\n\n  private flowControlTrace(text: string): void {\n    logging.trace(\n      LogVerbosity.DEBUG,\n      FLOW_CONTROL_TRACER_NAME,\n      '(' +\n        this.channelzRef.id +\n        ') ' +\n        this.subchannelAddressString +\n        ' ' +\n        text\n    );\n  }\n\n  private internalsTrace(text: string): void {\n    logging.trace(\n      LogVerbosity.DEBUG,\n      'transport_internals',\n      '(' +\n        this.channelzRef.id +\n        ') ' +\n        this.subchannelAddressString +\n        ' ' +\n        text\n    );\n  }\n\n  /**\n   * Indicate to the owner of this object that this transport should no longer\n   * be used. That happens if the connection drops, or if the server sends a\n   * GOAWAY.\n   * @param tooManyPings If true, this was triggered by a GOAWAY with data\n   * indicating that the session was closed becaues the client sent too many\n   * pings.\n   * @returns\n   */\n  private reportDisconnectToOwner(tooManyPings: boolean) {\n    if (this.disconnectHandled) {\n      return;\n    }\n    this.disconnectHandled = true;\n    this.disconnectListeners.forEach(listener => listener(tooManyPings));\n  }\n\n  /**\n   * Handle connection drops, but not GOAWAYs.\n   */\n  private handleDisconnect() {\n    this.clearKeepaliveTimeout();\n    this.reportDisconnectToOwner(false);\n    for (const call of this.activeCalls) {\n      call.onDisconnect();\n    }\n    // Wait an event loop cycle before destroying the connection\n    setImmediate(() => {\n      this.session.destroy();\n    });\n  }\n\n  addDisconnectListener(listener: TransportDisconnectListener): void {\n    this.disconnectListeners.push(listener);\n  }\n\n  private canSendPing() {\n    return (\n      !this.session.destroyed &&\n      this.keepaliveTimeMs > 0 &&\n      (this.keepaliveWithoutCalls || this.activeCalls.size > 0)\n    );\n  }\n\n  private maybeSendPing() {\n    if (!this.canSendPing()) {\n      this.pendingSendKeepalivePing = true;\n      return;\n    }\n    if (this.keepaliveTimer) {\n      console.error('keepaliveTimeout is not null');\n      return;\n    }\n    if (this.channelzEnabled) {\n      this.keepalivesSent += 1;\n    }\n    this.keepaliveTrace(\n      'Sending ping with timeout ' + this.keepaliveTimeoutMs + 'ms'\n    );\n    this.keepaliveTimer = setTimeout(() => {\n      this.keepaliveTimer = null;\n      this.keepaliveTrace('Ping timeout passed without response');\n      this.handleDisconnect();\n    }, this.keepaliveTimeoutMs);\n    this.keepaliveTimer.unref?.();\n    let pingSendError = '';\n    try {\n      const pingSentSuccessfully = this.session.ping(\n        (err: Error | null, duration: number, payload: Buffer) => {\n          this.clearKeepaliveTimeout();\n          if (err) {\n            this.keepaliveTrace('Ping failed with error ' + err.message);\n            this.handleDisconnect();\n          } else {\n            this.keepaliveTrace('Received ping response');\n            this.maybeStartKeepalivePingTimer();\n          }\n        }\n      );\n      if (!pingSentSuccessfully) {\n        pingSendError = 'Ping returned false';\n      }\n    } catch (e) {\n      // grpc/grpc-node#2139\n      pingSendError = (e instanceof Error ? e.message : '') || 'Unknown error';\n    }\n    if (pingSendError) {\n      this.keepaliveTrace('Ping send failed: ' + pingSendError);\n      this.handleDisconnect();\n    }\n  }\n\n  /**\n   * Starts the keepalive ping timer if appropriate. If the timer already ran\n   * out while there were no active requests, instead send a ping immediately.\n   * If the ping timer is already running or a ping is currently in flight,\n   * instead do nothing and wait for them to resolve.\n   */\n  private maybeStartKeepalivePingTimer() {\n    if (!this.canSendPing()) {\n      return;\n    }\n    if (this.pendingSendKeepalivePing) {\n      this.pendingSendKeepalivePing = false;\n      this.maybeSendPing();\n    } else if (!this.keepaliveTimer) {\n      this.keepaliveTrace(\n        'Starting keepalive timer for ' + this.keepaliveTimeMs + 'ms'\n      );\n      this.keepaliveTimer = setTimeout(() => {\n        this.keepaliveTimer = null;\n        this.maybeSendPing();\n      }, this.keepaliveTimeMs);\n      this.keepaliveTimer.unref?.();\n    }\n    /* Otherwise, there is already either a keepalive timer or a ping pending,\n     * wait for those to resolve. */\n  }\n\n  /**\n   * Clears whichever keepalive timeout is currently active, if any.\n   */\n  private clearKeepaliveTimeout() {\n    if (this.keepaliveTimer) {\n      clearTimeout(this.keepaliveTimer);\n      this.keepaliveTimer = null;\n    }\n  }\n\n  private removeActiveCall(call: Http2SubchannelCall) {\n    this.activeCalls.delete(call);\n    if (this.activeCalls.size === 0) {\n      this.session.unref();\n    }\n  }\n\n  private addActiveCall(call: Http2SubchannelCall) {\n    this.activeCalls.add(call);\n    if (this.activeCalls.size === 1) {\n      this.session.ref();\n      if (!this.keepaliveWithoutCalls) {\n        this.maybeStartKeepalivePingTimer();\n      }\n    }\n  }\n\n  createCall(\n    metadata: Metadata,\n    host: string,\n    method: string,\n    listener: SubchannelCallInterceptingListener,\n    subchannelCallStatsTracker: Partial<CallEventTracker>\n  ): Http2SubchannelCall {\n    const headers = metadata.toHttp2Headers();\n    headers[HTTP2_HEADER_AUTHORITY] = host;\n    headers[HTTP2_HEADER_USER_AGENT] = this.userAgent;\n    headers[HTTP2_HEADER_CONTENT_TYPE] = 'application/grpc';\n    headers[HTTP2_HEADER_METHOD] = 'POST';\n    headers[HTTP2_HEADER_PATH] = method;\n    headers[HTTP2_HEADER_TE] = 'trailers';\n    let http2Stream: http2.ClientHttp2Stream;\n    /* In theory, if an error is thrown by session.request because session has\n     * become unusable (e.g. because it has received a goaway), this subchannel\n     * should soon see the corresponding close or goaway event anyway and leave\n     * READY. But we have seen reports that this does not happen\n     * (https://github.com/googleapis/nodejs-firestore/issues/1023#issuecomment-653204096)\n     * so for defense in depth, we just discard the session when we see an\n     * error here.\n     */\n    try {\n      http2Stream = this.session.request(headers);\n    } catch (e) {\n      this.handleDisconnect();\n      throw e;\n    }\n    this.flowControlTrace(\n      'local window size: ' +\n        this.session.state.localWindowSize +\n        ' remote window size: ' +\n        this.session.state.remoteWindowSize\n    );\n    this.internalsTrace(\n      'session.closed=' +\n        this.session.closed +\n        ' session.destroyed=' +\n        this.session.destroyed +\n        ' session.socket.destroyed=' +\n        this.session.socket.destroyed\n    );\n    let eventTracker: CallEventTracker;\n    // eslint-disable-next-line prefer-const\n    let call: Http2SubchannelCall;\n    if (this.channelzEnabled) {\n      this.streamTracker.addCallStarted();\n      eventTracker = {\n        addMessageSent: () => {\n          this.messagesSent += 1;\n          this.lastMessageSentTimestamp = new Date();\n          subchannelCallStatsTracker.addMessageSent?.();\n        },\n        addMessageReceived: () => {\n          this.messagesReceived += 1;\n          this.lastMessageReceivedTimestamp = new Date();\n          subchannelCallStatsTracker.addMessageReceived?.();\n        },\n        onCallEnd: status => {\n          subchannelCallStatsTracker.onCallEnd?.(status);\n          this.removeActiveCall(call);\n        },\n        onStreamEnd: success => {\n          if (success) {\n            this.streamTracker.addCallSucceeded();\n          } else {\n            this.streamTracker.addCallFailed();\n          }\n          subchannelCallStatsTracker.onStreamEnd?.(success);\n        },\n      };\n    } else {\n      eventTracker = {\n        addMessageSent: () => {\n          subchannelCallStatsTracker.addMessageSent?.();\n        },\n        addMessageReceived: () => {\n          subchannelCallStatsTracker.addMessageReceived?.();\n        },\n        onCallEnd: status => {\n          subchannelCallStatsTracker.onCallEnd?.(status);\n          this.removeActiveCall(call);\n        },\n        onStreamEnd: success => {\n          subchannelCallStatsTracker.onStreamEnd?.(success);\n        },\n      };\n    }\n    call = new Http2SubchannelCall(\n      http2Stream,\n      eventTracker,\n      listener,\n      this,\n      getNextCallNumber()\n    );\n    this.addActiveCall(call);\n    return call;\n  }\n\n  getChannelzRef(): SocketRef {\n    return this.channelzRef;\n  }\n\n  getPeerName() {\n    return this.subchannelAddressString;\n  }\n\n  getOptions() {\n    return this.options;\n  }\n\n  getAuthContext(): AuthContext {\n    return this.authContext;\n  }\n\n  shutdown() {\n    this.session.close();\n    unregisterChannelzRef(this.channelzRef);\n  }\n}\n\nexport interface SubchannelConnector {\n  connect(\n    address: SubchannelAddress,\n    secureConnector: SecureConnector,\n    options: ChannelOptions\n  ): Promise<Transport>;\n  shutdown(): void;\n}\n\nexport class Http2SubchannelConnector implements SubchannelConnector {\n  private session: http2.ClientHttp2Session | null = null;\n  private isShutdown = false;\n  constructor(private channelTarget: GrpcUri) {}\n\n  private trace(text: string) {\n    logging.trace(\n      LogVerbosity.DEBUG,\n      TRACER_NAME,\n      uriToString(this.channelTarget) + ' ' + text\n    );\n  }\n\n  private createSession(\n    secureConnectResult: SecureConnectResult,\n    address: SubchannelAddress,\n    options: ChannelOptions\n  ): Promise<Http2Transport> {\n    if (this.isShutdown) {\n      return Promise.reject();\n    }\n\n    if (secureConnectResult.socket.closed) {\n      return Promise.reject('Connection closed before starting HTTP/2 handshake');\n    }\n\n    return new Promise<Http2Transport>((resolve, reject) => {\n      let remoteName: string | null = null;\n      let realTarget: GrpcUri = this.channelTarget;\n      if ('grpc.http_connect_target' in options) {\n        const parsedTarget = parseUri(options['grpc.http_connect_target']!);\n        if (parsedTarget) {\n          realTarget = parsedTarget;\n          remoteName = uriToString(parsedTarget);\n        }\n      }\n      const scheme = secureConnectResult.secure ? 'https' : 'http';\n      const targetPath = getDefaultAuthority(realTarget);\n      const closeHandler = () => {\n        this.session?.destroy();\n        this.session = null;\n        // Leave time for error event to happen before rejecting\n        setImmediate(() => {\n          if (!reportedError) {\n            reportedError = true;\n            reject(`${errorMessage.trim()} (${new Date().toISOString()})`);\n          }\n        });\n      };\n      const errorHandler = (error: Error) => {\n        this.session?.destroy();\n        errorMessage = (error as Error).message;\n        this.trace('connection failed with error ' + errorMessage);\n        if (!reportedError) {\n          reportedError = true;\n          reject(`${errorMessage} (${new Date().toISOString()})`);\n        }\n      };\n      const sessionOptions: http2.ClientSessionOptions = {\n        createConnection: (authority, option) => {\n          return secureConnectResult.socket;\n        },\n        settings: {\n          initialWindowSize:\n            options['grpc-node.flow_control_window'] ??\n            http2.getDefaultSettings?.()?.initialWindowSize ?? 65535,\n        },\n        maxSendHeaderBlockLength: Number.MAX_SAFE_INTEGER,\n        /* By default, set a very large max session memory limit, to effectively\n         * disable enforcement of the limit. Some testing indicates that Node's\n         * behavior degrades badly when this limit is reached, so we solve that\n         * by disabling the check entirely. */\n        maxSessionMemory: options['grpc-node.max_session_memory'] ?? Number.MAX_SAFE_INTEGER\n      };\n      const session = http2.connect(`${scheme}://${targetPath}`, sessionOptions);\n      // Prepare window size configuration for remoteSettings handler\n      const defaultWin = http2.getDefaultSettings?.()?.initialWindowSize ?? 65535; // 65 535 B\n      const connWin = options[\n        'grpc-node.flow_control_window'\n      ] as number | undefined;\n\n      this.session = session;\n      let errorMessage = 'Failed to connect';\n      let reportedError = false;\n      session.unref();\n      session.once('remoteSettings', () => {\n        // Send WINDOW_UPDATE now to avoid 65 KB start-window stall.\n        if (connWin && connWin > defaultWin) {\n          try {\n            // Node \u2265 14.18\n            (session as any).setLocalWindowSize(connWin);\n          } catch {\n            // Older Node: bump by the delta\n            const delta = connWin - (session.state.localWindowSize ?? defaultWin);\n            if (delta > 0) (session as any).incrementWindowSize(delta);\n          }\n        }\n\n        session.removeAllListeners();\n        secureConnectResult.socket.removeListener('close', closeHandler);\n        secureConnectResult.socket.removeListener('error', errorHandler);\n        resolve(new Http2Transport(session, address, options, remoteName));\n        this.session = null;\n      });\n      session.once('close', closeHandler);\n      session.once('error', errorHandler);\n      secureConnectResult.socket.once('close', closeHandler);\n      secureConnectResult.socket.once('error', errorHandler);\n    });\n  }\n\n  private tcpConnect(address: SubchannelAddress, options: ChannelOptions): Promise<Socket> {\n    return getProxiedConnection(address, options).then(proxiedSocket => {\n      if (proxiedSocket) {\n        return proxiedSocket;\n      } else {\n        return new Promise<Socket>((resolve, reject) => {\n          const closeCallback = () => {\n            reject(new Error('Socket closed'));\n          };\n          const errorCallback = (error: Error) => {\n            reject(error);\n          }\n          const socket = net.connect(address, () => {\n            socket.removeListener('close', closeCallback);\n            socket.removeListener('error', errorCallback);\n            resolve(socket);\n          });\n          socket.once('close', closeCallback);\n          socket.once('error', errorCallback);\n        });\n      }\n    });\n  }\n\n  async connect(\n    address: SubchannelAddress,\n    secureConnector: SecureConnector,\n    options: ChannelOptions\n  ): Promise<Http2Transport> {\n    if (this.isShutdown) {\n      return Promise.reject();\n    }\n    let tcpConnection: net.Socket | null = null;\n    let secureConnectResult: SecureConnectResult | null  = null;\n    const addressString = subchannelAddressToString(address);\n    try {\n      this.trace(addressString + ' Waiting for secureConnector to be ready');\n      await secureConnector.waitForReady();\n      this.trace(addressString + ' secureConnector is ready');\n      tcpConnection = await this.tcpConnect(address, options);\n      tcpConnection.setNoDelay();\n      this.trace(addressString + ' Established TCP connection');\n      secureConnectResult = await secureConnector.connect(tcpConnection);\n      this.trace(addressString + ' Established secure connection');\n      return this.createSession(secureConnectResult, address, options);\n    } catch (e) {\n      tcpConnection?.destroy();\n      secureConnectResult?.socket.destroy();\n      throw e;\n    }\n  }\n\n  shutdown(): void {\n    this.isShutdown = true;\n    this.session?.close();\n    this.session = null;\n  }\n}\n", "/*\n * Copyright 2019 gRPC authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n */\n\nimport { ChannelOptions, channelOptionsEqual } from './channel-options';\nimport { Subchannel } from './subchannel';\nimport {\n  SubchannelAddress,\n  subchannelAddressEqual,\n} from './subchannel-address';\nimport { ChannelCredentials } from './channel-credentials';\nimport { GrpcUri, uriToString } from './uri-parser';\nimport { Http2SubchannelConnector } from './transport';\n\n// 10 seconds in milliseconds. This value is arbitrary.\n/**\n * The amount of time in between checks for dropping subchannels that have no\n * other references\n */\nconst REF_CHECK_INTERVAL = 10_000;\n\nexport class SubchannelPool {\n  private pool: {\n    [channelTarget: string]: Array<{\n      subchannelAddress: SubchannelAddress;\n      channelArguments: ChannelOptions;\n      channelCredentials: ChannelCredentials;\n      subchannel: Subchannel;\n    }>;\n  } = Object.create(null);\n\n  /**\n   * A timer of a task performing a periodic subchannel cleanup.\n   */\n  private cleanupTimer: NodeJS.Timeout | null = null;\n\n  /**\n   * A pool of subchannels use for making connections. Subchannels with the\n   * exact same parameters will be reused.\n   */\n  constructor() {}\n\n  /**\n   * Unrefs all unused subchannels and cancels the cleanup task if all\n   * subchannels have been unrefed.\n   */\n  unrefUnusedSubchannels(): void {\n    let allSubchannelsUnrefed = true;\n\n    /* These objects are created with Object.create(null), so they do not\n     * have a prototype, which means that for (... in ...) loops over them\n     * do not need to be filtered */\n    // eslint-disable-disable-next-line:forin\n    for (const channelTarget in this.pool) {\n      const subchannelObjArray = this.pool[channelTarget];\n\n      const refedSubchannels = subchannelObjArray.filter(\n        value => !value.subchannel.unrefIfOneRef()\n      );\n\n      if (refedSubchannels.length > 0) {\n        allSubchannelsUnrefed = false;\n      }\n\n      /* For each subchannel in the pool, try to unref it if it has\n       * exactly one ref (which is the ref from the pool itself). If that\n       * does happen, remove the subchannel from the pool */\n      this.pool[channelTarget] = refedSubchannels;\n    }\n    /* Currently we do not delete keys with empty values. If that results\n     * in significant memory usage we should change it. */\n\n    // Cancel the cleanup task if all subchannels have been unrefed.\n    if (allSubchannelsUnrefed && this.cleanupTimer !== null) {\n      clearInterval(this.cleanupTimer);\n      this.cleanupTimer = null;\n    }\n  }\n\n  /**\n   * Ensures that the cleanup task is spawned.\n   */\n  ensureCleanupTask(): void {\n    if (this.cleanupTimer === null) {\n      this.cleanupTimer = setInterval(() => {\n        this.unrefUnusedSubchannels();\n      }, REF_CHECK_INTERVAL);\n\n      // Unref because this timer should not keep the event loop running.\n      // Call unref only if it exists to address electron/electron#21162\n      this.cleanupTimer.unref?.();\n    }\n  }\n\n  /**\n   * Get a subchannel if one already exists with exactly matching parameters.\n   * Otherwise, create and save a subchannel with those parameters.\n   * @param channelTarget\n   * @param subchannelTarget\n   * @param channelArguments\n   * @param channelCredentials\n   */\n  getOrCreateSubchannel(\n    channelTargetUri: GrpcUri,\n    subchannelTarget: SubchannelAddress,\n    channelArguments: ChannelOptions,\n    channelCredentials: ChannelCredentials\n  ): Subchannel {\n    this.ensureCleanupTask();\n    const channelTarget = uriToString(channelTargetUri);\n    if (channelTarget in this.pool) {\n      const subchannelObjArray = this.pool[channelTarget];\n      for (const subchannelObj of subchannelObjArray) {\n        if (\n          subchannelAddressEqual(\n            subchannelTarget,\n            subchannelObj.subchannelAddress\n          ) &&\n          channelOptionsEqual(\n            channelArguments,\n            subchannelObj.channelArguments\n          ) &&\n          channelCredentials._equals(subchannelObj.channelCredentials)\n        ) {\n          return subchannelObj.subchannel;\n        }\n      }\n    }\n    // If we get here, no matching subchannel was found\n    const subchannel = new Subchannel(\n      channelTargetUri,\n      subchannelTarget,\n      channelArguments,\n      channelCredentials,\n      new Http2SubchannelConnector(channelTargetUri)\n    );\n    if (!(channelTarget in this.pool)) {\n      this.pool[channelTarget] = [];\n    }\n    this.pool[channelTarget].push({\n      subchannelAddress: subchannelTarget,\n      channelArguments,\n      channelCredentials,\n      subchannel,\n    });\n    subchannel.ref();\n    return subchannel;\n  }\n}\n\nconst globalSubchannelPool = new SubchannelPool();\n\n/**\n * Get either the global subchannel pool, or a new subchannel pool.\n * @param global\n */\nexport function getSubchannelPool(global: boolean): SubchannelPool {\n  if (global) {\n    return globalSubchannelPool;\n  } else {\n    return new SubchannelPool();\n  }\n}\n", "/*\n * Copyright 2022 gRPC authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n */\n\nimport { CallCredentials } from './call-credentials';\nimport {\n  Call,\n  DeadlineInfoProvider,\n  InterceptingListener,\n  MessageContext,\n  StatusObject,\n} from './call-interface';\nimport { SubchannelCall } from './subchannel-call';\nimport { ConnectivityState } from './connectivity-state';\nimport { LogVerbosity, Status } from './constants';\nimport { Deadline, formatDateDifference, getDeadlineTimeoutString } from './deadline';\nimport { InternalChannel } from './internal-channel';\nimport { Metadata } from './metadata';\nimport { OnCallEnded, PickResultType } from './picker';\nimport { CallConfig } from './resolver';\nimport { splitHostPort } from './uri-parser';\nimport * as logging from './logging';\nimport { restrictControlPlaneStatusCode } from './control-plane-status';\nimport * as http2 from 'http2';\nimport { AuthContext } from './auth-context';\n\nconst TRACER_NAME = 'load_balancing_call';\n\nexport type RpcProgress = 'NOT_STARTED' | 'DROP' | 'REFUSED' | 'PROCESSED';\n\nexport interface StatusObjectWithProgress extends StatusObject {\n  progress: RpcProgress;\n}\n\nexport interface LoadBalancingCallInterceptingListener\n  extends InterceptingListener {\n  onReceiveStatus(status: StatusObjectWithProgress): void;\n}\n\nexport class LoadBalancingCall implements Call, DeadlineInfoProvider {\n  private child: SubchannelCall | null = null;\n  private readPending = false;\n  private pendingMessage: { context: MessageContext; message: Buffer } | null =\n    null;\n  private pendingHalfClose = false;\n  private ended = false;\n  private serviceUrl: string;\n  private metadata: Metadata | null = null;\n  private listener: InterceptingListener | null = null;\n  private onCallEnded: OnCallEnded | null = null;\n  private startTime: Date;\n  private childStartTime: Date | null = null;\n  constructor(\n    private readonly channel: InternalChannel,\n    private readonly callConfig: CallConfig,\n    private readonly methodName: string,\n    private readonly host: string,\n    private readonly credentials: CallCredentials,\n    private readonly deadline: Deadline,\n    private readonly callNumber: number\n  ) {\n    const splitPath: string[] = this.methodName.split('/');\n    let serviceName = '';\n    /* The standard path format is \"/{serviceName}/{methodName}\", so if we split\n     * by '/', the first item should be empty and the second should be the\n     * service name */\n    if (splitPath.length >= 2) {\n      serviceName = splitPath[1];\n    }\n    const hostname = splitHostPort(this.host)?.host ?? 'localhost';\n    /* Currently, call credentials are only allowed on HTTPS connections, so we\n     * can assume that the scheme is \"https\" */\n    this.serviceUrl = `https://${hostname}/${serviceName}`;\n    this.startTime = new Date();\n  }\n  getDeadlineInfo(): string[] {\n    const deadlineInfo: string[] = [];\n    if (this.childStartTime) {\n      if (this.childStartTime > this.startTime) {\n        if (this.metadata?.getOptions().waitForReady) {\n          deadlineInfo.push('wait_for_ready');\n        }\n        deadlineInfo.push(`LB pick: ${formatDateDifference(this.startTime, this.childStartTime)}`);\n      }\n      deadlineInfo.push(...this.child!.getDeadlineInfo());\n      return deadlineInfo;\n    } else {\n      if (this.metadata?.getOptions().waitForReady) {\n        deadlineInfo.push('wait_for_ready');\n      }\n      deadlineInfo.push('Waiting for LB pick');\n    }\n    return deadlineInfo;\n  }\n\n  private trace(text: string): void {\n    logging.trace(\n      LogVerbosity.DEBUG,\n      TRACER_NAME,\n      '[' + this.callNumber + '] ' + text\n    );\n  }\n\n  private outputStatus(status: StatusObject, progress: RpcProgress) {\n    if (!this.ended) {\n      this.ended = true;\n      this.trace(\n        'ended with status: code=' +\n          status.code +\n          ' details=\"' +\n          status.details +\n          '\" start time=' +\n          this.startTime.toISOString()\n      );\n      const finalStatus = { ...status, progress };\n      this.listener?.onReceiveStatus(finalStatus);\n      this.onCallEnded?.(finalStatus.code, finalStatus.details, finalStatus.metadata);\n    }\n  }\n\n  doPick() {\n    if (this.ended) {\n      return;\n    }\n    if (!this.metadata) {\n      throw new Error('doPick called before start');\n    }\n    this.trace('Pick called');\n    const finalMetadata = this.metadata.clone();\n    const pickResult = this.channel.doPick(\n      finalMetadata,\n      this.callConfig.pickInformation\n    );\n    const subchannelString = pickResult.subchannel\n      ? '(' +\n        pickResult.subchannel.getChannelzRef().id +\n        ') ' +\n        pickResult.subchannel.getAddress()\n      : '' + pickResult.subchannel;\n    this.trace(\n      'Pick result: ' +\n        PickResultType[pickResult.pickResultType] +\n        ' subchannel: ' +\n        subchannelString +\n        ' status: ' +\n        pickResult.status?.code +\n        ' ' +\n        pickResult.status?.details\n    );\n    switch (pickResult.pickResultType) {\n      case PickResultType.COMPLETE:\n        const combinedCallCredentials = this.credentials.compose(pickResult.subchannel!.getCallCredentials());\n        combinedCallCredentials\n          .generateMetadata({ method_name: this.methodName, service_url: this.serviceUrl })\n          .then(\n            credsMetadata => {\n              /* If this call was cancelled (e.g. by the deadline) before\n               * metadata generation finished, we shouldn't do anything with\n               * it. */\n              if (this.ended) {\n                this.trace(\n                  'Credentials metadata generation finished after call ended'\n                );\n                return;\n              }\n              finalMetadata.merge(credsMetadata);\n              if (finalMetadata.get('authorization').length > 1) {\n                this.outputStatus(\n                  {\n                    code: Status.INTERNAL,\n                    details:\n                      '\"authorization\" metadata cannot have multiple values',\n                    metadata: new Metadata(),\n                  },\n                  'PROCESSED'\n                );\n              }\n              if (\n                pickResult.subchannel!.getConnectivityState() !==\n                ConnectivityState.READY\n              ) {\n                this.trace(\n                  'Picked subchannel ' +\n                    subchannelString +\n                    ' has state ' +\n                    ConnectivityState[\n                      pickResult.subchannel!.getConnectivityState()\n                    ] +\n                    ' after getting credentials metadata. Retrying pick'\n                );\n                this.doPick();\n                return;\n              }\n\n              if (this.deadline !== Infinity) {\n                finalMetadata.set(\n                  'grpc-timeout',\n                  getDeadlineTimeoutString(this.deadline)\n                );\n              }\n              try {\n                this.child = pickResult\n                  .subchannel!.getRealSubchannel()\n                  .createCall(finalMetadata, this.host, this.methodName, {\n                    onReceiveMetadata: metadata => {\n                      this.trace('Received metadata');\n                      this.listener!.onReceiveMetadata(metadata);\n                    },\n                    onReceiveMessage: message => {\n                      this.trace('Received message');\n                      this.listener!.onReceiveMessage(message);\n                    },\n                    onReceiveStatus: status => {\n                      this.trace('Received status');\n                      if (\n                        status.rstCode ===\n                        http2.constants.NGHTTP2_REFUSED_STREAM\n                      ) {\n                        this.outputStatus(status, 'REFUSED');\n                      } else {\n                        this.outputStatus(status, 'PROCESSED');\n                      }\n                    },\n                  });\n                this.childStartTime = new Date();\n              } catch (error) {\n                this.trace(\n                  'Failed to start call on picked subchannel ' +\n                    subchannelString +\n                    ' with error ' +\n                    (error as Error).message\n                );\n                this.outputStatus(\n                  {\n                    code: Status.INTERNAL,\n                    details:\n                      'Failed to start HTTP/2 stream with error ' +\n                      (error as Error).message,\n                    metadata: new Metadata(),\n                  },\n                  'NOT_STARTED'\n                );\n                return;\n              }\n              pickResult.onCallStarted?.();\n              this.onCallEnded = pickResult.onCallEnded;\n              this.trace(\n                'Created child call [' + this.child.getCallNumber() + ']'\n              );\n              if (this.readPending) {\n                this.child.startRead();\n              }\n              if (this.pendingMessage) {\n                this.child.sendMessageWithContext(\n                  this.pendingMessage.context,\n                  this.pendingMessage.message\n                );\n              }\n              if (this.pendingHalfClose) {\n                this.child.halfClose();\n              }\n            },\n            (error: Error & { code: number }) => {\n              // We assume the error code isn't 0 (Status.OK)\n              const { code, details } = restrictControlPlaneStatusCode(\n                typeof error.code === 'number' ? error.code : Status.UNKNOWN,\n                `Getting metadata from plugin failed with error: ${error.message}`\n              );\n              this.outputStatus(\n                {\n                  code: code,\n                  details: details,\n                  metadata: new Metadata(),\n                },\n                'PROCESSED'\n              );\n            }\n          );\n        break;\n      case PickResultType.DROP:\n        const { code, details } = restrictControlPlaneStatusCode(\n          pickResult.status!.code,\n          pickResult.status!.details\n        );\n        setImmediate(() => {\n          this.outputStatus(\n            { code, details, metadata: pickResult.status!.metadata },\n            'DROP'\n          );\n        });\n        break;\n      case PickResultType.TRANSIENT_FAILURE:\n        if (this.metadata.getOptions().waitForReady) {\n          this.channel.queueCallForPick(this);\n        } else {\n          const { code, details } = restrictControlPlaneStatusCode(\n            pickResult.status!.code,\n            pickResult.status!.details\n          );\n          setImmediate(() => {\n            this.outputStatus(\n              { code, details, metadata: pickResult.status!.metadata },\n              'PROCESSED'\n            );\n          });\n        }\n        break;\n      case PickResultType.QUEUE:\n        this.channel.queueCallForPick(this);\n    }\n  }\n\n  cancelWithStatus(status: Status, details: string): void {\n    this.trace(\n      'cancelWithStatus code: ' + status + ' details: \"' + details + '\"'\n    );\n    this.child?.cancelWithStatus(status, details);\n    this.outputStatus(\n      { code: status, details: details, metadata: new Metadata() },\n      'PROCESSED'\n    );\n  }\n  getPeer(): string {\n    return this.child?.getPeer() ?? this.channel.getTarget();\n  }\n  start(\n    metadata: Metadata,\n    listener: LoadBalancingCallInterceptingListener\n  ): void {\n    this.trace('start called');\n    this.listener = listener;\n    this.metadata = metadata;\n    this.doPick();\n  }\n  sendMessageWithContext(context: MessageContext, message: Buffer): void {\n    this.trace('write() called with message of length ' + message.length);\n    if (this.child) {\n      this.child.sendMessageWithContext(context, message);\n    } else {\n      this.pendingMessage = { context, message };\n    }\n  }\n  startRead(): void {\n    this.trace('startRead called');\n    if (this.child) {\n      this.child.startRead();\n    } else {\n      this.readPending = true;\n    }\n  }\n  halfClose(): void {\n    this.trace('halfClose called');\n    if (this.child) {\n      this.child.halfClose();\n    } else {\n      this.pendingHalfClose = true;\n    }\n  }\n  setCredentials(credentials: CallCredentials): void {\n    throw new Error('Method not implemented.');\n  }\n\n  getCallNumber(): number {\n    return this.callNumber;\n  }\n\n  getAuthContext(): AuthContext | null {\n    if (this.child) {\n      return this.child.getAuthContext();\n    } else {\n      return null;\n    }\n  }\n}\n", "/*\n * Copyright 2022 gRPC authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n */\n\nimport { CallCredentials } from './call-credentials';\nimport {\n  Call,\n  CallStreamOptions,\n  DeadlineInfoProvider,\n  InterceptingListener,\n  MessageContext,\n  StatusObject,\n} from './call-interface';\nimport { LogVerbosity, Propagate, Status } from './constants';\nimport {\n  Deadline,\n  deadlineToString,\n  formatDateDifference,\n  getRelativeTimeout,\n  minDeadline,\n} from './deadline';\nimport { FilterStack, FilterStackFactory } from './filter-stack';\nimport { InternalChannel } from './internal-channel';\nimport { Metadata } from './metadata';\nimport * as logging from './logging';\nimport { restrictControlPlaneStatusCode } from './control-plane-status';\nimport { AuthContext } from './auth-context';\n\nconst TRACER_NAME = 'resolving_call';\n\nexport class ResolvingCall implements Call {\n  private child: (Call & DeadlineInfoProvider) | null = null;\n  private readPending = false;\n  private pendingMessage: { context: MessageContext; message: Buffer } | null =\n    null;\n  private pendingHalfClose = false;\n  private ended = false;\n  private readFilterPending = false;\n  private writeFilterPending = false;\n  private pendingChildStatus: StatusObject | null = null;\n  private metadata: Metadata | null = null;\n  private listener: InterceptingListener | null = null;\n  private deadline: Deadline;\n  private host: string;\n  private statusWatchers: ((status: StatusObject) => void)[] = [];\n  private deadlineTimer: NodeJS.Timeout = setTimeout(() => {}, 0);\n  private filterStack: FilterStack | null = null;\n\n  private deadlineStartTime: Date | null = null;\n  private configReceivedTime: Date | null = null;\n  private childStartTime: Date | null = null;\n\n  /**\n   * Credentials configured for this specific call. Does not include\n   * call credentials associated with the channel credentials used to create\n   * the channel.\n   */\n  private credentials: CallCredentials = CallCredentials.createEmpty();\n\n  constructor(\n    private readonly channel: InternalChannel,\n    private readonly method: string,\n    options: CallStreamOptions,\n    private readonly filterStackFactory: FilterStackFactory,\n    private callNumber: number\n  ) {\n    this.deadline = options.deadline;\n    this.host = options.host;\n    if (options.parentCall) {\n      if (options.flags & Propagate.CANCELLATION) {\n        options.parentCall.on('cancelled', () => {\n          this.cancelWithStatus(Status.CANCELLED, 'Cancelled by parent call');\n        });\n      }\n      if (options.flags & Propagate.DEADLINE) {\n        this.trace(\n          'Propagating deadline from parent: ' +\n            options.parentCall.getDeadline()\n        );\n        this.deadline = minDeadline(\n          this.deadline,\n          options.parentCall.getDeadline()\n        );\n      }\n    }\n    this.trace('Created');\n    this.runDeadlineTimer();\n  }\n\n  private trace(text: string): void {\n    logging.trace(\n      LogVerbosity.DEBUG,\n      TRACER_NAME,\n      '[' + this.callNumber + '] ' + text\n    );\n  }\n\n  private runDeadlineTimer() {\n    clearTimeout(this.deadlineTimer);\n    this.deadlineStartTime = new Date();\n    this.trace('Deadline: ' + deadlineToString(this.deadline));\n    const timeout = getRelativeTimeout(this.deadline);\n    if (timeout !== Infinity) {\n      this.trace('Deadline will be reached in ' + timeout + 'ms');\n      const handleDeadline = () => {\n        if (!this.deadlineStartTime) {\n          this.cancelWithStatus(Status.DEADLINE_EXCEEDED, 'Deadline exceeded');\n          return;\n        }\n        const deadlineInfo: string[] = [];\n        const deadlineEndTime = new Date();\n        deadlineInfo.push(`Deadline exceeded after ${formatDateDifference(this.deadlineStartTime, deadlineEndTime)}`);\n        if (this.configReceivedTime) {\n          if (this.configReceivedTime > this.deadlineStartTime) {\n            deadlineInfo.push(`name resolution: ${formatDateDifference(this.deadlineStartTime, this.configReceivedTime)}`);\n          }\n          if (this.childStartTime) {\n            if (this.childStartTime > this.configReceivedTime) {\n              deadlineInfo.push(`metadata filters: ${formatDateDifference(this.configReceivedTime, this.childStartTime)}`);\n            }\n          } else {\n            deadlineInfo.push('waiting for metadata filters');\n          }\n        } else {\n          deadlineInfo.push('waiting for name resolution');\n        }\n        if (this.child) {\n          deadlineInfo.push(...this.child.getDeadlineInfo());\n        }\n        this.cancelWithStatus(Status.DEADLINE_EXCEEDED, deadlineInfo.join(','));\n      };\n      if (timeout <= 0) {\n        process.nextTick(handleDeadline);\n      } else {\n        this.deadlineTimer = setTimeout(handleDeadline, timeout);\n      }\n    }\n  }\n\n  private outputStatus(status: StatusObject) {\n    if (!this.ended) {\n      this.ended = true;\n      if (!this.filterStack) {\n        this.filterStack = this.filterStackFactory.createFilter();\n      }\n      clearTimeout(this.deadlineTimer);\n      const filteredStatus = this.filterStack.receiveTrailers(status);\n      this.trace(\n        'ended with status: code=' +\n          filteredStatus.code +\n          ' details=\"' +\n          filteredStatus.details +\n          '\"'\n      );\n      this.statusWatchers.forEach(watcher => watcher(filteredStatus));\n      process.nextTick(() => {\n        this.listener?.onReceiveStatus(filteredStatus);\n      });\n    }\n  }\n\n  private sendMessageOnChild(context: MessageContext, message: Buffer): void {\n    if (!this.child) {\n      throw new Error('sendMessageonChild called with child not populated');\n    }\n    const child = this.child;\n    this.writeFilterPending = true;\n    this.filterStack!.sendMessage(\n      Promise.resolve({ message: message, flags: context.flags })\n    ).then(\n      filteredMessage => {\n        this.writeFilterPending = false;\n        child.sendMessageWithContext(context, filteredMessage.message);\n        if (this.pendingHalfClose) {\n          child.halfClose();\n        }\n      },\n      (status: StatusObject) => {\n        this.cancelWithStatus(status.code, status.details);\n      }\n    );\n  }\n\n  getConfig(): void {\n    if (this.ended) {\n      return;\n    }\n    if (!this.metadata || !this.listener) {\n      throw new Error('getConfig called before start');\n    }\n    const configResult = this.channel.getConfig(this.method, this.metadata);\n    if (configResult.type === 'NONE') {\n      this.channel.queueCallForConfig(this);\n      return;\n    } else if (configResult.type === 'ERROR') {\n      if (this.metadata.getOptions().waitForReady) {\n        this.channel.queueCallForConfig(this);\n      } else {\n        this.outputStatus(configResult.error);\n      }\n      return;\n    }\n    // configResult.type === 'SUCCESS'\n    this.configReceivedTime = new Date();\n    const config = configResult.config;\n    if (config.status !== Status.OK) {\n      const { code, details } = restrictControlPlaneStatusCode(\n        config.status,\n        'Failed to route call to method ' + this.method\n      );\n      this.outputStatus({\n        code: code,\n        details: details,\n        metadata: new Metadata(),\n      });\n      return;\n    }\n\n    if (config.methodConfig.timeout) {\n      const configDeadline = new Date();\n      configDeadline.setSeconds(\n        configDeadline.getSeconds() + config.methodConfig.timeout.seconds\n      );\n      configDeadline.setMilliseconds(\n        configDeadline.getMilliseconds() +\n          config.methodConfig.timeout.nanos / 1_000_000\n      );\n      this.deadline = minDeadline(this.deadline, configDeadline);\n      this.runDeadlineTimer();\n    }\n\n    this.filterStackFactory.push(config.dynamicFilterFactories);\n    this.filterStack = this.filterStackFactory.createFilter();\n    this.filterStack.sendMetadata(Promise.resolve(this.metadata)).then(\n      filteredMetadata => {\n        this.child = this.channel.createRetryingCall(\n          config,\n          this.method,\n          this.host,\n          this.credentials,\n          this.deadline\n        );\n        this.trace('Created child [' + this.child.getCallNumber() + ']');\n        this.childStartTime = new Date();\n        this.child.start(filteredMetadata, {\n          onReceiveMetadata: metadata => {\n            this.trace('Received metadata');\n            this.listener!.onReceiveMetadata(\n              this.filterStack!.receiveMetadata(metadata)\n            );\n          },\n          onReceiveMessage: message => {\n            this.trace('Received message');\n            this.readFilterPending = true;\n            this.filterStack!.receiveMessage(message).then(\n              filteredMesssage => {\n                this.trace('Finished filtering received message');\n                this.readFilterPending = false;\n                this.listener!.onReceiveMessage(filteredMesssage);\n                if (this.pendingChildStatus) {\n                  this.outputStatus(this.pendingChildStatus);\n                }\n              },\n              (status: StatusObject) => {\n                this.cancelWithStatus(status.code, status.details);\n              }\n            );\n          },\n          onReceiveStatus: status => {\n            this.trace('Received status');\n            if (this.readFilterPending) {\n              this.pendingChildStatus = status;\n            } else {\n              this.outputStatus(status);\n            }\n          },\n        });\n        if (this.readPending) {\n          this.child.startRead();\n        }\n        if (this.pendingMessage) {\n          this.sendMessageOnChild(\n            this.pendingMessage.context,\n            this.pendingMessage.message\n          );\n        } else if (this.pendingHalfClose) {\n          this.child.halfClose();\n        }\n      },\n      (status: StatusObject) => {\n        this.outputStatus(status);\n      }\n    );\n  }\n\n  reportResolverError(status: StatusObject) {\n    if (this.metadata?.getOptions().waitForReady) {\n      this.channel.queueCallForConfig(this);\n    } else {\n      this.outputStatus(status);\n    }\n  }\n  cancelWithStatus(status: Status, details: string): void {\n    this.trace(\n      'cancelWithStatus code: ' + status + ' details: \"' + details + '\"'\n    );\n    this.child?.cancelWithStatus(status, details);\n    this.outputStatus({\n      code: status,\n      details: details,\n      metadata: new Metadata(),\n    });\n  }\n  getPeer(): string {\n    return this.child?.getPeer() ?? this.channel.getTarget();\n  }\n  start(metadata: Metadata, listener: InterceptingListener): void {\n    this.trace('start called');\n    this.metadata = metadata.clone();\n    this.listener = listener;\n    this.getConfig();\n  }\n  sendMessageWithContext(context: MessageContext, message: Buffer): void {\n    this.trace('write() called with message of length ' + message.length);\n    if (this.child) {\n      this.sendMessageOnChild(context, message);\n    } else {\n      this.pendingMessage = { context, message };\n    }\n  }\n  startRead(): void {\n    this.trace('startRead called');\n    if (this.child) {\n      this.child.startRead();\n    } else {\n      this.readPending = true;\n    }\n  }\n  halfClose(): void {\n    this.trace('halfClose called');\n    if (this.child && !this.writeFilterPending) {\n      this.child.halfClose();\n    } else {\n      this.pendingHalfClose = true;\n    }\n  }\n  setCredentials(credentials: CallCredentials): void {\n    this.credentials = credentials;\n  }\n\n  addStatusWatcher(watcher: (status: StatusObject) => void) {\n    this.statusWatchers.push(watcher);\n  }\n\n  getCallNumber(): number {\n    return this.callNumber;\n  }\n\n  getAuthContext(): AuthContext | null {\n    if (this.child) {\n      return this.child.getAuthContext();\n    } else {\n      return null;\n    }\n  }\n}\n", "/*\n * Copyright 2022 gRPC authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n */\n\nimport { CallCredentials } from './call-credentials';\nimport { LogVerbosity, Status } from './constants';\nimport { Deadline, formatDateDifference } from './deadline';\nimport { Metadata } from './metadata';\nimport { CallConfig } from './resolver';\nimport * as logging from './logging';\nimport {\n  Call,\n  DeadlineInfoProvider,\n  InterceptingListener,\n  MessageContext,\n  StatusObject,\n  WriteCallback,\n  WriteObject,\n} from './call-interface';\nimport {\n  LoadBalancingCall,\n  StatusObjectWithProgress,\n} from './load-balancing-call';\nimport { InternalChannel } from './internal-channel';\nimport { AuthContext } from './auth-context';\n\nconst TRACER_NAME = 'retrying_call';\n\nexport class RetryThrottler {\n  private tokens: number;\n  constructor(\n    private readonly maxTokens: number,\n    private readonly tokenRatio: number,\n    previousRetryThrottler?: RetryThrottler\n  ) {\n    if (previousRetryThrottler) {\n      /* When carrying over tokens from a previous config, rescale them to the\n       * new max value */\n      this.tokens =\n        previousRetryThrottler.tokens *\n        (maxTokens / previousRetryThrottler.maxTokens);\n    } else {\n      this.tokens = maxTokens;\n    }\n  }\n\n  addCallSucceeded() {\n    this.tokens = Math.min(this.tokens + this.tokenRatio, this.maxTokens);\n  }\n\n  addCallFailed() {\n    this.tokens = Math.max(this.tokens - 1, 0);\n  }\n\n  canRetryCall() {\n    return this.tokens > (this.maxTokens / 2);\n  }\n}\n\nexport class MessageBufferTracker {\n  private totalAllocated = 0;\n  private allocatedPerCall: Map<number, number> = new Map<number, number>();\n\n  constructor(private totalLimit: number, private limitPerCall: number) {}\n\n  allocate(size: number, callId: number): boolean {\n    const currentPerCall = this.allocatedPerCall.get(callId) ?? 0;\n    if (\n      this.limitPerCall - currentPerCall < size ||\n      this.totalLimit - this.totalAllocated < size\n    ) {\n      return false;\n    }\n    this.allocatedPerCall.set(callId, currentPerCall + size);\n    this.totalAllocated += size;\n    return true;\n  }\n\n  free(size: number, callId: number) {\n    if (this.totalAllocated < size) {\n      throw new Error(\n        `Invalid buffer allocation state: call ${callId} freed ${size} > total allocated ${this.totalAllocated}`\n      );\n    }\n    this.totalAllocated -= size;\n    const currentPerCall = this.allocatedPerCall.get(callId) ?? 0;\n    if (currentPerCall < size) {\n      throw new Error(\n        `Invalid buffer allocation state: call ${callId} freed ${size} > allocated for call ${currentPerCall}`\n      );\n    }\n    this.allocatedPerCall.set(callId, currentPerCall - size);\n  }\n\n  freeAll(callId: number) {\n    const currentPerCall = this.allocatedPerCall.get(callId) ?? 0;\n    if (this.totalAllocated < currentPerCall) {\n      throw new Error(\n        `Invalid buffer allocation state: call ${callId} allocated ${currentPerCall} > total allocated ${this.totalAllocated}`\n      );\n    }\n    this.totalAllocated -= currentPerCall;\n    this.allocatedPerCall.delete(callId);\n  }\n}\n\ntype UnderlyingCallState = 'ACTIVE' | 'COMPLETED';\n\ninterface UnderlyingCall {\n  state: UnderlyingCallState;\n  call: LoadBalancingCall;\n  nextMessageToSend: number;\n  startTime: Date;\n}\n\n/**\n * A retrying call can be in one of these states:\n * RETRY: Retries are configured and new attempts may be sent\n * HEDGING: Hedging is configured and new attempts may be sent\n * TRANSPARENT_ONLY: Neither retries nor hedging are configured, and\n * transparent retry attempts may still be sent\n * COMMITTED: One attempt is committed, and no new attempts will be\n * sent\n * NO_RETRY: Retries are disabled. Exists to track the transition to COMMITTED\n */\ntype RetryingCallState =\n  | 'RETRY'\n  | 'HEDGING'\n  | 'TRANSPARENT_ONLY'\n  | 'COMMITTED'\n  | 'NO_RETRY';\n\n/**\n * The different types of objects that can be stored in the write buffer, with\n * the following meanings:\n * MESSAGE: This is a message to be sent.\n * HALF_CLOSE: When this entry is reached, the calls should send a half-close.\n * FREED: This slot previously contained a message that has been sent on all\n * child calls and is no longer needed.\n */\ntype WriteBufferEntryType = 'MESSAGE' | 'HALF_CLOSE' | 'FREED';\n\n/**\n * Entry in the buffer of messages to send to the remote end.\n */\ninterface WriteBufferEntry {\n  entryType: WriteBufferEntryType;\n  /**\n   * Message to send.\n   * Only populated if entryType is MESSAGE.\n   */\n  message?: WriteObject;\n  /**\n   * Callback to call after sending the message.\n   * Only populated if entryType is MESSAGE and the call is in the COMMITTED\n   * state.\n   */\n  callback?: WriteCallback;\n  /**\n   * Indicates whether the message is allocated in the buffer tracker. Ignored\n   * if entryType is not MESSAGE. Should be the return value of\n   * bufferTracker.allocate.\n   */\n  allocated: boolean;\n}\n\nconst PREVIONS_RPC_ATTEMPTS_METADATA_KEY = 'grpc-previous-rpc-attempts';\n\nconst DEFAULT_MAX_ATTEMPTS_LIMIT = 5;\n\nexport class RetryingCall implements Call, DeadlineInfoProvider {\n  private state: RetryingCallState;\n  private listener: InterceptingListener | null = null;\n  private initialMetadata: Metadata | null = null;\n  private underlyingCalls: UnderlyingCall[] = [];\n  private writeBuffer: WriteBufferEntry[] = [];\n  /**\n   * The offset of message indices in the writeBuffer. For example, if\n   * writeBufferOffset is 10, message 10 is in writeBuffer[0] and message 15\n   * is in writeBuffer[5].\n   */\n  private writeBufferOffset = 0;\n  /**\n   * Tracks whether a read has been started, so that we know whether to start\n   * reads on new child calls. This only matters for the first read, because\n   * once a message comes in the child call becomes committed and there will\n   * be no new child calls.\n   */\n  private readStarted = false;\n  private transparentRetryUsed = false;\n  /**\n   * Number of attempts so far\n   */\n  private attempts = 0;\n  private hedgingTimer: NodeJS.Timeout | null = null;\n  private committedCallIndex: number | null = null;\n  private initialRetryBackoffSec = 0;\n  private nextRetryBackoffSec = 0;\n  private startTime: Date;\n  private maxAttempts: number;\n  constructor(\n    private readonly channel: InternalChannel,\n    private readonly callConfig: CallConfig,\n    private readonly methodName: string,\n    private readonly host: string,\n    private readonly credentials: CallCredentials,\n    private readonly deadline: Deadline,\n    private readonly callNumber: number,\n    private readonly bufferTracker: MessageBufferTracker,\n    private readonly retryThrottler?: RetryThrottler\n  ) {\n    const maxAttemptsLimit =\n      channel.getOptions()['grpc-node.retry_max_attempts_limit'] ??\n      DEFAULT_MAX_ATTEMPTS_LIMIT;\n    if (channel.getOptions()['grpc.enable_retries'] === 0) {\n      this.state = 'NO_RETRY';\n      this.maxAttempts = 1;\n    } else if (callConfig.methodConfig.retryPolicy) {\n      this.state = 'RETRY';\n      const retryPolicy = callConfig.methodConfig.retryPolicy;\n      this.nextRetryBackoffSec = this.initialRetryBackoffSec = Number(\n        retryPolicy.initialBackoff.substring(\n          0,\n          retryPolicy.initialBackoff.length - 1\n        )\n      );\n      this.maxAttempts = Math.min(retryPolicy.maxAttempts, maxAttemptsLimit);\n    } else if (callConfig.methodConfig.hedgingPolicy) {\n      this.state = 'HEDGING';\n      this.maxAttempts = Math.min(\n        callConfig.methodConfig.hedgingPolicy.maxAttempts,\n        maxAttemptsLimit\n      );\n    } else {\n      this.state = 'TRANSPARENT_ONLY';\n      this.maxAttempts = 1;\n    }\n    this.startTime = new Date();\n  }\n  getDeadlineInfo(): string[] {\n    if (this.underlyingCalls.length === 0) {\n      return [];\n    }\n    const deadlineInfo: string[] = [];\n    const latestCall = this.underlyingCalls[this.underlyingCalls.length - 1];\n    if (this.underlyingCalls.length > 1) {\n      deadlineInfo.push(\n        `previous attempts: ${this.underlyingCalls.length - 1}`\n      );\n    }\n    if (latestCall.startTime > this.startTime) {\n      deadlineInfo.push(\n        `time to current attempt start: ${formatDateDifference(\n          this.startTime,\n          latestCall.startTime\n        )}`\n      );\n    }\n    deadlineInfo.push(...latestCall.call.getDeadlineInfo());\n    return deadlineInfo;\n  }\n  getCallNumber(): number {\n    return this.callNumber;\n  }\n\n  private trace(text: string): void {\n    logging.trace(\n      LogVerbosity.DEBUG,\n      TRACER_NAME,\n      '[' + this.callNumber + '] ' + text\n    );\n  }\n\n  private reportStatus(statusObject: StatusObject) {\n    this.trace(\n      'ended with status: code=' +\n        statusObject.code +\n        ' details=\"' +\n        statusObject.details +\n        '\" start time=' +\n        this.startTime.toISOString()\n    );\n    this.bufferTracker.freeAll(this.callNumber);\n    this.writeBufferOffset = this.writeBufferOffset + this.writeBuffer.length;\n    this.writeBuffer = [];\n    process.nextTick(() => {\n      // Explicitly construct status object to remove progress field\n      this.listener?.onReceiveStatus({\n        code: statusObject.code,\n        details: statusObject.details,\n        metadata: statusObject.metadata,\n      });\n    });\n  }\n\n  cancelWithStatus(status: Status, details: string): void {\n    this.trace(\n      'cancelWithStatus code: ' + status + ' details: \"' + details + '\"'\n    );\n    this.reportStatus({ code: status, details, metadata: new Metadata() });\n    for (const { call } of this.underlyingCalls) {\n      call.cancelWithStatus(status, details);\n    }\n  }\n  getPeer(): string {\n    if (this.committedCallIndex !== null) {\n      return this.underlyingCalls[this.committedCallIndex].call.getPeer();\n    } else {\n      return 'unknown';\n    }\n  }\n\n  private getBufferEntry(messageIndex: number): WriteBufferEntry {\n    return (\n      this.writeBuffer[messageIndex - this.writeBufferOffset] ?? {\n        entryType: 'FREED',\n        allocated: false,\n      }\n    );\n  }\n\n  private getNextBufferIndex() {\n    return this.writeBufferOffset + this.writeBuffer.length;\n  }\n\n  private clearSentMessages() {\n    if (this.state !== 'COMMITTED') {\n      return;\n    }\n    let earliestNeededMessageIndex: number;\n    if (this.underlyingCalls[this.committedCallIndex!].state === 'COMPLETED') {\n      /* If the committed call is completed, clear all messages, even if some\n       * have not been sent. */\n      earliestNeededMessageIndex = this.getNextBufferIndex();\n    } else {\n      earliestNeededMessageIndex =\n        this.underlyingCalls[this.committedCallIndex!].nextMessageToSend;\n    }\n    for (\n      let messageIndex = this.writeBufferOffset;\n      messageIndex < earliestNeededMessageIndex;\n      messageIndex++\n    ) {\n      const bufferEntry = this.getBufferEntry(messageIndex);\n      if (bufferEntry.allocated) {\n        this.bufferTracker.free(\n          bufferEntry.message!.message.length,\n          this.callNumber\n        );\n      }\n    }\n    this.writeBuffer = this.writeBuffer.slice(\n      earliestNeededMessageIndex - this.writeBufferOffset\n    );\n    this.writeBufferOffset = earliestNeededMessageIndex;\n  }\n\n  private commitCall(index: number) {\n    if (this.state === 'COMMITTED') {\n      return;\n    }\n    this.trace(\n      'Committing call [' +\n        this.underlyingCalls[index].call.getCallNumber() +\n        '] at index ' +\n        index\n    );\n    this.state = 'COMMITTED';\n    this.callConfig.onCommitted?.();\n    this.committedCallIndex = index;\n    for (let i = 0; i < this.underlyingCalls.length; i++) {\n      if (i === index) {\n        continue;\n      }\n      if (this.underlyingCalls[i].state === 'COMPLETED') {\n        continue;\n      }\n      this.underlyingCalls[i].state = 'COMPLETED';\n      this.underlyingCalls[i].call.cancelWithStatus(\n        Status.CANCELLED,\n        'Discarded in favor of other hedged attempt'\n      );\n    }\n    this.clearSentMessages();\n  }\n\n  private commitCallWithMostMessages() {\n    if (this.state === 'COMMITTED') {\n      return;\n    }\n    let mostMessages = -1;\n    let callWithMostMessages = -1;\n    for (const [index, childCall] of this.underlyingCalls.entries()) {\n      if (\n        childCall.state === 'ACTIVE' &&\n        childCall.nextMessageToSend > mostMessages\n      ) {\n        mostMessages = childCall.nextMessageToSend;\n        callWithMostMessages = index;\n      }\n    }\n    if (callWithMostMessages === -1) {\n      /* There are no active calls, disable retries to force the next call that\n       * is started to be committed. */\n      this.state = 'TRANSPARENT_ONLY';\n    } else {\n      this.commitCall(callWithMostMessages);\n    }\n  }\n\n  private isStatusCodeInList(list: (Status | string)[], code: Status) {\n    return list.some(\n      value =>\n        value === code ||\n        value.toString().toLowerCase() === Status[code]?.toLowerCase()\n    );\n  }\n\n  private getNextRetryJitter() {\n    /* Jitter of +-20% is applied: https://github.com/grpc/proposal/blob/master/A6-client-retries.md#exponential-backoff */\n    return Math.random() * (1.2 - 0.8) + 0.8;\n  }\n\n  private getNextRetryBackoffMs() {\n    const retryPolicy = this.callConfig?.methodConfig.retryPolicy;\n    if (!retryPolicy) {\n      return 0;\n    }\n    const jitter = this.getNextRetryJitter();\n    const nextBackoffMs = jitter * this.nextRetryBackoffSec * 1000;\n    const maxBackoffSec = Number(\n      retryPolicy.maxBackoff.substring(0, retryPolicy.maxBackoff.length - 1)\n    );\n    this.nextRetryBackoffSec = Math.min(\n      this.nextRetryBackoffSec * retryPolicy.backoffMultiplier,\n      maxBackoffSec\n    );\n    return nextBackoffMs;\n  }\n\n  private maybeRetryCall(\n    pushback: number | null,\n    callback: (retried: boolean) => void\n  ) {\n    if (this.state !== 'RETRY') {\n      callback(false);\n      return;\n    }\n    if (this.attempts >= this.maxAttempts) {\n      callback(false);\n      return;\n    }\n    let retryDelayMs: number;\n    if (pushback === null) {\n      retryDelayMs = this.getNextRetryBackoffMs();\n    } else if (pushback < 0) {\n      this.state = 'TRANSPARENT_ONLY';\n      callback(false);\n      return;\n    } else {\n      retryDelayMs = pushback;\n      this.nextRetryBackoffSec = this.initialRetryBackoffSec;\n    }\n    setTimeout(() => {\n      if (this.state !== 'RETRY') {\n        callback(false);\n        return;\n      }\n      if (this.retryThrottler?.canRetryCall() ?? true) {\n        callback(true);\n        this.attempts += 1;\n        this.startNewAttempt();\n      } else {\n        this.trace('Retry attempt denied by throttling policy');\n        callback(false);\n      }\n    }, retryDelayMs);\n  }\n\n  private countActiveCalls(): number {\n    let count = 0;\n    for (const call of this.underlyingCalls) {\n      if (call?.state === 'ACTIVE') {\n        count += 1;\n      }\n    }\n    return count;\n  }\n\n  private handleProcessedStatus(\n    status: StatusObject,\n    callIndex: number,\n    pushback: number | null\n  ) {\n    switch (this.state) {\n      case 'COMMITTED':\n      case 'NO_RETRY':\n      case 'TRANSPARENT_ONLY':\n        this.commitCall(callIndex);\n        this.reportStatus(status);\n        break;\n      case 'HEDGING':\n        if (\n          this.isStatusCodeInList(\n            this.callConfig!.methodConfig.hedgingPolicy!.nonFatalStatusCodes ??\n              [],\n            status.code\n          )\n        ) {\n          this.retryThrottler?.addCallFailed();\n          let delayMs: number;\n          if (pushback === null) {\n            delayMs = 0;\n          } else if (pushback < 0) {\n            this.state = 'TRANSPARENT_ONLY';\n            this.commitCall(callIndex);\n            this.reportStatus(status);\n            return;\n          } else {\n            delayMs = pushback;\n          }\n          setTimeout(() => {\n            this.maybeStartHedgingAttempt();\n            // If after trying to start a call there are no active calls, this was the last one\n            if (this.countActiveCalls() === 0) {\n              this.commitCall(callIndex);\n              this.reportStatus(status);\n            }\n          }, delayMs);\n        } else {\n          this.commitCall(callIndex);\n          this.reportStatus(status);\n        }\n        break;\n      case 'RETRY':\n        if (\n          this.isStatusCodeInList(\n            this.callConfig!.methodConfig.retryPolicy!.retryableStatusCodes,\n            status.code\n          )\n        ) {\n          this.retryThrottler?.addCallFailed();\n          this.maybeRetryCall(pushback, retried => {\n            if (!retried) {\n              this.commitCall(callIndex);\n              this.reportStatus(status);\n            }\n          });\n        } else {\n          this.commitCall(callIndex);\n          this.reportStatus(status);\n        }\n        break;\n    }\n  }\n\n  private getPushback(metadata: Metadata): number | null {\n    const mdValue = metadata.get('grpc-retry-pushback-ms');\n    if (mdValue.length === 0) {\n      return null;\n    }\n    try {\n      return parseInt(mdValue[0] as string);\n    } catch (e) {\n      return -1;\n    }\n  }\n\n  private handleChildStatus(\n    status: StatusObjectWithProgress,\n    callIndex: number\n  ) {\n    if (this.underlyingCalls[callIndex].state === 'COMPLETED') {\n      return;\n    }\n    this.trace(\n      'state=' +\n        this.state +\n        ' handling status with progress ' +\n        status.progress +\n        ' from child [' +\n        this.underlyingCalls[callIndex].call.getCallNumber() +\n        '] in state ' +\n        this.underlyingCalls[callIndex].state\n    );\n    this.underlyingCalls[callIndex].state = 'COMPLETED';\n    if (status.code === Status.OK) {\n      this.retryThrottler?.addCallSucceeded();\n      this.commitCall(callIndex);\n      this.reportStatus(status);\n      return;\n    }\n    if (this.state === 'NO_RETRY') {\n      this.commitCall(callIndex);\n      this.reportStatus(status);\n      return;\n    }\n    if (this.state === 'COMMITTED') {\n      this.reportStatus(status);\n      return;\n    }\n    const pushback = this.getPushback(status.metadata);\n    switch (status.progress) {\n      case 'NOT_STARTED':\n        // RPC never leaves the client, always safe to retry\n        this.startNewAttempt();\n        break;\n      case 'REFUSED':\n        // RPC reaches the server library, but not the server application logic\n        if (this.transparentRetryUsed) {\n          this.handleProcessedStatus(status, callIndex, pushback);\n        } else {\n          this.transparentRetryUsed = true;\n          this.startNewAttempt();\n        }\n        break;\n      case 'DROP':\n        this.commitCall(callIndex);\n        this.reportStatus(status);\n        break;\n      case 'PROCESSED':\n        this.handleProcessedStatus(status, callIndex, pushback);\n        break;\n    }\n  }\n\n  private maybeStartHedgingAttempt() {\n    if (this.state !== 'HEDGING') {\n      return;\n    }\n    if (!this.callConfig.methodConfig.hedgingPolicy) {\n      return;\n    }\n    if (this.attempts >= this.maxAttempts) {\n      return;\n    }\n    this.attempts += 1;\n    this.startNewAttempt();\n    this.maybeStartHedgingTimer();\n  }\n\n  private maybeStartHedgingTimer() {\n    if (this.hedgingTimer) {\n      clearTimeout(this.hedgingTimer);\n    }\n    if (this.state !== 'HEDGING') {\n      return;\n    }\n    if (!this.callConfig.methodConfig.hedgingPolicy) {\n      return;\n    }\n    const hedgingPolicy = this.callConfig.methodConfig.hedgingPolicy;\n    if (this.attempts >= this.maxAttempts) {\n      return;\n    }\n    const hedgingDelayString = hedgingPolicy.hedgingDelay ?? '0s';\n    const hedgingDelaySec = Number(\n      hedgingDelayString.substring(0, hedgingDelayString.length - 1)\n    );\n    this.hedgingTimer = setTimeout(() => {\n      this.maybeStartHedgingAttempt();\n    }, hedgingDelaySec * 1000);\n    this.hedgingTimer.unref?.();\n  }\n\n  private startNewAttempt() {\n    const child = this.channel.createLoadBalancingCall(\n      this.callConfig,\n      this.methodName,\n      this.host,\n      this.credentials,\n      this.deadline\n    );\n    this.trace(\n      'Created child call [' +\n        child.getCallNumber() +\n        '] for attempt ' +\n        this.attempts\n    );\n    const index = this.underlyingCalls.length;\n    this.underlyingCalls.push({\n      state: 'ACTIVE',\n      call: child,\n      nextMessageToSend: 0,\n      startTime: new Date(),\n    });\n    const previousAttempts = this.attempts - 1;\n    const initialMetadata = this.initialMetadata!.clone();\n    if (previousAttempts > 0) {\n      initialMetadata.set(\n        PREVIONS_RPC_ATTEMPTS_METADATA_KEY,\n        `${previousAttempts}`\n      );\n    }\n    let receivedMetadata = false;\n    child.start(initialMetadata, {\n      onReceiveMetadata: metadata => {\n        this.trace(\n          'Received metadata from child [' + child.getCallNumber() + ']'\n        );\n        this.commitCall(index);\n        receivedMetadata = true;\n        if (previousAttempts > 0) {\n          metadata.set(\n            PREVIONS_RPC_ATTEMPTS_METADATA_KEY,\n            `${previousAttempts}`\n          );\n        }\n        if (this.underlyingCalls[index].state === 'ACTIVE') {\n          this.listener!.onReceiveMetadata(metadata);\n        }\n      },\n      onReceiveMessage: message => {\n        this.trace(\n          'Received message from child [' + child.getCallNumber() + ']'\n        );\n        this.commitCall(index);\n        if (this.underlyingCalls[index].state === 'ACTIVE') {\n          this.listener!.onReceiveMessage(message);\n        }\n      },\n      onReceiveStatus: status => {\n        this.trace(\n          'Received status from child [' + child.getCallNumber() + ']'\n        );\n        if (!receivedMetadata && previousAttempts > 0) {\n          status.metadata.set(\n            PREVIONS_RPC_ATTEMPTS_METADATA_KEY,\n            `${previousAttempts}`\n          );\n        }\n        this.handleChildStatus(status, index);\n      },\n    });\n    this.sendNextChildMessage(index);\n    if (this.readStarted) {\n      child.startRead();\n    }\n  }\n\n  start(metadata: Metadata, listener: InterceptingListener): void {\n    this.trace('start called');\n    this.listener = listener;\n    this.initialMetadata = metadata;\n    this.attempts += 1;\n    this.startNewAttempt();\n    this.maybeStartHedgingTimer();\n  }\n\n  private handleChildWriteCompleted(childIndex: number, messageIndex: number) {\n    this.getBufferEntry(messageIndex).callback?.();\n    this.clearSentMessages();\n    const childCall = this.underlyingCalls[childIndex];\n    childCall.nextMessageToSend += 1;\n    this.sendNextChildMessage(childIndex);\n  }\n\n  private sendNextChildMessage(childIndex: number) {\n    const childCall = this.underlyingCalls[childIndex];\n    if (childCall.state === 'COMPLETED') {\n      return;\n    }\n    const messageIndex = childCall.nextMessageToSend;\n    if (this.getBufferEntry(messageIndex)) {\n      const bufferEntry = this.getBufferEntry(messageIndex);\n      switch (bufferEntry.entryType) {\n        case 'MESSAGE':\n          childCall.call.sendMessageWithContext(\n            {\n              callback: error => {\n                // Ignore error\n                this.handleChildWriteCompleted(childIndex, messageIndex);\n              },\n            },\n            bufferEntry.message!.message\n          );\n          // Optimization: if the next entry is HALF_CLOSE, send it immediately\n          // without waiting for the message callback. This is safe because the message\n          // has already been passed to the underlying transport.\n          const nextEntry = this.getBufferEntry(messageIndex + 1);\n          if (nextEntry.entryType === 'HALF_CLOSE') {\n            this.trace(\n              'Sending halfClose immediately after message to child [' +\n                childCall.call.getCallNumber() +\n                '] - optimizing for unary/final message'\n            );\n            childCall.nextMessageToSend += 1;\n            childCall.call.halfClose();\n          }\n          break;\n        case 'HALF_CLOSE':\n          childCall.nextMessageToSend += 1;\n          childCall.call.halfClose();\n          break;\n        case 'FREED':\n          // Should not be possible\n          break;\n      }\n    }\n  }\n\n  sendMessageWithContext(context: MessageContext, message: Buffer): void {\n    this.trace('write() called with message of length ' + message.length);\n    const writeObj: WriteObject = {\n      message,\n      flags: context.flags,\n    };\n    const messageIndex = this.getNextBufferIndex();\n    const bufferEntry: WriteBufferEntry = {\n      entryType: 'MESSAGE',\n      message: writeObj,\n      allocated: this.bufferTracker.allocate(message.length, this.callNumber),\n    };\n    this.writeBuffer.push(bufferEntry);\n    if (bufferEntry.allocated) {\n      // Run this in next tick to avoid suspending the current execution context\n      // otherwise it might cause half closing the call before sending message\n      process.nextTick(() => {\n        context.callback?.();\n      });\n      for (const [callIndex, call] of this.underlyingCalls.entries()) {\n        if (\n          call.state === 'ACTIVE' &&\n          call.nextMessageToSend === messageIndex\n        ) {\n          call.call.sendMessageWithContext(\n            {\n              callback: error => {\n                // Ignore error\n                this.handleChildWriteCompleted(callIndex, messageIndex);\n              },\n            },\n            message\n          );\n        }\n      }\n    } else {\n      this.commitCallWithMostMessages();\n      // commitCallWithMostMessages can fail if we are between ping attempts\n      if (this.committedCallIndex === null) {\n        return;\n      }\n      const call = this.underlyingCalls[this.committedCallIndex];\n      bufferEntry.callback = context.callback;\n      if (call.state === 'ACTIVE' && call.nextMessageToSend === messageIndex) {\n        call.call.sendMessageWithContext(\n          {\n            callback: error => {\n              // Ignore error\n              this.handleChildWriteCompleted(this.committedCallIndex!, messageIndex);\n            },\n          },\n          message\n        );\n      }\n    }\n  }\n  startRead(): void {\n    this.trace('startRead called');\n    this.readStarted = true;\n    for (const underlyingCall of this.underlyingCalls) {\n      if (underlyingCall?.state === 'ACTIVE') {\n        underlyingCall.call.startRead();\n      }\n    }\n  }\n  halfClose(): void {\n    this.trace('halfClose called');\n    const halfCloseIndex = this.getNextBufferIndex();\n    this.writeBuffer.push({\n      entryType: 'HALF_CLOSE',\n      allocated: false,\n    });\n    for (const call of this.underlyingCalls) {\n      if (call?.state === 'ACTIVE') {\n        // Send halfClose to call when either:\n        // - nextMessageToSend === halfCloseIndex - 1: last message sent, callback pending (optimization)\n        // - nextMessageToSend === halfCloseIndex: all messages sent and acknowledged\n        if (call.nextMessageToSend === halfCloseIndex \n          || call.nextMessageToSend === halfCloseIndex - 1) {\n          this.trace(\n            'Sending halfClose immediately to child [' +\n              call.call.getCallNumber() +\n              '] - all messages already sent'\n          );\n          call.nextMessageToSend += 1;\n          call.call.halfClose();\n        }\n        // Otherwise, halfClose will be sent by sendNextChildMessage when message callbacks complete\n      }\n    }\n  }\n  setCredentials(newCredentials: CallCredentials): void {\n    throw new Error('Method not implemented.');\n  }\n  getMethod(): string {\n    return this.methodName;\n  }\n  getHost(): string {\n    return this.host;\n  }\n  getAuthContext(): AuthContext | null {\n    if (this.committedCallIndex !== null) {\n      return this.underlyingCalls[\n        this.committedCallIndex\n      ].call.getAuthContext();\n    } else {\n      return null;\n    }\n  }\n}", "/*\n * Copyright 2022 gRPC authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n */\n\nimport { CallCredentials } from './call-credentials';\nimport { Channel } from './channel';\nimport type { SubchannelRef } from './channelz';\nimport { ConnectivityState } from './connectivity-state';\nimport { Subchannel } from './subchannel';\n\nexport type ConnectivityStateListener = (\n  subchannel: SubchannelInterface,\n  previousState: ConnectivityState,\n  newState: ConnectivityState,\n  keepaliveTime: number,\n  errorMessage?: string\n) => void;\n\nexport type HealthListener = (healthy: boolean) => void;\n\nexport interface DataWatcher {\n  setSubchannel(subchannel: Subchannel): void;\n  destroy(): void;\n}\n\n/**\n * This is an interface for load balancing policies to use to interact with\n * subchannels. This allows load balancing policies to wrap and unwrap\n * subchannels.\n *\n * Any load balancing policy that wraps subchannels must unwrap the subchannel\n * in the picker, so that other load balancing policies consistently have\n * access to their own wrapper objects.\n */\nexport interface SubchannelInterface {\n  getConnectivityState(): ConnectivityState;\n  addConnectivityStateListener(listener: ConnectivityStateListener): void;\n  removeConnectivityStateListener(listener: ConnectivityStateListener): void;\n  startConnecting(): void;\n  getAddress(): string;\n  throttleKeepalive(newKeepaliveTime: number): void;\n  ref(): void;\n  unref(): void;\n  getChannelzRef(): SubchannelRef;\n  isHealthy(): boolean;\n  addHealthStateWatcher(listener: HealthListener): void;\n  removeHealthStateWatcher(listener: HealthListener): void;\n  addDataWatcher(dataWatcher: DataWatcher): void;\n  /**\n   * If this is a wrapper, return the wrapped subchannel, otherwise return this\n   */\n  getRealSubchannel(): Subchannel;\n  /**\n   * Returns true if this and other both proxy the same underlying subchannel.\n   * Can be used instead of directly accessing getRealSubchannel to allow mocks\n   * to avoid implementing getRealSubchannel\n   */\n  realSubchannelEquals(other: SubchannelInterface): boolean;\n  /**\n   * Get the call credentials associated with the channel credentials for this\n   * subchannel.\n   */\n  getCallCredentials(): CallCredentials;\n  /**\n   * Get a channel that can be used to make requests with just this\n   */\n  getChannel(): Channel;\n}\n\nexport abstract class BaseSubchannelWrapper implements SubchannelInterface {\n  private healthy = true;\n  private healthListeners: Set<HealthListener> = new Set();\n  private refcount = 0;\n  private dataWatchers: Set<DataWatcher> = new Set();\n  constructor(protected child: SubchannelInterface) {\n    child.addHealthStateWatcher(childHealthy => {\n      /* A change to the child health state only affects this wrapper's overall\n       * health state if this wrapper is reporting healthy. */\n      if (this.healthy) {\n        this.updateHealthListeners();\n      }\n    });\n  }\n\n  private updateHealthListeners(): void {\n    for (const listener of this.healthListeners) {\n      listener(this.isHealthy());\n    }\n  }\n\n  getConnectivityState(): ConnectivityState {\n    return this.child.getConnectivityState();\n  }\n  addConnectivityStateListener(listener: ConnectivityStateListener): void {\n    this.child.addConnectivityStateListener(listener);\n  }\n  removeConnectivityStateListener(listener: ConnectivityStateListener): void {\n    this.child.removeConnectivityStateListener(listener);\n  }\n  startConnecting(): void {\n    this.child.startConnecting();\n  }\n  getAddress(): string {\n    return this.child.getAddress();\n  }\n  throttleKeepalive(newKeepaliveTime: number): void {\n    this.child.throttleKeepalive(newKeepaliveTime);\n  }\n  ref(): void {\n    this.child.ref();\n    this.refcount += 1;\n  }\n  unref(): void {\n    this.child.unref();\n    this.refcount -= 1;\n    if (this.refcount === 0) {\n      this.destroy();\n    }\n  }\n  protected destroy() {\n    for (const watcher of this.dataWatchers) {\n      watcher.destroy();\n    }\n  }\n  getChannelzRef(): SubchannelRef {\n    return this.child.getChannelzRef();\n  }\n  isHealthy(): boolean {\n    return this.healthy && this.child.isHealthy();\n  }\n  addHealthStateWatcher(listener: HealthListener): void {\n    this.healthListeners.add(listener);\n  }\n  removeHealthStateWatcher(listener: HealthListener): void {\n    this.healthListeners.delete(listener);\n  }\n  addDataWatcher(dataWatcher: DataWatcher): void {\n    dataWatcher.setSubchannel(this.getRealSubchannel());\n    this.dataWatchers.add(dataWatcher);\n  }\n  protected setHealthy(healthy: boolean): void {\n    if (healthy !== this.healthy) {\n      this.healthy = healthy;\n      /* A change to this wrapper's health state only affects the overall\n       * reported health state if the child is healthy. */\n      if (this.child.isHealthy()) {\n        this.updateHealthListeners();\n      }\n    }\n  }\n  getRealSubchannel(): Subchannel {\n    return this.child.getRealSubchannel();\n  }\n  realSubchannelEquals(other: SubchannelInterface): boolean {\n    return this.getRealSubchannel() === other.getRealSubchannel();\n  }\n  getCallCredentials(): CallCredentials {\n    return this.child.getCallCredentials();\n  }\n  getChannel(): Channel {\n      return this.child.getChannel();\n  }\n}\n", "/*\n * Copyright 2019 gRPC authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n */\n\nimport { ChannelCredentials } from './channel-credentials';\nimport { ChannelOptions } from './channel-options';\nimport { ResolvingLoadBalancer } from './resolving-load-balancer';\nimport { SubchannelPool, getSubchannelPool } from './subchannel-pool';\nimport { ChannelControlHelper } from './load-balancer';\nimport { UnavailablePicker, Picker, QueuePicker, PickArgs, PickResult, PickResultType } from './picker';\nimport { Metadata } from './metadata';\nimport { Status, LogVerbosity, Propagate } from './constants';\nimport { FilterStackFactory } from './filter-stack';\nimport { CompressionFilterFactory } from './compression-filter';\nimport {\n  CallConfig,\n  ConfigSelector,\n  getDefaultAuthority,\n  mapUriDefaultScheme,\n} from './resolver';\nimport { trace, isTracerEnabled } from './logging';\nimport { SubchannelAddress } from './subchannel-address';\nimport { mapProxyName } from './http_proxy';\nimport { GrpcUri, parseUri, uriToString } from './uri-parser';\nimport { ServerSurfaceCall } from './server-call';\n\nimport { ConnectivityState } from './connectivity-state';\nimport {\n  ChannelInfo,\n  ChannelRef,\n  ChannelzCallTracker,\n  ChannelzChildrenTracker,\n  ChannelzTrace,\n  registerChannelzChannel,\n  SubchannelRef,\n  unregisterChannelzRef,\n} from './channelz';\nimport { LoadBalancingCall } from './load-balancing-call';\nimport { CallCredentials } from './call-credentials';\nimport { Call, CallStreamOptions, StatusObject } from './call-interface';\nimport { Deadline, deadlineToString } from './deadline';\nimport { ResolvingCall } from './resolving-call';\nimport { getNextCallNumber } from './call-number';\nimport { restrictControlPlaneStatusCode } from './control-plane-status';\nimport {\n  MessageBufferTracker,\n  RetryingCall,\n  RetryThrottler,\n} from './retrying-call';\nimport {\n  BaseSubchannelWrapper,\n  ConnectivityStateListener,\n  SubchannelInterface,\n} from './subchannel-interface';\n\n/**\n * See https://nodejs.org/api/timers.html#timers_setinterval_callback_delay_args\n */\nconst MAX_TIMEOUT_TIME = 2147483647;\n\nconst MIN_IDLE_TIMEOUT_MS = 1000;\n\n// 30 minutes\nconst DEFAULT_IDLE_TIMEOUT_MS = 30 * 60 * 1000;\n\ninterface ConnectivityStateWatcher {\n  currentState: ConnectivityState;\n  timer: NodeJS.Timeout | null;\n  callback: (error?: Error) => void;\n}\n\ninterface NoneConfigResult {\n  type: 'NONE';\n}\n\ninterface SuccessConfigResult {\n  type: 'SUCCESS';\n  config: CallConfig;\n}\n\ninterface ErrorConfigResult {\n  type: 'ERROR';\n  error: StatusObject;\n}\n\ntype GetConfigResult =\n  | NoneConfigResult\n  | SuccessConfigResult\n  | ErrorConfigResult;\n\nconst RETRY_THROTTLER_MAP: Map<string, RetryThrottler> = new Map();\n\nconst DEFAULT_RETRY_BUFFER_SIZE_BYTES = 1 << 24; // 16 MB\nconst DEFAULT_PER_RPC_RETRY_BUFFER_SIZE_BYTES = 1 << 20; // 1 MB\n\nclass ChannelSubchannelWrapper\n  extends BaseSubchannelWrapper\n  implements SubchannelInterface\n{\n  private refCount = 0;\n  private subchannelStateListener: ConnectivityStateListener;\n  constructor(\n    childSubchannel: SubchannelInterface,\n    private channel: InternalChannel\n  ) {\n    super(childSubchannel);\n    this.subchannelStateListener = (\n      subchannel,\n      previousState,\n      newState,\n      keepaliveTime\n    ) => {\n      channel.throttleKeepalive(keepaliveTime);\n    };\n  }\n\n  ref(): void {\n    if (this.refCount === 0) {\n      this.child.addConnectivityStateListener(this.subchannelStateListener);\n      this.channel.addWrappedSubchannel(this);\n    }\n    this.child.ref();\n    this.refCount += 1;\n  }\n\n  unref(): void {\n    this.child.unref();\n    this.refCount -= 1;\n    if (this.refCount <= 0) {\n      this.child.removeConnectivityStateListener(this.subchannelStateListener);\n      this.channel.removeWrappedSubchannel(this);\n    }\n  }\n}\n\nclass ShutdownPicker implements Picker {\n  pick(pickArgs: PickArgs): PickResult {\n    return {\n      pickResultType: PickResultType.DROP,\n      status: {\n        code: Status.UNAVAILABLE,\n        details: 'Channel closed before call started',\n        metadata: new Metadata()\n      },\n      subchannel: null,\n      onCallStarted: null,\n      onCallEnded: null\n    }\n  }\n}\n\nexport const SUBCHANNEL_ARGS_EXCLUDE_KEY_PREFIX = 'grpc.internal.no_subchannel';\nclass ChannelzInfoTracker {\n  readonly trace = new ChannelzTrace();\n  readonly callTracker = new ChannelzCallTracker();\n  readonly childrenTracker = new ChannelzChildrenTracker();\n  state: ConnectivityState = ConnectivityState.IDLE;\n  constructor(private target: string) {}\n\n  getChannelzInfoCallback(): () => ChannelInfo {\n    return () => {\n      return {\n        target: this.target,\n        state: this.state,\n        trace: this.trace,\n        callTracker: this.callTracker,\n        children: this.childrenTracker.getChildLists()\n      };\n    };\n  }\n}\n\nexport class InternalChannel {\n  private readonly resolvingLoadBalancer: ResolvingLoadBalancer;\n  private readonly subchannelPool: SubchannelPool;\n  private connectivityState: ConnectivityState = ConnectivityState.IDLE;\n  private currentPicker: Picker = new UnavailablePicker();\n  /**\n   * Calls queued up to get a call config. Should only be populated before the\n   * first time the resolver returns a result, which includes the ConfigSelector.\n   */\n  private configSelectionQueue: ResolvingCall[] = [];\n  private pickQueue: LoadBalancingCall[] = [];\n  private connectivityStateWatchers: ConnectivityStateWatcher[] = [];\n  private readonly defaultAuthority: string;\n  private readonly filterStackFactory: FilterStackFactory;\n  private readonly target: GrpcUri;\n  /**\n   * This timer does not do anything on its own. Its purpose is to hold the\n   * event loop open while there are any pending calls for the channel that\n   * have not yet been assigned to specific subchannels. In other words,\n   * the invariant is that callRefTimer is reffed if and only if pickQueue\n   * is non-empty. In addition, the timer is null while the state is IDLE or\n   * SHUTDOWN and there are no pending calls.\n   */\n  private callRefTimer: NodeJS.Timeout | null = null;\n  private configSelector: ConfigSelector | null = null;\n  /**\n   * This is the error from the name resolver if it failed most recently. It\n   * is only used to end calls that start while there is no config selector\n   * and the name resolver is in backoff, so it should be nulled if\n   * configSelector becomes set or the channel state becomes anything other\n   * than TRANSIENT_FAILURE.\n   */\n  private currentResolutionError: StatusObject | null = null;\n  private readonly retryBufferTracker: MessageBufferTracker;\n  private keepaliveTime: number;\n  private readonly wrappedSubchannels: Set<ChannelSubchannelWrapper> =\n    new Set();\n\n  private callCount = 0;\n  private idleTimer: NodeJS.Timeout | null = null;\n  private readonly idleTimeoutMs: number;\n  private lastActivityTimestamp: Date;\n\n  // Channelz info\n  private readonly channelzEnabled: boolean = true;\n  private readonly channelzRef: ChannelRef;\n  private readonly channelzInfoTracker: ChannelzInfoTracker;\n\n  /**\n   * Randomly generated ID to be passed to the config selector, for use by\n   * ring_hash in xDS. An integer distributed approximately uniformly between\n   * 0 and MAX_SAFE_INTEGER.\n   */\n  private readonly randomChannelId = Math.floor(\n    Math.random() * Number.MAX_SAFE_INTEGER\n  );\n\n  constructor(\n    target: string,\n    private readonly credentials: ChannelCredentials,\n    private readonly options: ChannelOptions\n  ) {\n    if (typeof target !== 'string') {\n      throw new TypeError('Channel target must be a string');\n    }\n    if (!(credentials instanceof ChannelCredentials)) {\n      throw new TypeError(\n        'Channel credentials must be a ChannelCredentials object'\n      );\n    }\n    if (options) {\n      if (typeof options !== 'object') {\n        throw new TypeError('Channel options must be an object');\n      }\n    }\n    this.channelzInfoTracker = new ChannelzInfoTracker(target);\n    const originalTargetUri = parseUri(target);\n    if (originalTargetUri === null) {\n      throw new Error(`Could not parse target name \"${target}\"`);\n    }\n    /* This ensures that the target has a scheme that is registered with the\n     * resolver */\n    const defaultSchemeMapResult = mapUriDefaultScheme(originalTargetUri);\n    if (defaultSchemeMapResult === null) {\n      throw new Error(\n        `Could not find a default scheme for target name \"${target}\"`\n      );\n    }\n\n    if (this.options['grpc.enable_channelz'] === 0) {\n      this.channelzEnabled = false;\n    }\n\n    this.channelzRef = registerChannelzChannel(\n      target,\n      this.channelzInfoTracker.getChannelzInfoCallback(),\n      this.channelzEnabled\n    );\n    if (this.channelzEnabled) {\n      this.channelzInfoTracker.trace.addTrace('CT_INFO', 'Channel created');\n    }\n\n    if (this.options['grpc.default_authority']) {\n      this.defaultAuthority = this.options['grpc.default_authority'] as string;\n    } else {\n      this.defaultAuthority = getDefaultAuthority(defaultSchemeMapResult);\n    }\n    const proxyMapResult = mapProxyName(defaultSchemeMapResult, options);\n    this.target = proxyMapResult.target;\n    this.options = Object.assign({}, this.options, proxyMapResult.extraOptions);\n\n    /* The global boolean parameter to getSubchannelPool has the inverse meaning to what\n     * the grpc.use_local_subchannel_pool channel option means. */\n    this.subchannelPool = getSubchannelPool(\n      (this.options['grpc.use_local_subchannel_pool'] ?? 0) === 0\n    );\n    this.retryBufferTracker = new MessageBufferTracker(\n      this.options['grpc.retry_buffer_size'] ?? DEFAULT_RETRY_BUFFER_SIZE_BYTES,\n      this.options['grpc.per_rpc_retry_buffer_size'] ??\n        DEFAULT_PER_RPC_RETRY_BUFFER_SIZE_BYTES\n    );\n    this.keepaliveTime = this.options['grpc.keepalive_time_ms'] ?? -1;\n    this.idleTimeoutMs = Math.max(\n      this.options['grpc.client_idle_timeout_ms'] ?? DEFAULT_IDLE_TIMEOUT_MS,\n      MIN_IDLE_TIMEOUT_MS\n    );\n    const channelControlHelper: ChannelControlHelper = {\n      createSubchannel: (\n        subchannelAddress: SubchannelAddress,\n        subchannelArgs: ChannelOptions\n      ) => {\n        const finalSubchannelArgs: ChannelOptions = {};\n        for (const [key, value] of Object.entries(subchannelArgs)) {\n          if (!key.startsWith(SUBCHANNEL_ARGS_EXCLUDE_KEY_PREFIX)) {\n            finalSubchannelArgs[key] = value;\n          }\n        }\n        const subchannel = this.subchannelPool.getOrCreateSubchannel(\n          this.target,\n          subchannelAddress,\n          finalSubchannelArgs,\n          this.credentials\n        );\n        subchannel.throttleKeepalive(this.keepaliveTime);\n        if (this.channelzEnabled) {\n          this.channelzInfoTracker.trace.addTrace(\n            'CT_INFO',\n            'Created subchannel or used existing subchannel',\n            subchannel.getChannelzRef()\n          );\n        }\n        const wrappedSubchannel = new ChannelSubchannelWrapper(\n          subchannel,\n          this\n        );\n        return wrappedSubchannel;\n      },\n      updateState: (connectivityState: ConnectivityState, picker: Picker) => {\n        this.currentPicker = picker;\n        const queueCopy = this.pickQueue.slice();\n        this.pickQueue = [];\n        if (queueCopy.length > 0) {\n          this.callRefTimerUnref();\n        }\n        for (const call of queueCopy) {\n          call.doPick();\n        }\n        this.updateState(connectivityState);\n      },\n      requestReresolution: () => {\n        // This should never be called.\n        throw new Error(\n          'Resolving load balancer should never call requestReresolution'\n        );\n      },\n      addChannelzChild: (child: ChannelRef | SubchannelRef) => {\n        if (this.channelzEnabled) {\n          this.channelzInfoTracker.childrenTracker.refChild(child);\n        }\n      },\n      removeChannelzChild: (child: ChannelRef | SubchannelRef) => {\n        if (this.channelzEnabled) {\n          this.channelzInfoTracker.childrenTracker.unrefChild(child);\n        }\n      },\n    };\n    this.resolvingLoadBalancer = new ResolvingLoadBalancer(\n      this.target,\n      channelControlHelper,\n      this.options,\n      (serviceConfig, configSelector) => {\n        if (serviceConfig.retryThrottling) {\n          RETRY_THROTTLER_MAP.set(\n            this.getTarget(),\n            new RetryThrottler(\n              serviceConfig.retryThrottling.maxTokens,\n              serviceConfig.retryThrottling.tokenRatio,\n              RETRY_THROTTLER_MAP.get(this.getTarget())\n            )\n          );\n        } else {\n          RETRY_THROTTLER_MAP.delete(this.getTarget());\n        }\n        if (this.channelzEnabled) {\n          this.channelzInfoTracker.trace.addTrace(\n            'CT_INFO',\n            'Address resolution succeeded'\n          );\n        }\n        this.configSelector?.unref();\n        this.configSelector = configSelector;\n        this.currentResolutionError = null;\n        /* We process the queue asynchronously to ensure that the corresponding\n         * load balancer update has completed. */\n        process.nextTick(() => {\n          const localQueue = this.configSelectionQueue;\n          this.configSelectionQueue = [];\n          if (localQueue.length > 0) {\n            this.callRefTimerUnref();\n          }\n          for (const call of localQueue) {\n            call.getConfig();\n          }\n        });\n      },\n      status => {\n        if (this.channelzEnabled) {\n          this.channelzInfoTracker.trace.addTrace(\n            'CT_WARNING',\n            'Address resolution failed with code ' +\n              status.code +\n              ' and details \"' +\n              status.details +\n              '\"'\n          );\n        }\n        if (this.configSelectionQueue.length > 0) {\n          this.trace(\n            'Name resolution failed with calls queued for config selection'\n          );\n        }\n        if (this.configSelector === null) {\n          this.currentResolutionError = {\n            ...restrictControlPlaneStatusCode(status.code, status.details),\n            metadata: status.metadata,\n          };\n        }\n        const localQueue = this.configSelectionQueue;\n        this.configSelectionQueue = [];\n        if (localQueue.length > 0) {\n          this.callRefTimerUnref();\n        }\n        for (const call of localQueue) {\n          call.reportResolverError(status);\n        }\n      }\n    );\n    this.filterStackFactory = new FilterStackFactory([\n      new CompressionFilterFactory(this, this.options),\n    ]);\n    this.trace(\n      'Channel constructed with options ' +\n        JSON.stringify(options, undefined, 2)\n    );\n    const error = new Error();\n    if (isTracerEnabled('channel_stacktrace')){\n      trace(\n        LogVerbosity.DEBUG,\n        'channel_stacktrace',\n        '(' +\n          this.channelzRef.id +\n          ') ' +\n          'Channel constructed \\n' +\n          error.stack?.substring(error.stack.indexOf('\\n') + 1)\n      );\n    }\n    this.lastActivityTimestamp = new Date();\n  }\n\n  private trace(text: string, verbosityOverride?: LogVerbosity) {\n    trace(\n      verbosityOverride ?? LogVerbosity.DEBUG,\n      'channel',\n      '(' + this.channelzRef.id + ') ' + uriToString(this.target) + ' ' + text\n    );\n  }\n\n  private callRefTimerRef() {\n    if (!this.callRefTimer) {\n      this.callRefTimer = setInterval(() => {}, MAX_TIMEOUT_TIME)\n    }\n    // If the hasRef function does not exist, always run the code\n    if (!this.callRefTimer.hasRef?.()) {\n      this.trace(\n        'callRefTimer.ref | configSelectionQueue.length=' +\n          this.configSelectionQueue.length +\n          ' pickQueue.length=' +\n          this.pickQueue.length\n      );\n      this.callRefTimer.ref?.();\n    }\n  }\n\n  private callRefTimerUnref() {\n    // If the timer or the hasRef function does not exist, always run the code\n    if (!this.callRefTimer?.hasRef || this.callRefTimer.hasRef()) {\n      this.trace(\n        'callRefTimer.unref | configSelectionQueue.length=' +\n          this.configSelectionQueue.length +\n          ' pickQueue.length=' +\n          this.pickQueue.length\n      );\n      this.callRefTimer?.unref?.();\n    }\n  }\n\n  private removeConnectivityStateWatcher(\n    watcherObject: ConnectivityStateWatcher\n  ) {\n    const watcherIndex = this.connectivityStateWatchers.findIndex(\n      value => value === watcherObject\n    );\n    if (watcherIndex >= 0) {\n      this.connectivityStateWatchers.splice(watcherIndex, 1);\n    }\n  }\n\n  private updateState(newState: ConnectivityState): void {\n    trace(\n      LogVerbosity.DEBUG,\n      'connectivity_state',\n      '(' +\n        this.channelzRef.id +\n        ') ' +\n        uriToString(this.target) +\n        ' ' +\n        ConnectivityState[this.connectivityState] +\n        ' -> ' +\n        ConnectivityState[newState]\n    );\n    if (this.channelzEnabled) {\n      this.channelzInfoTracker.trace.addTrace(\n        'CT_INFO',\n        'Connectivity state change to ' + ConnectivityState[newState]\n      );\n    }\n    this.connectivityState = newState;\n    this.channelzInfoTracker.state = newState;\n    const watchersCopy = this.connectivityStateWatchers.slice();\n    for (const watcherObject of watchersCopy) {\n      if (newState !== watcherObject.currentState) {\n        if (watcherObject.timer) {\n          clearTimeout(watcherObject.timer);\n        }\n        this.removeConnectivityStateWatcher(watcherObject);\n        watcherObject.callback();\n      }\n    }\n    if (newState !== ConnectivityState.TRANSIENT_FAILURE) {\n      this.currentResolutionError = null;\n    }\n  }\n\n  throttleKeepalive(newKeepaliveTime: number) {\n    if (newKeepaliveTime > this.keepaliveTime) {\n      this.keepaliveTime = newKeepaliveTime;\n      for (const wrappedSubchannel of this.wrappedSubchannels) {\n        wrappedSubchannel.throttleKeepalive(newKeepaliveTime);\n      }\n    }\n  }\n\n  addWrappedSubchannel(wrappedSubchannel: ChannelSubchannelWrapper) {\n    this.wrappedSubchannels.add(wrappedSubchannel);\n  }\n\n  removeWrappedSubchannel(wrappedSubchannel: ChannelSubchannelWrapper) {\n    this.wrappedSubchannels.delete(wrappedSubchannel);\n  }\n\n  doPick(metadata: Metadata, extraPickInfo: { [key: string]: string }) {\n    return this.currentPicker.pick({\n      metadata: metadata,\n      extraPickInfo: extraPickInfo,\n    });\n  }\n\n  queueCallForPick(call: LoadBalancingCall) {\n    this.pickQueue.push(call);\n    this.callRefTimerRef();\n  }\n\n  getConfig(method: string, metadata: Metadata): GetConfigResult {\n    if (this.connectivityState !== ConnectivityState.SHUTDOWN) {\n      this.resolvingLoadBalancer.exitIdle();\n    }\n    if (this.configSelector) {\n      return {\n        type: 'SUCCESS',\n        config: this.configSelector.invoke(method, metadata, this.randomChannelId),\n      };\n    } else {\n      if (this.currentResolutionError) {\n        return {\n          type: 'ERROR',\n          error: this.currentResolutionError,\n        };\n      } else {\n        return {\n          type: 'NONE',\n        };\n      }\n    }\n  }\n\n  queueCallForConfig(call: ResolvingCall) {\n    this.configSelectionQueue.push(call);\n    this.callRefTimerRef();\n  }\n\n  private enterIdle() {\n    this.resolvingLoadBalancer.destroy();\n    this.updateState(ConnectivityState.IDLE);\n    this.currentPicker = new QueuePicker(this.resolvingLoadBalancer);\n    if (this.idleTimer) {\n      clearTimeout(this.idleTimer);\n      this.idleTimer = null;\n    }\n    if (this.callRefTimer) {\n      clearInterval(this.callRefTimer);\n      this.callRefTimer = null;\n    }\n  }\n\n  private startIdleTimeout(timeoutMs: number) {\n    this.idleTimer = setTimeout(() => {\n      if (this.callCount > 0) {\n        /* If there is currently a call, the channel will not go idle for a\n         * period of at least idleTimeoutMs, so check again after that time.\n         */\n        this.startIdleTimeout(this.idleTimeoutMs);\n        return;\n      }\n      const now = new Date();\n      const timeSinceLastActivity =\n        now.valueOf() - this.lastActivityTimestamp.valueOf();\n      if (timeSinceLastActivity >= this.idleTimeoutMs) {\n        this.trace(\n          'Idle timer triggered after ' +\n            this.idleTimeoutMs +\n            'ms of inactivity'\n        );\n        this.enterIdle();\n      } else {\n        /* Whenever the timer fires with the latest activity being too recent,\n         * set the timer again for the time when the time since the last\n         * activity is equal to the timeout. This should result in the timer\n         * firing no more than once every idleTimeoutMs/2 on average. */\n        this.startIdleTimeout(this.idleTimeoutMs - timeSinceLastActivity);\n      }\n    }, timeoutMs);\n    this.idleTimer.unref?.();\n  }\n\n  private maybeStartIdleTimer() {\n    if (\n      this.connectivityState !== ConnectivityState.SHUTDOWN &&\n      !this.idleTimer\n    ) {\n      this.startIdleTimeout(this.idleTimeoutMs);\n    }\n  }\n\n  private onCallStart() {\n    if (this.channelzEnabled) {\n      this.channelzInfoTracker.callTracker.addCallStarted();\n    }\n    this.callCount += 1;\n  }\n\n  private onCallEnd(status: StatusObject) {\n    if (this.channelzEnabled) {\n      if (status.code === Status.OK) {\n        this.channelzInfoTracker.callTracker.addCallSucceeded();\n      } else {\n        this.channelzInfoTracker.callTracker.addCallFailed();\n      }\n    }\n    this.callCount -= 1;\n    this.lastActivityTimestamp = new Date();\n    this.maybeStartIdleTimer();\n  }\n\n  createLoadBalancingCall(\n    callConfig: CallConfig,\n    method: string,\n    host: string,\n    credentials: CallCredentials,\n    deadline: Deadline\n  ): LoadBalancingCall {\n    const callNumber = getNextCallNumber();\n    this.trace(\n      'createLoadBalancingCall [' + callNumber + '] method=\"' + method + '\"'\n    );\n    return new LoadBalancingCall(\n      this,\n      callConfig,\n      method,\n      host,\n      credentials,\n      deadline,\n      callNumber\n    );\n  }\n\n  createRetryingCall(\n    callConfig: CallConfig,\n    method: string,\n    host: string,\n    credentials: CallCredentials,\n    deadline: Deadline\n  ): RetryingCall {\n    const callNumber = getNextCallNumber();\n    this.trace(\n      'createRetryingCall [' + callNumber + '] method=\"' + method + '\"'\n    );\n    return new RetryingCall(\n      this,\n      callConfig,\n      method,\n      host,\n      credentials,\n      deadline,\n      callNumber,\n      this.retryBufferTracker,\n      RETRY_THROTTLER_MAP.get(this.getTarget())\n    );\n  }\n\n  createResolvingCall(\n    method: string,\n    deadline: Deadline,\n    host: string | null | undefined,\n    parentCall: ServerSurfaceCall | null,\n    propagateFlags: number | null | undefined\n  ): ResolvingCall {\n    const callNumber = getNextCallNumber();\n    this.trace(\n      'createResolvingCall [' +\n        callNumber +\n        '] method=\"' +\n        method +\n        '\", deadline=' +\n        deadlineToString(deadline)\n    );\n    const finalOptions: CallStreamOptions = {\n      deadline: deadline,\n      flags: propagateFlags ?? Propagate.DEFAULTS,\n      host: host ?? this.defaultAuthority,\n      parentCall: parentCall,\n    };\n\n    const call = new ResolvingCall(\n      this,\n      method,\n      finalOptions,\n      this.filterStackFactory.clone(),\n      callNumber\n    );\n\n    this.onCallStart();\n    call.addStatusWatcher(status => {\n      this.onCallEnd(status);\n    });\n    return call;\n  }\n\n  close() {\n    this.resolvingLoadBalancer.destroy();\n    this.updateState(ConnectivityState.SHUTDOWN);\n    this.currentPicker = new ShutdownPicker();\n    for (const call of this.configSelectionQueue) {\n      call.cancelWithStatus(Status.UNAVAILABLE, 'Channel closed before call started');\n    }\n    this.configSelectionQueue = [];\n    for (const call of this.pickQueue) {\n      call.cancelWithStatus(Status.UNAVAILABLE, 'Channel closed before call started');\n    }\n    this.pickQueue = [];\n    if (this.callRefTimer) {\n      clearInterval(this.callRefTimer);\n    }\n    if (this.idleTimer) {\n      clearTimeout(this.idleTimer);\n    }\n    if (this.channelzEnabled) {\n      unregisterChannelzRef(this.channelzRef);\n    }\n\n    this.subchannelPool.unrefUnusedSubchannels();\n    this.configSelector?.unref();\n    this.configSelector = null;\n  }\n\n  getTarget() {\n    return uriToString(this.target);\n  }\n\n  getConnectivityState(tryToConnect: boolean) {\n    const connectivityState = this.connectivityState;\n    if (tryToConnect) {\n      this.resolvingLoadBalancer.exitIdle();\n      this.lastActivityTimestamp = new Date();\n      this.maybeStartIdleTimer();\n    }\n    return connectivityState;\n  }\n\n  watchConnectivityState(\n    currentState: ConnectivityState,\n    deadline: Date | number,\n    callback: (error?: Error) => void\n  ): void {\n    if (this.connectivityState === ConnectivityState.SHUTDOWN) {\n      throw new Error('Channel has been shut down');\n    }\n    let timer = null;\n    if (deadline !== Infinity) {\n      const deadlineDate: Date =\n        deadline instanceof Date ? deadline : new Date(deadline);\n      const now = new Date();\n      if (deadline === -Infinity || deadlineDate <= now) {\n        process.nextTick(\n          callback,\n          new Error('Deadline passed without connectivity state change')\n        );\n        return;\n      }\n      timer = setTimeout(() => {\n        this.removeConnectivityStateWatcher(watcherObject);\n        callback(\n          new Error('Deadline passed without connectivity state change')\n        );\n      }, deadlineDate.getTime() - now.getTime());\n    }\n    const watcherObject = {\n      currentState,\n      callback,\n      timer,\n    };\n    this.connectivityStateWatchers.push(watcherObject);\n  }\n\n  /**\n   * Get the channelz reference object for this channel. The returned value is\n   * garbage if channelz is disabled for this channel.\n   * @returns\n   */\n  getChannelzRef() {\n    return this.channelzRef;\n  }\n\n  createCall(\n    method: string,\n    deadline: Deadline,\n    host: string | null | undefined,\n    parentCall: ServerSurfaceCall | null,\n    propagateFlags: number | null | undefined\n  ): Call {\n    if (typeof method !== 'string') {\n      throw new TypeError('Channel#createCall: method must be a string');\n    }\n    if (!(typeof deadline === 'number' || deadline instanceof Date)) {\n      throw new TypeError(\n        'Channel#createCall: deadline must be a number or Date'\n      );\n    }\n    if (this.connectivityState === ConnectivityState.SHUTDOWN) {\n      throw new Error('Channel has been shut down');\n    }\n    return this.createResolvingCall(\n      method,\n      deadline,\n      host,\n      parentCall,\n      propagateFlags\n    );\n  }\n\n  getOptions() {\n    return this.options;\n  }\n}\n", "/*\n * Copyright 2019 gRPC authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n */\n\nimport { ChannelCredentials } from './channel-credentials';\nimport { ChannelOptions } from './channel-options';\nimport { ServerSurfaceCall } from './server-call';\n\nimport { ConnectivityState } from './connectivity-state';\nimport type { ChannelRef } from './channelz';\nimport { Call } from './call-interface';\nimport { InternalChannel } from './internal-channel';\nimport { Deadline } from './deadline';\n\n/**\n * An interface that represents a communication channel to a server specified\n * by a given address.\n */\nexport interface Channel {\n  /**\n   * Close the channel. This has the same functionality as the existing\n   * grpc.Client.prototype.close\n   */\n  close(): void;\n  /**\n   * Return the target that this channel connects to\n   */\n  getTarget(): string;\n  /**\n   * Get the channel's current connectivity state. This method is here mainly\n   * because it is in the existing internal Channel class, and there isn't\n   * another good place to put it.\n   * @param tryToConnect If true, the channel will start connecting if it is\n   *     idle. Otherwise, idle channels will only start connecting when a\n   *     call starts.\n   */\n  getConnectivityState(tryToConnect: boolean): ConnectivityState;\n  /**\n   * Watch for connectivity state changes. This is also here mainly because\n   * it is in the existing external Channel class.\n   * @param currentState The state to watch for transitions from. This should\n   *     always be populated by calling getConnectivityState immediately\n   *     before.\n   * @param deadline A deadline for waiting for a state change\n   * @param callback Called with no error when a state change, or with an\n   *     error if the deadline passes without a state change.\n   */\n  watchConnectivityState(\n    currentState: ConnectivityState,\n    deadline: Date | number,\n    callback: (error?: Error) => void\n  ): void;\n  /**\n   * Get the channelz reference object for this channel. A request to the\n   * channelz service for the id in this object will provide information\n   * about this channel.\n   */\n  getChannelzRef(): ChannelRef;\n  /**\n   * Create a call object. Call is an opaque type that is used by the Client\n   * class. This function is called by the gRPC library when starting a\n   * request. Implementers should return an instance of Call that is returned\n   * from calling createCall on an instance of the provided Channel class.\n   * @param method The full method string to request.\n   * @param deadline The call deadline\n   * @param host A host string override for making the request\n   * @param parentCall A server call to propagate some information from\n   * @param propagateFlags A bitwise combination of elements of grpc.propagate\n   *     that indicates what information to propagate from parentCall.\n   */\n  createCall(\n    method: string,\n    deadline: Deadline,\n    host: string | null | undefined,\n    parentCall: ServerSurfaceCall | null,\n    propagateFlags: number | null | undefined\n  ): Call;\n}\n\nexport class ChannelImplementation implements Channel {\n  private internalChannel: InternalChannel;\n\n  constructor(\n    target: string,\n    credentials: ChannelCredentials,\n    options: ChannelOptions\n  ) {\n    if (typeof target !== 'string') {\n      throw new TypeError('Channel target must be a string');\n    }\n    if (!(credentials instanceof ChannelCredentials)) {\n      throw new TypeError(\n        'Channel credentials must be a ChannelCredentials object'\n      );\n    }\n    if (options) {\n      if (typeof options !== 'object') {\n        throw new TypeError('Channel options must be an object');\n      }\n    }\n\n    this.internalChannel = new InternalChannel(target, credentials, options);\n  }\n\n  close() {\n    this.internalChannel.close();\n  }\n\n  getTarget() {\n    return this.internalChannel.getTarget();\n  }\n\n  getConnectivityState(tryToConnect: boolean) {\n    return this.internalChannel.getConnectivityState(tryToConnect);\n  }\n\n  watchConnectivityState(\n    currentState: ConnectivityState,\n    deadline: Date | number,\n    callback: (error?: Error) => void\n  ): void {\n    this.internalChannel.watchConnectivityState(\n      currentState,\n      deadline,\n      callback\n    );\n  }\n\n  /**\n   * Get the channelz reference object for this channel. The returned value is\n   * garbage if channelz is disabled for this channel.\n   * @returns\n   */\n  getChannelzRef() {\n    return this.internalChannel.getChannelzRef();\n  }\n\n  createCall(\n    method: string,\n    deadline: Deadline,\n    host: string | null | undefined,\n    parentCall: ServerSurfaceCall | null,\n    propagateFlags: number | null | undefined\n  ): Call {\n    if (typeof method !== 'string') {\n      throw new TypeError('Channel#createCall: method must be a string');\n    }\n    if (!(typeof deadline === 'number' || deadline instanceof Date)) {\n      throw new TypeError(\n        'Channel#createCall: deadline must be a number or Date'\n      );\n    }\n    return this.internalChannel.createCall(\n      method,\n      deadline,\n      host,\n      parentCall,\n      propagateFlags\n    );\n  }\n}\n", "/*\n * Copyright 2019 gRPC authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n */\n\nimport { EventEmitter } from 'events';\nimport { Duplex, Readable, Writable } from 'stream';\n\nimport { Status } from './constants';\nimport type { Deserialize, Serialize } from './make-client';\nimport { Metadata } from './metadata';\nimport type { ObjectReadable, ObjectWritable } from './object-stream';\nimport type { StatusObject, PartialStatusObject } from './call-interface';\nimport type { Deadline } from './deadline';\nimport type { ServerInterceptingCallInterface } from './server-interceptors';\nimport { AuthContext } from './auth-context';\nimport { PerRequestMetricRecorder } from './orca';\n\nexport type ServerStatusResponse = Partial<StatusObject>;\n\nexport type ServerErrorResponse = ServerStatusResponse & Error;\n\nexport type ServerSurfaceCall = {\n  cancelled: boolean;\n  readonly metadata: Metadata;\n  getPeer(): string;\n  sendMetadata(responseMetadata: Metadata): void;\n  getDeadline(): Deadline;\n  getPath(): string;\n  getHost(): string;\n  getAuthContext(): AuthContext;\n  getMetricsRecorder(): PerRequestMetricRecorder;\n} & EventEmitter;\n\nexport type ServerUnaryCall<RequestType, ResponseType> = ServerSurfaceCall & {\n  request: RequestType;\n};\nexport type ServerReadableStream<RequestType, ResponseType> =\n  ServerSurfaceCall & ObjectReadable<RequestType>;\nexport type ServerWritableStream<RequestType, ResponseType> =\n  ServerSurfaceCall &\n    ObjectWritable<ResponseType> & {\n      request: RequestType;\n      end: (metadata?: Metadata) => void;\n    };\nexport type ServerDuplexStream<RequestType, ResponseType> = ServerSurfaceCall &\n  ObjectReadable<RequestType> &\n  ObjectWritable<ResponseType> & { end: (metadata?: Metadata) => void };\n\nexport function serverErrorToStatus(\n  error: ServerErrorResponse | ServerStatusResponse,\n  overrideTrailers?: Metadata | undefined\n): PartialStatusObject {\n  const status: PartialStatusObject = {\n    code: Status.UNKNOWN,\n    details: 'message' in error ? error.message : 'Unknown Error',\n    metadata: overrideTrailers ?? error.metadata ?? null,\n  };\n\n  if (\n    'code' in error &&\n    typeof error.code === 'number' &&\n    Number.isInteger(error.code)\n  ) {\n    status.code = error.code;\n\n    if ('details' in error && typeof error.details === 'string') {\n      status.details = error.details!;\n    }\n  }\n  return status;\n}\n\nexport class ServerUnaryCallImpl<RequestType, ResponseType>\n  extends EventEmitter\n  implements ServerUnaryCall<RequestType, ResponseType>\n{\n  cancelled: boolean;\n\n  constructor(\n    private path: string,\n    private call: ServerInterceptingCallInterface,\n    public metadata: Metadata,\n    public request: RequestType\n  ) {\n    super();\n    this.cancelled = false;\n  }\n\n  getPeer(): string {\n    return this.call.getPeer();\n  }\n\n  sendMetadata(responseMetadata: Metadata): void {\n    this.call.sendMetadata(responseMetadata);\n  }\n\n  getDeadline(): Deadline {\n    return this.call.getDeadline();\n  }\n\n  getPath(): string {\n    return this.path;\n  }\n\n  getHost(): string {\n    return this.call.getHost();\n  }\n\n  getAuthContext(): AuthContext {\n    return this.call.getAuthContext();\n  }\n\n  getMetricsRecorder(): PerRequestMetricRecorder {\n    return this.call.getMetricsRecorder();\n  }\n}\n\nexport class ServerReadableStreamImpl<RequestType, ResponseType>\n  extends Readable\n  implements ServerReadableStream<RequestType, ResponseType>\n{\n  cancelled: boolean;\n\n  constructor(\n    private path: string,\n    private call: ServerInterceptingCallInterface,\n    public metadata: Metadata\n  ) {\n    super({ objectMode: true });\n    this.cancelled = false;\n  }\n\n  _read(size: number) {\n    this.call.startRead();\n  }\n\n  getPeer(): string {\n    return this.call.getPeer();\n  }\n\n  sendMetadata(responseMetadata: Metadata): void {\n    this.call.sendMetadata(responseMetadata);\n  }\n\n  getDeadline(): Deadline {\n    return this.call.getDeadline();\n  }\n\n  getPath(): string {\n    return this.path;\n  }\n\n  getHost(): string {\n    return this.call.getHost();\n  }\n\n  getAuthContext(): AuthContext {\n    return this.call.getAuthContext();\n  }\n\n  getMetricsRecorder(): PerRequestMetricRecorder {\n    return this.call.getMetricsRecorder();\n  }\n}\n\nexport class ServerWritableStreamImpl<RequestType, ResponseType>\n  extends Writable\n  implements ServerWritableStream<RequestType, ResponseType>\n{\n  cancelled: boolean;\n  private trailingMetadata: Metadata;\n  private pendingStatus: PartialStatusObject = {\n    code: Status.OK,\n    details: 'OK',\n  };\n\n  constructor(\n    private path: string,\n    private call: ServerInterceptingCallInterface,\n    public metadata: Metadata,\n    public request: RequestType\n  ) {\n    super({ objectMode: true });\n    this.cancelled = false;\n    this.trailingMetadata = new Metadata();\n\n    this.on('error', err => {\n      this.pendingStatus = serverErrorToStatus(err);\n      this.end();\n    });\n  }\n\n  getPeer(): string {\n    return this.call.getPeer();\n  }\n\n  sendMetadata(responseMetadata: Metadata): void {\n    this.call.sendMetadata(responseMetadata);\n  }\n\n  getDeadline(): Deadline {\n    return this.call.getDeadline();\n  }\n\n  getPath(): string {\n    return this.path;\n  }\n\n  getHost(): string {\n    return this.call.getHost();\n  }\n\n  getAuthContext(): AuthContext {\n    return this.call.getAuthContext();\n  }\n\n  getMetricsRecorder(): PerRequestMetricRecorder {\n    return this.call.getMetricsRecorder();\n  }\n\n  _write(\n    chunk: ResponseType,\n    encoding: string,\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    callback: (...args: any[]) => void\n  ) {\n    this.call.sendMessage(chunk, callback);\n  }\n\n  _final(callback: Function): void {\n    callback(null);\n    this.call.sendStatus({\n      ...this.pendingStatus,\n      metadata: this.pendingStatus.metadata ?? this.trailingMetadata,\n    });\n  }\n\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  end(metadata?: any) {\n    if (metadata) {\n      this.trailingMetadata = metadata;\n    }\n\n    return super.end();\n  }\n}\n\nexport class ServerDuplexStreamImpl<RequestType, ResponseType>\n  extends Duplex\n  implements ServerDuplexStream<RequestType, ResponseType>\n{\n  cancelled: boolean;\n  private trailingMetadata: Metadata;\n  private pendingStatus: PartialStatusObject = {\n    code: Status.OK,\n    details: 'OK',\n  };\n\n  constructor(\n    private path: string,\n    private call: ServerInterceptingCallInterface,\n    public metadata: Metadata\n  ) {\n    super({ objectMode: true });\n    this.cancelled = false;\n    this.trailingMetadata = new Metadata();\n\n    this.on('error', err => {\n      this.pendingStatus = serverErrorToStatus(err);\n      this.end();\n    });\n  }\n\n  getPeer(): string {\n    return this.call.getPeer();\n  }\n\n  sendMetadata(responseMetadata: Metadata): void {\n    this.call.sendMetadata(responseMetadata);\n  }\n\n  getDeadline(): Deadline {\n    return this.call.getDeadline();\n  }\n\n  getPath(): string {\n    return this.path;\n  }\n\n  getHost(): string {\n    return this.call.getHost();\n  }\n\n  getAuthContext(): AuthContext {\n    return this.call.getAuthContext();\n  }\n\n  getMetricsRecorder(): PerRequestMetricRecorder {\n    return this.call.getMetricsRecorder();\n  }\n\n  _read(size: number) {\n    this.call.startRead();\n  }\n\n  _write(\n    chunk: ResponseType,\n    encoding: string,\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    callback: (...args: any[]) => void\n  ) {\n    this.call.sendMessage(chunk, callback);\n  }\n\n  _final(callback: Function): void {\n    callback(null);\n    this.call.sendStatus({\n      ...this.pendingStatus,\n      metadata: this.pendingStatus.metadata ?? this.trailingMetadata,\n    });\n  }\n\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  end(metadata?: any) {\n    if (metadata) {\n      this.trailingMetadata = metadata;\n    }\n\n    return super.end();\n  }\n}\n\n// Unary response callback signature.\nexport type sendUnaryData<ResponseType> = (\n  error: ServerErrorResponse | ServerStatusResponse | null,\n  value?: ResponseType | null,\n  trailer?: Metadata,\n  flags?: number\n) => void;\n\n// User provided handler for unary calls.\nexport type handleUnaryCall<RequestType, ResponseType> = (\n  call: ServerUnaryCall<RequestType, ResponseType>,\n  callback: sendUnaryData<ResponseType>\n) => void;\n\n// User provided handler for client streaming calls.\nexport type handleClientStreamingCall<RequestType, ResponseType> = (\n  call: ServerReadableStream<RequestType, ResponseType>,\n  callback: sendUnaryData<ResponseType>\n) => void;\n\n// User provided handler for server streaming calls.\nexport type handleServerStreamingCall<RequestType, ResponseType> = (\n  call: ServerWritableStream<RequestType, ResponseType>\n) => void;\n\n// User provided handler for bidirectional streaming calls.\nexport type handleBidiStreamingCall<RequestType, ResponseType> = (\n  call: ServerDuplexStream<RequestType, ResponseType>\n) => void;\n\nexport type HandleCall<RequestType, ResponseType> =\n  | handleUnaryCall<RequestType, ResponseType>\n  | handleClientStreamingCall<RequestType, ResponseType>\n  | handleServerStreamingCall<RequestType, ResponseType>\n  | handleBidiStreamingCall<RequestType, ResponseType>;\n\nexport interface UnaryHandler<RequestType, ResponseType> {\n  func: handleUnaryCall<RequestType, ResponseType>;\n  serialize: Serialize<ResponseType>;\n  deserialize: Deserialize<RequestType>;\n  type: 'unary';\n  path: string;\n}\n\nexport interface ClientStreamingHandler<RequestType, ResponseType> {\n  func: handleClientStreamingCall<RequestType, ResponseType>;\n  serialize: Serialize<ResponseType>;\n  deserialize: Deserialize<RequestType>;\n  type: 'clientStream';\n  path: string;\n}\n\nexport interface ServerStreamingHandler<RequestType, ResponseType> {\n  func: handleServerStreamingCall<RequestType, ResponseType>;\n  serialize: Serialize<ResponseType>;\n  deserialize: Deserialize<RequestType>;\n  type: 'serverStream';\n  path: string;\n}\n\nexport interface BidiStreamingHandler<RequestType, ResponseType> {\n  func: handleBidiStreamingCall<RequestType, ResponseType>;\n  serialize: Serialize<ResponseType>;\n  deserialize: Deserialize<RequestType>;\n  type: 'bidi';\n  path: string;\n}\n\nexport type Handler<RequestType, ResponseType> =\n  | UnaryHandler<RequestType, ResponseType>\n  | ClientStreamingHandler<RequestType, ResponseType>\n  | ServerStreamingHandler<RequestType, ResponseType>\n  | BidiStreamingHandler<RequestType, ResponseType>;\n\nexport type HandlerType = 'bidi' | 'clientStream' | 'serverStream' | 'unary';\n", "/*\n * Copyright 2019 gRPC authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n */\n\nimport { SecureServerOptions } from 'http2';\nimport { CIPHER_SUITES, getDefaultRootsData } from './tls-helpers';\nimport { SecureContextOptions } from 'tls';\nimport { ServerInterceptor } from '.';\nimport { CaCertificateUpdate, CaCertificateUpdateListener, CertificateProvider, IdentityCertificateUpdate, IdentityCertificateUpdateListener } from './certificate-provider';\n\nexport interface KeyCertPair {\n  private_key: Buffer;\n  cert_chain: Buffer;\n}\n\nexport interface SecureContextWatcher {\n  (context: SecureContextOptions | null): void;\n}\n\nexport abstract class ServerCredentials {\n  private watchers: Set<SecureContextWatcher> = new Set();\n  private latestContextOptions: SecureContextOptions | null = null;\n  constructor(private serverConstructorOptions: SecureServerOptions | null, contextOptions?: SecureContextOptions) {\n    this.latestContextOptions = contextOptions ?? null;\n  }\n\n  _addWatcher(watcher: SecureContextWatcher) {\n    this.watchers.add(watcher);\n  }\n  _removeWatcher(watcher: SecureContextWatcher) {\n    this.watchers.delete(watcher);\n  }\n  protected getWatcherCount() {\n    return this.watchers.size;\n  }\n  protected updateSecureContextOptions(options: SecureContextOptions | null) {\n    this.latestContextOptions = options;\n    for (const watcher of this.watchers) {\n      watcher(this.latestContextOptions);\n    }\n  }\n  _isSecure(): boolean {\n    return this.serverConstructorOptions !== null;\n  }\n  _getSecureContextOptions(): SecureContextOptions | null {\n    return this.latestContextOptions;\n  }\n  _getConstructorOptions(): SecureServerOptions | null {\n    return this.serverConstructorOptions;\n  }\n  _getInterceptors(): ServerInterceptor[] {\n    return [];\n  }\n  abstract _equals(other: ServerCredentials): boolean;\n\n  static createInsecure(): ServerCredentials {\n    return new InsecureServerCredentials();\n  }\n\n  static createSsl(\n    rootCerts: Buffer | null,\n    keyCertPairs: KeyCertPair[],\n    checkClientCertificate = false\n  ): ServerCredentials {\n    if (rootCerts !== null && !Buffer.isBuffer(rootCerts)) {\n      throw new TypeError('rootCerts must be null or a Buffer');\n    }\n\n    if (!Array.isArray(keyCertPairs)) {\n      throw new TypeError('keyCertPairs must be an array');\n    }\n\n    if (typeof checkClientCertificate !== 'boolean') {\n      throw new TypeError('checkClientCertificate must be a boolean');\n    }\n\n    const cert: Buffer[] = [];\n    const key: Buffer[] = [];\n\n    for (let i = 0; i < keyCertPairs.length; i++) {\n      const pair = keyCertPairs[i];\n\n      if (pair === null || typeof pair !== 'object') {\n        throw new TypeError(`keyCertPair[${i}] must be an object`);\n      }\n\n      if (!Buffer.isBuffer(pair.private_key)) {\n        throw new TypeError(`keyCertPair[${i}].private_key must be a Buffer`);\n      }\n\n      if (!Buffer.isBuffer(pair.cert_chain)) {\n        throw new TypeError(`keyCertPair[${i}].cert_chain must be a Buffer`);\n      }\n\n      cert.push(pair.cert_chain);\n      key.push(pair.private_key);\n    }\n\n    return new SecureServerCredentials({\n      requestCert: checkClientCertificate,\n      ciphers: CIPHER_SUITES,\n    }, {\n      ca: rootCerts ?? getDefaultRootsData() ?? undefined,\n      cert,\n      key,\n    });\n  }\n}\n\nclass InsecureServerCredentials extends ServerCredentials {\n  constructor() {\n    super(null);\n  }\n\n  _getSettings(): null {\n    return null;\n  }\n\n  _equals(other: ServerCredentials): boolean {\n    return other instanceof InsecureServerCredentials;\n  }\n}\n\nclass SecureServerCredentials extends ServerCredentials {\n  private options: SecureServerOptions;\n\n  constructor(constructorOptions: SecureServerOptions, contextOptions: SecureContextOptions) {\n    super(constructorOptions, contextOptions);\n    this.options = {...constructorOptions, ...contextOptions};\n  }\n\n  /**\n   * Checks equality by checking the options that are actually set by\n   * createSsl.\n   * @param other\n   * @returns\n   */\n  _equals(other: ServerCredentials): boolean {\n    if (this === other) {\n      return true;\n    }\n    if (!(other instanceof SecureServerCredentials)) {\n      return false;\n    }\n    // options.ca equality check\n    if (Buffer.isBuffer(this.options.ca) && Buffer.isBuffer(other.options.ca)) {\n      if (!this.options.ca.equals(other.options.ca)) {\n        return false;\n      }\n    } else {\n      if (this.options.ca !== other.options.ca) {\n        return false;\n      }\n    }\n    // options.cert equality check\n    if (Array.isArray(this.options.cert) && Array.isArray(other.options.cert)) {\n      if (this.options.cert.length !== other.options.cert.length) {\n        return false;\n      }\n      for (let i = 0; i < this.options.cert.length; i++) {\n        const thisCert = this.options.cert[i];\n        const otherCert = other.options.cert[i];\n        if (Buffer.isBuffer(thisCert) && Buffer.isBuffer(otherCert)) {\n          if (!thisCert.equals(otherCert)) {\n            return false;\n          }\n        } else {\n          if (thisCert !== otherCert) {\n            return false;\n          }\n        }\n      }\n    } else {\n      if (this.options.cert !== other.options.cert) {\n        return false;\n      }\n    }\n    // options.key equality check\n    if (Array.isArray(this.options.key) && Array.isArray(other.options.key)) {\n      if (this.options.key.length !== other.options.key.length) {\n        return false;\n      }\n      for (let i = 0; i < this.options.key.length; i++) {\n        const thisKey = this.options.key[i];\n        const otherKey = other.options.key[i];\n        if (Buffer.isBuffer(thisKey) && Buffer.isBuffer(otherKey)) {\n          if (!thisKey.equals(otherKey)) {\n            return false;\n          }\n        } else {\n          if (thisKey !== otherKey) {\n            return false;\n          }\n        }\n      }\n    } else {\n      if (this.options.key !== other.options.key) {\n        return false;\n      }\n    }\n    // options.requestCert equality check\n    if (this.options.requestCert !== other.options.requestCert) {\n      return false;\n    }\n    /* ciphers is derived from a value that is constant for the process, so no\n     * equality check is needed. */\n    return true;\n  }\n}\n\nclass CertificateProviderServerCredentials extends ServerCredentials {\n  private latestCaUpdate: CaCertificateUpdate | null = null;\n  private latestIdentityUpdate: IdentityCertificateUpdate | null = null;\n  private caCertificateUpdateListener: CaCertificateUpdateListener = this.handleCaCertificateUpdate.bind(this);\n  private identityCertificateUpdateListener: IdentityCertificateUpdateListener = this.handleIdentityCertitificateUpdate.bind(this);\n  constructor(\n    private identityCertificateProvider: CertificateProvider,\n    private caCertificateProvider: CertificateProvider | null,\n    private requireClientCertificate: boolean\n  ) {\n    super({\n      requestCert: caCertificateProvider !== null,\n      rejectUnauthorized: requireClientCertificate,\n      ciphers: CIPHER_SUITES\n    });\n  }\n  _addWatcher(watcher: SecureContextWatcher): void {\n    if (this.getWatcherCount() === 0) {\n      this.caCertificateProvider?.addCaCertificateListener(this.caCertificateUpdateListener);\n      this.identityCertificateProvider.addIdentityCertificateListener(this.identityCertificateUpdateListener);\n    }\n    super._addWatcher(watcher);\n  }\n  _removeWatcher(watcher: SecureContextWatcher): void {\n    super._removeWatcher(watcher);\n    if (this.getWatcherCount() === 0) {\n      this.caCertificateProvider?.removeCaCertificateListener(this.caCertificateUpdateListener);\n      this.identityCertificateProvider.removeIdentityCertificateListener(this.identityCertificateUpdateListener);\n    }\n  }\n  _equals(other: ServerCredentials): boolean {\n    if (this === other) {\n      return true;\n    }\n    if (!(other instanceof CertificateProviderServerCredentials)) {\n      return false;\n    }\n    return (\n      this.caCertificateProvider === other.caCertificateProvider &&\n      this.identityCertificateProvider === other.identityCertificateProvider &&\n      this.requireClientCertificate === other.requireClientCertificate\n    )\n  }\n\n  private calculateSecureContextOptions(): SecureContextOptions | null {\n    if (this.latestIdentityUpdate === null) {\n      return null;\n    }\n    if (this.caCertificateProvider !== null && this.latestCaUpdate === null) {\n      return null;\n    }\n    return {\n      ca: this.latestCaUpdate?.caCertificate,\n      cert: [this.latestIdentityUpdate.certificate],\n      key: [this.latestIdentityUpdate.privateKey],\n    };\n  }\n\n  private finalizeUpdate() {\n    const secureContextOptions = this.calculateSecureContextOptions();\n    this.updateSecureContextOptions(secureContextOptions);\n  }\n\n  private handleCaCertificateUpdate(update: CaCertificateUpdate | null) {\n    this.latestCaUpdate = update;\n    this.finalizeUpdate();\n  }\n\n  private handleIdentityCertitificateUpdate(update: IdentityCertificateUpdate | null) {\n    this.latestIdentityUpdate = update;\n    this.finalizeUpdate();\n  }\n}\n\nexport function createCertificateProviderServerCredentials(\n  caCertificateProvider: CertificateProvider,\n  identityCertificateProvider: CertificateProvider | null,\n  requireClientCertificate: boolean\n) {\n  return new CertificateProviderServerCredentials(\n    caCertificateProvider,\n    identityCertificateProvider,\n    requireClientCertificate);\n}\n\nclass InterceptorServerCredentials extends ServerCredentials {\n  constructor(private readonly childCredentials: ServerCredentials, private readonly interceptors: ServerInterceptor[]) {\n    super({});\n  }\n  _isSecure(): boolean {\n    return this.childCredentials._isSecure();\n  }\n  _equals(other: ServerCredentials): boolean {\n    if (!(other instanceof InterceptorServerCredentials)) {\n      return false;\n    }\n    if (!(this.childCredentials._equals(other.childCredentials))) {\n      return false;\n    }\n    if (this.interceptors.length !== other.interceptors.length) {\n      return false;\n    }\n    for (let i = 0; i < this.interceptors.length; i++) {\n      if (this.interceptors[i] !== other.interceptors[i]) {\n        return false;\n      }\n    }\n    return true;\n  }\n  override _getInterceptors(): ServerInterceptor[] {\n    return this.interceptors;\n  }\n  override _addWatcher(watcher: SecureContextWatcher): void {\n    this.childCredentials._addWatcher(watcher);\n  }\n  override _removeWatcher(watcher: SecureContextWatcher): void {\n    this.childCredentials._removeWatcher(watcher);\n  }\n  override _getConstructorOptions(): SecureServerOptions | null {\n    return this.childCredentials._getConstructorOptions();\n  }\n  override _getSecureContextOptions(): SecureContextOptions | null {\n    return this.childCredentials._getSecureContextOptions();\n  }\n}\n\nexport function createServerCredentialsWithInterceptors(credentials: ServerCredentials, interceptors: ServerInterceptor[]): ServerCredentials {\n  return new InterceptorServerCredentials(credentials, interceptors);\n}\n", "/*\n * Copyright 2022 gRPC authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n */\n\nexport interface Duration {\n  seconds: number;\n  nanos: number;\n}\n\nexport interface DurationMessage {\n  seconds: string;\n  nanos: number;\n}\n\nexport function durationMessageToDuration(message: DurationMessage): Duration {\n  return {\n    seconds: Number.parseInt(message.seconds),\n    nanos: message.nanos\n  };\n}\n\nexport function msToDuration(millis: number): Duration {\n  return {\n    seconds: (millis / 1000) | 0,\n    nanos: ((millis % 1000) * 1_000_000) | 0,\n  };\n}\n\nexport function durationToMs(duration: Duration): number {\n  return (duration.seconds * 1000 + duration.nanos / 1_000_000) | 0;\n}\n\nexport function isDuration(value: any): value is Duration {\n  return typeof value.seconds === 'number' && typeof value.nanos === 'number';\n}\n\nexport function isDurationMessage(value: any): value is DurationMessage {\n  return typeof value.seconds === 'string' && typeof value.nanos === 'number';\n}\n\nconst durationRegex = /^(\\d+)(?:\\.(\\d+))?s$/;\nexport function parseDuration(value: string): Duration | null {\n  const match = value.match(durationRegex);\n  if (!match) {\n    return null;\n  }\n  return {\n    seconds: Number.parseInt(match[1], 10),\n    nanos: match[2] ? Number.parseInt(match[2].padEnd(9, '0'), 10) : 0\n  };\n}\n\nexport function durationToString(duration: Duration): string {\n  if (duration.nanos === 0) {\n    return `${duration.seconds}s`;\n  }\n  let scaleFactor: number;\n  if (duration.nanos % 1_000_000 === 0) {\n    scaleFactor = 1_000_000;\n  } else if (duration.nanos % 1_000 === 0) {\n    scaleFactor = 1_000;\n  } else {\n    scaleFactor = 1;\n  }\n  return `${duration.seconds}.${duration.nanos/scaleFactor}s`;\n}\n", "/*\n * Copyright 2025 gRPC authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n */\n\nimport { OrcaLoadReport, OrcaLoadReport__Output } from \"./generated/xds/data/orca/v3/OrcaLoadReport\";\n\nimport type { loadSync } from '@grpc/proto-loader';\nimport { ProtoGrpcType as OrcaProtoGrpcType } from \"./generated/orca\";\nimport { loadPackageDefinition } from \"./make-client\";\nimport { OpenRcaServiceClient, OpenRcaServiceHandlers } from \"./generated/xds/service/orca/v3/OpenRcaService\";\nimport { durationMessageToDuration, durationToMs, msToDuration } from \"./duration\";\nimport { Server } from \"./server\";\nimport { ChannelCredentials } from \"./channel-credentials\";\nimport { Channel } from \"./channel\";\nimport { OnCallEnded } from \"./picker\";\nimport { DataProducer, Subchannel } from \"./subchannel\";\nimport { BaseSubchannelWrapper, DataWatcher, SubchannelInterface } from \"./subchannel-interface\";\nimport { ClientReadableStream, ServiceError } from \"./call\";\nimport { Status } from \"./constants\";\nimport { BackoffTimeout } from \"./backoff-timeout\";\nimport { ConnectivityState } from \"./connectivity-state\";\n\nconst loadedOrcaProto: OrcaProtoGrpcType | null = null;\nfunction loadOrcaProto(): OrcaProtoGrpcType {\n  if (loadedOrcaProto) {\n    return loadedOrcaProto;\n  }\n  /* The purpose of this complexity is to avoid loading @grpc/proto-loader at\n   * runtime for users who will not use/enable ORCA. */\n  const loaderLoadSync = require('@grpc/proto-loader')\n    .loadSync as typeof loadSync;\n  const loadedProto = loaderLoadSync('xds/service/orca/v3/orca.proto', {\n    keepCase: true,\n    longs: String,\n    enums: String,\n    defaults: true,\n    oneofs: true,\n    includeDirs: [\n      `${__dirname}/../../proto/xds`,\n      `${__dirname}/../../proto/protoc-gen-validate`\n    ],\n  });\n  return loadPackageDefinition(loadedProto) as unknown as OrcaProtoGrpcType;\n}\n\n/**\n * ORCA metrics recorder for a single request\n */\nexport class PerRequestMetricRecorder {\n  private message: OrcaLoadReport = {};\n\n  /**\n   * Records a request cost metric measurement for the call.\n   * @param name\n   * @param value\n   */\n  recordRequestCostMetric(name: string, value: number) {\n    if (!this.message.request_cost) {\n      this.message.request_cost = {};\n    }\n    this.message.request_cost[name] = value;\n  }\n\n  /**\n   * Records a request cost metric measurement for the call.\n   * @param name\n   * @param value\n   */\n  recordUtilizationMetric(name: string, value: number) {\n    if (!this.message.utilization) {\n      this.message.utilization = {};\n    }\n    this.message.utilization[name] = value;\n  }\n\n  /**\n   * Records an opaque named metric measurement for the call.\n   * @param name\n   * @param value\n   */\n  recordNamedMetric(name: string, value: number) {\n    if (!this.message.named_metrics) {\n      this.message.named_metrics = {};\n    }\n    this.message.named_metrics[name] = value;\n  }\n\n  /**\n   * Records the CPU utilization metric measurement for the call.\n   * @param value\n   */\n  recordCPUUtilizationMetric(value: number) {\n    this.message.cpu_utilization = value;\n  }\n\n  /**\n   * Records the memory utilization metric measurement for the call.\n   * @param value\n   */\n  recordMemoryUtilizationMetric(value: number) {\n    this.message.mem_utilization = value;\n  }\n\n  /**\n   * Records the memory utilization metric measurement for the call.\n   * @param value\n   */\n  recordApplicationUtilizationMetric(value: number) {\n    this.message.application_utilization = value;\n  }\n\n  /**\n   * Records the queries per second measurement.\n   * @param value\n   */\n  recordQpsMetric(value: number) {\n    this.message.rps_fractional = value;\n  }\n\n  /**\n   * Records the errors per second measurement.\n   * @param value\n   */\n  recordEpsMetric(value: number) {\n    this.message.eps = value;\n  }\n\n  serialize(): Buffer {\n    const orcaProto = loadOrcaProto();\n    return orcaProto.xds.data.orca.v3.OrcaLoadReport.serialize(this.message);\n  }\n}\n\nconst DEFAULT_REPORT_INTERVAL_MS = 30_000;\n\nexport class ServerMetricRecorder {\n  private message: OrcaLoadReport = {};\n\n  private serviceImplementation: OpenRcaServiceHandlers = {\n    StreamCoreMetrics: call => {\n      const reportInterval = call.request.report_interval ?\n        durationToMs(durationMessageToDuration(call.request.report_interval)) :\n        DEFAULT_REPORT_INTERVAL_MS;\n      const reportTimer = setInterval(() => {\n        call.write(this.message);\n      }, reportInterval);\n      call.on('cancelled', () => {\n        clearInterval(reportTimer);\n      })\n    }\n  }\n\n  putUtilizationMetric(name: string, value: number) {\n    if (!this.message.utilization) {\n      this.message.utilization = {};\n    }\n    this.message.utilization[name] = value;\n  }\n\n  setAllUtilizationMetrics(metrics: {[name: string]: number}) {\n    this.message.utilization = {...metrics};\n  }\n\n  deleteUtilizationMetric(name: string) {\n    delete this.message.utilization?.[name];\n  }\n\n  setCpuUtilizationMetric(value: number) {\n    this.message.cpu_utilization = value;\n  }\n\n  deleteCpuUtilizationMetric() {\n    delete this.message.cpu_utilization;\n  }\n\n  setApplicationUtilizationMetric(value: number) {\n    this.message.application_utilization = value;\n  }\n\n  deleteApplicationUtilizationMetric() {\n    delete this.message.application_utilization;\n  }\n\n  setQpsMetric(value: number) {\n    this.message.rps_fractional = value;\n  }\n\n  deleteQpsMetric() {\n    delete this.message.rps_fractional;\n  }\n\n  setEpsMetric(value: number) {\n    this.message.eps = value;\n  }\n\n  deleteEpsMetric() {\n    delete this.message.eps;\n  }\n\n  addToServer(server: Server) {\n    const serviceDefinition = loadOrcaProto().xds.service.orca.v3.OpenRcaService.service;\n    server.addService(serviceDefinition, this.serviceImplementation);\n  }\n}\n\nexport function createOrcaClient(channel: Channel): OpenRcaServiceClient {\n  const ClientClass = loadOrcaProto().xds.service.orca.v3.OpenRcaService;\n  return new ClientClass('unused', ChannelCredentials.createInsecure(), {channelOverride: channel});\n}\n\nexport type MetricsListener = (loadReport: OrcaLoadReport__Output) => void;\n\nexport const GRPC_METRICS_HEADER = 'endpoint-load-metrics-bin';\nconst PARSED_LOAD_REPORT_KEY = 'grpc_orca_load_report';\n\n/**\n * Create an onCallEnded callback for use in a picker.\n * @param listener The listener to handle metrics, whenever they are provided.\n * @param previousOnCallEnded The previous onCallEnded callback to propagate\n * to, if applicable.\n * @returns\n */\nexport function createMetricsReader(listener: MetricsListener, previousOnCallEnded: OnCallEnded | null): OnCallEnded {\n  return (code, details, metadata) => {\n    let parsedLoadReport = metadata.getOpaque(PARSED_LOAD_REPORT_KEY) as (OrcaLoadReport__Output | undefined);\n    if (parsedLoadReport) {\n      listener(parsedLoadReport);\n    } else {\n      const serializedLoadReport = metadata.get(GRPC_METRICS_HEADER);\n      if (serializedLoadReport.length > 0) {\n        const orcaProto = loadOrcaProto();\n        parsedLoadReport = orcaProto.xds.data.orca.v3.OrcaLoadReport.deserialize(serializedLoadReport[0] as Buffer);\n        listener(parsedLoadReport);\n        metadata.setOpaque(PARSED_LOAD_REPORT_KEY, parsedLoadReport);\n      }\n    }\n    if (previousOnCallEnded) {\n      previousOnCallEnded(code, details, metadata);\n    }\n  }\n}\n\nconst DATA_PRODUCER_KEY = 'orca_oob_metrics';\n\nclass OobMetricsDataWatcher implements DataWatcher {\n  private dataProducer: DataProducer | null = null;\n  constructor(private metricsListener: MetricsListener, private intervalMs: number) {}\n  setSubchannel(subchannel: Subchannel): void {\n    const producer = subchannel.getOrCreateDataProducer(DATA_PRODUCER_KEY, createOobMetricsDataProducer);\n    this.dataProducer = producer;\n    producer.addDataWatcher(this);\n  }\n  destroy(): void {\n    this.dataProducer?.removeDataWatcher(this);\n  }\n  getInterval(): number {\n    return this.intervalMs;\n  }\n  onMetricsUpdate(metrics: OrcaLoadReport__Output) {\n    this.metricsListener(metrics);\n  }\n}\n\nclass OobMetricsDataProducer implements DataProducer {\n  private dataWatchers: Set<OobMetricsDataWatcher> = new Set();\n  private orcaSupported = true;\n  private client: OpenRcaServiceClient;\n  private metricsCall: ClientReadableStream<OrcaLoadReport__Output> | null = null;\n  private currentInterval = Infinity;\n  private backoffTimer = new BackoffTimeout(() => this.updateMetricsSubscription());\n  private subchannelStateListener = () => this.updateMetricsSubscription();\n  constructor(private subchannel: Subchannel) {\n    const channel = subchannel.getChannel();\n    this.client = createOrcaClient(channel);\n    subchannel.addConnectivityStateListener(this.subchannelStateListener);\n  }\n  addDataWatcher(dataWatcher: OobMetricsDataWatcher): void {\n    this.dataWatchers.add(dataWatcher);\n    this.updateMetricsSubscription();\n  }\n  removeDataWatcher(dataWatcher: OobMetricsDataWatcher): void {\n    this.dataWatchers.delete(dataWatcher);\n    if (this.dataWatchers.size === 0) {\n      this.subchannel.removeDataProducer(DATA_PRODUCER_KEY);\n      this.metricsCall?.cancel();\n      this.metricsCall = null;\n      this.client.close();\n      this.subchannel.removeConnectivityStateListener(this.subchannelStateListener);\n    } else {\n      this.updateMetricsSubscription();\n    }\n  }\n  private updateMetricsSubscription() {\n    if (this.dataWatchers.size === 0 || !this.orcaSupported || this.subchannel.getConnectivityState() !== ConnectivityState.READY) {\n      return;\n    }\n    const newInterval = Math.min(...Array.from(this.dataWatchers).map(watcher => watcher.getInterval()));\n    if (!this.metricsCall || newInterval !== this.currentInterval) {\n      this.metricsCall?.cancel();\n      this.currentInterval = newInterval;\n      const metricsCall = this.client.streamCoreMetrics({report_interval: msToDuration(newInterval)});\n      this.metricsCall = metricsCall;\n      metricsCall.on('data', (report: OrcaLoadReport__Output) => {\n        this.dataWatchers.forEach(watcher => {\n          watcher.onMetricsUpdate(report);\n        });\n      });\n      metricsCall.on('error', (error: ServiceError) => {\n        this.metricsCall = null;\n        if (error.code === Status.UNIMPLEMENTED) {\n          this.orcaSupported = false;\n          return;\n        }\n        if (error.code === Status.CANCELLED) {\n          return;\n        }\n        this.backoffTimer.runOnce();\n      });\n    }\n  }\n}\n\nexport class OrcaOobMetricsSubchannelWrapper extends BaseSubchannelWrapper {\n  constructor(child: SubchannelInterface, metricsListener: MetricsListener, intervalMs: number) {\n    super(child);\n    this.addDataWatcher(new OobMetricsDataWatcher(metricsListener, intervalMs));\n  }\n\n  getWrappedSubchannel(): SubchannelInterface {\n    return this.child;\n  }\n}\n\nfunction createOobMetricsDataProducer(subchannel: Subchannel) {\n  return new OobMetricsDataProducer(subchannel);\n}\n", "/*\n * Copyright 2024 gRPC authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n */\n\nimport { PartialStatusObject } from './call-interface';\nimport { ServerMethodDefinition } from './make-client';\nimport { Metadata } from './metadata';\nimport { ChannelOptions } from './channel-options';\nimport { Handler, ServerErrorResponse } from './server-call';\nimport { Deadline } from './deadline';\nimport {\n  DEFAULT_MAX_RECEIVE_MESSAGE_LENGTH,\n  DEFAULT_MAX_SEND_MESSAGE_LENGTH,\n  LogVerbosity,\n  Status,\n} from './constants';\nimport * as http2 from 'http2';\nimport { getErrorMessage } from './error';\nimport * as zlib from 'zlib';\nimport { StreamDecoder } from './stream-decoder';\nimport { CallEventTracker } from './transport';\nimport * as logging from './logging';\nimport { AuthContext } from './auth-context';\nimport { TLSSocket } from 'tls';\nimport { GRPC_METRICS_HEADER, PerRequestMetricRecorder } from './orca';\n\nconst TRACER_NAME = 'server_call';\n\nfunction trace(text: string) {\n  logging.trace(LogVerbosity.DEBUG, TRACER_NAME, text);\n}\n\nexport interface ServerMetadataListener {\n  (metadata: Metadata, next: (metadata: Metadata) => void): void;\n}\n\nexport interface ServerMessageListener {\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  (message: any, next: (message: any) => void): void;\n}\n\nexport interface ServerHalfCloseListener {\n  (next: () => void): void;\n}\n\nexport interface ServerCancelListener {\n  (): void;\n}\n\nexport interface FullServerListener {\n  onReceiveMetadata: ServerMetadataListener;\n  onReceiveMessage: ServerMessageListener;\n  onReceiveHalfClose: ServerHalfCloseListener;\n  onCancel: ServerCancelListener;\n}\n\nexport type ServerListener = Partial<FullServerListener>;\n\nexport class ServerListenerBuilder {\n  private metadata: ServerMetadataListener | undefined = undefined;\n  private message: ServerMessageListener | undefined = undefined;\n  private halfClose: ServerHalfCloseListener | undefined = undefined;\n  private cancel: ServerCancelListener | undefined = undefined;\n\n  withOnReceiveMetadata(onReceiveMetadata: ServerMetadataListener): this {\n    this.metadata = onReceiveMetadata;\n    return this;\n  }\n\n  withOnReceiveMessage(onReceiveMessage: ServerMessageListener): this {\n    this.message = onReceiveMessage;\n    return this;\n  }\n\n  withOnReceiveHalfClose(onReceiveHalfClose: ServerHalfCloseListener): this {\n    this.halfClose = onReceiveHalfClose;\n    return this;\n  }\n\n  withOnCancel(onCancel: ServerCancelListener): this {\n    this.cancel = onCancel;\n    return this;\n  }\n\n  build(): ServerListener {\n    return {\n      onReceiveMetadata: this.metadata,\n      onReceiveMessage: this.message,\n      onReceiveHalfClose: this.halfClose,\n      onCancel: this.cancel,\n    };\n  }\n}\n\nexport interface InterceptingServerListener {\n  onReceiveMetadata(metadata: Metadata): void;\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  onReceiveMessage(message: any): void;\n  onReceiveHalfClose(): void;\n  onCancel(): void;\n}\n\nexport function isInterceptingServerListener(\n  listener: ServerListener | InterceptingServerListener\n): listener is InterceptingServerListener {\n  return (\n    listener.onReceiveMetadata !== undefined &&\n    listener.onReceiveMetadata.length === 1\n  );\n}\n\nclass InterceptingServerListenerImpl implements InterceptingServerListener {\n  /**\n   * Once the call is cancelled, ignore all other events.\n   */\n  private cancelled = false;\n  private processingMetadata = false;\n  private hasPendingMessage = false;\n  private pendingMessage: any = null;\n  private processingMessage = false;\n  private hasPendingHalfClose = false;\n\n  constructor(\n    private listener: FullServerListener,\n    private nextListener: InterceptingServerListener\n  ) {}\n\n  private processPendingMessage() {\n    if (this.hasPendingMessage) {\n      this.nextListener.onReceiveMessage(this.pendingMessage);\n      this.pendingMessage = null;\n      this.hasPendingMessage = false;\n    }\n  }\n\n  private processPendingHalfClose() {\n    if (this.hasPendingHalfClose) {\n      this.nextListener.onReceiveHalfClose();\n      this.hasPendingHalfClose = false;\n    }\n  }\n\n  onReceiveMetadata(metadata: Metadata): void {\n    if (this.cancelled) {\n      return;\n    }\n    this.processingMetadata = true;\n    this.listener.onReceiveMetadata(metadata, interceptedMetadata => {\n      this.processingMetadata = false;\n      if (this.cancelled) {\n        return;\n      }\n      this.nextListener.onReceiveMetadata(interceptedMetadata);\n      this.processPendingMessage();\n      this.processPendingHalfClose();\n    });\n  }\n  onReceiveMessage(message: any): void {\n    if (this.cancelled) {\n      return;\n    }\n    this.processingMessage = true;\n    this.listener.onReceiveMessage(message, msg => {\n      this.processingMessage = false;\n      if (this.cancelled) {\n        return;\n      }\n      if (this.processingMetadata) {\n        this.pendingMessage = msg;\n        this.hasPendingMessage = true;\n      } else {\n        this.nextListener.onReceiveMessage(msg);\n        this.processPendingHalfClose();\n      }\n    });\n  }\n  onReceiveHalfClose(): void {\n    if (this.cancelled) {\n      return;\n    }\n    this.listener.onReceiveHalfClose(() => {\n      if (this.cancelled) {\n        return;\n      }\n      if (this.processingMetadata || this.processingMessage) {\n        this.hasPendingHalfClose = true;\n      } else {\n        this.nextListener.onReceiveHalfClose();\n      }\n    });\n  }\n  onCancel(): void {\n    this.cancelled = true;\n    this.listener.onCancel();\n    this.nextListener.onCancel();\n  }\n}\n\nexport interface StartResponder {\n  (next: (listener?: ServerListener) => void): void;\n}\n\nexport interface MetadataResponder {\n  (metadata: Metadata, next: (metadata: Metadata) => void): void;\n}\n\nexport interface MessageResponder {\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  (message: any, next: (message: any) => void): void;\n}\n\nexport interface StatusResponder {\n  (\n    status: PartialStatusObject,\n    next: (status: PartialStatusObject) => void\n  ): void;\n}\n\nexport interface FullResponder {\n  start: StartResponder;\n  sendMetadata: MetadataResponder;\n  sendMessage: MessageResponder;\n  sendStatus: StatusResponder;\n}\n\nexport type Responder = Partial<FullResponder>;\n\nexport class ResponderBuilder {\n  private start: StartResponder | undefined = undefined;\n  private metadata: MetadataResponder | undefined = undefined;\n  private message: MessageResponder | undefined = undefined;\n  private status: StatusResponder | undefined = undefined;\n\n  withStart(start: StartResponder): this {\n    this.start = start;\n    return this;\n  }\n\n  withSendMetadata(sendMetadata: MetadataResponder): this {\n    this.metadata = sendMetadata;\n    return this;\n  }\n\n  withSendMessage(sendMessage: MessageResponder): this {\n    this.message = sendMessage;\n    return this;\n  }\n\n  withSendStatus(sendStatus: StatusResponder): this {\n    this.status = sendStatus;\n    return this;\n  }\n\n  build(): Responder {\n    return {\n      start: this.start,\n      sendMetadata: this.metadata,\n      sendMessage: this.message,\n      sendStatus: this.status,\n    };\n  }\n}\n\nconst defaultServerListener: FullServerListener = {\n  onReceiveMetadata: (metadata, next) => {\n    next(metadata);\n  },\n  onReceiveMessage: (message, next) => {\n    next(message);\n  },\n  onReceiveHalfClose: next => {\n    next();\n  },\n  onCancel: () => {},\n};\n\nconst defaultResponder: FullResponder = {\n  start: next => {\n    next();\n  },\n  sendMetadata: (metadata, next) => {\n    next(metadata);\n  },\n  sendMessage: (message, next) => {\n    next(message);\n  },\n  sendStatus: (status, next) => {\n    next(status);\n  },\n};\n\nexport interface ConnectionInfo {\n  localAddress?: string | undefined;\n  localPort?: number | undefined;\n  remoteAddress?: string | undefined;\n  remotePort?: number | undefined;\n}\n\nexport interface ServerInterceptingCallInterface {\n  /**\n   * Register the listener to handle inbound events.\n   */\n  start(listener: InterceptingServerListener): void;\n  /**\n   * Send response metadata.\n   */\n  sendMetadata(metadata: Metadata): void;\n  /**\n   * Send a response message.\n   */\n  sendMessage(message: any, callback: () => void): void;\n  /**\n   * End the call by sending this status.\n   */\n  sendStatus(status: PartialStatusObject): void;\n  /**\n   * Start a single read, eventually triggering either listener.onReceiveMessage or listener.onReceiveHalfClose.\n   */\n  startRead(): void;\n  /**\n   * Return the peer address of the client making the request, if known, or \"unknown\" otherwise\n   */\n  getPeer(): string;\n  /**\n   * Return the call deadline set by the client. The value is Infinity if there is no deadline.\n   */\n  getDeadline(): Deadline;\n  /**\n   * Return the host requested by the client in the \":authority\" header.\n   */\n  getHost(): string;\n  /**\n   * Return the auth context of the connection the call is associated with.\n   */\n  getAuthContext(): AuthContext;\n  /**\n   * Return information about the connection used to make the call.\n   */\n  getConnectionInfo(): ConnectionInfo;\n  /**\n   * Get the metrics recorder for this call. Metrics will not be sent unless\n   * the server was constructed with the `grpc.server_call_metric_recording`\n   * option.\n   */\n  getMetricsRecorder(): PerRequestMetricRecorder;\n}\n\nexport class ServerInterceptingCall implements ServerInterceptingCallInterface {\n  private responder: FullResponder;\n  private processingMetadata = false;\n  private sentMetadata = false;\n  private processingMessage = false;\n  private pendingMessage: any = null;\n  private pendingMessageCallback: (() => void) | null = null;\n  private pendingStatus: PartialStatusObject | null = null;\n  constructor(\n    private nextCall: ServerInterceptingCallInterface,\n    responder?: Responder\n  ) {\n    this.responder = {\n      start: responder?.start ?? defaultResponder.start,\n      sendMetadata: responder?.sendMetadata ?? defaultResponder.sendMetadata,\n      sendMessage: responder?.sendMessage ?? defaultResponder.sendMessage,\n      sendStatus: responder?.sendStatus ?? defaultResponder.sendStatus,\n    };\n  }\n\n  private processPendingMessage() {\n    if (this.pendingMessageCallback) {\n      this.nextCall.sendMessage(\n        this.pendingMessage,\n        this.pendingMessageCallback\n      );\n      this.pendingMessage = null;\n      this.pendingMessageCallback = null;\n    }\n  }\n\n  private processPendingStatus() {\n    if (this.pendingStatus) {\n      this.nextCall.sendStatus(this.pendingStatus);\n      this.pendingStatus = null;\n    }\n  }\n\n  start(listener: InterceptingServerListener): void {\n    this.responder.start(interceptedListener => {\n      const fullInterceptedListener: FullServerListener = {\n        onReceiveMetadata:\n          interceptedListener?.onReceiveMetadata ??\n          defaultServerListener.onReceiveMetadata,\n        onReceiveMessage:\n          interceptedListener?.onReceiveMessage ??\n          defaultServerListener.onReceiveMessage,\n        onReceiveHalfClose:\n          interceptedListener?.onReceiveHalfClose ??\n          defaultServerListener.onReceiveHalfClose,\n        onCancel:\n          interceptedListener?.onCancel ?? defaultServerListener.onCancel,\n      };\n      const finalInterceptingListener = new InterceptingServerListenerImpl(\n        fullInterceptedListener,\n        listener\n      );\n      this.nextCall.start(finalInterceptingListener);\n    });\n  }\n  sendMetadata(metadata: Metadata): void {\n    this.processingMetadata = true;\n    this.sentMetadata = true;\n    this.responder.sendMetadata(metadata, interceptedMetadata => {\n      this.processingMetadata = false;\n      this.nextCall.sendMetadata(interceptedMetadata);\n      this.processPendingMessage();\n      this.processPendingStatus();\n    });\n  }\n  sendMessage(message: any, callback: () => void): void {\n    this.processingMessage = true;\n    if (!this.sentMetadata) {\n      this.sendMetadata(new Metadata());\n    }\n    this.responder.sendMessage(message, interceptedMessage => {\n      this.processingMessage = false;\n      if (this.processingMetadata) {\n        this.pendingMessage = interceptedMessage;\n        this.pendingMessageCallback = callback;\n      } else {\n        this.nextCall.sendMessage(interceptedMessage, callback);\n      }\n    });\n  }\n  sendStatus(status: PartialStatusObject): void {\n    this.responder.sendStatus(status, interceptedStatus => {\n      if (this.processingMetadata || this.processingMessage) {\n        this.pendingStatus = interceptedStatus;\n      } else {\n        this.nextCall.sendStatus(interceptedStatus);\n      }\n    });\n  }\n  startRead(): void {\n    this.nextCall.startRead();\n  }\n  getPeer(): string {\n    return this.nextCall.getPeer();\n  }\n  getDeadline(): Deadline {\n    return this.nextCall.getDeadline();\n  }\n  getHost(): string {\n    return this.nextCall.getHost();\n  }\n  getAuthContext(): AuthContext {\n    return this.nextCall.getAuthContext();\n  }\n  getConnectionInfo(): ConnectionInfo {\n    return this.nextCall.getConnectionInfo();\n  }\n  getMetricsRecorder(): PerRequestMetricRecorder {\n    return this.nextCall.getMetricsRecorder();\n  }\n}\n\nexport interface ServerInterceptor {\n  (\n    methodDescriptor: ServerMethodDefinition<any, any>,\n    call: ServerInterceptingCallInterface\n  ): ServerInterceptingCall;\n}\n\ninterface DeadlineUnitIndexSignature {\n  [name: string]: number;\n}\n\nconst GRPC_ACCEPT_ENCODING_HEADER = 'grpc-accept-encoding';\nconst GRPC_ENCODING_HEADER = 'grpc-encoding';\nconst GRPC_MESSAGE_HEADER = 'grpc-message';\nconst GRPC_STATUS_HEADER = 'grpc-status';\nconst GRPC_TIMEOUT_HEADER = 'grpc-timeout';\nconst DEADLINE_REGEX = /(\\d{1,8})\\s*([HMSmun])/;\nconst deadlineUnitsToMs: DeadlineUnitIndexSignature = {\n  H: 3600000,\n  M: 60000,\n  S: 1000,\n  m: 1,\n  u: 0.001,\n  n: 0.000001,\n};\n\nconst defaultCompressionHeaders = {\n  // TODO(cjihrig): Remove these encoding headers from the default response\n  // once compression is integrated.\n  [GRPC_ACCEPT_ENCODING_HEADER]: 'identity,deflate,gzip',\n  [GRPC_ENCODING_HEADER]: 'identity',\n};\nconst defaultResponseHeaders = {\n  [http2.constants.HTTP2_HEADER_STATUS]: http2.constants.HTTP_STATUS_OK,\n  [http2.constants.HTTP2_HEADER_CONTENT_TYPE]: 'application/grpc+proto',\n};\nconst defaultResponseOptions = {\n  waitForTrailers: true,\n} as http2.ServerStreamResponseOptions;\n\ntype ReadQueueEntryType = 'COMPRESSED' | 'READABLE' | 'HALF_CLOSE';\n\ninterface ReadQueueEntry {\n  type: ReadQueueEntryType;\n  compressedMessage: Buffer | null;\n  parsedMessage: any;\n}\n\nexport class BaseServerInterceptingCall\n  implements ServerInterceptingCallInterface\n{\n  private listener: InterceptingServerListener | null = null;\n  private metadata: Metadata;\n  private deadlineTimer: NodeJS.Timeout | null = null;\n  private deadline: Deadline = Infinity;\n  private maxSendMessageSize: number = DEFAULT_MAX_SEND_MESSAGE_LENGTH;\n  private maxReceiveMessageSize: number = DEFAULT_MAX_RECEIVE_MESSAGE_LENGTH;\n  private cancelled = false;\n  private metadataSent = false;\n  private wantTrailers = false;\n  private cancelNotified = false;\n  private incomingEncoding = 'identity';\n  private decoder: StreamDecoder;\n  private readQueue: ReadQueueEntry[] = [];\n  private isReadPending = false;\n  private receivedHalfClose = false;\n  private streamEnded = false;\n  private host: string;\n  private connectionInfo: ConnectionInfo;\n  private metricsRecorder = new PerRequestMetricRecorder();\n  private shouldSendMetrics: boolean;\n\n  constructor(\n    private readonly stream: http2.ServerHttp2Stream,\n    headers: http2.IncomingHttpHeaders,\n    private readonly callEventTracker: CallEventTracker | null,\n    private readonly handler: Handler<any, any>,\n    options: ChannelOptions\n  ) {\n    this.stream.once('error', (err: ServerErrorResponse) => {\n      /* We need an error handler to avoid uncaught error event exceptions, but\n       * there is nothing we can reasonably do here. Any error event should\n       * have a corresponding close event, which handles emitting the cancelled\n       * event. And the stream is now in a bad state, so we can't reasonably\n       * expect to be able to send an error over it. */\n    });\n\n    this.stream.once('close', () => {\n      trace(\n        'Request to method ' +\n          this.handler?.path +\n          ' stream closed with rstCode ' +\n          this.stream.rstCode\n      );\n\n      if (this.callEventTracker && !this.streamEnded) {\n        this.streamEnded = true;\n        this.callEventTracker.onStreamEnd(false);\n        this.callEventTracker.onCallEnd({\n          code: Status.CANCELLED,\n          details: 'Stream closed before sending status',\n          metadata: null,\n        });\n      }\n\n      this.notifyOnCancel();\n    });\n\n    this.stream.on('data', (data: Buffer) => {\n      this.handleDataFrame(data);\n    });\n    this.stream.pause();\n\n    this.stream.on('end', () => {\n      this.handleEndEvent();\n    });\n\n    if ('grpc.max_send_message_length' in options) {\n      this.maxSendMessageSize = options['grpc.max_send_message_length']!;\n    }\n    if ('grpc.max_receive_message_length' in options) {\n      this.maxReceiveMessageSize = options['grpc.max_receive_message_length']!;\n    }\n\n    this.host = headers[':authority'] ?? headers.host!;\n    this.decoder = new StreamDecoder(this.maxReceiveMessageSize);\n\n    const metadata = Metadata.fromHttp2Headers(headers);\n\n    if (logging.isTracerEnabled(TRACER_NAME)) {\n      trace(\n        'Request to ' +\n          this.handler.path +\n          ' received headers ' +\n          JSON.stringify(metadata.toJSON())\n      );\n    }\n\n    const timeoutHeader = metadata.get(GRPC_TIMEOUT_HEADER);\n\n    if (timeoutHeader.length > 0) {\n      this.handleTimeoutHeader(timeoutHeader[0] as string);\n    }\n\n    const encodingHeader = metadata.get(GRPC_ENCODING_HEADER);\n\n    if (encodingHeader.length > 0) {\n      this.incomingEncoding = encodingHeader[0] as string;\n    }\n\n    // Remove several headers that should not be propagated to the application\n    metadata.remove(GRPC_TIMEOUT_HEADER);\n    metadata.remove(GRPC_ENCODING_HEADER);\n    metadata.remove(GRPC_ACCEPT_ENCODING_HEADER);\n    metadata.remove(http2.constants.HTTP2_HEADER_ACCEPT_ENCODING);\n    metadata.remove(http2.constants.HTTP2_HEADER_TE);\n    metadata.remove(http2.constants.HTTP2_HEADER_CONTENT_TYPE);\n    this.metadata = metadata;\n\n    const socket = stream.session?.socket;\n    this.connectionInfo = {\n      localAddress: socket?.localAddress,\n      localPort: socket?.localPort,\n      remoteAddress: socket?.remoteAddress,\n      remotePort: socket?.remotePort\n    };\n    this.shouldSendMetrics = !!options['grpc.server_call_metric_recording'];\n  }\n\n  private handleTimeoutHeader(timeoutHeader: string) {\n    const match = timeoutHeader.toString().match(DEADLINE_REGEX);\n\n    if (match === null) {\n      const status: PartialStatusObject = {\n        code: Status.INTERNAL,\n        details: `Invalid ${GRPC_TIMEOUT_HEADER} value \"${timeoutHeader}\"`,\n        metadata: null,\n      };\n      // Wait for the constructor to complete before sending the error.\n      process.nextTick(() => {\n        this.sendStatus(status);\n      });\n      return;\n    }\n\n    const timeout = (+match[1] * deadlineUnitsToMs[match[2]]) | 0;\n\n    const now = new Date();\n    this.deadline = now.setMilliseconds(now.getMilliseconds() + timeout);\n    this.deadlineTimer = setTimeout(() => {\n      const status: PartialStatusObject = {\n        code: Status.DEADLINE_EXCEEDED,\n        details: 'Deadline exceeded',\n        metadata: null,\n      };\n      this.sendStatus(status);\n    }, timeout);\n  }\n\n  private checkCancelled(): boolean {\n    /* In some cases the stream can become destroyed before the close event\n     * fires. That creates a race condition that this check works around */\n    if (!this.cancelled && (this.stream.destroyed || this.stream.closed)) {\n      this.notifyOnCancel();\n      this.cancelled = true;\n    }\n    return this.cancelled;\n  }\n  private notifyOnCancel() {\n    if (this.cancelNotified) {\n      return;\n    }\n    this.cancelNotified = true;\n    this.cancelled = true;\n    process.nextTick(() => {\n      this.listener?.onCancel();\n    });\n    if (this.deadlineTimer) {\n      clearTimeout(this.deadlineTimer);\n    }\n    // Flush incoming data frames\n    this.stream.resume();\n  }\n\n  /**\n   * A server handler can start sending messages without explicitly sending\n   * metadata. In that case, we need to send headers before sending any\n   * messages. This function does that if necessary.\n   */\n  private maybeSendMetadata() {\n    if (!this.metadataSent) {\n      this.sendMetadata(new Metadata());\n    }\n  }\n\n  /**\n   * Serialize a message to a length-delimited byte string.\n   * @param value\n   * @returns\n   */\n  private serializeMessage(value: any) {\n    const messageBuffer = this.handler.serialize(value);\n    const byteLength = messageBuffer.byteLength;\n    const output = Buffer.allocUnsafe(byteLength + 5);\n    /* Note: response compression is currently not supported, so this\n     * compressed bit is always 0. */\n    output.writeUInt8(0, 0);\n    output.writeUInt32BE(byteLength, 1);\n    messageBuffer.copy(output, 5);\n    return output;\n  }\n\n  private decompressMessage(\n    message: Buffer,\n    encoding: string\n  ): Buffer | Promise<Buffer> {\n    const messageContents = message.subarray(5);\n    if (encoding === 'identity') {\n      return messageContents;\n    } else if (encoding === 'deflate' || encoding === 'gzip') {\n      let decompresser: zlib.Gunzip | zlib.Deflate;\n      if (encoding === 'deflate') {\n        decompresser = zlib.createInflate();\n      } else {\n        decompresser = zlib.createGunzip();\n      }\n      return new Promise((resolve, reject) => {\n        let totalLength = 0\n        const messageParts: Buffer[] = [];\n        decompresser.on('data', (chunk: Buffer) => {\n          messageParts.push(chunk);\n          totalLength += chunk.byteLength;\n          if (this.maxReceiveMessageSize !== -1 && totalLength > this.maxReceiveMessageSize) {\n            decompresser.destroy();\n            reject({\n              code: Status.RESOURCE_EXHAUSTED,\n              details: `Received message that decompresses to a size larger than ${this.maxReceiveMessageSize}`\n            });\n          }\n        });\n        decompresser.on('end', () => {\n          resolve(Buffer.concat(messageParts));\n        });\n        decompresser.write(messageContents);\n        decompresser.end();\n      });\n    } else {\n      return Promise.reject({\n        code: Status.UNIMPLEMENTED,\n        details: `Received message compressed with unsupported encoding \"${encoding}\"`,\n      });\n    }\n  }\n\n  private async decompressAndMaybePush(queueEntry: ReadQueueEntry) {\n    if (queueEntry.type !== 'COMPRESSED') {\n      throw new Error(`Invalid queue entry type: ${queueEntry.type}`);\n    }\n\n    const compressed = queueEntry.compressedMessage!.readUInt8(0) === 1;\n    const compressedMessageEncoding = compressed\n      ? this.incomingEncoding\n      : 'identity';\n    let decompressedMessage: Buffer;\n    try {\n      decompressedMessage = await this.decompressMessage(\n        queueEntry.compressedMessage!,\n        compressedMessageEncoding\n      );\n    } catch (err) {\n      this.sendStatus(err as PartialStatusObject);\n      return;\n    }\n    try {\n      queueEntry.parsedMessage = this.handler.deserialize(decompressedMessage);\n    } catch (err) {\n      this.sendStatus({\n        code: Status.INTERNAL,\n        details: `Error deserializing request: ${(err as Error).message}`,\n      });\n      return;\n    }\n    queueEntry.type = 'READABLE';\n    this.maybePushNextMessage();\n  }\n\n  private maybePushNextMessage() {\n    if (\n      this.listener &&\n      this.isReadPending &&\n      this.readQueue.length > 0 &&\n      this.readQueue[0].type !== 'COMPRESSED'\n    ) {\n      this.isReadPending = false;\n      const nextQueueEntry = this.readQueue.shift()!;\n      if (nextQueueEntry.type === 'READABLE') {\n        this.listener.onReceiveMessage(nextQueueEntry.parsedMessage);\n      } else {\n        // nextQueueEntry.type === 'HALF_CLOSE'\n        this.listener.onReceiveHalfClose();\n      }\n    }\n  }\n\n  private handleDataFrame(data: Buffer) {\n    if (this.checkCancelled()) {\n      return;\n    }\n    trace(\n      'Request to ' +\n        this.handler.path +\n        ' received data frame of size ' +\n        data.length\n    );\n    let rawMessages: Buffer[];\n    try {\n      rawMessages = this.decoder.write(data);\n    } catch (e) {\n      this.sendStatus({ code: Status.RESOURCE_EXHAUSTED, details: (e as Error).message });\n      return;\n    }\n\n    for (const messageBytes of rawMessages) {\n      this.stream.pause();\n      const queueEntry: ReadQueueEntry = {\n        type: 'COMPRESSED',\n        compressedMessage: messageBytes,\n        parsedMessage: null,\n      };\n      this.readQueue.push(queueEntry);\n      this.decompressAndMaybePush(queueEntry);\n      this.callEventTracker?.addMessageReceived();\n    }\n  }\n  private handleEndEvent() {\n    this.readQueue.push({\n      type: 'HALF_CLOSE',\n      compressedMessage: null,\n      parsedMessage: null,\n    });\n    this.receivedHalfClose = true;\n    this.maybePushNextMessage();\n  }\n  start(listener: InterceptingServerListener): void {\n    trace('Request to ' + this.handler.path + ' start called');\n    if (this.checkCancelled()) {\n      return;\n    }\n    this.listener = listener;\n    listener.onReceiveMetadata(this.metadata);\n  }\n  sendMetadata(metadata: Metadata): void {\n    if (this.checkCancelled()) {\n      return;\n    }\n\n    if (this.metadataSent) {\n      return;\n    }\n\n    this.metadataSent = true;\n    const custom = metadata ? metadata.toHttp2Headers() : null;\n    const headers = {\n      ...defaultResponseHeaders,\n      ...defaultCompressionHeaders,\n      ...custom,\n    };\n    this.stream.respond(headers, defaultResponseOptions);\n  }\n  sendMessage(message: any, callback: () => void): void {\n    if (this.checkCancelled()) {\n      return;\n    }\n    let response: Buffer;\n    try {\n      response = this.serializeMessage(message);\n    } catch (e) {\n      this.sendStatus({\n        code: Status.INTERNAL,\n        details: `Error serializing response: ${getErrorMessage(e)}`,\n        metadata: null,\n      });\n      return;\n    }\n\n    if (\n      this.maxSendMessageSize !== -1 &&\n      response.length - 5 > this.maxSendMessageSize\n    ) {\n      this.sendStatus({\n        code: Status.RESOURCE_EXHAUSTED,\n        details: `Sent message larger than max (${response.length} vs. ${this.maxSendMessageSize})`,\n        metadata: null,\n      });\n      return;\n    }\n    this.maybeSendMetadata();\n    trace(\n      'Request to ' +\n        this.handler.path +\n        ' sent data frame of size ' +\n        response.length\n    );\n    this.stream.write(response, error => {\n      if (error) {\n        this.sendStatus({\n          code: Status.INTERNAL,\n          details: `Error writing message: ${getErrorMessage(error)}`,\n          metadata: null,\n        });\n        return;\n      }\n      this.callEventTracker?.addMessageSent();\n      callback();\n    });\n  }\n  sendStatus(status: PartialStatusObject): void {\n    if (this.checkCancelled()) {\n      return;\n    }\n\n    trace(\n      'Request to method ' +\n        this.handler?.path +\n        ' ended with status code: ' +\n        Status[status.code] +\n        ' details: ' +\n        status.details\n    );\n\n    const statusMetadata = status.metadata?.clone() ?? new Metadata();\n    if (this.shouldSendMetrics) {\n      statusMetadata.set(GRPC_METRICS_HEADER, this.metricsRecorder.serialize());\n    }\n\n    if (this.metadataSent) {\n      if (!this.wantTrailers) {\n        this.wantTrailers = true;\n        this.stream.once('wantTrailers', () => {\n          if (this.callEventTracker && !this.streamEnded) {\n            this.streamEnded = true;\n            this.callEventTracker.onStreamEnd(true);\n            this.callEventTracker.onCallEnd(status);\n          }\n          const trailersToSend: http2.OutgoingHttpHeaders = {\n            [GRPC_STATUS_HEADER]: status.code,\n            [GRPC_MESSAGE_HEADER]: encodeURI(status.details),\n            ...statusMetadata.toHttp2Headers(),\n          };\n\n          this.stream.sendTrailers(trailersToSend);\n          this.notifyOnCancel();\n        });\n        this.stream.end();\n      } else {\n        this.notifyOnCancel();\n      }\n    } else {\n      if (this.callEventTracker && !this.streamEnded) {\n        this.streamEnded = true;\n        this.callEventTracker.onStreamEnd(true);\n        this.callEventTracker.onCallEnd(status);\n      }\n      // Trailers-only response\n      const trailersToSend: http2.OutgoingHttpHeaders = {\n        [GRPC_STATUS_HEADER]: status.code,\n        [GRPC_MESSAGE_HEADER]: encodeURI(status.details),\n        ...defaultResponseHeaders,\n        ...statusMetadata.toHttp2Headers(),\n      };\n      this.stream.respond(trailersToSend, { endStream: true });\n      this.notifyOnCancel();\n    }\n  }\n  startRead(): void {\n    trace('Request to ' + this.handler.path + ' startRead called');\n    if (this.checkCancelled()) {\n      return;\n    }\n    this.isReadPending = true;\n    if (this.readQueue.length === 0) {\n      if (!this.receivedHalfClose) {\n        this.stream.resume();\n      }\n    } else {\n      this.maybePushNextMessage();\n    }\n  }\n  getPeer(): string {\n    const socket = this.stream.session?.socket;\n    if (socket?.remoteAddress) {\n      if (socket.remotePort) {\n        return `${socket.remoteAddress}:${socket.remotePort}`;\n      } else {\n        return socket.remoteAddress;\n      }\n    } else {\n      return 'unknown';\n    }\n  }\n  getDeadline(): Deadline {\n    return this.deadline;\n  }\n  getHost(): string {\n    return this.host;\n  }\n  getAuthContext(): AuthContext {\n    if (this.stream.session?.socket instanceof TLSSocket) {\n      const peerCertificate = this.stream.session.socket.getPeerCertificate();\n      return {\n        transportSecurityType: 'ssl',\n        sslPeerCertificate: peerCertificate.raw ? peerCertificate : undefined\n      }\n    } else {\n      return {};\n    }\n  }\n  getConnectionInfo(): ConnectionInfo {\n    return this.connectionInfo;\n  }\n  getMetricsRecorder(): PerRequestMetricRecorder {\n    return this.metricsRecorder;\n  }\n}\n\nexport function getServerInterceptingCall(\n  interceptors: ServerInterceptor[],\n  stream: http2.ServerHttp2Stream,\n  headers: http2.IncomingHttpHeaders,\n  callEventTracker: CallEventTracker | null,\n  handler: Handler<any, any>,\n  options: ChannelOptions\n) {\n  const methodDefinition: ServerMethodDefinition<any, any> = {\n    path: handler.path,\n    requestStream: handler.type === 'clientStream' || handler.type === 'bidi',\n    responseStream: handler.type === 'serverStream' || handler.type === 'bidi',\n    requestDeserialize: handler.deserialize,\n    responseSerialize: handler.serialize,\n  };\n  const baseCall = new BaseServerInterceptingCall(\n    stream,\n    headers,\n    callEventTracker,\n    handler,\n    options\n  );\n  return interceptors.reduce(\n    (call: ServerInterceptingCallInterface, interceptor: ServerInterceptor) => {\n      return interceptor(methodDefinition, call);\n    },\n    baseCall\n  );\n}\n", "/*\n * Copyright 2019 gRPC authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n */\n\nimport * as http2 from 'http2';\nimport * as util from 'util';\n\nimport { ServiceError } from './call';\nimport { Status, LogVerbosity } from './constants';\nimport { Deserialize, Serialize, ServiceDefinition } from './make-client';\nimport { Metadata } from './metadata';\nimport {\n  BidiStreamingHandler,\n  ClientStreamingHandler,\n  HandleCall,\n  Handler,\n  HandlerType,\n  sendUnaryData,\n  ServerDuplexStream,\n  ServerDuplexStreamImpl,\n  ServerReadableStream,\n  ServerStreamingHandler,\n  ServerUnaryCall,\n  ServerWritableStream,\n  ServerWritableStreamImpl,\n  UnaryHandler,\n  ServerErrorResponse,\n  ServerStatusResponse,\n  serverErrorToStatus,\n} from './server-call';\nimport { SecureContextWatcher, ServerCredentials } from './server-credentials';\nimport { ChannelOptions } from './channel-options';\nimport {\n  createResolver,\n  ResolverListener,\n  mapUriDefaultScheme,\n} from './resolver';\nimport * as logging from './logging';\nimport {\n  SubchannelAddress,\n  isTcpSubchannelAddress,\n  subchannelAddressToString,\n  stringToSubchannelAddress,\n} from './subchannel-address';\nimport {\n  GrpcUri,\n  combineHostPort,\n  parseUri,\n  splitHostPort,\n  uriToString,\n} from './uri-parser';\nimport {\n  ChannelzCallTracker,\n  ChannelzCallTrackerStub,\n  ChannelzChildrenTracker,\n  ChannelzChildrenTrackerStub,\n  ChannelzTrace,\n  ChannelzTraceStub,\n  registerChannelzServer,\n  registerChannelzSocket,\n  ServerInfo,\n  ServerRef,\n  SocketInfo,\n  SocketRef,\n  TlsInfo,\n  unregisterChannelzRef,\n} from './channelz';\nimport { CipherNameAndProtocol, TLSSocket } from 'tls';\nimport {\n  ServerInterceptingCallInterface,\n  ServerInterceptor,\n  getServerInterceptingCall,\n} from './server-interceptors';\nimport { PartialStatusObject } from './call-interface';\nimport { CallEventTracker } from './transport';\nimport { Socket } from 'net';\nimport { Duplex } from 'stream';\n\nconst UNLIMITED_CONNECTION_AGE_MS = ~(1 << 31);\nconst KEEPALIVE_MAX_TIME_MS = ~(1 << 31);\nconst KEEPALIVE_TIMEOUT_MS = 20000;\nconst MAX_CONNECTION_IDLE_MS = ~(1 << 31);\n\nconst { HTTP2_HEADER_PATH } = http2.constants;\n\nconst TRACER_NAME = 'server';\nconst kMaxAge = Buffer.from('max_age');\n\nfunction serverCallTrace(text: string) {\n  logging.trace(LogVerbosity.DEBUG, 'server_call', text);\n}\n\ntype AnyHttp2Server = http2.Http2Server | http2.Http2SecureServer;\n\ninterface BindResult {\n  port: number;\n  count: number;\n  errors: string[];\n}\n\ninterface SingleAddressBindResult {\n  port: number;\n  error?: string;\n}\n\nfunction noop(): void {}\n\n/**\n * Decorator to wrap a class method with util.deprecate\n * @param message The message to output if the deprecated method is called\n * @returns\n */\nfunction deprecate(message: string) {\n  return function <This, Args extends any[], Return>(\n    target: (this: This, ...args: Args) => Return,\n    context: ClassMethodDecoratorContext<\n      This,\n      (this: This, ...args: Args) => Return\n    >\n  ) {\n    return util.deprecate(target, message);\n  };\n}\n\nfunction getUnimplementedStatusResponse(\n  methodName: string\n): PartialStatusObject {\n  return {\n    code: Status.UNIMPLEMENTED,\n    details: `The server does not implement the method ${methodName}`,\n  };\n}\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\ntype UntypedUnaryHandler = UnaryHandler<any, any>;\ntype UntypedClientStreamingHandler = ClientStreamingHandler<any, any>;\ntype UntypedServerStreamingHandler = ServerStreamingHandler<any, any>;\ntype UntypedBidiStreamingHandler = BidiStreamingHandler<any, any>;\nexport type UntypedHandleCall = HandleCall<any, any>;\ntype UntypedHandler = Handler<any, any>;\nexport interface UntypedServiceImplementation {\n  [name: string]: UntypedHandleCall;\n}\n\nfunction getDefaultHandler(handlerType: HandlerType, methodName: string) {\n  const unimplementedStatusResponse =\n    getUnimplementedStatusResponse(methodName);\n  switch (handlerType) {\n    case 'unary':\n      return (\n        call: ServerUnaryCall<any, any>,\n        callback: sendUnaryData<any>\n      ) => {\n        callback(unimplementedStatusResponse as ServiceError, null);\n      };\n    case 'clientStream':\n      return (\n        call: ServerReadableStream<any, any>,\n        callback: sendUnaryData<any>\n      ) => {\n        callback(unimplementedStatusResponse as ServiceError, null);\n      };\n    case 'serverStream':\n      return (call: ServerWritableStream<any, any>) => {\n        call.emit('error', unimplementedStatusResponse);\n      };\n    case 'bidi':\n      return (call: ServerDuplexStream<any, any>) => {\n        call.emit('error', unimplementedStatusResponse);\n      };\n    default:\n      throw new Error(`Invalid handlerType ${handlerType}`);\n  }\n}\n\ninterface ChannelzSessionInfo {\n  ref: SocketRef;\n  streamTracker: ChannelzCallTracker | ChannelzCallTrackerStub;\n  messagesSent: number;\n  messagesReceived: number;\n  keepAlivesSent: number;\n  lastMessageSentTimestamp: Date | null;\n  lastMessageReceivedTimestamp: Date | null;\n}\n\n/**\n * Information related to a single invocation of bindAsync. This should be\n * tracked in a map keyed by target string, normalized with a pass through\n * parseUri -> mapUriDefaultScheme -> uriToString. If the target has a port\n * number and the port number is 0, the target string is modified with the\n * concrete bound port.\n */\ninterface BoundPort {\n  /**\n   * The key used to refer to this object in the boundPorts map.\n   */\n  mapKey: string;\n  /**\n   * The target string, passed through parseUri -> mapUriDefaultScheme. Used\n   * to determine the final key when the port number is 0.\n   */\n  originalUri: GrpcUri;\n  /**\n   * If there is a pending bindAsync operation, this is a promise that resolves\n   * with the port number when that operation succeeds. If there is no such\n   * operation pending, this is null.\n   */\n  completionPromise: Promise<number> | null;\n  /**\n   * The port number that was actually bound. Populated only after\n   * completionPromise resolves.\n   */\n  portNumber: number;\n  /**\n   * Set by unbind if called while pending is true.\n   */\n  cancelled: boolean;\n  /**\n   * The credentials object passed to the original bindAsync call.\n   */\n  credentials: ServerCredentials;\n  /**\n   * The set of servers associated with this listening port. A target string\n   * that expands to multiple addresses will result in multiple listening\n   * servers.\n   */\n  listeningServers: Set<AnyHttp2Server>;\n}\n\n/**\n * Should be in a map keyed by AnyHttp2Server.\n */\ninterface Http2ServerInfo {\n  channelzRef: SocketRef;\n  sessions: Set<http2.ServerHttp2Session>;\n  ownsChannelzRef: boolean;\n}\n\ninterface SessionIdleTimeoutTracker {\n  activeStreams: number;\n  lastIdle: number;\n  timeout: NodeJS.Timeout;\n  onClose: (session: http2.ServerHttp2Session) => void | null;\n}\n\nexport interface ServerOptions extends ChannelOptions {\n  interceptors?: ServerInterceptor[];\n}\n\nexport interface ConnectionInjector {\n  injectConnection(connection: Duplex): void;\n  drain(graceTimeMs: number): void;\n  destroy(): void;\n}\n\nexport class Server {\n  private boundPorts: Map<string, BoundPort> = new Map();\n  private http2Servers: Map<AnyHttp2Server, Http2ServerInfo> = new Map();\n  private sessionIdleTimeouts = new Map<\n    http2.ServerHttp2Session,\n    SessionIdleTimeoutTracker\n  >();\n\n  private handlers: Map<string, UntypedHandler> = new Map<\n    string,\n    UntypedHandler\n  >();\n  private sessions = new Map<http2.ServerHttp2Session, ChannelzSessionInfo>();\n  /**\n   * This field only exists to ensure that the start method throws an error if\n   * it is called twice, as it did previously.\n   */\n  private started = false;\n  private shutdown = false;\n  private options: ServerOptions;\n  private serverAddressString = 'null';\n\n  // Channelz Info\n  private readonly channelzEnabled: boolean = true;\n  private channelzRef: ServerRef;\n  private channelzTrace: ChannelzTrace | ChannelzTraceStub;\n  private callTracker: ChannelzCallTracker | ChannelzCallTrackerStub;\n  private listenerChildrenTracker:\n    | ChannelzChildrenTracker\n    | ChannelzChildrenTrackerStub;\n  private sessionChildrenTracker:\n    | ChannelzChildrenTracker\n    | ChannelzChildrenTrackerStub;\n\n  private readonly maxConnectionAgeMs: number;\n  private readonly maxConnectionAgeGraceMs: number;\n\n  private readonly keepaliveTimeMs: number;\n  private readonly keepaliveTimeoutMs: number;\n\n  private readonly sessionIdleTimeout: number;\n\n  private readonly interceptors: ServerInterceptor[];\n\n  /**\n   * Options that will be used to construct all Http2Server instances for this\n   * Server.\n   */\n  private commonServerOptions: http2.ServerOptions;\n\n  constructor(options?: ServerOptions) {\n    this.options = options ?? {};\n    if (this.options['grpc.enable_channelz'] === 0) {\n      this.channelzEnabled = false;\n      this.channelzTrace = new ChannelzTraceStub();\n      this.callTracker = new ChannelzCallTrackerStub();\n      this.listenerChildrenTracker = new ChannelzChildrenTrackerStub();\n      this.sessionChildrenTracker = new ChannelzChildrenTrackerStub();\n    } else {\n      this.channelzTrace = new ChannelzTrace();\n      this.callTracker = new ChannelzCallTracker();\n      this.listenerChildrenTracker = new ChannelzChildrenTracker();\n      this.sessionChildrenTracker = new ChannelzChildrenTracker();\n    }\n\n    this.channelzRef = registerChannelzServer(\n      'server',\n      () => this.getChannelzInfo(),\n      this.channelzEnabled\n    );\n\n    this.channelzTrace.addTrace('CT_INFO', 'Server created');\n    this.maxConnectionAgeMs =\n      this.options['grpc.max_connection_age_ms'] ?? UNLIMITED_CONNECTION_AGE_MS;\n    this.maxConnectionAgeGraceMs =\n      this.options['grpc.max_connection_age_grace_ms'] ??\n      UNLIMITED_CONNECTION_AGE_MS;\n    this.keepaliveTimeMs =\n      this.options['grpc.keepalive_time_ms'] ?? KEEPALIVE_MAX_TIME_MS;\n    this.keepaliveTimeoutMs =\n      this.options['grpc.keepalive_timeout_ms'] ?? KEEPALIVE_TIMEOUT_MS;\n    this.sessionIdleTimeout =\n      this.options['grpc.max_connection_idle_ms'] ?? MAX_CONNECTION_IDLE_MS;\n\n    this.commonServerOptions = {\n      maxSendHeaderBlockLength: Number.MAX_SAFE_INTEGER,\n    };\n    if ('grpc-node.max_session_memory' in this.options) {\n      this.commonServerOptions.maxSessionMemory =\n        this.options['grpc-node.max_session_memory'];\n    } else {\n      /* By default, set a very large max session memory limit, to effectively\n       * disable enforcement of the limit. Some testing indicates that Node's\n       * behavior degrades badly when this limit is reached, so we solve that\n       * by disabling the check entirely. */\n      this.commonServerOptions.maxSessionMemory = Number.MAX_SAFE_INTEGER;\n    }\n    if ('grpc.max_concurrent_streams' in this.options) {\n      this.commonServerOptions.settings = {\n        maxConcurrentStreams: this.options['grpc.max_concurrent_streams'],\n      };\n    }\n    this.interceptors = this.options.interceptors ?? [];\n    this.trace('Server constructed');\n  }\n\n  private getChannelzInfo(): ServerInfo {\n    return {\n      trace: this.channelzTrace,\n      callTracker: this.callTracker,\n      listenerChildren: this.listenerChildrenTracker.getChildLists(),\n      sessionChildren: this.sessionChildrenTracker.getChildLists(),\n    };\n  }\n\n  private getChannelzSessionInfo(\n    session: http2.ServerHttp2Session\n  ): SocketInfo {\n    const sessionInfo = this.sessions.get(session)!;\n    const sessionSocket = session.socket;\n    const remoteAddress = sessionSocket.remoteAddress\n      ? stringToSubchannelAddress(\n          sessionSocket.remoteAddress,\n          sessionSocket.remotePort\n        )\n      : null;\n    const localAddress = sessionSocket.localAddress\n      ? stringToSubchannelAddress(\n          sessionSocket.localAddress!,\n          sessionSocket.localPort\n        )\n      : null;\n    let tlsInfo: TlsInfo | null;\n    if (session.encrypted) {\n      const tlsSocket: TLSSocket = sessionSocket as TLSSocket;\n      const cipherInfo: CipherNameAndProtocol & { standardName?: string } =\n        tlsSocket.getCipher();\n      const certificate = tlsSocket.getCertificate();\n      const peerCertificate = tlsSocket.getPeerCertificate();\n      tlsInfo = {\n        cipherSuiteStandardName: cipherInfo.standardName ?? null,\n        cipherSuiteOtherName: cipherInfo.standardName ? null : cipherInfo.name,\n        localCertificate:\n          certificate && 'raw' in certificate ? certificate.raw : null,\n        remoteCertificate:\n          peerCertificate && 'raw' in peerCertificate\n            ? peerCertificate.raw\n            : null,\n      };\n    } else {\n      tlsInfo = null;\n    }\n    const socketInfo: SocketInfo = {\n      remoteAddress: remoteAddress,\n      localAddress: localAddress,\n      security: tlsInfo,\n      remoteName: null,\n      streamsStarted: sessionInfo.streamTracker.callsStarted,\n      streamsSucceeded: sessionInfo.streamTracker.callsSucceeded,\n      streamsFailed: sessionInfo.streamTracker.callsFailed,\n      messagesSent: sessionInfo.messagesSent,\n      messagesReceived: sessionInfo.messagesReceived,\n      keepAlivesSent: sessionInfo.keepAlivesSent,\n      lastLocalStreamCreatedTimestamp: null,\n      lastRemoteStreamCreatedTimestamp:\n        sessionInfo.streamTracker.lastCallStartedTimestamp,\n      lastMessageSentTimestamp: sessionInfo.lastMessageSentTimestamp,\n      lastMessageReceivedTimestamp: sessionInfo.lastMessageReceivedTimestamp,\n      localFlowControlWindow: session.state.localWindowSize ?? null,\n      remoteFlowControlWindow: session.state.remoteWindowSize ?? null,\n    };\n    return socketInfo;\n  }\n\n  private trace(text: string): void {\n    logging.trace(\n      LogVerbosity.DEBUG,\n      TRACER_NAME,\n      '(' + this.channelzRef.id + ') ' + text\n    );\n  }\n\n  private keepaliveTrace(text: string): void {\n    logging.trace(\n      LogVerbosity.DEBUG,\n      'keepalive',\n      '(' + this.channelzRef.id + ') ' + text\n    );\n  }\n\n  addProtoService(): never {\n    throw new Error('Not implemented. Use addService() instead');\n  }\n\n  addService(\n    service: ServiceDefinition,\n    implementation: UntypedServiceImplementation\n  ): void {\n    if (\n      service === null ||\n      typeof service !== 'object' ||\n      implementation === null ||\n      typeof implementation !== 'object'\n    ) {\n      throw new Error('addService() requires two objects as arguments');\n    }\n\n    const serviceKeys = Object.keys(service);\n\n    if (serviceKeys.length === 0) {\n      throw new Error('Cannot add an empty service to a server');\n    }\n\n    serviceKeys.forEach(name => {\n      const attrs = service[name];\n      let methodType: HandlerType;\n\n      if (attrs.requestStream) {\n        if (attrs.responseStream) {\n          methodType = 'bidi';\n        } else {\n          methodType = 'clientStream';\n        }\n      } else {\n        if (attrs.responseStream) {\n          methodType = 'serverStream';\n        } else {\n          methodType = 'unary';\n        }\n      }\n\n      let implFn = implementation[name];\n      let impl;\n\n      if (implFn === undefined && typeof attrs.originalName === 'string') {\n        implFn = implementation[attrs.originalName];\n      }\n\n      if (implFn !== undefined) {\n        impl = implFn.bind(implementation);\n      } else {\n        impl = getDefaultHandler(methodType, name);\n      }\n\n      const success = this.register(\n        attrs.path,\n        impl as UntypedHandleCall,\n        attrs.responseSerialize,\n        attrs.requestDeserialize,\n        methodType\n      );\n\n      if (success === false) {\n        throw new Error(`Method handler for ${attrs.path} already provided.`);\n      }\n    });\n  }\n\n  removeService(service: ServiceDefinition): void {\n    if (service === null || typeof service !== 'object') {\n      throw new Error('removeService() requires object as argument');\n    }\n\n    const serviceKeys = Object.keys(service);\n    serviceKeys.forEach(name => {\n      const attrs = service[name];\n      this.unregister(attrs.path);\n    });\n  }\n\n  bind(port: string, creds: ServerCredentials): never {\n    throw new Error('Not implemented. Use bindAsync() instead');\n  }\n\n  /**\n   * This API is experimental, so API stability is not guaranteed across minor versions.\n   * @param boundAddress\n   * @returns\n   */\n  protected experimentalRegisterListenerToChannelz(boundAddress: SubchannelAddress) {\n    return registerChannelzSocket(\n      subchannelAddressToString(boundAddress),\n      () => {\n        return {\n          localAddress: boundAddress,\n          remoteAddress: null,\n          security: null,\n          remoteName: null,\n          streamsStarted: 0,\n          streamsSucceeded: 0,\n          streamsFailed: 0,\n          messagesSent: 0,\n          messagesReceived: 0,\n          keepAlivesSent: 0,\n          lastLocalStreamCreatedTimestamp: null,\n          lastRemoteStreamCreatedTimestamp: null,\n          lastMessageSentTimestamp: null,\n          lastMessageReceivedTimestamp: null,\n          localFlowControlWindow: null,\n          remoteFlowControlWindow: null,\n        };\n      },\n      this.channelzEnabled\n    );\n  }\n\n  protected experimentalUnregisterListenerFromChannelz(channelzRef: SocketRef) {\n    unregisterChannelzRef(channelzRef);\n  }\n\n  private createHttp2Server(credentials: ServerCredentials) {\n    let http2Server: http2.Http2Server | http2.Http2SecureServer;\n    if (credentials._isSecure()) {\n      const constructorOptions = credentials._getConstructorOptions();\n      const contextOptions = credentials._getSecureContextOptions();\n      const secureServerOptions: http2.SecureServerOptions = {\n        ...this.commonServerOptions,\n        ...constructorOptions,\n        ...contextOptions,\n        enableTrace: this.options['grpc-node.tls_enable_trace'] === 1\n      };\n      let areCredentialsValid = contextOptions !== null;\n      this.trace('Initial credentials valid: ' + areCredentialsValid);\n      http2Server = http2.createSecureServer(secureServerOptions);\n      http2Server.prependListener('connection', (socket: Socket) => {\n        if (!areCredentialsValid) {\n          this.trace('Dropped connection from ' + JSON.stringify(socket.address()) + ' due to unloaded credentials');\n          socket.destroy();\n        }\n      });\n      http2Server.on('secureConnection', (socket: TLSSocket) => {\n        /* These errors need to be handled by the user of Http2SecureServer,\n         * according to https://github.com/nodejs/node/issues/35824 */\n        socket.on('error', (e: Error) => {\n          this.trace(\n            'An incoming TLS connection closed with error: ' + e.message\n          );\n        });\n      });\n      const credsWatcher: SecureContextWatcher = options => {\n        if (options) {\n          const secureServer = http2Server as http2.Http2SecureServer;\n          try {\n            secureServer.setSecureContext(options);\n          } catch (e) {\n            logging.log(LogVerbosity.ERROR, 'Failed to set secure context with error ' + (e as Error).message);\n            options = null;\n          }\n        }\n        areCredentialsValid = options !== null;\n        this.trace('Post-update credentials valid: ' + areCredentialsValid);\n      }\n      credentials._addWatcher(credsWatcher);\n      http2Server.on('close', () => {\n        credentials._removeWatcher(credsWatcher);\n      });\n    } else {\n      http2Server = http2.createServer(this.commonServerOptions);\n    }\n\n    http2Server.setTimeout(0, noop);\n    this._setupHandlers(http2Server, credentials._getInterceptors());\n    return http2Server;\n  }\n\n  private bindOneAddress(\n    address: SubchannelAddress,\n    boundPortObject: BoundPort\n  ): Promise<SingleAddressBindResult> {\n    this.trace('Attempting to bind ' + subchannelAddressToString(address));\n    const http2Server = this.createHttp2Server(boundPortObject.credentials);\n    return new Promise<SingleAddressBindResult>((resolve, reject) => {\n      const onError = (err: Error) => {\n        this.trace(\n          'Failed to bind ' +\n            subchannelAddressToString(address) +\n            ' with error ' +\n            err.message\n        );\n        resolve({\n          port: 'port' in address ? address.port : 1,\n          error: err.message,\n        });\n      };\n\n      http2Server.once('error', onError);\n\n      http2Server.listen(address, () => {\n        const boundAddress = http2Server.address()!;\n        let boundSubchannelAddress: SubchannelAddress;\n        if (typeof boundAddress === 'string') {\n          boundSubchannelAddress = {\n            path: boundAddress,\n          };\n        } else {\n          boundSubchannelAddress = {\n            host: boundAddress.address,\n            port: boundAddress.port,\n          };\n        }\n\n        const channelzRef = this.experimentalRegisterListenerToChannelz(\n          boundSubchannelAddress\n        );\n        this.listenerChildrenTracker.refChild(channelzRef);\n\n        this.http2Servers.set(http2Server, {\n          channelzRef: channelzRef,\n          sessions: new Set(),\n          ownsChannelzRef: true\n        });\n        boundPortObject.listeningServers.add(http2Server);\n        this.trace(\n          'Successfully bound ' +\n            subchannelAddressToString(boundSubchannelAddress)\n        );\n        resolve({\n          port:\n            'port' in boundSubchannelAddress ? boundSubchannelAddress.port : 1,\n        });\n        http2Server.removeListener('error', onError);\n      });\n    });\n  }\n\n  private async bindManyPorts(\n    addressList: SubchannelAddress[],\n    boundPortObject: BoundPort\n  ): Promise<BindResult> {\n    if (addressList.length === 0) {\n      return {\n        count: 0,\n        port: 0,\n        errors: [],\n      };\n    }\n    if (isTcpSubchannelAddress(addressList[0]) && addressList[0].port === 0) {\n      /* If binding to port 0, first try to bind the first address, then bind\n       * the rest of the address list to the specific port that it binds. */\n      const firstAddressResult = await this.bindOneAddress(\n        addressList[0],\n        boundPortObject\n      );\n      if (firstAddressResult.error) {\n        /* If the first address fails to bind, try the same operation starting\n         * from the second item in the list. */\n        const restAddressResult = await this.bindManyPorts(\n          addressList.slice(1),\n          boundPortObject\n        );\n        return {\n          ...restAddressResult,\n          errors: [firstAddressResult.error, ...restAddressResult.errors],\n        };\n      } else {\n        const restAddresses = addressList\n          .slice(1)\n          .map(address =>\n            isTcpSubchannelAddress(address)\n              ? { host: address.host, port: firstAddressResult.port }\n              : address\n          );\n        const restAddressResult = await Promise.all(\n          restAddresses.map(address =>\n            this.bindOneAddress(address, boundPortObject)\n          )\n        );\n        const allResults = [firstAddressResult, ...restAddressResult];\n        return {\n          count: allResults.filter(result => result.error === undefined).length,\n          port: firstAddressResult.port,\n          errors: allResults\n            .filter(result => result.error)\n            .map(result => result.error!),\n        };\n      }\n    } else {\n      const allResults = await Promise.all(\n        addressList.map(address =>\n          this.bindOneAddress(address, boundPortObject)\n        )\n      );\n      return {\n        count: allResults.filter(result => result.error === undefined).length,\n        port: allResults[0].port,\n        errors: allResults\n          .filter(result => result.error)\n          .map(result => result.error!),\n      };\n    }\n  }\n\n  private async bindAddressList(\n    addressList: SubchannelAddress[],\n    boundPortObject: BoundPort\n  ): Promise<number> {\n    const bindResult = await this.bindManyPorts(addressList, boundPortObject);\n    if (bindResult.count > 0) {\n      if (bindResult.count < addressList.length) {\n        logging.log(\n          LogVerbosity.INFO,\n          `WARNING Only ${bindResult.count} addresses added out of total ${addressList.length} resolved`\n        );\n      }\n      return bindResult.port;\n    } else {\n      const errorString = `No address added out of total ${addressList.length} resolved`;\n      logging.log(LogVerbosity.ERROR, errorString);\n      throw new Error(\n        `${errorString} errors: [${bindResult.errors.join(',')}]`\n      );\n    }\n  }\n\n  private resolvePort(port: GrpcUri): Promise<SubchannelAddress[]> {\n    return new Promise<SubchannelAddress[]>((resolve, reject) => {\n      let seenResolution = false;\n      const resolverListener: ResolverListener = (\n        endpointList,\n        attributes,\n        serviceConfig,\n        resolutionNote\n      ) => {\n        if (seenResolution) {\n          return true;\n        }\n        seenResolution = true;\n        if (!endpointList.ok) {\n          reject(new Error(endpointList.error.details));\n          return true;\n        }\n        const addressList = ([] as SubchannelAddress[]).concat(\n          ...endpointList.value.map(endpoint => endpoint.addresses)\n        );\n        if (addressList.length === 0) {\n          reject(new Error(`No addresses resolved for port ${port}`));\n          return true;\n        }\n        resolve(addressList);\n        return true;\n      }\n      const resolver = createResolver(port, resolverListener, this.options);\n      resolver.updateResolution();\n    });\n  }\n\n  private async bindPort(\n    port: GrpcUri,\n    boundPortObject: BoundPort\n  ): Promise<number> {\n    const addressList = await this.resolvePort(port);\n    if (boundPortObject.cancelled) {\n      this.completeUnbind(boundPortObject);\n      throw new Error('bindAsync operation cancelled by unbind call');\n    }\n    const portNumber = await this.bindAddressList(addressList, boundPortObject);\n    if (boundPortObject.cancelled) {\n      this.completeUnbind(boundPortObject);\n      throw new Error('bindAsync operation cancelled by unbind call');\n    }\n    return portNumber;\n  }\n\n  private normalizePort(port: string): GrpcUri {\n    const initialPortUri = parseUri(port);\n    if (initialPortUri === null) {\n      throw new Error(`Could not parse port \"${port}\"`);\n    }\n    const portUri = mapUriDefaultScheme(initialPortUri);\n    if (portUri === null) {\n      throw new Error(`Could not get a default scheme for port \"${port}\"`);\n    }\n    return portUri;\n  }\n\n  bindAsync(\n    port: string,\n    creds: ServerCredentials,\n    callback: (error: Error | null, port: number) => void\n  ): void {\n    if (this.shutdown) {\n      throw new Error('bindAsync called after shutdown');\n    }\n    if (typeof port !== 'string') {\n      throw new TypeError('port must be a string');\n    }\n\n    if (creds === null || !(creds instanceof ServerCredentials)) {\n      throw new TypeError('creds must be a ServerCredentials object');\n    }\n\n    if (typeof callback !== 'function') {\n      throw new TypeError('callback must be a function');\n    }\n\n    this.trace('bindAsync port=' + port);\n\n    const portUri = this.normalizePort(port);\n\n    const deferredCallback = (error: Error | null, port: number) => {\n      process.nextTick(() => callback(error, port));\n    };\n\n    /* First, if this port is already bound or that bind operation is in\n     * progress, use that result. */\n    let boundPortObject = this.boundPorts.get(uriToString(portUri));\n    if (boundPortObject) {\n      if (!creds._equals(boundPortObject.credentials)) {\n        deferredCallback(\n          new Error(`${port} already bound with incompatible credentials`),\n          0\n        );\n        return;\n      }\n      /* If that operation has previously been cancelled by an unbind call,\n       * uncancel it. */\n      boundPortObject.cancelled = false;\n      if (boundPortObject.completionPromise) {\n        boundPortObject.completionPromise.then(\n          portNum => callback(null, portNum),\n          error => callback(error as Error, 0)\n        );\n      } else {\n        deferredCallback(null, boundPortObject.portNumber);\n      }\n      return;\n    }\n    boundPortObject = {\n      mapKey: uriToString(portUri),\n      originalUri: portUri,\n      completionPromise: null,\n      cancelled: false,\n      portNumber: 0,\n      credentials: creds,\n      listeningServers: new Set(),\n    };\n    const splitPort = splitHostPort(portUri.path);\n    const completionPromise = this.bindPort(portUri, boundPortObject);\n    boundPortObject.completionPromise = completionPromise;\n    /* If the port number is 0, defer populating the map entry until after the\n     * bind operation completes and we have a specific port number. Otherwise,\n     * populate it immediately. */\n    if (splitPort?.port === 0) {\n      completionPromise.then(\n        portNum => {\n          const finalUri: GrpcUri = {\n            scheme: portUri.scheme,\n            authority: portUri.authority,\n            path: combineHostPort({ host: splitPort.host, port: portNum }),\n          };\n          boundPortObject!.mapKey = uriToString(finalUri);\n          boundPortObject!.completionPromise = null;\n          boundPortObject!.portNumber = portNum;\n          this.boundPorts.set(boundPortObject!.mapKey, boundPortObject!);\n          callback(null, portNum);\n        },\n        error => {\n          callback(error, 0);\n        }\n      );\n    } else {\n      this.boundPorts.set(boundPortObject.mapKey, boundPortObject);\n      completionPromise.then(\n        portNum => {\n          boundPortObject!.completionPromise = null;\n          boundPortObject!.portNumber = portNum;\n          callback(null, portNum);\n        },\n        error => {\n          callback(error, 0);\n        }\n      );\n    }\n  }\n\n  private registerInjectorToChannelz() {\n    return registerChannelzSocket(\n      'injector',\n      () => {\n        return {\n          localAddress: null,\n          remoteAddress: null,\n          security: null,\n          remoteName: null,\n          streamsStarted: 0,\n          streamsSucceeded: 0,\n          streamsFailed: 0,\n          messagesSent: 0,\n          messagesReceived: 0,\n          keepAlivesSent: 0,\n          lastLocalStreamCreatedTimestamp: null,\n          lastRemoteStreamCreatedTimestamp: null,\n          lastMessageSentTimestamp: null,\n          lastMessageReceivedTimestamp: null,\n          localFlowControlWindow: null,\n          remoteFlowControlWindow: null,\n        };\n      },\n      this.channelzEnabled\n    );\n  }\n\n  /**\n   * This API is experimental, so API stability is not guaranteed across minor versions.\n   * @param credentials\n   * @param channelzRef\n   * @returns\n   */\n  protected experimentalCreateConnectionInjectorWithChannelzRef(credentials: ServerCredentials, channelzRef: SocketRef, ownsChannelzRef=false) {\n    if (credentials === null || !(credentials instanceof ServerCredentials)) {\n      throw new TypeError('creds must be a ServerCredentials object');\n    }\n    if (this.channelzEnabled) {\n      this.listenerChildrenTracker.refChild(channelzRef);\n    }\n    const server = this.createHttp2Server(credentials);\n    const sessionsSet: Set<http2.ServerHttp2Session> = new Set();\n    this.http2Servers.set(server, {\n      channelzRef: channelzRef,\n      sessions: sessionsSet,\n      ownsChannelzRef\n    });\n    return {\n      injectConnection: (connection: Duplex) => {\n        server.emit('connection', connection);\n      },\n      drain: (graceTimeMs: number) => {\n        for (const session of sessionsSet) {\n          this.closeSession(session);\n        }\n        setTimeout(() => {\n          for (const session of sessionsSet) {\n            session.destroy(http2.constants.NGHTTP2_CANCEL as any);\n          }\n        }, graceTimeMs).unref?.();\n      },\n      destroy: () => {\n        this.closeServer(server)\n        for (const session of sessionsSet) {\n          this.closeSession(session);\n        }\n      }\n    };\n  }\n\n  createConnectionInjector(credentials: ServerCredentials): ConnectionInjector {\n    if (credentials === null || !(credentials instanceof ServerCredentials)) {\n      throw new TypeError('creds must be a ServerCredentials object');\n    }\n    const channelzRef = this.registerInjectorToChannelz();\n    return this.experimentalCreateConnectionInjectorWithChannelzRef(credentials, channelzRef, true);\n  }\n\n  private closeServer(server: AnyHttp2Server, callback?: () => void) {\n    this.trace(\n      'Closing server with address ' + JSON.stringify(server.address())\n    );\n    const serverInfo = this.http2Servers.get(server);\n    server.close(() => {\n      if (serverInfo && serverInfo.ownsChannelzRef) {\n        this.listenerChildrenTracker.unrefChild(serverInfo.channelzRef);\n        unregisterChannelzRef(serverInfo.channelzRef);\n      }\n      this.http2Servers.delete(server);\n      callback?.();\n    });\n  }\n\n  private closeSession(\n    session: http2.ServerHttp2Session,\n    callback?: () => void\n  ) {\n    this.trace('Closing session initiated by ' + session.socket?.remoteAddress);\n    const sessionInfo = this.sessions.get(session);\n    const closeCallback = () => {\n      if (sessionInfo) {\n        this.sessionChildrenTracker.unrefChild(sessionInfo.ref);\n        unregisterChannelzRef(sessionInfo.ref);\n      }\n      callback?.();\n    };\n    if (session.closed) {\n      queueMicrotask(closeCallback);\n    } else {\n      session.close(closeCallback);\n    }\n  }\n\n  private completeUnbind(boundPortObject: BoundPort) {\n    for (const server of boundPortObject.listeningServers) {\n      const serverInfo = this.http2Servers.get(server);\n      this.closeServer(server, () => {\n        boundPortObject.listeningServers.delete(server);\n      });\n      if (serverInfo) {\n        for (const session of serverInfo.sessions) {\n          this.closeSession(session);\n        }\n      }\n    }\n    this.boundPorts.delete(boundPortObject.mapKey);\n  }\n\n  /**\n   * Unbind a previously bound port, or cancel an in-progress bindAsync\n   * operation. If port 0 was bound, only the actual bound port can be\n   * unbound. For example, if bindAsync was called with \"localhost:0\" and the\n   * bound port result was 54321, it can be unbound as \"localhost:54321\".\n   * @param port\n   */\n  unbind(port: string): void {\n    this.trace('unbind port=' + port);\n    const portUri = this.normalizePort(port);\n    const splitPort = splitHostPort(portUri.path);\n    if (splitPort?.port === 0) {\n      throw new Error('Cannot unbind port 0');\n    }\n    const boundPortObject = this.boundPorts.get(uriToString(portUri));\n    if (boundPortObject) {\n      this.trace(\n        'unbinding ' +\n          boundPortObject.mapKey +\n          ' originally bound as ' +\n          uriToString(boundPortObject.originalUri)\n      );\n      /* If the bind operation is pending, the cancelled flag will trigger\n       * the unbind operation later. */\n      if (boundPortObject.completionPromise) {\n        boundPortObject.cancelled = true;\n      } else {\n        this.completeUnbind(boundPortObject);\n      }\n    }\n  }\n\n  /**\n   * Gracefully close all connections associated with a previously bound port.\n   * After the grace time, forcefully close all remaining open connections.\n   *\n   * If port 0 was bound, only the actual bound port can be\n   * drained. For example, if bindAsync was called with \"localhost:0\" and the\n   * bound port result was 54321, it can be drained as \"localhost:54321\".\n   * @param port\n   * @param graceTimeMs\n   * @returns\n   */\n  drain(port: string, graceTimeMs: number): void {\n    this.trace('drain port=' + port + ' graceTimeMs=' + graceTimeMs);\n    const portUri = this.normalizePort(port);\n    const splitPort = splitHostPort(portUri.path);\n    if (splitPort?.port === 0) {\n      throw new Error('Cannot drain port 0');\n    }\n    const boundPortObject = this.boundPorts.get(uriToString(portUri));\n    if (!boundPortObject) {\n      return;\n    }\n    const allSessions: Set<http2.Http2Session> = new Set();\n    for (const http2Server of boundPortObject.listeningServers) {\n      const serverEntry = this.http2Servers.get(http2Server);\n      if (serverEntry) {\n        for (const session of serverEntry.sessions) {\n          allSessions.add(session);\n          this.closeSession(session, () => {\n            allSessions.delete(session);\n          });\n        }\n      }\n    }\n    /* After the grace time ends, send another goaway to all remaining sessions\n     * with the CANCEL code. */\n    setTimeout(() => {\n      for (const session of allSessions) {\n        session.destroy(http2.constants.NGHTTP2_CANCEL as any);\n      }\n    }, graceTimeMs).unref?.();\n  }\n\n  forceShutdown(): void {\n    for (const boundPortObject of this.boundPorts.values()) {\n      boundPortObject.cancelled = true;\n    }\n    this.boundPorts.clear();\n    // Close the server if it is still running.\n    for (const server of this.http2Servers.keys()) {\n      this.closeServer(server);\n    }\n\n    // Always destroy any available sessions. It's possible that one or more\n    // tryShutdown() calls are in progress. Don't wait on them to finish.\n    this.sessions.forEach((channelzInfo, session) => {\n      this.closeSession(session);\n      // Cast NGHTTP2_CANCEL to any because TypeScript doesn't seem to\n      // recognize destroy(code) as a valid signature.\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      session.destroy(http2.constants.NGHTTP2_CANCEL as any);\n    });\n    this.sessions.clear();\n    unregisterChannelzRef(this.channelzRef);\n\n    this.shutdown = true;\n  }\n\n  register<RequestType, ResponseType>(\n    name: string,\n    handler: HandleCall<RequestType, ResponseType>,\n    serialize: Serialize<ResponseType>,\n    deserialize: Deserialize<RequestType>,\n    type: string\n  ): boolean {\n    if (this.handlers.has(name)) {\n      return false;\n    }\n\n    this.handlers.set(name, {\n      func: handler,\n      serialize,\n      deserialize,\n      type,\n      path: name,\n    } as UntypedHandler);\n    return true;\n  }\n\n  unregister(name: string): boolean {\n    return this.handlers.delete(name);\n  }\n\n  /**\n   * @deprecated No longer needed as of version 1.10.x\n   */\n  @deprecate(\n    'Calling start() is no longer necessary. It can be safely omitted.'\n  )\n  start(): void {\n    if (\n      this.http2Servers.size === 0 ||\n      [...this.http2Servers.keys()].every(server => !server.listening)\n    ) {\n      throw new Error('server must be bound in order to start');\n    }\n\n    if (this.started === true) {\n      throw new Error('server is already started');\n    }\n    this.started = true;\n  }\n\n  tryShutdown(callback: (error?: Error) => void): void {\n    const wrappedCallback = (error?: Error) => {\n      unregisterChannelzRef(this.channelzRef);\n      callback(error);\n    };\n    let pendingChecks = 0;\n\n    function maybeCallback(): void {\n      pendingChecks--;\n\n      if (pendingChecks === 0) {\n        wrappedCallback();\n      }\n    }\n    this.shutdown = true;\n\n    for (const [serverKey, server] of this.http2Servers.entries()) {\n      pendingChecks++;\n      const serverString = server.channelzRef.name;\n      this.trace('Waiting for server ' + serverString + ' to close');\n      this.closeServer(serverKey, () => {\n        this.trace('Server ' + serverString + ' finished closing');\n        maybeCallback();\n      });\n\n      for (const session of server.sessions.keys()) {\n        pendingChecks++;\n        const sessionString = session.socket?.remoteAddress;\n        this.trace('Waiting for session ' + sessionString + ' to close');\n        this.closeSession(session, () => {\n          this.trace('Session ' + sessionString + ' finished closing');\n          maybeCallback();\n        });\n      }\n    }\n\n    if (pendingChecks === 0) {\n      wrappedCallback();\n    }\n  }\n\n  addHttp2Port(): never {\n    throw new Error('Not yet implemented');\n  }\n\n  /**\n   * Get the channelz reference object for this server. The returned value is\n   * garbage if channelz is disabled for this server.\n   * @returns\n   */\n  getChannelzRef() {\n    return this.channelzRef;\n  }\n\n  private _verifyContentType(\n    stream: http2.ServerHttp2Stream,\n    headers: http2.IncomingHttpHeaders\n  ): boolean {\n    const contentType = headers[http2.constants.HTTP2_HEADER_CONTENT_TYPE];\n\n    if (\n      typeof contentType !== 'string' ||\n      !contentType.startsWith('application/grpc')\n    ) {\n      stream.respond(\n        {\n          [http2.constants.HTTP2_HEADER_STATUS]:\n            http2.constants.HTTP_STATUS_UNSUPPORTED_MEDIA_TYPE,\n        },\n        { endStream: true }\n      );\n      return false;\n    }\n\n    return true;\n  }\n\n  private _retrieveHandler(path: string): Handler<any, any> | null {\n    serverCallTrace(\n      'Received call to method ' +\n        path +\n        ' at address ' +\n        this.serverAddressString\n    );\n\n    const handler = this.handlers.get(path);\n\n    if (handler === undefined) {\n      serverCallTrace(\n        'No handler registered for method ' +\n          path +\n          '. Sending UNIMPLEMENTED status.'\n      );\n      return null;\n    }\n\n    return handler;\n  }\n\n  private _respondWithError(\n    err: PartialStatusObject,\n    stream: http2.ServerHttp2Stream,\n    channelzSessionInfo: ChannelzSessionInfo | null = null\n  ) {\n    const trailersToSend = {\n      'grpc-status': err.code ?? Status.INTERNAL,\n      'grpc-message': err.details,\n      [http2.constants.HTTP2_HEADER_STATUS]: http2.constants.HTTP_STATUS_OK,\n      [http2.constants.HTTP2_HEADER_CONTENT_TYPE]: 'application/grpc+proto',\n      ...err.metadata?.toHttp2Headers(),\n    };\n    stream.respond(trailersToSend, { endStream: true });\n\n    this.callTracker.addCallFailed();\n    channelzSessionInfo?.streamTracker.addCallFailed();\n  }\n\n  private _channelzHandler(\n    extraInterceptors: ServerInterceptor[],\n    stream: http2.ServerHttp2Stream,\n    headers: http2.IncomingHttpHeaders\n  ) {\n    // for handling idle timeout\n    this.onStreamOpened(stream);\n\n    const channelzSessionInfo = this.sessions.get(\n      stream.session as http2.ServerHttp2Session\n    );\n\n    this.callTracker.addCallStarted();\n    channelzSessionInfo?.streamTracker.addCallStarted();\n\n    if (!this._verifyContentType(stream, headers)) {\n      this.callTracker.addCallFailed();\n      channelzSessionInfo?.streamTracker.addCallFailed();\n      return;\n    }\n\n    const path = headers[HTTP2_HEADER_PATH] as string;\n\n    const handler = this._retrieveHandler(path);\n    if (!handler) {\n      this._respondWithError(\n        getUnimplementedStatusResponse(path),\n        stream,\n        channelzSessionInfo\n      );\n      return;\n    }\n\n    const callEventTracker: CallEventTracker = {\n      addMessageSent: () => {\n        if (channelzSessionInfo) {\n          channelzSessionInfo.messagesSent += 1;\n          channelzSessionInfo.lastMessageSentTimestamp = new Date();\n        }\n      },\n      addMessageReceived: () => {\n        if (channelzSessionInfo) {\n          channelzSessionInfo.messagesReceived += 1;\n          channelzSessionInfo.lastMessageReceivedTimestamp = new Date();\n        }\n      },\n      onCallEnd: status => {\n        if (status.code === Status.OK) {\n          this.callTracker.addCallSucceeded();\n        } else {\n          this.callTracker.addCallFailed();\n        }\n      },\n      onStreamEnd: success => {\n        if (channelzSessionInfo) {\n          if (success) {\n            channelzSessionInfo.streamTracker.addCallSucceeded();\n          } else {\n            channelzSessionInfo.streamTracker.addCallFailed();\n          }\n        }\n      },\n    };\n\n    const call = getServerInterceptingCall(\n      [...extraInterceptors, ...this.interceptors],\n      stream,\n      headers,\n      callEventTracker,\n      handler,\n      this.options\n    );\n\n    if (!this._runHandlerForCall(call, handler)) {\n      this.callTracker.addCallFailed();\n      channelzSessionInfo?.streamTracker.addCallFailed();\n\n      call.sendStatus({\n        code: Status.INTERNAL,\n        details: `Unknown handler type: ${handler.type}`,\n      });\n    }\n  }\n\n  private _streamHandler(\n    extraInterceptors: ServerInterceptor[],\n    stream: http2.ServerHttp2Stream,\n    headers: http2.IncomingHttpHeaders\n  ) {\n    // for handling idle timeout\n    this.onStreamOpened(stream);\n\n    if (this._verifyContentType(stream, headers) !== true) {\n      return;\n    }\n\n    const path = headers[HTTP2_HEADER_PATH] as string;\n\n    const handler = this._retrieveHandler(path);\n    if (!handler) {\n      this._respondWithError(\n        getUnimplementedStatusResponse(path),\n        stream,\n        null\n      );\n      return;\n    }\n\n    const call = getServerInterceptingCall(\n      [...extraInterceptors, ...this.interceptors],\n      stream,\n      headers,\n      null,\n      handler,\n      this.options\n    );\n\n    if (!this._runHandlerForCall(call, handler)) {\n      call.sendStatus({\n        code: Status.INTERNAL,\n        details: `Unknown handler type: ${handler.type}`,\n      });\n    }\n  }\n\n  private _runHandlerForCall(\n    call: ServerInterceptingCallInterface,\n    handler:\n      | UntypedUnaryHandler\n      | UntypedClientStreamingHandler\n      | UntypedServerStreamingHandler\n      | UntypedBidiStreamingHandler\n  ): boolean {\n    const { type } = handler;\n    if (type === 'unary') {\n      handleUnary(call, handler);\n    } else if (type === 'clientStream') {\n      handleClientStreaming(call, handler);\n    } else if (type === 'serverStream') {\n      handleServerStreaming(call, handler);\n    } else if (type === 'bidi') {\n      handleBidiStreaming(call, handler);\n    } else {\n      return false;\n    }\n\n    return true;\n  }\n\n  private _setupHandlers(\n    http2Server: http2.Http2Server | http2.Http2SecureServer,\n    extraInterceptors: ServerInterceptor[]\n  ): void {\n    if (http2Server === null) {\n      return;\n    }\n\n    const serverAddress = http2Server.address();\n    let serverAddressString = 'null';\n    if (serverAddress) {\n      if (typeof serverAddress === 'string') {\n        serverAddressString = serverAddress;\n      } else {\n        serverAddressString = serverAddress.address + ':' + serverAddress.port;\n      }\n    }\n    this.serverAddressString = serverAddressString;\n\n    const handler = this.channelzEnabled\n      ? this._channelzHandler\n      : this._streamHandler;\n\n    const sessionHandler = this.channelzEnabled\n      ? this._channelzSessionHandler(http2Server)\n      : this._sessionHandler(http2Server);\n\n    http2Server.on('stream', handler.bind(this, extraInterceptors));\n    http2Server.on('session', sessionHandler);\n  }\n\n  private _sessionHandler(\n    http2Server: http2.Http2Server | http2.Http2SecureServer\n  ) {\n    return (session: http2.ServerHttp2Session) => {\n      this.http2Servers.get(http2Server)?.sessions.add(session);\n\n      let connectionAgeTimer: NodeJS.Timeout | null = null;\n      let connectionAgeGraceTimer: NodeJS.Timeout | null = null;\n      let keepaliveTimer: NodeJS.Timeout | null = null;\n      let sessionClosedByServer = false;\n\n      const idleTimeoutObj = this.enableIdleTimeout(session);\n\n      if (this.maxConnectionAgeMs !== UNLIMITED_CONNECTION_AGE_MS) {\n        // Apply a random jitter within a +/-10% range\n        const jitterMagnitude = this.maxConnectionAgeMs / 10;\n        const jitter = Math.random() * jitterMagnitude * 2 - jitterMagnitude;\n\n        connectionAgeTimer = setTimeout(() => {\n          sessionClosedByServer = true;\n\n          this.trace(\n            'Connection dropped by max connection age: ' +\n              session.socket?.remoteAddress\n          );\n\n          try {\n            session.goaway(\n              http2.constants.NGHTTP2_NO_ERROR,\n              ~(1 << 31),\n              kMaxAge\n            );\n          } catch (e) {\n            // The goaway can't be sent because the session is already closed\n            session.destroy();\n            return;\n          }\n          session.close();\n\n          /* Allow a grace period after sending the GOAWAY before forcibly\n           * closing the connection. */\n          if (this.maxConnectionAgeGraceMs !== UNLIMITED_CONNECTION_AGE_MS) {\n            connectionAgeGraceTimer = setTimeout(() => {\n              session.destroy();\n            }, this.maxConnectionAgeGraceMs);\n            connectionAgeGraceTimer.unref?.();\n          }\n        }, this.maxConnectionAgeMs + jitter);\n        connectionAgeTimer.unref?.();\n      }\n\n      const clearKeepaliveTimeout = () => {\n        if (keepaliveTimer) {\n          clearTimeout(keepaliveTimer);\n          keepaliveTimer = null;\n        }\n      };\n\n      const canSendPing = () => {\n        return (\n          !session.destroyed &&\n          this.keepaliveTimeMs < KEEPALIVE_MAX_TIME_MS &&\n          this.keepaliveTimeMs > 0\n        );\n      };\n\n      /* eslint-disable-next-line prefer-const */\n      let sendPing: () => void; // hoisted for use in maybeStartKeepalivePingTimer\n\n      const maybeStartKeepalivePingTimer = () => {\n        if (!canSendPing()) {\n          return;\n        }\n        this.keepaliveTrace(\n          'Starting keepalive timer for ' + this.keepaliveTimeMs + 'ms'\n        );\n        keepaliveTimer = setTimeout(() => {\n          clearKeepaliveTimeout();\n          sendPing();\n        }, this.keepaliveTimeMs);\n        keepaliveTimer.unref?.();\n      };\n\n      sendPing = () => {\n        if (!canSendPing()) {\n          return;\n        }\n        this.keepaliveTrace(\n          'Sending ping with timeout ' + this.keepaliveTimeoutMs + 'ms'\n        );\n        let pingSendError = '';\n        try {\n          const pingSentSuccessfully = session.ping(\n            (err: Error | null, duration: number, payload: Buffer) => {\n              clearKeepaliveTimeout();\n              if (err) {\n                this.keepaliveTrace('Ping failed with error: ' + err.message);\n                sessionClosedByServer = true;\n                session.destroy();\n              } else {\n                this.keepaliveTrace('Received ping response');\n                maybeStartKeepalivePingTimer();\n              }\n            }\n          );\n          if (!pingSentSuccessfully) {\n            pingSendError = 'Ping returned false';\n          }\n        } catch (e) {\n          // grpc/grpc-node#2139\n          pingSendError =\n            (e instanceof Error ? e.message : '') || 'Unknown error';\n        }\n\n        if (pingSendError) {\n          this.keepaliveTrace('Ping send failed: ' + pingSendError);\n          this.trace(\n            'Connection dropped due to ping send error: ' + pingSendError\n          );\n          sessionClosedByServer = true;\n          session.destroy();\n          return;\n        }\n\n        keepaliveTimer = setTimeout(() => {\n          clearKeepaliveTimeout();\n          this.keepaliveTrace('Ping timeout passed without response');\n          this.trace('Connection dropped by keepalive timeout');\n          sessionClosedByServer = true;\n          session.destroy();\n        }, this.keepaliveTimeoutMs);\n        keepaliveTimer.unref?.();\n      };\n\n      maybeStartKeepalivePingTimer();\n\n      session.on('close', () => {\n        if (!sessionClosedByServer) {\n          this.trace(\n            `Connection dropped by client ${session.socket?.remoteAddress}`\n          );\n        }\n\n        if (connectionAgeTimer) {\n          clearTimeout(connectionAgeTimer);\n        }\n\n        if (connectionAgeGraceTimer) {\n          clearTimeout(connectionAgeGraceTimer);\n        }\n\n        clearKeepaliveTimeout();\n\n        if (idleTimeoutObj !== null) {\n          clearTimeout(idleTimeoutObj.timeout);\n          this.sessionIdleTimeouts.delete(session);\n        }\n\n        this.http2Servers.get(http2Server)?.sessions.delete(session);\n      });\n    };\n  }\n\n  private _channelzSessionHandler(\n    http2Server: http2.Http2Server | http2.Http2SecureServer\n  ) {\n    return (session: http2.ServerHttp2Session) => {\n      const channelzRef = registerChannelzSocket(\n        session.socket?.remoteAddress ?? 'unknown',\n        this.getChannelzSessionInfo.bind(this, session),\n        this.channelzEnabled\n      );\n\n      const channelzSessionInfo: ChannelzSessionInfo = {\n        ref: channelzRef,\n        streamTracker: new ChannelzCallTracker(),\n        messagesSent: 0,\n        messagesReceived: 0,\n        keepAlivesSent: 0,\n        lastMessageSentTimestamp: null,\n        lastMessageReceivedTimestamp: null,\n      };\n\n      this.http2Servers.get(http2Server)?.sessions.add(session);\n      this.sessions.set(session, channelzSessionInfo);\n      const clientAddress = `${session.socket.remoteAddress}:${session.socket.remotePort}`;\n\n      this.channelzTrace.addTrace(\n        'CT_INFO',\n        'Connection established by client ' + clientAddress\n      );\n      this.trace('Connection established by client ' + clientAddress);\n      this.sessionChildrenTracker.refChild(channelzRef);\n\n      let connectionAgeTimer: NodeJS.Timeout | null = null;\n      let connectionAgeGraceTimer: NodeJS.Timeout | null = null;\n      let keepaliveTimeout: NodeJS.Timeout | null = null;\n      let sessionClosedByServer = false;\n\n      const idleTimeoutObj = this.enableIdleTimeout(session);\n\n      if (this.maxConnectionAgeMs !== UNLIMITED_CONNECTION_AGE_MS) {\n        // Apply a random jitter within a +/-10% range\n        const jitterMagnitude = this.maxConnectionAgeMs / 10;\n        const jitter = Math.random() * jitterMagnitude * 2 - jitterMagnitude;\n\n        connectionAgeTimer = setTimeout(() => {\n          sessionClosedByServer = true;\n          this.channelzTrace.addTrace(\n            'CT_INFO',\n            'Connection dropped by max connection age from ' + clientAddress\n          );\n\n          try {\n            session.goaway(\n              http2.constants.NGHTTP2_NO_ERROR,\n              ~(1 << 31),\n              kMaxAge\n            );\n          } catch (e) {\n            // The goaway can't be sent because the session is already closed\n            session.destroy();\n            return;\n          }\n          session.close();\n\n          /* Allow a grace period after sending the GOAWAY before forcibly\n           * closing the connection. */\n          if (this.maxConnectionAgeGraceMs !== UNLIMITED_CONNECTION_AGE_MS) {\n            connectionAgeGraceTimer = setTimeout(() => {\n              session.destroy();\n            }, this.maxConnectionAgeGraceMs);\n            connectionAgeGraceTimer.unref?.();\n          }\n        }, this.maxConnectionAgeMs + jitter);\n        connectionAgeTimer.unref?.();\n      }\n\n      const clearKeepaliveTimeout = () => {\n        if (keepaliveTimeout) {\n          clearTimeout(keepaliveTimeout);\n          keepaliveTimeout = null;\n        }\n      };\n\n      const canSendPing = () => {\n        return (\n          !session.destroyed &&\n          this.keepaliveTimeMs < KEEPALIVE_MAX_TIME_MS &&\n          this.keepaliveTimeMs > 0\n        );\n      };\n\n      /* eslint-disable-next-line prefer-const */\n      let sendPing: () => void; // hoisted for use in maybeStartKeepalivePingTimer\n\n      const maybeStartKeepalivePingTimer = () => {\n        if (!canSendPing()) {\n          return;\n        }\n        this.keepaliveTrace(\n          'Starting keepalive timer for ' + this.keepaliveTimeMs + 'ms'\n        );\n        keepaliveTimeout = setTimeout(() => {\n          clearKeepaliveTimeout();\n          sendPing();\n        }, this.keepaliveTimeMs);\n        keepaliveTimeout.unref?.();\n      };\n\n      sendPing = () => {\n        if (!canSendPing()) {\n          return;\n        }\n        this.keepaliveTrace(\n          'Sending ping with timeout ' + this.keepaliveTimeoutMs + 'ms'\n        );\n        let pingSendError = '';\n        try {\n          const pingSentSuccessfully = session.ping(\n            (err: Error | null, duration: number, payload: Buffer) => {\n              clearKeepaliveTimeout();\n              if (err) {\n                this.keepaliveTrace('Ping failed with error: ' + err.message);\n                this.channelzTrace.addTrace(\n                  'CT_INFO',\n                  'Connection dropped due to error of a ping frame ' +\n                    err.message +\n                    ' return in ' +\n                    duration\n                );\n                sessionClosedByServer = true;\n                session.destroy();\n              } else {\n                this.keepaliveTrace('Received ping response');\n                maybeStartKeepalivePingTimer();\n              }\n            }\n          );\n          if (!pingSentSuccessfully) {\n            pingSendError = 'Ping returned false';\n          }\n        } catch (e) {\n          // grpc/grpc-node#2139\n          pingSendError =\n            (e instanceof Error ? e.message : '') || 'Unknown error';\n        }\n\n        if (pingSendError) {\n          this.keepaliveTrace('Ping send failed: ' + pingSendError);\n          this.channelzTrace.addTrace(\n            'CT_INFO',\n            'Connection dropped due to ping send error: ' + pingSendError\n          );\n          sessionClosedByServer = true;\n          session.destroy();\n          return;\n        }\n\n        channelzSessionInfo.keepAlivesSent += 1;\n\n        keepaliveTimeout = setTimeout(() => {\n          clearKeepaliveTimeout();\n          this.keepaliveTrace('Ping timeout passed without response');\n          this.channelzTrace.addTrace(\n            'CT_INFO',\n            'Connection dropped by keepalive timeout from ' + clientAddress\n          );\n          sessionClosedByServer = true;\n          session.destroy();\n        }, this.keepaliveTimeoutMs);\n        keepaliveTimeout.unref?.();\n      };\n\n      maybeStartKeepalivePingTimer();\n\n      session.on('close', () => {\n        if (!sessionClosedByServer) {\n          this.channelzTrace.addTrace(\n            'CT_INFO',\n            'Connection dropped by client ' + clientAddress\n          );\n        }\n\n        this.sessionChildrenTracker.unrefChild(channelzRef);\n        unregisterChannelzRef(channelzRef);\n\n        if (connectionAgeTimer) {\n          clearTimeout(connectionAgeTimer);\n        }\n\n        if (connectionAgeGraceTimer) {\n          clearTimeout(connectionAgeGraceTimer);\n        }\n\n        clearKeepaliveTimeout();\n\n        if (idleTimeoutObj !== null) {\n          clearTimeout(idleTimeoutObj.timeout);\n          this.sessionIdleTimeouts.delete(session);\n        }\n\n        this.http2Servers.get(http2Server)?.sessions.delete(session);\n        this.sessions.delete(session);\n      });\n    };\n  }\n\n  private enableIdleTimeout(\n    session: http2.ServerHttp2Session\n  ): SessionIdleTimeoutTracker | null {\n    if (this.sessionIdleTimeout >= MAX_CONNECTION_IDLE_MS) {\n      return null;\n    }\n\n    const idleTimeoutObj: SessionIdleTimeoutTracker = {\n      activeStreams: 0,\n      lastIdle: Date.now(),\n      onClose: this.onStreamClose.bind(this, session),\n      timeout: setTimeout(\n        this.onIdleTimeout,\n        this.sessionIdleTimeout,\n        this,\n        session\n      ),\n    };\n    idleTimeoutObj.timeout.unref?.();\n    this.sessionIdleTimeouts.set(session, idleTimeoutObj);\n\n    const { socket } = session;\n    this.trace(\n      'Enable idle timeout for ' +\n        socket.remoteAddress +\n        ':' +\n        socket.remotePort\n    );\n\n    return idleTimeoutObj;\n  }\n\n  private onIdleTimeout(\n    this: undefined,\n    ctx: Server,\n    session: http2.ServerHttp2Session\n  ) {\n    const { socket } = session;\n    const sessionInfo = ctx.sessionIdleTimeouts.get(session);\n\n    // if it is called while we have activeStreams - timer will not be rescheduled\n    // until last active stream is closed, then it will call .refresh() on the timer\n    // important part is to not clearTimeout(timer) or it becomes unusable\n    // for future refreshes\n    if (\n      sessionInfo !== undefined &&\n      sessionInfo.activeStreams === 0\n    ) {\n      if (Date.now() - sessionInfo.lastIdle >= ctx.sessionIdleTimeout) {\n        ctx.trace(\n          'Session idle timeout triggered for ' +\n            socket?.remoteAddress +\n            ':' +\n            socket?.remotePort +\n            ' last idle at ' +\n            sessionInfo.lastIdle\n        );\n\n        ctx.closeSession(session);\n      } else {\n        sessionInfo.timeout.refresh();\n      }\n    }\n  }\n\n  private onStreamOpened(stream: http2.ServerHttp2Stream) {\n    const session = stream.session as http2.ServerHttp2Session;\n\n    const idleTimeoutObj = this.sessionIdleTimeouts.get(session);\n    if (idleTimeoutObj) {\n      idleTimeoutObj.activeStreams += 1;\n      stream.once('close', idleTimeoutObj.onClose);\n    }\n  }\n\n  private onStreamClose(session: http2.ServerHttp2Session) {\n    const idleTimeoutObj = this.sessionIdleTimeouts.get(session);\n\n    if (idleTimeoutObj) {\n      idleTimeoutObj.activeStreams -= 1;\n      if (idleTimeoutObj.activeStreams === 0) {\n        idleTimeoutObj.lastIdle = Date.now();\n        idleTimeoutObj.timeout.refresh();\n\n        this.trace(\n          'Session onStreamClose' +\n            session.socket?.remoteAddress +\n            ':' +\n            session.socket?.remotePort +\n            ' at ' +\n            idleTimeoutObj.lastIdle\n        );\n      }\n    }\n  }\n}\n\nasync function handleUnary<RequestType, ResponseType>(\n  call: ServerInterceptingCallInterface,\n  handler: UnaryHandler<RequestType, ResponseType>\n): Promise<void> {\n  let stream: ServerUnaryCall<RequestType, ResponseType>;\n\n  function respond(\n    err: ServerErrorResponse | ServerStatusResponse | null,\n    value?: ResponseType | null,\n    trailer?: Metadata,\n    flags?: number\n  ) {\n    if (err) {\n      call.sendStatus(serverErrorToStatus(err, trailer));\n      return;\n    }\n    call.sendMessage(value, () => {\n      call.sendStatus({\n        code: Status.OK,\n        details: 'OK',\n        metadata: trailer ?? null,\n      });\n    });\n  }\n\n  let requestMetadata: Metadata;\n  let requestMessage: RequestType | null = null;\n  call.start({\n    onReceiveMetadata(metadata) {\n      requestMetadata = metadata;\n      call.startRead();\n    },\n    onReceiveMessage(message) {\n      if (requestMessage) {\n        call.sendStatus({\n          code: Status.UNIMPLEMENTED,\n          details: `Received a second request message for server streaming method ${handler.path}`,\n          metadata: null,\n        });\n        return;\n      }\n      requestMessage = message;\n      call.startRead();\n    },\n    onReceiveHalfClose() {\n      if (!requestMessage) {\n        call.sendStatus({\n          code: Status.UNIMPLEMENTED,\n          details: `Received no request message for server streaming method ${handler.path}`,\n          metadata: null,\n        });\n        return;\n      }\n      stream = new ServerWritableStreamImpl(\n        handler.path,\n        call,\n        requestMetadata,\n        requestMessage\n      );\n      try {\n        handler.func(stream, respond);\n      } catch (err) {\n        call.sendStatus({\n          code: Status.UNKNOWN,\n          details: `Server method handler threw error ${\n            (err as Error).message\n          }`,\n          metadata: null,\n        });\n      }\n    },\n    onCancel() {\n      if (stream) {\n        stream.cancelled = true;\n        stream.emit('cancelled', 'cancelled');\n      }\n    },\n  });\n}\n\nfunction handleClientStreaming<RequestType, ResponseType>(\n  call: ServerInterceptingCallInterface,\n  handler: ClientStreamingHandler<RequestType, ResponseType>\n): void {\n  let stream: ServerReadableStream<RequestType, ResponseType>;\n\n  function respond(\n    err: ServerErrorResponse | ServerStatusResponse | null,\n    value?: ResponseType | null,\n    trailer?: Metadata,\n    flags?: number\n  ) {\n    if (err) {\n      call.sendStatus(serverErrorToStatus(err, trailer));\n      return;\n    }\n    call.sendMessage(value, () => {\n      call.sendStatus({\n        code: Status.OK,\n        details: 'OK',\n        metadata: trailer ?? null,\n      });\n    });\n  }\n\n  call.start({\n    onReceiveMetadata(metadata) {\n      stream = new ServerDuplexStreamImpl(handler.path, call, metadata);\n      try {\n        handler.func(stream, respond);\n      } catch (err) {\n        call.sendStatus({\n          code: Status.UNKNOWN,\n          details: `Server method handler threw error ${\n            (err as Error).message\n          }`,\n          metadata: null,\n        });\n      }\n    },\n    onReceiveMessage(message) {\n      stream.push(message);\n    },\n    onReceiveHalfClose() {\n      stream.push(null);\n    },\n    onCancel() {\n      if (stream) {\n        stream.cancelled = true;\n        stream.emit('cancelled', 'cancelled');\n        stream.destroy();\n      }\n    },\n  });\n}\n\nfunction handleServerStreaming<RequestType, ResponseType>(\n  call: ServerInterceptingCallInterface,\n  handler: ServerStreamingHandler<RequestType, ResponseType>\n): void {\n  let stream: ServerWritableStream<RequestType, ResponseType>;\n\n  let requestMetadata: Metadata;\n  let requestMessage: RequestType | null = null;\n  call.start({\n    onReceiveMetadata(metadata) {\n      requestMetadata = metadata;\n      call.startRead();\n    },\n    onReceiveMessage(message) {\n      if (requestMessage) {\n        call.sendStatus({\n          code: Status.UNIMPLEMENTED,\n          details: `Received a second request message for server streaming method ${handler.path}`,\n          metadata: null,\n        });\n        return;\n      }\n      requestMessage = message;\n      call.startRead();\n    },\n    onReceiveHalfClose() {\n      if (!requestMessage) {\n        call.sendStatus({\n          code: Status.UNIMPLEMENTED,\n          details: `Received no request message for server streaming method ${handler.path}`,\n          metadata: null,\n        });\n        return;\n      }\n      stream = new ServerWritableStreamImpl(\n        handler.path,\n        call,\n        requestMetadata,\n        requestMessage\n      );\n      try {\n        handler.func(stream);\n      } catch (err) {\n        call.sendStatus({\n          code: Status.UNKNOWN,\n          details: `Server method handler threw error ${\n            (err as Error).message\n          }`,\n          metadata: null,\n        });\n      }\n    },\n    onCancel() {\n      if (stream) {\n        stream.cancelled = true;\n        stream.emit('cancelled', 'cancelled');\n        stream.destroy();\n      }\n    },\n  });\n}\n\nfunction handleBidiStreaming<RequestType, ResponseType>(\n  call: ServerInterceptingCallInterface,\n  handler: BidiStreamingHandler<RequestType, ResponseType>\n): void {\n  let stream: ServerDuplexStream<RequestType, ResponseType>;\n\n  call.start({\n    onReceiveMetadata(metadata) {\n      stream = new ServerDuplexStreamImpl(handler.path, call, metadata);\n      try {\n        handler.func(stream);\n      } catch (err) {\n        call.sendStatus({\n          code: Status.UNKNOWN,\n          details: `Server method handler threw error ${\n            (err as Error).message\n          }`,\n          metadata: null,\n        });\n      }\n    },\n    onReceiveMessage(message) {\n      stream.push(message);\n    },\n    onReceiveHalfClose() {\n      stream.push(null);\n    },\n    onCancel() {\n      if (stream) {\n        stream.cancelled = true;\n        stream.emit('cancelled', 'cancelled');\n        stream.destroy();\n      }\n    },\n  });\n}\n", "/*\n * Copyright 2019 gRPC authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n */\n\nimport { StatusObject } from './call-interface';\nimport { Status } from './constants';\nimport { Metadata } from './metadata';\n\n/**\n * A builder for gRPC status objects.\n */\nexport class StatusBuilder {\n  private code: Status | null;\n  private details: string | null;\n  private metadata: Metadata | null;\n\n  constructor() {\n    this.code = null;\n    this.details = null;\n    this.metadata = null;\n  }\n\n  /**\n   * Adds a status code to the builder.\n   */\n  withCode(code: Status): this {\n    this.code = code;\n    return this;\n  }\n\n  /**\n   * Adds details to the builder.\n   */\n  withDetails(details: string): this {\n    this.details = details;\n    return this;\n  }\n\n  /**\n   * Adds metadata to the builder.\n   */\n  withMetadata(metadata: Metadata): this {\n    this.metadata = metadata;\n    return this;\n  }\n\n  /**\n   * Builds the status object.\n   */\n  build(): Partial<StatusObject> {\n    const status: Partial<StatusObject> = {};\n\n    if (this.code !== null) {\n      status.code = this.code;\n    }\n\n    if (this.details !== null) {\n      status.details = this.details;\n    }\n\n    if (this.metadata !== null) {\n      status.metadata = this.metadata;\n    }\n\n    return status;\n  }\n}\n", "/*\n * Copyright 2019 gRPC authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n */\n\nimport {\n  LoadBalancer,\n  ChannelControlHelper,\n  TypedLoadBalancingConfig,\n  registerDefaultLoadBalancerType,\n  registerLoadBalancerType,\n  createChildChannelControlHelper,\n} from './load-balancer';\nimport { ConnectivityState } from './connectivity-state';\nimport {\n  QueuePicker,\n  Picker,\n  PickArgs,\n  CompletePickResult,\n  PickResultType,\n  UnavailablePicker,\n} from './picker';\nimport { Endpoint, SubchannelAddress, subchannelAddressToString } from './subchannel-address';\nimport * as logging from './logging';\nimport { LogVerbosity } from './constants';\nimport {\n  SubchannelInterface,\n  ConnectivityStateListener,\n  HealthListener,\n} from './subchannel-interface';\nimport { isTcpSubchannelAddress } from './subchannel-address';\nimport { isIPv6 } from 'net';\nimport { ChannelOptions } from './channel-options';\nimport { StatusOr, statusOrFromValue } from './call-interface';\n\nconst TRACER_NAME = 'pick_first';\n\nfunction trace(text: string): void {\n  logging.trace(LogVerbosity.DEBUG, TRACER_NAME, text);\n}\n\nconst TYPE_NAME = 'pick_first';\n\n/**\n * Delay after starting a connection on a subchannel before starting a\n * connection on the next subchannel in the list, for Happy Eyeballs algorithm.\n */\nconst CONNECTION_DELAY_INTERVAL_MS = 250;\n\nexport class PickFirstLoadBalancingConfig implements TypedLoadBalancingConfig {\n  constructor(private readonly shuffleAddressList: boolean) {}\n\n  getLoadBalancerName(): string {\n    return TYPE_NAME;\n  }\n\n  toJsonObject(): object {\n    return {\n      [TYPE_NAME]: {\n        shuffleAddressList: this.shuffleAddressList,\n      },\n    };\n  }\n\n  getShuffleAddressList() {\n    return this.shuffleAddressList;\n  }\n\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  static createFromJson(obj: any) {\n    if (\n      'shuffleAddressList' in obj &&\n      !(typeof obj.shuffleAddressList === 'boolean')\n    ) {\n      throw new Error(\n        'pick_first config field shuffleAddressList must be a boolean if provided'\n      );\n    }\n    return new PickFirstLoadBalancingConfig(obj.shuffleAddressList === true);\n  }\n}\n\n/**\n * Picker for a `PickFirstLoadBalancer` in the READY state. Always returns the\n * picked subchannel.\n */\nclass PickFirstPicker implements Picker {\n  constructor(private subchannel: SubchannelInterface) {}\n\n  pick(pickArgs: PickArgs): CompletePickResult {\n    return {\n      pickResultType: PickResultType.COMPLETE,\n      subchannel: this.subchannel,\n      status: null,\n      onCallStarted: null,\n      onCallEnded: null,\n    };\n  }\n}\n\ninterface SubchannelChild {\n  subchannel: SubchannelInterface;\n  hasReportedTransientFailure: boolean;\n}\n\n/**\n * Return a new array with the elements of the input array in a random order\n * @param list The input array\n * @returns A shuffled array of the elements of list\n */\nexport function shuffled<T>(list: T[]): T[] {\n  const result = list.slice();\n  for (let i = result.length - 1; i > 1; i--) {\n    const j = Math.floor(Math.random() * (i + 1));\n    const temp = result[i];\n    result[i] = result[j];\n    result[j] = temp;\n  }\n  return result;\n}\n\n/**\n * Interleave addresses in addressList by family in accordance with RFC-8304 section 4\n * @param addressList\n * @returns\n */\nfunction interleaveAddressFamilies(\n  addressList: SubchannelAddress[]\n): SubchannelAddress[] {\n  if (addressList.length === 0) {\n    return [];\n  }\n  const result: SubchannelAddress[] = [];\n  const ipv6Addresses: SubchannelAddress[] = [];\n  const ipv4Addresses: SubchannelAddress[] = [];\n  const ipv6First =\n    isTcpSubchannelAddress(addressList[0]) && isIPv6(addressList[0].host);\n  for (const address of addressList) {\n    if (isTcpSubchannelAddress(address) && isIPv6(address.host)) {\n      ipv6Addresses.push(address);\n    } else {\n      ipv4Addresses.push(address);\n    }\n  }\n  const firstList = ipv6First ? ipv6Addresses : ipv4Addresses;\n  const secondList = ipv6First ? ipv4Addresses : ipv6Addresses;\n  for (let i = 0; i < Math.max(firstList.length, secondList.length); i++) {\n    if (i < firstList.length) {\n      result.push(firstList[i]);\n    }\n    if (i < secondList.length) {\n      result.push(secondList[i]);\n    }\n  }\n  return result;\n}\n\nconst REPORT_HEALTH_STATUS_OPTION_NAME =\n  'grpc-node.internal.pick-first.report_health_status';\n\nexport class PickFirstLoadBalancer implements LoadBalancer {\n  /**\n   * The list of subchannels this load balancer is currently attempting to\n   * connect to.\n   */\n  private children: SubchannelChild[] = [];\n  /**\n   * The current connectivity state of the load balancer.\n   */\n  private currentState: ConnectivityState = ConnectivityState.IDLE;\n  /**\n   * The index within the `subchannels` array of the subchannel with the most\n   * recently started connection attempt.\n   */\n  private currentSubchannelIndex = 0;\n  /**\n   * The currently picked subchannel used for making calls. Populated if\n   * and only if the load balancer's current state is READY. In that case,\n   * the subchannel's current state is also READY.\n   */\n  private currentPick: SubchannelInterface | null = null;\n  /**\n   * Listener callback attached to each subchannel in the `subchannels` list\n   * while establishing a connection.\n   */\n  private subchannelStateListener: ConnectivityStateListener = (\n    subchannel,\n    previousState,\n    newState,\n    keepaliveTime,\n    errorMessage\n  ) => {\n    this.onSubchannelStateUpdate(\n      subchannel,\n      previousState,\n      newState,\n      errorMessage\n    );\n  };\n\n  private pickedSubchannelHealthListener: HealthListener = () =>\n    this.calculateAndReportNewState();\n  /**\n   * Timer reference for the timer tracking when to start\n   */\n  private connectionDelayTimeout: NodeJS.Timeout;\n\n  /**\n   * The LB policy enters sticky TRANSIENT_FAILURE mode when all\n   * subchannels have failed to connect at least once, and it stays in that\n   * mode until a connection attempt is successful. While in sticky TF mode,\n   * the LB policy continuously attempts to connect to all of its subchannels.\n   */\n  private stickyTransientFailureMode = false;\n\n  private reportHealthStatus: boolean = false;\n\n  /**\n   * The most recent error reported by any subchannel as it transitioned to\n   * TRANSIENT_FAILURE.\n   */\n  private lastError: string | null = null;\n\n  private latestAddressList: SubchannelAddress[] | null = null;\n\n  private latestOptions: ChannelOptions = {};\n\n  private latestResolutionNote: string = '';\n\n  /**\n   * Load balancer that attempts to connect to each backend in the address list\n   * in order, and picks the first one that connects, using it for every\n   * request.\n   * @param channelControlHelper `ChannelControlHelper` instance provided by\n   *     this load balancer's owner.\n   */\n  constructor(\n    private readonly channelControlHelper: ChannelControlHelper\n  ) {\n    this.connectionDelayTimeout = setTimeout(() => {}, 0);\n    clearTimeout(this.connectionDelayTimeout);\n  }\n\n  private allChildrenHaveReportedTF(): boolean {\n    return this.children.every(child => child.hasReportedTransientFailure);\n  }\n\n  private resetChildrenReportedTF() {\n    this.children.every(child => child.hasReportedTransientFailure = false);\n  }\n\n  private calculateAndReportNewState() {\n    if (this.currentPick) {\n      if (this.reportHealthStatus && !this.currentPick.isHealthy()) {\n        const errorMessage = `Picked subchannel ${this.currentPick.getAddress()} is unhealthy`;\n        this.updateState(\n          ConnectivityState.TRANSIENT_FAILURE,\n          new UnavailablePicker({\n            details: errorMessage,\n          }),\n          errorMessage\n        );\n      } else {\n        this.updateState(\n          ConnectivityState.READY,\n          new PickFirstPicker(this.currentPick),\n          null\n        );\n      }\n    } else if (this.latestAddressList?.length === 0) {\n      const errorMessage = `No connection established. Last error: ${this.lastError}. Resolution note: ${this.latestResolutionNote}`;\n      this.updateState(\n        ConnectivityState.TRANSIENT_FAILURE,\n        new UnavailablePicker({\n          details: errorMessage,\n        }),\n        errorMessage\n      );\n    } else if (this.children.length === 0) {\n      this.updateState(ConnectivityState.IDLE, new QueuePicker(this), null);\n    } else {\n      if (this.stickyTransientFailureMode) {\n        const errorMessage = `No connection established. Last error: ${this.lastError}. Resolution note: ${this.latestResolutionNote}`;\n        this.updateState(\n          ConnectivityState.TRANSIENT_FAILURE,\n          new UnavailablePicker({\n            details: errorMessage,\n          }),\n          errorMessage\n        );\n      } else {\n        this.updateState(ConnectivityState.CONNECTING, new QueuePicker(this), null);\n      }\n    }\n  }\n\n  private requestReresolution() {\n    this.channelControlHelper.requestReresolution();\n  }\n\n  private maybeEnterStickyTransientFailureMode() {\n    if (!this.allChildrenHaveReportedTF()) {\n      return;\n    }\n    this.requestReresolution();\n    this.resetChildrenReportedTF();\n    if (this.stickyTransientFailureMode) {\n      this.calculateAndReportNewState();\n      return;\n    }\n    this.stickyTransientFailureMode = true;\n    for (const { subchannel } of this.children) {\n      subchannel.startConnecting();\n    }\n    this.calculateAndReportNewState();\n  }\n\n  private removeCurrentPick() {\n    if (this.currentPick !== null) {\n      this.currentPick.removeConnectivityStateListener(this.subchannelStateListener);\n      this.channelControlHelper.removeChannelzChild(\n        this.currentPick.getChannelzRef()\n      );\n      this.currentPick.removeHealthStateWatcher(\n        this.pickedSubchannelHealthListener\n      );\n      // Unref last, to avoid triggering listeners\n      this.currentPick.unref();\n      this.currentPick = null;\n    }\n  }\n\n  private onSubchannelStateUpdate(\n    subchannel: SubchannelInterface,\n    previousState: ConnectivityState,\n    newState: ConnectivityState,\n    errorMessage?: string\n  ) {\n    if (this.currentPick?.realSubchannelEquals(subchannel)) {\n      if (newState !== ConnectivityState.READY) {\n        this.removeCurrentPick();\n        this.calculateAndReportNewState();\n      }\n      return;\n    }\n    for (const [index, child] of this.children.entries()) {\n      if (subchannel.realSubchannelEquals(child.subchannel)) {\n        if (newState === ConnectivityState.READY) {\n          this.pickSubchannel(child.subchannel);\n        }\n        if (newState === ConnectivityState.TRANSIENT_FAILURE) {\n          child.hasReportedTransientFailure = true;\n          if (errorMessage) {\n            this.lastError = errorMessage;\n          }\n          this.maybeEnterStickyTransientFailureMode();\n          if (index === this.currentSubchannelIndex) {\n            this.startNextSubchannelConnecting(index + 1);\n          }\n        }\n        child.subchannel.startConnecting();\n        return;\n      }\n    }\n  }\n\n  private startNextSubchannelConnecting(startIndex: number) {\n    clearTimeout(this.connectionDelayTimeout);\n    for (const [index, child] of this.children.entries()) {\n      if (index >= startIndex) {\n        const subchannelState = child.subchannel.getConnectivityState();\n        if (\n          subchannelState === ConnectivityState.IDLE ||\n          subchannelState === ConnectivityState.CONNECTING\n        ) {\n          this.startConnecting(index);\n          return;\n        }\n      }\n    }\n    this.maybeEnterStickyTransientFailureMode();\n  }\n\n  /**\n   * Have a single subchannel in the `subchannels` list start connecting.\n   * @param subchannelIndex The index into the `subchannels` list.\n   */\n  private startConnecting(subchannelIndex: number) {\n    clearTimeout(this.connectionDelayTimeout);\n    this.currentSubchannelIndex = subchannelIndex;\n    if (\n      this.children[subchannelIndex].subchannel.getConnectivityState() ===\n      ConnectivityState.IDLE\n    ) {\n      trace(\n        'Start connecting to subchannel with address ' +\n          this.children[subchannelIndex].subchannel.getAddress()\n      );\n      process.nextTick(() => {\n        this.children[subchannelIndex]?.subchannel.startConnecting();\n      });\n    }\n    this.connectionDelayTimeout = setTimeout(() => {\n      this.startNextSubchannelConnecting(subchannelIndex + 1);\n    }, CONNECTION_DELAY_INTERVAL_MS);\n    this.connectionDelayTimeout.unref?.();\n  }\n\n  /**\n   * Declare that the specified subchannel should be used to make requests.\n   * This functions the same independent of whether subchannel is a member of\n   * this.children and whether it is equal to this.currentPick.\n   * Prerequisite: subchannel.getConnectivityState() === READY.\n   * @param subchannel\n   */\n  private pickSubchannel(subchannel: SubchannelInterface) {\n    trace('Pick subchannel with address ' + subchannel.getAddress());\n    this.stickyTransientFailureMode = false;\n    /* Ref before removeCurrentPick and resetSubchannelList to avoid the\n     * refcount dropping to 0 during this process. */\n    subchannel.ref();\n    this.channelControlHelper.addChannelzChild(subchannel.getChannelzRef());\n    this.removeCurrentPick();\n    this.resetSubchannelList();\n    subchannel.addConnectivityStateListener(this.subchannelStateListener);\n    subchannel.addHealthStateWatcher(this.pickedSubchannelHealthListener);\n    this.currentPick = subchannel;\n    clearTimeout(this.connectionDelayTimeout);\n    this.calculateAndReportNewState();\n  }\n\n  private updateState(newState: ConnectivityState, picker: Picker, errorMessage: string | null) {\n    trace(\n      ConnectivityState[this.currentState] +\n        ' -> ' +\n        ConnectivityState[newState]\n    );\n    this.currentState = newState;\n    this.channelControlHelper.updateState(newState, picker, errorMessage);\n  }\n\n  private resetSubchannelList() {\n    for (const child of this.children) {\n      /* Always remoev the connectivity state listener. If the subchannel is\n         getting picked, it will be re-added then. */\n      child.subchannel.removeConnectivityStateListener(\n        this.subchannelStateListener\n      );\n      /* Refs are counted independently for the children list and the\n       * currentPick, so we call unref whether or not the child is the\n       * currentPick. Channelz child references are also refcounted, so\n       * removeChannelzChild can be handled the same way. */\n      child.subchannel.unref();\n      this.channelControlHelper.removeChannelzChild(\n        child.subchannel.getChannelzRef()\n      );\n    }\n    this.currentSubchannelIndex = 0;\n    this.children = [];\n  }\n\n  private connectToAddressList(addressList: SubchannelAddress[], options: ChannelOptions) {\n    trace('connectToAddressList([' + addressList.map(address => subchannelAddressToString(address)) + '])');\n    const newChildrenList = addressList.map(address => ({\n      subchannel: this.channelControlHelper.createSubchannel(address, options),\n      hasReportedTransientFailure: false,\n    }));\n    for (const { subchannel } of newChildrenList) {\n      if (subchannel.getConnectivityState() === ConnectivityState.READY) {\n        this.pickSubchannel(subchannel);\n        return;\n      }\n    }\n    /* Ref each subchannel before resetting the list, to ensure that\n     * subchannels shared between the list don't drop to 0 refs during the\n     * transition. */\n    for (const { subchannel } of newChildrenList) {\n      subchannel.ref();\n      this.channelControlHelper.addChannelzChild(subchannel.getChannelzRef());\n    }\n    this.resetSubchannelList();\n    this.children = newChildrenList;\n    for (const { subchannel } of this.children) {\n      subchannel.addConnectivityStateListener(this.subchannelStateListener);\n    }\n    for (const child of this.children) {\n      if (\n        child.subchannel.getConnectivityState() ===\n        ConnectivityState.TRANSIENT_FAILURE\n      ) {\n        child.hasReportedTransientFailure = true;\n      }\n    }\n    this.startNextSubchannelConnecting(0);\n    this.calculateAndReportNewState();\n  }\n\n  updateAddressList(\n    maybeEndpointList: StatusOr<Endpoint[]>,\n    lbConfig: TypedLoadBalancingConfig,\n    options: ChannelOptions,\n    resolutionNote: string\n  ): boolean {\n    if (!(lbConfig instanceof PickFirstLoadBalancingConfig)) {\n      return false;\n    }\n    if (!maybeEndpointList.ok) {\n      if (this.children.length === 0 && this.currentPick === null) {\n        this.channelControlHelper.updateState(\n          ConnectivityState.TRANSIENT_FAILURE,\n          new UnavailablePicker(maybeEndpointList.error),\n          maybeEndpointList.error.details\n        );\n      }\n      return true;\n    }\n    let endpointList = maybeEndpointList.value;\n    this.reportHealthStatus = options[REPORT_HEALTH_STATUS_OPTION_NAME];\n    /* Previously, an update would be discarded if it was identical to the\n     * previous update, to minimize churn. Now the DNS resolver is\n     * rate-limited, so that is less of a concern. */\n    if (lbConfig.getShuffleAddressList()) {\n      endpointList = shuffled(endpointList);\n    }\n    const rawAddressList = ([] as SubchannelAddress[]).concat(\n      ...endpointList.map(endpoint => endpoint.addresses)\n    );\n    trace('updateAddressList([' + rawAddressList.map(address => subchannelAddressToString(address)) + '])');\n    const addressList = interleaveAddressFamilies(rawAddressList);\n    this.latestAddressList = addressList;\n    this.latestOptions = options;\n    this.connectToAddressList(addressList, options);\n    this.latestResolutionNote = resolutionNote;\n    if (rawAddressList.length > 0) {\n      return true;\n    } else {\n      this.lastError = 'No addresses resolved';\n      return false;\n    }\n  }\n\n  exitIdle() {\n    if (\n      this.currentState === ConnectivityState.IDLE &&\n      this.latestAddressList\n    ) {\n      this.connectToAddressList(this.latestAddressList, this.latestOptions);\n    }\n  }\n\n  resetBackoff() {\n    /* The pick first load balancer does not have a connection backoff, so this\n     * does nothing */\n  }\n\n  destroy() {\n    this.resetSubchannelList();\n    this.removeCurrentPick();\n  }\n\n  getTypeName(): string {\n    return TYPE_NAME;\n  }\n}\n\nconst LEAF_CONFIG = new PickFirstLoadBalancingConfig(false);\n\n/**\n * This class handles the leaf load balancing operations for a single endpoint.\n * It is a thin wrapper around a PickFirstLoadBalancer with a different API\n * that more closely reflects how it will be used as a leaf balancer.\n */\nexport class LeafLoadBalancer {\n  private pickFirstBalancer: PickFirstLoadBalancer;\n  private latestState: ConnectivityState = ConnectivityState.IDLE;\n  private latestPicker: Picker;\n  constructor(\n    private endpoint: Endpoint,\n    channelControlHelper: ChannelControlHelper,\n    private options: ChannelOptions,\n    private resolutionNote: string\n  ) {\n    const childChannelControlHelper = createChildChannelControlHelper(\n      channelControlHelper,\n      {\n        updateState: (connectivityState, picker, errorMessage) => {\n          this.latestState = connectivityState;\n          this.latestPicker = picker;\n          channelControlHelper.updateState(connectivityState, picker, errorMessage);\n        },\n      }\n    );\n    this.pickFirstBalancer = new PickFirstLoadBalancer(\n      childChannelControlHelper\n    );\n    this.latestPicker = new QueuePicker(this.pickFirstBalancer);\n  }\n\n  startConnecting() {\n    this.pickFirstBalancer.updateAddressList(\n      statusOrFromValue([this.endpoint]),\n      LEAF_CONFIG,\n      { ...this.options, [REPORT_HEALTH_STATUS_OPTION_NAME]: true },\n      this.resolutionNote\n    );\n  }\n\n  /**\n   * Update the endpoint associated with this LeafLoadBalancer to a new\n   * endpoint. Does not trigger connection establishment if a connection\n   * attempt is not already in progress.\n   * @param newEndpoint\n   */\n  updateEndpoint(newEndpoint: Endpoint, newOptions: ChannelOptions) {\n    this.options = newOptions;\n    this.endpoint = newEndpoint;\n    if (this.latestState !== ConnectivityState.IDLE) {\n      this.startConnecting();\n    }\n  }\n\n  getConnectivityState() {\n    return this.latestState;\n  }\n\n  getPicker() {\n    return this.latestPicker;\n  }\n\n  getEndpoint() {\n    return this.endpoint;\n  }\n\n  exitIdle() {\n    this.pickFirstBalancer.exitIdle();\n  }\n\n  destroy() {\n    this.pickFirstBalancer.destroy();\n  }\n}\n\nexport function setup(): void {\n  registerLoadBalancerType(\n    TYPE_NAME,\n    PickFirstLoadBalancer,\n    PickFirstLoadBalancingConfig\n  );\n  registerDefaultLoadBalancerType(TYPE_NAME);\n}\n", "/*\n * Copyright 2024 gRPC authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n */\n\nimport * as fs from 'fs';\nimport * as logging from './logging';\nimport { LogVerbosity } from './constants';\nimport { promisify } from 'util';\n\nconst TRACER_NAME = 'certificate_provider';\n\nfunction trace(text: string) {\n  logging.trace(LogVerbosity.DEBUG, TRACER_NAME, text);\n}\n\nexport interface CaCertificateUpdate {\n  caCertificate: Buffer;\n}\n\nexport interface IdentityCertificateUpdate {\n  certificate: Buffer;\n  privateKey: Buffer;\n}\n\nexport interface CaCertificateUpdateListener {\n  (update: CaCertificateUpdate | null): void;\n}\n\nexport interface IdentityCertificateUpdateListener {\n  (update: IdentityCertificateUpdate | null) : void;\n}\n\nexport interface CertificateProvider {\n  addCaCertificateListener(listener: CaCertificateUpdateListener): void;\n  removeCaCertificateListener(listener: CaCertificateUpdateListener): void;\n  addIdentityCertificateListener(listener: IdentityCertificateUpdateListener): void;\n  removeIdentityCertificateListener(listener: IdentityCertificateUpdateListener): void;\n}\n\nexport interface FileWatcherCertificateProviderConfig {\n  certificateFile?: string | undefined;\n  privateKeyFile?: string | undefined;\n  caCertificateFile?: string | undefined;\n  refreshIntervalMs: number;\n}\n\nconst readFilePromise = promisify(fs.readFile);\n\nexport class FileWatcherCertificateProvider implements CertificateProvider {\n  private refreshTimer: NodeJS.Timeout | null = null;\n  private fileResultPromise: Promise<[PromiseSettledResult<Buffer>, PromiseSettledResult<Buffer>, PromiseSettledResult<Buffer>]> | null = null;\n  private latestCaUpdate: CaCertificateUpdate | null | undefined = undefined;\n  private caListeners: Set<CaCertificateUpdateListener> = new Set();\n  private latestIdentityUpdate: IdentityCertificateUpdate | null | undefined = undefined;\n  private identityListeners: Set<IdentityCertificateUpdateListener> = new Set();\n  private lastUpdateTime: Date | null = null;\n\n  constructor(\n    private config: FileWatcherCertificateProviderConfig\n  ) {\n    if ((config.certificateFile === undefined) !== (config.privateKeyFile === undefined)) {\n      throw new Error('certificateFile and privateKeyFile must be set or unset together');\n    }\n    if (config.certificateFile === undefined && config.caCertificateFile === undefined) {\n      throw new Error('At least one of certificateFile and caCertificateFile must be set');\n    }\n    trace('File watcher constructed with config ' + JSON.stringify(config));\n  }\n\n  private updateCertificates() {\n    if (this.fileResultPromise) {\n      return;\n    }\n    this.fileResultPromise = Promise.allSettled([\n      this.config.certificateFile ? readFilePromise(this.config.certificateFile) : Promise.reject<Buffer>(),\n      this.config.privateKeyFile ? readFilePromise(this.config.privateKeyFile) : Promise.reject<Buffer>(),\n      this.config.caCertificateFile ? readFilePromise(this.config.caCertificateFile) : Promise.reject<Buffer>()\n    ]);\n    this.fileResultPromise.then(([certificateResult, privateKeyResult, caCertificateResult]) => {\n      if (!this.refreshTimer) {\n        return;\n      }\n      trace('File watcher read certificates certificate ' + certificateResult.status + ', privateKey ' + privateKeyResult.status + ', CA certificate ' + caCertificateResult.status);\n      this.lastUpdateTime = new Date();\n      this.fileResultPromise = null;\n      if (certificateResult.status === 'fulfilled' && privateKeyResult.status === 'fulfilled') {\n        this.latestIdentityUpdate = {\n          certificate: certificateResult.value,\n          privateKey: privateKeyResult.value\n        };\n      } else {\n        this.latestIdentityUpdate = null;\n      }\n      if (caCertificateResult.status === 'fulfilled') {\n        this.latestCaUpdate = {\n          caCertificate: caCertificateResult.value\n        };\n      } else {\n        this.latestCaUpdate = null;\n      }\n      for (const listener of this.identityListeners) {\n        listener(this.latestIdentityUpdate);\n      }\n      for (const listener of this.caListeners) {\n        listener(this.latestCaUpdate);\n      }\n    });\n    trace('File watcher initiated certificate update');\n  }\n\n  private maybeStartWatchingFiles() {\n    if (!this.refreshTimer) {\n      /* Perform the first read immediately, but only if there was not already\n       * a recent read, to avoid reading from the filesystem significantly more\n       * frequently than configured if the provider quickly switches between\n       * used and unused. */\n      const timeSinceLastUpdate = this.lastUpdateTime ? (new Date()).getTime() - this.lastUpdateTime.getTime() : Infinity;\n      if (timeSinceLastUpdate > this.config.refreshIntervalMs) {\n        this.updateCertificates();\n      }\n      if (timeSinceLastUpdate > this.config.refreshIntervalMs * 2) {\n        // Clear out old updates if they are definitely stale\n        this.latestCaUpdate = undefined;\n        this.latestIdentityUpdate = undefined;\n      }\n      this.refreshTimer = setInterval(() => this.updateCertificates(), this.config.refreshIntervalMs);\n      trace('File watcher started watching');\n    }\n  }\n\n  private maybeStopWatchingFiles() {\n    if (this.caListeners.size === 0 && this.identityListeners.size === 0) {\n      this.fileResultPromise = null;\n      if (this.refreshTimer) {\n        clearInterval(this.refreshTimer);\n        this.refreshTimer = null;\n      }\n    }\n  }\n\n  addCaCertificateListener(listener: CaCertificateUpdateListener): void {\n    this.caListeners.add(listener);\n    this.maybeStartWatchingFiles();\n    if (this.latestCaUpdate !== undefined) {\n      process.nextTick(listener, this.latestCaUpdate);\n    }\n  }\n  removeCaCertificateListener(listener: CaCertificateUpdateListener): void {\n    this.caListeners.delete(listener);\n    this.maybeStopWatchingFiles();\n  }\n  addIdentityCertificateListener(listener: IdentityCertificateUpdateListener): void {\n    this.identityListeners.add(listener);\n    this.maybeStartWatchingFiles();\n    if (this.latestIdentityUpdate !== undefined) {\n      process.nextTick(listener, this.latestIdentityUpdate);\n    }\n  }\n  removeIdentityCertificateListener(listener: IdentityCertificateUpdateListener): void {\n    this.identityListeners.delete(listener);\n    this.maybeStopWatchingFiles();\n  }\n}\n", "export { trace, log } from './logging';\nexport {\n  Resolver,\n  ResolverListener,\n  registerResolver,\n  ConfigSelector,\n  createResolver,\n  CHANNEL_ARGS_CONFIG_SELECTOR_KEY,\n} from './resolver';\nexport { GrpcUri, uriToString, splitHostPort, HostPort } from './uri-parser';\nexport { Duration, durationToMs, parseDuration } from './duration';\nexport { BackoffTimeout } from './backoff-timeout';\nexport {\n  LoadBalancer,\n  TypedLoadBalancingConfig,\n  ChannelControlHelper,\n  createChildChannelControlHelper,\n  registerLoadBalancerType,\n  selectLbConfigFromList,\n  parseLoadBalancingConfig,\n  isLoadBalancerNameRegistered,\n} from './load-balancer';\nexport { LeafLoadBalancer } from './load-balancer-pick-first';\nexport {\n  SubchannelAddress,\n  subchannelAddressToString,\n  Endpoint,\n  endpointToString,\n  endpointHasAddress,\n  EndpointMap,\n} from './subchannel-address';\nexport { ChildLoadBalancerHandler } from './load-balancer-child-handler';\nexport {\n  Picker,\n  UnavailablePicker,\n  QueuePicker,\n  PickResult,\n  PickArgs,\n  PickResultType,\n} from './picker';\nexport {\n  Call as CallStream,\n  StatusOr,\n  statusOrFromValue,\n  statusOrFromError\n} from './call-interface';\nexport { Filter, BaseFilter, FilterFactory } from './filter';\nexport { FilterStackFactory } from './filter-stack';\nexport { registerAdminService } from './admin';\nexport {\n  SubchannelInterface,\n  BaseSubchannelWrapper,\n  ConnectivityStateListener,\n  HealthListener,\n} from './subchannel-interface';\nexport {\n  OutlierDetectionRawConfig,\n  SuccessRateEjectionConfig,\n  FailurePercentageEjectionConfig,\n} from './load-balancer-outlier-detection';\n\nexport { createServerCredentialsWithInterceptors, createCertificateProviderServerCredentials } from './server-credentials';\nexport {\n  CaCertificateUpdate,\n  CaCertificateUpdateListener,\n  IdentityCertificateUpdate,\n  IdentityCertificateUpdateListener,\n  CertificateProvider,\n  FileWatcherCertificateProvider,\n  FileWatcherCertificateProviderConfig\n} from './certificate-provider';\nexport { createCertificateProviderChannelCredentials, SecureConnector, SecureConnectResult } from './channel-credentials';\nexport { SUBCHANNEL_ARGS_EXCLUDE_KEY_PREFIX } from './internal-channel';\n", "/*\n * Copyright 2019 gRPC authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Resolver, ResolverListener, registerResolver } from './resolver';\nimport { Endpoint } from './subchannel-address';\nimport { GrpcUri } from './uri-parser';\nimport { ChannelOptions } from './channel-options';\nimport { statusOrFromValue } from './call-interface';\n\nclass UdsResolver implements Resolver {\n  private hasReturnedResult = false;\n  private endpoints: Endpoint[] = [];\n  constructor(\n    target: GrpcUri,\n    private listener: ResolverListener,\n    channelOptions: ChannelOptions\n  ) {\n    let path: string;\n    if (target.authority === '') {\n      path = '/' + target.path;\n    } else {\n      path = target.path;\n    }\n    this.endpoints = [{ addresses: [{ path }] }];\n  }\n  updateResolution(): void {\n    if (!this.hasReturnedResult) {\n      this.hasReturnedResult = true;\n      process.nextTick(\n        this.listener,\n        statusOrFromValue(this.endpoints),\n        {},\n        null,\n        ''\n      );\n    }\n  }\n\n  destroy() {\n    this.hasReturnedResult = false;\n  }\n\n  static getDefaultAuthority(target: GrpcUri): string {\n    return 'localhost';\n  }\n}\n\nexport function setup() {\n  registerResolver('unix', UdsResolver);\n}\n", "/*\n * Copyright 2021 gRPC authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { isIPv4, isIPv6 } from 'net';\nimport { StatusObject, statusOrFromError, statusOrFromValue } from './call-interface';\nimport { ChannelOptions } from './channel-options';\nimport { LogVerbosity, Status } from './constants';\nimport { Metadata } from './metadata';\nimport { registerResolver, Resolver, ResolverListener } from './resolver';\nimport { Endpoint, SubchannelAddress, subchannelAddressToString } from './subchannel-address';\nimport { GrpcUri, splitHostPort, uriToString } from './uri-parser';\nimport * as logging from './logging';\n\nconst TRACER_NAME = 'ip_resolver';\n\nfunction trace(text: string): void {\n  logging.trace(LogVerbosity.DEBUG, TRACER_NAME, text);\n}\n\nconst IPV4_SCHEME = 'ipv4';\nconst IPV6_SCHEME = 'ipv6';\n\n/**\n * The default TCP port to connect to if not explicitly specified in the target.\n */\nconst DEFAULT_PORT = 443;\n\nclass IpResolver implements Resolver {\n  private endpoints: Endpoint[] = [];\n  private error: StatusObject | null = null;\n  private hasReturnedResult = false;\n  constructor(\n    target: GrpcUri,\n    private listener: ResolverListener,\n    channelOptions: ChannelOptions\n  ) {\n    trace('Resolver constructed for target ' + uriToString(target));\n    const addresses: SubchannelAddress[] = [];\n    if (!(target.scheme === IPV4_SCHEME || target.scheme === IPV6_SCHEME)) {\n      this.error = {\n        code: Status.UNAVAILABLE,\n        details: `Unrecognized scheme ${target.scheme} in IP resolver`,\n        metadata: new Metadata(),\n      };\n      return;\n    }\n    const pathList = target.path.split(',');\n    for (const path of pathList) {\n      const hostPort = splitHostPort(path);\n      if (hostPort === null) {\n        this.error = {\n          code: Status.UNAVAILABLE,\n          details: `Failed to parse ${target.scheme} address ${path}`,\n          metadata: new Metadata(),\n        };\n        return;\n      }\n      if (\n        (target.scheme === IPV4_SCHEME && !isIPv4(hostPort.host)) ||\n        (target.scheme === IPV6_SCHEME && !isIPv6(hostPort.host))\n      ) {\n        this.error = {\n          code: Status.UNAVAILABLE,\n          details: `Failed to parse ${target.scheme} address ${path}`,\n          metadata: new Metadata(),\n        };\n        return;\n      }\n      addresses.push({\n        host: hostPort.host,\n        port: hostPort.port ?? DEFAULT_PORT,\n      });\n    }\n    this.endpoints = addresses.map(address => ({ addresses: [address] }));\n    trace('Parsed ' + target.scheme + ' address list ' + addresses.map(subchannelAddressToString));\n  }\n  updateResolution(): void {\n    if (!this.hasReturnedResult) {\n      this.hasReturnedResult = true;\n      process.nextTick(() => {\n        if (this.error) {\n          this.listener(\n            statusOrFromError(this.error),\n            {},\n            null,\n            ''\n          );\n        } else {\n          this.listener(\n            statusOrFromValue(this.endpoints),\n            {},\n            null,\n            ''\n          );\n        }\n      });\n    }\n  }\n  destroy(): void {\n    this.hasReturnedResult = false;\n  }\n\n  static getDefaultAuthority(target: GrpcUri): string {\n    return target.path.split(',')[0];\n  }\n}\n\nexport function setup() {\n  registerResolver(IPV4_SCHEME, IpResolver);\n  registerResolver(IPV6_SCHEME, IpResolver);\n}\n", "/*\n * Copyright 2019 gRPC authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n */\n\nimport {\n  LoadBalancer,\n  ChannelControlHelper,\n  TypedLoadBalancingConfig,\n  registerLoadBalancerType,\n  createChildChannelControlHelper,\n} from './load-balancer';\nimport { ConnectivityState } from './connectivity-state';\nimport {\n  QueuePicker,\n  Picker,\n  PickArgs,\n  UnavailablePicker,\n  PickResult,\n} from './picker';\nimport * as logging from './logging';\nimport { LogVerbosity } from './constants';\nimport {\n  Endpoint,\n  endpointEqual,\n  endpointToString,\n} from './subchannel-address';\nimport { LeafLoadBalancer } from './load-balancer-pick-first';\nimport { ChannelOptions } from './channel-options';\nimport { StatusOr } from './call-interface';\n\nconst TRACER_NAME = 'round_robin';\n\nfunction trace(text: string): void {\n  logging.trace(LogVerbosity.DEBUG, TRACER_NAME, text);\n}\n\nconst TYPE_NAME = 'round_robin';\n\nclass RoundRobinLoadBalancingConfig implements TypedLoadBalancingConfig {\n  getLoadBalancerName(): string {\n    return TYPE_NAME;\n  }\n\n  constructor() {}\n\n  toJsonObject(): object {\n    return {\n      [TYPE_NAME]: {},\n    };\n  }\n\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  static createFromJson(obj: any) {\n    return new RoundRobinLoadBalancingConfig();\n  }\n}\n\nclass RoundRobinPicker implements Picker {\n  constructor(\n    private readonly children: { endpoint: Endpoint; picker: Picker }[],\n    private nextIndex = 0\n  ) {}\n\n  pick(pickArgs: PickArgs): PickResult {\n    const childPicker = this.children[this.nextIndex].picker;\n    this.nextIndex = (this.nextIndex + 1) % this.children.length;\n    return childPicker.pick(pickArgs);\n  }\n\n  /**\n   * Check what the next subchannel returned would be. Used by the load\n   * balancer implementation to preserve this part of the picker state if\n   * possible when a subchannel connects or disconnects.\n   */\n  peekNextEndpoint(): Endpoint {\n    return this.children[this.nextIndex].endpoint;\n  }\n}\n\nfunction rotateArray<T>(list: T[], startIndex: number) {\n  return [...list.slice(startIndex), ...list.slice(0, startIndex)];\n}\n\nexport class RoundRobinLoadBalancer implements LoadBalancer {\n  private children: LeafLoadBalancer[] = [];\n\n  private currentState: ConnectivityState = ConnectivityState.IDLE;\n\n  private currentReadyPicker: RoundRobinPicker | null = null;\n\n  private updatesPaused = false;\n\n  private childChannelControlHelper: ChannelControlHelper;\n\n  private lastError: string | null = null;\n\n  constructor(\n    private readonly channelControlHelper: ChannelControlHelper\n  ) {\n    this.childChannelControlHelper = createChildChannelControlHelper(\n      channelControlHelper,\n      {\n        updateState: (connectivityState, picker, errorMessage) => {\n          /* Ensure that name resolution is requested again after active\n           * connections are dropped. This is more aggressive than necessary to\n           * accomplish that, so we are counting on resolvers to have\n           * reasonable rate limits. */\n          if (this.currentState === ConnectivityState.READY && connectivityState !== ConnectivityState.READY) {\n            this.channelControlHelper.requestReresolution();\n          }\n          if (errorMessage) {\n            this.lastError = errorMessage;\n          }\n          this.calculateAndUpdateState();\n        },\n      }\n    );\n  }\n\n  private countChildrenWithState(state: ConnectivityState) {\n    return this.children.filter(child => child.getConnectivityState() === state)\n      .length;\n  }\n\n  private calculateAndUpdateState() {\n    if (this.updatesPaused) {\n      return;\n    }\n    if (this.countChildrenWithState(ConnectivityState.READY) > 0) {\n      const readyChildren = this.children.filter(\n        child => child.getConnectivityState() === ConnectivityState.READY\n      );\n      let index = 0;\n      if (this.currentReadyPicker !== null) {\n        const nextPickedEndpoint = this.currentReadyPicker.peekNextEndpoint();\n        index = readyChildren.findIndex(child =>\n          endpointEqual(child.getEndpoint(), nextPickedEndpoint)\n        );\n        if (index < 0) {\n          index = 0;\n        }\n      }\n      this.updateState(\n        ConnectivityState.READY,\n        new RoundRobinPicker(\n          readyChildren.map(child => ({\n            endpoint: child.getEndpoint(),\n            picker: child.getPicker(),\n          })),\n          index\n        ),\n        null\n      );\n    } else if (this.countChildrenWithState(ConnectivityState.CONNECTING) > 0) {\n      this.updateState(ConnectivityState.CONNECTING, new QueuePicker(this), null);\n    } else if (\n      this.countChildrenWithState(ConnectivityState.TRANSIENT_FAILURE) > 0\n    ) {\n      const errorMessage = `round_robin: No connection established. Last error: ${this.lastError}`;\n      this.updateState(\n        ConnectivityState.TRANSIENT_FAILURE,\n        new UnavailablePicker({\n          details: errorMessage,\n        }),\n        errorMessage\n      );\n    } else {\n      this.updateState(ConnectivityState.IDLE, new QueuePicker(this), null);\n    }\n    /* round_robin should keep all children connected, this is how we do that.\n     * We can't do this more efficiently in the individual child's updateState\n     * callback because that doesn't have a reference to which child the state\n     * change is associated with. */\n    for (const child of this.children) {\n      if (child.getConnectivityState() === ConnectivityState.IDLE) {\n        child.exitIdle();\n      }\n    }\n  }\n\n  private updateState(newState: ConnectivityState, picker: Picker, errorMessage: string | null) {\n    trace(\n      ConnectivityState[this.currentState] +\n        ' -> ' +\n        ConnectivityState[newState]\n    );\n    if (newState === ConnectivityState.READY) {\n      this.currentReadyPicker = picker as RoundRobinPicker;\n    } else {\n      this.currentReadyPicker = null;\n    }\n    this.currentState = newState;\n    this.channelControlHelper.updateState(newState, picker, errorMessage);\n  }\n\n  private resetSubchannelList() {\n    for (const child of this.children) {\n      child.destroy();\n    }\n    this.children = [];\n  }\n\n  updateAddressList(\n    maybeEndpointList: StatusOr<Endpoint[]>,\n    lbConfig: TypedLoadBalancingConfig,\n    options: ChannelOptions,\n    resolutionNote: string\n  ): boolean {\n    if (!(lbConfig instanceof RoundRobinLoadBalancingConfig)) {\n      return false;\n    }\n    if (!maybeEndpointList.ok) {\n      if (this.children.length === 0) {\n        this.updateState(\n          ConnectivityState.TRANSIENT_FAILURE,\n          new UnavailablePicker(maybeEndpointList.error),\n          maybeEndpointList.error.details\n        );\n      }\n      return true;\n    }\n    const startIndex = (Math.random() * maybeEndpointList.value.length) | 0;\n    const endpointList = rotateArray(maybeEndpointList.value, startIndex);\n    this.resetSubchannelList();\n    if (endpointList.length === 0) {\n      const errorMessage = `No addresses resolved. Resolution note: ${resolutionNote}`;\n      this.updateState(\n        ConnectivityState.TRANSIENT_FAILURE,\n        new UnavailablePicker({details: errorMessage}),\n        errorMessage\n      );\n    }\n    trace('Connect to endpoint list ' + endpointList.map(endpointToString));\n    this.updatesPaused = true;\n    this.children = endpointList.map(\n      endpoint =>\n        new LeafLoadBalancer(\n          endpoint,\n          this.childChannelControlHelper,\n          options,\n          resolutionNote\n        )\n    );\n    for (const child of this.children) {\n      child.startConnecting();\n    }\n    this.updatesPaused = false;\n    this.calculateAndUpdateState();\n    return true;\n  }\n\n  exitIdle(): void {\n    /* The round_robin LB policy is only in the IDLE state if it has no\n     * addresses to try to connect to and it has no picked subchannel.\n     * In that case, there is no meaningful action that can be taken here. */\n  }\n  resetBackoff(): void {\n    // This LB policy has no backoff to reset\n  }\n  destroy(): void {\n    this.resetSubchannelList();\n  }\n  getTypeName(): string {\n    return TYPE_NAME;\n  }\n}\n\nexport function setup() {\n  registerLoadBalancerType(\n    TYPE_NAME,\n    RoundRobinLoadBalancer,\n    RoundRobinLoadBalancingConfig\n  );\n}\n", "/*\n * Copyright 2022 gRPC authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n */\n\nimport { ChannelOptions } from './channel-options';\nimport { ConnectivityState } from './connectivity-state';\nimport { LogVerbosity, Status } from './constants';\nimport { Duration, durationToMs, isDuration, msToDuration } from './duration';\nimport {\n  ChannelControlHelper,\n  createChildChannelControlHelper,\n  registerLoadBalancerType,\n} from './experimental';\nimport {\n  selectLbConfigFromList,\n  LoadBalancer,\n  TypedLoadBalancingConfig,\n} from './load-balancer';\nimport { ChildLoadBalancerHandler } from './load-balancer-child-handler';\nimport { PickArgs, Picker, PickResult, PickResultType } from './picker';\nimport {\n  Endpoint,\n  EndpointMap,\n  SubchannelAddress,\n  endpointToString,\n} from './subchannel-address';\nimport {\n  BaseSubchannelWrapper,\n  SubchannelInterface,\n} from './subchannel-interface';\nimport * as logging from './logging';\nimport { LoadBalancingConfig } from './service-config';\nimport { StatusOr } from './call-interface';\n\nconst TRACER_NAME = 'outlier_detection';\n\nfunction trace(text: string): void {\n  logging.trace(LogVerbosity.DEBUG, TRACER_NAME, text);\n}\n\nconst TYPE_NAME = 'outlier_detection';\n\nconst OUTLIER_DETECTION_ENABLED =\n  (process.env.GRPC_EXPERIMENTAL_ENABLE_OUTLIER_DETECTION ?? 'true') === 'true';\n\nexport interface SuccessRateEjectionConfig {\n  readonly stdev_factor: number;\n  readonly enforcement_percentage: number;\n  readonly minimum_hosts: number;\n  readonly request_volume: number;\n}\n\nexport interface FailurePercentageEjectionConfig {\n  readonly threshold: number;\n  readonly enforcement_percentage: number;\n  readonly minimum_hosts: number;\n  readonly request_volume: number;\n}\n\nexport interface OutlierDetectionRawConfig {\n  interval?: Duration;\n  base_ejection_time?: Duration;\n  max_ejection_time?: Duration;\n  max_ejection_percent?: number;\n  success_rate_ejection?: Partial<SuccessRateEjectionConfig>;\n  failure_percentage_ejection?: Partial<FailurePercentageEjectionConfig>;\n  child_policy: LoadBalancingConfig[];\n}\n\nconst defaultSuccessRateEjectionConfig: SuccessRateEjectionConfig = {\n  stdev_factor: 1900,\n  enforcement_percentage: 100,\n  minimum_hosts: 5,\n  request_volume: 100,\n};\n\nconst defaultFailurePercentageEjectionConfig: FailurePercentageEjectionConfig =\n  {\n    threshold: 85,\n    enforcement_percentage: 100,\n    minimum_hosts: 5,\n    request_volume: 50,\n  };\n\ntype TypeofValues =\n  | 'object'\n  | 'boolean'\n  | 'function'\n  | 'number'\n  | 'string'\n  | 'undefined';\n\nfunction validateFieldType(\n  obj: any,\n  fieldName: string,\n  expectedType: TypeofValues,\n  objectName?: string\n) {\n  if (\n    fieldName in obj &&\n    obj[fieldName] !== undefined &&\n    typeof obj[fieldName] !== expectedType\n  ) {\n    const fullFieldName = objectName ? `${objectName}.${fieldName}` : fieldName;\n    throw new Error(\n      `outlier detection config ${fullFieldName} parse error: expected ${expectedType}, got ${typeof obj[\n        fieldName\n      ]}`\n    );\n  }\n}\n\nfunction validatePositiveDuration(\n  obj: any,\n  fieldName: string,\n  objectName?: string\n) {\n  const fullFieldName = objectName ? `${objectName}.${fieldName}` : fieldName;\n  if (fieldName in obj && obj[fieldName] !== undefined) {\n    if (!isDuration(obj[fieldName])) {\n      throw new Error(\n        `outlier detection config ${fullFieldName} parse error: expected Duration, got ${typeof obj[\n          fieldName\n        ]}`\n      );\n    }\n    if (\n      !(\n        obj[fieldName].seconds >= 0 &&\n        obj[fieldName].seconds <= 315_576_000_000 &&\n        obj[fieldName].nanos >= 0 &&\n        obj[fieldName].nanos <= 999_999_999\n      )\n    ) {\n      throw new Error(\n        `outlier detection config ${fullFieldName} parse error: values out of range for non-negative Duaration`\n      );\n    }\n  }\n}\n\nfunction validatePercentage(obj: any, fieldName: string, objectName?: string) {\n  const fullFieldName = objectName ? `${objectName}.${fieldName}` : fieldName;\n  validateFieldType(obj, fieldName, 'number', objectName);\n  if (\n    fieldName in obj &&\n    obj[fieldName] !== undefined &&\n    !(obj[fieldName] >= 0 && obj[fieldName] <= 100)\n  ) {\n    throw new Error(\n      `outlier detection config ${fullFieldName} parse error: value out of range for percentage (0-100)`\n    );\n  }\n}\n\nexport class OutlierDetectionLoadBalancingConfig\n  implements TypedLoadBalancingConfig\n{\n  private readonly intervalMs: number;\n  private readonly baseEjectionTimeMs: number;\n  private readonly maxEjectionTimeMs: number;\n  private readonly maxEjectionPercent: number;\n  private readonly successRateEjection: SuccessRateEjectionConfig | null;\n  private readonly failurePercentageEjection: FailurePercentageEjectionConfig | null;\n\n  constructor(\n    intervalMs: number | null,\n    baseEjectionTimeMs: number | null,\n    maxEjectionTimeMs: number | null,\n    maxEjectionPercent: number | null,\n    successRateEjection: Partial<SuccessRateEjectionConfig> | null,\n    failurePercentageEjection: Partial<FailurePercentageEjectionConfig> | null,\n    private readonly childPolicy: TypedLoadBalancingConfig\n  ) {\n    if (childPolicy.getLoadBalancerName() === 'pick_first') {\n      throw new Error(\n        'outlier_detection LB policy cannot have a pick_first child policy'\n      );\n    }\n    this.intervalMs = intervalMs ?? 10_000;\n    this.baseEjectionTimeMs = baseEjectionTimeMs ?? 30_000;\n    this.maxEjectionTimeMs = maxEjectionTimeMs ?? 300_000;\n    this.maxEjectionPercent = maxEjectionPercent ?? 10;\n    this.successRateEjection = successRateEjection\n      ? { ...defaultSuccessRateEjectionConfig, ...successRateEjection }\n      : null;\n    this.failurePercentageEjection = failurePercentageEjection\n      ? {\n          ...defaultFailurePercentageEjectionConfig,\n          ...failurePercentageEjection,\n        }\n      : null;\n  }\n  getLoadBalancerName(): string {\n    return TYPE_NAME;\n  }\n  toJsonObject(): object {\n    return {\n      outlier_detection: {\n        interval: msToDuration(this.intervalMs),\n        base_ejection_time: msToDuration(this.baseEjectionTimeMs),\n        max_ejection_time: msToDuration(this.maxEjectionTimeMs),\n        max_ejection_percent: this.maxEjectionPercent,\n        success_rate_ejection: this.successRateEjection ?? undefined,\n        failure_percentage_ejection:\n          this.failurePercentageEjection ?? undefined,\n        child_policy: [this.childPolicy.toJsonObject()],\n      },\n    };\n  }\n\n  getIntervalMs(): number {\n    return this.intervalMs;\n  }\n  getBaseEjectionTimeMs(): number {\n    return this.baseEjectionTimeMs;\n  }\n  getMaxEjectionTimeMs(): number {\n    return this.maxEjectionTimeMs;\n  }\n  getMaxEjectionPercent(): number {\n    return this.maxEjectionPercent;\n  }\n  getSuccessRateEjectionConfig(): SuccessRateEjectionConfig | null {\n    return this.successRateEjection;\n  }\n  getFailurePercentageEjectionConfig(): FailurePercentageEjectionConfig | null {\n    return this.failurePercentageEjection;\n  }\n  getChildPolicy(): TypedLoadBalancingConfig {\n    return this.childPolicy;\n  }\n\n  static createFromJson(obj: any): OutlierDetectionLoadBalancingConfig {\n    validatePositiveDuration(obj, 'interval');\n    validatePositiveDuration(obj, 'base_ejection_time');\n    validatePositiveDuration(obj, 'max_ejection_time');\n    validatePercentage(obj, 'max_ejection_percent');\n    if (\n      'success_rate_ejection' in obj &&\n      obj.success_rate_ejection !== undefined\n    ) {\n      if (typeof obj.success_rate_ejection !== 'object') {\n        throw new Error(\n          'outlier detection config success_rate_ejection must be an object'\n        );\n      }\n      validateFieldType(\n        obj.success_rate_ejection,\n        'stdev_factor',\n        'number',\n        'success_rate_ejection'\n      );\n      validatePercentage(\n        obj.success_rate_ejection,\n        'enforcement_percentage',\n        'success_rate_ejection'\n      );\n      validateFieldType(\n        obj.success_rate_ejection,\n        'minimum_hosts',\n        'number',\n        'success_rate_ejection'\n      );\n      validateFieldType(\n        obj.success_rate_ejection,\n        'request_volume',\n        'number',\n        'success_rate_ejection'\n      );\n    }\n    if (\n      'failure_percentage_ejection' in obj &&\n      obj.failure_percentage_ejection !== undefined\n    ) {\n      if (typeof obj.failure_percentage_ejection !== 'object') {\n        throw new Error(\n          'outlier detection config failure_percentage_ejection must be an object'\n        );\n      }\n      validatePercentage(\n        obj.failure_percentage_ejection,\n        'threshold',\n        'failure_percentage_ejection'\n      );\n      validatePercentage(\n        obj.failure_percentage_ejection,\n        'enforcement_percentage',\n        'failure_percentage_ejection'\n      );\n      validateFieldType(\n        obj.failure_percentage_ejection,\n        'minimum_hosts',\n        'number',\n        'failure_percentage_ejection'\n      );\n      validateFieldType(\n        obj.failure_percentage_ejection,\n        'request_volume',\n        'number',\n        'failure_percentage_ejection'\n      );\n    }\n\n    if (!('child_policy' in obj) || !Array.isArray(obj.child_policy)) {\n      throw new Error('outlier detection config child_policy must be an array');\n    }\n    const childPolicy = selectLbConfigFromList(obj.child_policy);\n    if (!childPolicy) {\n      throw new Error(\n        'outlier detection config child_policy: no valid recognized policy found'\n      );\n    }\n\n    return new OutlierDetectionLoadBalancingConfig(\n      obj.interval ? durationToMs(obj.interval) : null,\n      obj.base_ejection_time ? durationToMs(obj.base_ejection_time) : null,\n      obj.max_ejection_time ? durationToMs(obj.max_ejection_time) : null,\n      obj.max_ejection_percent ?? null,\n      obj.success_rate_ejection,\n      obj.failure_percentage_ejection,\n      childPolicy\n    );\n  }\n}\n\nclass OutlierDetectionSubchannelWrapper\n  extends BaseSubchannelWrapper\n  implements SubchannelInterface\n{\n  private refCount = 0;\n  constructor(\n    childSubchannel: SubchannelInterface,\n    private mapEntry?: MapEntry\n  ) {\n    super(childSubchannel);\n  }\n\n  ref() {\n    this.child.ref();\n    this.refCount += 1;\n  }\n\n  unref() {\n    this.child.unref();\n    this.refCount -= 1;\n    if (this.refCount <= 0) {\n      if (this.mapEntry) {\n        const index = this.mapEntry.subchannelWrappers.indexOf(this);\n        if (index >= 0) {\n          this.mapEntry.subchannelWrappers.splice(index, 1);\n        }\n      }\n    }\n  }\n\n  eject() {\n    this.setHealthy(false);\n  }\n\n  uneject() {\n    this.setHealthy(true);\n  }\n\n  getMapEntry(): MapEntry | undefined {\n    return this.mapEntry;\n  }\n\n  getWrappedSubchannel(): SubchannelInterface {\n    return this.child;\n  }\n}\n\ninterface CallCountBucket {\n  success: number;\n  failure: number;\n}\n\nfunction createEmptyBucket(): CallCountBucket {\n  return {\n    success: 0,\n    failure: 0,\n  };\n}\n\nclass CallCounter {\n  private activeBucket: CallCountBucket = createEmptyBucket();\n  private inactiveBucket: CallCountBucket = createEmptyBucket();\n  addSuccess() {\n    this.activeBucket.success += 1;\n  }\n  addFailure() {\n    this.activeBucket.failure += 1;\n  }\n  switchBuckets() {\n    this.inactiveBucket = this.activeBucket;\n    this.activeBucket = createEmptyBucket();\n  }\n  getLastSuccesses() {\n    return this.inactiveBucket.success;\n  }\n  getLastFailures() {\n    return this.inactiveBucket.failure;\n  }\n}\n\nclass OutlierDetectionPicker implements Picker {\n  constructor(private wrappedPicker: Picker, private countCalls: boolean) {}\n  pick(pickArgs: PickArgs): PickResult {\n    const wrappedPick = this.wrappedPicker.pick(pickArgs);\n    if (wrappedPick.pickResultType === PickResultType.COMPLETE) {\n      const subchannelWrapper =\n        wrappedPick.subchannel as OutlierDetectionSubchannelWrapper;\n      const mapEntry = subchannelWrapper.getMapEntry();\n      if (mapEntry) {\n        let onCallEnded = wrappedPick.onCallEnded;\n        if (this.countCalls) {\n          onCallEnded = (statusCode, details, metadata) => {\n            if (statusCode === Status.OK) {\n              mapEntry.counter.addSuccess();\n            } else {\n              mapEntry.counter.addFailure();\n            }\n            wrappedPick.onCallEnded?.(statusCode, details, metadata);\n          };\n        }\n        return {\n          ...wrappedPick,\n          subchannel: subchannelWrapper.getWrappedSubchannel(),\n          onCallEnded: onCallEnded,\n        };\n      } else {\n        return {\n          ...wrappedPick,\n          subchannel: subchannelWrapper.getWrappedSubchannel(),\n        };\n      }\n    } else {\n      return wrappedPick;\n    }\n  }\n}\n\ninterface MapEntry {\n  counter: CallCounter;\n  currentEjectionTimestamp: Date | null;\n  ejectionTimeMultiplier: number;\n  subchannelWrappers: OutlierDetectionSubchannelWrapper[];\n}\n\nexport class OutlierDetectionLoadBalancer implements LoadBalancer {\n  private childBalancer: ChildLoadBalancerHandler;\n  private entryMap = new EndpointMap<MapEntry>();\n  private latestConfig: OutlierDetectionLoadBalancingConfig | null = null;\n  private ejectionTimer: NodeJS.Timeout;\n  private timerStartTime: Date | null = null;\n\n  constructor(\n    channelControlHelper: ChannelControlHelper\n  ) {\n    this.childBalancer = new ChildLoadBalancerHandler(\n      createChildChannelControlHelper(channelControlHelper, {\n        createSubchannel: (\n          subchannelAddress: SubchannelAddress,\n          subchannelArgs: ChannelOptions\n        ) => {\n          const originalSubchannel = channelControlHelper.createSubchannel(\n            subchannelAddress,\n            subchannelArgs\n          );\n          const mapEntry =\n            this.entryMap.getForSubchannelAddress(subchannelAddress);\n          const subchannelWrapper = new OutlierDetectionSubchannelWrapper(\n            originalSubchannel,\n            mapEntry\n          );\n          if (mapEntry?.currentEjectionTimestamp !== null) {\n            // If the address is ejected, propagate that to the new subchannel wrapper\n            subchannelWrapper.eject();\n          }\n          mapEntry?.subchannelWrappers.push(subchannelWrapper);\n          return subchannelWrapper;\n        },\n        updateState: (connectivityState: ConnectivityState, picker: Picker, errorMessage: string) => {\n          if (connectivityState === ConnectivityState.READY) {\n            channelControlHelper.updateState(\n              connectivityState,\n              new OutlierDetectionPicker(picker, this.isCountingEnabled()),\n              errorMessage\n            );\n          } else {\n            channelControlHelper.updateState(connectivityState, picker, errorMessage);\n          }\n        },\n      })\n    );\n    this.ejectionTimer = setInterval(() => {}, 0);\n    clearInterval(this.ejectionTimer);\n  }\n\n  private isCountingEnabled(): boolean {\n    return (\n      this.latestConfig !== null &&\n      (this.latestConfig.getSuccessRateEjectionConfig() !== null ||\n        this.latestConfig.getFailurePercentageEjectionConfig() !== null)\n    );\n  }\n\n  private getCurrentEjectionPercent() {\n    let ejectionCount = 0;\n    for (const mapEntry of this.entryMap.values()) {\n      if (mapEntry.currentEjectionTimestamp !== null) {\n        ejectionCount += 1;\n      }\n    }\n    return (ejectionCount * 100) / this.entryMap.size;\n  }\n\n  private runSuccessRateCheck(ejectionTimestamp: Date) {\n    if (!this.latestConfig) {\n      return;\n    }\n    const successRateConfig = this.latestConfig.getSuccessRateEjectionConfig();\n    if (!successRateConfig) {\n      return;\n    }\n    trace('Running success rate check');\n    // Step 1\n    const targetRequestVolume = successRateConfig.request_volume;\n    let addresesWithTargetVolume = 0;\n    const successRates: number[] = [];\n    for (const [endpoint, mapEntry] of this.entryMap.entries()) {\n      const successes = mapEntry.counter.getLastSuccesses();\n      const failures = mapEntry.counter.getLastFailures();\n      trace(\n        'Stats for ' +\n          endpointToString(endpoint) +\n          ': successes=' +\n          successes +\n          ' failures=' +\n          failures +\n          ' targetRequestVolume=' +\n          targetRequestVolume\n      );\n      if (successes + failures >= targetRequestVolume) {\n        addresesWithTargetVolume += 1;\n        successRates.push(successes / (successes + failures));\n      }\n    }\n    trace(\n      'Found ' +\n        addresesWithTargetVolume +\n        ' success rate candidates; currentEjectionPercent=' +\n        this.getCurrentEjectionPercent() +\n        ' successRates=[' +\n        successRates +\n        ']'\n    );\n    if (addresesWithTargetVolume < successRateConfig.minimum_hosts) {\n      return;\n    }\n\n    // Step 2\n    const successRateMean =\n      successRates.reduce((a, b) => a + b) / successRates.length;\n    let successRateDeviationSum = 0;\n    for (const rate of successRates) {\n      const deviation = rate - successRateMean;\n      successRateDeviationSum += deviation * deviation;\n    }\n    const successRateVariance = successRateDeviationSum / successRates.length;\n    const successRateStdev = Math.sqrt(successRateVariance);\n    const ejectionThreshold =\n      successRateMean -\n      successRateStdev * (successRateConfig.stdev_factor / 1000);\n    trace(\n      'stdev=' + successRateStdev + ' ejectionThreshold=' + ejectionThreshold\n    );\n\n    // Step 3\n    for (const [address, mapEntry] of this.entryMap.entries()) {\n      // Step 3.i\n      if (\n        this.getCurrentEjectionPercent() >=\n        this.latestConfig.getMaxEjectionPercent()\n      ) {\n        break;\n      }\n      // Step 3.ii\n      const successes = mapEntry.counter.getLastSuccesses();\n      const failures = mapEntry.counter.getLastFailures();\n      if (successes + failures < targetRequestVolume) {\n        continue;\n      }\n      // Step 3.iii\n      const successRate = successes / (successes + failures);\n      trace('Checking candidate ' + address + ' successRate=' + successRate);\n      if (successRate < ejectionThreshold) {\n        const randomNumber = Math.random() * 100;\n        trace(\n          'Candidate ' +\n            address +\n            ' randomNumber=' +\n            randomNumber +\n            ' enforcement_percentage=' +\n            successRateConfig.enforcement_percentage\n        );\n        if (randomNumber < successRateConfig.enforcement_percentage) {\n          trace('Ejecting candidate ' + address);\n          this.eject(mapEntry, ejectionTimestamp);\n        }\n      }\n    }\n  }\n\n  private runFailurePercentageCheck(ejectionTimestamp: Date) {\n    if (!this.latestConfig) {\n      return;\n    }\n    const failurePercentageConfig =\n      this.latestConfig.getFailurePercentageEjectionConfig();\n    if (!failurePercentageConfig) {\n      return;\n    }\n    trace(\n      'Running failure percentage check. threshold=' +\n        failurePercentageConfig.threshold +\n        ' request volume threshold=' +\n        failurePercentageConfig.request_volume\n    );\n    // Step 1\n    let addressesWithTargetVolume = 0;\n    for (const mapEntry of this.entryMap.values()) {\n      const successes = mapEntry.counter.getLastSuccesses();\n      const failures = mapEntry.counter.getLastFailures();\n      if (successes + failures >= failurePercentageConfig.request_volume) {\n        addressesWithTargetVolume += 1;\n      }\n    }\n    if (addressesWithTargetVolume < failurePercentageConfig.minimum_hosts) {\n      return;\n    }\n\n    // Step 2\n    for (const [address, mapEntry] of this.entryMap.entries()) {\n      // Step 2.i\n      if (\n        this.getCurrentEjectionPercent() >=\n        this.latestConfig.getMaxEjectionPercent()\n      ) {\n        break;\n      }\n      // Step 2.ii\n      const successes = mapEntry.counter.getLastSuccesses();\n      const failures = mapEntry.counter.getLastFailures();\n      trace('Candidate successes=' + successes + ' failures=' + failures);\n      if (successes + failures < failurePercentageConfig.request_volume) {\n        continue;\n      }\n      // Step 2.iii\n      const failurePercentage = (failures * 100) / (failures + successes);\n      if (failurePercentage > failurePercentageConfig.threshold) {\n        const randomNumber = Math.random() * 100;\n        trace(\n          'Candidate ' +\n            address +\n            ' randomNumber=' +\n            randomNumber +\n            ' enforcement_percentage=' +\n            failurePercentageConfig.enforcement_percentage\n        );\n        if (randomNumber < failurePercentageConfig.enforcement_percentage) {\n          trace('Ejecting candidate ' + address);\n          this.eject(mapEntry, ejectionTimestamp);\n        }\n      }\n    }\n  }\n\n  private eject(mapEntry: MapEntry, ejectionTimestamp: Date) {\n    mapEntry.currentEjectionTimestamp = new Date();\n    mapEntry.ejectionTimeMultiplier += 1;\n    for (const subchannelWrapper of mapEntry.subchannelWrappers) {\n      subchannelWrapper.eject();\n    }\n  }\n\n  private uneject(mapEntry: MapEntry) {\n    mapEntry.currentEjectionTimestamp = null;\n    for (const subchannelWrapper of mapEntry.subchannelWrappers) {\n      subchannelWrapper.uneject();\n    }\n  }\n\n  private switchAllBuckets() {\n    for (const mapEntry of this.entryMap.values()) {\n      mapEntry.counter.switchBuckets();\n    }\n  }\n\n  private startTimer(delayMs: number) {\n    this.ejectionTimer = setTimeout(() => this.runChecks(), delayMs);\n    this.ejectionTimer.unref?.();\n  }\n\n  private runChecks() {\n    const ejectionTimestamp = new Date();\n    trace('Ejection timer running');\n\n    this.switchAllBuckets();\n\n    if (!this.latestConfig) {\n      return;\n    }\n    this.timerStartTime = ejectionTimestamp;\n    this.startTimer(this.latestConfig.getIntervalMs());\n\n    this.runSuccessRateCheck(ejectionTimestamp);\n    this.runFailurePercentageCheck(ejectionTimestamp);\n\n    for (const [address, mapEntry] of this.entryMap.entries()) {\n      if (mapEntry.currentEjectionTimestamp === null) {\n        if (mapEntry.ejectionTimeMultiplier > 0) {\n          mapEntry.ejectionTimeMultiplier -= 1;\n        }\n      } else {\n        const baseEjectionTimeMs = this.latestConfig.getBaseEjectionTimeMs();\n        const maxEjectionTimeMs = this.latestConfig.getMaxEjectionTimeMs();\n        const returnTime = new Date(\n          mapEntry.currentEjectionTimestamp.getTime()\n        );\n        returnTime.setMilliseconds(\n          returnTime.getMilliseconds() +\n            Math.min(\n              baseEjectionTimeMs * mapEntry.ejectionTimeMultiplier,\n              Math.max(baseEjectionTimeMs, maxEjectionTimeMs)\n            )\n        );\n        if (returnTime < new Date()) {\n          trace('Unejecting ' + address);\n          this.uneject(mapEntry);\n        }\n      }\n    }\n  }\n\n  updateAddressList(\n    endpointList: StatusOr<Endpoint[]>,\n    lbConfig: TypedLoadBalancingConfig,\n    options: ChannelOptions,\n    resolutionNote: string\n  ): boolean {\n    if (!(lbConfig instanceof OutlierDetectionLoadBalancingConfig)) {\n      return false;\n    }\n    trace('Received update with config: ' + JSON.stringify(lbConfig.toJsonObject(), undefined, 2));\n    if (endpointList.ok) {\n      for (const endpoint of endpointList.value) {\n        if (!this.entryMap.has(endpoint)) {\n          trace('Adding map entry for ' + endpointToString(endpoint));\n          this.entryMap.set(endpoint, {\n            counter: new CallCounter(),\n            currentEjectionTimestamp: null,\n            ejectionTimeMultiplier: 0,\n            subchannelWrappers: [],\n          });\n        }\n      }\n      this.entryMap.deleteMissing(endpointList.value);\n    }\n    const childPolicy = lbConfig.getChildPolicy();\n    this.childBalancer.updateAddressList(endpointList, childPolicy, options, resolutionNote);\n\n    if (\n      lbConfig.getSuccessRateEjectionConfig() ||\n      lbConfig.getFailurePercentageEjectionConfig()\n    ) {\n      if (this.timerStartTime) {\n        trace('Previous timer existed. Replacing timer');\n        clearTimeout(this.ejectionTimer);\n        const remainingDelay =\n          lbConfig.getIntervalMs() -\n          (new Date().getTime() - this.timerStartTime.getTime());\n        this.startTimer(remainingDelay);\n      } else {\n        trace('Starting new timer');\n        this.timerStartTime = new Date();\n        this.startTimer(lbConfig.getIntervalMs());\n        this.switchAllBuckets();\n      }\n    } else {\n      trace('Counting disabled. Cancelling timer.');\n      this.timerStartTime = null;\n      clearTimeout(this.ejectionTimer);\n      for (const mapEntry of this.entryMap.values()) {\n        this.uneject(mapEntry);\n        mapEntry.ejectionTimeMultiplier = 0;\n      }\n    }\n\n    this.latestConfig = lbConfig;\n    return true;\n  }\n  exitIdle(): void {\n    this.childBalancer.exitIdle();\n  }\n  resetBackoff(): void {\n    this.childBalancer.resetBackoff();\n  }\n  destroy(): void {\n    clearTimeout(this.ejectionTimer);\n    this.childBalancer.destroy();\n  }\n  getTypeName(): string {\n    return TYPE_NAME;\n  }\n}\n\nexport function setup() {\n  if (OUTLIER_DETECTION_ENABLED) {\n    registerLoadBalancerType(\n      TYPE_NAME,\n      OutlierDetectionLoadBalancer,\n      OutlierDetectionLoadBalancingConfig\n    );\n  }\n}\n", "/*\n * Copyright 2025 gRPC authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n */\n\nconst top = 0;\nconst parent = (i: number) => Math.floor(i / 2);\nconst left = (i: number) => i * 2 + 1;\nconst right = (i: number) => i * 2 + 2;\n\n/**\n * A generic priority queue implemented as an array-based binary heap.\n * Adapted from https://stackoverflow.com/a/42919752/159388\n */\nexport class PriorityQueue<T=number> {\n  private readonly heap: T[] = [];\n  /**\n   *\n   * @param comparator Returns true if the first argument should precede the\n   *   second in the queue. Defaults to `(a, b) => a > b`\n   */\n  constructor(private readonly comparator = (a: T, b: T) => a > b) {}\n\n  /**\n   * @returns The number of items currently in the queue\n   */\n  size(): number {\n    return this.heap.length;\n  }\n  /**\n   * @returns True if there are no items in the queue, false otherwise\n   */\n  isEmpty(): boolean {\n    return this.size() == 0;\n  }\n  /**\n   * Look at the front item that would be popped, without modifying the contents\n   * of the queue\n   * @returns The front item in the queue, or undefined if the queue is empty\n   */\n  peek(): T | undefined {\n    return this.heap[top];\n  }\n  /**\n   * Add the items to the queue\n   * @param values The items to add\n   * @returns The new size of the queue after adding the items\n   */\n  push(...values: T[]): number {\n    values.forEach(value => {\n      this.heap.push(value);\n      this.siftUp();\n    });\n    return this.size();\n  }\n  /**\n   * Remove the front item in the queue and return it\n   * @returns The front item in the queue, or undefined if the queue is empty\n   */\n  pop(): T | undefined {\n    const poppedValue = this.peek();\n    const bottom = this.size() - 1;\n    if (bottom > top) {\n      this.swap(top, bottom);\n    }\n    this.heap.pop();\n    this.siftDown();\n    return poppedValue;\n  }\n  /**\n   * Simultaneously remove the front item in the queue and add the provided\n   * item.\n   * @param value The item to add\n   * @returns The front item in the queue, or undefined if the queue is empty\n   */\n  replace(value: T): T | undefined {\n    const replacedValue = this.peek();\n    this.heap[top] = value;\n    this.siftDown();\n    return replacedValue;\n  }\n  private greater(i: number, j: number): boolean {\n    return this.comparator(this.heap[i], this.heap[j]);\n  }\n  private swap(i: number, j: number): void {\n    [this.heap[i], this.heap[j]] = [this.heap[j], this.heap[i]];\n  }\n  private siftUp(): void {\n    let node = this.size() - 1;\n    while (node > top && this.greater(node, parent(node))) {\n      this.swap(node, parent(node));\n      node = parent(node);\n    }\n  }\n  private siftDown(): void {\n    let node = top;\n    while (\n      (left(node) < this.size() && this.greater(left(node), node)) ||\n      (right(node) < this.size() && this.greater(right(node), node))\n    ) {\n      let maxChild = (right(node) < this.size() && this.greater(right(node), left(node))) ? right(node) : left(node);\n      this.swap(node, maxChild);\n      node = maxChild;\n    }\n  }\n}\n", "/*\n * Copyright 2025 gRPC authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n */\n\nimport { StatusOr } from './call-interface';\nimport { ChannelOptions } from './channel-options';\nimport { ConnectivityState } from './connectivity-state';\nimport { LogVerbosity } from './constants';\nimport { Duration, durationMessageToDuration, durationToMs, durationToString, isDuration, isDurationMessage, msToDuration, parseDuration } from './duration';\nimport { OrcaLoadReport__Output } from './generated/xds/data/orca/v3/OrcaLoadReport';\nimport { ChannelControlHelper, createChildChannelControlHelper, LoadBalancer, registerLoadBalancerType, TypedLoadBalancingConfig } from './load-balancer';\nimport { LeafLoadBalancer } from './load-balancer-pick-first';\nimport * as logging from './logging';\nimport { createMetricsReader, MetricsListener, OrcaOobMetricsSubchannelWrapper } from './orca';\nimport { PickArgs, Picker, PickResult, PickResultType, QueuePicker, UnavailablePicker } from './picker';\nimport { PriorityQueue } from './priority-queue';\nimport { Endpoint, endpointToString } from './subchannel-address';\n\nconst TRACER_NAME = 'weighted_round_robin';\n\nfunction trace(text: string): void {\n  logging.trace(LogVerbosity.DEBUG, TRACER_NAME, text);\n}\n\nconst TYPE_NAME = 'weighted_round_robin';\n\nconst DEFAULT_OOB_REPORTING_PERIOD_MS = 10_000;\nconst DEFAULT_BLACKOUT_PERIOD_MS = 10_000;\nconst DEFAULT_WEIGHT_EXPIRATION_PERIOD_MS = 3 * 60_000;\nconst DEFAULT_WEIGHT_UPDATE_PERIOD_MS = 1_000;\nconst DEFAULT_ERROR_UTILIZATION_PENALTY = 1;\n\ntype TypeofValues =\n  | 'object'\n  | 'boolean'\n  | 'function'\n  | 'number'\n  | 'string'\n  | 'undefined';\n\nfunction validateFieldType(\n  obj: any,\n  fieldName: string,\n  expectedType: TypeofValues\n) {\n  if (\n    fieldName in obj &&\n    obj[fieldName] !== undefined &&\n    typeof obj[fieldName] !== expectedType\n  ) {\n    throw new Error(\n      `weighted round robin config ${fieldName} parse error: expected ${expectedType}, got ${typeof obj[\n        fieldName\n      ]}`\n    );\n  }\n}\n\nfunction parseDurationField(obj: any, fieldName: string): number | null {\n  if (fieldName in obj && obj[fieldName] !== undefined && obj[fieldName] !== null) {\n    let durationObject: Duration;\n    if (isDuration(obj[fieldName])) {\n      durationObject = obj[fieldName];\n    } else if (isDurationMessage(obj[fieldName])) {\n      durationObject = durationMessageToDuration(obj[fieldName]);\n    } else if (typeof obj[fieldName] === 'string') {\n      const parsedDuration = parseDuration(obj[fieldName]);\n      if (!parsedDuration) {\n        throw new Error(`weighted round robin config ${fieldName}: failed to parse duration string ${obj[fieldName]}`);\n      }\n      durationObject = parsedDuration;\n    } else {\n      throw new Error(`weighted round robin config ${fieldName}: expected duration, got ${typeof obj[fieldName]}`);\n    }\n    return durationToMs(durationObject);\n  }\n  return null;\n}\n\nexport class WeightedRoundRobinLoadBalancingConfig implements TypedLoadBalancingConfig {\n  private readonly enableOobLoadReport: boolean;\n  private readonly oobLoadReportingPeriodMs: number;\n  private readonly blackoutPeriodMs: number;\n  private readonly weightExpirationPeriodMs: number;\n  private readonly weightUpdatePeriodMs: number;\n  private readonly errorUtilizationPenalty: number;\n\n  constructor(\n    enableOobLoadReport: boolean | null,\n    oobLoadReportingPeriodMs: number | null,\n    blackoutPeriodMs: number | null,\n    weightExpirationPeriodMs: number | null,\n    weightUpdatePeriodMs: number | null,\n    errorUtilizationPenalty: number | null\n  ) {\n    this.enableOobLoadReport = enableOobLoadReport ?? false;\n    this.oobLoadReportingPeriodMs = oobLoadReportingPeriodMs ?? DEFAULT_OOB_REPORTING_PERIOD_MS;\n    this.blackoutPeriodMs = blackoutPeriodMs ?? DEFAULT_BLACKOUT_PERIOD_MS;\n    this.weightExpirationPeriodMs = weightExpirationPeriodMs ?? DEFAULT_WEIGHT_EXPIRATION_PERIOD_MS;\n    this.weightUpdatePeriodMs = Math.max(weightUpdatePeriodMs ?? DEFAULT_WEIGHT_UPDATE_PERIOD_MS, 100);\n    this.errorUtilizationPenalty = errorUtilizationPenalty ?? DEFAULT_ERROR_UTILIZATION_PENALTY;\n  }\n\n  getLoadBalancerName(): string {\n    return TYPE_NAME;\n  }\n  toJsonObject(): object {\n    return {\n      enable_oob_load_report: this.enableOobLoadReport,\n      oob_load_reporting_period: durationToString(msToDuration(this.oobLoadReportingPeriodMs)),\n      blackout_period: durationToString(msToDuration(this.blackoutPeriodMs)),\n      weight_expiration_period: durationToString(msToDuration(this.weightExpirationPeriodMs)),\n      weight_update_period: durationToString(msToDuration(this.weightUpdatePeriodMs)),\n      error_utilization_penalty: this.errorUtilizationPenalty\n    };\n  }\n  static createFromJson(obj: any): WeightedRoundRobinLoadBalancingConfig {\n    validateFieldType(obj, 'enable_oob_load_report', 'boolean');\n    validateFieldType(obj, 'error_utilization_penalty', 'number');\n    if (obj.error_utilization_penalty < 0) {\n      throw new Error('weighted round robin config error_utilization_penalty < 0');\n    }\n    return new WeightedRoundRobinLoadBalancingConfig(\n      obj.enable_oob_load_report,\n      parseDurationField(obj, 'oob_load_reporting_period'),\n      parseDurationField(obj, 'blackout_period'),\n      parseDurationField(obj, 'weight_expiration_period'),\n      parseDurationField(obj, 'weight_update_period'),\n      obj.error_utilization_penalty\n    )\n  }\n\n  getEnableOobLoadReport() {\n    return this.enableOobLoadReport;\n  }\n  getOobLoadReportingPeriodMs() {\n    return this.oobLoadReportingPeriodMs;\n  }\n  getBlackoutPeriodMs() {\n    return this.blackoutPeriodMs;\n  }\n  getWeightExpirationPeriodMs() {\n    return this.weightExpirationPeriodMs;\n  }\n  getWeightUpdatePeriodMs() {\n    return this.weightUpdatePeriodMs;\n  }\n  getErrorUtilizationPenalty() {\n    return this.errorUtilizationPenalty;\n  }\n}\n\ninterface WeightedPicker {\n  endpointName: string;\n  picker: Picker;\n  weight: number;\n}\n\ninterface QueueEntry {\n  endpointName: string;\n  picker: Picker;\n  period: number;\n  deadline: number;\n}\n\ntype MetricsHandler = (loadReport: OrcaLoadReport__Output, endpointName: string) => void;\n\nclass WeightedRoundRobinPicker implements Picker {\n  private queue: PriorityQueue<QueueEntry> = new PriorityQueue((a, b) => a.deadline < b.deadline);\n  constructor(children: WeightedPicker[], private readonly metricsHandler: MetricsHandler | null) {\n    const positiveWeight = children.filter(picker => picker.weight > 0);\n    let averageWeight: number;\n    if (positiveWeight.length < 2) {\n      averageWeight = 1;\n    } else {\n      let weightSum: number = 0;\n      for (const { weight } of positiveWeight) {\n        weightSum += weight;\n      }\n      averageWeight = weightSum / positiveWeight.length;\n    }\n    for (const child of children) {\n      const period = child.weight > 0 ? 1 / child.weight : averageWeight;\n      this.queue.push({\n        endpointName: child.endpointName,\n        picker: child.picker,\n        period: period,\n        deadline: Math.random() * period\n      });\n    }\n  }\n  pick(pickArgs: PickArgs): PickResult {\n    const entry = this.queue.pop()!;\n    this.queue.push({\n      ...entry,\n      deadline: entry.deadline + entry.period\n    })\n    const childPick = entry.picker.pick(pickArgs);\n    if (childPick.pickResultType === PickResultType.COMPLETE) {\n      if (this.metricsHandler) {\n        return {\n          ...childPick,\n          onCallEnded: createMetricsReader(loadReport => this.metricsHandler!(loadReport, entry.endpointName), childPick.onCallEnded)\n        };\n      } else {\n        const subchannelWrapper = childPick.subchannel as OrcaOobMetricsSubchannelWrapper;\n        return {\n          ...childPick,\n          subchannel: subchannelWrapper.getWrappedSubchannel()\n        }\n      }\n    } else {\n      return childPick;\n    }\n  }\n}\n\ninterface ChildEntry {\n  child: LeafLoadBalancer;\n  lastUpdated: Date;\n  nonEmptySince: Date | null;\n  weight: number;\n  oobMetricsListener: MetricsListener | null;\n}\n\nclass WeightedRoundRobinLoadBalancer implements LoadBalancer {\n  private latestConfig: WeightedRoundRobinLoadBalancingConfig | null = null;\n\n  private children: Map<string, ChildEntry> = new Map();\n\n  private currentState: ConnectivityState = ConnectivityState.IDLE;\n\n  private updatesPaused = false;\n\n  private lastError: string | null = null;\n\n  private weightUpdateTimer: NodeJS.Timeout | null = null;\n\n  constructor(private readonly channelControlHelper: ChannelControlHelper) {}\n\n  private countChildrenWithState(state: ConnectivityState) {\n    let count = 0;\n    for (const entry of this.children.values()) {\n      if (entry.child.getConnectivityState() === state) {\n        count += 1;\n      }\n    }\n    return count;\n  }\n\n  updateWeight(entry: ChildEntry, loadReport: OrcaLoadReport__Output): void {\n    const qps = loadReport.rps_fractional;\n    let utilization = loadReport.application_utilization;\n    if (utilization > 0 && qps > 0) {\n      utilization += (loadReport.eps / qps) * (this.latestConfig?.getErrorUtilizationPenalty() ?? 0);\n    }\n    const newWeight = utilization === 0 ? 0 : qps / utilization;\n    if (newWeight === 0) {\n      return;\n    }\n    const now = new Date();\n    if (entry.nonEmptySince === null) {\n      entry.nonEmptySince = now;\n    }\n    entry.lastUpdated = now;\n    entry.weight = newWeight;\n  }\n\n  getWeight(entry: ChildEntry): number {\n    if (!this.latestConfig) {\n      return 0;\n    }\n    const now = new Date().getTime();\n    if (now - entry.lastUpdated.getTime() >= this.latestConfig.getWeightExpirationPeriodMs()) {\n      entry.nonEmptySince = null;\n      return 0;\n    }\n    const blackoutPeriod = this.latestConfig.getBlackoutPeriodMs();\n    if (blackoutPeriod > 0 && (entry.nonEmptySince === null || now - entry.nonEmptySince.getTime() < blackoutPeriod)) {\n      return 0;\n    }\n    return entry.weight;\n  }\n\n  private calculateAndUpdateState() {\n    if (this.updatesPaused || !this.latestConfig) {\n      return;\n    }\n    if (this.countChildrenWithState(ConnectivityState.READY) > 0) {\n      const weightedPickers: WeightedPicker[] = [];\n      for (const [endpoint, entry] of this.children) {\n        if (entry.child.getConnectivityState() !== ConnectivityState.READY) {\n          continue;\n        }\n        weightedPickers.push({\n          endpointName: endpoint,\n          picker: entry.child.getPicker(),\n          weight: this.getWeight(entry)\n        });\n      }\n      trace('Created picker with weights: ' + weightedPickers.map(entry => entry.endpointName + ':' + entry.weight).join(','));\n      let metricsHandler: MetricsHandler | null;\n      if (!this.latestConfig.getEnableOobLoadReport()) {\n        metricsHandler = (loadReport, endpointName) => {\n          const childEntry = this.children.get(endpointName);\n          if (childEntry) {\n            this.updateWeight(childEntry, loadReport);\n          }\n        };\n      } else {\n        metricsHandler = null;\n      }\n      this.updateState(\n        ConnectivityState.READY,\n        new WeightedRoundRobinPicker(\n          weightedPickers,\n          metricsHandler\n        ),\n        null\n      );\n    } else if (this.countChildrenWithState(ConnectivityState.CONNECTING) > 0) {\n      this.updateState(ConnectivityState.CONNECTING, new QueuePicker(this), null);\n    } else if (\n      this.countChildrenWithState(ConnectivityState.TRANSIENT_FAILURE) > 0\n    ) {\n      const errorMessage = `weighted_round_robin: No connection established. Last error: ${this.lastError}`;\n      this.updateState(\n        ConnectivityState.TRANSIENT_FAILURE,\n        new UnavailablePicker({\n          details: errorMessage,\n        }),\n        errorMessage\n      );\n    } else {\n      this.updateState(ConnectivityState.IDLE, new QueuePicker(this), null);\n    }\n    /* round_robin should keep all children connected, this is how we do that.\n      * We can't do this more efficiently in the individual child's updateState\n      * callback because that doesn't have a reference to which child the state\n      * change is associated with. */\n    for (const {child} of this.children.values()) {\n      if (child.getConnectivityState() === ConnectivityState.IDLE) {\n        child.exitIdle();\n      }\n    }\n  }\n\n  private updateState(newState: ConnectivityState, picker: Picker, errorMessage: string | null) {\n    trace(\n      ConnectivityState[this.currentState] +\n        ' -> ' +\n        ConnectivityState[newState]\n    );\n    this.currentState = newState;\n    this.channelControlHelper.updateState(newState, picker, errorMessage);\n  }\n\n  updateAddressList(maybeEndpointList: StatusOr<Endpoint[]>, lbConfig: TypedLoadBalancingConfig, options: ChannelOptions, resolutionNote: string): boolean {\n    if (!(lbConfig instanceof WeightedRoundRobinLoadBalancingConfig)) {\n      return false;\n    }\n    if (!maybeEndpointList.ok) {\n      if (this.children.size === 0) {\n        this.updateState(\n          ConnectivityState.TRANSIENT_FAILURE,\n          new UnavailablePicker(maybeEndpointList.error),\n          maybeEndpointList.error.details\n        );\n      }\n      return true;\n    }\n    if (maybeEndpointList.value.length === 0) {\n      const errorMessage = `No addresses resolved. Resolution note: ${resolutionNote}`;\n      this.updateState(\n        ConnectivityState.TRANSIENT_FAILURE,\n        new UnavailablePicker({details: errorMessage}),\n        errorMessage\n      );\n      return false;\n    }\n    trace('Connect to endpoint list ' + maybeEndpointList.value.map(endpointToString));\n    const now = new Date();\n    const seenEndpointNames = new Set<string>();\n    this.updatesPaused = true;\n    this.latestConfig = lbConfig;\n    for (const endpoint of maybeEndpointList.value) {\n      const name = endpointToString(endpoint);\n      seenEndpointNames.add(name);\n      let entry = this.children.get(name);\n      if (!entry) {\n        entry = {\n          child: new LeafLoadBalancer(endpoint, createChildChannelControlHelper(this.channelControlHelper, {\n            updateState: (connectivityState, picker, errorMessage) => {\n              /* Ensure that name resolution is requested again after active\n                * connections are dropped. This is more aggressive than necessary to\n                * accomplish that, so we are counting on resolvers to have\n                * reasonable rate limits. */\n              if (this.currentState === ConnectivityState.READY && connectivityState !== ConnectivityState.READY) {\n                this.channelControlHelper.requestReresolution();\n              }\n              if (connectivityState === ConnectivityState.READY) {\n                entry!.nonEmptySince = null;\n              }\n              if (errorMessage) {\n                this.lastError = errorMessage;\n              }\n              this.calculateAndUpdateState();\n            },\n            createSubchannel: (subchannelAddress, subchannelArgs) => {\n              const subchannel = this.channelControlHelper.createSubchannel(subchannelAddress, subchannelArgs);\n              if (entry?.oobMetricsListener) {\n                return new OrcaOobMetricsSubchannelWrapper(subchannel, entry.oobMetricsListener, this.latestConfig!.getOobLoadReportingPeriodMs());\n              } else {\n                return subchannel;\n              }\n            }\n          }), options, resolutionNote),\n          lastUpdated: now,\n          nonEmptySince: null,\n          weight: 0,\n          oobMetricsListener: null\n        };\n        this.children.set(name, entry);\n      }\n      if (lbConfig.getEnableOobLoadReport()) {\n        entry.oobMetricsListener = loadReport => {\n          this.updateWeight(entry!, loadReport);\n        };\n      } else {\n        entry.oobMetricsListener = null;\n      }\n    }\n    for (const [endpointName, entry] of this.children) {\n      if (seenEndpointNames.has(endpointName)) {\n        entry.child.startConnecting();\n      } else {\n        entry.child.destroy();\n        this.children.delete(endpointName);\n      }\n    }\n    this.updatesPaused = false;\n    this.calculateAndUpdateState();\n    if (this.weightUpdateTimer) {\n      clearInterval(this.weightUpdateTimer);\n    }\n    this.weightUpdateTimer = setInterval(() => {\n      if (this.currentState === ConnectivityState.READY) {\n        this.calculateAndUpdateState();\n      }\n    }, lbConfig.getWeightUpdatePeriodMs()).unref?.();\n    return true;\n  }\n  exitIdle(): void {\n    /* The weighted_round_robin LB policy is only in the IDLE state if it has\n     * no addresses to try to connect to and it has no picked subchannel.\n     * In that case, there is no meaningful action that can be taken here. */\n  }\n  resetBackoff(): void {\n    // This LB policy has no backoff to reset\n  }\n  destroy(): void {\n    for (const entry of this.children.values()) {\n      entry.child.destroy();\n    }\n    this.children.clear();\n    if (this.weightUpdateTimer) {\n      clearInterval(this.weightUpdateTimer);\n    }\n  }\n  getTypeName(): string {\n    return TYPE_NAME;\n  }\n}\n\nexport function setup() {\n  registerLoadBalancerType(\n    TYPE_NAME,\n    WeightedRoundRobinLoadBalancer,\n    WeightedRoundRobinLoadBalancingConfig\n  );\n}\n", "/*\n * Copyright 2019 gRPC authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n */\n\nimport {\n  ClientDuplexStream,\n  ClientReadableStream,\n  ClientUnaryCall,\n  ClientWritableStream,\n  ServiceError,\n} from './call';\nimport { CallCredentials, OAuth2Client } from './call-credentials';\nimport { StatusObject } from './call-interface';\nimport { Channel, ChannelImplementation } from './channel';\nimport { CompressionAlgorithms } from './compression-algorithms';\nimport { ConnectivityState } from './connectivity-state';\nimport { ChannelCredentials, VerifyOptions } from './channel-credentials';\nimport {\n  CallOptions,\n  Client,\n  ClientOptions,\n  CallInvocationTransformer,\n  CallProperties,\n  UnaryCallback,\n} from './client';\nimport { LogVerbosity, Status, Propagate } from './constants';\nimport * as logging from './logging';\nimport {\n  Deserialize,\n  loadPackageDefinition,\n  makeClientConstructor,\n  MethodDefinition,\n  Serialize,\n  ServerMethodDefinition,\n  ServiceDefinition,\n} from './make-client';\nimport { Metadata, MetadataOptions, MetadataValue } from './metadata';\nimport {\n  ConnectionInjector,\n  Server,\n  ServerOptions,\n  UntypedHandleCall,\n  UntypedServiceImplementation,\n} from './server';\nimport { KeyCertPair, ServerCredentials } from './server-credentials';\nimport { StatusBuilder } from './status-builder';\nimport {\n  handleBidiStreamingCall,\n  handleServerStreamingCall,\n  handleClientStreamingCall,\n  handleUnaryCall,\n  sendUnaryData,\n  ServerUnaryCall,\n  ServerReadableStream,\n  ServerWritableStream,\n  ServerDuplexStream,\n  ServerErrorResponse,\n} from './server-call';\n\nexport { OAuth2Client };\n\n/**** Client Credentials ****/\n\n// Using assign only copies enumerable properties, which is what we want\nexport const credentials = {\n  /**\n   * Combine a ChannelCredentials with any number of CallCredentials into a\n   * single ChannelCredentials object.\n   * @param channelCredentials The ChannelCredentials object.\n   * @param callCredentials Any number of CallCredentials objects.\n   * @return The resulting ChannelCredentials object.\n   */\n  combineChannelCredentials: (\n    channelCredentials: ChannelCredentials,\n    ...callCredentials: CallCredentials[]\n  ): ChannelCredentials => {\n    return callCredentials.reduce(\n      (acc, other) => acc.compose(other),\n      channelCredentials\n    );\n  },\n\n  /**\n   * Combine any number of CallCredentials into a single CallCredentials\n   * object.\n   * @param first The first CallCredentials object.\n   * @param additional Any number of additional CallCredentials objects.\n   * @return The resulting CallCredentials object.\n   */\n  combineCallCredentials: (\n    first: CallCredentials,\n    ...additional: CallCredentials[]\n  ): CallCredentials => {\n    return additional.reduce((acc, other) => acc.compose(other), first);\n  },\n\n  // from channel-credentials.ts\n  createInsecure: ChannelCredentials.createInsecure,\n  createSsl: ChannelCredentials.createSsl,\n  createFromSecureContext: ChannelCredentials.createFromSecureContext,\n\n  // from call-credentials.ts\n  createFromMetadataGenerator: CallCredentials.createFromMetadataGenerator,\n  createFromGoogleCredential: CallCredentials.createFromGoogleCredential,\n  createEmpty: CallCredentials.createEmpty,\n};\n\n/**** Metadata ****/\n\nexport { Metadata, MetadataOptions, MetadataValue };\n\n/**** Constants ****/\n\nexport {\n  LogVerbosity as logVerbosity,\n  Status as status,\n  ConnectivityState as connectivityState,\n  Propagate as propagate,\n  CompressionAlgorithms as compressionAlgorithms,\n  // TODO: Other constants as well\n};\n\n/**** Client ****/\n\nexport {\n  Client,\n  ClientOptions,\n  loadPackageDefinition,\n  makeClientConstructor,\n  makeClientConstructor as makeGenericClientConstructor,\n  CallProperties,\n  CallInvocationTransformer,\n  ChannelImplementation as Channel,\n  Channel as ChannelInterface,\n  UnaryCallback as requestCallback,\n};\n\n/**\n * Close a Client object.\n * @param client The client to close.\n */\nexport const closeClient = (client: Client) => client.close();\n\nexport const waitForClientReady = (\n  client: Client,\n  deadline: Date | number,\n  callback: (error?: Error) => void\n) => client.waitForReady(deadline, callback);\n\n/* Interfaces */\n\nexport {\n  sendUnaryData,\n  ChannelCredentials,\n  CallCredentials,\n  Deadline,\n  Serialize as serialize,\n  Deserialize as deserialize,\n  ClientUnaryCall,\n  ClientReadableStream,\n  ClientWritableStream,\n  ClientDuplexStream,\n  CallOptions,\n  MethodDefinition,\n  StatusObject,\n  ServiceError,\n  ServerUnaryCall,\n  ServerReadableStream,\n  ServerWritableStream,\n  ServerDuplexStream,\n  ServerErrorResponse,\n  ServerMethodDefinition,\n  ServiceDefinition,\n  UntypedHandleCall,\n  UntypedServiceImplementation,\n  VerifyOptions,\n};\n\n/**** Server ****/\n\nexport {\n  handleBidiStreamingCall,\n  handleServerStreamingCall,\n  handleUnaryCall,\n  handleClientStreamingCall,\n};\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\nexport type Call =\n  | ClientUnaryCall\n  | ClientReadableStream<any>\n  | ClientWritableStream<any>\n  | ClientDuplexStream<any, any>;\n/* eslint-enable @typescript-eslint/no-explicit-any */\n\n/**** Unimplemented function stubs ****/\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\nexport const loadObject = (value: any, options: any): never => {\n  throw new Error(\n    'Not available in this library. Use @grpc/proto-loader and loadPackageDefinition instead'\n  );\n};\n\nexport const load = (filename: any, format: any, options: any): never => {\n  throw new Error(\n    'Not available in this library. Use @grpc/proto-loader and loadPackageDefinition instead'\n  );\n};\n\nexport const setLogger = (logger: Partial<Console>): void => {\n  logging.setLogger(logger);\n};\n\nexport const setLogVerbosity = (verbosity: LogVerbosity): void => {\n  logging.setLoggerVerbosity(verbosity);\n};\n\nexport { ConnectionInjector, Server, ServerOptions };\nexport { ServerCredentials };\nexport { KeyCertPair };\n\nexport const getClientChannel = (client: Client) => {\n  return Client.prototype.getChannel.call(client);\n};\n\nexport { StatusBuilder };\n\nexport { Listener, InterceptingListener } from './call-interface';\n\nexport {\n  Requester,\n  ListenerBuilder,\n  RequesterBuilder,\n  Interceptor,\n  InterceptorOptions,\n  InterceptorProvider,\n  InterceptingCall,\n  InterceptorConfigurationError,\n  NextCall,\n} from './client-interceptors';\n\nexport {\n  GrpcObject,\n  ServiceClientConstructor,\n  ProtobufTypeDefinition,\n} from './make-client';\n\nexport { ChannelOptions } from './channel-options';\n\nexport { getChannelzServiceDefinition, getChannelzHandlers } from './channelz';\n\nexport { addAdminServicesToServer } from './admin';\n\nexport {\n  ServiceConfig,\n  LoadBalancingConfig,\n  MethodConfig,\n  RetryPolicy,\n} from './service-config';\n\nexport {\n  ServerListener,\n  FullServerListener,\n  ServerListenerBuilder,\n  Responder,\n  FullResponder,\n  ResponderBuilder,\n  ServerInterceptingCallInterface,\n  ServerInterceptingCall,\n  ServerInterceptor,\n} from './server-interceptors';\n\nexport { ServerMetricRecorder } from './orca';\n\nimport * as experimental from './experimental';\nexport { experimental };\n\nimport * as resolver_dns from './resolver-dns';\nimport * as resolver_uds from './resolver-uds';\nimport * as resolver_ip from './resolver-ip';\nimport * as load_balancer_pick_first from './load-balancer-pick-first';\nimport * as load_balancer_round_robin from './load-balancer-round-robin';\nimport * as load_balancer_outlier_detection from './load-balancer-outlier-detection';\nimport * as load_balancer_weighted_round_robin from './load-balancer-weighted-round-robin';\nimport * as channelz from './channelz';\nimport { Deadline } from './deadline';\n\n(() => {\n  resolver_dns.setup();\n  resolver_uds.setup();\n  resolver_ip.setup();\n  load_balancer_pick_first.setup();\n  load_balancer_round_robin.setup();\n  load_balancer_outlier_detection.setup();\n  load_balancer_weighted_round_robin.setup();\n  channelz.setup();\n})();\n", "import commander from './index.js';\n\n// wrapper to provide named exports for ESM.\nexport const {\n  program,\n  createCommand,\n  createArgument,\n  createOption,\n  CommanderError,\n  InvalidArgumentError,\n  InvalidOptionArgumentError, // deprecated old name\n  Command,\n  Argument,\n  Option,\n  Help\n} = commander;\n", "#!/usr/bin/env node\n/**\n * SessionHub CLI - Claude Code Plugin\n *\n * Capture and import Claude Code sessions to SessionHub.\n *\n * Architecture: Plugin \u2192 Backend (gRPC) \u2192 Supabase\n * The plugin no longer calls Supabase directly. All operations go through\n * the authenticated gRPC backend which securely holds the service key.\n */\n\nimport { program } from \"commander\";\nimport { homedir } from \"os\";\nimport { join, basename, dirname, relative } from \"path\";\nimport {\n  existsSync,\n  mkdirSync,\n  writeFileSync,\n  readFileSync,\n  readdirSync,\n  statSync,\n  renameSync,\n  unlinkSync,\n} from \"fs\";\nimport { fileURLToPath } from \"url\";\n\n// ESM-compatible __dirname\nconst __filename = fileURLToPath(import.meta.url);\nconst __dirname = dirname(__filename);\nimport { ConfigManager } from \"./config.js\";\nimport {\n  GrpcAPIClient,\n  parseSessionLimitError,\n  parseOnboardingError,\n} from \"./grpc-client.js\";\nimport { TranscriptParser } from \"./transcript-parser.js\";\nimport { ProjectDetector } from \"./project-detector.js\";\nimport { logger } from \"./logger.js\";\nimport type { SessionApiData, SubSessionData, UserInfo } from \"./models.js\";\n\nconst CONFIG_DIR = join(homedir(), \".sessionhub\");\nconst CONFIG_FILE = join(CONFIG_DIR, \"config.json\");\n\nfunction showSetupInstructions(): void {\n  console.error(\n    \"\\n\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\",\n  );\n  console.error(\"  SessionHub is not configured yet!\");\n  console.error(\"\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\");\n  console.error(\"\\n  To get started, run:\\n\");\n  console.error(\"    /setup <your-api-key>\\n\");\n  console.error(\"  Get your API key at: https://sessionhub.dev/settings\");\n  console.error(\n    \"\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\\n\",\n  );\n}\n\nasync function initializeClient(\n  apiKey?: string,\n): Promise<{ client: GrpcAPIClient; user: UserInfo } | null> {\n  const configManager = new ConfigManager();\n  const config = configManager.getConfig();\n\n  const finalApiKey = apiKey || config.user.apiKey;\n  if (!finalApiKey) {\n    showSetupInstructions();\n    return null;\n  }\n\n  const client = new GrpcAPIClient(\n    finalApiKey,\n    config.backendGrpcUrl,\n    config.grpcUseTls,\n  );\n\n  const user = await client.validateApiKey();\n  if (!user) {\n    console.error(\n      \"\\n\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\",\n    );\n    console.error(\"  Authentication Failed\");\n    console.error(\n      \"\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\",\n    );\n    console.error(\n      \"\\n  Your API key appears to be invalid or the server is unreachable.\",\n    );\n    console.error(\"\\n  To reconfigure, run:\\n\");\n    console.error(\"    /setup <your-api-key>\\n\");\n    console.error(\"  Get a new API key at: https://sessionhub.dev/settings\");\n    console.error(\n      \"\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\\n\",\n    );\n    return null;\n  }\n\n  logger.info(`Authenticated as: ${user.email}`);\n  return { client, user };\n}\n\nasync function ensureProject(\n  client: GrpcAPIClient,\n  projectName: string,\n  projectPath: string,\n): Promise<any | null> {\n  const projectDetector = new ProjectDetector();\n  const detectedProject = projectDetector.detectProject(projectPath);\n\n  if (!detectedProject) {\n    console.error(\"Could not detect project\");\n    return null;\n  }\n\n  const finalProjectName = projectName || detectedProject.name;\n\n  const existingProjects = await client.getProjects();\n  const existingProject = existingProjects?.find(\n    (p: any) =>\n      p.name === finalProjectName || p.display_name === finalProjectName,\n  );\n\n  if (existingProject) {\n    logger.info(`Using existing project: ${finalProjectName}`);\n  } else {\n    logger.info(`Project will be auto-created: ${finalProjectName}`);\n  }\n\n  return {\n    name: finalProjectName,\n    display_name: finalProjectName,\n    description:\n      existingProject?.description ||\n      `Auto-created project from CLI for ${finalProjectName}`,\n    git_remote: existingProject?.git_remote || detectedProject.gitRemote,\n    path: detectedProject.path,\n    branch: detectedProject.branch,\n  };\n}\n\nprogram\n  .name(\"sessionhub-cli\")\n  .description(\"Capture and import Claude Code sessions to SessionHub\")\n  .version(\"1.0.0\");\n\n// Setup command - configure API key\nprogram\n  .command(\"setup\")\n  .description(\"Configure SessionHub with your API key\")\n  .option(\"--api-key <key>\", \"Your SessionHub API key\")\n  .action(async (opts) => {\n    try {\n      const apiKey = opts.apiKey;\n\n      if (!apiKey) {\n        console.error(\n          \"Error: API key is required. Usage: setup --api-key <your-api-key>\",\n        );\n        process.exit(1);\n      }\n\n      // Create config directory if it doesn't exist\n      if (!existsSync(CONFIG_DIR)) {\n        mkdirSync(CONFIG_DIR, { recursive: true });\n      }\n\n      // Load existing config or create new one\n      let config: any = {};\n      if (existsSync(CONFIG_FILE)) {\n        try {\n          config = JSON.parse(readFileSync(CONFIG_FILE, \"utf-8\"));\n        } catch {\n          // Start fresh if config is corrupted\n        }\n      }\n\n      // Update API key\n      config.user = config.user || {};\n      config.user.apiKey = apiKey;\n\n      // Validate the API key before saving\n      const configManager = new ConfigManager();\n      const fullConfig = configManager.getConfig();\n      const client = new GrpcAPIClient(\n        apiKey,\n        fullConfig.backendGrpcUrl,\n        fullConfig.grpcUseTls,\n      );\n\n      const user = await client.validateApiKey();\n      if (!user) {\n        console.error(\n          \"\\n\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\",\n        );\n        console.error(\"  Invalid API Key\");\n        console.error(\n          \"\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\",\n        );\n        console.error(\"\\n  The API key could not be validated.\");\n        console.error(\"  Please check your key and try again.\");\n        console.error(\n          \"\\n  Get your API key at: https://sessionhub.dev/settings\",\n        );\n        console.error(\n          \"\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\\n\",\n        );\n        process.exit(1);\n      }\n\n      // Always use the default backend URL (plugin.sessionhub.dev)\n      // This ensures users with old cached URLs get updated\n      config.backendGrpcUrl = \"plugin.sessionhub.dev\";\n\n      // Save config with restrictive permissions (contains API key)\n      writeFileSync(CONFIG_FILE, JSON.stringify(config, null, 2), {\n        mode: 0o600,\n      });\n\n      const output = {\n        success: true,\n        message: \"SessionHub configured successfully!\",\n        email: user.email,\n        configPath: CONFIG_FILE,\n      };\n\n      console.log(JSON.stringify(output, null, 2));\n    } catch (error) {\n      console.error(\n        \"Error:\",\n        error instanceof Error ? error.message : String(error),\n      );\n      process.exit(1);\n    }\n  });\n\nprogram\n  .command(\"capture\")\n  .description(\"Capture a Claude Code session\")\n  .option(\"-p, --project <name>\", \"Project name (auto-detected if omitted)\")\n  .option(\"-s, --session <name>\", \"Session name (auto-generated if omitted)\")\n  .option(\"-t, --transcript <path>\", \"Transcript file path (latest if omitted)\")\n  .option(\n    \"-n, --last <n>\",\n    \"Only capture last N user-assistant exchanges\",\n    parseInt,\n  )\n  .option(\"--api-key <key>\", \"API key (uses API_KEY env var if omitted)\")\n  .option(\"--project-path <path>\", \"Project path (uses cwd if omitted)\")\n  .option(\n    \"--session-id <id>\",\n    \"Session ID to capture (finds exact transcript instead of latest)\",\n  )\n  .action(async (opts) => {\n    try {\n      const auth = await initializeClient(opts.apiKey);\n      if (!auth) {\n        process.exit(1);\n      }\n\n      const { client, user } = auth;\n      const configManager = new ConfigManager();\n      const config = configManager.getConfig();\n\n      const currentPath = opts.projectPath || process.cwd();\n      const autoDetectedProjectName = basename(currentPath);\n      const projectName = opts.project || autoDetectedProjectName;\n      const projectPath = currentPath;\n\n      logger.info(`Project: ${projectName} from ${currentPath}`);\n\n      const parser = new TranscriptParser({\n        currentUser: user,\n        grpcClient: client,\n      });\n\n      let targetFile: string;\n\n      if (opts.transcript) {\n        targetFile = opts.transcript;\n      } else {\n        const foundFile = await parser.findLatestTranscriptFile(\n          projectPath,\n          opts.sessionId,\n        );\n        if (!foundFile) {\n          console.error(\n            \"Error: No transcript files found. Make sure you are in a project directory with Claude Code sessions.\",\n          );\n          process.exit(1);\n        }\n        targetFile = foundFile;\n      }\n\n      logger.info(`Processing transcript: ${targetFile}`);\n\n      const sessionData = await parser.parseTranscriptFile(\n        targetFile,\n        opts.last,\n      );\n      if (!sessionData) {\n        console.error(\"Error: Failed to parse transcript file\");\n        process.exit(1);\n      }\n\n      // Discover and parse sub-agent files\n      const subSessions: SubSessionData[] = [];\n      {\n        const fs = await import(\"fs/promises\");\n        const path = await import(\"path\");\n\n        // Use the session's actual cwd for locating Claude project directory\n        // (projectPath from CLI args may differ from where session was started)\n        // Claude Code replaces path separators AND underscores with hyphens\n        const sessionCwd = sessionData.cwd || projectPath;\n        const projectDirName = sessionCwd\n          .replace(/[\\\\/]/g, \"-\")\n          .replace(/_/g, \"-\");\n        const claudeProjectDir = path.join(\n          homedir(),\n          \".claude\",\n          \"projects\",\n          projectDirName,\n        );\n        const subagentsDir = path.join(\n          claudeProjectDir,\n          sessionData.sessionId,\n          \"subagents\",\n        );\n\n        const estimateInteractionIndex = (startTime: string): number => {\n          if (\n            !startTime ||\n            !sessionData.interactions ||\n            sessionData.interactions.length === 0\n          ) {\n            return 0;\n          }\n\n          const startMs = Date.parse(startTime);\n          if (Number.isNaN(startMs)) {\n            return 0;\n          }\n\n          let index = 0;\n          for (let i = 0; i < sessionData.interactions.length; i++) {\n            const timestamp = sessionData.interactions[i]?.timestamp;\n            if (!timestamp) continue;\n            const tsMs = Date.parse(timestamp);\n            if (Number.isNaN(tsMs)) continue;\n            if (tsMs <= startMs) {\n              index = i;\n            } else {\n              break;\n            }\n          }\n          return index;\n        };\n\n        try {\n          const files = await fs.readdir(subagentsDir);\n          const agentFiles = files.filter(\n            (file) => file.startsWith(\"agent-\") && file.endsWith(\".jsonl\"),\n          );\n          logger.info(\n            `Checking for sub-agent files in ${subagentsDir} (${agentFiles.length} found)`,\n          );\n\n          for (const file of agentFiles) {\n            const agentId = file.replace(/^agent-/, \"\").replace(/\\.jsonl$/, \"\");\n            const agentFilePath = path.join(subagentsDir, file);\n\n            const subSession = await parser.parseSubAgentFile(\n              agentFilePath,\n              agentId,\n              null,\n              null,\n              0,\n            );\n\n            if (subSession) {\n              subSession.interactionIndex = estimateInteractionIndex(\n                subSession.startTime,\n              );\n              subSessions.push(subSession);\n            }\n          }\n        } catch {\n          logger.info(`No sub-agent directory found at ${subagentsDir}`);\n        }\n\n        if (subSessions.length > 0) {\n          logger.info(\n            `Discovered ${subSessions.length} sub-agent conversations`,\n          );\n        }\n      }\n\n      const project = await ensureProject(client, projectName, projectPath);\n      if (!project) {\n        console.error(\"Error: Failed to create/find project\");\n        process.exit(1);\n      }\n\n      // Calculate total tokens including sub-sessions\n      let totalInputTokens = sessionData.totalInputTokens;\n      let totalOutputTokens = sessionData.totalOutputTokens;\n      for (const subSession of subSessions) {\n        totalInputTokens += subSession.inputTokens;\n        totalOutputTokens += subSession.outputTokens;\n      }\n\n      const finalSessionName =\n        opts.session ||\n        `Imported Session - ${new Date(sessionData.startTime).toLocaleString()}`;\n\n      const apiSessionData: SessionApiData = {\n        start_time: sessionData.startTime,\n        end_time: sessionData.endTime,\n        project_path: projectPath,\n        project_name: projectName,\n        name: finalSessionName,\n        tool_name: \"claude-code\",\n        git_branch: sessionData.gitBranch,\n        input_tokens: totalInputTokens,\n        output_tokens: totalOutputTokens,\n        cache_create_tokens: sessionData.totalCacheCreateTokens,\n        cache_read_tokens: sessionData.totalCacheReadTokens,\n        todo_snapshots: sessionData.todoSnapshots || [],\n        plan_slug: sessionData.planFileSlug,\n        attachment_urls: sessionData.attachmentUrls || [],\n        sub_sessions: subSessions,\n        interactions: sessionData.interactions || [],\n        metadata: {\n          import_source: \"cli\",\n          original_session_id: sessionData.sessionId,\n          total_input_tokens: totalInputTokens,\n          total_output_tokens: totalOutputTokens,\n          interaction_count: sessionData.interactions.length,\n          model_info: sessionData.modelInfo,\n          planning_mode_info: sessionData.planningModeInfo,\n          languages: sessionData.languages,\n          sub_session_count: subSessions.length,\n        },\n      };\n\n      let result;\n      try {\n        result = await client.upsertSession(apiSessionData);\n      } catch (upsertError) {\n        // Check for session limit error\n        const limitError = parseSessionLimitError(upsertError as Error);\n        if (limitError) {\n          const output = {\n            success: false,\n            error: \"session_limit_exceeded\",\n            message: `Session limit reached (${limitError.currentCount}/${limitError.limit} sessions used)`,\n            currentCount: limitError.currentCount,\n            limit: limitError.limit,\n            upgradeUrl: limitError.upgradeUrl,\n          };\n          console.log(JSON.stringify(output, null, 2));\n          process.exit(1);\n        }\n\n        // Check for onboarding error (user not in any team)\n        const onboardingError = parseOnboardingError(upsertError as Error);\n        if (onboardingError) {\n          const output = {\n            success: false,\n            error: \"onboarding_required\",\n            message: onboardingError.message,\n            onboardingUrl: \"https://sessionhub.dev/onboarding\",\n          };\n          console.log(JSON.stringify(output, null, 2));\n          process.exit(1);\n        }\n\n        // Re-throw other errors\n        throw upsertError;\n      }\n\n      if (!result.sessionId) {\n        console.error(\"Error: Failed to create session\");\n        process.exit(1);\n      }\n\n      // Upload plan file to storage if available\n      // Storage path: {teamId}/plans/{sessionId}/{slug}.md\n      let planFileUploaded = false;\n      let planFileContent = sessionData.planFileContent;\n      if (sessionData.planFileSlug && !planFileContent) {\n        try {\n          const fs = await import(\"fs/promises\");\n          const planPath = join(\n            homedir(),\n            \".claude\",\n            \"plans\",\n            `${sessionData.planFileSlug}.md`,\n          );\n          planFileContent = await fs.readFile(planPath, \"utf-8\");\n        } catch (readError) {\n          logger.warn(\n            `Plan file read failed: ${readError instanceof Error ? readError.message : String(readError)}`,\n          );\n        }\n      }\n      if (sessionData.planFileSlug && planFileContent) {\n        try {\n          const planResult = await client.uploadPlanFile(\n            result.sessionId,\n            sessionData.planFileSlug,\n            planFileContent,\n          );\n          if (planResult.success) {\n            logger.info(`Plan file uploaded: ${sessionData.planFileSlug}.md`);\n            planFileUploaded = true;\n          } else {\n            logger.warn(`Plan file upload failed: ${planResult.error}`);\n          }\n        } catch (uploadError) {\n          logger.warn(\n            `Plan file upload error: ${uploadError instanceof Error ? uploadError.message : String(uploadError)}`,\n          );\n          // Don't fail the entire capture if plan upload fails\n        }\n      }\n\n      // Save last session info for /observations command (atomic write to prevent corruption)\n      const lastSessionFile = join(CONFIG_DIR, \"last-session.json\");\n      const tempFile = `${lastSessionFile}.${process.pid}.tmp`;\n      try {\n        // Write to temp file first\n        writeFileSync(\n          tempFile,\n          JSON.stringify(\n            {\n              sessionId: result.sessionId,\n              projectPath: projectPath,\n              projectName: projectName,\n              capturedAt: new Date().toISOString(),\n            },\n            null,\n            2,\n          ),\n        );\n        // Atomic rename\n        renameSync(tempFile, lastSessionFile);\n      } catch (writeError) {\n        // Clean up temp file if it exists\n        try {\n          unlinkSync(tempFile);\n        } catch {\n          // Ignore cleanup errors\n        }\n        logger.warn(`Failed to save last-session.json: ${writeError}`);\n      }\n\n      // Note: Analysis and observations are triggered automatically by the backend\n      // based on user preferences. The result includes flags for what was triggered.\n\n      // Output result as JSON for parsing by slash commands\n      const output = {\n        success: true,\n        sessionId: result.sessionId,\n        wasUpdated: result.wasUpdated,\n        newInteractionsCount: result.newInteractionsCount,\n        analysisTriggered: (result as any).analysisTriggered || false,\n        observationsTriggered: (result as any).observationsTriggered || false,\n        planFileUploaded,\n        planSlug: sessionData.planFileSlug || null,\n        projectName,\n        sessionName: finalSessionName,\n        transcriptFile: basename(targetFile),\n        totalInputTokens,\n        totalOutputTokens,\n        cacheCreateTokens: sessionData.totalCacheCreateTokens,\n        cacheReadTokens: sessionData.totalCacheReadTokens,\n        subSessionCount: subSessions.length,\n      };\n\n      console.log(JSON.stringify(output, null, 2));\n    } catch (error) {\n      console.error(\n        \"Error:\",\n        error instanceof Error ? error.message : String(error),\n      );\n      process.exit(1);\n    }\n  });\n\nprogram\n  .command(\"import-all\")\n  .description(\"Import all Claude Code sessions from a project\")\n  .option(\"-p, --project <name>\", \"Project name (auto-detected if omitted)\")\n  .option(\"--path <dir>\", \"Project directory (uses cwd if omitted)\")\n  .option(\"--api-key <key>\", \"API key (uses API_KEY env var if omitted)\")\n  .action(async (opts) => {\n    try {\n      const auth = await initializeClient(opts.apiKey);\n      if (!auth) {\n        process.exit(1);\n      }\n\n      const { client, user } = auth;\n      const configManager = new ConfigManager();\n      const config = configManager.getConfig();\n\n      const currentPath = opts.path || process.cwd();\n      const autoDetectedProjectName = basename(currentPath);\n      const projectName = opts.project || autoDetectedProjectName;\n\n      logger.info(`Importing all sessions for project: ${projectName}`);\n\n      const parser = new TranscriptParser({\n        currentUser: user,\n        grpcClient: client,\n      });\n\n      const transcriptFiles = await parser.listTranscriptFiles(currentPath);\n\n      if (transcriptFiles.length === 0) {\n        console.error(\"Error: No transcript files found\");\n        process.exit(1);\n      }\n\n      logger.info(`Found ${transcriptFiles.length} transcript files`);\n\n      // Check session quota before starting import\n      let sessionsToImport = transcriptFiles.length;\n      let wasLimited = false;\n      let skippedCount = 0;\n\n      try {\n        const quota = await client.getSessionQuota();\n        if (quota && quota.limit !== -1) {\n          // -1 means unlimited (Pro tier)\n          if (quota.remaining === 0) {\n            const output = {\n              success: false,\n              error: \"session_limit_exceeded\",\n              message: `Session limit reached (${quota.currentCount}/${quota.limit} sessions). Cannot import any sessions.`,\n              currentCount: quota.currentCount,\n              limit: quota.limit,\n              upgradeUrl: \"https://sessionhub.dev/pricing\",\n              totalFiles: transcriptFiles.length,\n            };\n            console.log(JSON.stringify(output, null, 2));\n            process.exit(1);\n          }\n\n          if (quota.remaining < transcriptFiles.length) {\n            sessionsToImport = quota.remaining;\n            skippedCount = transcriptFiles.length - sessionsToImport;\n            wasLimited = true;\n            logger.warn(\n              `Session limit: Only importing ${sessionsToImport} of ${transcriptFiles.length} sessions (${quota.currentCount}/${quota.limit} used)`,\n            );\n          }\n        }\n      } catch (quotaError) {\n        // If quota check fails, continue without limit (backend will enforce limit per-session)\n        logger.warn(`Could not check session quota: ${quotaError}`);\n      }\n\n      const project = await ensureProject(client, projectName, currentPath);\n      if (!project) {\n        console.error(\"Error: Failed to create/find project\");\n        process.exit(1);\n      }\n\n      // Only process up to sessionsToImport files\n      const filesToProcess = transcriptFiles.slice(0, sessionsToImport);\n\n      let successCount = 0;\n      let errorCount = 0;\n      const results: Array<{\n        file: string;\n        success: boolean;\n        sessionId?: string;\n        error?: string;\n      }> = [];\n\n      for (const filePath of filesToProcess) {\n        const fileName = basename(filePath);\n\n        try {\n          logger.info(`Processing: ${fileName}`);\n\n          const sessionData = await parser.parseTranscriptFile(filePath);\n          if (!sessionData) {\n            errorCount++;\n            results.push({\n              file: fileName,\n              success: false,\n              error: \"Failed to parse\",\n            });\n            continue;\n          }\n\n          const sessionName = `Imported Session - ${new Date(sessionData.startTime).toLocaleString()}`;\n\n          const apiSessionData: SessionApiData = {\n            start_time: sessionData.startTime,\n            end_time: sessionData.endTime,\n            project_path: currentPath,\n            project_name: projectName,\n            name: sessionName,\n            tool_name: \"claude-code\",\n            git_branch: sessionData.gitBranch,\n            input_tokens: sessionData.totalInputTokens,\n            output_tokens: sessionData.totalOutputTokens,\n            cache_create_tokens: sessionData.totalCacheCreateTokens,\n            cache_read_tokens: sessionData.totalCacheReadTokens,\n            todo_snapshots: sessionData.todoSnapshots || [],\n            plan_slug: sessionData.planFileSlug,\n            attachment_urls: sessionData.attachmentUrls || [],\n            interactions: sessionData.interactions || [],\n            metadata: {\n              import_source: \"cli_bulk\",\n              original_session_id: sessionData.sessionId,\n            },\n          };\n\n          const result = await client.upsertSession(apiSessionData);\n\n          if (result.sessionId) {\n            // Upload plan file to storage if available\n            let planFileContent = sessionData.planFileContent;\n            if (sessionData.planFileSlug && !planFileContent) {\n              try {\n                const fs = await import(\"fs/promises\");\n                const planPath = join(\n                  homedir(),\n                  \".claude\",\n                  \"plans\",\n                  `${sessionData.planFileSlug}.md`,\n                );\n                planFileContent = await fs.readFile(planPath, \"utf-8\");\n              } catch (readError) {\n                logger.warn(\n                  `Plan file read failed: ${readError instanceof Error ? readError.message : String(readError)}`,\n                );\n              }\n            }\n            if (sessionData.planFileSlug && planFileContent) {\n              try {\n                const planResult = await client.uploadPlanFile(\n                  result.sessionId,\n                  sessionData.planFileSlug,\n                  planFileContent,\n                );\n                if (planResult.success) {\n                  logger.info(\n                    `Plan file uploaded: ${sessionData.planFileSlug}.md`,\n                  );\n                } else {\n                  logger.warn(`Plan file upload failed: ${planResult.error}`);\n                }\n              } catch (uploadError) {\n                logger.warn(\n                  `Plan file upload error: ${uploadError instanceof Error ? uploadError.message : String(uploadError)}`,\n                );\n              }\n            }\n\n            successCount++;\n            results.push({\n              file: fileName,\n              success: true,\n              sessionId: result.sessionId,\n            });\n          } else {\n            errorCount++;\n            results.push({\n              file: fileName,\n              success: false,\n              error: \"Failed to create session\",\n            });\n          }\n        } catch (error) {\n          errorCount++;\n          results.push({\n            file: fileName,\n            success: false,\n            error: error instanceof Error ? error.message : \"Unknown error\",\n          });\n        }\n      }\n\n      const output = {\n        success: errorCount === 0,\n        projectName,\n        totalFiles: transcriptFiles.length,\n        processedFiles: filesToProcess.length,\n        successCount,\n        errorCount,\n        wasLimited,\n        limitInfo: wasLimited\n          ? {\n              skippedCount,\n              upgradeUrl: \"https://sessionhub.dev/pricing\",\n            }\n          : undefined,\n        results,\n      };\n\n      console.log(JSON.stringify(output, null, 2));\n    } catch (error) {\n      console.error(\n        \"Error:\",\n        error instanceof Error ? error.message : String(error),\n      );\n      process.exit(1);\n    }\n  });\n\n// Note: analyze and extract-observations commands have been removed.\n// Analysis and observations are now triggered automatically by the backend\n// when sessions are captured, based on user preferences.\n// Users can configure auto-analysis settings in the SessionHub web app.\n\n// ============================================================================\n// Team Skills - Sync & Push\n// ============================================================================\n\nprogram\n  .command(\"sync-skills\")\n  .description(\"Sync approved team skills as SKILL.md files for Claude Code\")\n  .option(\"--team <id>\", \"Team ID (uses primary team if omitted)\")\n  .option(\"--project <id>\", \"Filter by project ID\")\n  .option(\"--scope <scope>\", \"Filter by scope: team or project\")\n  .action(async (opts) => {\n    try {\n      const auth = await initializeClient();\n      if (!auth) {\n        process.exit(1);\n      }\n\n      const { client } = auth;\n      const fs = await import(\"fs/promises\");\n      const path = await import(\"path\");\n\n      // Resolve team ID\n      let teamId = opts.team;\n      let teamSlug: string | undefined;\n      if (!teamId) {\n        const teams = await client.listUserTeams();\n        if (teams.length === 0) {\n          console.error(\"Error: No teams found. Join or create a team first.\");\n          process.exit(1);\n        }\n        teamId = teams[0].id;\n        teamSlug = teams[0].slug;\n      }\n\n      // Fetch approved skills\n      const skills = await client.getTeamSkills(\n        teamId,\n        opts.project,\n        opts.scope,\n      );\n\n      // All skills go to ~/.claude/skills/ \u2014 the standard Claude Code personal skills directory.\n      // We can't reliably map project-scoped skills to local project directories\n      // (user might run sync from a different folder), so we namespace everything here\n      // and let Claude Code match skills contextually via their description.\n      const skillsDir = path.join(homedir(), \".claude\", \"skills\");\n      await fs.mkdir(skillsDir, { recursive: true });\n      const resolvedSkillsDir = path.resolve(skillsDir);\n\n      // Read existing synced skills from cache\n      const cacheFile = join(CONFIG_DIR, \"skills-cache.json\");\n      let cache: Record<string, { version: number; slug: string }> = {};\n      try {\n        const cacheData = await fs.readFile(cacheFile, \"utf-8\");\n        cache = JSON.parse(cacheData);\n      } catch {\n        // No cache yet\n      }\n\n      // Track what we're syncing\n      const currentSlugs = new Set<string>();\n      let newCount = 0;\n      let updatedCount = 0;\n      let unchangedCount = 0;\n      const teamPrefix = teamSlug || teamId.slice(0, 8);\n\n      // Write each skill as ~/.claude/skills/{teamSlug}-{slug}/SKILL.md\n      for (const skill of skills) {\n        const effectiveSlug = `${teamPrefix}-${skill.slug}`;\n\n        // Path traversal protection\n        const skillDir = path.join(skillsDir, effectiveSlug);\n        const resolvedDir = path.resolve(skillDir);\n        if (!resolvedDir.startsWith(resolvedSkillsDir + path.sep)) {\n          logger.warn(`Skipping skill with unsafe slug: ${effectiveSlug}`);\n          continue;\n        }\n\n        currentSlugs.add(effectiveSlug);\n\n        // Check if skill is already synced at this version\n        const cached = cache[effectiveSlug];\n        if (cached && cached.version === skill.version) {\n          unchangedCount++;\n          continue;\n        }\n\n        // Build skill content with frontmatter\n        const description = (skill.summary || skill.title)\n          .replace(/\\n/g, \" \")\n          .replace(/\"/g, '\\\\\"');\n        const frontmatter = [\n          \"---\",\n          `name: ${effectiveSlug}`,\n          `description: \"${description}\"`,\n          \"---\",\n          \"\",\n        ].join(\"\\n\");\n\n        await fs.mkdir(skillDir, { recursive: true });\n\n        // Multi-file skill: write individual files + frontmatter in entry file\n        const hasMultipleFiles =\n          skill.files && Object.keys(skill.files).length > 1;\n\n        if (hasMultipleFiles) {\n          for (const [filePath, fileContent] of Object.entries(skill.files!)) {\n            // Path traversal protection for individual files\n            if (filePath.includes(\"..\") || filePath.startsWith(\"/\")) {\n              logger.warn(`Skipping file with unsafe path: ${filePath}`);\n              continue;\n            }\n\n            const fullPath = path.join(skillDir, filePath);\n            const resolvedFilePath = path.resolve(fullPath);\n            if (!resolvedFilePath.startsWith(resolvedDir + path.sep)) {\n              logger.warn(`Skipping file with traversal path: ${filePath}`);\n              continue;\n            }\n\n            // Create subdirectories if needed\n            const fileDir = path.dirname(fullPath);\n            await fs.mkdir(fileDir, { recursive: true });\n\n            // Prepend frontmatter to the entry file (SKILL.md, index.md, README.md)\n            const isEntry =\n              filePath === \"SKILL.md\" ||\n              filePath === \"index.md\" ||\n              filePath === \"README.md\";\n            const content = isEntry ? frontmatter + fileContent : fileContent;\n\n            await fs.writeFile(fullPath, content, \"utf-8\");\n          }\n        } else {\n          // Single-file skill: write as SKILL.md with frontmatter\n          const skillContent = frontmatter + skill.content;\n          await fs.writeFile(\n            path.join(skillDir, \"SKILL.md\"),\n            skillContent,\n            \"utf-8\",\n          );\n        }\n\n        cache[effectiveSlug] = { version: skill.version, slug: skill.slug };\n\n        if (cached) {\n          updatedCount++;\n        } else {\n          newCount++;\n        }\n      }\n\n      // Remove skills that no longer exist on the server\n      let removedCount = 0;\n      for (const cachedSlug of Object.keys(cache)) {\n        if (!currentSlugs.has(cachedSlug)) {\n          const skillDir = path.join(skillsDir, cachedSlug);\n          const resolvedDir = path.resolve(skillDir);\n          if (!resolvedDir.startsWith(resolvedSkillsDir + path.sep)) {\n            delete cache[cachedSlug];\n            continue;\n          }\n          try {\n            await fs.rm(skillDir, { recursive: true, force: true });\n          } catch {\n            // Ignore removal errors\n          }\n          delete cache[cachedSlug];\n          removedCount++;\n        }\n      }\n\n      // Persist updated cache\n      if (!existsSync(CONFIG_DIR)) {\n        mkdirSync(CONFIG_DIR, { recursive: true });\n      }\n      writeFileSync(cacheFile, JSON.stringify(cache, null, 2));\n\n      const output = {\n        success: true,\n        teamId,\n        skillsSynced: skills.length,\n        new: newCount,\n        updated: updatedCount,\n        unchanged: unchangedCount,\n        removed: removedCount,\n        skillsDir,\n        message:\n          skills.length === 0\n            ? `No approved team skills found; removed ${removedCount} previously synced skills`\n            : `Synced ${skills.length} skills (${newCount} new, ${updatedCount} updated, ${removedCount} removed)`,\n      };\n\n      console.log(JSON.stringify(output, null, 2));\n    } catch (error) {\n      console.error(\n        \"Error:\",\n        error instanceof Error ? error.message : String(error),\n      );\n      process.exit(1);\n    }\n  });\n\nprogram\n  .command(\"push-skill\")\n  .description(\"Push a local skill file or directory to the team as a draft\")\n  .option(\"--team <id>\", \"Team ID (uses primary team if omitted)\")\n  .option(\"--file <path>\", \"Path to skill file (.md)\")\n  .option(\"--dir <path>\", \"Path to a skill directory (multi-file skill)\")\n  .option(\n    \"--title <title>\",\n    \"Skill title (extracted from frontmatter or filename)\",\n  )\n  .option(\n    \"--category <cat>\",\n    \"Category: prompt, checklist, code_pattern, runbook, playbook, other\",\n  )\n  .option(\"--tags <tags>\", \"Comma-separated tags\")\n  .option(\"--summary <summary>\", \"Short summary of the skill\")\n  .action(async (opts) => {\n    try {\n      const auth = await initializeClient();\n      if (!auth) {\n        process.exit(1);\n      }\n\n      const { client } = auth;\n\n      if (!opts.file && !opts.dir) {\n        console.error(\n          \"Error: --file or --dir is required. Provide a path to a .md file or a skill directory.\",\n        );\n        process.exit(1);\n      }\n      if (opts.file && opts.dir) {\n        console.error(\"Error: Use either --file or --dir, not both.\");\n        process.exit(1);\n      }\n\n      let title = opts.title;\n      let summary = opts.summary;\n      let skillContent: string;\n      let filesMap: Record<string, string> = {};\n\n      if (opts.dir) {\n        // --- Directory mode: read all files recursively ---\n        const dirPath = opts.dir;\n        if (!existsSync(dirPath) || !statSync(dirPath).isDirectory()) {\n          console.error(`Error: \"${dirPath}\" is not a directory.`);\n          process.exit(1);\n        }\n\n        function readDirRecursive(\n          base: string,\n          dir: string,\n          out: Record<string, string>,\n        ) {\n          for (const entry of readdirSync(dir)) {\n            const full = join(dir, entry);\n            const rel = relative(base, full);\n            // Path traversal protection\n            if (rel.includes(\"..\")) continue;\n            if (statSync(full).isDirectory()) {\n              readDirRecursive(base, full, out);\n            } else {\n              out[rel] = readFileSync(full, \"utf-8\");\n            }\n          }\n        }\n\n        readDirRecursive(dirPath, dirPath, filesMap);\n\n        if (Object.keys(filesMap).length === 0) {\n          console.error(`Error: No files found in \"${dirPath}\".`);\n          process.exit(1);\n        }\n\n        // Find entry file for metadata extraction\n        const entryNames = [\"SKILL.md\", \"index.md\", \"README.md\"];\n        const entryKey = entryNames.find((n) => filesMap[n]);\n        const entryContent = entryKey ? filesMap[entryKey] : undefined;\n\n        if (entryContent) {\n          skillContent = entryContent;\n          const fmMatch = entryContent.match(\n            /^---\\n([\\s\\S]*?)\\n---\\n([\\s\\S]*)$/,\n          );\n          if (fmMatch) {\n            const frontmatter = fmMatch[1];\n            skillContent = fmMatch[2].trim();\n            if (!title) {\n              const nameMatch = frontmatter.match(/^name:\\s*(.+)$/m);\n              title = nameMatch ? nameMatch[1].trim() : undefined;\n            }\n            if (!summary) {\n              const descMatch = frontmatter.match(/^description:\\s*(.+)$/m);\n              summary = descMatch ? descMatch[1].trim() : undefined;\n            }\n          }\n        } else {\n          // No recognized entry file \u2014 use first .md file content\n          const firstMd = Object.keys(filesMap).find((k) =>\n            k.endsWith(\".md\"),\n          );\n          skillContent = firstMd ? filesMap[firstMd] : \"\";\n        }\n\n        // Fallback title from directory name\n        if (!title) {\n          title = basename(dirPath)\n            .replace(/[-_]/g, \" \")\n            .replace(/\\b\\w/g, (c: string) => c.toUpperCase());\n        }\n      } else {\n        // --- Single file mode ---\n        let content: string;\n        try {\n          content = readFileSync(opts.file, \"utf-8\");\n        } catch (err) {\n          console.error(\n            `Error: Could not read file \"${opts.file}\": ${err instanceof Error ? err.message : String(err)}`,\n          );\n          process.exit(1);\n        }\n\n        skillContent = content;\n\n        const fmMatch = content.match(/^---\\n([\\s\\S]*?)\\n---\\n([\\s\\S]*)$/);\n        if (fmMatch) {\n          const frontmatter = fmMatch[1];\n          skillContent = fmMatch[2].trim();\n          if (!title) {\n            const nameMatch = frontmatter.match(/^name:\\s*(.+)$/m);\n            title = nameMatch ? nameMatch[1].trim() : undefined;\n          }\n          if (!summary) {\n            const descMatch = frontmatter.match(/^description:\\s*(.+)$/m);\n            summary = descMatch ? descMatch[1].trim() : undefined;\n          }\n        }\n\n        if (!title) {\n          title = basename(opts.file)\n            .replace(/\\.md$/i, \"\")\n            .replace(/[-_]/g, \" \")\n            .replace(/\\b\\w/g, (c: string) => c.toUpperCase());\n        }\n\n        // Single file also populates files map\n        filesMap[\"SKILL.md\"] = content;\n      }\n\n      // Resolve team ID\n      let teamId = opts.team;\n      if (!teamId) {\n        const teams = await client.listUserTeams();\n        if (teams.length === 0) {\n          console.error(\"Error: No teams found. Join or create a team first.\");\n          process.exit(1);\n        }\n        teamId = teams[0].id;\n      }\n\n      // Parse tags\n      const tags = opts.tags\n        ? opts.tags\n            .split(\",\")\n            .map((t: string) => t.trim().toLowerCase())\n            .filter(Boolean)\n        : [];\n\n      // Push to team\n      const result = await client.createTeamSkill({\n        teamId,\n        title,\n        content: skillContent,\n        summary,\n        category: opts.category,\n        tags,\n        files: filesMap,\n      });\n\n      const fileCount = Object.keys(filesMap).length;\n      const output = {\n        success: true,\n        skillId: result.skillId,\n        slug: result.slug,\n        title,\n        teamId,\n        fileCount,\n        message: `Created draft skill \"${result.slug}\" (${fileCount} file${fileCount !== 1 ? \"s\" : \"\"}) \u2014 submit for review in the web UI`,\n      };\n\n      console.log(JSON.stringify(output, null, 2));\n    } catch (error) {\n      console.error(\n        \"Error:\",\n        error instanceof Error ? error.message : String(error),\n      );\n      process.exit(1);\n    }\n  });\n\n// Health check command - verify plugin configuration and connectivity\nprogram\n  .command(\"health\")\n  .description(\"Check plugin health and connectivity status\")\n  .option(\"--json\", \"Output as JSON\")\n  .action(async (options) => {\n    const healthStatus = {\n      configured: false,\n      apiKeyValid: false,\n      backendConnected: false,\n      hooksRegistered: false,\n      errors: [] as string[],\n    };\n\n    try {\n      const configManager = new ConfigManager();\n      const config = configManager.getConfig();\n\n      // Check configuration\n      healthStatus.configured = configManager.isConfigured();\n\n      if (!healthStatus.configured) {\n        healthStatus.errors.push(\"API key not configured\");\n      } else {\n        // Validate API key and backend connectivity\n        try {\n          const client = new GrpcAPIClient(\n            config.user.apiKey,\n            config.backendGrpcUrl,\n            config.grpcUseTls,\n          );\n          const user = await client.validateApiKey();\n\n          if (user) {\n            healthStatus.apiKeyValid = true;\n            healthStatus.backendConnected = true;\n          } else {\n            healthStatus.errors.push(\"API key validation failed\");\n          }\n        } catch (error) {\n          healthStatus.errors.push(\"Backend connection failed\");\n        }\n      }\n\n      // Check hooks registration\n      const pluginRoot =\n        process.env.CLAUDE_PLUGIN_ROOT || join(__dirname, \"..\");\n      const hooksPath = join(pluginRoot, \"hooks\", \"hooks.json\");\n      healthStatus.hooksRegistered = existsSync(hooksPath);\n\n      if (!healthStatus.hooksRegistered) {\n        healthStatus.errors.push(\"Hooks not registered\");\n      }\n\n      if (options.json) {\n        console.log(JSON.stringify(healthStatus, null, 2));\n      } else {\n        console.log(\"\\n--- Plugin Health Check ---\\n\");\n        console.log(\n          `Configured:         ${healthStatus.configured ? \"\u2713\" : \"\u2717\"}`,\n        );\n        console.log(\n          `API Key Valid:      ${healthStatus.apiKeyValid ? \"\u2713\" : \"\u2717\"}`,\n        );\n        console.log(\n          `Backend Connected:  ${healthStatus.backendConnected ? \"\u2713\" : \"\u2717\"}`,\n        );\n        console.log(\n          `Hooks Registered:   ${healthStatus.hooksRegistered ? \"\u2713\" : \"\u2717\"}`,\n        );\n\n        if (healthStatus.errors.length > 0) {\n          console.log(\"\\nErrors:\");\n          healthStatus.errors.forEach((err) => console.log(`  - ${err}`));\n        } else {\n          console.log(\"\\nAll checks passed!\");\n        }\n        console.log(\"\");\n      }\n    } catch (error) {\n      healthStatus.errors.push(\n        error instanceof Error ? error.message : \"Unknown error\",\n      );\n\n      if (options.json) {\n        console.log(JSON.stringify(healthStatus, null, 2));\n      } else {\n        console.error(\"Health check failed:\", error);\n      }\n\n      process.exit(1);\n    }\n  });\n\nprogram.parse();\n", "/**\n * Configuration management for SessionHub plugin.\n */\n\nimport { readFileSync, writeFileSync, existsSync, mkdirSync, chmodSync } from 'fs';\nimport { join } from 'path';\nimport { homedir } from 'os';\nimport { z } from 'zod';\nimport { logger } from './logger.js';\n\nconst UserConfigSchema = z.object({\n  apiKey: z.string().default(''),\n});\n\nconst SessionConfigSchema = z.object({\n  sessionTimeout: z.number().default(300),\n  fileWatchEnabled: z.boolean().default(true),\n  autoDetectTools: z.boolean().default(true),\n  minInteractionCount: z.number().default(1),\n  monitoredProcesses: z.array(z.string()).default(['claude', 'claude-code', 'cursor', 'code']),\n  watchedExtensions: z.array(z.string()).default([\n    '.py', '.js', '.ts', '.jsx', '.tsx', '.go', '.rs', '.java',\n    '.c', '.cpp', '.h', '.hpp', '.php', '.rb', '.swift', '.kt',\n    '.scala', '.clj', '.hs', '.ml', '.elm', '.dart', '.vue',\n    '.html', '.css', '.scss', '.sass', '.less', '.sql', '.sh',\n    '.yaml', '.yml', '.json', '.xml', '.toml', '.ini', '.cfg'\n  ]),\n});\n\nconst LoggingConfigSchema = z.object({\n  level: z.string().default('INFO'),\n  filePath: z.string().optional(),\n  consoleOutput: z.boolean().default(true),\n  maxFileSize: z.number().default(10_000_000),\n  backupCount: z.number().default(3),\n});\n\nconst AppConfigSchema = z.object({\n  user: UserConfigSchema.default({}),\n  session: SessionConfigSchema.default({}),\n  logging: LoggingConfigSchema.default({}),\n  backendGrpcUrl: z.string().default('plugin.sessionhub.dev'),\n  grpcUseTls: z.boolean().optional(), // Override TLS behavior (auto-detect by default: TLS for non-localhost)\n  serverName: z.string().default('sessionhub-plugin'),\n  serverVersion: z.string().default('1.0.0'),\n  // Note: Supabase credentials removed for security\n  // All Supabase operations now go through the authenticated backend\n});\n\nexport type UserConfig = z.infer<typeof UserConfigSchema>;\nexport type SessionConfig = z.infer<typeof SessionConfigSchema>;\nexport type LoggingConfig = z.infer<typeof LoggingConfigSchema>;\nexport type AppConfig = z.infer<typeof AppConfigSchema>;\n\nexport class ConfigManager {\n  private configDir: string;\n  private configFile: string;\n  private config: AppConfig | null = null;\n\n  constructor(configDir?: string) {\n    if (configDir) {\n      this.configDir = configDir;\n    } else {\n      this.configDir = join(homedir(), '.sessionhub');\n    }\n\n    this.configFile = join(this.configDir, 'config.json');\n\n    if (!existsSync(this.configDir)) {\n      mkdirSync(this.configDir, { recursive: true });\n    }\n  }\n\n  loadConfig(): AppConfig {\n    let configData: any = {};\n\n    if (existsSync(this.configFile)) {\n      try {\n        const fileContent = readFileSync(this.configFile, 'utf8');\n        configData = JSON.parse(fileContent);\n      } catch (error) {\n        logger.warn(`Warning: Could not load config file: ${error}`);\n      }\n    }\n\n    this.config = AppConfigSchema.parse(configData);\n    return this.config;\n  }\n\n  saveConfig(config: AppConfig): void {\n    try {\n      // Write with restrictive permissions (owner read/write only)\n      // This protects the API key from being read by other users\n      writeFileSync(this.configFile, JSON.stringify(config, null, 2), { mode: 0o600 });\n      // Ensure permissions are set even if file existed with different perms\n      chmodSync(this.configFile, 0o600);\n      this.config = config;\n    } catch (error) {\n      logger.error(`Error saving config: ${error instanceof Error ? error.message : error}`);\n    }\n  }\n\n  getConfig(): AppConfig {\n    if (this.config === null) {\n      return this.loadConfig();\n    }\n    return this.config;\n  }\n\n  // Environment variable overrides removed - use /setup command instead\n\n  validateConfig(config: AppConfig): string[] {\n    const issues: string[] = [];\n\n    if (!config.user.apiKey) {\n      issues.push('API key not configured. Run /setup <your-api-key> to configure.');\n    }\n\n    if (!config.backendGrpcUrl) {\n      issues.push('Backend URL not configured.');\n    }\n\n    return issues;\n  }\n\n  /**\n   * Check if the plugin has been configured with an API key\n   */\n  isConfigured(): boolean {\n    const config = this.getConfig();\n    return !!config.user.apiKey;\n  }\n}\n\nlet configManager: ConfigManager | null = null;\n\nexport function getConfigManager(): ConfigManager {\n  if (configManager === null) {\n    configManager = new ConfigManager();\n  }\n  return configManager;\n}\n\nexport function getConfig(): AppConfig {\n  return getConfigManager().getConfig();\n}\n", "export * from \"./errors.js\";\nexport * from \"./helpers/parseUtil.js\";\nexport * from \"./helpers/typeAliases.js\";\nexport * from \"./helpers/util.js\";\nexport * from \"./types.js\";\nexport * from \"./ZodError.js\";\n", "export var util;\n(function (util) {\n    util.assertEqual = (_) => { };\n    function assertIs(_arg) { }\n    util.assertIs = assertIs;\n    function assertNever(_x) {\n        throw new Error();\n    }\n    util.assertNever = assertNever;\n    util.arrayToEnum = (items) => {\n        const obj = {};\n        for (const item of items) {\n            obj[item] = item;\n        }\n        return obj;\n    };\n    util.getValidEnumValues = (obj) => {\n        const validKeys = util.objectKeys(obj).filter((k) => typeof obj[obj[k]] !== \"number\");\n        const filtered = {};\n        for (const k of validKeys) {\n            filtered[k] = obj[k];\n        }\n        return util.objectValues(filtered);\n    };\n    util.objectValues = (obj) => {\n        return util.objectKeys(obj).map(function (e) {\n            return obj[e];\n        });\n    };\n    util.objectKeys = typeof Object.keys === \"function\" // eslint-disable-line ban/ban\n        ? (obj) => Object.keys(obj) // eslint-disable-line ban/ban\n        : (object) => {\n            const keys = [];\n            for (const key in object) {\n                if (Object.prototype.hasOwnProperty.call(object, key)) {\n                    keys.push(key);\n                }\n            }\n            return keys;\n        };\n    util.find = (arr, checker) => {\n        for (const item of arr) {\n            if (checker(item))\n                return item;\n        }\n        return undefined;\n    };\n    util.isInteger = typeof Number.isInteger === \"function\"\n        ? (val) => Number.isInteger(val) // eslint-disable-line ban/ban\n        : (val) => typeof val === \"number\" && Number.isFinite(val) && Math.floor(val) === val;\n    function joinValues(array, separator = \" | \") {\n        return array.map((val) => (typeof val === \"string\" ? `'${val}'` : val)).join(separator);\n    }\n    util.joinValues = joinValues;\n    util.jsonStringifyReplacer = (_, value) => {\n        if (typeof value === \"bigint\") {\n            return value.toString();\n        }\n        return value;\n    };\n})(util || (util = {}));\nexport var objectUtil;\n(function (objectUtil) {\n    objectUtil.mergeShapes = (first, second) => {\n        return {\n            ...first,\n            ...second, // second overwrites first\n        };\n    };\n})(objectUtil || (objectUtil = {}));\nexport const ZodParsedType = util.arrayToEnum([\n    \"string\",\n    \"nan\",\n    \"number\",\n    \"integer\",\n    \"float\",\n    \"boolean\",\n    \"date\",\n    \"bigint\",\n    \"symbol\",\n    \"function\",\n    \"undefined\",\n    \"null\",\n    \"array\",\n    \"object\",\n    \"unknown\",\n    \"promise\",\n    \"void\",\n    \"never\",\n    \"map\",\n    \"set\",\n]);\nexport const getParsedType = (data) => {\n    const t = typeof data;\n    switch (t) {\n        case \"undefined\":\n            return ZodParsedType.undefined;\n        case \"string\":\n            return ZodParsedType.string;\n        case \"number\":\n            return Number.isNaN(data) ? ZodParsedType.nan : ZodParsedType.number;\n        case \"boolean\":\n            return ZodParsedType.boolean;\n        case \"function\":\n            return ZodParsedType.function;\n        case \"bigint\":\n            return ZodParsedType.bigint;\n        case \"symbol\":\n            return ZodParsedType.symbol;\n        case \"object\":\n            if (Array.isArray(data)) {\n                return ZodParsedType.array;\n            }\n            if (data === null) {\n                return ZodParsedType.null;\n            }\n            if (data.then && typeof data.then === \"function\" && data.catch && typeof data.catch === \"function\") {\n                return ZodParsedType.promise;\n            }\n            if (typeof Map !== \"undefined\" && data instanceof Map) {\n                return ZodParsedType.map;\n            }\n            if (typeof Set !== \"undefined\" && data instanceof Set) {\n                return ZodParsedType.set;\n            }\n            if (typeof Date !== \"undefined\" && data instanceof Date) {\n                return ZodParsedType.date;\n            }\n            return ZodParsedType.object;\n        default:\n            return ZodParsedType.unknown;\n    }\n};\n", "import { util } from \"./helpers/util.js\";\nexport const ZodIssueCode = util.arrayToEnum([\n    \"invalid_type\",\n    \"invalid_literal\",\n    \"custom\",\n    \"invalid_union\",\n    \"invalid_union_discriminator\",\n    \"invalid_enum_value\",\n    \"unrecognized_keys\",\n    \"invalid_arguments\",\n    \"invalid_return_type\",\n    \"invalid_date\",\n    \"invalid_string\",\n    \"too_small\",\n    \"too_big\",\n    \"invalid_intersection_types\",\n    \"not_multiple_of\",\n    \"not_finite\",\n]);\nexport const quotelessJson = (obj) => {\n    const json = JSON.stringify(obj, null, 2);\n    return json.replace(/\"([^\"]+)\":/g, \"$1:\");\n};\nexport class ZodError extends Error {\n    get errors() {\n        return this.issues;\n    }\n    constructor(issues) {\n        super();\n        this.issues = [];\n        this.addIssue = (sub) => {\n            this.issues = [...this.issues, sub];\n        };\n        this.addIssues = (subs = []) => {\n            this.issues = [...this.issues, ...subs];\n        };\n        const actualProto = new.target.prototype;\n        if (Object.setPrototypeOf) {\n            // eslint-disable-next-line ban/ban\n            Object.setPrototypeOf(this, actualProto);\n        }\n        else {\n            this.__proto__ = actualProto;\n        }\n        this.name = \"ZodError\";\n        this.issues = issues;\n    }\n    format(_mapper) {\n        const mapper = _mapper ||\n            function (issue) {\n                return issue.message;\n            };\n        const fieldErrors = { _errors: [] };\n        const processError = (error) => {\n            for (const issue of error.issues) {\n                if (issue.code === \"invalid_union\") {\n                    issue.unionErrors.map(processError);\n                }\n                else if (issue.code === \"invalid_return_type\") {\n                    processError(issue.returnTypeError);\n                }\n                else if (issue.code === \"invalid_arguments\") {\n                    processError(issue.argumentsError);\n                }\n                else if (issue.path.length === 0) {\n                    fieldErrors._errors.push(mapper(issue));\n                }\n                else {\n                    let curr = fieldErrors;\n                    let i = 0;\n                    while (i < issue.path.length) {\n                        const el = issue.path[i];\n                        const terminal = i === issue.path.length - 1;\n                        if (!terminal) {\n                            curr[el] = curr[el] || { _errors: [] };\n                            // if (typeof el === \"string\") {\n                            //   curr[el] = curr[el] || { _errors: [] };\n                            // } else if (typeof el === \"number\") {\n                            //   const errorArray: any = [];\n                            //   errorArray._errors = [];\n                            //   curr[el] = curr[el] || errorArray;\n                            // }\n                        }\n                        else {\n                            curr[el] = curr[el] || { _errors: [] };\n                            curr[el]._errors.push(mapper(issue));\n                        }\n                        curr = curr[el];\n                        i++;\n                    }\n                }\n            }\n        };\n        processError(this);\n        return fieldErrors;\n    }\n    static assert(value) {\n        if (!(value instanceof ZodError)) {\n            throw new Error(`Not a ZodError: ${value}`);\n        }\n    }\n    toString() {\n        return this.message;\n    }\n    get message() {\n        return JSON.stringify(this.issues, util.jsonStringifyReplacer, 2);\n    }\n    get isEmpty() {\n        return this.issues.length === 0;\n    }\n    flatten(mapper = (issue) => issue.message) {\n        const fieldErrors = {};\n        const formErrors = [];\n        for (const sub of this.issues) {\n            if (sub.path.length > 0) {\n                const firstEl = sub.path[0];\n                fieldErrors[firstEl] = fieldErrors[firstEl] || [];\n                fieldErrors[firstEl].push(mapper(sub));\n            }\n            else {\n                formErrors.push(mapper(sub));\n            }\n        }\n        return { formErrors, fieldErrors };\n    }\n    get formErrors() {\n        return this.flatten();\n    }\n}\nZodError.create = (issues) => {\n    const error = new ZodError(issues);\n    return error;\n};\n", "import { ZodIssueCode } from \"../ZodError.js\";\nimport { util, ZodParsedType } from \"../helpers/util.js\";\nconst errorMap = (issue, _ctx) => {\n    let message;\n    switch (issue.code) {\n        case ZodIssueCode.invalid_type:\n            if (issue.received === ZodParsedType.undefined) {\n                message = \"Required\";\n            }\n            else {\n                message = `Expected ${issue.expected}, received ${issue.received}`;\n            }\n            break;\n        case ZodIssueCode.invalid_literal:\n            message = `Invalid literal value, expected ${JSON.stringify(issue.expected, util.jsonStringifyReplacer)}`;\n            break;\n        case ZodIssueCode.unrecognized_keys:\n            message = `Unrecognized key(s) in object: ${util.joinValues(issue.keys, \", \")}`;\n            break;\n        case ZodIssueCode.invalid_union:\n            message = `Invalid input`;\n            break;\n        case ZodIssueCode.invalid_union_discriminator:\n            message = `Invalid discriminator value. Expected ${util.joinValues(issue.options)}`;\n            break;\n        case ZodIssueCode.invalid_enum_value:\n            message = `Invalid enum value. Expected ${util.joinValues(issue.options)}, received '${issue.received}'`;\n            break;\n        case ZodIssueCode.invalid_arguments:\n            message = `Invalid function arguments`;\n            break;\n        case ZodIssueCode.invalid_return_type:\n            message = `Invalid function return type`;\n            break;\n        case ZodIssueCode.invalid_date:\n            message = `Invalid date`;\n            break;\n        case ZodIssueCode.invalid_string:\n            if (typeof issue.validation === \"object\") {\n                if (\"includes\" in issue.validation) {\n                    message = `Invalid input: must include \"${issue.validation.includes}\"`;\n                    if (typeof issue.validation.position === \"number\") {\n                        message = `${message} at one or more positions greater than or equal to ${issue.validation.position}`;\n                    }\n                }\n                else if (\"startsWith\" in issue.validation) {\n                    message = `Invalid input: must start with \"${issue.validation.startsWith}\"`;\n                }\n                else if (\"endsWith\" in issue.validation) {\n                    message = `Invalid input: must end with \"${issue.validation.endsWith}\"`;\n                }\n                else {\n                    util.assertNever(issue.validation);\n                }\n            }\n            else if (issue.validation !== \"regex\") {\n                message = `Invalid ${issue.validation}`;\n            }\n            else {\n                message = \"Invalid\";\n            }\n            break;\n        case ZodIssueCode.too_small:\n            if (issue.type === \"array\")\n                message = `Array must contain ${issue.exact ? \"exactly\" : issue.inclusive ? `at least` : `more than`} ${issue.minimum} element(s)`;\n            else if (issue.type === \"string\")\n                message = `String must contain ${issue.exact ? \"exactly\" : issue.inclusive ? `at least` : `over`} ${issue.minimum} character(s)`;\n            else if (issue.type === \"number\")\n                message = `Number must be ${issue.exact ? `exactly equal to ` : issue.inclusive ? `greater than or equal to ` : `greater than `}${issue.minimum}`;\n            else if (issue.type === \"bigint\")\n                message = `Number must be ${issue.exact ? `exactly equal to ` : issue.inclusive ? `greater than or equal to ` : `greater than `}${issue.minimum}`;\n            else if (issue.type === \"date\")\n                message = `Date must be ${issue.exact ? `exactly equal to ` : issue.inclusive ? `greater than or equal to ` : `greater than `}${new Date(Number(issue.minimum))}`;\n            else\n                message = \"Invalid input\";\n            break;\n        case ZodIssueCode.too_big:\n            if (issue.type === \"array\")\n                message = `Array must contain ${issue.exact ? `exactly` : issue.inclusive ? `at most` : `less than`} ${issue.maximum} element(s)`;\n            else if (issue.type === \"string\")\n                message = `String must contain ${issue.exact ? `exactly` : issue.inclusive ? `at most` : `under`} ${issue.maximum} character(s)`;\n            else if (issue.type === \"number\")\n                message = `Number must be ${issue.exact ? `exactly` : issue.inclusive ? `less than or equal to` : `less than`} ${issue.maximum}`;\n            else if (issue.type === \"bigint\")\n                message = `BigInt must be ${issue.exact ? `exactly` : issue.inclusive ? `less than or equal to` : `less than`} ${issue.maximum}`;\n            else if (issue.type === \"date\")\n                message = `Date must be ${issue.exact ? `exactly` : issue.inclusive ? `smaller than or equal to` : `smaller than`} ${new Date(Number(issue.maximum))}`;\n            else\n                message = \"Invalid input\";\n            break;\n        case ZodIssueCode.custom:\n            message = `Invalid input`;\n            break;\n        case ZodIssueCode.invalid_intersection_types:\n            message = `Intersection results could not be merged`;\n            break;\n        case ZodIssueCode.not_multiple_of:\n            message = `Number must be a multiple of ${issue.multipleOf}`;\n            break;\n        case ZodIssueCode.not_finite:\n            message = \"Number must be finite\";\n            break;\n        default:\n            message = _ctx.defaultError;\n            util.assertNever(issue);\n    }\n    return { message };\n};\nexport default errorMap;\n", "import defaultErrorMap from \"./locales/en.js\";\nlet overrideErrorMap = defaultErrorMap;\nexport { defaultErrorMap };\nexport function setErrorMap(map) {\n    overrideErrorMap = map;\n}\nexport function getErrorMap() {\n    return overrideErrorMap;\n}\n", "import { getErrorMap } from \"../errors.js\";\nimport defaultErrorMap from \"../locales/en.js\";\nexport const makeIssue = (params) => {\n    const { data, path, errorMaps, issueData } = params;\n    const fullPath = [...path, ...(issueData.path || [])];\n    const fullIssue = {\n        ...issueData,\n        path: fullPath,\n    };\n    if (issueData.message !== undefined) {\n        return {\n            ...issueData,\n            path: fullPath,\n            message: issueData.message,\n        };\n    }\n    let errorMessage = \"\";\n    const maps = errorMaps\n        .filter((m) => !!m)\n        .slice()\n        .reverse();\n    for (const map of maps) {\n        errorMessage = map(fullIssue, { data, defaultError: errorMessage }).message;\n    }\n    return {\n        ...issueData,\n        path: fullPath,\n        message: errorMessage,\n    };\n};\nexport const EMPTY_PATH = [];\nexport function addIssueToContext(ctx, issueData) {\n    const overrideMap = getErrorMap();\n    const issue = makeIssue({\n        issueData: issueData,\n        data: ctx.data,\n        path: ctx.path,\n        errorMaps: [\n            ctx.common.contextualErrorMap, // contextual error map is first priority\n            ctx.schemaErrorMap, // then schema-bound map if available\n            overrideMap, // then global override map\n            overrideMap === defaultErrorMap ? undefined : defaultErrorMap, // then global default map\n        ].filter((x) => !!x),\n    });\n    ctx.common.issues.push(issue);\n}\nexport class ParseStatus {\n    constructor() {\n        this.value = \"valid\";\n    }\n    dirty() {\n        if (this.value === \"valid\")\n            this.value = \"dirty\";\n    }\n    abort() {\n        if (this.value !== \"aborted\")\n            this.value = \"aborted\";\n    }\n    static mergeArray(status, results) {\n        const arrayValue = [];\n        for (const s of results) {\n            if (s.status === \"aborted\")\n                return INVALID;\n            if (s.status === \"dirty\")\n                status.dirty();\n            arrayValue.push(s.value);\n        }\n        return { status: status.value, value: arrayValue };\n    }\n    static async mergeObjectAsync(status, pairs) {\n        const syncPairs = [];\n        for (const pair of pairs) {\n            const key = await pair.key;\n            const value = await pair.value;\n            syncPairs.push({\n                key,\n                value,\n            });\n        }\n        return ParseStatus.mergeObjectSync(status, syncPairs);\n    }\n    static mergeObjectSync(status, pairs) {\n        const finalObject = {};\n        for (const pair of pairs) {\n            const { key, value } = pair;\n            if (key.status === \"aborted\")\n                return INVALID;\n            if (value.status === \"aborted\")\n                return INVALID;\n            if (key.status === \"dirty\")\n                status.dirty();\n            if (value.status === \"dirty\")\n                status.dirty();\n            if (key.value !== \"__proto__\" && (typeof value.value !== \"undefined\" || pair.alwaysSet)) {\n                finalObject[key.value] = value.value;\n            }\n        }\n        return { status: status.value, value: finalObject };\n    }\n}\nexport const INVALID = Object.freeze({\n    status: \"aborted\",\n});\nexport const DIRTY = (value) => ({ status: \"dirty\", value });\nexport const OK = (value) => ({ status: \"valid\", value });\nexport const isAborted = (x) => x.status === \"aborted\";\nexport const isDirty = (x) => x.status === \"dirty\";\nexport const isValid = (x) => x.status === \"valid\";\nexport const isAsync = (x) => typeof Promise !== \"undefined\" && x instanceof Promise;\n", "export var errorUtil;\n(function (errorUtil) {\n    errorUtil.errToObj = (message) => typeof message === \"string\" ? { message } : message || {};\n    // biome-ignore lint:\n    errorUtil.toString = (message) => typeof message === \"string\" ? message : message?.message;\n})(errorUtil || (errorUtil = {}));\n", "import { ZodError, ZodIssueCode, } from \"./ZodError.js\";\nimport { defaultErrorMap, getErrorMap } from \"./errors.js\";\nimport { errorUtil } from \"./helpers/errorUtil.js\";\nimport { DIRTY, INVALID, OK, ParseStatus, addIssueToContext, isAborted, isAsync, isDirty, isValid, makeIssue, } from \"./helpers/parseUtil.js\";\nimport { util, ZodParsedType, getParsedType } from \"./helpers/util.js\";\nclass ParseInputLazyPath {\n    constructor(parent, value, path, key) {\n        this._cachedPath = [];\n        this.parent = parent;\n        this.data = value;\n        this._path = path;\n        this._key = key;\n    }\n    get path() {\n        if (!this._cachedPath.length) {\n            if (Array.isArray(this._key)) {\n                this._cachedPath.push(...this._path, ...this._key);\n            }\n            else {\n                this._cachedPath.push(...this._path, this._key);\n            }\n        }\n        return this._cachedPath;\n    }\n}\nconst handleResult = (ctx, result) => {\n    if (isValid(result)) {\n        return { success: true, data: result.value };\n    }\n    else {\n        if (!ctx.common.issues.length) {\n            throw new Error(\"Validation failed but no issues detected.\");\n        }\n        return {\n            success: false,\n            get error() {\n                if (this._error)\n                    return this._error;\n                const error = new ZodError(ctx.common.issues);\n                this._error = error;\n                return this._error;\n            },\n        };\n    }\n};\nfunction processCreateParams(params) {\n    if (!params)\n        return {};\n    const { errorMap, invalid_type_error, required_error, description } = params;\n    if (errorMap && (invalid_type_error || required_error)) {\n        throw new Error(`Can't use \"invalid_type_error\" or \"required_error\" in conjunction with custom error map.`);\n    }\n    if (errorMap)\n        return { errorMap: errorMap, description };\n    const customMap = (iss, ctx) => {\n        const { message } = params;\n        if (iss.code === \"invalid_enum_value\") {\n            return { message: message ?? ctx.defaultError };\n        }\n        if (typeof ctx.data === \"undefined\") {\n            return { message: message ?? required_error ?? ctx.defaultError };\n        }\n        if (iss.code !== \"invalid_type\")\n            return { message: ctx.defaultError };\n        return { message: message ?? invalid_type_error ?? ctx.defaultError };\n    };\n    return { errorMap: customMap, description };\n}\nexport class ZodType {\n    get description() {\n        return this._def.description;\n    }\n    _getType(input) {\n        return getParsedType(input.data);\n    }\n    _getOrReturnCtx(input, ctx) {\n        return (ctx || {\n            common: input.parent.common,\n            data: input.data,\n            parsedType: getParsedType(input.data),\n            schemaErrorMap: this._def.errorMap,\n            path: input.path,\n            parent: input.parent,\n        });\n    }\n    _processInputParams(input) {\n        return {\n            status: new ParseStatus(),\n            ctx: {\n                common: input.parent.common,\n                data: input.data,\n                parsedType: getParsedType(input.data),\n                schemaErrorMap: this._def.errorMap,\n                path: input.path,\n                parent: input.parent,\n            },\n        };\n    }\n    _parseSync(input) {\n        const result = this._parse(input);\n        if (isAsync(result)) {\n            throw new Error(\"Synchronous parse encountered promise.\");\n        }\n        return result;\n    }\n    _parseAsync(input) {\n        const result = this._parse(input);\n        return Promise.resolve(result);\n    }\n    parse(data, params) {\n        const result = this.safeParse(data, params);\n        if (result.success)\n            return result.data;\n        throw result.error;\n    }\n    safeParse(data, params) {\n        const ctx = {\n            common: {\n                issues: [],\n                async: params?.async ?? false,\n                contextualErrorMap: params?.errorMap,\n            },\n            path: params?.path || [],\n            schemaErrorMap: this._def.errorMap,\n            parent: null,\n            data,\n            parsedType: getParsedType(data),\n        };\n        const result = this._parseSync({ data, path: ctx.path, parent: ctx });\n        return handleResult(ctx, result);\n    }\n    \"~validate\"(data) {\n        const ctx = {\n            common: {\n                issues: [],\n                async: !!this[\"~standard\"].async,\n            },\n            path: [],\n            schemaErrorMap: this._def.errorMap,\n            parent: null,\n            data,\n            parsedType: getParsedType(data),\n        };\n        if (!this[\"~standard\"].async) {\n            try {\n                const result = this._parseSync({ data, path: [], parent: ctx });\n                return isValid(result)\n                    ? {\n                        value: result.value,\n                    }\n                    : {\n                        issues: ctx.common.issues,\n                    };\n            }\n            catch (err) {\n                if (err?.message?.toLowerCase()?.includes(\"encountered\")) {\n                    this[\"~standard\"].async = true;\n                }\n                ctx.common = {\n                    issues: [],\n                    async: true,\n                };\n            }\n        }\n        return this._parseAsync({ data, path: [], parent: ctx }).then((result) => isValid(result)\n            ? {\n                value: result.value,\n            }\n            : {\n                issues: ctx.common.issues,\n            });\n    }\n    async parseAsync(data, params) {\n        const result = await this.safeParseAsync(data, params);\n        if (result.success)\n            return result.data;\n        throw result.error;\n    }\n    async safeParseAsync(data, params) {\n        const ctx = {\n            common: {\n                issues: [],\n                contextualErrorMap: params?.errorMap,\n                async: true,\n            },\n            path: params?.path || [],\n            schemaErrorMap: this._def.errorMap,\n            parent: null,\n            data,\n            parsedType: getParsedType(data),\n        };\n        const maybeAsyncResult = this._parse({ data, path: ctx.path, parent: ctx });\n        const result = await (isAsync(maybeAsyncResult) ? maybeAsyncResult : Promise.resolve(maybeAsyncResult));\n        return handleResult(ctx, result);\n    }\n    refine(check, message) {\n        const getIssueProperties = (val) => {\n            if (typeof message === \"string\" || typeof message === \"undefined\") {\n                return { message };\n            }\n            else if (typeof message === \"function\") {\n                return message(val);\n            }\n            else {\n                return message;\n            }\n        };\n        return this._refinement((val, ctx) => {\n            const result = check(val);\n            const setError = () => ctx.addIssue({\n                code: ZodIssueCode.custom,\n                ...getIssueProperties(val),\n            });\n            if (typeof Promise !== \"undefined\" && result instanceof Promise) {\n                return result.then((data) => {\n                    if (!data) {\n                        setError();\n                        return false;\n                    }\n                    else {\n                        return true;\n                    }\n                });\n            }\n            if (!result) {\n                setError();\n                return false;\n            }\n            else {\n                return true;\n            }\n        });\n    }\n    refinement(check, refinementData) {\n        return this._refinement((val, ctx) => {\n            if (!check(val)) {\n                ctx.addIssue(typeof refinementData === \"function\" ? refinementData(val, ctx) : refinementData);\n                return false;\n            }\n            else {\n                return true;\n            }\n        });\n    }\n    _refinement(refinement) {\n        return new ZodEffects({\n            schema: this,\n            typeName: ZodFirstPartyTypeKind.ZodEffects,\n            effect: { type: \"refinement\", refinement },\n        });\n    }\n    superRefine(refinement) {\n        return this._refinement(refinement);\n    }\n    constructor(def) {\n        /** Alias of safeParseAsync */\n        this.spa = this.safeParseAsync;\n        this._def = def;\n        this.parse = this.parse.bind(this);\n        this.safeParse = this.safeParse.bind(this);\n        this.parseAsync = this.parseAsync.bind(this);\n        this.safeParseAsync = this.safeParseAsync.bind(this);\n        this.spa = this.spa.bind(this);\n        this.refine = this.refine.bind(this);\n        this.refinement = this.refinement.bind(this);\n        this.superRefine = this.superRefine.bind(this);\n        this.optional = this.optional.bind(this);\n        this.nullable = this.nullable.bind(this);\n        this.nullish = this.nullish.bind(this);\n        this.array = this.array.bind(this);\n        this.promise = this.promise.bind(this);\n        this.or = this.or.bind(this);\n        this.and = this.and.bind(this);\n        this.transform = this.transform.bind(this);\n        this.brand = this.brand.bind(this);\n        this.default = this.default.bind(this);\n        this.catch = this.catch.bind(this);\n        this.describe = this.describe.bind(this);\n        this.pipe = this.pipe.bind(this);\n        this.readonly = this.readonly.bind(this);\n        this.isNullable = this.isNullable.bind(this);\n        this.isOptional = this.isOptional.bind(this);\n        this[\"~standard\"] = {\n            version: 1,\n            vendor: \"zod\",\n            validate: (data) => this[\"~validate\"](data),\n        };\n    }\n    optional() {\n        return ZodOptional.create(this, this._def);\n    }\n    nullable() {\n        return ZodNullable.create(this, this._def);\n    }\n    nullish() {\n        return this.nullable().optional();\n    }\n    array() {\n        return ZodArray.create(this);\n    }\n    promise() {\n        return ZodPromise.create(this, this._def);\n    }\n    or(option) {\n        return ZodUnion.create([this, option], this._def);\n    }\n    and(incoming) {\n        return ZodIntersection.create(this, incoming, this._def);\n    }\n    transform(transform) {\n        return new ZodEffects({\n            ...processCreateParams(this._def),\n            schema: this,\n            typeName: ZodFirstPartyTypeKind.ZodEffects,\n            effect: { type: \"transform\", transform },\n        });\n    }\n    default(def) {\n        const defaultValueFunc = typeof def === \"function\" ? def : () => def;\n        return new ZodDefault({\n            ...processCreateParams(this._def),\n            innerType: this,\n            defaultValue: defaultValueFunc,\n            typeName: ZodFirstPartyTypeKind.ZodDefault,\n        });\n    }\n    brand() {\n        return new ZodBranded({\n            typeName: ZodFirstPartyTypeKind.ZodBranded,\n            type: this,\n            ...processCreateParams(this._def),\n        });\n    }\n    catch(def) {\n        const catchValueFunc = typeof def === \"function\" ? def : () => def;\n        return new ZodCatch({\n            ...processCreateParams(this._def),\n            innerType: this,\n            catchValue: catchValueFunc,\n            typeName: ZodFirstPartyTypeKind.ZodCatch,\n        });\n    }\n    describe(description) {\n        const This = this.constructor;\n        return new This({\n            ...this._def,\n            description,\n        });\n    }\n    pipe(target) {\n        return ZodPipeline.create(this, target);\n    }\n    readonly() {\n        return ZodReadonly.create(this);\n    }\n    isOptional() {\n        return this.safeParse(undefined).success;\n    }\n    isNullable() {\n        return this.safeParse(null).success;\n    }\n}\nconst cuidRegex = /^c[^\\s-]{8,}$/i;\nconst cuid2Regex = /^[0-9a-z]+$/;\nconst ulidRegex = /^[0-9A-HJKMNP-TV-Z]{26}$/i;\n// const uuidRegex =\n//   /^([a-f0-9]{8}-[a-f0-9]{4}-[1-5][a-f0-9]{3}-[a-f0-9]{4}-[a-f0-9]{12}|00000000-0000-0000-0000-000000000000)$/i;\nconst uuidRegex = /^[0-9a-fA-F]{8}\\b-[0-9a-fA-F]{4}\\b-[0-9a-fA-F]{4}\\b-[0-9a-fA-F]{4}\\b-[0-9a-fA-F]{12}$/i;\nconst nanoidRegex = /^[a-z0-9_-]{21}$/i;\nconst jwtRegex = /^[A-Za-z0-9-_]+\\.[A-Za-z0-9-_]+\\.[A-Za-z0-9-_]*$/;\nconst durationRegex = /^[-+]?P(?!$)(?:(?:[-+]?\\d+Y)|(?:[-+]?\\d+[.,]\\d+Y$))?(?:(?:[-+]?\\d+M)|(?:[-+]?\\d+[.,]\\d+M$))?(?:(?:[-+]?\\d+W)|(?:[-+]?\\d+[.,]\\d+W$))?(?:(?:[-+]?\\d+D)|(?:[-+]?\\d+[.,]\\d+D$))?(?:T(?=[\\d+-])(?:(?:[-+]?\\d+H)|(?:[-+]?\\d+[.,]\\d+H$))?(?:(?:[-+]?\\d+M)|(?:[-+]?\\d+[.,]\\d+M$))?(?:[-+]?\\d+(?:[.,]\\d+)?S)?)??$/;\n// from https://stackoverflow.com/a/46181/1550155\n// old version: too slow, didn't support unicode\n// const emailRegex = /^((([a-z]|\\d|[!#\\$%&'\\*\\+\\-\\/=\\?\\^_`{\\|}~]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])+(\\.([a-z]|\\d|[!#\\$%&'\\*\\+\\-\\/=\\?\\^_`{\\|}~]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])+)*)|((\\x22)((((\\x20|\\x09)*(\\x0d\\x0a))?(\\x20|\\x09)+)?(([\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x7f]|\\x21|[\\x23-\\x5b]|[\\x5d-\\x7e]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(\\\\([\\x01-\\x09\\x0b\\x0c\\x0d-\\x7f]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]))))*(((\\x20|\\x09)*(\\x0d\\x0a))?(\\x20|\\x09)+)?(\\x22)))@((([a-z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(([a-z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])*([a-z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])))\\.)+(([a-z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(([a-z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])*([a-z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])))$/i;\n//old email regex\n// const emailRegex = /^(([^<>()[\\].,;:\\s@\"]+(\\.[^<>()[\\].,;:\\s@\"]+)*)|(\".+\"))@((?!-)([^<>()[\\].,;:\\s@\"]+\\.)+[^<>()[\\].,;:\\s@\"]{1,})[^-<>()[\\].,;:\\s@\"]$/i;\n// eslint-disable-next-line\n// const emailRegex =\n//   /^(([^<>()[\\]\\\\.,;:\\s@\\\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@((\\[(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\\])|(\\[IPv6:(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))\\])|([A-Za-z0-9]([A-Za-z0-9-]*[A-Za-z0-9])*(\\.[A-Za-z]{2,})+))$/;\n// const emailRegex =\n//   /^[a-zA-Z0-9\\.\\!\\#\\$\\%\\&\\'\\*\\+\\/\\=\\?\\^\\_\\`\\{\\|\\}\\~\\-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;\n// const emailRegex =\n//   /^(?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|\"(?:[\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x21\\x23-\\x5b\\x5d-\\x7f]|\\\\[\\x01-\\x09\\x0b\\x0c\\x0e-\\x7f])*\")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x21-\\x5a\\x53-\\x7f]|\\\\[\\x01-\\x09\\x0b\\x0c\\x0e-\\x7f])+)\\])$/i;\nconst emailRegex = /^(?!\\.)(?!.*\\.\\.)([A-Z0-9_'+\\-\\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\\-]*\\.)+[A-Z]{2,}$/i;\n// const emailRegex =\n//   /^[a-z0-9.!#$%&\u2019*+/=?^_`{|}~-]+@[a-z0-9-]+(?:\\.[a-z0-9\\-]+)*$/i;\n// from https://thekevinscott.com/emojis-in-javascript/#writing-a-regular-expression\nconst _emojiRegex = `^(\\\\p{Extended_Pictographic}|\\\\p{Emoji_Component})+$`;\nlet emojiRegex;\n// faster, simpler, safer\nconst ipv4Regex = /^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/;\nconst ipv4CidrRegex = /^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\\/(3[0-2]|[12]?[0-9])$/;\n// const ipv6Regex =\n// /^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/;\nconst ipv6Regex = /^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/;\nconst ipv6CidrRegex = /^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/;\n// https://stackoverflow.com/questions/7860392/determine-if-string-is-in-base64-using-javascript\nconst base64Regex = /^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/;\n// https://base64.guru/standards/base64url\nconst base64urlRegex = /^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/;\n// simple\n// const dateRegexSource = `\\\\d{4}-\\\\d{2}-\\\\d{2}`;\n// no leap year validation\n// const dateRegexSource = `\\\\d{4}-((0[13578]|10|12)-31|(0[13-9]|1[0-2])-30|(0[1-9]|1[0-2])-(0[1-9]|1\\\\d|2\\\\d))`;\n// with leap year validation\nconst dateRegexSource = `((\\\\d\\\\d[2468][048]|\\\\d\\\\d[13579][26]|\\\\d\\\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\\\d|30)|(02)-(0[1-9]|1\\\\d|2[0-8])))`;\nconst dateRegex = new RegExp(`^${dateRegexSource}$`);\nfunction timeRegexSource(args) {\n    let secondsRegexSource = `[0-5]\\\\d`;\n    if (args.precision) {\n        secondsRegexSource = `${secondsRegexSource}\\\\.\\\\d{${args.precision}}`;\n    }\n    else if (args.precision == null) {\n        secondsRegexSource = `${secondsRegexSource}(\\\\.\\\\d+)?`;\n    }\n    const secondsQuantifier = args.precision ? \"+\" : \"?\"; // require seconds if precision is nonzero\n    return `([01]\\\\d|2[0-3]):[0-5]\\\\d(:${secondsRegexSource})${secondsQuantifier}`;\n}\nfunction timeRegex(args) {\n    return new RegExp(`^${timeRegexSource(args)}$`);\n}\n// Adapted from https://stackoverflow.com/a/3143231\nexport function datetimeRegex(args) {\n    let regex = `${dateRegexSource}T${timeRegexSource(args)}`;\n    const opts = [];\n    opts.push(args.local ? `Z?` : `Z`);\n    if (args.offset)\n        opts.push(`([+-]\\\\d{2}:?\\\\d{2})`);\n    regex = `${regex}(${opts.join(\"|\")})`;\n    return new RegExp(`^${regex}$`);\n}\nfunction isValidIP(ip, version) {\n    if ((version === \"v4\" || !version) && ipv4Regex.test(ip)) {\n        return true;\n    }\n    if ((version === \"v6\" || !version) && ipv6Regex.test(ip)) {\n        return true;\n    }\n    return false;\n}\nfunction isValidJWT(jwt, alg) {\n    if (!jwtRegex.test(jwt))\n        return false;\n    try {\n        const [header] = jwt.split(\".\");\n        if (!header)\n            return false;\n        // Convert base64url to base64\n        const base64 = header\n            .replace(/-/g, \"+\")\n            .replace(/_/g, \"/\")\n            .padEnd(header.length + ((4 - (header.length % 4)) % 4), \"=\");\n        const decoded = JSON.parse(atob(base64));\n        if (typeof decoded !== \"object\" || decoded === null)\n            return false;\n        if (\"typ\" in decoded && decoded?.typ !== \"JWT\")\n            return false;\n        if (!decoded.alg)\n            return false;\n        if (alg && decoded.alg !== alg)\n            return false;\n        return true;\n    }\n    catch {\n        return false;\n    }\n}\nfunction isValidCidr(ip, version) {\n    if ((version === \"v4\" || !version) && ipv4CidrRegex.test(ip)) {\n        return true;\n    }\n    if ((version === \"v6\" || !version) && ipv6CidrRegex.test(ip)) {\n        return true;\n    }\n    return false;\n}\nexport class ZodString extends ZodType {\n    _parse(input) {\n        if (this._def.coerce) {\n            input.data = String(input.data);\n        }\n        const parsedType = this._getType(input);\n        if (parsedType !== ZodParsedType.string) {\n            const ctx = this._getOrReturnCtx(input);\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.string,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        const status = new ParseStatus();\n        let ctx = undefined;\n        for (const check of this._def.checks) {\n            if (check.kind === \"min\") {\n                if (input.data.length < check.value) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.too_small,\n                        minimum: check.value,\n                        type: \"string\",\n                        inclusive: true,\n                        exact: false,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"max\") {\n                if (input.data.length > check.value) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.too_big,\n                        maximum: check.value,\n                        type: \"string\",\n                        inclusive: true,\n                        exact: false,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"length\") {\n                const tooBig = input.data.length > check.value;\n                const tooSmall = input.data.length < check.value;\n                if (tooBig || tooSmall) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    if (tooBig) {\n                        addIssueToContext(ctx, {\n                            code: ZodIssueCode.too_big,\n                            maximum: check.value,\n                            type: \"string\",\n                            inclusive: true,\n                            exact: true,\n                            message: check.message,\n                        });\n                    }\n                    else if (tooSmall) {\n                        addIssueToContext(ctx, {\n                            code: ZodIssueCode.too_small,\n                            minimum: check.value,\n                            type: \"string\",\n                            inclusive: true,\n                            exact: true,\n                            message: check.message,\n                        });\n                    }\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"email\") {\n                if (!emailRegex.test(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"email\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"emoji\") {\n                if (!emojiRegex) {\n                    emojiRegex = new RegExp(_emojiRegex, \"u\");\n                }\n                if (!emojiRegex.test(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"emoji\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"uuid\") {\n                if (!uuidRegex.test(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"uuid\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"nanoid\") {\n                if (!nanoidRegex.test(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"nanoid\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"cuid\") {\n                if (!cuidRegex.test(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"cuid\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"cuid2\") {\n                if (!cuid2Regex.test(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"cuid2\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"ulid\") {\n                if (!ulidRegex.test(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"ulid\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"url\") {\n                try {\n                    new URL(input.data);\n                }\n                catch {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"url\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"regex\") {\n                check.regex.lastIndex = 0;\n                const testResult = check.regex.test(input.data);\n                if (!testResult) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"regex\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"trim\") {\n                input.data = input.data.trim();\n            }\n            else if (check.kind === \"includes\") {\n                if (!input.data.includes(check.value, check.position)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.invalid_string,\n                        validation: { includes: check.value, position: check.position },\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"toLowerCase\") {\n                input.data = input.data.toLowerCase();\n            }\n            else if (check.kind === \"toUpperCase\") {\n                input.data = input.data.toUpperCase();\n            }\n            else if (check.kind === \"startsWith\") {\n                if (!input.data.startsWith(check.value)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.invalid_string,\n                        validation: { startsWith: check.value },\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"endsWith\") {\n                if (!input.data.endsWith(check.value)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.invalid_string,\n                        validation: { endsWith: check.value },\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"datetime\") {\n                const regex = datetimeRegex(check);\n                if (!regex.test(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.invalid_string,\n                        validation: \"datetime\",\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"date\") {\n                const regex = dateRegex;\n                if (!regex.test(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.invalid_string,\n                        validation: \"date\",\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"time\") {\n                const regex = timeRegex(check);\n                if (!regex.test(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.invalid_string,\n                        validation: \"time\",\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"duration\") {\n                if (!durationRegex.test(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"duration\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"ip\") {\n                if (!isValidIP(input.data, check.version)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"ip\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"jwt\") {\n                if (!isValidJWT(input.data, check.alg)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"jwt\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"cidr\") {\n                if (!isValidCidr(input.data, check.version)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"cidr\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"base64\") {\n                if (!base64Regex.test(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"base64\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"base64url\") {\n                if (!base64urlRegex.test(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"base64url\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else {\n                util.assertNever(check);\n            }\n        }\n        return { status: status.value, value: input.data };\n    }\n    _regex(regex, validation, message) {\n        return this.refinement((data) => regex.test(data), {\n            validation,\n            code: ZodIssueCode.invalid_string,\n            ...errorUtil.errToObj(message),\n        });\n    }\n    _addCheck(check) {\n        return new ZodString({\n            ...this._def,\n            checks: [...this._def.checks, check],\n        });\n    }\n    email(message) {\n        return this._addCheck({ kind: \"email\", ...errorUtil.errToObj(message) });\n    }\n    url(message) {\n        return this._addCheck({ kind: \"url\", ...errorUtil.errToObj(message) });\n    }\n    emoji(message) {\n        return this._addCheck({ kind: \"emoji\", ...errorUtil.errToObj(message) });\n    }\n    uuid(message) {\n        return this._addCheck({ kind: \"uuid\", ...errorUtil.errToObj(message) });\n    }\n    nanoid(message) {\n        return this._addCheck({ kind: \"nanoid\", ...errorUtil.errToObj(message) });\n    }\n    cuid(message) {\n        return this._addCheck({ kind: \"cuid\", ...errorUtil.errToObj(message) });\n    }\n    cuid2(message) {\n        return this._addCheck({ kind: \"cuid2\", ...errorUtil.errToObj(message) });\n    }\n    ulid(message) {\n        return this._addCheck({ kind: \"ulid\", ...errorUtil.errToObj(message) });\n    }\n    base64(message) {\n        return this._addCheck({ kind: \"base64\", ...errorUtil.errToObj(message) });\n    }\n    base64url(message) {\n        // base64url encoding is a modification of base64 that can safely be used in URLs and filenames\n        return this._addCheck({\n            kind: \"base64url\",\n            ...errorUtil.errToObj(message),\n        });\n    }\n    jwt(options) {\n        return this._addCheck({ kind: \"jwt\", ...errorUtil.errToObj(options) });\n    }\n    ip(options) {\n        return this._addCheck({ kind: \"ip\", ...errorUtil.errToObj(options) });\n    }\n    cidr(options) {\n        return this._addCheck({ kind: \"cidr\", ...errorUtil.errToObj(options) });\n    }\n    datetime(options) {\n        if (typeof options === \"string\") {\n            return this._addCheck({\n                kind: \"datetime\",\n                precision: null,\n                offset: false,\n                local: false,\n                message: options,\n            });\n        }\n        return this._addCheck({\n            kind: \"datetime\",\n            precision: typeof options?.precision === \"undefined\" ? null : options?.precision,\n            offset: options?.offset ?? false,\n            local: options?.local ?? false,\n            ...errorUtil.errToObj(options?.message),\n        });\n    }\n    date(message) {\n        return this._addCheck({ kind: \"date\", message });\n    }\n    time(options) {\n        if (typeof options === \"string\") {\n            return this._addCheck({\n                kind: \"time\",\n                precision: null,\n                message: options,\n            });\n        }\n        return this._addCheck({\n            kind: \"time\",\n            precision: typeof options?.precision === \"undefined\" ? null : options?.precision,\n            ...errorUtil.errToObj(options?.message),\n        });\n    }\n    duration(message) {\n        return this._addCheck({ kind: \"duration\", ...errorUtil.errToObj(message) });\n    }\n    regex(regex, message) {\n        return this._addCheck({\n            kind: \"regex\",\n            regex: regex,\n            ...errorUtil.errToObj(message),\n        });\n    }\n    includes(value, options) {\n        return this._addCheck({\n            kind: \"includes\",\n            value: value,\n            position: options?.position,\n            ...errorUtil.errToObj(options?.message),\n        });\n    }\n    startsWith(value, message) {\n        return this._addCheck({\n            kind: \"startsWith\",\n            value: value,\n            ...errorUtil.errToObj(message),\n        });\n    }\n    endsWith(value, message) {\n        return this._addCheck({\n            kind: \"endsWith\",\n            value: value,\n            ...errorUtil.errToObj(message),\n        });\n    }\n    min(minLength, message) {\n        return this._addCheck({\n            kind: \"min\",\n            value: minLength,\n            ...errorUtil.errToObj(message),\n        });\n    }\n    max(maxLength, message) {\n        return this._addCheck({\n            kind: \"max\",\n            value: maxLength,\n            ...errorUtil.errToObj(message),\n        });\n    }\n    length(len, message) {\n        return this._addCheck({\n            kind: \"length\",\n            value: len,\n            ...errorUtil.errToObj(message),\n        });\n    }\n    /**\n     * Equivalent to `.min(1)`\n     */\n    nonempty(message) {\n        return this.min(1, errorUtil.errToObj(message));\n    }\n    trim() {\n        return new ZodString({\n            ...this._def,\n            checks: [...this._def.checks, { kind: \"trim\" }],\n        });\n    }\n    toLowerCase() {\n        return new ZodString({\n            ...this._def,\n            checks: [...this._def.checks, { kind: \"toLowerCase\" }],\n        });\n    }\n    toUpperCase() {\n        return new ZodString({\n            ...this._def,\n            checks: [...this._def.checks, { kind: \"toUpperCase\" }],\n        });\n    }\n    get isDatetime() {\n        return !!this._def.checks.find((ch) => ch.kind === \"datetime\");\n    }\n    get isDate() {\n        return !!this._def.checks.find((ch) => ch.kind === \"date\");\n    }\n    get isTime() {\n        return !!this._def.checks.find((ch) => ch.kind === \"time\");\n    }\n    get isDuration() {\n        return !!this._def.checks.find((ch) => ch.kind === \"duration\");\n    }\n    get isEmail() {\n        return !!this._def.checks.find((ch) => ch.kind === \"email\");\n    }\n    get isURL() {\n        return !!this._def.checks.find((ch) => ch.kind === \"url\");\n    }\n    get isEmoji() {\n        return !!this._def.checks.find((ch) => ch.kind === \"emoji\");\n    }\n    get isUUID() {\n        return !!this._def.checks.find((ch) => ch.kind === \"uuid\");\n    }\n    get isNANOID() {\n        return !!this._def.checks.find((ch) => ch.kind === \"nanoid\");\n    }\n    get isCUID() {\n        return !!this._def.checks.find((ch) => ch.kind === \"cuid\");\n    }\n    get isCUID2() {\n        return !!this._def.checks.find((ch) => ch.kind === \"cuid2\");\n    }\n    get isULID() {\n        return !!this._def.checks.find((ch) => ch.kind === \"ulid\");\n    }\n    get isIP() {\n        return !!this._def.checks.find((ch) => ch.kind === \"ip\");\n    }\n    get isCIDR() {\n        return !!this._def.checks.find((ch) => ch.kind === \"cidr\");\n    }\n    get isBase64() {\n        return !!this._def.checks.find((ch) => ch.kind === \"base64\");\n    }\n    get isBase64url() {\n        // base64url encoding is a modification of base64 that can safely be used in URLs and filenames\n        return !!this._def.checks.find((ch) => ch.kind === \"base64url\");\n    }\n    get minLength() {\n        let min = null;\n        for (const ch of this._def.checks) {\n            if (ch.kind === \"min\") {\n                if (min === null || ch.value > min)\n                    min = ch.value;\n            }\n        }\n        return min;\n    }\n    get maxLength() {\n        let max = null;\n        for (const ch of this._def.checks) {\n            if (ch.kind === \"max\") {\n                if (max === null || ch.value < max)\n                    max = ch.value;\n            }\n        }\n        return max;\n    }\n}\nZodString.create = (params) => {\n    return new ZodString({\n        checks: [],\n        typeName: ZodFirstPartyTypeKind.ZodString,\n        coerce: params?.coerce ?? false,\n        ...processCreateParams(params),\n    });\n};\n// https://stackoverflow.com/questions/3966484/why-does-modulus-operator-return-fractional-number-in-javascript/31711034#31711034\nfunction floatSafeRemainder(val, step) {\n    const valDecCount = (val.toString().split(\".\")[1] || \"\").length;\n    const stepDecCount = (step.toString().split(\".\")[1] || \"\").length;\n    const decCount = valDecCount > stepDecCount ? valDecCount : stepDecCount;\n    const valInt = Number.parseInt(val.toFixed(decCount).replace(\".\", \"\"));\n    const stepInt = Number.parseInt(step.toFixed(decCount).replace(\".\", \"\"));\n    return (valInt % stepInt) / 10 ** decCount;\n}\nexport class ZodNumber extends ZodType {\n    constructor() {\n        super(...arguments);\n        this.min = this.gte;\n        this.max = this.lte;\n        this.step = this.multipleOf;\n    }\n    _parse(input) {\n        if (this._def.coerce) {\n            input.data = Number(input.data);\n        }\n        const parsedType = this._getType(input);\n        if (parsedType !== ZodParsedType.number) {\n            const ctx = this._getOrReturnCtx(input);\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.number,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        let ctx = undefined;\n        const status = new ParseStatus();\n        for (const check of this._def.checks) {\n            if (check.kind === \"int\") {\n                if (!util.isInteger(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.invalid_type,\n                        expected: \"integer\",\n                        received: \"float\",\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"min\") {\n                const tooSmall = check.inclusive ? input.data < check.value : input.data <= check.value;\n                if (tooSmall) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.too_small,\n                        minimum: check.value,\n                        type: \"number\",\n                        inclusive: check.inclusive,\n                        exact: false,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"max\") {\n                const tooBig = check.inclusive ? input.data > check.value : input.data >= check.value;\n                if (tooBig) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.too_big,\n                        maximum: check.value,\n                        type: \"number\",\n                        inclusive: check.inclusive,\n                        exact: false,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"multipleOf\") {\n                if (floatSafeRemainder(input.data, check.value) !== 0) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.not_multiple_of,\n                        multipleOf: check.value,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"finite\") {\n                if (!Number.isFinite(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.not_finite,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else {\n                util.assertNever(check);\n            }\n        }\n        return { status: status.value, value: input.data };\n    }\n    gte(value, message) {\n        return this.setLimit(\"min\", value, true, errorUtil.toString(message));\n    }\n    gt(value, message) {\n        return this.setLimit(\"min\", value, false, errorUtil.toString(message));\n    }\n    lte(value, message) {\n        return this.setLimit(\"max\", value, true, errorUtil.toString(message));\n    }\n    lt(value, message) {\n        return this.setLimit(\"max\", value, false, errorUtil.toString(message));\n    }\n    setLimit(kind, value, inclusive, message) {\n        return new ZodNumber({\n            ...this._def,\n            checks: [\n                ...this._def.checks,\n                {\n                    kind,\n                    value,\n                    inclusive,\n                    message: errorUtil.toString(message),\n                },\n            ],\n        });\n    }\n    _addCheck(check) {\n        return new ZodNumber({\n            ...this._def,\n            checks: [...this._def.checks, check],\n        });\n    }\n    int(message) {\n        return this._addCheck({\n            kind: \"int\",\n            message: errorUtil.toString(message),\n        });\n    }\n    positive(message) {\n        return this._addCheck({\n            kind: \"min\",\n            value: 0,\n            inclusive: false,\n            message: errorUtil.toString(message),\n        });\n    }\n    negative(message) {\n        return this._addCheck({\n            kind: \"max\",\n            value: 0,\n            inclusive: false,\n            message: errorUtil.toString(message),\n        });\n    }\n    nonpositive(message) {\n        return this._addCheck({\n            kind: \"max\",\n            value: 0,\n            inclusive: true,\n            message: errorUtil.toString(message),\n        });\n    }\n    nonnegative(message) {\n        return this._addCheck({\n            kind: \"min\",\n            value: 0,\n            inclusive: true,\n            message: errorUtil.toString(message),\n        });\n    }\n    multipleOf(value, message) {\n        return this._addCheck({\n            kind: \"multipleOf\",\n            value: value,\n            message: errorUtil.toString(message),\n        });\n    }\n    finite(message) {\n        return this._addCheck({\n            kind: \"finite\",\n            message: errorUtil.toString(message),\n        });\n    }\n    safe(message) {\n        return this._addCheck({\n            kind: \"min\",\n            inclusive: true,\n            value: Number.MIN_SAFE_INTEGER,\n            message: errorUtil.toString(message),\n        })._addCheck({\n            kind: \"max\",\n            inclusive: true,\n            value: Number.MAX_SAFE_INTEGER,\n            message: errorUtil.toString(message),\n        });\n    }\n    get minValue() {\n        let min = null;\n        for (const ch of this._def.checks) {\n            if (ch.kind === \"min\") {\n                if (min === null || ch.value > min)\n                    min = ch.value;\n            }\n        }\n        return min;\n    }\n    get maxValue() {\n        let max = null;\n        for (const ch of this._def.checks) {\n            if (ch.kind === \"max\") {\n                if (max === null || ch.value < max)\n                    max = ch.value;\n            }\n        }\n        return max;\n    }\n    get isInt() {\n        return !!this._def.checks.find((ch) => ch.kind === \"int\" || (ch.kind === \"multipleOf\" && util.isInteger(ch.value)));\n    }\n    get isFinite() {\n        let max = null;\n        let min = null;\n        for (const ch of this._def.checks) {\n            if (ch.kind === \"finite\" || ch.kind === \"int\" || ch.kind === \"multipleOf\") {\n                return true;\n            }\n            else if (ch.kind === \"min\") {\n                if (min === null || ch.value > min)\n                    min = ch.value;\n            }\n            else if (ch.kind === \"max\") {\n                if (max === null || ch.value < max)\n                    max = ch.value;\n            }\n        }\n        return Number.isFinite(min) && Number.isFinite(max);\n    }\n}\nZodNumber.create = (params) => {\n    return new ZodNumber({\n        checks: [],\n        typeName: ZodFirstPartyTypeKind.ZodNumber,\n        coerce: params?.coerce || false,\n        ...processCreateParams(params),\n    });\n};\nexport class ZodBigInt extends ZodType {\n    constructor() {\n        super(...arguments);\n        this.min = this.gte;\n        this.max = this.lte;\n    }\n    _parse(input) {\n        if (this._def.coerce) {\n            try {\n                input.data = BigInt(input.data);\n            }\n            catch {\n                return this._getInvalidInput(input);\n            }\n        }\n        const parsedType = this._getType(input);\n        if (parsedType !== ZodParsedType.bigint) {\n            return this._getInvalidInput(input);\n        }\n        let ctx = undefined;\n        const status = new ParseStatus();\n        for (const check of this._def.checks) {\n            if (check.kind === \"min\") {\n                const tooSmall = check.inclusive ? input.data < check.value : input.data <= check.value;\n                if (tooSmall) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.too_small,\n                        type: \"bigint\",\n                        minimum: check.value,\n                        inclusive: check.inclusive,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"max\") {\n                const tooBig = check.inclusive ? input.data > check.value : input.data >= check.value;\n                if (tooBig) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.too_big,\n                        type: \"bigint\",\n                        maximum: check.value,\n                        inclusive: check.inclusive,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"multipleOf\") {\n                if (input.data % check.value !== BigInt(0)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.not_multiple_of,\n                        multipleOf: check.value,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else {\n                util.assertNever(check);\n            }\n        }\n        return { status: status.value, value: input.data };\n    }\n    _getInvalidInput(input) {\n        const ctx = this._getOrReturnCtx(input);\n        addIssueToContext(ctx, {\n            code: ZodIssueCode.invalid_type,\n            expected: ZodParsedType.bigint,\n            received: ctx.parsedType,\n        });\n        return INVALID;\n    }\n    gte(value, message) {\n        return this.setLimit(\"min\", value, true, errorUtil.toString(message));\n    }\n    gt(value, message) {\n        return this.setLimit(\"min\", value, false, errorUtil.toString(message));\n    }\n    lte(value, message) {\n        return this.setLimit(\"max\", value, true, errorUtil.toString(message));\n    }\n    lt(value, message) {\n        return this.setLimit(\"max\", value, false, errorUtil.toString(message));\n    }\n    setLimit(kind, value, inclusive, message) {\n        return new ZodBigInt({\n            ...this._def,\n            checks: [\n                ...this._def.checks,\n                {\n                    kind,\n                    value,\n                    inclusive,\n                    message: errorUtil.toString(message),\n                },\n            ],\n        });\n    }\n    _addCheck(check) {\n        return new ZodBigInt({\n            ...this._def,\n            checks: [...this._def.checks, check],\n        });\n    }\n    positive(message) {\n        return this._addCheck({\n            kind: \"min\",\n            value: BigInt(0),\n            inclusive: false,\n            message: errorUtil.toString(message),\n        });\n    }\n    negative(message) {\n        return this._addCheck({\n            kind: \"max\",\n            value: BigInt(0),\n            inclusive: false,\n            message: errorUtil.toString(message),\n        });\n    }\n    nonpositive(message) {\n        return this._addCheck({\n            kind: \"max\",\n            value: BigInt(0),\n            inclusive: true,\n            message: errorUtil.toString(message),\n        });\n    }\n    nonnegative(message) {\n        return this._addCheck({\n            kind: \"min\",\n            value: BigInt(0),\n            inclusive: true,\n            message: errorUtil.toString(message),\n        });\n    }\n    multipleOf(value, message) {\n        return this._addCheck({\n            kind: \"multipleOf\",\n            value,\n            message: errorUtil.toString(message),\n        });\n    }\n    get minValue() {\n        let min = null;\n        for (const ch of this._def.checks) {\n            if (ch.kind === \"min\") {\n                if (min === null || ch.value > min)\n                    min = ch.value;\n            }\n        }\n        return min;\n    }\n    get maxValue() {\n        let max = null;\n        for (const ch of this._def.checks) {\n            if (ch.kind === \"max\") {\n                if (max === null || ch.value < max)\n                    max = ch.value;\n            }\n        }\n        return max;\n    }\n}\nZodBigInt.create = (params) => {\n    return new ZodBigInt({\n        checks: [],\n        typeName: ZodFirstPartyTypeKind.ZodBigInt,\n        coerce: params?.coerce ?? false,\n        ...processCreateParams(params),\n    });\n};\nexport class ZodBoolean extends ZodType {\n    _parse(input) {\n        if (this._def.coerce) {\n            input.data = Boolean(input.data);\n        }\n        const parsedType = this._getType(input);\n        if (parsedType !== ZodParsedType.boolean) {\n            const ctx = this._getOrReturnCtx(input);\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.boolean,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        return OK(input.data);\n    }\n}\nZodBoolean.create = (params) => {\n    return new ZodBoolean({\n        typeName: ZodFirstPartyTypeKind.ZodBoolean,\n        coerce: params?.coerce || false,\n        ...processCreateParams(params),\n    });\n};\nexport class ZodDate extends ZodType {\n    _parse(input) {\n        if (this._def.coerce) {\n            input.data = new Date(input.data);\n        }\n        const parsedType = this._getType(input);\n        if (parsedType !== ZodParsedType.date) {\n            const ctx = this._getOrReturnCtx(input);\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.date,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        if (Number.isNaN(input.data.getTime())) {\n            const ctx = this._getOrReturnCtx(input);\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_date,\n            });\n            return INVALID;\n        }\n        const status = new ParseStatus();\n        let ctx = undefined;\n        for (const check of this._def.checks) {\n            if (check.kind === \"min\") {\n                if (input.data.getTime() < check.value) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.too_small,\n                        message: check.message,\n                        inclusive: true,\n                        exact: false,\n                        minimum: check.value,\n                        type: \"date\",\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"max\") {\n                if (input.data.getTime() > check.value) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.too_big,\n                        message: check.message,\n                        inclusive: true,\n                        exact: false,\n                        maximum: check.value,\n                        type: \"date\",\n                    });\n                    status.dirty();\n                }\n            }\n            else {\n                util.assertNever(check);\n            }\n        }\n        return {\n            status: status.value,\n            value: new Date(input.data.getTime()),\n        };\n    }\n    _addCheck(check) {\n        return new ZodDate({\n            ...this._def,\n            checks: [...this._def.checks, check],\n        });\n    }\n    min(minDate, message) {\n        return this._addCheck({\n            kind: \"min\",\n            value: minDate.getTime(),\n            message: errorUtil.toString(message),\n        });\n    }\n    max(maxDate, message) {\n        return this._addCheck({\n            kind: \"max\",\n            value: maxDate.getTime(),\n            message: errorUtil.toString(message),\n        });\n    }\n    get minDate() {\n        let min = null;\n        for (const ch of this._def.checks) {\n            if (ch.kind === \"min\") {\n                if (min === null || ch.value > min)\n                    min = ch.value;\n            }\n        }\n        return min != null ? new Date(min) : null;\n    }\n    get maxDate() {\n        let max = null;\n        for (const ch of this._def.checks) {\n            if (ch.kind === \"max\") {\n                if (max === null || ch.value < max)\n                    max = ch.value;\n            }\n        }\n        return max != null ? new Date(max) : null;\n    }\n}\nZodDate.create = (params) => {\n    return new ZodDate({\n        checks: [],\n        coerce: params?.coerce || false,\n        typeName: ZodFirstPartyTypeKind.ZodDate,\n        ...processCreateParams(params),\n    });\n};\nexport class ZodSymbol extends ZodType {\n    _parse(input) {\n        const parsedType = this._getType(input);\n        if (parsedType !== ZodParsedType.symbol) {\n            const ctx = this._getOrReturnCtx(input);\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.symbol,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        return OK(input.data);\n    }\n}\nZodSymbol.create = (params) => {\n    return new ZodSymbol({\n        typeName: ZodFirstPartyTypeKind.ZodSymbol,\n        ...processCreateParams(params),\n    });\n};\nexport class ZodUndefined extends ZodType {\n    _parse(input) {\n        const parsedType = this._getType(input);\n        if (parsedType !== ZodParsedType.undefined) {\n            const ctx = this._getOrReturnCtx(input);\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.undefined,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        return OK(input.data);\n    }\n}\nZodUndefined.create = (params) => {\n    return new ZodUndefined({\n        typeName: ZodFirstPartyTypeKind.ZodUndefined,\n        ...processCreateParams(params),\n    });\n};\nexport class ZodNull extends ZodType {\n    _parse(input) {\n        const parsedType = this._getType(input);\n        if (parsedType !== ZodParsedType.null) {\n            const ctx = this._getOrReturnCtx(input);\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.null,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        return OK(input.data);\n    }\n}\nZodNull.create = (params) => {\n    return new ZodNull({\n        typeName: ZodFirstPartyTypeKind.ZodNull,\n        ...processCreateParams(params),\n    });\n};\nexport class ZodAny extends ZodType {\n    constructor() {\n        super(...arguments);\n        // to prevent instances of other classes from extending ZodAny. this causes issues with catchall in ZodObject.\n        this._any = true;\n    }\n    _parse(input) {\n        return OK(input.data);\n    }\n}\nZodAny.create = (params) => {\n    return new ZodAny({\n        typeName: ZodFirstPartyTypeKind.ZodAny,\n        ...processCreateParams(params),\n    });\n};\nexport class ZodUnknown extends ZodType {\n    constructor() {\n        super(...arguments);\n        // required\n        this._unknown = true;\n    }\n    _parse(input) {\n        return OK(input.data);\n    }\n}\nZodUnknown.create = (params) => {\n    return new ZodUnknown({\n        typeName: ZodFirstPartyTypeKind.ZodUnknown,\n        ...processCreateParams(params),\n    });\n};\nexport class ZodNever extends ZodType {\n    _parse(input) {\n        const ctx = this._getOrReturnCtx(input);\n        addIssueToContext(ctx, {\n            code: ZodIssueCode.invalid_type,\n            expected: ZodParsedType.never,\n            received: ctx.parsedType,\n        });\n        return INVALID;\n    }\n}\nZodNever.create = (params) => {\n    return new ZodNever({\n        typeName: ZodFirstPartyTypeKind.ZodNever,\n        ...processCreateParams(params),\n    });\n};\nexport class ZodVoid extends ZodType {\n    _parse(input) {\n        const parsedType = this._getType(input);\n        if (parsedType !== ZodParsedType.undefined) {\n            const ctx = this._getOrReturnCtx(input);\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.void,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        return OK(input.data);\n    }\n}\nZodVoid.create = (params) => {\n    return new ZodVoid({\n        typeName: ZodFirstPartyTypeKind.ZodVoid,\n        ...processCreateParams(params),\n    });\n};\nexport class ZodArray extends ZodType {\n    _parse(input) {\n        const { ctx, status } = this._processInputParams(input);\n        const def = this._def;\n        if (ctx.parsedType !== ZodParsedType.array) {\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.array,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        if (def.exactLength !== null) {\n            const tooBig = ctx.data.length > def.exactLength.value;\n            const tooSmall = ctx.data.length < def.exactLength.value;\n            if (tooBig || tooSmall) {\n                addIssueToContext(ctx, {\n                    code: tooBig ? ZodIssueCode.too_big : ZodIssueCode.too_small,\n                    minimum: (tooSmall ? def.exactLength.value : undefined),\n                    maximum: (tooBig ? def.exactLength.value : undefined),\n                    type: \"array\",\n                    inclusive: true,\n                    exact: true,\n                    message: def.exactLength.message,\n                });\n                status.dirty();\n            }\n        }\n        if (def.minLength !== null) {\n            if (ctx.data.length < def.minLength.value) {\n                addIssueToContext(ctx, {\n                    code: ZodIssueCode.too_small,\n                    minimum: def.minLength.value,\n                    type: \"array\",\n                    inclusive: true,\n                    exact: false,\n                    message: def.minLength.message,\n                });\n                status.dirty();\n            }\n        }\n        if (def.maxLength !== null) {\n            if (ctx.data.length > def.maxLength.value) {\n                addIssueToContext(ctx, {\n                    code: ZodIssueCode.too_big,\n                    maximum: def.maxLength.value,\n                    type: \"array\",\n                    inclusive: true,\n                    exact: false,\n                    message: def.maxLength.message,\n                });\n                status.dirty();\n            }\n        }\n        if (ctx.common.async) {\n            return Promise.all([...ctx.data].map((item, i) => {\n                return def.type._parseAsync(new ParseInputLazyPath(ctx, item, ctx.path, i));\n            })).then((result) => {\n                return ParseStatus.mergeArray(status, result);\n            });\n        }\n        const result = [...ctx.data].map((item, i) => {\n            return def.type._parseSync(new ParseInputLazyPath(ctx, item, ctx.path, i));\n        });\n        return ParseStatus.mergeArray(status, result);\n    }\n    get element() {\n        return this._def.type;\n    }\n    min(minLength, message) {\n        return new ZodArray({\n            ...this._def,\n            minLength: { value: minLength, message: errorUtil.toString(message) },\n        });\n    }\n    max(maxLength, message) {\n        return new ZodArray({\n            ...this._def,\n            maxLength: { value: maxLength, message: errorUtil.toString(message) },\n        });\n    }\n    length(len, message) {\n        return new ZodArray({\n            ...this._def,\n            exactLength: { value: len, message: errorUtil.toString(message) },\n        });\n    }\n    nonempty(message) {\n        return this.min(1, message);\n    }\n}\nZodArray.create = (schema, params) => {\n    return new ZodArray({\n        type: schema,\n        minLength: null,\n        maxLength: null,\n        exactLength: null,\n        typeName: ZodFirstPartyTypeKind.ZodArray,\n        ...processCreateParams(params),\n    });\n};\nfunction deepPartialify(schema) {\n    if (schema instanceof ZodObject) {\n        const newShape = {};\n        for (const key in schema.shape) {\n            const fieldSchema = schema.shape[key];\n            newShape[key] = ZodOptional.create(deepPartialify(fieldSchema));\n        }\n        return new ZodObject({\n            ...schema._def,\n            shape: () => newShape,\n        });\n    }\n    else if (schema instanceof ZodArray) {\n        return new ZodArray({\n            ...schema._def,\n            type: deepPartialify(schema.element),\n        });\n    }\n    else if (schema instanceof ZodOptional) {\n        return ZodOptional.create(deepPartialify(schema.unwrap()));\n    }\n    else if (schema instanceof ZodNullable) {\n        return ZodNullable.create(deepPartialify(schema.unwrap()));\n    }\n    else if (schema instanceof ZodTuple) {\n        return ZodTuple.create(schema.items.map((item) => deepPartialify(item)));\n    }\n    else {\n        return schema;\n    }\n}\nexport class ZodObject extends ZodType {\n    constructor() {\n        super(...arguments);\n        this._cached = null;\n        /**\n         * @deprecated In most cases, this is no longer needed - unknown properties are now silently stripped.\n         * If you want to pass through unknown properties, use `.passthrough()` instead.\n         */\n        this.nonstrict = this.passthrough;\n        // extend<\n        //   Augmentation extends ZodRawShape,\n        //   NewOutput extends util.flatten<{\n        //     [k in keyof Augmentation | keyof Output]: k extends keyof Augmentation\n        //       ? Augmentation[k][\"_output\"]\n        //       : k extends keyof Output\n        //       ? Output[k]\n        //       : never;\n        //   }>,\n        //   NewInput extends util.flatten<{\n        //     [k in keyof Augmentation | keyof Input]: k extends keyof Augmentation\n        //       ? Augmentation[k][\"_input\"]\n        //       : k extends keyof Input\n        //       ? Input[k]\n        //       : never;\n        //   }>\n        // >(\n        //   augmentation: Augmentation\n        // ): ZodObject<\n        //   extendShape<T, Augmentation>,\n        //   UnknownKeys,\n        //   Catchall,\n        //   NewOutput,\n        //   NewInput\n        // > {\n        //   return new ZodObject({\n        //     ...this._def,\n        //     shape: () => ({\n        //       ...this._def.shape(),\n        //       ...augmentation,\n        //     }),\n        //   }) as any;\n        // }\n        /**\n         * @deprecated Use `.extend` instead\n         *  */\n        this.augment = this.extend;\n    }\n    _getCached() {\n        if (this._cached !== null)\n            return this._cached;\n        const shape = this._def.shape();\n        const keys = util.objectKeys(shape);\n        this._cached = { shape, keys };\n        return this._cached;\n    }\n    _parse(input) {\n        const parsedType = this._getType(input);\n        if (parsedType !== ZodParsedType.object) {\n            const ctx = this._getOrReturnCtx(input);\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.object,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        const { status, ctx } = this._processInputParams(input);\n        const { shape, keys: shapeKeys } = this._getCached();\n        const extraKeys = [];\n        if (!(this._def.catchall instanceof ZodNever && this._def.unknownKeys === \"strip\")) {\n            for (const key in ctx.data) {\n                if (!shapeKeys.includes(key)) {\n                    extraKeys.push(key);\n                }\n            }\n        }\n        const pairs = [];\n        for (const key of shapeKeys) {\n            const keyValidator = shape[key];\n            const value = ctx.data[key];\n            pairs.push({\n                key: { status: \"valid\", value: key },\n                value: keyValidator._parse(new ParseInputLazyPath(ctx, value, ctx.path, key)),\n                alwaysSet: key in ctx.data,\n            });\n        }\n        if (this._def.catchall instanceof ZodNever) {\n            const unknownKeys = this._def.unknownKeys;\n            if (unknownKeys === \"passthrough\") {\n                for (const key of extraKeys) {\n                    pairs.push({\n                        key: { status: \"valid\", value: key },\n                        value: { status: \"valid\", value: ctx.data[key] },\n                    });\n                }\n            }\n            else if (unknownKeys === \"strict\") {\n                if (extraKeys.length > 0) {\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.unrecognized_keys,\n                        keys: extraKeys,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (unknownKeys === \"strip\") {\n            }\n            else {\n                throw new Error(`Internal ZodObject error: invalid unknownKeys value.`);\n            }\n        }\n        else {\n            // run catchall validation\n            const catchall = this._def.catchall;\n            for (const key of extraKeys) {\n                const value = ctx.data[key];\n                pairs.push({\n                    key: { status: \"valid\", value: key },\n                    value: catchall._parse(new ParseInputLazyPath(ctx, value, ctx.path, key) //, ctx.child(key), value, getParsedType(value)\n                    ),\n                    alwaysSet: key in ctx.data,\n                });\n            }\n        }\n        if (ctx.common.async) {\n            return Promise.resolve()\n                .then(async () => {\n                const syncPairs = [];\n                for (const pair of pairs) {\n                    const key = await pair.key;\n                    const value = await pair.value;\n                    syncPairs.push({\n                        key,\n                        value,\n                        alwaysSet: pair.alwaysSet,\n                    });\n                }\n                return syncPairs;\n            })\n                .then((syncPairs) => {\n                return ParseStatus.mergeObjectSync(status, syncPairs);\n            });\n        }\n        else {\n            return ParseStatus.mergeObjectSync(status, pairs);\n        }\n    }\n    get shape() {\n        return this._def.shape();\n    }\n    strict(message) {\n        errorUtil.errToObj;\n        return new ZodObject({\n            ...this._def,\n            unknownKeys: \"strict\",\n            ...(message !== undefined\n                ? {\n                    errorMap: (issue, ctx) => {\n                        const defaultError = this._def.errorMap?.(issue, ctx).message ?? ctx.defaultError;\n                        if (issue.code === \"unrecognized_keys\")\n                            return {\n                                message: errorUtil.errToObj(message).message ?? defaultError,\n                            };\n                        return {\n                            message: defaultError,\n                        };\n                    },\n                }\n                : {}),\n        });\n    }\n    strip() {\n        return new ZodObject({\n            ...this._def,\n            unknownKeys: \"strip\",\n        });\n    }\n    passthrough() {\n        return new ZodObject({\n            ...this._def,\n            unknownKeys: \"passthrough\",\n        });\n    }\n    // const AugmentFactory =\n    //   <Def extends ZodObjectDef>(def: Def) =>\n    //   <Augmentation extends ZodRawShape>(\n    //     augmentation: Augmentation\n    //   ): ZodObject<\n    //     extendShape<ReturnType<Def[\"shape\"]>, Augmentation>,\n    //     Def[\"unknownKeys\"],\n    //     Def[\"catchall\"]\n    //   > => {\n    //     return new ZodObject({\n    //       ...def,\n    //       shape: () => ({\n    //         ...def.shape(),\n    //         ...augmentation,\n    //       }),\n    //     }) as any;\n    //   };\n    extend(augmentation) {\n        return new ZodObject({\n            ...this._def,\n            shape: () => ({\n                ...this._def.shape(),\n                ...augmentation,\n            }),\n        });\n    }\n    /**\n     * Prior to zod@1.0.12 there was a bug in the\n     * inferred type of merged objects. Please\n     * upgrade if you are experiencing issues.\n     */\n    merge(merging) {\n        const merged = new ZodObject({\n            unknownKeys: merging._def.unknownKeys,\n            catchall: merging._def.catchall,\n            shape: () => ({\n                ...this._def.shape(),\n                ...merging._def.shape(),\n            }),\n            typeName: ZodFirstPartyTypeKind.ZodObject,\n        });\n        return merged;\n    }\n    // merge<\n    //   Incoming extends AnyZodObject,\n    //   Augmentation extends Incoming[\"shape\"],\n    //   NewOutput extends {\n    //     [k in keyof Augmentation | keyof Output]: k extends keyof Augmentation\n    //       ? Augmentation[k][\"_output\"]\n    //       : k extends keyof Output\n    //       ? Output[k]\n    //       : never;\n    //   },\n    //   NewInput extends {\n    //     [k in keyof Augmentation | keyof Input]: k extends keyof Augmentation\n    //       ? Augmentation[k][\"_input\"]\n    //       : k extends keyof Input\n    //       ? Input[k]\n    //       : never;\n    //   }\n    // >(\n    //   merging: Incoming\n    // ): ZodObject<\n    //   extendShape<T, ReturnType<Incoming[\"_def\"][\"shape\"]>>,\n    //   Incoming[\"_def\"][\"unknownKeys\"],\n    //   Incoming[\"_def\"][\"catchall\"],\n    //   NewOutput,\n    //   NewInput\n    // > {\n    //   const merged: any = new ZodObject({\n    //     unknownKeys: merging._def.unknownKeys,\n    //     catchall: merging._def.catchall,\n    //     shape: () =>\n    //       objectUtil.mergeShapes(this._def.shape(), merging._def.shape()),\n    //     typeName: ZodFirstPartyTypeKind.ZodObject,\n    //   }) as any;\n    //   return merged;\n    // }\n    setKey(key, schema) {\n        return this.augment({ [key]: schema });\n    }\n    // merge<Incoming extends AnyZodObject>(\n    //   merging: Incoming\n    // ): //ZodObject<T & Incoming[\"_shape\"], UnknownKeys, Catchall> = (merging) => {\n    // ZodObject<\n    //   extendShape<T, ReturnType<Incoming[\"_def\"][\"shape\"]>>,\n    //   Incoming[\"_def\"][\"unknownKeys\"],\n    //   Incoming[\"_def\"][\"catchall\"]\n    // > {\n    //   // const mergedShape = objectUtil.mergeShapes(\n    //   //   this._def.shape(),\n    //   //   merging._def.shape()\n    //   // );\n    //   const merged: any = new ZodObject({\n    //     unknownKeys: merging._def.unknownKeys,\n    //     catchall: merging._def.catchall,\n    //     shape: () =>\n    //       objectUtil.mergeShapes(this._def.shape(), merging._def.shape()),\n    //     typeName: ZodFirstPartyTypeKind.ZodObject,\n    //   }) as any;\n    //   return merged;\n    // }\n    catchall(index) {\n        return new ZodObject({\n            ...this._def,\n            catchall: index,\n        });\n    }\n    pick(mask) {\n        const shape = {};\n        for (const key of util.objectKeys(mask)) {\n            if (mask[key] && this.shape[key]) {\n                shape[key] = this.shape[key];\n            }\n        }\n        return new ZodObject({\n            ...this._def,\n            shape: () => shape,\n        });\n    }\n    omit(mask) {\n        const shape = {};\n        for (const key of util.objectKeys(this.shape)) {\n            if (!mask[key]) {\n                shape[key] = this.shape[key];\n            }\n        }\n        return new ZodObject({\n            ...this._def,\n            shape: () => shape,\n        });\n    }\n    /**\n     * @deprecated\n     */\n    deepPartial() {\n        return deepPartialify(this);\n    }\n    partial(mask) {\n        const newShape = {};\n        for (const key of util.objectKeys(this.shape)) {\n            const fieldSchema = this.shape[key];\n            if (mask && !mask[key]) {\n                newShape[key] = fieldSchema;\n            }\n            else {\n                newShape[key] = fieldSchema.optional();\n            }\n        }\n        return new ZodObject({\n            ...this._def,\n            shape: () => newShape,\n        });\n    }\n    required(mask) {\n        const newShape = {};\n        for (const key of util.objectKeys(this.shape)) {\n            if (mask && !mask[key]) {\n                newShape[key] = this.shape[key];\n            }\n            else {\n                const fieldSchema = this.shape[key];\n                let newField = fieldSchema;\n                while (newField instanceof ZodOptional) {\n                    newField = newField._def.innerType;\n                }\n                newShape[key] = newField;\n            }\n        }\n        return new ZodObject({\n            ...this._def,\n            shape: () => newShape,\n        });\n    }\n    keyof() {\n        return createZodEnum(util.objectKeys(this.shape));\n    }\n}\nZodObject.create = (shape, params) => {\n    return new ZodObject({\n        shape: () => shape,\n        unknownKeys: \"strip\",\n        catchall: ZodNever.create(),\n        typeName: ZodFirstPartyTypeKind.ZodObject,\n        ...processCreateParams(params),\n    });\n};\nZodObject.strictCreate = (shape, params) => {\n    return new ZodObject({\n        shape: () => shape,\n        unknownKeys: \"strict\",\n        catchall: ZodNever.create(),\n        typeName: ZodFirstPartyTypeKind.ZodObject,\n        ...processCreateParams(params),\n    });\n};\nZodObject.lazycreate = (shape, params) => {\n    return new ZodObject({\n        shape,\n        unknownKeys: \"strip\",\n        catchall: ZodNever.create(),\n        typeName: ZodFirstPartyTypeKind.ZodObject,\n        ...processCreateParams(params),\n    });\n};\nexport class ZodUnion extends ZodType {\n    _parse(input) {\n        const { ctx } = this._processInputParams(input);\n        const options = this._def.options;\n        function handleResults(results) {\n            // return first issue-free validation if it exists\n            for (const result of results) {\n                if (result.result.status === \"valid\") {\n                    return result.result;\n                }\n            }\n            for (const result of results) {\n                if (result.result.status === \"dirty\") {\n                    // add issues from dirty option\n                    ctx.common.issues.push(...result.ctx.common.issues);\n                    return result.result;\n                }\n            }\n            // return invalid\n            const unionErrors = results.map((result) => new ZodError(result.ctx.common.issues));\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_union,\n                unionErrors,\n            });\n            return INVALID;\n        }\n        if (ctx.common.async) {\n            return Promise.all(options.map(async (option) => {\n                const childCtx = {\n                    ...ctx,\n                    common: {\n                        ...ctx.common,\n                        issues: [],\n                    },\n                    parent: null,\n                };\n                return {\n                    result: await option._parseAsync({\n                        data: ctx.data,\n                        path: ctx.path,\n                        parent: childCtx,\n                    }),\n                    ctx: childCtx,\n                };\n            })).then(handleResults);\n        }\n        else {\n            let dirty = undefined;\n            const issues = [];\n            for (const option of options) {\n                const childCtx = {\n                    ...ctx,\n                    common: {\n                        ...ctx.common,\n                        issues: [],\n                    },\n                    parent: null,\n                };\n                const result = option._parseSync({\n                    data: ctx.data,\n                    path: ctx.path,\n                    parent: childCtx,\n                });\n                if (result.status === \"valid\") {\n                    return result;\n                }\n                else if (result.status === \"dirty\" && !dirty) {\n                    dirty = { result, ctx: childCtx };\n                }\n                if (childCtx.common.issues.length) {\n                    issues.push(childCtx.common.issues);\n                }\n            }\n            if (dirty) {\n                ctx.common.issues.push(...dirty.ctx.common.issues);\n                return dirty.result;\n            }\n            const unionErrors = issues.map((issues) => new ZodError(issues));\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_union,\n                unionErrors,\n            });\n            return INVALID;\n        }\n    }\n    get options() {\n        return this._def.options;\n    }\n}\nZodUnion.create = (types, params) => {\n    return new ZodUnion({\n        options: types,\n        typeName: ZodFirstPartyTypeKind.ZodUnion,\n        ...processCreateParams(params),\n    });\n};\n/////////////////////////////////////////////////////\n/////////////////////////////////////////////////////\n//////////                                 //////////\n//////////      ZodDiscriminatedUnion      //////////\n//////////                                 //////////\n/////////////////////////////////////////////////////\n/////////////////////////////////////////////////////\nconst getDiscriminator = (type) => {\n    if (type instanceof ZodLazy) {\n        return getDiscriminator(type.schema);\n    }\n    else if (type instanceof ZodEffects) {\n        return getDiscriminator(type.innerType());\n    }\n    else if (type instanceof ZodLiteral) {\n        return [type.value];\n    }\n    else if (type instanceof ZodEnum) {\n        return type.options;\n    }\n    else if (type instanceof ZodNativeEnum) {\n        // eslint-disable-next-line ban/ban\n        return util.objectValues(type.enum);\n    }\n    else if (type instanceof ZodDefault) {\n        return getDiscriminator(type._def.innerType);\n    }\n    else if (type instanceof ZodUndefined) {\n        return [undefined];\n    }\n    else if (type instanceof ZodNull) {\n        return [null];\n    }\n    else if (type instanceof ZodOptional) {\n        return [undefined, ...getDiscriminator(type.unwrap())];\n    }\n    else if (type instanceof ZodNullable) {\n        return [null, ...getDiscriminator(type.unwrap())];\n    }\n    else if (type instanceof ZodBranded) {\n        return getDiscriminator(type.unwrap());\n    }\n    else if (type instanceof ZodReadonly) {\n        return getDiscriminator(type.unwrap());\n    }\n    else if (type instanceof ZodCatch) {\n        return getDiscriminator(type._def.innerType);\n    }\n    else {\n        return [];\n    }\n};\nexport class ZodDiscriminatedUnion extends ZodType {\n    _parse(input) {\n        const { ctx } = this._processInputParams(input);\n        if (ctx.parsedType !== ZodParsedType.object) {\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.object,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        const discriminator = this.discriminator;\n        const discriminatorValue = ctx.data[discriminator];\n        const option = this.optionsMap.get(discriminatorValue);\n        if (!option) {\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_union_discriminator,\n                options: Array.from(this.optionsMap.keys()),\n                path: [discriminator],\n            });\n            return INVALID;\n        }\n        if (ctx.common.async) {\n            return option._parseAsync({\n                data: ctx.data,\n                path: ctx.path,\n                parent: ctx,\n            });\n        }\n        else {\n            return option._parseSync({\n                data: ctx.data,\n                path: ctx.path,\n                parent: ctx,\n            });\n        }\n    }\n    get discriminator() {\n        return this._def.discriminator;\n    }\n    get options() {\n        return this._def.options;\n    }\n    get optionsMap() {\n        return this._def.optionsMap;\n    }\n    /**\n     * The constructor of the discriminated union schema. Its behaviour is very similar to that of the normal z.union() constructor.\n     * However, it only allows a union of objects, all of which need to share a discriminator property. This property must\n     * have a different value for each object in the union.\n     * @param discriminator the name of the discriminator property\n     * @param types an array of object schemas\n     * @param params\n     */\n    static create(discriminator, options, params) {\n        // Get all the valid discriminator values\n        const optionsMap = new Map();\n        // try {\n        for (const type of options) {\n            const discriminatorValues = getDiscriminator(type.shape[discriminator]);\n            if (!discriminatorValues.length) {\n                throw new Error(`A discriminator value for key \\`${discriminator}\\` could not be extracted from all schema options`);\n            }\n            for (const value of discriminatorValues) {\n                if (optionsMap.has(value)) {\n                    throw new Error(`Discriminator property ${String(discriminator)} has duplicate value ${String(value)}`);\n                }\n                optionsMap.set(value, type);\n            }\n        }\n        return new ZodDiscriminatedUnion({\n            typeName: ZodFirstPartyTypeKind.ZodDiscriminatedUnion,\n            discriminator,\n            options,\n            optionsMap,\n            ...processCreateParams(params),\n        });\n    }\n}\nfunction mergeValues(a, b) {\n    const aType = getParsedType(a);\n    const bType = getParsedType(b);\n    if (a === b) {\n        return { valid: true, data: a };\n    }\n    else if (aType === ZodParsedType.object && bType === ZodParsedType.object) {\n        const bKeys = util.objectKeys(b);\n        const sharedKeys = util.objectKeys(a).filter((key) => bKeys.indexOf(key) !== -1);\n        const newObj = { ...a, ...b };\n        for (const key of sharedKeys) {\n            const sharedValue = mergeValues(a[key], b[key]);\n            if (!sharedValue.valid) {\n                return { valid: false };\n            }\n            newObj[key] = sharedValue.data;\n        }\n        return { valid: true, data: newObj };\n    }\n    else if (aType === ZodParsedType.array && bType === ZodParsedType.array) {\n        if (a.length !== b.length) {\n            return { valid: false };\n        }\n        const newArray = [];\n        for (let index = 0; index < a.length; index++) {\n            const itemA = a[index];\n            const itemB = b[index];\n            const sharedValue = mergeValues(itemA, itemB);\n            if (!sharedValue.valid) {\n                return { valid: false };\n            }\n            newArray.push(sharedValue.data);\n        }\n        return { valid: true, data: newArray };\n    }\n    else if (aType === ZodParsedType.date && bType === ZodParsedType.date && +a === +b) {\n        return { valid: true, data: a };\n    }\n    else {\n        return { valid: false };\n    }\n}\nexport class ZodIntersection extends ZodType {\n    _parse(input) {\n        const { status, ctx } = this._processInputParams(input);\n        const handleParsed = (parsedLeft, parsedRight) => {\n            if (isAborted(parsedLeft) || isAborted(parsedRight)) {\n                return INVALID;\n            }\n            const merged = mergeValues(parsedLeft.value, parsedRight.value);\n            if (!merged.valid) {\n                addIssueToContext(ctx, {\n                    code: ZodIssueCode.invalid_intersection_types,\n                });\n                return INVALID;\n            }\n            if (isDirty(parsedLeft) || isDirty(parsedRight)) {\n                status.dirty();\n            }\n            return { status: status.value, value: merged.data };\n        };\n        if (ctx.common.async) {\n            return Promise.all([\n                this._def.left._parseAsync({\n                    data: ctx.data,\n                    path: ctx.path,\n                    parent: ctx,\n                }),\n                this._def.right._parseAsync({\n                    data: ctx.data,\n                    path: ctx.path,\n                    parent: ctx,\n                }),\n            ]).then(([left, right]) => handleParsed(left, right));\n        }\n        else {\n            return handleParsed(this._def.left._parseSync({\n                data: ctx.data,\n                path: ctx.path,\n                parent: ctx,\n            }), this._def.right._parseSync({\n                data: ctx.data,\n                path: ctx.path,\n                parent: ctx,\n            }));\n        }\n    }\n}\nZodIntersection.create = (left, right, params) => {\n    return new ZodIntersection({\n        left: left,\n        right: right,\n        typeName: ZodFirstPartyTypeKind.ZodIntersection,\n        ...processCreateParams(params),\n    });\n};\n// type ZodTupleItems = [ZodTypeAny, ...ZodTypeAny[]];\nexport class ZodTuple extends ZodType {\n    _parse(input) {\n        const { status, ctx } = this._processInputParams(input);\n        if (ctx.parsedType !== ZodParsedType.array) {\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.array,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        if (ctx.data.length < this._def.items.length) {\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.too_small,\n                minimum: this._def.items.length,\n                inclusive: true,\n                exact: false,\n                type: \"array\",\n            });\n            return INVALID;\n        }\n        const rest = this._def.rest;\n        if (!rest && ctx.data.length > this._def.items.length) {\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.too_big,\n                maximum: this._def.items.length,\n                inclusive: true,\n                exact: false,\n                type: \"array\",\n            });\n            status.dirty();\n        }\n        const items = [...ctx.data]\n            .map((item, itemIndex) => {\n            const schema = this._def.items[itemIndex] || this._def.rest;\n            if (!schema)\n                return null;\n            return schema._parse(new ParseInputLazyPath(ctx, item, ctx.path, itemIndex));\n        })\n            .filter((x) => !!x); // filter nulls\n        if (ctx.common.async) {\n            return Promise.all(items).then((results) => {\n                return ParseStatus.mergeArray(status, results);\n            });\n        }\n        else {\n            return ParseStatus.mergeArray(status, items);\n        }\n    }\n    get items() {\n        return this._def.items;\n    }\n    rest(rest) {\n        return new ZodTuple({\n            ...this._def,\n            rest,\n        });\n    }\n}\nZodTuple.create = (schemas, params) => {\n    if (!Array.isArray(schemas)) {\n        throw new Error(\"You must pass an array of schemas to z.tuple([ ... ])\");\n    }\n    return new ZodTuple({\n        items: schemas,\n        typeName: ZodFirstPartyTypeKind.ZodTuple,\n        rest: null,\n        ...processCreateParams(params),\n    });\n};\nexport class ZodRecord extends ZodType {\n    get keySchema() {\n        return this._def.keyType;\n    }\n    get valueSchema() {\n        return this._def.valueType;\n    }\n    _parse(input) {\n        const { status, ctx } = this._processInputParams(input);\n        if (ctx.parsedType !== ZodParsedType.object) {\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.object,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        const pairs = [];\n        const keyType = this._def.keyType;\n        const valueType = this._def.valueType;\n        for (const key in ctx.data) {\n            pairs.push({\n                key: keyType._parse(new ParseInputLazyPath(ctx, key, ctx.path, key)),\n                value: valueType._parse(new ParseInputLazyPath(ctx, ctx.data[key], ctx.path, key)),\n                alwaysSet: key in ctx.data,\n            });\n        }\n        if (ctx.common.async) {\n            return ParseStatus.mergeObjectAsync(status, pairs);\n        }\n        else {\n            return ParseStatus.mergeObjectSync(status, pairs);\n        }\n    }\n    get element() {\n        return this._def.valueType;\n    }\n    static create(first, second, third) {\n        if (second instanceof ZodType) {\n            return new ZodRecord({\n                keyType: first,\n                valueType: second,\n                typeName: ZodFirstPartyTypeKind.ZodRecord,\n                ...processCreateParams(third),\n            });\n        }\n        return new ZodRecord({\n            keyType: ZodString.create(),\n            valueType: first,\n            typeName: ZodFirstPartyTypeKind.ZodRecord,\n            ...processCreateParams(second),\n        });\n    }\n}\nexport class ZodMap extends ZodType {\n    get keySchema() {\n        return this._def.keyType;\n    }\n    get valueSchema() {\n        return this._def.valueType;\n    }\n    _parse(input) {\n        const { status, ctx } = this._processInputParams(input);\n        if (ctx.parsedType !== ZodParsedType.map) {\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.map,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        const keyType = this._def.keyType;\n        const valueType = this._def.valueType;\n        const pairs = [...ctx.data.entries()].map(([key, value], index) => {\n            return {\n                key: keyType._parse(new ParseInputLazyPath(ctx, key, ctx.path, [index, \"key\"])),\n                value: valueType._parse(new ParseInputLazyPath(ctx, value, ctx.path, [index, \"value\"])),\n            };\n        });\n        if (ctx.common.async) {\n            const finalMap = new Map();\n            return Promise.resolve().then(async () => {\n                for (const pair of pairs) {\n                    const key = await pair.key;\n                    const value = await pair.value;\n                    if (key.status === \"aborted\" || value.status === \"aborted\") {\n                        return INVALID;\n                    }\n                    if (key.status === \"dirty\" || value.status === \"dirty\") {\n                        status.dirty();\n                    }\n                    finalMap.set(key.value, value.value);\n                }\n                return { status: status.value, value: finalMap };\n            });\n        }\n        else {\n            const finalMap = new Map();\n            for (const pair of pairs) {\n                const key = pair.key;\n                const value = pair.value;\n                if (key.status === \"aborted\" || value.status === \"aborted\") {\n                    return INVALID;\n                }\n                if (key.status === \"dirty\" || value.status === \"dirty\") {\n                    status.dirty();\n                }\n                finalMap.set(key.value, value.value);\n            }\n            return { status: status.value, value: finalMap };\n        }\n    }\n}\nZodMap.create = (keyType, valueType, params) => {\n    return new ZodMap({\n        valueType,\n        keyType,\n        typeName: ZodFirstPartyTypeKind.ZodMap,\n        ...processCreateParams(params),\n    });\n};\nexport class ZodSet extends ZodType {\n    _parse(input) {\n        const { status, ctx } = this._processInputParams(input);\n        if (ctx.parsedType !== ZodParsedType.set) {\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.set,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        const def = this._def;\n        if (def.minSize !== null) {\n            if (ctx.data.size < def.minSize.value) {\n                addIssueToContext(ctx, {\n                    code: ZodIssueCode.too_small,\n                    minimum: def.minSize.value,\n                    type: \"set\",\n                    inclusive: true,\n                    exact: false,\n                    message: def.minSize.message,\n                });\n                status.dirty();\n            }\n        }\n        if (def.maxSize !== null) {\n            if (ctx.data.size > def.maxSize.value) {\n                addIssueToContext(ctx, {\n                    code: ZodIssueCode.too_big,\n                    maximum: def.maxSize.value,\n                    type: \"set\",\n                    inclusive: true,\n                    exact: false,\n                    message: def.maxSize.message,\n                });\n                status.dirty();\n            }\n        }\n        const valueType = this._def.valueType;\n        function finalizeSet(elements) {\n            const parsedSet = new Set();\n            for (const element of elements) {\n                if (element.status === \"aborted\")\n                    return INVALID;\n                if (element.status === \"dirty\")\n                    status.dirty();\n                parsedSet.add(element.value);\n            }\n            return { status: status.value, value: parsedSet };\n        }\n        const elements = [...ctx.data.values()].map((item, i) => valueType._parse(new ParseInputLazyPath(ctx, item, ctx.path, i)));\n        if (ctx.common.async) {\n            return Promise.all(elements).then((elements) => finalizeSet(elements));\n        }\n        else {\n            return finalizeSet(elements);\n        }\n    }\n    min(minSize, message) {\n        return new ZodSet({\n            ...this._def,\n            minSize: { value: minSize, message: errorUtil.toString(message) },\n        });\n    }\n    max(maxSize, message) {\n        return new ZodSet({\n            ...this._def,\n            maxSize: { value: maxSize, message: errorUtil.toString(message) },\n        });\n    }\n    size(size, message) {\n        return this.min(size, message).max(size, message);\n    }\n    nonempty(message) {\n        return this.min(1, message);\n    }\n}\nZodSet.create = (valueType, params) => {\n    return new ZodSet({\n        valueType,\n        minSize: null,\n        maxSize: null,\n        typeName: ZodFirstPartyTypeKind.ZodSet,\n        ...processCreateParams(params),\n    });\n};\nexport class ZodFunction extends ZodType {\n    constructor() {\n        super(...arguments);\n        this.validate = this.implement;\n    }\n    _parse(input) {\n        const { ctx } = this._processInputParams(input);\n        if (ctx.parsedType !== ZodParsedType.function) {\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.function,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        function makeArgsIssue(args, error) {\n            return makeIssue({\n                data: args,\n                path: ctx.path,\n                errorMaps: [ctx.common.contextualErrorMap, ctx.schemaErrorMap, getErrorMap(), defaultErrorMap].filter((x) => !!x),\n                issueData: {\n                    code: ZodIssueCode.invalid_arguments,\n                    argumentsError: error,\n                },\n            });\n        }\n        function makeReturnsIssue(returns, error) {\n            return makeIssue({\n                data: returns,\n                path: ctx.path,\n                errorMaps: [ctx.common.contextualErrorMap, ctx.schemaErrorMap, getErrorMap(), defaultErrorMap].filter((x) => !!x),\n                issueData: {\n                    code: ZodIssueCode.invalid_return_type,\n                    returnTypeError: error,\n                },\n            });\n        }\n        const params = { errorMap: ctx.common.contextualErrorMap };\n        const fn = ctx.data;\n        if (this._def.returns instanceof ZodPromise) {\n            // Would love a way to avoid disabling this rule, but we need\n            // an alias (using an arrow function was what caused 2651).\n            // eslint-disable-next-line @typescript-eslint/no-this-alias\n            const me = this;\n            return OK(async function (...args) {\n                const error = new ZodError([]);\n                const parsedArgs = await me._def.args.parseAsync(args, params).catch((e) => {\n                    error.addIssue(makeArgsIssue(args, e));\n                    throw error;\n                });\n                const result = await Reflect.apply(fn, this, parsedArgs);\n                const parsedReturns = await me._def.returns._def.type\n                    .parseAsync(result, params)\n                    .catch((e) => {\n                    error.addIssue(makeReturnsIssue(result, e));\n                    throw error;\n                });\n                return parsedReturns;\n            });\n        }\n        else {\n            // Would love a way to avoid disabling this rule, but we need\n            // an alias (using an arrow function was what caused 2651).\n            // eslint-disable-next-line @typescript-eslint/no-this-alias\n            const me = this;\n            return OK(function (...args) {\n                const parsedArgs = me._def.args.safeParse(args, params);\n                if (!parsedArgs.success) {\n                    throw new ZodError([makeArgsIssue(args, parsedArgs.error)]);\n                }\n                const result = Reflect.apply(fn, this, parsedArgs.data);\n                const parsedReturns = me._def.returns.safeParse(result, params);\n                if (!parsedReturns.success) {\n                    throw new ZodError([makeReturnsIssue(result, parsedReturns.error)]);\n                }\n                return parsedReturns.data;\n            });\n        }\n    }\n    parameters() {\n        return this._def.args;\n    }\n    returnType() {\n        return this._def.returns;\n    }\n    args(...items) {\n        return new ZodFunction({\n            ...this._def,\n            args: ZodTuple.create(items).rest(ZodUnknown.create()),\n        });\n    }\n    returns(returnType) {\n        return new ZodFunction({\n            ...this._def,\n            returns: returnType,\n        });\n    }\n    implement(func) {\n        const validatedFunc = this.parse(func);\n        return validatedFunc;\n    }\n    strictImplement(func) {\n        const validatedFunc = this.parse(func);\n        return validatedFunc;\n    }\n    static create(args, returns, params) {\n        return new ZodFunction({\n            args: (args ? args : ZodTuple.create([]).rest(ZodUnknown.create())),\n            returns: returns || ZodUnknown.create(),\n            typeName: ZodFirstPartyTypeKind.ZodFunction,\n            ...processCreateParams(params),\n        });\n    }\n}\nexport class ZodLazy extends ZodType {\n    get schema() {\n        return this._def.getter();\n    }\n    _parse(input) {\n        const { ctx } = this._processInputParams(input);\n        const lazySchema = this._def.getter();\n        return lazySchema._parse({ data: ctx.data, path: ctx.path, parent: ctx });\n    }\n}\nZodLazy.create = (getter, params) => {\n    return new ZodLazy({\n        getter: getter,\n        typeName: ZodFirstPartyTypeKind.ZodLazy,\n        ...processCreateParams(params),\n    });\n};\nexport class ZodLiteral extends ZodType {\n    _parse(input) {\n        if (input.data !== this._def.value) {\n            const ctx = this._getOrReturnCtx(input);\n            addIssueToContext(ctx, {\n                received: ctx.data,\n                code: ZodIssueCode.invalid_literal,\n                expected: this._def.value,\n            });\n            return INVALID;\n        }\n        return { status: \"valid\", value: input.data };\n    }\n    get value() {\n        return this._def.value;\n    }\n}\nZodLiteral.create = (value, params) => {\n    return new ZodLiteral({\n        value: value,\n        typeName: ZodFirstPartyTypeKind.ZodLiteral,\n        ...processCreateParams(params),\n    });\n};\nfunction createZodEnum(values, params) {\n    return new ZodEnum({\n        values,\n        typeName: ZodFirstPartyTypeKind.ZodEnum,\n        ...processCreateParams(params),\n    });\n}\nexport class ZodEnum extends ZodType {\n    _parse(input) {\n        if (typeof input.data !== \"string\") {\n            const ctx = this._getOrReturnCtx(input);\n            const expectedValues = this._def.values;\n            addIssueToContext(ctx, {\n                expected: util.joinValues(expectedValues),\n                received: ctx.parsedType,\n                code: ZodIssueCode.invalid_type,\n            });\n            return INVALID;\n        }\n        if (!this._cache) {\n            this._cache = new Set(this._def.values);\n        }\n        if (!this._cache.has(input.data)) {\n            const ctx = this._getOrReturnCtx(input);\n            const expectedValues = this._def.values;\n            addIssueToContext(ctx, {\n                received: ctx.data,\n                code: ZodIssueCode.invalid_enum_value,\n                options: expectedValues,\n            });\n            return INVALID;\n        }\n        return OK(input.data);\n    }\n    get options() {\n        return this._def.values;\n    }\n    get enum() {\n        const enumValues = {};\n        for (const val of this._def.values) {\n            enumValues[val] = val;\n        }\n        return enumValues;\n    }\n    get Values() {\n        const enumValues = {};\n        for (const val of this._def.values) {\n            enumValues[val] = val;\n        }\n        return enumValues;\n    }\n    get Enum() {\n        const enumValues = {};\n        for (const val of this._def.values) {\n            enumValues[val] = val;\n        }\n        return enumValues;\n    }\n    extract(values, newDef = this._def) {\n        return ZodEnum.create(values, {\n            ...this._def,\n            ...newDef,\n        });\n    }\n    exclude(values, newDef = this._def) {\n        return ZodEnum.create(this.options.filter((opt) => !values.includes(opt)), {\n            ...this._def,\n            ...newDef,\n        });\n    }\n}\nZodEnum.create = createZodEnum;\nexport class ZodNativeEnum extends ZodType {\n    _parse(input) {\n        const nativeEnumValues = util.getValidEnumValues(this._def.values);\n        const ctx = this._getOrReturnCtx(input);\n        if (ctx.parsedType !== ZodParsedType.string && ctx.parsedType !== ZodParsedType.number) {\n            const expectedValues = util.objectValues(nativeEnumValues);\n            addIssueToContext(ctx, {\n                expected: util.joinValues(expectedValues),\n                received: ctx.parsedType,\n                code: ZodIssueCode.invalid_type,\n            });\n            return INVALID;\n        }\n        if (!this._cache) {\n            this._cache = new Set(util.getValidEnumValues(this._def.values));\n        }\n        if (!this._cache.has(input.data)) {\n            const expectedValues = util.objectValues(nativeEnumValues);\n            addIssueToContext(ctx, {\n                received: ctx.data,\n                code: ZodIssueCode.invalid_enum_value,\n                options: expectedValues,\n            });\n            return INVALID;\n        }\n        return OK(input.data);\n    }\n    get enum() {\n        return this._def.values;\n    }\n}\nZodNativeEnum.create = (values, params) => {\n    return new ZodNativeEnum({\n        values: values,\n        typeName: ZodFirstPartyTypeKind.ZodNativeEnum,\n        ...processCreateParams(params),\n    });\n};\nexport class ZodPromise extends ZodType {\n    unwrap() {\n        return this._def.type;\n    }\n    _parse(input) {\n        const { ctx } = this._processInputParams(input);\n        if (ctx.parsedType !== ZodParsedType.promise && ctx.common.async === false) {\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.promise,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        const promisified = ctx.parsedType === ZodParsedType.promise ? ctx.data : Promise.resolve(ctx.data);\n        return OK(promisified.then((data) => {\n            return this._def.type.parseAsync(data, {\n                path: ctx.path,\n                errorMap: ctx.common.contextualErrorMap,\n            });\n        }));\n    }\n}\nZodPromise.create = (schema, params) => {\n    return new ZodPromise({\n        type: schema,\n        typeName: ZodFirstPartyTypeKind.ZodPromise,\n        ...processCreateParams(params),\n    });\n};\nexport class ZodEffects extends ZodType {\n    innerType() {\n        return this._def.schema;\n    }\n    sourceType() {\n        return this._def.schema._def.typeName === ZodFirstPartyTypeKind.ZodEffects\n            ? this._def.schema.sourceType()\n            : this._def.schema;\n    }\n    _parse(input) {\n        const { status, ctx } = this._processInputParams(input);\n        const effect = this._def.effect || null;\n        const checkCtx = {\n            addIssue: (arg) => {\n                addIssueToContext(ctx, arg);\n                if (arg.fatal) {\n                    status.abort();\n                }\n                else {\n                    status.dirty();\n                }\n            },\n            get path() {\n                return ctx.path;\n            },\n        };\n        checkCtx.addIssue = checkCtx.addIssue.bind(checkCtx);\n        if (effect.type === \"preprocess\") {\n            const processed = effect.transform(ctx.data, checkCtx);\n            if (ctx.common.async) {\n                return Promise.resolve(processed).then(async (processed) => {\n                    if (status.value === \"aborted\")\n                        return INVALID;\n                    const result = await this._def.schema._parseAsync({\n                        data: processed,\n                        path: ctx.path,\n                        parent: ctx,\n                    });\n                    if (result.status === \"aborted\")\n                        return INVALID;\n                    if (result.status === \"dirty\")\n                        return DIRTY(result.value);\n                    if (status.value === \"dirty\")\n                        return DIRTY(result.value);\n                    return result;\n                });\n            }\n            else {\n                if (status.value === \"aborted\")\n                    return INVALID;\n                const result = this._def.schema._parseSync({\n                    data: processed,\n                    path: ctx.path,\n                    parent: ctx,\n                });\n                if (result.status === \"aborted\")\n                    return INVALID;\n                if (result.status === \"dirty\")\n                    return DIRTY(result.value);\n                if (status.value === \"dirty\")\n                    return DIRTY(result.value);\n                return result;\n            }\n        }\n        if (effect.type === \"refinement\") {\n            const executeRefinement = (acc) => {\n                const result = effect.refinement(acc, checkCtx);\n                if (ctx.common.async) {\n                    return Promise.resolve(result);\n                }\n                if (result instanceof Promise) {\n                    throw new Error(\"Async refinement encountered during synchronous parse operation. Use .parseAsync instead.\");\n                }\n                return acc;\n            };\n            if (ctx.common.async === false) {\n                const inner = this._def.schema._parseSync({\n                    data: ctx.data,\n                    path: ctx.path,\n                    parent: ctx,\n                });\n                if (inner.status === \"aborted\")\n                    return INVALID;\n                if (inner.status === \"dirty\")\n                    status.dirty();\n                // return value is ignored\n                executeRefinement(inner.value);\n                return { status: status.value, value: inner.value };\n            }\n            else {\n                return this._def.schema._parseAsync({ data: ctx.data, path: ctx.path, parent: ctx }).then((inner) => {\n                    if (inner.status === \"aborted\")\n                        return INVALID;\n                    if (inner.status === \"dirty\")\n                        status.dirty();\n                    return executeRefinement(inner.value).then(() => {\n                        return { status: status.value, value: inner.value };\n                    });\n                });\n            }\n        }\n        if (effect.type === \"transform\") {\n            if (ctx.common.async === false) {\n                const base = this._def.schema._parseSync({\n                    data: ctx.data,\n                    path: ctx.path,\n                    parent: ctx,\n                });\n                if (!isValid(base))\n                    return INVALID;\n                const result = effect.transform(base.value, checkCtx);\n                if (result instanceof Promise) {\n                    throw new Error(`Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.`);\n                }\n                return { status: status.value, value: result };\n            }\n            else {\n                return this._def.schema._parseAsync({ data: ctx.data, path: ctx.path, parent: ctx }).then((base) => {\n                    if (!isValid(base))\n                        return INVALID;\n                    return Promise.resolve(effect.transform(base.value, checkCtx)).then((result) => ({\n                        status: status.value,\n                        value: result,\n                    }));\n                });\n            }\n        }\n        util.assertNever(effect);\n    }\n}\nZodEffects.create = (schema, effect, params) => {\n    return new ZodEffects({\n        schema,\n        typeName: ZodFirstPartyTypeKind.ZodEffects,\n        effect,\n        ...processCreateParams(params),\n    });\n};\nZodEffects.createWithPreprocess = (preprocess, schema, params) => {\n    return new ZodEffects({\n        schema,\n        effect: { type: \"preprocess\", transform: preprocess },\n        typeName: ZodFirstPartyTypeKind.ZodEffects,\n        ...processCreateParams(params),\n    });\n};\nexport { ZodEffects as ZodTransformer };\nexport class ZodOptional extends ZodType {\n    _parse(input) {\n        const parsedType = this._getType(input);\n        if (parsedType === ZodParsedType.undefined) {\n            return OK(undefined);\n        }\n        return this._def.innerType._parse(input);\n    }\n    unwrap() {\n        return this._def.innerType;\n    }\n}\nZodOptional.create = (type, params) => {\n    return new ZodOptional({\n        innerType: type,\n        typeName: ZodFirstPartyTypeKind.ZodOptional,\n        ...processCreateParams(params),\n    });\n};\nexport class ZodNullable extends ZodType {\n    _parse(input) {\n        const parsedType = this._getType(input);\n        if (parsedType === ZodParsedType.null) {\n            return OK(null);\n        }\n        return this._def.innerType._parse(input);\n    }\n    unwrap() {\n        return this._def.innerType;\n    }\n}\nZodNullable.create = (type, params) => {\n    return new ZodNullable({\n        innerType: type,\n        typeName: ZodFirstPartyTypeKind.ZodNullable,\n        ...processCreateParams(params),\n    });\n};\nexport class ZodDefault extends ZodType {\n    _parse(input) {\n        const { ctx } = this._processInputParams(input);\n        let data = ctx.data;\n        if (ctx.parsedType === ZodParsedType.undefined) {\n            data = this._def.defaultValue();\n        }\n        return this._def.innerType._parse({\n            data,\n            path: ctx.path,\n            parent: ctx,\n        });\n    }\n    removeDefault() {\n        return this._def.innerType;\n    }\n}\nZodDefault.create = (type, params) => {\n    return new ZodDefault({\n        innerType: type,\n        typeName: ZodFirstPartyTypeKind.ZodDefault,\n        defaultValue: typeof params.default === \"function\" ? params.default : () => params.default,\n        ...processCreateParams(params),\n    });\n};\nexport class ZodCatch extends ZodType {\n    _parse(input) {\n        const { ctx } = this._processInputParams(input);\n        // newCtx is used to not collect issues from inner types in ctx\n        const newCtx = {\n            ...ctx,\n            common: {\n                ...ctx.common,\n                issues: [],\n            },\n        };\n        const result = this._def.innerType._parse({\n            data: newCtx.data,\n            path: newCtx.path,\n            parent: {\n                ...newCtx,\n            },\n        });\n        if (isAsync(result)) {\n            return result.then((result) => {\n                return {\n                    status: \"valid\",\n                    value: result.status === \"valid\"\n                        ? result.value\n                        : this._def.catchValue({\n                            get error() {\n                                return new ZodError(newCtx.common.issues);\n                            },\n                            input: newCtx.data,\n                        }),\n                };\n            });\n        }\n        else {\n            return {\n                status: \"valid\",\n                value: result.status === \"valid\"\n                    ? result.value\n                    : this._def.catchValue({\n                        get error() {\n                            return new ZodError(newCtx.common.issues);\n                        },\n                        input: newCtx.data,\n                    }),\n            };\n        }\n    }\n    removeCatch() {\n        return this._def.innerType;\n    }\n}\nZodCatch.create = (type, params) => {\n    return new ZodCatch({\n        innerType: type,\n        typeName: ZodFirstPartyTypeKind.ZodCatch,\n        catchValue: typeof params.catch === \"function\" ? params.catch : () => params.catch,\n        ...processCreateParams(params),\n    });\n};\nexport class ZodNaN extends ZodType {\n    _parse(input) {\n        const parsedType = this._getType(input);\n        if (parsedType !== ZodParsedType.nan) {\n            const ctx = this._getOrReturnCtx(input);\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.nan,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        return { status: \"valid\", value: input.data };\n    }\n}\nZodNaN.create = (params) => {\n    return new ZodNaN({\n        typeName: ZodFirstPartyTypeKind.ZodNaN,\n        ...processCreateParams(params),\n    });\n};\nexport const BRAND = Symbol(\"zod_brand\");\nexport class ZodBranded extends ZodType {\n    _parse(input) {\n        const { ctx } = this._processInputParams(input);\n        const data = ctx.data;\n        return this._def.type._parse({\n            data,\n            path: ctx.path,\n            parent: ctx,\n        });\n    }\n    unwrap() {\n        return this._def.type;\n    }\n}\nexport class ZodPipeline extends ZodType {\n    _parse(input) {\n        const { status, ctx } = this._processInputParams(input);\n        if (ctx.common.async) {\n            const handleAsync = async () => {\n                const inResult = await this._def.in._parseAsync({\n                    data: ctx.data,\n                    path: ctx.path,\n                    parent: ctx,\n                });\n                if (inResult.status === \"aborted\")\n                    return INVALID;\n                if (inResult.status === \"dirty\") {\n                    status.dirty();\n                    return DIRTY(inResult.value);\n                }\n                else {\n                    return this._def.out._parseAsync({\n                        data: inResult.value,\n                        path: ctx.path,\n                        parent: ctx,\n                    });\n                }\n            };\n            return handleAsync();\n        }\n        else {\n            const inResult = this._def.in._parseSync({\n                data: ctx.data,\n                path: ctx.path,\n                parent: ctx,\n            });\n            if (inResult.status === \"aborted\")\n                return INVALID;\n            if (inResult.status === \"dirty\") {\n                status.dirty();\n                return {\n                    status: \"dirty\",\n                    value: inResult.value,\n                };\n            }\n            else {\n                return this._def.out._parseSync({\n                    data: inResult.value,\n                    path: ctx.path,\n                    parent: ctx,\n                });\n            }\n        }\n    }\n    static create(a, b) {\n        return new ZodPipeline({\n            in: a,\n            out: b,\n            typeName: ZodFirstPartyTypeKind.ZodPipeline,\n        });\n    }\n}\nexport class ZodReadonly extends ZodType {\n    _parse(input) {\n        const result = this._def.innerType._parse(input);\n        const freeze = (data) => {\n            if (isValid(data)) {\n                data.value = Object.freeze(data.value);\n            }\n            return data;\n        };\n        return isAsync(result) ? result.then((data) => freeze(data)) : freeze(result);\n    }\n    unwrap() {\n        return this._def.innerType;\n    }\n}\nZodReadonly.create = (type, params) => {\n    return new ZodReadonly({\n        innerType: type,\n        typeName: ZodFirstPartyTypeKind.ZodReadonly,\n        ...processCreateParams(params),\n    });\n};\n////////////////////////////////////////\n////////////////////////////////////////\n//////////                    //////////\n//////////      z.custom      //////////\n//////////                    //////////\n////////////////////////////////////////\n////////////////////////////////////////\nfunction cleanParams(params, data) {\n    const p = typeof params === \"function\" ? params(data) : typeof params === \"string\" ? { message: params } : params;\n    const p2 = typeof p === \"string\" ? { message: p } : p;\n    return p2;\n}\nexport function custom(check, _params = {}, \n/**\n * @deprecated\n *\n * Pass `fatal` into the params object instead:\n *\n * ```ts\n * z.string().custom((val) => val.length > 5, { fatal: false })\n * ```\n *\n */\nfatal) {\n    if (check)\n        return ZodAny.create().superRefine((data, ctx) => {\n            const r = check(data);\n            if (r instanceof Promise) {\n                return r.then((r) => {\n                    if (!r) {\n                        const params = cleanParams(_params, data);\n                        const _fatal = params.fatal ?? fatal ?? true;\n                        ctx.addIssue({ code: \"custom\", ...params, fatal: _fatal });\n                    }\n                });\n            }\n            if (!r) {\n                const params = cleanParams(_params, data);\n                const _fatal = params.fatal ?? fatal ?? true;\n                ctx.addIssue({ code: \"custom\", ...params, fatal: _fatal });\n            }\n            return;\n        });\n    return ZodAny.create();\n}\nexport { ZodType as Schema, ZodType as ZodSchema };\nexport const late = {\n    object: ZodObject.lazycreate,\n};\nexport var ZodFirstPartyTypeKind;\n(function (ZodFirstPartyTypeKind) {\n    ZodFirstPartyTypeKind[\"ZodString\"] = \"ZodString\";\n    ZodFirstPartyTypeKind[\"ZodNumber\"] = \"ZodNumber\";\n    ZodFirstPartyTypeKind[\"ZodNaN\"] = \"ZodNaN\";\n    ZodFirstPartyTypeKind[\"ZodBigInt\"] = \"ZodBigInt\";\n    ZodFirstPartyTypeKind[\"ZodBoolean\"] = \"ZodBoolean\";\n    ZodFirstPartyTypeKind[\"ZodDate\"] = \"ZodDate\";\n    ZodFirstPartyTypeKind[\"ZodSymbol\"] = \"ZodSymbol\";\n    ZodFirstPartyTypeKind[\"ZodUndefined\"] = \"ZodUndefined\";\n    ZodFirstPartyTypeKind[\"ZodNull\"] = \"ZodNull\";\n    ZodFirstPartyTypeKind[\"ZodAny\"] = \"ZodAny\";\n    ZodFirstPartyTypeKind[\"ZodUnknown\"] = \"ZodUnknown\";\n    ZodFirstPartyTypeKind[\"ZodNever\"] = \"ZodNever\";\n    ZodFirstPartyTypeKind[\"ZodVoid\"] = \"ZodVoid\";\n    ZodFirstPartyTypeKind[\"ZodArray\"] = \"ZodArray\";\n    ZodFirstPartyTypeKind[\"ZodObject\"] = \"ZodObject\";\n    ZodFirstPartyTypeKind[\"ZodUnion\"] = \"ZodUnion\";\n    ZodFirstPartyTypeKind[\"ZodDiscriminatedUnion\"] = \"ZodDiscriminatedUnion\";\n    ZodFirstPartyTypeKind[\"ZodIntersection\"] = \"ZodIntersection\";\n    ZodFirstPartyTypeKind[\"ZodTuple\"] = \"ZodTuple\";\n    ZodFirstPartyTypeKind[\"ZodRecord\"] = \"ZodRecord\";\n    ZodFirstPartyTypeKind[\"ZodMap\"] = \"ZodMap\";\n    ZodFirstPartyTypeKind[\"ZodSet\"] = \"ZodSet\";\n    ZodFirstPartyTypeKind[\"ZodFunction\"] = \"ZodFunction\";\n    ZodFirstPartyTypeKind[\"ZodLazy\"] = \"ZodLazy\";\n    ZodFirstPartyTypeKind[\"ZodLiteral\"] = \"ZodLiteral\";\n    ZodFirstPartyTypeKind[\"ZodEnum\"] = \"ZodEnum\";\n    ZodFirstPartyTypeKind[\"ZodEffects\"] = \"ZodEffects\";\n    ZodFirstPartyTypeKind[\"ZodNativeEnum\"] = \"ZodNativeEnum\";\n    ZodFirstPartyTypeKind[\"ZodOptional\"] = \"ZodOptional\";\n    ZodFirstPartyTypeKind[\"ZodNullable\"] = \"ZodNullable\";\n    ZodFirstPartyTypeKind[\"ZodDefault\"] = \"ZodDefault\";\n    ZodFirstPartyTypeKind[\"ZodCatch\"] = \"ZodCatch\";\n    ZodFirstPartyTypeKind[\"ZodPromise\"] = \"ZodPromise\";\n    ZodFirstPartyTypeKind[\"ZodBranded\"] = \"ZodBranded\";\n    ZodFirstPartyTypeKind[\"ZodPipeline\"] = \"ZodPipeline\";\n    ZodFirstPartyTypeKind[\"ZodReadonly\"] = \"ZodReadonly\";\n})(ZodFirstPartyTypeKind || (ZodFirstPartyTypeKind = {}));\n// requires TS 4.4+\nclass Class {\n    constructor(..._) { }\n}\nconst instanceOfType = (\n// const instanceOfType = <T extends new (...args: any[]) => any>(\ncls, params = {\n    message: `Input not instance of ${cls.name}`,\n}) => custom((data) => data instanceof cls, params);\nconst stringType = ZodString.create;\nconst numberType = ZodNumber.create;\nconst nanType = ZodNaN.create;\nconst bigIntType = ZodBigInt.create;\nconst booleanType = ZodBoolean.create;\nconst dateType = ZodDate.create;\nconst symbolType = ZodSymbol.create;\nconst undefinedType = ZodUndefined.create;\nconst nullType = ZodNull.create;\nconst anyType = ZodAny.create;\nconst unknownType = ZodUnknown.create;\nconst neverType = ZodNever.create;\nconst voidType = ZodVoid.create;\nconst arrayType = ZodArray.create;\nconst objectType = ZodObject.create;\nconst strictObjectType = ZodObject.strictCreate;\nconst unionType = ZodUnion.create;\nconst discriminatedUnionType = ZodDiscriminatedUnion.create;\nconst intersectionType = ZodIntersection.create;\nconst tupleType = ZodTuple.create;\nconst recordType = ZodRecord.create;\nconst mapType = ZodMap.create;\nconst setType = ZodSet.create;\nconst functionType = ZodFunction.create;\nconst lazyType = ZodLazy.create;\nconst literalType = ZodLiteral.create;\nconst enumType = ZodEnum.create;\nconst nativeEnumType = ZodNativeEnum.create;\nconst promiseType = ZodPromise.create;\nconst effectsType = ZodEffects.create;\nconst optionalType = ZodOptional.create;\nconst nullableType = ZodNullable.create;\nconst preprocessType = ZodEffects.createWithPreprocess;\nconst pipelineType = ZodPipeline.create;\nconst ostring = () => stringType().optional();\nconst onumber = () => numberType().optional();\nconst oboolean = () => booleanType().optional();\nexport const coerce = {\n    string: ((arg) => ZodString.create({ ...arg, coerce: true })),\n    number: ((arg) => ZodNumber.create({ ...arg, coerce: true })),\n    boolean: ((arg) => ZodBoolean.create({\n        ...arg,\n        coerce: true,\n    })),\n    bigint: ((arg) => ZodBigInt.create({ ...arg, coerce: true })),\n    date: ((arg) => ZodDate.create({ ...arg, coerce: true })),\n};\nexport { anyType as any, arrayType as array, bigIntType as bigint, booleanType as boolean, dateType as date, discriminatedUnionType as discriminatedUnion, effectsType as effect, enumType as enum, functionType as function, instanceOfType as instanceof, intersectionType as intersection, lazyType as lazy, literalType as literal, mapType as map, nanType as nan, nativeEnumType as nativeEnum, neverType as never, nullType as null, nullableType as nullable, numberType as number, objectType as object, oboolean, onumber, optionalType as optional, ostring, pipelineType as pipeline, preprocessType as preprocess, promiseType as promise, recordType as record, setType as set, strictObjectType as strictObject, stringType as string, symbolType as symbol, effectsType as transformer, tupleType as tuple, undefinedType as undefined, unionType as union, unknownType as unknown, voidType as void, };\nexport const NEVER = INVALID;\n", "/**\n * Logger utility for CLI\n *\n * By default, only errors are shown to keep output clean for users.\n * Set SESSIONHUB_DEBUG=1 for verbose logging.\n */\n\ntype LogLevel = 'DEBUG' | 'INFO' | 'WARN' | 'ERROR';\n\nconst LOG_LEVEL_PRIORITY: Record<LogLevel, number> = {\n  DEBUG: 0,\n  INFO: 1,\n  WARN: 2,\n  ERROR: 3,\n};\n\nclass Logger {\n  private minLevel: LogLevel;\n\n  constructor() {\n    // Default to ERROR only, unless debug mode is enabled\n    this.minLevel = process.env.SESSIONHUB_DEBUG === '1' ? 'DEBUG' : 'ERROR';\n  }\n\n  private shouldLog(level: LogLevel): boolean {\n    return LOG_LEVEL_PRIORITY[level] >= LOG_LEVEL_PRIORITY[this.minLevel];\n  }\n\n  private write(level: LogLevel, message: string, ...args: any[]): void {\n    if (!this.shouldLog(level)) return;\n\n    const timestamp = new Date().toISOString();\n    const formattedMessage = `[${timestamp}] [${level}] ${message}`;\n\n    if (args.length > 0) {\n      console.error(formattedMessage, ...args);\n    } else {\n      console.error(formattedMessage);\n    }\n  }\n\n  info(message: string, ...args: any[]): void {\n    this.write('INFO', message, ...args);\n  }\n\n  warn(message: string, ...args: any[]): void {\n    this.write('WARN', message, ...args);\n  }\n\n  error(message: string, ...args: any[]): void {\n    this.write('ERROR', message, ...args);\n  }\n\n  debug(message: string, ...args: any[]): void {\n    this.write('DEBUG', message, ...args);\n  }\n\n  /**\n   * Enable verbose logging (for debugging)\n   */\n  enableDebug(): void {\n    this.minLevel = 'DEBUG';\n  }\n}\n\nexport const logger = new Logger();\n", "/**\n * gRPC client for SessionHub backend\n *\n * High-performance gRPC client using Protocol Buffers for 6-10x faster processing.\n */\n\nimport * as grpc from \"@grpc/grpc-js\";\nimport * as protoLoader from \"@grpc/proto-loader\";\nimport { join, dirname } from \"path\";\nimport { fileURLToPath } from \"url\";\nimport type { SessionApiData, UserInfo, ApiInteractionData } from \"./models.js\";\nimport { logger } from \"./logger.js\";\nimport { encryptSessionFields, isValidPublicKey } from \"./encryption.js\";\n\nconst __filename = fileURLToPath(import.meta.url);\nconst __dirname = dirname(__filename);\n\nexport class GrpcAPIClient {\n  private client: any;\n  private apiKey: string;\n  private backendUrl: string;\n  private teamKeyCache: {\n    teamId: string;\n    publicKey: string;\n    keyVersion: number;\n    fetchedAt: number;\n  } | null = null;\n  private teamKeyCacheTtlMs = 5 * 60 * 1000;\n\n  constructor(\n    apiKey: string,\n    backendUrl: string = \"localhost:50051\",\n    useTls?: boolean,\n  ) {\n    this.apiKey = apiKey;\n    // Add default port if not specified (443 for remote, 50051 for localhost)\n    const isLocalhost =\n      backendUrl.startsWith(\"localhost\") || backendUrl.startsWith(\"127.0.0.1\");\n    if (!backendUrl.includes(\":\")) {\n      this.backendUrl = isLocalhost\n        ? `${backendUrl}:50051`\n        : `${backendUrl}:443`;\n    } else {\n      this.backendUrl = backendUrl;\n    }\n\n    // Load protobuf definition - bundled with plugin\n    // From dist/ folder: .. gets to sessionhub-plugin/proto/\n    const PROTO_PATH = join(__dirname, \"..\", \"proto/sessionhub.proto\");\n\n    const packageDefinition = protoLoader.loadSync(PROTO_PATH, {\n      keepCase: true,\n      longs: String,\n      enums: String,\n      defaults: true,\n      oneofs: true,\n    });\n\n    const protoDescriptor = grpc.loadPackageDefinition(\n      packageDefinition,\n    ) as any;\n    const sessionhub = protoDescriptor.sessionhub;\n\n    // Auto-detect TLS: use secure for non-localhost, insecure for localhost\n    const isLocalhostForTls =\n      this.backendUrl.startsWith(\"localhost\") ||\n      this.backendUrl.startsWith(\"127.0.0.1\");\n    const shouldUseTls = useTls ?? !isLocalhostForTls;\n\n    const credentials = shouldUseTls\n      ? grpc.credentials.createSsl()\n      : grpc.credentials.createInsecure();\n\n    this.client = new sessionhub.SessionHubService(\n      this.backendUrl,\n      credentials,\n    );\n\n    logger.info(\n      `gRPC client connected to ${this.backendUrl} (TLS: ${shouldUseTls})`,\n    );\n  }\n\n  private getMetadata(): grpc.Metadata {\n    const metadata = new grpc.Metadata();\n    metadata.add(\"authorization\", `Bearer ${this.apiKey}`);\n    return metadata;\n  }\n\n  /**\n   * Create a deadline for gRPC calls to prevent indefinite hangs\n   * @param timeoutSeconds Timeout in seconds (default: 30)\n   */\n  private getDeadline(timeoutSeconds: number = 30): Date {\n    const deadline = new Date();\n    deadline.setSeconds(deadline.getSeconds() + timeoutSeconds);\n    return deadline;\n  }\n\n  /**\n   * Check if an error is a \"not found\" type error that should resolve to null\n   */\n  private isNotFoundError(error: grpc.ServiceError): boolean {\n    return error.code === grpc.status.NOT_FOUND;\n  }\n\n  /**\n   * Get a user-friendly error message based on gRPC error code\n   */\n  private getErrorMessage(error: grpc.ServiceError, operation: string): string {\n    switch (error.code) {\n      case grpc.status.UNAVAILABLE:\n        return `Cannot reach SessionHub server. Check your internet connection and try again.`;\n      case grpc.status.DEADLINE_EXCEEDED:\n        return `Request timed out. The server may be busy - please try again.`;\n      case grpc.status.UNAUTHENTICATED:\n        return `Invalid API key. Run /sessionhub:setup with a valid key from https://sessionhub.dev/settings`;\n      case grpc.status.PERMISSION_DENIED:\n        return `Access denied. Your API key may not have permission for this operation.`;\n      case grpc.status.RESOURCE_EXHAUSTED:\n        return `Rate limit exceeded or quota exhausted. Please try again later.`;\n      case grpc.status.INTERNAL:\n        return `Server error. Please try again or contact support if the issue persists.`;\n      default:\n        return `${operation} failed: ${error.message}`;\n    }\n  }\n\n  private transformAttachmentMetadata(attachments: any[]): any[] {\n    return attachments.map((att) => ({\n      type: att.type || \"image\",\n      storage_path: att.storagePath || att.storage_path || \"\",\n      public_url: att.publicUrl || att.public_url || \"\",\n      media_type: att.mediaType || att.media_type || \"\",\n      filename: att.filename || \"\",\n      size_bytes: att.sizeBytes || att.size_bytes || 0,\n      interaction_index: att.interactionIndex ?? att.interaction_index ?? 0,\n      uploaded_at:\n        att.uploadedAt || att.uploaded_at || new Date().toISOString(),\n    }));\n  }\n\n  async validateApiKey(): Promise<UserInfo | null> {\n    return new Promise((resolve, reject) => {\n      this.client.validateApiKey(\n        { api_key: this.apiKey },\n        { deadline: this.getDeadline() },\n        (error: grpc.ServiceError | null, response: any) => {\n          if (error) {\n            // NOT_FOUND or UNAUTHENTICATED means invalid API key - expected, return null\n            if (\n              this.isNotFoundError(error) ||\n              error.code === grpc.status.UNAUTHENTICATED\n            ) {\n              resolve(null);\n              return;\n            }\n            // Other errors (timeout, unavailable) should reject with friendly message\n            reject(\n              new Error(this.getErrorMessage(error, \"API key validation\")),\n            );\n            return;\n          }\n\n          resolve({\n            userId: response.user_id,\n            email: response.email,\n            subscriptionTier: response.subscription_tier,\n          });\n        },\n      );\n    });\n  }\n\n  async getProjects(): Promise<any[]> {\n    return new Promise((resolve, reject) => {\n      this.client.getProjects(\n        {},\n        this.getMetadata(),\n        { deadline: this.getDeadline() },\n        (error: grpc.ServiceError | null, response: any) => {\n          if (error) {\n            // Return empty array for not found, reject for other errors\n            if (this.isNotFoundError(error)) {\n              resolve([]);\n              return;\n            }\n            reject(new Error(`Failed to get projects: ${error.message}`));\n            return;\n          }\n\n          const projects = response.projects.map((p: any) => ({\n            id: p.id,\n            name: p.name,\n            display_name: p.display_name,\n            description: p.description,\n            user_id: p.user_id,\n            created_at: p.created_at,\n            updated_at: p.updated_at,\n            last_activity_at: p.last_activity_at,\n            archived: p.archived,\n            metadata: p.metadata,\n            git_remote: p.git_remote,\n            github_repo_name: p.github_repo_name,\n            github_repo_owner: p.github_repo_owner,\n            github_repo_id: p.github_repo_id,\n            github_default_branch: p.github_default_branch,\n            github_connected_at: p.github_connected_at,\n            // Encryption mode: \"enhanced\" (default), \"hybrid_e2e\", or \"full_e2e\"\n            encryption_mode: p.encryption_mode || \"enhanced\",\n          }));\n\n          resolve(projects);\n        },\n      );\n    });\n  }\n\n  async createProject(projectData: {\n    name: string;\n    display_name: string;\n    description?: string;\n    git_remote?: string;\n    metadata?: Record<string, any>;\n  }): Promise<any | null> {\n    return new Promise((resolve, reject) => {\n      this.client.createProject(\n        projectData,\n        this.getMetadata(),\n        { deadline: this.getDeadline() },\n        (error: grpc.ServiceError | null, response: any) => {\n          if (error) {\n            reject(new Error(`Failed to create project: ${error.message}`));\n            return;\n          }\n\n          resolve({\n            id: response.id,\n            name: response.name,\n            display_name: response.display_name,\n            ...response,\n          });\n        },\n      );\n    });\n  }\n\n  private determineSessionType(\n    sessionName?: string,\n    gitBranch?: string,\n  ): string {\n    const text = `${sessionName || \"\"} ${gitBranch || \"\"}`.toLowerCase();\n\n    if (\n      text.includes(\"bug\") ||\n      text.includes(\"fix\") ||\n      text.includes(\"hotfix\")\n    ) {\n      return \"bugfix\";\n    }\n    if (text.includes(\"refactor\")) {\n      return \"refactor\";\n    }\n    if (text.includes(\"explore\") || text.includes(\"experiment\")) {\n      return \"exploration\";\n    }\n    if (text.includes(\"debug\")) {\n      return \"debugging\";\n    }\n    if (text.includes(\"feature\")) {\n      return \"feature\";\n    }\n\n    return \"feature\";\n  }\n\n  async createSession(sessionData: SessionApiData): Promise<string | null> {\n    return new Promise((resolve, reject) => {\n      const serializedMetadata: Record<string, string> = {};\n      if (sessionData.metadata) {\n        for (const [key, value] of Object.entries(sessionData.metadata)) {\n          if (typeof value === \"string\") {\n            serializedMetadata[key] = value;\n          } else if (typeof value === \"number\" || typeof value === \"boolean\") {\n            serializedMetadata[key] = String(value);\n          } else if (value === null || value === undefined) {\n            serializedMetadata[key] = String(value);\n          } else {\n            serializedMetadata[key] = JSON.stringify(value);\n          }\n        }\n      }\n\n      const transformedTodoSnapshots =\n        sessionData.todo_snapshots && sessionData.todo_snapshots.length > 0\n          ? sessionData.todo_snapshots\n              .filter(\n                (snapshot) =>\n                  snapshot.timestamp &&\n                  Array.isArray(snapshot.todos) &&\n                  snapshot.todos.length > 0,\n              )\n              .map((snapshot) => ({\n                timestamp: snapshot.timestamp,\n                todos: snapshot.todos.map((todo) => ({\n                  content: todo.content,\n                  status: todo.status,\n                  active_form: todo.activeForm,\n                })),\n              }))\n          : [];\n\n      const sessionType = this.determineSessionType(\n        sessionData.name,\n        sessionData.git_branch,\n      );\n\n      const subSessionsJson =\n        sessionData.sub_sessions && sessionData.sub_sessions.length > 0\n          ? JSON.stringify(sessionData.sub_sessions)\n          : undefined;\n\n      const request = {\n        project_name: sessionData.project_name,\n        project_path: sessionData.project_path,\n        start_time: sessionData.start_time,\n        end_time: sessionData.end_time,\n        name: sessionData.name,\n        tool_name: sessionData.tool_name,\n        git_branch: sessionData.git_branch,\n        type: sessionType,\n        input_tokens: sessionData.input_tokens || 0,\n        output_tokens: sessionData.output_tokens || 0,\n        cache_create_tokens: sessionData.cache_create_tokens || 0,\n        cache_read_tokens: sessionData.cache_read_tokens || 0,\n        todo_snapshots: transformedTodoSnapshots,\n        attachment_urls:\n          sessionData.attachment_urls && sessionData.attachment_urls.length > 0\n            ? this.transformAttachmentMetadata(sessionData.attachment_urls)\n            : [],\n        sub_sessions_json: subSessionsJson,\n        interactions: sessionData.interactions || [],\n        metadata: serializedMetadata,\n      };\n\n      this.client.createSession(\n        request,\n        this.getMetadata(),\n        { deadline: this.getDeadline(60) }, // Longer timeout for session creation\n        (error: grpc.ServiceError | null, response: any) => {\n          if (error) {\n            reject(new Error(`Failed to create session: ${error.message}`));\n            return;\n          }\n\n          logger.info(`Session created: ${response.session_id}`);\n          resolve(response.session_id);\n        },\n      );\n    });\n  }\n\n  async upsertSession(sessionData: SessionApiData): Promise<{\n    sessionId: string | null;\n    wasUpdated: boolean;\n    newInteractionsCount: number;\n    analysisTriggered: boolean;\n    observationsTriggered: boolean;\n  }> {\n    // STEP 1: Get the project to check its encryption mode\n    // Only encrypt for hybrid_e2e and full_e2e modes, NOT for enhanced mode\n    let encryptionMode = \"enhanced\"; // Default to enhanced (no E2E encryption)\n\n    try {\n      const projects = await this.getProjects();\n      const project = projects.find(\n        (p: any) => p.name === sessionData.project_name,\n      );\n      if (project) {\n        encryptionMode = project.encryption_mode || \"enhanced\";\n        logger.info(`Project encryption mode: ${encryptionMode}`);\n      } else {\n        // Project doesn't exist yet - will be created with default mode (enhanced)\n        logger.info(\n          \"Project not found, will use default encryption mode (enhanced)\",\n        );\n      }\n    } catch (error) {\n      logger.warn(\n        \"Failed to fetch projects for encryption mode check, using enhanced:\",\n        error,\n      );\n    }\n\n    // STEP 2: Only encrypt for E2E modes (hybrid_e2e or full_e2e)\n    const shouldEncrypt =\n      encryptionMode === \"hybrid_e2e\" || encryptionMode === \"full_e2e\";\n    let publicKey: string | null = null;\n    let keyVersion = 0;\n    let encryptedFields: any = null;\n\n    if (shouldEncrypt) {\n      try {\n        // Prefer team public key for E2E encryption\n        const teamKeyData = await this.getPrimaryTeamKey();\n        if (\n          teamKeyData?.publicKey &&\n          (await isValidPublicKey(teamKeyData.publicKey))\n        ) {\n          publicKey = teamKeyData.publicKey;\n          keyVersion = teamKeyData.keyVersion;\n          logger.info(\n            `Using team encryption key for E2E mode: ${encryptionMode}`,\n          );\n        } else {\n          // Fallback to user's key for legacy personal sessions\n          const keyData = await this.getUserPublicKey();\n          if (\n            keyData?.publicKey &&\n            (await isValidPublicKey(keyData.publicKey))\n          ) {\n            publicKey = keyData.publicKey;\n            keyVersion = keyData.keyVersion;\n            logger.warn(\n              `Falling back to personal encryption key for E2E mode: ${encryptionMode}`,\n            );\n          }\n        }\n\n        // E2E mode requires a valid encryption key - fail fast if missing\n        if (!publicKey) {\n          throw new Error(\n            `E2E encryption mode (${encryptionMode}) requires a valid team or user key, but none was found. Please configure encryption keys in SessionHub settings.`,\n          );\n        }\n\n        // Encrypt sensitive fields\n        encryptedFields = await encryptSessionFields(\n          {\n            interactions: sessionData.interactions,\n            todoSnapshots: sessionData.todo_snapshots,\n            subSessions: sessionData.sub_sessions,\n            attachmentUrls: sessionData.attachment_urls,\n          },\n          publicKey,\n        );\n        logger.info(\"Session data encrypted successfully\");\n      } catch (error) {\n        // For E2E modes, encryption failure is critical - do NOT continue with plaintext\n        const errorMessage =\n          error instanceof Error ? error.message : String(error);\n        logger.error(\n          `Failed to encrypt session data for ${encryptionMode} mode:`,\n          error,\n        );\n        throw new Error(\n          `Encryption required for ${encryptionMode} mode but failed: ${errorMessage}`,\n        );\n      }\n    } else {\n      // Enhanced mode: send plaintext (Supabase encrypts at rest automatically)\n      logger.info(\n        \"Enhanced mode: sending plaintext (server handles encryption at rest)\",\n      );\n    }\n\n    return new Promise((resolve, reject) => {\n      const serializedMetadata: Record<string, string> = {};\n      if (sessionData.metadata) {\n        for (const [key, value] of Object.entries(sessionData.metadata)) {\n          if (typeof value === \"string\") {\n            serializedMetadata[key] = value;\n          } else if (typeof value === \"number\" || typeof value === \"boolean\") {\n            serializedMetadata[key] = String(value);\n          } else if (value === null || value === undefined) {\n            serializedMetadata[key] = String(value);\n          } else {\n            serializedMetadata[key] = JSON.stringify(value);\n          }\n        }\n      }\n\n      const transformedTodoSnapshots =\n        sessionData.todo_snapshots && sessionData.todo_snapshots.length > 0\n          ? sessionData.todo_snapshots\n              .filter(\n                (snapshot) =>\n                  snapshot.timestamp &&\n                  Array.isArray(snapshot.todos) &&\n                  snapshot.todos.length > 0,\n              )\n              .map((snapshot) => ({\n                timestamp: snapshot.timestamp,\n                todos: snapshot.todos.map((todo) => ({\n                  content: todo.content,\n                  status: todo.status,\n                  active_form: todo.activeForm,\n                })),\n              }))\n          : [];\n\n      const sessionType = this.determineSessionType(\n        sessionData.name,\n        sessionData.git_branch,\n      );\n\n      const subSessionsJson =\n        sessionData.sub_sessions && sessionData.sub_sessions.length > 0\n          ? JSON.stringify(sessionData.sub_sessions)\n          : undefined;\n\n      // Build request - if encrypted, send encrypted fields and mark plaintext fields as empty\n      const isEncrypted = encryptedFields !== null;\n\n      const request: any = {\n        project_name: sessionData.project_name,\n        project_path: sessionData.project_path,\n        start_time: sessionData.start_time,\n        end_time: sessionData.end_time,\n        name: sessionData.name,\n        tool_name: sessionData.tool_name,\n        git_branch: sessionData.git_branch,\n        type: sessionType,\n        input_tokens: sessionData.input_tokens || 0,\n        output_tokens: sessionData.output_tokens || 0,\n        cache_create_tokens: sessionData.cache_create_tokens || 0,\n        cache_read_tokens: sessionData.cache_read_tokens || 0,\n        metadata: serializedMetadata,\n      };\n      // Plan slug - content is uploaded separately via UploadPlanFile RPC\n      if (sessionData.plan_slug) {\n        request.plan_slug = sessionData.plan_slug;\n      }\n\n      if (isEncrypted) {\n        // Send encrypted data\n        request.encryption_status = \"encrypted\";\n        request.encryption_version = keyVersion;\n        request.encrypted_interactions = encryptedFields.encryptedInteractions;\n        request.encrypted_todo_snapshots =\n          encryptedFields.encryptedTodoSnapshots;\n        request.encrypted_sub_sessions = encryptedFields.encryptedSubSessions;\n        request.encrypted_attachment_urls =\n          encryptedFields.encryptedAttachmentUrls;\n        // Empty arrays for plaintext fields (backend stores encrypted versions)\n        request.todo_snapshots = [];\n        request.attachment_urls = [];\n        request.interactions = [];\n        request.sub_sessions_json = undefined;\n      } else {\n        // Send plaintext data\n        request.encryption_status = \"plaintext\";\n        request.encryption_version = 0;\n        request.todo_snapshots = transformedTodoSnapshots;\n        request.attachment_urls =\n          sessionData.attachment_urls && sessionData.attachment_urls.length > 0\n            ? this.transformAttachmentMetadata(sessionData.attachment_urls)\n            : [];\n        request.sub_sessions_json = subSessionsJson;\n        request.interactions = (sessionData.interactions || []).map(\n          (int: any) => {\n            const serializedInteractionMetadata: Record<string, string> = {};\n            if (int.metadata) {\n              for (const [key, value] of Object.entries(int.metadata)) {\n                if (typeof value === \"string\") {\n                  serializedInteractionMetadata[key] = value;\n                } else if (\n                  typeof value === \"number\" ||\n                  typeof value === \"boolean\"\n                ) {\n                  serializedInteractionMetadata[key] = String(value);\n                } else if (value === null || value === undefined) {\n                  serializedInteractionMetadata[key] = String(value);\n                } else {\n                  serializedInteractionMetadata[key] = JSON.stringify(value);\n                }\n              }\n            }\n            return {\n              timestamp: int.timestamp,\n              interaction_type: int.interaction_type,\n              content: int.content,\n              tool_name: int.tool_name,\n              metadata: serializedInteractionMetadata,\n              input_tokens: int.input_tokens || 0,\n              output_tokens: int.output_tokens || 0,\n            };\n          },\n        );\n      }\n\n      this.client.upsertSession(\n        request,\n        this.getMetadata(),\n        { deadline: this.getDeadline(60) }, // Longer timeout for session upsert\n        (error: grpc.ServiceError | null, response: any) => {\n          if (error) {\n            reject(new Error(`Failed to upsert session: ${error.message}`));\n            return;\n          }\n\n          const action = response.was_updated ? \"updated\" : \"created\";\n          const encryptionNote = isEncrypted ? \" (encrypted)\" : \"\";\n          logger.info(\n            `Session ${action}: ${response.session_id} (${response.new_interactions_count} interactions)${encryptionNote}`,\n          );\n          if (response.analysis_triggered) {\n            logger.info(\"Analysis triggered based on user preferences\");\n          }\n          if (response.observations_triggered) {\n            logger.info(\n              \"Observations extraction triggered based on user preferences\",\n            );\n          }\n          resolve({\n            sessionId: response.session_id,\n            wasUpdated: response.was_updated,\n            newInteractionsCount: response.new_interactions_count || 0,\n            analysisTriggered: response.analysis_triggered || false,\n            observationsTriggered: response.observations_triggered || false,\n          });\n        },\n      );\n    });\n  }\n\n  async updateSessionEndTime(\n    sessionId: string,\n    endTime: string,\n  ): Promise<boolean> {\n    return new Promise((resolve, reject) => {\n      this.client.updateSession(\n        {\n          session_id: sessionId,\n          end_time: endTime,\n        },\n        this.getMetadata(),\n        { deadline: this.getDeadline() },\n        (error: grpc.ServiceError | null, response: any) => {\n          if (error) {\n            reject(new Error(`Failed to update session: ${error.message}`));\n            return;\n          }\n\n          logger.info(`Session end time updated: ${sessionId}`);\n          resolve(true);\n        },\n      );\n    });\n  }\n\n  async addInteractionsBatch(\n    sessionId: string,\n    interactions: ApiInteractionData[],\n    chunkSize: number = 500,\n  ): Promise<{ success: boolean; processed: number; failed: number }> {\n    let totalProcessed = 0;\n    let totalFailed = 0;\n\n    for (let i = 0; i < interactions.length; i += chunkSize) {\n      const chunk = interactions.slice(i, i + chunkSize);\n\n      const result = await new Promise<{ processed: number; failed: number }>(\n        (resolve, reject) => {\n          this.client.addInteractionsBatch(\n            {\n              session_id: sessionId,\n              interactions: chunk.map((int) => {\n                const serializedMetadata: Record<string, string> = {};\n                if (int.metadata) {\n                  for (const [key, value] of Object.entries(int.metadata)) {\n                    if (typeof value === \"string\") {\n                      serializedMetadata[key] = value;\n                    } else if (\n                      typeof value === \"number\" ||\n                      typeof value === \"boolean\"\n                    ) {\n                      serializedMetadata[key] = String(value);\n                    } else if (value === null || value === undefined) {\n                      serializedMetadata[key] = String(value);\n                    } else {\n                      serializedMetadata[key] = JSON.stringify(value);\n                    }\n                  }\n                }\n\n                return {\n                  timestamp: int.timestamp,\n                  interaction_type: int.interaction_type,\n                  content: int.content,\n                  tool_name: int.tool_name,\n                  metadata: serializedMetadata,\n                  input_tokens: int.input_tokens || 0,\n                  output_tokens: int.output_tokens || 0,\n                };\n              }),\n            },\n            this.getMetadata(),\n            { deadline: this.getDeadline(60) }, // Longer timeout for batch operations\n            (error: grpc.ServiceError | null, response: any) => {\n              if (error) {\n                logger.error(\n                  `Batch ${Math.floor(i / chunkSize) + 1} failed: ${error.message}`,\n                );\n                // Don't reject, just return failed count to allow other batches to continue\n                resolve({ processed: 0, failed: chunk.length });\n                return;\n              }\n\n              logger.info(\n                `Batch ${Math.floor(i / chunkSize) + 1}: ${response.processed} processed`,\n              );\n              resolve({\n                processed: response.processed,\n                failed: response.failed,\n              });\n            },\n          );\n        },\n      );\n\n      totalProcessed += result.processed;\n      totalFailed += result.failed;\n    }\n\n    return {\n      success: totalFailed === 0,\n      processed: totalProcessed,\n      failed: totalFailed,\n    };\n  }\n\n  async streamInteractions(\n    sessionId: string,\n    interactions: ApiInteractionData[],\n  ): Promise<{ success: boolean; processed: number; failed: number }> {\n    return new Promise((resolve, reject) => {\n      const call = this.client.streamInteractions(\n        this.getMetadata(),\n        (error: grpc.ServiceError | null, response: any) => {\n          if (error) {\n            logger.debug(`Stream failed: ${error.message}`);\n            reject(error);\n            return;\n          }\n\n          logger.info(`Stream complete: ${response.processed} processed`);\n          resolve({\n            success: response.success,\n            processed: response.processed,\n            failed: response.failed,\n          });\n        },\n      );\n\n      for (const interaction of interactions) {\n        const serializedMetadata: Record<string, string> = {};\n        if (interaction.metadata) {\n          for (const [key, value] of Object.entries(interaction.metadata)) {\n            if (typeof value === \"string\") {\n              serializedMetadata[key] = value;\n            } else if (\n              typeof value === \"number\" ||\n              typeof value === \"boolean\"\n            ) {\n              serializedMetadata[key] = String(value);\n            } else if (value === null || value === undefined) {\n              serializedMetadata[key] = String(value);\n            } else {\n              serializedMetadata[key] = JSON.stringify(value);\n            }\n          }\n        }\n\n        call.write({\n          session_id: sessionId,\n          interaction: {\n            timestamp: interaction.timestamp,\n            interaction_type: interaction.interaction_type,\n            content: interaction.content,\n            tool_name: interaction.tool_name,\n            metadata: serializedMetadata,\n            input_tokens: interaction.input_tokens || 0,\n            output_tokens: interaction.output_tokens || 0,\n          },\n        });\n      }\n\n      call.end();\n    });\n  }\n\n  async close(): Promise<void> {\n    this.client.close();\n  }\n\n  /**\n   * Get user preferences from the backend\n   */\n  async getUserPreferences(): Promise<{\n    autoAnalysis: boolean;\n    autoObservations: boolean;\n    contextInjection: boolean;\n    contextInjectionLimit: number;\n    contextInjectionMaxTokens: number;\n    contextInjectionFullDetailsCount: number;\n    autoSaveSession: boolean;\n  } | null> {\n    return new Promise((resolve, reject) => {\n      this.client.getUserPreferences(\n        {},\n        this.getMetadata(),\n        { deadline: this.getDeadline() },\n        (error: grpc.ServiceError | null, response: any) => {\n          if (error) {\n            // NOT_FOUND is acceptable - return null\n            if (this.isNotFoundError(error)) {\n              resolve(null);\n              return;\n            }\n            reject(\n              new Error(`Failed to get user preferences: ${error.message}`),\n            );\n            return;\n          }\n\n          resolve({\n            autoAnalysis: response.auto_analysis,\n            autoObservations: response.auto_observations,\n            contextInjection: response.context_injection,\n            contextInjectionLimit: response.context_injection_limit || 50,\n            contextInjectionMaxTokens:\n              response.context_injection_max_tokens || 2500,\n            contextInjectionFullDetailsCount:\n              response.context_injection_full_details_count || 5,\n            autoSaveSession: response.auto_save_session ?? true, // Default to enabled\n          });\n        },\n      );\n    });\n  }\n\n  /**\n   * Upload an attachment to storage via the backend\n   */\n  async uploadAttachment(\n    sessionId: string,\n    interactionIndex: number,\n    base64Data: string,\n    mediaType: string,\n    filename?: string,\n  ): Promise<{\n    success: boolean;\n    storagePath?: string;\n    publicUrl?: string;\n    error?: string;\n  }> {\n    return new Promise((resolve, reject) => {\n      this.client.uploadAttachment(\n        {\n          session_id: sessionId,\n          interaction_index: interactionIndex,\n          base64_data: base64Data,\n          media_type: mediaType,\n          filename: filename,\n        },\n        this.getMetadata(),\n        { deadline: this.getDeadline(60) }, // Longer timeout for file uploads\n        (error: grpc.ServiceError | null, response: any) => {\n          if (error) {\n            // For upload failures, resolve with error info instead of rejecting\n            // This allows callers to handle failures gracefully\n            resolve({ success: false, error: error.message });\n            return;\n          }\n\n          if (!response.success) {\n            resolve({ success: false, error: response.error });\n            return;\n          }\n\n          resolve({\n            success: true,\n            storagePath: response.storage_path,\n            publicUrl: response.public_url,\n          });\n        },\n      );\n    });\n  }\n\n  /**\n   * Upload a plan file to storage\n   * Storage path: {teamId}/plans/{sessionId}/{slug}.md\n   */\n  async uploadPlanFile(\n    sessionId: string,\n    slug: string,\n    content: string,\n  ): Promise<{\n    success: boolean;\n    error?: string;\n  }> {\n    return new Promise((resolve, reject) => {\n      // Convert string content to bytes (Buffer)\n      const fileData = Buffer.from(content, \"utf-8\");\n\n      this.client.uploadPlanFile(\n        {\n          session_id: sessionId,\n          slug: slug,\n          file_data: fileData,\n        },\n        this.getMetadata(),\n        { deadline: this.getDeadline(60) }, // Longer timeout for file uploads\n        (error: grpc.ServiceError | null, response: any) => {\n          if (error) {\n            // For upload failures, resolve with error info instead of rejecting\n            // This allows callers to handle failures gracefully\n            resolve({ success: false, error: error.message });\n            return;\n          }\n\n          if (!response.success) {\n            resolve({ success: false, error: response.error });\n            return;\n          }\n\n          resolve({ success: true });\n        },\n      );\n    });\n  }\n\n  /**\n   * Get project observations for context injection\n   */\n  async getProjectObservations(\n    projectId: string,\n    limit?: number,\n  ): Promise<{\n    observations: Array<{\n      id: string;\n      sessionId: string;\n      projectId: string;\n      type: string;\n      title: string;\n      subtitle?: string;\n      narrative: string;\n      facts: string[];\n      concepts: string[];\n      files: string[];\n      toolName?: string;\n      createdAt: string;\n    }>;\n    totalCount: number;\n  } | null> {\n    return new Promise((resolve, reject) => {\n      this.client.getProjectObservations(\n        {\n          project_id: projectId,\n          limit: limit,\n        },\n        this.getMetadata(),\n        { deadline: this.getDeadline() },\n        (error: grpc.ServiceError | null, response: any) => {\n          if (error) {\n            // NOT_FOUND is acceptable - return null (no observations yet)\n            if (this.isNotFoundError(error)) {\n              resolve(null);\n              return;\n            }\n            reject(\n              new Error(`Failed to get project observations: ${error.message}`),\n            );\n            return;\n          }\n\n          const observations = (response.observations || []).map(\n            (obs: any) => ({\n              id: obs.id,\n              sessionId: obs.session_id,\n              projectId: obs.project_id,\n              type: obs.type,\n              title: obs.title,\n              subtitle: obs.subtitle,\n              narrative: obs.narrative,\n              facts: obs.facts || [],\n              concepts: obs.concepts || [],\n              files: obs.files || [],\n              toolName: obs.tool_name,\n              createdAt: obs.created_at,\n            }),\n          );\n\n          resolve({\n            observations,\n            totalCount: response.total_count || observations.length,\n          });\n        },\n      );\n    });\n  }\n\n  /**\n   * Get the authenticated user's public key for encryption\n   * Used for personal (non-team) session encryption or legacy fallback\n   */\n  async getUserPublicKey(): Promise<{\n    publicKey: string;\n    keyVersion: number;\n  } | null> {\n    return new Promise((resolve, reject) => {\n      this.client.getUserPublicKey(\n        {},\n        this.getMetadata(),\n        { deadline: this.getDeadline() },\n        (error: grpc.ServiceError | null, response: any) => {\n          if (error) {\n            // NOT_FOUND means user has no key configured\n            if (this.isNotFoundError(error)) {\n              resolve(null);\n              return;\n            }\n            reject(\n              new Error(this.getErrorMessage(error, \"Get user public key\")),\n            );\n            return;\n          }\n\n          resolve({\n            publicKey: response.public_key,\n            keyVersion: response.key_version || 1,\n          });\n        },\n      );\n    });\n  }\n\n  private isTeamKeyCacheFresh(): boolean {\n    if (!this.teamKeyCache) {\n      return false;\n    }\n\n    return Date.now() - this.teamKeyCache.fetchedAt < this.teamKeyCacheTtlMs;\n  }\n\n  async listUserTeams(): Promise<\n    Array<{ id: string; name?: string; slug?: string }>\n  > {\n    return new Promise((resolve, reject) => {\n      this.client.listUserTeams(\n        {},\n        this.getMetadata(),\n        { deadline: this.getDeadline() },\n        (error: grpc.ServiceError | null, response: any) => {\n          if (error) {\n            if (this.isNotFoundError(error)) {\n              resolve([]);\n              return;\n            }\n            reject(new Error(this.getErrorMessage(error, \"List user teams\")));\n            return;\n          }\n\n          const teams = (response.teams || []).map((team: any) => ({\n            id: team.id,\n            name: team.name,\n            slug: team.slug,\n          }));\n\n          resolve(teams);\n        },\n      );\n    });\n  }\n\n  async getTeamPublicKey(teamId: string): Promise<{\n    publicKey: string;\n    keyVersion: number;\n  } | null> {\n    return new Promise((resolve, reject) => {\n      this.client.getTeamPublicKey(\n        { team_id: teamId },\n        this.getMetadata(),\n        { deadline: this.getDeadline() },\n        (error: grpc.ServiceError | null, response: any) => {\n          if (error) {\n            if (this.isNotFoundError(error)) {\n              resolve(null);\n              return;\n            }\n            reject(\n              new Error(this.getErrorMessage(error, \"Get team public key\")),\n            );\n            return;\n          }\n\n          resolve({\n            publicKey: response.public_key,\n            keyVersion: response.key_version || 1,\n          });\n        },\n      );\n    });\n  }\n\n  private async getPrimaryTeamKey(): Promise<{\n    teamId: string;\n    publicKey: string;\n    keyVersion: number;\n  } | null> {\n    if (this.isTeamKeyCacheFresh()) {\n      return this.teamKeyCache;\n    }\n\n    try {\n      const teams = await this.listUserTeams();\n      if (!teams.length) {\n        return null;\n      }\n\n      if (teams.length > 1) {\n        logger.warn(\n          `Multiple teams detected (${teams.length}). Using the first team for encryption.`,\n        );\n      }\n\n      const teamId = teams[0].id;\n      const keyData = await this.getTeamPublicKey(teamId);\n      if (!keyData?.publicKey) {\n        return null;\n      }\n\n      this.teamKeyCache = {\n        teamId,\n        publicKey: keyData.publicKey,\n        keyVersion: keyData.keyVersion,\n        fetchedAt: Date.now(),\n      };\n\n      return this.teamKeyCache;\n    } catch (error) {\n      logger.warn(\"Failed to resolve team encryption key:\", error);\n      return null;\n    }\n  }\n\n  /**\n   * Get approved team skills for syncing to plugin as SKILL.md files.\n   * Only returns approved, team-visible, non-sensitive skills.\n   */\n  async getTeamSkills(\n    teamId: string,\n    projectId?: string,\n    scope?: string,\n  ): Promise<\n    Array<{\n      id: string;\n      slug: string;\n      title: string;\n      summary?: string;\n      content: string;\n      category: string;\n      tags: string[];\n      scope: string;\n      version: number;\n      lastPublishedAt?: string;\n      projectId?: string;\n      files?: Record<string, string>;\n    }>\n  > {\n    return new Promise((resolve, reject) => {\n      const request: any = { team_id: teamId };\n      if (projectId) request.project_id = projectId;\n      if (scope) request.scope = scope;\n\n      this.client.getTeamSkills(\n        request,\n        this.getMetadata(),\n        { deadline: this.getDeadline() },\n        (error: grpc.ServiceError | null, response: any) => {\n          if (error) {\n            if (this.isNotFoundError(error)) {\n              resolve([]);\n              return;\n            }\n            reject(new Error(this.getErrorMessage(error, \"Get team skills\")));\n            return;\n          }\n\n          const skills = (response.skills || []).map((s: any) => ({\n            id: s.id,\n            slug: s.slug,\n            title: s.title,\n            summary: s.summary || undefined,\n            content: s.content,\n            category: s.category,\n            tags: s.tags || [],\n            scope: s.scope,\n            version: s.version || 1,\n            lastPublishedAt: s.last_published_at || undefined,\n            projectId: s.project_id || undefined,\n            files:\n              s.files && Object.keys(s.files).length > 0 ? s.files : undefined,\n          }));\n\n          resolve(skills);\n        },\n      );\n    });\n  }\n\n  /**\n   * Create a new team skill draft from a local file (plugin \u2192 team push).\n   * The skill appears in the web UI as a draft for review.\n   */\n  async createTeamSkill(input: {\n    teamId: string;\n    projectId?: string;\n    title: string;\n    content: string;\n    summary?: string;\n    category?: string;\n    tags?: string[];\n    scope?: string;\n    files?: Record<string, string>;\n  }): Promise<{ skillId: string; slug: string }> {\n    return new Promise((resolve, reject) => {\n      const request: any = {\n        team_id: input.teamId,\n        title: input.title,\n        content: input.content,\n      };\n      if (input.projectId) request.project_id = input.projectId;\n      if (input.summary) request.summary = input.summary;\n      if (input.category) request.category = input.category;\n      if (input.tags && input.tags.length > 0) request.tags = input.tags;\n      if (input.scope) request.scope = input.scope;\n      if (input.files && Object.keys(input.files).length > 0)\n        request.files = input.files;\n\n      this.client.createTeamSkill(\n        request,\n        this.getMetadata(),\n        { deadline: this.getDeadline() },\n        (error: grpc.ServiceError | null, response: any) => {\n          if (error) {\n            reject(new Error(this.getErrorMessage(error, \"Create team skill\")));\n            return;\n          }\n\n          resolve({\n            skillId: response.skill_id,\n            slug: response.slug,\n          });\n        },\n      );\n    });\n  }\n\n  /**\n   * Get session quota information for the current user\n   * Returns current session count, limit, and remaining capacity\n   */\n  async getSessionQuota(): Promise<{\n    currentCount: number;\n    limit: number;\n    remaining: number;\n    subscriptionTier: string;\n  } | null> {\n    return new Promise((resolve, reject) => {\n      this.client.getSessionQuota(\n        {},\n        this.getMetadata(),\n        { deadline: this.getDeadline() },\n        (error: grpc.ServiceError | null, response: any) => {\n          if (error) {\n            // NOT_FOUND means no quota info - shouldn't happen but handle gracefully\n            if (this.isNotFoundError(error)) {\n              resolve(null);\n              return;\n            }\n            reject(new Error(`Failed to get session quota: ${error.message}`));\n            return;\n          }\n\n          resolve({\n            currentCount: response.current_count || 0,\n            limit: response.limit || 0,\n            remaining: response.remaining || 0,\n            subscriptionTier: response.subscription_tier || \"free\",\n          });\n        },\n      );\n    });\n  }\n}\n\n// ============================================================================\n// Session Limit Error Handling Utilities\n// ============================================================================\n\n/**\n * Parsed session limit error information\n */\nexport interface SessionLimitError {\n  type: \"session_limit_exceeded\";\n  currentCount: number;\n  limit: number;\n  upgradeUrl: string;\n}\n\n/**\n * Parse a session limit exceeded error from the backend\n * Returns null if the error is not a session limit error\n */\nexport function parseSessionLimitError(error: Error): SessionLimitError | null {\n  const message = error.message || \"\";\n  const match = message.match(\n    /session_limit_exceeded:current=(\\d+):limit=(\\d+):upgrade_url=(.+)/,\n  );\n  if (match) {\n    return {\n      type: \"session_limit_exceeded\",\n      currentCount: parseInt(match[1], 10),\n      limit: parseInt(match[2], 10),\n      upgradeUrl: match[3],\n    };\n  }\n  return null;\n}\n\n/**\n * Check if an error is a gRPC RESOURCE_EXHAUSTED error (code 8)\n */\nexport function isResourceExhaustedError(error: any): boolean {\n  return error?.code === 8; // grpc.status.RESOURCE_EXHAUSTED = 8\n}\n\n// ============================================================================\n// Onboarding Error Handling Utilities\n// ============================================================================\n\n/**\n * Parsed onboarding error information\n */\nexport interface OnboardingError {\n  type: \"onboarding_required\";\n  message: string;\n}\n\n/**\n * Parse an onboarding error from the backend\n * Returns null if the error is not an onboarding error\n */\nexport function parseOnboardingError(error: Error): OnboardingError | null {\n  const message = error.message || \"\";\n  if (\n    message.includes(\"no team found\") ||\n    message.includes(\"complete onboarding\")\n  ) {\n    return {\n      type: \"onboarding_required\",\n      message:\n        \"Please complete onboarding at https://sessionhub.dev to create or join a team\",\n    };\n  }\n  return null;\n}\n", "/**\n * Encryption module for E2E encrypted session data\n *\n * Uses hybrid encryption (AES-GCM + RSA-OAEP) to encrypt session content\n * before sending to the backend. Compatible with frontend decryption.\n *\n * Encryption flow:\n * 1. Generate random AES-256 key\n * 2. Encrypt content with AES-GCM\n * 3. Encrypt AES key with team/user public RSA key\n * 4. Return encrypted payload\n */\n\nimport * as crypto from 'crypto';\nimport { logger } from './logger.js';\n\nconst AES_KEY_LENGTH = 32; // 256 bits\nconst IV_LENGTH = 12; // 96 bits for AES-GCM\n\nexport interface EncryptedPayload {\n  encryptedContent: string; // Base64-encoded AES-GCM ciphertext\n  encryptedKey: string;     // Base64-encoded RSA-OAEP encrypted AES key\n  iv: string;               // Base64-encoded IV\n  version: number;          // Encryption format version\n}\n\n/**\n * Import an RSA public key from Base64-encoded SPKI format\n */\nasync function importPublicKey(publicKeyBase64: string): Promise<crypto.KeyObject> {\n  const keyBuffer = Buffer.from(publicKeyBase64, 'base64');\n\n  // Convert SPKI DER to PEM format for Node.js crypto\n  const pemHeader = '-----BEGIN PUBLIC KEY-----\\n';\n  const pemFooter = '\\n-----END PUBLIC KEY-----';\n  const pemKey = pemHeader + keyBuffer.toString('base64').match(/.{1,64}/g)!.join('\\n') + pemFooter;\n\n  return crypto.createPublicKey({\n    key: pemKey,\n    format: 'pem',\n    type: 'spki',\n  });\n}\n\n/**\n * Encrypt content using hybrid encryption\n *\n * @param plaintext The content to encrypt\n * @param publicKeyBase64 Base64-encoded SPKI public key\n * @returns Encrypted payload compatible with frontend decryption\n */\nexport async function encryptContent(\n  plaintext: string,\n  publicKeyBase64: string\n): Promise<EncryptedPayload> {\n  // Generate random AES key\n  const aesKey = crypto.randomBytes(AES_KEY_LENGTH);\n\n  // Generate random IV\n  const iv = crypto.randomBytes(IV_LENGTH);\n\n  // Encrypt content with AES-GCM\n  const cipher = crypto.createCipheriv('aes-256-gcm', aesKey, iv);\n  const encrypted = Buffer.concat([\n    cipher.update(plaintext, 'utf8'),\n    cipher.final(),\n  ]);\n  const authTag = cipher.getAuthTag();\n\n  // Combine ciphertext and auth tag (Web Crypto format)\n  const encryptedContent = Buffer.concat([encrypted, authTag]);\n\n  // Import and encrypt AES key with RSA-OAEP\n  const publicKey = await importPublicKey(publicKeyBase64);\n  const encryptedKey = crypto.publicEncrypt(\n    {\n      key: publicKey,\n      padding: crypto.constants.RSA_PKCS1_OAEP_PADDING,\n      oaepHash: 'sha256',\n    },\n    aesKey\n  );\n\n  return {\n    encryptedContent: encryptedContent.toString('base64'),\n    encryptedKey: encryptedKey.toString('base64'),\n    iv: iv.toString('base64'),\n    version: 1,\n  };\n}\n\n/**\n * Encrypt session fields that contain sensitive data\n *\n * @param data Session data object\n * @param publicKey Base64-encoded public key\n * @returns Object with encrypted fields and encryption metadata\n */\nexport async function encryptSessionFields(\n  data: {\n    interactions?: any[];\n    todoSnapshots?: any[];\n    subSessions?: any[];\n    attachmentUrls?: any[];\n  },\n  publicKey: string\n): Promise<{\n  encryptedInteractions?: string;\n  encryptedTodoSnapshots?: string;\n  encryptedSubSessions?: string;\n  encryptedAttachmentUrls?: string;\n}> {\n  const result: {\n    encryptedInteractions?: string;\n    encryptedTodoSnapshots?: string;\n    encryptedSubSessions?: string;\n    encryptedAttachmentUrls?: string;\n  } = {};\n\n  // Encrypt interactions (most sensitive - contains full conversation)\n  if (data.interactions && data.interactions.length > 0) {\n    const payload = await encryptContent(JSON.stringify(data.interactions), publicKey);\n    result.encryptedInteractions = JSON.stringify(payload);\n  }\n\n  // Encrypt todo snapshots\n  if (data.todoSnapshots && data.todoSnapshots.length > 0) {\n    const payload = await encryptContent(JSON.stringify(data.todoSnapshots), publicKey);\n    result.encryptedTodoSnapshots = JSON.stringify(payload);\n  }\n\n  // Encrypt sub-sessions\n  if (data.subSessions && data.subSessions.length > 0) {\n    const payload = await encryptContent(JSON.stringify(data.subSessions), publicKey);\n    result.encryptedSubSessions = JSON.stringify(payload);\n  }\n\n  // Encrypt attachment URLs (contains file metadata)\n  if (data.attachmentUrls && data.attachmentUrls.length > 0) {\n    const payload = await encryptContent(JSON.stringify(data.attachmentUrls), publicKey);\n    result.encryptedAttachmentUrls = JSON.stringify(payload);\n  }\n\n  return result;\n}\n\n/**\n * Check if a public key is valid for encryption\n */\nexport async function isValidPublicKey(publicKeyBase64: string): Promise<boolean> {\n  if (!publicKeyBase64 || publicKeyBase64.length < 100) {\n    return false;\n  }\n\n  try {\n    await importPublicKey(publicKeyBase64);\n    return true;\n  } catch (error) {\n    logger.warn('Invalid public key format:', error);\n    return false;\n  }\n}\n", "/**\n * Transcript parser for Claude Code JSONL files.\n * Extracts sessions, interactions, tools, tokens, and metadata.\n */\n\nimport { homedir } from 'os';\nimport { logger } from './logger.js';\nimport type { AttachmentMetadata } from './storage-uploader.js';\nimport type { EnhancedSessionData, ModelUsageStats, PlanningModeInfo, SubSessionData, UserInfo } from './models.js';\nimport type { GrpcAPIClient } from './grpc-client.js';\n\nexport class TranscriptParser {\n  private currentUser?: UserInfo;\n  private grpcClient?: GrpcAPIClient;\n\n  constructor(options?: { currentUser?: UserInfo; grpcClient?: GrpcAPIClient }) {\n    this.currentUser = options?.currentUser;\n    this.grpcClient = options?.grpcClient;\n  }\n\n  setGrpcClient(client: GrpcAPIClient): void {\n    this.grpcClient = client;\n  }\n\n  setCurrentUser(user: UserInfo): void {\n    this.currentUser = user;\n  }\n\n  /**\n   * Extract base64-encoded images from message content\n   */\n  private extractImagesFromContent(messageContent: any[]): Array<{\n    base64Data: string;\n    mediaType: string;\n  }> {\n    const images: Array<{ base64Data: string; mediaType: string }> = [];\n\n    if (!Array.isArray(messageContent)) {\n      return images;\n    }\n\n    for (const item of messageContent) {\n      if (\n        item.type === 'image' &&\n        item.source?.type === 'base64' &&\n        item.source?.data &&\n        item.source?.media_type\n      ) {\n        images.push({\n          base64Data: item.source.data,\n          mediaType: item.source.media_type,\n        });\n      }\n    }\n\n    return images;\n  }\n\n  /**\n   * Replace image content with references to uploaded attachments.\n   * Each base64 image is replaced with a sequential attachment index starting from startIndex.\n   */\n  private replaceImagesWithReferences(messageContent: any[], startIndex: number): any[] {\n    let currentIndex = startIndex;\n    return messageContent.map((item) => {\n      if (\n        item.type === 'image' &&\n        item.source?.type === 'base64'\n      ) {\n        return {\n          type: 'image_ref',\n          attachment_index: currentIndex++,\n        };\n      }\n      return item;\n    });\n  }\n\n  async quickExtractTimestamp(filePath: string): Promise<Date | null> {\n    const fs = await import('fs/promises');\n    let fd: Awaited<ReturnType<typeof fs.open>> | null = null;\n\n    try {\n      // Read 64KB to handle files with large early lines (e.g., huge user messages)\n      fd = await fs.open(filePath, 'r');\n      const buffer = Buffer.alloc(65536);\n      const { bytesRead } = await fd.read(buffer, 0, 65536, 0);\n\n      if (bytesRead === 0) return null;\n\n      const content = buffer.toString('utf-8', 0, bytesRead);\n\n      // Use regex to find timestamp - works even with partial/truncated JSON lines\n      const match = content.match(/\"timestamp\"\\s*:\\s*\"([^\"]+)\"/);\n      if (match) {\n        return new Date(match[1]);\n      }\n\n      return null;\n    } catch {\n      return null;\n    } finally {\n      // Always close file descriptor to prevent leaks\n      if (fd) {\n        await fd.close().catch(() => {});\n      }\n    }\n  }\n\n  async quickExtractSessionId(filePath: string): Promise<string | null> {\n    const fs = await import('fs/promises');\n    let fd: Awaited<ReturnType<typeof fs.open>> | null = null;\n\n    try {\n      // Read 64KB to handle files with large early lines (e.g., huge user messages)\n      fd = await fs.open(filePath, 'r');\n      const buffer = Buffer.alloc(65536);\n      const { bytesRead } = await fd.read(buffer, 0, 65536, 0);\n\n      if (bytesRead === 0) return null;\n\n      const content = buffer.toString('utf-8', 0, bytesRead);\n\n      // Use regex to find sessionId - works even with partial/truncated JSON lines\n      const match = content.match(/\"sessionId\"\\s*:\\s*\"([a-f0-9-]{36})\"/);\n      if (match) {\n        return match[1];\n      }\n\n      return null;\n    } catch {\n      return null;\n    } finally {\n      // Always close file descriptor to prevent leaks\n      if (fd) {\n        await fd.close().catch(() => {});\n      }\n    }\n  }\n\n  private extractLanguagesFromSession(lines: string[]): string[] {\n    const languages = new Set<string>();\n\n    for (const line of lines) {\n      try {\n        const entry = JSON.parse(line);\n\n        if (entry.toolUseResult?.filePath) {\n          const filePath = entry.toolUseResult.filePath.toLowerCase();\n          this.addLanguageFromFilePath(filePath, languages);\n        }\n\n        if (entry.tool_input?.file_path) {\n          const filePath = entry.tool_input.file_path.toLowerCase();\n          this.addLanguageFromFilePath(filePath, languages);\n        }\n\n        if (entry.message?.content && Array.isArray(entry.message.content)) {\n          for (const item of entry.message.content) {\n            if (item.type === 'tool_use' && item.input?.file_path) {\n              const filePath = item.input.file_path.toLowerCase();\n              this.addLanguageFromFilePath(filePath, languages);\n            }\n          }\n        }\n      } catch {\n        continue;\n      }\n    }\n\n    return Array.from(languages);\n  }\n\n  private addLanguageFromFilePath(filePath: string, languages: Set<string>): void {\n    if (filePath.endsWith('.js') || filePath.endsWith('.jsx')) languages.add('javascript');\n    else if (filePath.endsWith('.ts') || filePath.endsWith('.tsx')) languages.add('typescript');\n    else if (filePath.endsWith('.py')) languages.add('python');\n    else if (filePath.endsWith('.java')) languages.add('java');\n    else if (filePath.endsWith('.sol')) languages.add('solidity');\n    else if (filePath.endsWith('.go')) languages.add('go');\n    else if (filePath.endsWith('.rs')) languages.add('rust');\n    else if (filePath.endsWith('.c') && !filePath.endsWith('.cc')) languages.add('c');\n    else if (filePath.endsWith('.cpp') || filePath.endsWith('.cc') || filePath.endsWith('.cxx')) languages.add('cpp');\n    else if (filePath.endsWith('.swift')) languages.add('swift');\n    else if (filePath.endsWith('.kt') || filePath.endsWith('.kts')) languages.add('kotlin');\n    else if (filePath.endsWith('.php')) languages.add('php');\n    else if (filePath.endsWith('.rb')) languages.add('ruby');\n    else if (filePath.endsWith('.sh') || filePath.endsWith('.bash')) languages.add('shell');\n    else if (filePath.endsWith('.sql')) languages.add('sql');\n    else if (filePath.endsWith('.html') || filePath.endsWith('.htm')) languages.add('html');\n    else if (filePath.endsWith('.css') || filePath.endsWith('.scss') || filePath.endsWith('.sass')) languages.add('css');\n  }\n\n  private filterLastExchanges(\n    interactions: any[],\n    count: number\n  ): { interactions: any[]; startIndex: number } {\n    const exchangeStarts: number[] = [];\n    for (let i = 0; i < interactions.length; i++) {\n      if (interactions[i].interaction_type === 'prompt') {\n        exchangeStarts.push(i);\n      }\n    }\n\n    if (exchangeStarts.length === 0 || count >= exchangeStarts.length) {\n      return { interactions, startIndex: 0 };\n    }\n\n    const startFrom = exchangeStarts[exchangeStarts.length - count];\n\n    return {\n      interactions: interactions.slice(startFrom),\n      startIndex: startFrom,\n    };\n  }\n\n  async parseTranscriptFile(filePath: string, lastExchanges?: number): Promise<EnhancedSessionData | null> {\n    try {\n      const fs = await import('fs/promises');\n      const path = await import('path');\n      const os = await import('os');\n\n      // Check file size before loading to prevent OOM on very large files\n      const MAX_FILE_SIZE = 100 * 1024 * 1024; // 100MB limit\n      const stats = await fs.stat(filePath);\n      if (stats.size > MAX_FILE_SIZE) {\n        logger.error(`Transcript file too large: ${stats.size} bytes (max ${MAX_FILE_SIZE}). Skipping.`);\n        return null;\n      }\n\n      const content = await fs.readFile(filePath, 'utf-8');\n      const lines = content.split('\\n').filter((line) => line.trim());\n\n      if (lines.length === 0) {\n        return null;\n      }\n\n      const interactions: any[] = [];\n      const toolCallMap = new Map<string, any>();\n      let totalInputTokens = 0;\n      let totalOutputTokens = 0;\n      let totalCacheCreateTokens = 0;\n      let totalCacheReadTokens = 0;\n      let sessionId = '';\n      let startTime = '';\n      let endTime = '';\n      let projectPath = '';\n      let gitBranch = '';\n\n      let sessionCwd = '';\n      let sessionTool = 'claude-code';\n      let sessionCaptureType = 'batch_import';\n\n      const modelStats: Record<string, number> = {};\n      let lastModel: string | null = null;\n      let modelSwitches = 0;\n\n      const exitPlanTimestamps: Date[] = [];\n      const plans: Array<{timestamp: string; plan: string}> = [];\n      const todoSnapshots: Array<{timestamp: string; todos: any[]}> = [];\n      const attachmentUrls: AttachmentMetadata[] = [];\n\n      // Track tasks from TaskCreate/TaskUpdate tools (new task management system)\n      const taskMap = new Map<string, {\n        subject: string;\n        description: string;\n        activeForm: string;\n        status: string;\n        createdAt: string;\n      }>();\n      // Map tool_use_id to TaskCreate input for associating with tool_result\n      const pendingTaskCreates = new Map<string, { subject: string; description: string; activeForm: string; timestamp: string }>();\n\n      // Plan file extraction variables\n      let planFileSlug: string | undefined;\n      let planFilePath: string | undefined;\n      let planFileContent: string | undefined;\n      let planFileModifiedAt: string | undefined;\n\n      // STEP 1: Extract slug from transcript entries to locate plan file\n      // The slug field may not be in the first entry (e.g., file-history-snapshot doesn't have it)\n      // Search through entries until we find a slug\n      let slugCandidate: string | undefined;\n      for (const line of lines) {\n        try {\n          const entry = JSON.parse(line);\n          if (entry.slug && entry.slug !== slugCandidate) {\n            slugCandidate = entry.slug;\n            planFileSlug = slugCandidate;\n            break;\n          }\n        } catch {\n          continue;\n        }\n      }\n\n      // STEP 2: Search for inherited/teleported plan references in content\n      // Pattern: Look for explicit plan file paths in system messages\n      // This catches plans inherited from other sessions via teleportation\n      if (!planFileContent) {\n        const planPathPattern = /\\/\\.claude\\/plans\\/([\\w-]+)\\.md/g;\n        for (const line of lines) {\n          try {\n            const entry = JSON.parse(line);\n            const contentStr = JSON.stringify(entry);\n            const matches = [...contentStr.matchAll(planPathPattern)];\n\n            for (const match of matches) {\n              const inheritedSlug = match[1];\n              if (inheritedSlug && inheritedSlug !== planFileSlug) {\n                // Found a reference to a different plan file (inherited/teleported)\n                planFileSlug = inheritedSlug;\n                break; // Use first found inherited plan reference\n              }\n            }\n            if (planFileSlug) break; // Stop searching if we found one\n          } catch {\n            continue;\n          }\n        }\n      }\n\n      // STEP 3: Load plan file content (optional, for plan snapshots and upload)\n      if (planFileSlug && !planFileContent) {\n        const candidatePath = path.join(os.homedir(), '.claude', 'plans', `${planFileSlug}.md`);\n        try {\n          const planStats = await fs.stat(candidatePath);\n          planFilePath = candidatePath;\n          planFileContent = await fs.readFile(candidatePath, 'utf-8');\n          planFileModifiedAt = planStats.mtime.toISOString();\n          logger.info(`Loaded plan file: ${candidatePath} (slug: ${planFileSlug})`);\n        } catch {\n          logger.debug(`No plan file found at ${candidatePath} (slug: ${planFileSlug})`);\n        }\n      }\n\n      for (const line of lines) {\n        try {\n          const entry = JSON.parse(line);\n\n          if (!sessionId && entry.sessionId) {\n            sessionId = entry.sessionId;\n            projectPath = entry.cwd || process.cwd();\n            gitBranch = entry.gitBranch || 'main';\n            startTime = entry.timestamp;\n            sessionCwd = entry.cwd || process.cwd();\n            if (entry.tool) sessionTool = entry.tool;\n          }\n\n          if (entry.timestamp) {\n            endTime = entry.timestamp;\n          }\n\n          if (entry.type === 'user' && entry.message?.role === 'user') {\n            // Extract and upload images via backend if gRPC client is available\n            if (Array.isArray(entry.message.content) && this.grpcClient && sessionId) {\n              const images = this.extractImagesFromContent(entry.message.content);\n\n              if (images.length > 0) {\n                logger.info(`Found ${images.length} image(s) in user message, uploading via backend...`);\n\n                // Track the starting attachment index before uploads\n                const attachmentStartIndex = attachmentUrls.length;\n\n                for (let i = 0; i < images.length; i++) {\n                  const image = images[i];\n                  const currentInteractionIndex = interactions.length;\n\n                  try {\n                    const result = await this.grpcClient.uploadAttachment(\n                      sessionId,\n                      currentInteractionIndex,\n                      image.base64Data,\n                      image.mediaType\n                    );\n\n                    if (result.success && result.storagePath && result.publicUrl) {\n                      attachmentUrls.push({\n                        type: 'image',\n                        storagePath: result.storagePath,\n                        publicUrl: result.publicUrl,\n                        mediaType: image.mediaType,\n                        filename: result.storagePath.split('/').pop() || 'image',\n                        sizeBytes: Math.ceil(image.base64Data.length * 0.75), // Approximate size from base64\n                        interactionIndex: currentInteractionIndex,\n                        uploadedAt: new Date().toISOString(),\n                      });\n                      logger.info(`Image ${i + 1}/${images.length} uploaded: ${result.storagePath}`);\n                    } else {\n                      logger.warn(`Failed to upload image ${i + 1}/${images.length}: ${result.error}`);\n                      // Continue to next image - don't fail entire import\n                    }\n                  } catch (uploadError) {\n                    logger.error(`Exception uploading image ${i + 1}/${images.length}: ${uploadError}`);\n                    // Continue to next image - don't fail entire import\n                  }\n                }\n\n                // Replace image content with sequential references starting from the first uploaded attachment\n                entry.message.content = this.replaceImagesWithReferences(\n                  entry.message.content,\n                  attachmentStartIndex\n                );\n              }\n            }\n\n            if (Array.isArray(entry.message.content)) {\n              for (const contentItem of entry.message.content) {\n                if (contentItem.type === 'tool_result' && contentItem.tool_use_id) {\n                  // Handle TaskCreate tool results - extract taskId and register the task\n                  const pendingCreate = pendingTaskCreates.get(contentItem.tool_use_id);\n                  if (pendingCreate) {\n                    // TaskCreate result format: \"Task #N created successfully: <subject>\"\n                    // Extract the task ID from the content\n                    const resultContent = Array.isArray(contentItem.content)\n                      ? contentItem.content.map((c: any) => c.text || c || '').join('')\n                      : (contentItem.content || '');\n\n                    const taskIdMatch = resultContent.match(/Task #(\\d+)/i);\n                    if (taskIdMatch) {\n                      const taskId = taskIdMatch[1];\n                      taskMap.set(taskId, {\n                        subject: pendingCreate.subject,\n                        description: pendingCreate.description,\n                        activeForm: pendingCreate.activeForm,\n                        status: 'pending',\n                        createdAt: pendingCreate.timestamp\n                      });\n\n                      // Create a snapshot after task creation\n                      const tasksArray = Array.from(taskMap.values()).map(t => ({\n                        content: t.subject,\n                        status: t.status,\n                        activeForm: t.activeForm\n                      }));\n                      todoSnapshots.push({\n                        timestamp: entry.timestamp,\n                        todos: tasksArray\n                      });\n\n                      logger.debug(`Captured TaskCreate: Task #${taskId} - ${pendingCreate.subject}`);\n                    }\n                    pendingTaskCreates.delete(contentItem.tool_use_id);\n                  }\n\n                  const toolCall = toolCallMap.get(contentItem.tool_use_id);\n                  if (toolCall) {\n                    const toolName = toolCall.metadata.tool_name;\n\n                    const isCodeEditingTool = ['Edit', 'Write', 'MultiEdit'].includes(toolName);\n                    const isWebSearch = toolName === 'WebSearch';\n                    const isExitPlanMode = toolName === 'ExitPlanMode';\n\n                    if (isExitPlanMode && toolCall.metadata.tool_input?.plan) {\n                      plans.push({\n                        timestamp: entry.timestamp,\n                        plan: toolCall.metadata.tool_input.plan\n                      });\n                      continue;\n                    }\n\n                    if (isCodeEditingTool && entry.toolUseResult) {\n                      const postToolUseInteraction = {\n                        interaction_type: 'tool_call',\n                        content: `Tool completed: ${toolName}`,\n                        timestamp: entry.timestamp,\n                        metadata: {\n                          tool_name: toolName,\n                          hook_event: 'PostToolUse',\n                          tool_response: {\n                            filePath: entry.toolUseResult.filePath,\n                            structuredPatch: entry.toolUseResult.structuredPatch,\n                            ...(toolName === 'Edit' && {\n                              oldString: entry.toolUseResult.oldString,\n                              newString: entry.toolUseResult.newString,\n                            }),\n                          },\n                        },\n                      };\n\n                      interactions.push(postToolUseInteraction);\n                    } else if (isWebSearch && entry.toolUseResult) {\n                      const postToolUseInteraction = {\n                        interaction_type: 'tool_call',\n                        content: `WebSearch completed: ${toolCall.metadata.tool_input?.query || 'query'}`,\n                        timestamp: entry.timestamp,\n                        metadata: {\n                          tool_name: toolName,\n                          hook_event: 'PostToolUse',\n                          tool_response: {\n                            query: entry.toolUseResult.query,\n                            results: entry.toolUseResult.results,\n                          },\n                        },\n                      };\n\n                      interactions.push(postToolUseInteraction);\n                    }\n                  }\n                  continue;\n                }\n              }\n            }\n\n            const userContent = Array.isArray(entry.message.content)\n              ? entry.message.content\n                  .filter((c: any) => c.type === 'text' || typeof c === 'string')\n                  .map((c: any) => c.text || c || '')\n                  .join('\\n')\n                  .trim()\n              : entry.message.content || '';\n\n            const isSystemMessage = userContent && (\n              userContent.startsWith('<command-name>') ||\n              userContent.includes('<local-command-stdout>') ||\n              userContent.includes('<local-command-stderr>') ||\n              userContent.includes('<system-reminder>') ||\n              userContent.includes('Error opening memory file') ||\n              userContent.includes('Cancelled memory editing') ||\n              userContent.startsWith('Caveat: The messages below were generated by the user while running local commands.')\n            );\n\n            if (userContent && !isSystemMessage) {\n              interactions.push({\n                interaction_type: 'prompt',\n                content: userContent,\n                timestamp: entry.timestamp,\n              });\n            }\n          }\n\n          if (entry.type === 'assistant' && entry.message?.role === 'assistant') {\n            const contentItems = entry.message.content || [];\n            const textItems = Array.isArray(contentItems)\n              ? contentItems\n                  .filter((item: any) => item.type === 'text' && item.text)\n                  .map((item: any) => item.text)\n              : [];\n\n            if (textItems.length > 0) {\n              const responseContent = textItems.join('\\n').trim();\n\n              // Include token usage in metadata for --last flag filtering\n              const usage = entry.message.usage || {};\n              interactions.push({\n                interaction_type: 'response',\n                content: responseContent,\n                timestamp: entry.timestamp,\n                metadata: {\n                  input_tokens: usage.input_tokens || 0,\n                  output_tokens: usage.output_tokens || 0,\n                  cache_creation_input_tokens: usage.cache_creation_input_tokens || 0,\n                  cache_read_input_tokens: usage.cache_read_input_tokens || 0,\n                },\n              });\n            }\n\n            if (entry.message.model) {\n              modelStats[entry.message.model] = (modelStats[entry.message.model] || 0) + 1;\n\n              if (lastModel && lastModel !== entry.message.model) {\n                modelSwitches++;\n              }\n              lastModel = entry.message.model;\n            }\n\n            if (Array.isArray(contentItems)) {\n              for (const item of contentItems) {\n                if (item.type === 'tool_use' && item.name === 'ExitPlanMode') {\n                  exitPlanTimestamps.push(new Date(entry.timestamp));\n                  // First try to get plan from tool input (old format)\n                  if (item.input?.plan) {\n                    plans.push({\n                      timestamp: entry.timestamp,\n                      plan: item.input.plan\n                    });\n                  } else if (planFileContent) {\n                    // New format: plan content is in ~/.claude/plans/{slug}.md\n                    // Use the plan file content we read earlier\n                    plans.push({\n                      timestamp: entry.timestamp,\n                      plan: planFileContent\n                    });\n                  }\n                }\n\n                if (item.type === 'tool_use' && item.name === 'TodoWrite' && item.input?.todos && Array.isArray(item.input.todos)) {\n                  todoSnapshots.push({\n                    timestamp: entry.timestamp,\n                    todos: item.input.todos\n                  });\n                }\n\n                // Track TaskCreate tool calls (new task management system)\n                if (item.type === 'tool_use' && item.name === 'TaskCreate' && item.id) {\n                  const input = item.input || {};\n                  pendingTaskCreates.set(item.id, {\n                    subject: input.subject || '',\n                    description: input.description || '',\n                    activeForm: input.activeForm || '',\n                    timestamp: entry.timestamp\n                  });\n                }\n\n                // Track TaskUpdate tool calls - update task status\n                if (item.type === 'tool_use' && item.name === 'TaskUpdate') {\n                  const input = item.input || {};\n                  const taskId = input.taskId;\n                  if (taskId && taskMap.has(taskId)) {\n                    const task = taskMap.get(taskId)!;\n                    if (input.status) {\n                      task.status = input.status;\n                    }\n                    if (input.subject) {\n                      task.subject = input.subject;\n                    }\n                    if (input.description) {\n                      task.description = input.description;\n                    }\n                    if (input.activeForm) {\n                      task.activeForm = input.activeForm;\n                    }\n                    taskMap.set(taskId, task);\n\n                    // Create a snapshot after task update\n                    const tasksArray = Array.from(taskMap.values()).map(t => ({\n                      content: t.subject,\n                      status: t.status,\n                      activeForm: t.activeForm\n                    }));\n                    todoSnapshots.push({\n                      timestamp: entry.timestamp,\n                      todos: tasksArray\n                    });\n                  }\n                }\n              }\n            }\n\n            const toolUseItems = Array.isArray(contentItems)\n              ? contentItems.filter((item: any) => item.type === 'tool_use')\n              : [];\n\n            for (const toolUseItem of toolUseItems) {\n              const toolName = toolUseItem.name || 'Unknown Tool';\n              const toolInput = toolUseItem.input || {};\n              const toolId = toolUseItem.id;\n\n              if (toolName === 'TodoWrite' || toolName === 'ExitPlanMode') {\n                continue;\n              }\n\n              let essentialToolInput: any = undefined;\n\n              if (['Edit', 'Write', 'MultiEdit'].includes(toolName)) {\n                essentialToolInput = {\n                  file_path: toolInput.file_path,\n                };\n                if (toolName === 'Write' && toolInput.content) {\n                  essentialToolInput.content = toolInput.content;\n                }\n                if (toolName === 'Edit') {\n                  essentialToolInput.old_string = toolInput.old_string;\n                  essentialToolInput.new_string = toolInput.new_string;\n                }\n                if (toolName === 'MultiEdit' && toolInput.edits) {\n                  essentialToolInput.edits = toolInput.edits;\n                }\n              } else if (toolName === 'Bash' && toolInput.command) {\n                essentialToolInput = {\n                  command: toolInput.command,\n                };\n              } else if (toolName === 'Grep' && toolInput.pattern) {\n                essentialToolInput = {\n                  pattern: toolInput.pattern,\n                  ...(toolInput.path && { path: toolInput.path }),\n                };\n              } else if (toolName === 'Glob' && toolInput.pattern) {\n                essentialToolInput = {\n                  pattern: toolInput.pattern,\n                  ...(toolInput.path && { path: toolInput.path }),\n                };\n              } else if (toolName === 'Read' && toolInput.file_path) {\n                essentialToolInput = {\n                  file_path: toolInput.file_path,\n                };\n              } else if (toolName === 'WebSearch' && toolInput.query) {\n                essentialToolInput = {\n                  query: toolInput.query,\n                };\n              } else {\n                const commonFields: Record<string, any> = {};\n\n                if (toolInput.description) {\n                  commonFields.description = toolInput.description.substring(0, 300);\n                }\n                if (toolInput.prompt) {\n                  commonFields.prompt = toolInput.prompt.substring(0, 500);\n                }\n                if (toolInput.command) {\n                  commonFields.command = toolInput.command;\n                }\n                if (toolInput.query) {\n                  commonFields.query = toolInput.query.substring(0, 500);\n                }\n                if (toolInput.questions) {\n                  commonFields.questions = toolInput.questions;\n                }\n                if (toolInput.subagent_type) {\n                  commonFields.subagent_type = toolInput.subagent_type;\n                }\n\n                if (toolName.startsWith('mcp__')) {\n                  Object.keys(toolInput).forEach(key => {\n                    if (commonFields[key]) return;\n\n                    const value = toolInput[key];\n                    if (typeof value === 'string' && value.length < 1000) {\n                      commonFields[key] = value;\n                    } else if (typeof value === 'number' || typeof value === 'boolean') {\n                      commonFields[key] = value;\n                    } else if (Array.isArray(value) && value.length < 10) {\n                      commonFields[key] = value;\n                    }\n                  });\n                }\n\n                if (Object.keys(commonFields).length > 0) {\n                  essentialToolInput = commonFields;\n                }\n              }\n\n              const toolCallInteraction = {\n                interaction_type: 'tool_call',\n                content: `Tool: ${toolName}`,\n                timestamp: entry.timestamp,\n                metadata: {\n                  tool_name: toolName,\n                  ...(essentialToolInput && { tool_input: essentialToolInput }),\n                  hook_event: 'PreToolUse',\n                },\n              };\n\n              interactions.push(toolCallInteraction);\n\n              if (toolId) {\n                toolCallMap.set(toolId, toolCallInteraction);\n              }\n            }\n\n            const usage = entry.message.usage || {};\n            totalInputTokens += usage.input_tokens || 0;\n            totalCacheCreateTokens += usage.cache_creation_input_tokens || 0;\n            totalCacheReadTokens += usage.cache_read_input_tokens || 0;\n            totalOutputTokens += usage.output_tokens || 0;\n          }\n\n          if (entry.type === 'tool' || entry.hook_event === 'PreToolUse') {\n            const toolName = entry.tool_name || entry.tool?.name || 'Unknown Tool';\n\n            if (toolName === 'TodoWrite' || toolName === 'ExitPlanMode') {\n              continue;\n            }\n\n            const toolMetadata: Record<string, any> = {\n              tool_name: toolName,\n              hook_event: entry.hook_event || 'PreToolUse',\n            };\n\n            if (entry.tool_input) {\n              toolMetadata['tool_input'] = entry.tool_input;\n            }\n\n            const interaction = {\n              interaction_type: 'tool_call',\n              content: `Tool: ${toolName}`,\n              timestamp: entry.timestamp,\n              metadata: toolMetadata,\n            };\n\n            interactions.push(interaction);\n\n            if (entry.tool_use_id) {\n              toolCallMap.set(entry.tool_use_id, interaction);\n            }\n          }\n        } catch (jsonError) {\n          logger.warn('Failed to parse line in transcript:', jsonError);\n          continue;\n        }\n      }\n\n      const projectName = path.basename(projectPath);\n      const languages = this.extractLanguagesFromSession(lines);\n\n      let modelInfo: ModelUsageStats | undefined = undefined;\n      if (Object.keys(modelStats).length > 0) {\n        const models = Object.keys(modelStats);\n        const primaryModel = models.reduce((a, b) =>\n          modelStats[a] > modelStats[b] ? a : b\n        );\n\n        modelInfo = {\n          models,\n          primaryModel,\n          modelUsage: modelStats,\n          modelSwitches,\n        };\n      }\n\n      let planningModeInfo: PlanningModeInfo | undefined = undefined;\n      if (exitPlanTimestamps.length > 0) {\n        planningModeInfo = {\n          hasPlanningMode: true,\n          planningCycles: exitPlanTimestamps.length,\n          exitPlanTimestamps: exitPlanTimestamps,\n        };\n      }\n\n      let filteredInteractions = interactions;\n      let filteredStartTime = startTime;\n      let filteredTotalInputTokens = totalInputTokens;\n      let filteredTotalOutputTokens = totalOutputTokens;\n      let filteredTotalCacheCreateTokens = totalCacheCreateTokens;\n      let filteredTotalCacheReadTokens = totalCacheReadTokens;\n\n      if (lastExchanges && lastExchanges > 0) {\n        const filterResult = this.filterLastExchanges(interactions, lastExchanges);\n        filteredInteractions = filterResult.interactions;\n\n        if (filteredInteractions.length > 0 && filteredInteractions[0].timestamp) {\n          filteredStartTime = filteredInteractions[0].timestamp;\n        }\n\n        filteredTotalInputTokens = 0;\n        filteredTotalOutputTokens = 0;\n        filteredTotalCacheCreateTokens = 0;\n        filteredTotalCacheReadTokens = 0;\n\n        for (const interaction of filteredInteractions) {\n          if (interaction.metadata) {\n            filteredTotalInputTokens += interaction.metadata.input_tokens || 0;\n            filteredTotalOutputTokens += interaction.metadata.output_tokens || 0;\n            filteredTotalCacheCreateTokens += interaction.metadata.cache_creation_input_tokens || 0;\n            filteredTotalCacheReadTokens += interaction.metadata.cache_read_input_tokens || 0;\n          }\n        }\n\n        logger.info(`Filtered to last ${lastExchanges} exchanges: ${filteredInteractions.length} interactions`);\n      }\n\n      return {\n        projectName,\n        projectPath,\n        sessionId,\n        startTime: filteredStartTime,\n        endTime,\n        gitBranch,\n        interactions: filteredInteractions,\n        totalInputTokens: filteredTotalInputTokens,\n        totalOutputTokens: filteredTotalOutputTokens,\n        totalCacheCreateTokens: filteredTotalCacheCreateTokens,\n        totalCacheReadTokens: filteredTotalCacheReadTokens,\n        modelInfo,\n        planningModeInfo,\n        languages,\n        cwd: sessionCwd,\n        tool: sessionTool,\n        captureType: sessionCaptureType,\n        todoSnapshots,\n        plans,\n        attachmentUrls,\n        // Plan file metadata\n        planFileSlug,\n        planFilePath,\n        planFileContent,\n        planFileModifiedAt,\n      };\n    } catch (error) {\n      logger.debug(`Failed to parse transcript file: ${error instanceof Error ? error.message : error}`);\n      return null;\n    }\n  }\n\n  async parseSubAgentFile(\n    filePath: string,\n    agentId: string,\n    taskDescription: string | null,\n    taskPrompt: string | null,\n    interactionIndex: number\n  ): Promise<SubSessionData | null> {\n    try {\n      const fs = await import('fs/promises');\n\n      const content = await fs.readFile(filePath, 'utf-8');\n      const lines = content.split('\\n').filter((line) => line.trim());\n\n      if (lines.length === 0) {\n        return null;\n      }\n\n      const interactions: Array<any> = [];\n      const messages: Array<{ role: string; content: string; timestamp: string }> = [];\n      const toolCallMap = new Map<string, any>();\n\n      let inputTokens = 0;\n      let outputTokens = 0;\n      let startTime = '';\n      let endTime = '';\n\n      for (const line of lines) {\n        try {\n          const entry = JSON.parse(line);\n\n          if (!startTime && entry.timestamp) {\n            startTime = entry.timestamp;\n          }\n\n          if (entry.timestamp) {\n            endTime = entry.timestamp;\n          }\n\n          if (entry.type === 'user' && entry.message?.role === 'user') {\n            if (Array.isArray(entry.message.content)) {\n              for (const contentItem of entry.message.content) {\n                if (contentItem.type === 'tool_result' && contentItem.tool_use_id) {\n                  const toolCall = toolCallMap.get(contentItem.tool_use_id);\n                  if (toolCall) {\n                    const toolName = toolCall.metadata.tool_name;\n\n                    const isCodeEditingTool = ['Edit', 'Write', 'MultiEdit'].includes(toolName);\n                    const isWebSearch = toolName === 'WebSearch';\n\n                    if (isCodeEditingTool && entry.toolUseResult) {\n                      const postToolUseInteraction = {\n                        interaction_type: 'tool_call',\n                        content: `Tool completed: ${toolName}`,\n                        timestamp: entry.timestamp,\n                        metadata: {\n                          tool_name: toolName,\n                          hook_event: 'PostToolUse',\n                          tool_response: {\n                            filePath: entry.toolUseResult.filePath,\n                            structuredPatch: entry.toolUseResult.structuredPatch,\n                            ...(toolName === 'Edit' && {\n                              oldString: entry.toolUseResult.oldString,\n                              newString: entry.toolUseResult.newString,\n                            }),\n                          },\n                        },\n                      };\n\n                      interactions.push(postToolUseInteraction);\n                    } else if (isWebSearch && entry.toolUseResult) {\n                      const postToolUseInteraction = {\n                        interaction_type: 'tool_call',\n                        content: `WebSearch completed: ${toolCall.metadata.tool_input?.query || 'query'}`,\n                        timestamp: entry.timestamp,\n                        metadata: {\n                          tool_name: toolName,\n                          hook_event: 'PostToolUse',\n                          tool_response: {\n                            query: entry.toolUseResult.query,\n                            results: entry.toolUseResult.results,\n                          },\n                        },\n                      };\n\n                      interactions.push(postToolUseInteraction);\n                    }\n                  }\n                  continue;\n                }\n              }\n            }\n\n            const userContent = Array.isArray(entry.message.content)\n              ? entry.message.content\n                  .filter((c: any) => c.type === 'text' || typeof c === 'string')\n                  .map((c: any) => c.text || c || '')\n                  .join('\\n')\n                  .trim()\n              : entry.message.content || '';\n\n            const isSystemMessage = userContent && (\n              userContent.startsWith('<command-name>') ||\n              userContent.includes('<local-command-stdout>') ||\n              userContent.includes('<local-command-stderr>') ||\n              userContent.includes('<system-reminder>') ||\n              userContent.includes('Error opening memory file') ||\n              userContent.includes('Cancelled memory editing')\n            );\n\n            if (userContent && !isSystemMessage) {\n              interactions.push({\n                interaction_type: 'prompt',\n                content: userContent,\n                timestamp: entry.timestamp,\n              });\n\n              messages.push({\n                role: 'user',\n                content: userContent,\n                timestamp: entry.timestamp,\n              });\n            }\n          }\n\n          if (entry.type === 'assistant' && entry.message?.role === 'assistant') {\n            const contentItems = entry.message.content || [];\n            const textItems = Array.isArray(contentItems)\n              ? contentItems\n                  .filter((item: any) => item.type === 'text' && item.text)\n                  .map((item: any) => item.text)\n              : [];\n\n            if (textItems.length > 0) {\n              const responseContent = textItems.join('\\n').trim();\n\n              // Include token usage in metadata for --last flag filtering\n              const usage = entry.message.usage || {};\n              interactions.push({\n                interaction_type: 'response',\n                content: responseContent,\n                timestamp: entry.timestamp,\n                metadata: {\n                  input_tokens: usage.input_tokens || 0,\n                  output_tokens: usage.output_tokens || 0,\n                  cache_creation_input_tokens: usage.cache_creation_input_tokens || 0,\n                  cache_read_input_tokens: usage.cache_read_input_tokens || 0,\n                },\n              });\n\n              messages.push({\n                role: 'assistant',\n                content: responseContent,\n                timestamp: entry.timestamp,\n              });\n            }\n\n            const toolUseItems = Array.isArray(contentItems)\n              ? contentItems.filter((item: any) => item.type === 'tool_use')\n              : [];\n\n            for (const toolUseItem of toolUseItems) {\n              const toolName = toolUseItem.name || 'Unknown Tool';\n              const toolInput = toolUseItem.input || {};\n              const toolId = toolUseItem.id;\n\n              let essentialToolInput: any = undefined;\n\n              if (['Edit', 'Write', 'MultiEdit'].includes(toolName)) {\n                essentialToolInput = {\n                  file_path: toolInput.file_path,\n                };\n                if (toolName === 'Write' && toolInput.content) {\n                  essentialToolInput.content = toolInput.content;\n                }\n                if (toolName === 'Edit') {\n                  essentialToolInput.old_string = toolInput.old_string;\n                  essentialToolInput.new_string = toolInput.new_string;\n                }\n                if (toolName === 'MultiEdit' && toolInput.edits) {\n                  essentialToolInput.edits = toolInput.edits;\n                }\n              } else if (toolName === 'Bash' && toolInput.command) {\n                essentialToolInput = {\n                  command: toolInput.command,\n                };\n              } else if (toolName === 'Grep' && toolInput.pattern) {\n                essentialToolInput = {\n                  pattern: toolInput.pattern,\n                  ...(toolInput.path && { path: toolInput.path }),\n                };\n              } else if (toolName === 'Glob' && toolInput.pattern) {\n                essentialToolInput = {\n                  pattern: toolInput.pattern,\n                  ...(toolInput.path && { path: toolInput.path }),\n                };\n              } else if (toolName === 'Read' && toolInput.file_path) {\n                essentialToolInput = {\n                  file_path: toolInput.file_path,\n                };\n              } else if (toolName === 'WebSearch' && toolInput.query) {\n                essentialToolInput = {\n                  query: toolInput.query,\n                };\n              } else {\n                const commonFields: Record<string, any> = {};\n\n                if (toolInput.description) {\n                  commonFields.description = toolInput.description.substring(0, 300);\n                }\n                if (toolInput.prompt) {\n                  commonFields.prompt = toolInput.prompt.substring(0, 500);\n                }\n                if (toolInput.command) {\n                  commonFields.command = toolInput.command;\n                }\n                if (toolInput.query) {\n                  commonFields.query = toolInput.query.substring(0, 500);\n                }\n\n                if (toolName.startsWith('mcp__')) {\n                  Object.keys(toolInput).forEach(key => {\n                    if (commonFields[key]) return;\n\n                    const value = toolInput[key];\n                    if (typeof value === 'string' && value.length < 1000) {\n                      commonFields[key] = value;\n                    } else if (typeof value === 'number' || typeof value === 'boolean') {\n                      commonFields[key] = value;\n                    } else if (Array.isArray(value) && value.length < 10) {\n                      commonFields[key] = value;\n                    }\n                  });\n                }\n\n                if (Object.keys(commonFields).length > 0) {\n                  essentialToolInput = commonFields;\n                }\n              }\n\n              const toolCallInteraction = {\n                interaction_type: 'tool_call',\n                content: `Tool: ${toolName}`,\n                timestamp: entry.timestamp,\n                metadata: {\n                  tool_name: toolName,\n                  ...(essentialToolInput && { tool_input: essentialToolInput }),\n                  hook_event: 'PreToolUse',\n                },\n              };\n\n              interactions.push(toolCallInteraction);\n\n              if (toolId) {\n                toolCallMap.set(toolId, toolCallInteraction);\n              }\n            }\n\n            const usage = entry.message.usage || {};\n            inputTokens += usage.input_tokens || 0;\n            outputTokens += usage.output_tokens || 0;\n          }\n\n          if (entry.type === 'tool' || entry.hook_event === 'PreToolUse') {\n            const toolName = entry.tool_name || entry.tool?.name || 'Unknown Tool';\n\n            const toolMetadata: Record<string, any> = {\n              tool_name: toolName,\n              hook_event: entry.hook_event || 'PreToolUse',\n            };\n\n            if (entry.tool_input) {\n              toolMetadata['tool_input'] = entry.tool_input;\n            }\n\n            const interaction = {\n              interaction_type: 'tool_call',\n              content: `Tool: ${toolName}`,\n              timestamp: entry.timestamp,\n              metadata: toolMetadata,\n            };\n\n            interactions.push(interaction);\n\n            if (entry.tool_use_id) {\n              toolCallMap.set(entry.tool_use_id, interaction);\n            }\n          }\n        } catch (jsonError) {\n          logger.warn(`Failed to parse line in sub-agent transcript ${agentId}:`, jsonError);\n          continue;\n        }\n      }\n\n      const totalTokens = inputTokens + outputTokens;\n\n      logger.info(`Parsed sub-agent ${agentId}: ${interactions.length} interactions, ${messages.length} messages, ${totalTokens} tokens`);\n\n      return {\n        agentId,\n        taskDescription,\n        taskPrompt,\n        interactionIndex,\n        interactions,\n        messages,\n        startTime,\n        endTime: endTime || null,\n        totalTokens,\n        inputTokens,\n        outputTokens,\n      };\n    } catch (error) {\n      logger.error(`Failed to parse sub-agent file ${filePath}:`, error);\n      return null;\n    }\n  }\n\n  async findLatestTranscriptFile(projectPath: string, sessionId?: string): Promise<string | null> {\n    try {\n      const fs = await import('fs/promises');\n      const path = await import('path');\n\n      // Claude Code replaces path separators AND underscores with hyphens\n      const projectDirName = projectPath.replace(/[\\\\/]/g, '-').replace(/_/g, '-');\n      const claudeProjectsDir = path.join(homedir(), '.claude', 'projects', projectDirName);\n\n      logger.info(`Looking for transcript files in: ${claudeProjectsDir}`);\n      if (sessionId) {\n        logger.info(`Looking for specific session ID: ${sessionId}`);\n      }\n\n      try {\n        const files = await fs.readdir(claudeProjectsDir);\n\n        const jsonlFiles = files.filter((f) =>\n          f.endsWith('.jsonl') && !f.startsWith('agent-')\n        );\n\n        logger.info(`Found ${jsonlFiles.length} JSONL files`);\n\n        if (jsonlFiles.length === 0) {\n          return null;\n        }\n\n        // If sessionId is provided, search for the specific transcript file\n        if (sessionId) {\n          for (const file of jsonlFiles) {\n            const filePath = path.join(claudeProjectsDir, file);\n            const fileSessionId = await this.quickExtractSessionId(filePath);\n\n            if (fileSessionId === sessionId) {\n              // Check if this file is a stub (< 10KB) - probably from /clear or resume\n              const stats = await fs.stat(filePath);\n              if (stats.size < 10000) {\n                logger.warn(`Session ${sessionId} file is a stub (${stats.size} bytes). Falling back to latest by mtime.`);\n                break; // Fall through to mtime selection\n              }\n              logger.info(`Found matching transcript file for session ${sessionId}: ${file}`);\n              return filePath;\n            }\n          }\n\n          // If no match found with session ID, log warning and fall back to mtime\n          logger.warn(`No transcript file found for session ID: ${sessionId}. Falling back to latest.`);\n        }\n\n        // Fall back to timestamp/mtime-based selection\n        const fileStats = await Promise.all(\n          jsonlFiles.map(async (file) => {\n            const filePath = path.join(claudeProjectsDir, file);\n            const stats = await fs.stat(filePath);\n            const sessionTimestamp = await this.quickExtractTimestamp(filePath);\n\n            return {\n              file,\n              path: filePath,\n              mtime: stats.mtime,\n              sessionStartTime: sessionTimestamp\n            };\n          })\n        );\n\n        // Filter out invalid/empty transcript files (files without session data)\n        // These are files that only contain summary/snapshot entries but no actual conversation\n        const validFiles = fileStats.filter(f => f.sessionStartTime !== null);\n\n        // If all files are invalid, fall back to all files sorted by mtime\n        const filesToSort = validFiles.length > 0 ? validFiles : fileStats;\n\n        // Sort by mtime (most recently modified = current active session)\n        filesToSort.sort((a, b) => {\n          return b.mtime.getTime() - a.mtime.getTime();\n        });\n\n        const latestFile = filesToSort[0];\n        logger.info(`Latest file: ${latestFile.file}`);\n        return latestFile.path;\n      } catch (error) {\n        // Directory doesn't exist - this is expected if session started from different path\n        logger.debug(`Claude projects directory not found: ${claudeProjectsDir}`);\n        return null;\n      }\n    } catch (error) {\n      logger.debug(`Failed to find latest transcript file: ${error instanceof Error ? error.message : error}`);\n      return null;\n    }\n  }\n\n  async listTranscriptFiles(projectPath: string): Promise<string[]> {\n    try {\n      const fs = await import('fs/promises');\n      const path = await import('path');\n\n      // Claude Code replaces path separators AND underscores with hyphens\n      const projectDirName = projectPath.replace(/[\\\\/]/g, '-').replace(/_/g, '-');\n      const claudeProjectsDir = path.join(homedir(), '.claude', 'projects', projectDirName);\n\n      const files = await fs.readdir(claudeProjectsDir);\n\n      return files\n        .filter((f) => f.endsWith('.jsonl') && !f.startsWith('agent-'))\n        .map((f) => path.join(claudeProjectsDir, f));\n    } catch (error) {\n      return [];\n    }\n  }\n}\n", "/**\n * Project detection functionality.\n */\n\nimport { readFileSync, existsSync } from 'fs';\nimport { resolve, basename, dirname } from 'path';\nimport { execSync } from 'child_process';\nimport { ProjectData } from './models.js';\n\nexport class ProjectDetector {\n  detectProject(currentPath: string): ProjectData | null {\n    const projectRoot = this.findProjectRoot(currentPath);\n    if (!projectRoot) {\n      return null;\n    }\n\n    const projectName = this.extractProjectName(projectRoot);\n    const gitRemote = this.getGitRemote(projectRoot) || undefined;\n    const branch = this.getGitBranch(projectRoot) || undefined;\n\n    return {\n      path: projectRoot,\n      name: projectName,\n      gitRemote,\n      branch,\n    };\n  }\n\n  private findProjectRoot(startPath: string): string | null {\n    let current = resolve(startPath);\n\n    const indicators = [\n      '.git',\n      'package.json',\n      'pyproject.toml',\n      'setup.py',\n      'Cargo.toml',\n      'go.mod',\n      'pom.xml',\n      'build.gradle',\n      'CMakeLists.txt',\n      'Makefile',\n      '.project',\n      'composer.json',\n      'requirements.txt',\n      'environment.yml',\n      'Pipfile',\n    ];\n\n    const paths = [current];\n    let parent = dirname(current);\n    while (parent !== current) {\n      paths.push(parent);\n      current = parent;\n      parent = dirname(current);\n    }\n\n    for (const path of paths) {\n      for (const indicator of indicators) {\n        if (existsSync(resolve(path, indicator))) {\n          return path;\n        }\n      }\n    }\n\n    return startPath;\n  }\n\n  private extractProjectName(projectRoot: string): string {\n    const packageJsonPath = resolve(projectRoot, 'package.json');\n    if (existsSync(packageJsonPath)) {\n      try {\n        const packageJson = JSON.parse(readFileSync(packageJsonPath, 'utf8'));\n        if (packageJson.name) {\n          return packageJson.name;\n        }\n      } catch (error) {\n        // Ignore\n      }\n    }\n\n    const pyprojectPath = resolve(projectRoot, 'pyproject.toml');\n    if (existsSync(pyprojectPath)) {\n      try {\n        const content = readFileSync(pyprojectPath, 'utf8');\n        const nameMatch = content.match(/name\\s*=\\s*[\"']([^\"']+)[\"']/);\n        if (nameMatch) {\n          return nameMatch[1];\n        }\n      } catch (error) {\n        // Ignore\n      }\n    }\n\n    const cargoTomlPath = resolve(projectRoot, 'Cargo.toml');\n    if (existsSync(cargoTomlPath)) {\n      try {\n        const content = readFileSync(cargoTomlPath, 'utf8');\n        const nameMatch = content.match(/name\\s*=\\s*[\"']([^\"']+)[\"']/);\n        if (nameMatch) {\n          return nameMatch[1];\n        }\n      } catch (error) {\n        // Ignore\n      }\n    }\n\n    const goModPath = resolve(projectRoot, 'go.mod');\n    if (existsSync(goModPath)) {\n      try {\n        const content = readFileSync(goModPath, 'utf8');\n        const lines = content.split('\\n');\n        const firstLine = lines[0].trim();\n        if (firstLine.startsWith('module ')) {\n          const moduleName = firstLine.substring(7).trim();\n          return moduleName.split('/').pop() || moduleName;\n        }\n      } catch (error) {\n        // Ignore\n      }\n    }\n\n    const gitName = this.extractNameFromGit(projectRoot);\n    if (gitName) {\n      return gitName;\n    }\n\n    return basename(projectRoot);\n  }\n\n  private getGitRemote(projectRoot: string): string | null {\n    try {\n      const result = execSync('git remote get-url origin', {\n        cwd: projectRoot,\n        encoding: 'utf8',\n        timeout: 5000,\n        stdio: 'pipe',\n      });\n      return result.trim();\n    } catch (error) {\n      return null;\n    }\n  }\n\n  private getGitBranch(projectRoot: string): string | null {\n    try {\n      const result = execSync('git branch --show-current', {\n        cwd: projectRoot,\n        encoding: 'utf8',\n        timeout: 5000,\n        stdio: 'pipe',\n      });\n      return result.trim();\n    } catch (error) {\n      return null;\n    }\n  }\n\n  private extractNameFromGit(projectRoot: string): string | null {\n    const remote = this.getGitRemote(projectRoot);\n    if (!remote) {\n      return null;\n    }\n\n    let repoName = remote;\n\n    if (repoName.endsWith('.git')) {\n      repoName = repoName.slice(0, -4);\n    }\n\n    if (repoName.includes('/')) {\n      return repoName.split('/').pop() || null;\n    }\n\n    return null;\n  }\n}\n"],
  "mappings": "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MAAK,UAAU;AAAA,MAAK,UAAU;AAAA,MACxD,UAAU;AAAA,MAAM,UAAU;AAAA,MAAK,UAAU;AAAA,MAAK,UAAU;AAAA,MAAK,UAAU;AAAA,MACvE,UAAU;AAAA,MAAM,UAAU;AAAA,MAAK,UAAU;AAAA,MAAK,UAAU;AAAA,MAAK,UAAU;AAAA,MACvE,UAAU;AAAA,MAAM,UAAU;AAAA,MAC1B,UAAU;AAAA,MAAM,UAAU;AAAA,MAAK,UAAU;AAAA,MACzC,UAAU;AAAA,MAAM,UAAU;AAAA,MAAK,UAAU;AAAA,MAAK,UAAU;AAAA,MAAK,UAAU;AAAA,MACvE,UAAU;AAAA,MAAM,UAAU;AAAA,MAAK,UAAU;AAAA,MAAK,UAAU;AAAA,MAAK,UAAU;AAAA,MACvE,UAAU;AAAA,MAAM,UAAU;AAAA,MAAK,UAAU;AAAA,MAAK,UAAU;AAAA,MACxD,UAAU;AAAA,MAAM,UAAU;AAAA,MAAK,UAAU;AAAA,MAAK,UAAU;AAAA,MACxD,UAAU;AAAA,MAAM,UAAU;AAAA,MAAK,UAAU;AAAA,MACzC,UAAU;AAAA,MAAM,UAAU;AAAA,MAAK,UAAU;AAAA,MACzC,UAAU;AAAA,MAAM,UAAU;AAAA,MAAK,UAAU;AAAA,MACzC,UAAU;AAAA,MAAM,UAAU;AAAA,MAAK,UAAU;AAAA,MACzC,UAAU;AAAA,MAAM,UAAU;AAAA,MAAK,UAAU;AAAA,MAAK,UAAU;AAAA,MACxD,UAAU;AAAA,MAAM,UAAU;AAAA,MAAK,UAAU;AAAA,MAAK,UAAU;AAAA,MACxD,UAAU;AAAA,MAAM,UAAU;AAAA,MAAK,UAAU;AAAA,MACzC,UAAU;AAAA,MAAM,UAAU;AAAA,MAAK,UAAU;AAAA,MACzC,UAAU;AAAA,MAAM,UAAU;AAAA,MAAK,UAAU;AAAA,MAAK,UAAU;AAAA,MAAK,UAAU;AAAA,MAAK,UAAU;AAAA,MACtF,UAAU;AAAA,MAAM,UAAU;AAAA,MAAK,UAAU;AAAA,MAAK,UAAU;AAAA,MAAK,UAAU;AAAA,MAAK,UAAU;AAAA,MACtF,UAAU;AAAA,MAAM,UAAU;AAAA,MAC1B,UAAU;AAAA,MAAM,UAAU;AAAA,MAAK,UAAU;AAAA,MACzC,UAAU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AG;AAAA,gBAAG;AAAA,gBAAK;AAAA,gBAAI;AAAA,gBAAG;AAAA,gBAAK;AAAA,gBAAI;AAAA,gBAAG;AAAA,gBAAK;AAAA,gBAAI;AAAA,gBAAI;AAAA,gBAAK;AAAA,gBAAK;AAAA,gBAAI;AAAA,gBAAG;AAAA,gBAChE;AAAA,gBAAI;AAAA,gBAAG;AAAA,gBAAK;AAAA,gBAAI;AAAA,gBAAI;AAAA,gBAAK;AAAA,gBAAK;AAAA,gBAAK;AAAA,gBAAI;AAAA,gBAAG;AAAA,gBAAI;AAAA,gBAAI;AAAA,gBAAK;AAAA,gBAAK;AAAA,gBAAI;AAAA,gBAChE;AAAA,gBAAI;AAAA,gBAAG;AAAA,gBAAK;AAAA;AAAA,gBAEZ;AAAA,gBAAI;AAAA,gBAAG;AAAA,gBAAG;AAAA,gBAAK;AAAA,gBAAI;AAAA,gBAAG;AAAA,gBAAK;AAAA,gBAAI;AAAA,gBAAG;AAAA,gBAAK;AAAA,gBAAI;AAAA,gBAAI;AAAA,gBAAK;AAAA,gBAAK;AAAA,gBAAI;AAAA,gBAAG;AAAA,gBAChE;AAAA,gBAAI;AAAA,gBAAG;AAAA,gBAAK;AAAA,gBAAI;AAAA,gBAAI;AAAA,gBAAK;AAAA,gBAAK;AAAA,gBAAK;AAAA,gBAAI;AAAA,gBAAG;AAAA,gBAAI;AAAA,gBAAI;AAAA,gBAAK;AAAA,gBAAK;AAAA,gBAAI;AAAA,gBAChE;AAAA,gBAAI;AAAA,gBAAG;AAAA,gBAAK;AAAA;AAAA,gBAEZ;AAAA,gBAAI;AAAA,gBAAG;AAAA,gBAAG;AAAA,gBAAK;AAAA,gBAAI;AAAA,gBAAG;AAAA,gBAAK;AAAA,gBAAI;AAAA,gBAAG;AAAA,gBAAK;AAAA,gBAAI;AAAA,gBAAI;AAAA,gBAAK;AAAA,gBAAK;AAAA,gBAAI;AAAA,gBAAG;AAAA,gBAChE;AAAA,gBAAI;AAAA,gBAAG;AAAA,gBAAK;AAAA,gBAAI;AAAA,gBAAI;AAAA,gBAAK;AAAA,gBAAK;AAAA,gBAAK;AAAA,gBAAI;AAAA,gBAAG;AAAA,gBAAI;AAAA,gBAAI;AAAA,gBAAK;AAAA,gBAAK;AAAA,gBAAI;AAAA,gBAChE;AAAA,gBAAI;AAAA,gBAAG;AAAA,gBAAK;AAAA;AAAA,gBAEZ;AAAA,gBAAI;AAAA,gBAAG;AAAA,gBAAG;AAAA,gBAAK;AAAA,gBAAI;AAAA,gBAAG;AAAA,gBAAK;AAAA,gBAAI;AAAA,gBAAG;AAAA,gBAAK;AAAA,gBAAI;AAAA,gBAAI;AAAA,gBAAK;AAAA,gBAAK;AAAA,gBAAI;AAAA,gBAAG;AAAA,gBAChE;AAAA,gBAAI;AAAA,gBAAG;AAAA,gBAAK;AAAA,gBAAI;AAAA,gBAAI;AAAA,gBAAK;AAAA,gBAAK;AAAA,gBAAK;AAAA,gBAAI;AAAA,gBAAG;AAAA,gBAAI;AAAA,gBAAI;AAAA,gBAAK;AAAA,gBAAK;AAAA,gBAAI;AAAA,gBAChE;AAAA,gBAAI;AAAA,gBAAG;AAAA,gBAAK;AAAA,cACd,CAAC;AAAA,YACH;AAAA,YACA,CAAC;AAAA,UACH,EAAE;AAAA,QACJ,QAAQ;AAAA,QAER;AAYA,iBAAS,KAAK,KAAK,MAAM,UAAU;AAKjC,eAAK,MAAM,MAAM;AAMjB,eAAK,OAAO,OAAO;AAMnB,eAAK,WAAW,CAAC,CAAC;AAAA,QACpB;AAyBA,aAAK,UAAU;AACf,eAAO,eAAe,KAAK,WAAW,cAAc;AAAA,UAClD,OAAO;AAAA,QACT,CAAC;AAQD,iBAAS,OAAO,KAAK;AACnB,kBAAQ,OAAO,IAAI,YAAY,OAAO;AAAA,QACxC;AAQA,iBAAS,MAAM,OAAO;AACpB,cAAI,IAAI,KAAK,MAAM,QAAQ,CAAC,KAAK;AACjC,iBAAO,QAAQ,KAAK,IAAI;AAAA,QAC1B;AAQA,aAAK,SAAS;AAOd,YAAI,YAAY,CAAC;AAOjB,YAAI,aAAa,CAAC;AAQlB,iBAAS,QAAQ,OAAO,UAAU;AAChC,cAAI,KAAK,WAAW;AACpB,cAAI,UAAU;AACZ,uBAAW;AACX,gBAAK,QAAQ,KAAK,SAAS,QAAQ,KAAM;AACvC,0BAAY,WAAW,KAAK;AAC5B,kBAAI,UAAW,QAAO;AAAA,YACxB;AACA,kBAAM,SAAS,OAAO,GAAG,IAAI;AAC7B,gBAAI,MAAO,YAAW,KAAK,IAAI;AAC/B,mBAAO;AAAA,UACT,OAAO;AACL,qBAAS;AACT,gBAAK,QAAQ,QAAQ,SAAS,QAAQ,KAAM;AAC1C,0BAAY,UAAU,KAAK;AAC3B,kBAAI,UAAW,QAAO;AAAA,YACxB;AACA,kBAAM,SAAS,OAAO,QAAQ,IAAI,KAAK,GAAG,KAAK;AAC/C,gBAAI,MAAO,WAAU,KAAK,IAAI;AAC9B,mBAAO;AAAA,UACT;AAAA,QACF;AASA,aAAK,UAAU;AAQf,iBAAS,WAAW,OAAO,UAAU;AACnC,cAAI,MAAM,KAAK,EAAG,QAAO,WAAW,QAAQ;AAC5C,cAAI,UAAU;AACZ,gBAAI,QAAQ,EAAG,QAAO;AACtB,gBAAI,SAAS,eAAgB,QAAO;AAAA,UACtC,OAAO;AACL,gBAAI,SAAS,CAAC,eAAgB,QAAO;AACrC,gBAAI,QAAQ,KAAK,eAAgB,QAAO;AAAA,UAC1C;AACA,cAAI,QAAQ,EAAG,QAAO,WAAW,CAAC,OAAO,QAAQ,EAAE,IAAI;AACvD,iBAAO;AAAA,YACL,QAAQ,iBAAiB;AAAA,YACxB,QAAQ,iBAAkB;AAAA,YAC3B;AAAA,UACF;AAAA,QACF;AASA,aAAK,aAAa;AASlB,iBAAS,SAAS,SAAS,UAAU,UAAU;AAC7C,iBAAO,IAAI,KAAK,SAAS,UAAU,QAAQ;AAAA,QAC7C;AAWA,aAAK,WAAW;AAShB,YAAI,UAAU,KAAK;AASnB,iBAAS,WAAW,KAAK,UAAU,OAAO;AACxC,cAAI,IAAI,WAAW,EAAG,OAAM,MAAM,cAAc;AAChD,cAAI,OAAO,aAAa,UAAU;AAEhC,oBAAQ;AACR,uBAAW;AAAA,UACb,OAAO;AACL,uBAAW,CAAC,CAAC;AAAA,UACf;AACA,cACE,QAAQ,SACR,QAAQ,cACR,QAAQ,eACR,QAAQ;AAER,mBAAO,WAAW,QAAQ;AAC5B,kBAAQ,SAAS;AACjB,cAAI,QAAQ,KAAK,KAAK,MAAO,OAAM,WAAW,OAAO;AACrD,cAAI;AACJ,eAAK,IAAI,IAAI,QAAQ,GAAG,KAAK,EAAG,OAAM,MAAM,iBAAiB;AAAA,mBACpD,MAAM,GAAG;AAChB,mBAAO,WAAW,IAAI,UAAU,CAAC,GAAG,UAAU,KAAK,EAAE,IAAI;AAAA,UAC3D;AAIA,cAAI,eAAe,WAAW,QAAQ,OAAO,CAAC,CAAC;AAC/C,cAAI,SAAS;AACb,mBAAS,IAAI,GAAG,IAAI,IAAI,QAAQ,KAAK,GAAG;AACtC,gBAAI,OAAO,KAAK,IAAI,GAAG,IAAI,SAAS,CAAC,GACnC,QAAQ,SAAS,IAAI,UAAU,GAAG,IAAI,IAAI,GAAG,KAAK;AACpD,gBAAI,OAAO,GAAG;AACZ,kBAAI,QAAQ,WAAW,QAAQ,OAAO,IAAI,CAAC;AAC3C,uBAAS,OAAO,IAAI,KAAK,EAAE,IAAI,WAAW,KAAK,CAAC;AAAA,YAClD,OAAO;AACL,uBAAS,OAAO,IAAI,YAAY;AAChC,uBAAS,OAAO,IAAI,WAAW,KAAK,CAAC;AAAA,YACvC;AAAA,UACF;AACA,iBAAO,WAAW;AAClB,iBAAO;AAAA,QACT;AAUA,aAAK,aAAa;AASlB,iBAAS,UAAU,KAAK,UAAU;AAChC,cAAI,OAAO,QAAQ,SAAU,QAAO,WAAW,KAAK,QAAQ;AAC5D,cAAI,OAAO,QAAQ,SAAU,QAAO,WAAW,KAAK,QAAQ;AAE5D,iBAAO;AAAA,YACL,IAAI;AAAA,YACJ,IAAI;AAAA,YACJ,OAAO,aAAa,YAAY,WAAW,IAAI;AAAA,UACjD;AAAA,QACF;AASA,aAAK,YAAY;AAUjB,YAAI,iBAAiB,KAAK;AAO1B,YAAI,iBAAiB,KAAK;AAO1B,YAAI,iBAAiB,iBAAiB;AAOtC,YAAI,iBAAiB,iBAAiB;AAOtC,YAAI,iBAAiB,iBAAiB;AAOtC,YAAI,aAAa,QAAQ,cAAc;AAMvC,YAAI,OAAO,QAAQ,CAAC;AAMpB,aAAK,OAAO;AAMZ,YAAI,QAAQ,QAAQ,GAAG,IAAI;AAM3B,aAAK,QAAQ;AAMb,YAAI,MAAM,QAAQ,CAAC;AAMnB,aAAK,MAAM;AAMX,YAAI,OAAO,QAAQ,GAAG,IAAI;AAM1B,aAAK,OAAO;AAMZ,YAAI,UAAU,QAAQ,EAAE;AAMxB,aAAK,UAAU;AAMf,YAAI,YAAY,SAAS,aAAa,GAAG,aAAa,GAAG,KAAK;AAM9D,aAAK,YAAY;AAMjB,YAAI,qBAAqB,SAAS,aAAa,GAAG,aAAa,GAAG,IAAI;AAMtE,aAAK,qBAAqB;AAM1B,YAAI,YAAY,SAAS,GAAG,aAAa,GAAG,KAAK;AAMjD,aAAK,YAAY;AAMjB,YAAI,gBAAgB,KAAK;AAOzB,sBAAc,QAAQ,SAAS,QAAQ;AACrC,iBAAO,KAAK,WAAW,KAAK,QAAQ,IAAI,KAAK;AAAA,QAC/C;AAOA,sBAAc,WAAW,SAAS,WAAW;AAC3C,cAAI,KAAK;AACP,oBAAQ,KAAK,SAAS,KAAK,kBAAkB,KAAK,QAAQ;AAC5D,iBAAO,KAAK,OAAO,kBAAkB,KAAK,QAAQ;AAAA,QACpD;AAUA,sBAAc,WAAW,SAAS,SAAS,OAAO;AAChD,kBAAQ,SAAS;AACjB,cAAI,QAAQ,KAAK,KAAK,MAAO,OAAM,WAAW,OAAO;AACrD,cAAI,KAAK,OAAO,EAAG,QAAO;AAC1B,cAAI,KAAK,WAAW,GAAG;AAErB,gBAAI,KAAK,GAAG,SAAS,GAAG;AAGtB,kBAAI,YAAY,WAAW,KAAK,GAC9B,MAAM,KAAK,IAAI,SAAS,GACxB,OAAO,IAAI,IAAI,SAAS,EAAE,IAAI,IAAI;AACpC,qBAAO,IAAI,SAAS,KAAK,IAAI,KAAK,MAAM,EAAE,SAAS,KAAK;AAAA,YAC1D,MAAO,QAAO,MAAM,KAAK,IAAI,EAAE,SAAS,KAAK;AAAA,UAC/C;AAIA,cAAI,eAAe,WAAW,QAAQ,OAAO,CAAC,GAAG,KAAK,QAAQ,GAC5D,MAAM;AACR,cAAI,SAAS;AACb,iBAAO,MAAM;AACX,gBAAI,SAAS,IAAI,IAAI,YAAY,GAC/B,SAAS,IAAI,IAAI,OAAO,IAAI,YAAY,CAAC,EAAE,MAAM,MAAM,GACvD,SAAS,OAAO,SAAS,KAAK;AAChC,kBAAM;AACN,gBAAI,IAAI,OAAO,EAAG,QAAO,SAAS;AAAA,iBAC7B;AACH,qBAAO,OAAO,SAAS,EAAG,UAAS,MAAM;AACzC,uBAAS,KAAK,SAAS;AAAA,YACzB;AAAA,UACF;AAAA,QACF;AAOA,sBAAc,cAAc,SAAS,cAAc;AACjD,iBAAO,KAAK;AAAA,QACd;AAOA,sBAAc,sBAAsB,SAAS,sBAAsB;AACjE,iBAAO,KAAK,SAAS;AAAA,QACvB;AAOA,sBAAc,aAAa,SAAS,aAAa;AAC/C,iBAAO,KAAK;AAAA,QACd;AAOA,sBAAc,qBAAqB,SAAS,qBAAqB;AAC/D,iBAAO,KAAK,QAAQ;AAAA,QACtB;AAOA,sBAAc,gBAAgB,SAAS,gBAAgB;AACrD,cAAI,KAAK,WAAW;AAElB,mBAAO,KAAK,GAAG,SAAS,IAAI,KAAK,KAAK,IAAI,EAAE,cAAc;AAC5D,cAAI,MAAM,KAAK,QAAQ,IAAI,KAAK,OAAO,KAAK;AAC5C,mBAAS,MAAM,IAAI,MAAM,GAAG,MAAO,MAAK,MAAO,KAAK,QAAS,EAAG;AAChE,iBAAO,KAAK,QAAQ,IAAI,MAAM,KAAK,MAAM;AAAA,QAC3C;AAOA,sBAAc,gBAAgB,SAAS,gBAAgB;AAErD,cAAI,YAAY,KAAK,QAAQ;AAE7B,cAAI,CAAC,UAAW,QAAO;AAEvB,cAAI,KAAK,SAAU,QAAO;AAE1B,iBAAO,cAAc,MAAM,EAAE,KAAK,QAAQ,KAAK,KAAK,SAAS;AAAA,QAC/D;AAOA,sBAAc,SAAS,SAAS,SAAS;AACvC,iBAAO,KAAK,SAAS,KAAK,KAAK,QAAQ;AAAA,QACzC;AAMA,sBAAc,MAAM,cAAc;AAOlC,sBAAc,aAAa,SAAS,aAAa;AAC/C,iBAAO,CAAC,KAAK,YAAY,KAAK,OAAO;AAAA,QACvC;AAOA,sBAAc,aAAa,SAAS,aAAa;AAC/C,iBAAO,KAAK,YAAY,KAAK,QAAQ;AAAA,QACvC;AAOA,sBAAc,QAAQ,SAAS,QAAQ;AACrC,kBAAQ,KAAK,MAAM,OAAO;AAAA,QAC5B;AAOA,sBAAc,SAAS,SAAS,SAAS;AACvC,kBAAQ,KAAK,MAAM,OAAO;AAAA,QAC5B;AAQA,sBAAc,SAAS,SAAS,OAAO,OAAO;AAC5C,cAAI,CAAC,OAAO,KAAK,EAAG,SAAQ,UAAU,KAAK;AAC3C,cACE,KAAK,aAAa,MAAM,YACxB,KAAK,SAAS,OAAO,KACrB,MAAM,SAAS,OAAO;AAEtB,mBAAO;AACT,iBAAO,KAAK,SAAS,MAAM,QAAQ,KAAK,QAAQ,MAAM;AAAA,QACxD;AAQA,sBAAc,KAAK,cAAc;AAQjC,sBAAc,YAAY,SAAS,UAAU,OAAO;AAClD,iBAAO,CAAC,KAAK;AAAA;AAAA,YAAmB;AAAA,UAAK;AAAA,QACvC;AAQA,sBAAc,MAAM,cAAc;AAQlC,sBAAc,KAAK,cAAc;AAQjC,sBAAc,WAAW,SAAS,SAAS,OAAO;AAChD,iBAAO,KAAK;AAAA;AAAA,YAAqB;AAAA,UAAK,IAAI;AAAA,QAC5C;AAQA,sBAAc,KAAK,cAAc;AAQjC,sBAAc,kBAAkB,SAAS,gBAAgB,OAAO;AAC9D,iBAAO,KAAK;AAAA;AAAA,YAAqB;AAAA,UAAK,KAAK;AAAA,QAC7C;AAQA,sBAAc,MAAM,cAAc;AAQlC,sBAAc,KAAK,cAAc;AAQjC,sBAAc,cAAc,SAAS,YAAY,OAAO;AACtD,iBAAO,KAAK;AAAA;AAAA,YAAqB;AAAA,UAAK,IAAI;AAAA,QAC5C;AAQA,sBAAc,KAAK,cAAc;AAQjC,sBAAc,qBAAqB,SAAS,mBAAmB,OAAO;AACpE,iBAAO,KAAK;AAAA;AAAA,YAAqB;AAAA,UAAK,KAAK;AAAA,QAC7C;AAQA,sBAAc,MAAM,cAAc;AAQlC,sBAAc,KAAK,cAAc;AASjC,sBAAc,UAAU,SAAS,QAAQ,OAAO;AAC9C,cAAI,CAAC,OAAO,KAAK,EAAG,SAAQ,UAAU,KAAK;AAC3C,cAAI,KAAK,GAAG,KAAK,EAAG,QAAO;AAC3B,cAAI,UAAU,KAAK,WAAW,GAC5B,WAAW,MAAM,WAAW;AAC9B,cAAI,WAAW,CAAC,SAAU,QAAO;AACjC,cAAI,CAAC,WAAW,SAAU,QAAO;AAEjC,cAAI,CAAC,KAAK,SAAU,QAAO,KAAK,IAAI,KAAK,EAAE,WAAW,IAAI,KAAK;AAE/D,iBAAO,MAAM,SAAS,IAAI,KAAK,SAAS,KACrC,MAAM,SAAS,KAAK,QAAQ,MAAM,QAAQ,IAAI,KAAK,QAAQ,IAC1D,KACA;AAAA,QACN;AASA,sBAAc,OAAO,cAAc;AAOnC,sBAAc,SAAS,SAAS,SAAS;AACvC,cAAI,CAAC,KAAK,YAAY,KAAK,GAAG,SAAS,EAAG,QAAO;AACjD,iBAAO,KAAK,IAAI,EAAE,IAAI,GAAG;AAAA,QAC3B;AAOA,sBAAc,MAAM,cAAc;AAQlC,sBAAc,MAAM,SAAS,IAAI,QAAQ;AACvC,cAAI,CAAC,OAAO,MAAM,EAAG,UAAS,UAAU,MAAM;AAI9C,cAAI,MAAM,KAAK,SAAS;AACxB,cAAI,MAAM,KAAK,OAAO;AACtB,cAAI,MAAM,KAAK,QAAQ;AACvB,cAAI,MAAM,KAAK,MAAM;AACrB,cAAI,MAAM,OAAO,SAAS;AAC1B,cAAI,MAAM,OAAO,OAAO;AACxB,cAAI,MAAM,OAAO,QAAQ;AACzB,cAAI,MAAM,OAAO,MAAM;AACvB,cAAI,MAAM,GACR,MAAM,GACN,MAAM,GACN,MAAM;AACR,iBAAO,MAAM;AACb,iBAAO,QAAQ;AACf,iBAAO;AACP,iBAAO,MAAM;AACb,iBAAO,QAAQ;AACf,iBAAO;AACP,iBAAO,MAAM;AACb,iBAAO,QAAQ;AACf,iBAAO;AACP,iBAAO,MAAM;AACb,iBAAO;AACP,iBAAO,SAAU,OAAO,KAAM,KAAM,OAAO,KAAM,KAAK,KAAK,QAAQ;AAAA,QACrE;AAQA,sBAAc,WAAW,SAAS,SAAS,YAAY;AACrD,cAAI,CAAC,OAAO,UAAU,EAAG,cAAa,UAAU,UAAU;AAC1D,iBAAO,KAAK,IAAI,WAAW,IAAI,CAAC;AAAA,QAClC;AAQA,sBAAc,MAAM,cAAc;AAQlC,sBAAc,WAAW,SAAS,SAAS,YAAY;AACrD,cAAI,KAAK,OAAO,EAAG,QAAO;AAC1B,cAAI,CAAC,OAAO,UAAU,EAAG,cAAa,UAAU,UAAU;AAG1D,cAAI,MAAM;AACR,gBAAI,MAAM,KAAK,KAAK;AAAA,cAClB,KAAK;AAAA,cACL,KAAK;AAAA,cACL,WAAW;AAAA,cACX,WAAW;AAAA,YACb;AACA,mBAAO,SAAS,KAAK,KAAK,UAAU,EAAE,GAAG,KAAK,QAAQ;AAAA,UACxD;AACA,cAAI,WAAW,OAAO,EAAG,QAAO,KAAK,WAAW,QAAQ;AACxD,cAAI,KAAK,GAAG,SAAS,EAAG,QAAO,WAAW,MAAM,IAAI,YAAY;AAChE,cAAI,WAAW,GAAG,SAAS,EAAG,QAAO,KAAK,MAAM,IAAI,YAAY;AAChE,cAAI,KAAK,WAAW,GAAG;AACrB,gBAAI,WAAW,WAAW,EAAG,QAAO,KAAK,IAAI,EAAE,IAAI,WAAW,IAAI,CAAC;AAAA,gBAC9D,QAAO,KAAK,IAAI,EAAE,IAAI,UAAU,EAAE,IAAI;AAAA,UAC7C,WAAW,WAAW,WAAW;AAC/B,mBAAO,KAAK,IAAI,WAAW,IAAI,CAAC,EAAE,IAAI;AAGxC,cAAI,KAAK,GAAG,UAAU,KAAK,WAAW,GAAG,UAAU;AACjD,mBAAO;AAAA,cACL,KAAK,SAAS,IAAI,WAAW,SAAS;AAAA,cACtC,KAAK;AAAA,YACP;AAKF,cAAI,MAAM,KAAK,SAAS;AACxB,cAAI,MAAM,KAAK,OAAO;AACtB,cAAI,MAAM,KAAK,QAAQ;AACvB,cAAI,MAAM,KAAK,MAAM;AACrB,cAAI,MAAM,WAAW,SAAS;AAC9B,cAAI,MAAM,WAAW,OAAO;AAC5B,cAAI,MAAM,WAAW,QAAQ;AAC7B,cAAI,MAAM,WAAW,MAAM;AAC3B,cAAI,MAAM,GACR,MAAM,GACN,MAAM,GACN,MAAM;AACR,iBAAO,MAAM;AACb,iBAAO,QAAQ;AACf,iBAAO;AACP,iBAAO,MAAM;AACb,iBAAO,QAAQ;AACf,iBAAO;AACP,iBAAO,MAAM;AACb,iBAAO,QAAQ;AACf,iBAAO;AACP,iBAAO,MAAM;AACb,iBAAO,QAAQ;AACf,iBAAO;AACP,iBAAO,MAAM;AACb,iBAAO,QAAQ;AACf,iBAAO;AACP,iBAAO,MAAM;AACb,iBAAO,QAAQ;AACf,iBAAO;AACP,iBAAO,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM;AACjD,iBAAO;AACP,iBAAO,SAAU,OAAO,KAAM,KAAM,OAAO,KAAM,KAAK,KAAK,QAAQ;AAAA,QACrE;AAQA,sBAAc,MAAM,cAAc;AASlC,sBAAc,SAAS,SAAS,OAAO,SAAS;AAC9C,cAAI,CAAC,OAAO,OAAO,EAAG,WAAU,UAAU,OAAO;AACjD,cAAI,QAAQ,OAAO,EAAG,OAAM,MAAM,kBAAkB;AAGpD,cAAI,MAAM;AAIR,gBACE,CAAC,KAAK,YACN,KAAK,SAAS,eACd,QAAQ,QAAQ,MAChB,QAAQ,SAAS,IACjB;AAEA,qBAAO;AAAA,YACT;AACA,gBAAI,OAAO,KAAK,WAAW,KAAK,OAAO,IAAI,KAAK,OAAO;AAAA,cACrD,KAAK;AAAA,cACL,KAAK;AAAA,cACL,QAAQ;AAAA,cACR,QAAQ;AAAA,YACV;AACA,mBAAO,SAAS,KAAK,KAAK,UAAU,EAAE,GAAG,KAAK,QAAQ;AAAA,UACxD;AACA,cAAI,KAAK,OAAO,EAAG,QAAO,KAAK,WAAW,QAAQ;AAClD,cAAI,QAAQ,KAAK;AACjB,cAAI,CAAC,KAAK,UAAU;AAGlB,gBAAI,KAAK,GAAG,SAAS,GAAG;AACtB,kBAAI,QAAQ,GAAG,GAAG,KAAK,QAAQ,GAAG,OAAO;AACvC,uBAAO;AAAA,uBACA,QAAQ,GAAG,SAAS,EAAG,QAAO;AAAA,mBAClC;AAEH,oBAAI,WAAW,KAAK,IAAI,CAAC;AACzB,yBAAS,SAAS,IAAI,OAAO,EAAE,IAAI,CAAC;AACpC,oBAAI,OAAO,GAAG,IAAI,GAAG;AACnB,yBAAO,QAAQ,WAAW,IAAI,MAAM;AAAA,gBACtC,OAAO;AACL,wBAAM,KAAK,IAAI,QAAQ,IAAI,MAAM,CAAC;AAClC,wBAAM,OAAO,IAAI,IAAI,IAAI,OAAO,CAAC;AACjC,yBAAO;AAAA,gBACT;AAAA,cACF;AAAA,YACF,WAAW,QAAQ,GAAG,SAAS,EAAG,QAAO,KAAK,WAAW,QAAQ;AACjE,gBAAI,KAAK,WAAW,GAAG;AACrB,kBAAI,QAAQ,WAAW,EAAG,QAAO,KAAK,IAAI,EAAE,IAAI,QAAQ,IAAI,CAAC;AAC7D,qBAAO,KAAK,IAAI,EAAE,IAAI,OAAO,EAAE,IAAI;AAAA,YACrC,WAAW,QAAQ,WAAW,EAAG,QAAO,KAAK,IAAI,QAAQ,IAAI,CAAC,EAAE,IAAI;AACpE,kBAAM;AAAA,UACR,OAAO;AAGL,gBAAI,CAAC,QAAQ,SAAU,WAAU,QAAQ,WAAW;AACpD,gBAAI,QAAQ,GAAG,IAAI,EAAG,QAAO;AAC7B,gBAAI,QAAQ,GAAG,KAAK,KAAK,CAAC,CAAC;AAEzB,qBAAO;AACT,kBAAM;AAAA,UACR;AAOA,gBAAM;AACN,iBAAO,IAAI,IAAI,OAAO,GAAG;AAGvB,qBAAS,KAAK,IAAI,GAAG,KAAK,MAAM,IAAI,SAAS,IAAI,QAAQ,SAAS,CAAC,CAAC;AAIpE,gBAAI,OAAO,KAAK,KAAK,KAAK,IAAI,MAAM,IAAI,KAAK,GAAG,GAC9C,QAAQ,QAAQ,KAAK,IAAI,QAAQ,GAAG,OAAO,EAAE,GAG7C,YAAY,WAAW,MAAM,GAC7B,YAAY,UAAU,IAAI,OAAO;AACnC,mBAAO,UAAU,WAAW,KAAK,UAAU,GAAG,GAAG,GAAG;AAClD,wBAAU;AACV,0BAAY,WAAW,QAAQ,KAAK,QAAQ;AAC5C,0BAAY,UAAU,IAAI,OAAO;AAAA,YACnC;AAIA,gBAAI,UAAU,OAAO,EAAG,aAAY;AACpC,kBAAM,IAAI,IAAI,SAAS;AACvB,kBAAM,IAAI,IAAI,SAAS;AAAA,UACzB;AACA,iBAAO;AAAA,QACT;AAQA,sBAAc,MAAM,cAAc;AAQlC,sBAAc,SAAS,SAAS,OAAO,SAAS;AAC9C,cAAI,CAAC,OAAO,OAAO,EAAG,WAAU,UAAU,OAAO;AAGjD,cAAI,MAAM;AACR,gBAAI,OAAO,KAAK,WAAW,KAAK,OAAO,IAAI,KAAK,OAAO;AAAA,cACrD,KAAK;AAAA,cACL,KAAK;AAAA,cACL,QAAQ;AAAA,cACR,QAAQ;AAAA,YACV;AACA,mBAAO,SAAS,KAAK,KAAK,UAAU,EAAE,GAAG,KAAK,QAAQ;AAAA,UACxD;AACA,iBAAO,KAAK,IAAI,KAAK,IAAI,OAAO,EAAE,IAAI,OAAO,CAAC;AAAA,QAChD;AAQA,sBAAc,MAAM,cAAc;AAQlC,sBAAc,MAAM,cAAc;AAOlC,sBAAc,MAAM,SAAS,MAAM;AACjC,iBAAO,SAAS,CAAC,KAAK,KAAK,CAAC,KAAK,MAAM,KAAK,QAAQ;AAAA,QACtD;AAOA,sBAAc,oBAAoB,SAAS,oBAAoB;AAC7D,iBAAO,KAAK,OAAO,KAAK,MAAM,KAAK,IAAI,IAAI,KAAK,MAAM,KAAK,GAAG,IAAI;AAAA,QACpE;AAQA,sBAAc,MAAM,cAAc;AAOlC,sBAAc,qBAAqB,SAAS,qBAAqB;AAC/D,iBAAO,KAAK,MAAM,MAAM,KAAK,GAAG,IAAI,MAAM,KAAK,IAAI,IAAI;AAAA,QACzD;AAQA,sBAAc,MAAM,cAAc;AAQlC,sBAAc,MAAM,SAAS,IAAI,OAAO;AACtC,cAAI,CAAC,OAAO,KAAK,EAAG,SAAQ,UAAU,KAAK;AAC3C,iBAAO;AAAA,YACL,KAAK,MAAM,MAAM;AAAA,YACjB,KAAK,OAAO,MAAM;AAAA,YAClB,KAAK;AAAA,UACP;AAAA,QACF;AAQA,sBAAc,KAAK,SAAS,GAAG,OAAO;AACpC,cAAI,CAAC,OAAO,KAAK,EAAG,SAAQ,UAAU,KAAK;AAC3C,iBAAO;AAAA,YACL,KAAK,MAAM,MAAM;AAAA,YACjB,KAAK,OAAO,MAAM;AAAA,YAClB,KAAK;AAAA,UACP;AAAA,QACF;AAQA,sBAAc,MAAM,SAAS,IAAI,OAAO;AACtC,cAAI,CAAC,OAAO,KAAK,EAAG,SAAQ,UAAU,KAAK;AAC3C,iBAAO;AAAA,YACL,KAAK,MAAM,MAAM;AAAA,YACjB,KAAK,OAAO,MAAM;AAAA,YAClB,KAAK;AAAA,UACP;AAAA,QACF;AAQA,sBAAc,YAAY,SAAS,UAAU,SAAS;AACpD,cAAI,OAAO,OAAO,EAAG,WAAU,QAAQ,MAAM;AAC7C,eAAK,WAAW,QAAQ,EAAG,QAAO;AAAA,mBACzB,UAAU;AACjB,mBAAO;AAAA,cACL,KAAK,OAAO;AAAA,cACX,KAAK,QAAQ,UAAY,KAAK,QAAS,KAAK;AAAA,cAC7C,KAAK;AAAA,YACP;AAAA,cACG,QAAO,SAAS,GAAG,KAAK,OAAQ,UAAU,IAAK,KAAK,QAAQ;AAAA,QACnE;AAQA,sBAAc,MAAM,cAAc;AAQlC,sBAAc,aAAa,SAAS,WAAW,SAAS;AACtD,cAAI,OAAO,OAAO,EAAG,WAAU,QAAQ,MAAM;AAC7C,eAAK,WAAW,QAAQ,EAAG,QAAO;AAAA,mBACzB,UAAU;AACjB,mBAAO;AAAA,cACJ,KAAK,QAAQ,UAAY,KAAK,QAAS,KAAK;AAAA,cAC7C,KAAK,QAAQ;AAAA,cACb,KAAK;AAAA,YACP;AAAA;AAEA,mBAAO;AAAA,cACL,KAAK,QAAS,UAAU;AAAA,cACxB,KAAK,QAAQ,IAAI,IAAI;AAAA,cACrB,KAAK;AAAA,YACP;AAAA,QACJ;AAQA,sBAAc,MAAM,cAAc;AAQlC,sBAAc,qBAAqB,SAAS,mBAAmB,SAAS;AACtE,cAAI,OAAO,OAAO,EAAG,WAAU,QAAQ,MAAM;AAC7C,eAAK,WAAW,QAAQ,EAAG,QAAO;AAClC,cAAI,UAAU;AACZ,mBAAO;AAAA,cACJ,KAAK,QAAQ,UAAY,KAAK,QAAS,KAAK;AAAA,cAC7C,KAAK,SAAS;AAAA,cACd,KAAK;AAAA,YACP;AACF,cAAI,YAAY,GAAI,QAAO,SAAS,KAAK,MAAM,GAAG,KAAK,QAAQ;AAC/D,iBAAO,SAAS,KAAK,SAAU,UAAU,IAAK,GAAG,KAAK,QAAQ;AAAA,QAChE;AAQA,sBAAc,OAAO,cAAc;AAQnC,sBAAc,QAAQ,cAAc;AAQpC,sBAAc,aAAa,SAAS,WAAW,SAAS;AACtD,cAAI;AACJ,cAAI,OAAO,OAAO,EAAG,WAAU,QAAQ,MAAM;AAC7C,eAAK,WAAW,QAAQ,EAAG,QAAO;AAClC,cAAI,YAAY,GAAI,QAAO,SAAS,KAAK,MAAM,KAAK,KAAK,KAAK,QAAQ;AACtE,cAAI,UAAU,IAAI;AAChB,gBAAI,KAAK;AACT,mBAAO;AAAA,cACJ,KAAK,OAAO,UAAY,KAAK,SAAS;AAAA,cACtC,KAAK,QAAQ,UAAY,KAAK,QAAQ;AAAA,cACvC,KAAK;AAAA,YACP;AAAA,UACF;AACA,qBAAW;AACX,cAAI,KAAK;AACT,iBAAO;AAAA,YACJ,KAAK,QAAQ,UAAY,KAAK,QAAQ;AAAA,YACtC,KAAK,OAAO,UAAY,KAAK,SAAS;AAAA,YACvC,KAAK;AAAA,UACP;AAAA,QACF;AAOA,sBAAc,OAAO,cAAc;AAQnC,sBAAc,cAAc,SAAS,YAAY,SAAS;AACxD,cAAI;AACJ,cAAI,OAAO,OAAO,EAAG,WAAU,QAAQ,MAAM;AAC7C,eAAK,WAAW,QAAQ,EAAG,QAAO;AAClC,cAAI,YAAY,GAAI,QAAO,SAAS,KAAK,MAAM,KAAK,KAAK,KAAK,QAAQ;AACtE,cAAI,UAAU,IAAI;AAChB,gBAAI,KAAK;AACT,mBAAO;AAAA,cACJ,KAAK,QAAQ,IAAM,KAAK,QAAQ;AAAA,cAChC,KAAK,OAAO,IAAM,KAAK,SAAS;AAAA,cACjC,KAAK;AAAA,YACP;AAAA,UACF;AACA,qBAAW;AACX,cAAI,KAAK;AACT,iBAAO;AAAA,YACJ,KAAK,OAAO,IAAM,KAAK,SAAS;AAAA,YAChC,KAAK,QAAQ,IAAM,KAAK,QAAQ;AAAA,YACjC,KAAK;AAAA,UACP;AAAA,QACF;AAOA,sBAAc,OAAO,cAAc;AAOnC,sBAAc,WAAW,SAAS,WAAW;AAC3C,cAAI,CAAC,KAAK,SAAU,QAAO;AAC3B,iBAAO,SAAS,KAAK,KAAK,KAAK,MAAM,KAAK;AAAA,QAC5C;AAOA,sBAAc,aAAa,SAAS,aAAa;AAC/C,cAAI,KAAK,SAAU,QAAO;AAC1B,iBAAO,SAAS,KAAK,KAAK,KAAK,MAAM,IAAI;AAAA,QAC3C;AAQA,sBAAc,UAAU,SAAS,QAAQ,IAAI;AAC3C,iBAAO,KAAK,KAAK,UAAU,IAAI,KAAK,UAAU;AAAA,QAChD;AAOA,sBAAc,YAAY,SAAS,YAAY;AAC7C,cAAI,KAAK,KAAK,MACZ,KAAK,KAAK;AACZ,iBAAO;AAAA,YACL,KAAK;AAAA,YACJ,OAAO,IAAK;AAAA,YACZ,OAAO,KAAM;AAAA,YACd,OAAO;AAAA,YACP,KAAK;AAAA,YACJ,OAAO,IAAK;AAAA,YACZ,OAAO,KAAM;AAAA,YACd,OAAO;AAAA,UACT;AAAA,QACF;AAOA,sBAAc,YAAY,SAAS,YAAY;AAC7C,cAAI,KAAK,KAAK,MACZ,KAAK,KAAK;AACZ,iBAAO;AAAA,YACL,OAAO;AAAA,YACN,OAAO,KAAM;AAAA,YACb,OAAO,IAAK;AAAA,YACb,KAAK;AAAA,YACL,OAAO;AAAA,YACN,OAAO,KAAM;AAAA,YACb,OAAO,IAAK;AAAA,YACb,KAAK;AAAA,UACP;AAAA,QACF;AASA,aAAK,YAAY,SAAS,UAAU,OAAO,UAAU,IAAI;AACvD,iBAAO,KACH,KAAK,YAAY,OAAO,QAAQ,IAChC,KAAK,YAAY,OAAO,QAAQ;AAAA,QACtC;AAQA,aAAK,cAAc,SAAS,YAAY,OAAO,UAAU;AACvD,iBAAO,IAAI;AAAA,YACT,MAAM,CAAC,IAAK,MAAM,CAAC,KAAK,IAAM,MAAM,CAAC,KAAK,KAAO,MAAM,CAAC,KAAK;AAAA,YAC7D,MAAM,CAAC,IAAK,MAAM,CAAC,KAAK,IAAM,MAAM,CAAC,KAAK,KAAO,MAAM,CAAC,KAAK;AAAA,YAC7D;AAAA,UACF;AAAA,QACF;AAQA,aAAK,cAAc,SAAS,YAAY,OAAO,UAAU;AACvD,iBAAO,IAAI;AAAA,YACR,MAAM,CAAC,KAAK,KAAO,MAAM,CAAC,KAAK,KAAO,MAAM,CAAC,KAAK,IAAK,MAAM,CAAC;AAAA,YAC9D,MAAM,CAAC,KAAK,KAAO,MAAM,CAAC,KAAK,KAAO,MAAM,CAAC,KAAK,IAAK,MAAM,CAAC;AAAA,YAC/D;AAAA,UACF;AAAA,QACF;AAGA,YAAI,OAAO,WAAW,YAAY;AAQhC,eAAK,aAAa,SAAS,WAAW,OAAO,UAAU;AACrD,gBAAI,UAAU,OAAO,OAAO,OAAO,IAAI,KAAK,CAAC;AAC7C,gBAAI,WAAW,OAAO,OAAO,OAAO,IAAI,SAAS,OAAO,EAAE,CAAC,CAAC;AAC5D,mBAAO,SAAS,SAAS,UAAU,QAAQ;AAAA,UAC7C;AAGA,eAAK,YAAY,SAAS,oBAAoB,OAAO,UAAU;AAC7D,gBAAI,OAAO,UAAU,SAAU,QAAO,KAAK,WAAW,OAAO,QAAQ;AACrE,mBAAO,UAAU,OAAO,QAAQ;AAAA,UAClC;AAOA,wBAAc,WAAW,SAAS,WAAW;AAC3C,gBAAI,YAAY,OAAO,KAAK,QAAQ,CAAC;AACrC,gBAAI,aAAa,OAAO,KAAK,WAAW,KAAK,SAAS,IAAI,KAAK,IAAI;AACnE,mBAAQ,cAAc,OAAO,EAAE,IAAK;AAAA,UACtC;AAAA,QACF;AACA,YAAI,WAAY,SAAS,UAAU;AAAA,MACrC;AAAA,IACF;AAAA;AAAA;;;;;;;;ACnkDA,QAAA,YAAA;AACA,QAAA,WAAA;AACA,QAAA,aAAA;AAEA,QAAA,SAAA;AAEA,QAAA,OAAA;AAEkB,IAAAG,SAAA,OAAA;AA+BlB,aAAgB,eAAe,KAAW;AACxC,aAAQ,WAAW,OAAS,OAAQ,IAAqB,OAAO,MAAM;IACxE;AAFA,IAAAA,SAAA,iBAAA;AA8DA,QAAY;AAAZ,KAAA,SAAYC,mBAAgB;AAC1B,MAAAA,kBAAA,qBAAA,IAAA;AACA,MAAAA,kBAAA,iBAAA,IAAA;AACA,MAAAA,kBAAA,YAAA,IAAA;IACF,GAJY,mBAAAD,SAAA,qBAAAA,SAAA,mBAAgB,CAAA,EAAA;AA0D5B,QAAM,oBAAiD;MACrD,OAAO;MACP,OAAO;MACP,OAAO;MACP,UAAU;MACV,QAAQ;MACR,MAAM;;AAGR,aAAS,SAAS,UAAkB,MAAY;AAC9C,UAAI,aAAa,IAAI;AACnB,eAAO;aACF;AACL,eAAO,WAAW,MAAM;;IAE5B;AAIA,aAAS,0BACP,KAA8B;AAE9B,aACE,eAAe,SAAS,WACxB,eAAe,SAAS,QACxB,eAAe,SAAS;IAE5B;AAEA,aAAS,gBACP,KAA8B;AAE9B,aAAO,eAAe,SAAS,aAAa,eAAe,SAAS;IACtE;AAEA,aAAS,+BACP,KACA,YAAkB;AAElB,YAAM,UAAU,SAAS,YAAY,IAAI,IAAI;AAC7C,UAAI,0BAA0B,GAAG,GAAG;AAClC,eAAO,CAAC,CAAC,SAAS,GAAG,CAAC;aACjB;AACL,YAAI,gBAAgB,GAAG,KAAK,OAAO,IAAI,WAAW,aAAa;AAC7D,iBAAO,OAAO,KAAK,IAAI,MAAO,EAC3B,IAAI,UAAO;AACV,mBAAO,+BAA+B,IAAI,OAAQ,IAAI,GAAG,OAAO;UAClE,CAAC,EACA,OACC,CAAC,aAAa,iBAAiB,YAAY,OAAO,YAAY,GAC9D,CAAA,CAAE;;;AAIV,aAAO,CAAA;IACT;AAEA,aAAS,mBACP,KACA,SAAgB;AAEhB,aAAO,SAAS,YAAY,QAAc;AACxC,eAAO,IAAI,SAAS,IAAI,OAAO,MAAM,GAAG,OAAO;MACjD;IACF;AAEA,aAAS,iBAAiB,KAAkB;AAC1C,aAAO,SAAS,UAAU,KAAW;AACnC,YAAI,MAAM,QAAQ,GAAG,GAAG;AACtB,gBAAM,IAAI,MAAM,qDAAqD,IAAI,IAAI,+BAA+B;;AAE9G,cAAM,UAAU,IAAI,WAAW,GAAG;AAClC,eAAO,IAAI,OAAO,OAAO,EAAE,OAAM;MACnC;IACF;AAEA,aAAS,iBAAiB,SAA6C;AACrE,cAAQ,WAAW,CAAA,GAAI,OAAO,CAAC,KAAoB,SAAgC;AACjF,mBAAW,CAAC,KAAK,KAAK,KAAK,OAAO,QAAQ,IAAI,GAAG;AAC/C,kBAAQ,KAAK;YACX,KAAK;AACH,kBAAI,qBAAqB,KAAK,KAAK,oBAA2C;AAC9E;YACF;AACE,kBAAI,GAAG,IAAI;;;AAGjB,eAAO;MACT,GACE;QACE,YAAY;QACZ,mBAAmB,iBAAiB;QACpC,sBAAsB,CAAA;OACvB;IAEL;AAEA,aAAS,uBACP,QACA,aACA,SACA,iBAAyB;AAIzB,YAAM,cAA6B,OAAO;AAC1C,YAAM,eAA8B,OAAO;AAC3C,aAAO;QACL,MAAM,MAAM,cAAc,MAAM,OAAO;QACvC,eAAe,CAAC,CAAC,OAAO;QACxB,gBAAgB,CAAC,CAAC,OAAO;QACzB,kBAAkB,iBAAiB,WAAW;QAC9C,oBAAoB,mBAAmB,aAAa,OAAO;QAC3D,mBAAmB,iBAAiB,YAAY;QAChD,qBAAqB,mBAAmB,cAAc,OAAO;;QAE7D,cAAc,UAAU,OAAO,IAAI;QACnC,aAAa,wBAAwB,aAAa,SAAS,eAAe;QAC1E,cAAc,wBAAwB,cAAc,SAAS,eAAe;QAC5E,SAAS,iBAAiB,OAAO,aAAa;;IAElD;AAEA,aAAS,wBACP,SACA,MACA,SACA,iBAAyB;AAEzB,YAAM,MAAyB,CAAA;AAC/B,iBAAW,UAAU,QAAQ,cAAc;AACzC,YAAI,OAAO,IAAI,IAAI,uBACjB,QACA,MACA,SACA,eAAe;;AAGnB,aAAO;IACT;AAEA,aAAS,wBACP,SACA,SACA,iBAAyB;AAEzB,YAAM,oBAEF,QAAQ,aAAa,QAAQ;AACjC,aAAO;QACL,QAAQ;QACR,MAAM,kBAAkB,MAAM,SAC5B,mBACA,iBAAiB;QAEnB,sBAAsB;QACtB,WAAW,iBAAiB,OAAO;QACnC,aAAa,mBAAmB,SAAS,OAAO;;IAEpD;AAEA,aAAS,qBACPE,WACA,iBAAyB;AAEzB,YAAM,iBAEFA,UAAS,aAAa,QAAQ;AAClC,aAAO;QACL,QAAQ;QACR,MAAM,eAAe,MAAM,SAAS,gBAAgB,iBAAiB;QACrE,sBAAsB;;IAE1B;AASA,aAAS,iBACP,KACA,MACA,SACA,iBAAyB;AAEzB,UAAI,eAAe,SAAS,SAAS;AACnC,eAAO,wBAAwB,KAAK,MAAM,SAAS,eAAe;iBACzD,eAAe,SAAS,MAAM;AACvC,eAAO,wBAAwB,KAAK,SAAS,eAAe;iBACnD,eAAe,SAAS,MAAM;AACvC,eAAO,qBAAqB,KAAK,eAAe;aAC3C;AACL,cAAM,IAAI,MAAM,6CAA6C;;IAEjE;AAEA,aAAS,wBACP,MACA,SAAgB;AAEhB,YAAM,MAAyB,CAAA;AAC/B,WAAK,WAAU;AACf,YAAM,iBAAoD,KAAK,aAC7D,QAAQ,EACR;AACF,YAAM,aAAuB,eAAe,IAAI,WAC9C,OAAO,KAAK,WAAW,oBAAoB,OAAO,KAAK,EAAE,OAAM,CAAE,CAAC;AAEpE,iBAAW,CAAC,MAAM,GAAG,KAAK,+BAA+B,MAAM,EAAE,GAAG;AAClE,YAAI,IAAI,IAAI,iBAAiB,KAAK,MAAM,SAAS,UAAU;;AAE7D,aAAO;IACT;AAEA,aAAS,yCACP,sBACA,SAAiB;AAEjB,gBAAU,WAAW,CAAA;AAErB,YAAM,OAAQ,SAAS,KAAkC,eACvD,oBAAoB;AAEtB,WAAK,WAAU;AACf,aAAO,wBAAwB,MAAM,OAAO;IAC9C;AA4BA,aAAgB,KACd,UACA,SAAiB;AAEjB,cAAO,GAAA,OAAA,uBAAsB,UAAU,OAAO,EAAE,KAAK,gBAAa;AAChE,eAAO,wBAAwB,YAAY,OAAQ;MACrD,CAAC;IACH;AAPA,IAAAF,SAAA,OAAA;AASA,aAAgBG,UACd,UACA,SAAiB;AAEjB,YAAM,cAAa,GAAA,OAAA,2BAA0B,UAAU,OAAO;AAC9D,aAAO,wBAAwB,YAAY,OAAQ;IACrD;AANA,IAAAH,SAAA,WAAAG;AAQA,aAAgB,SACd,MACA,SAAiB;AAEjB,gBAAU,WAAW,CAAA;AACrB,YAAM,aAAa,SAAS,KAAK,SAAS,IAAI;AAC9C,iBAAW,WAAU;AACrB,aAAO,wBAAwB,YAAY,OAAQ;IACrD;AARA,IAAAH,SAAA,WAAA;AAUA,aAAgB,gCACd,eACA,SAAiB;AAEjB,YAAM,uBAAuB,WAAW,kBAAkB,OACxD,aAAa;AAGf,aAAO,yCACL,sBACA,OAAO;IAEX;AAZA,IAAAA,SAAA,kCAAA;AAcA,aAAgB,gCACd,eACA,SAAiB;AAEjB,YAAM,uBAAuB,WAAW,kBAAkB,WACxD,aAAa;AAGf,aAAO,yCACL,sBACA,OAAO;IAEX;AAZA,IAAAA,SAAA,kCAAA;AAcA,KAAA,GAAA,OAAA,iBAAe;;;;;;;;;;AC3Df,IAAAI,SAAA,wBAAA;AAubA,IAAAA,SAAA,sBAAA;AAcA,IAAAA,SAAA,+BAAA;AAwBA,IAAAA,SAAA,QAAA;AAz3BA,QAAA,QAAA,QAAA,KAAA;AACA,QAAA,gBAAA;AACA,QAAA,uBAAA;AACA,QAAA,cAAA;AAWA,QAAA,uBAAA;AA4BA,QAAA,UAAA;AACA,QAAA,gBAAA;AA8BA,aAAS,oBAAoB,KAAe;AAC1C,aAAO;QACL,YAAY,IAAI;QAChB,MAAM,IAAI;;IAEd;AAEA,aAAS,uBAAuB,KAAkB;AAChD,aAAO;QACL,eAAe,IAAI;QACnB,MAAM,IAAI;;IAEd;AAEA,aAAS,mBAAmB,KAAc;AACxC,aAAO;QACL,WAAW,IAAI;;IAEnB;AAEA,aAAS,mBAAmB,KAAc;AACxC,aAAO;QACL,WAAW,IAAI;QACf,MAAM,IAAI;;IAEd;AAgBA,QAAM,yBAAyB;AAK/B,QAAM,sBAAsB;AAE5B,QAAa,oBAAb,MAA8B;MAA9B,cAAA;AACW,aAAA,SAAuB,CAAA;AACvB,aAAA,oBAA0B,oBAAI,KAAI;AAClC,aAAA,eAAe;MAU1B;MARE,WAAQ;MAAU;MAClB,kBAAe;AACb,eAAO;UACL,oBAAoB,qBAAqB,KAAK,iBAAiB;UAC/D,mBAAmB,KAAK;UACxB,QAAQ,CAAA;;MAEZ;;AAZF,IAAAA,SAAA,oBAAA;AAeA,QAAa,gBAAb,MAA0B;MAKxB,cAAA;AAJA,aAAA,SAAuB,CAAA;AAEvB,aAAA,eAAe;AAGb,aAAK,oBAAoB,oBAAI,KAAI;MACnC;MAEA,SACE,UACA,aACA,OAAkC;AAElC,cAAM,YAAY,oBAAI,KAAI;AAC1B,aAAK,OAAO,KAAK;UACf;UACA;UACA;UACA,eAAc,UAAK,QAAL,UAAK,SAAA,SAAL,MAAO,UAAS,YAAY,QAAQ;UAClD,kBAAiB,UAAK,QAAL,UAAK,SAAA,SAAL,MAAO,UAAS,eAAe,QAAQ;SACzD;AAED,YAAI,KAAK,OAAO,UAAU,yBAAyB,GAAG;AACpD,eAAK,SAAS,KAAK,OAAO,MAAM,sBAAsB;QACxD;AACA,aAAK,gBAAgB;MACvB;MAEA,kBAAe;AACb,eAAO;UACL,oBAAoB,qBAAqB,KAAK,iBAAiB;UAC/D,mBAAmB,KAAK;UACxB,QAAQ,KAAK,OAAO,IAAI,WAAQ;AAC9B,mBAAO;cACL,aAAa,MAAM;cACnB,UAAU,MAAM;cAChB,WAAW,qBAAqB,MAAM,SAAS;cAC/C,aAAa,MAAM,eACf,oBAAoB,MAAM,YAAY,IACtC;cACJ,gBAAgB,MAAM,kBAClB,uBAAuB,MAAM,eAAe,IAC5C;;UAER,CAAC;;MAEL;;AA/CF,IAAAA,SAAA,gBAAA;AAuDA,QAAa,0BAAb,MAAoC;MAApC,cAAA;AACU,aAAA,kBAAiC,IAAI,cAAA,WAAU;AAC/C,aAAA,qBAAoC,IAAI,cAAA,WAAU;AAClD,aAAA,iBAAgC,IAAI,cAAA,WAAU;AAC9C,aAAA,aAAa;UACnB;YAAA;;UAAA,GAAuB,KAAK;UAC5B;YAAA;;UAAA,GAA0B,KAAK;UAC/B;YAAA;;UAAA,GAAsB,KAAK;;MAuC/B;MApCE,SAAS,OAA6C;AACpD,cAAM,UAAU,KAAK,WAAW,MAAM,IAAI;AAC1C,cAAM,eAAe,QAAQ,KAAK,MAAM,EAAE;AAE1C,YAAI,aAAa,OAAO,QAAQ,IAAG,CAAE,GAAG;AACtC,kBAAQ,WACN,MAAM,IACN;YACE,KAAK;YACL,OAAO;aAET,YAAY;QAEhB,OAAO;AACL,uBAAa,QAAQ,CAAC,EAAE,SAAS;QACnC;MACF;MAEA,WAAW,OAA6C;AACtD,cAAM,UAAU,KAAK,WAAW,MAAM,IAAI;AAC1C,cAAM,eAAe,QAAQ,gBAAgB,MAAM,EAAE;AACrD,YAAI,iBAAiB,QAAW;AAC9B,uBAAa,SAAS;AACtB,cAAI,aAAa,UAAU,GAAG;AAC5B,oBAAQ,kBAAkB,MAAM,EAAE;UACpC;QACF;MACF;MAEA,gBAAa;AACX,eAAO;UACL,UAAU,KAAK;UACf,aAAa,KAAK;UAClB,SAAS,KAAK;;MAElB;;AA7CF,IAAAA,SAAA,0BAAA;AAgDA,QAAa,8BAAb,cAAiD,wBAAuB;MAC7D,WAAQ;MAAU;MAClB,aAAU;MAAU;;AAF/B,IAAAA,SAAA,8BAAA;AAKA,QAAa,sBAAb,MAAgC;MAAhC,cAAA;AACE,aAAA,eAAe;AACf,aAAA,iBAAiB;AACjB,aAAA,cAAc;AACd,aAAA,2BAAwC;MAY1C;MAVE,iBAAc;AACZ,aAAK,gBAAgB;AACrB,aAAK,2BAA2B,oBAAI,KAAI;MAC1C;MACA,mBAAgB;AACd,aAAK,kBAAkB;MACzB;MACA,gBAAa;AACX,aAAK,eAAe;MACtB;;AAfF,IAAAA,SAAA,sBAAA;AAkBA,QAAa,0BAAb,cAA6C,oBAAmB;MACrD,iBAAc;MAAI;MAClB,mBAAgB;MAAI;MACpB,gBAAa;MAAI;;AAH5B,IAAAA,SAAA,0BAAA;AAoFA,QAAM,aAAa;MACjB;QAAA;;MAAA,GAAuB,IAAI,cAAA,WAAU;MACrC;QAAA;;MAAA,GAA0B,IAAI,cAAA,WAAU;MACxC;QAAA;;MAAA,GAAsB,IAAI,cAAA,WAAU;MACpC;QAAA;;MAAA,GAAsB,IAAI,cAAA,WAAU;;AAiCtC,QAAM,qBAAqB,CAAwB,SAAW;AAC5D,UAAI,SAAS;AACb,eAAS,YAAS;AAChB,eAAO;MACT;AAEA,YAAM,YAA6B,WAAW,IAAI;AAElD,aAAO,CACL,MACA,SACA,oBACgB;AAChB,cAAM,KAAK,UAAS;AACpB,cAAM,MAAM,EAAE,IAAI,MAAM,KAAI;AAC5B,YAAI,iBAAiB;AACnB,oBAAU,WAAW,IAAI,EAAE,KAAK,QAAO,CAAE;QAC3C;AACA,eAAO;MACT;IACF;AAEa,IAAAA,SAAA,0BAA0B;MAAkB;;IAAA;AAC5C,IAAAA,SAAA,6BAA6B;MAAkB;;IAAA;AAG/C,IAAAA,SAAA,yBAAyB;MAAkB;;IAAA;AAC3C,IAAAA,SAAA,yBAAyB;MAAkB;;IAAA;AAExD,aAAgB,sBACd,KAAuD;AAEvD,iBAAW,IAAI,IAAI,EAAE,kBAAkB,IAAI,EAAE;IAC/C;AAOA,aAAS,iBAAiB,gBAAsB;AAC9C,YAAM,cAAc,OAAO,SAAS,gBAAgB,EAAE;AACtD,aAAO,CAAE,cAAc,MAAO,GAAG,cAAc,GAAG;IACpD;AAQA,aAAS,eAAe,cAAoB;AAC1C,UAAI,iBAAiB,IAAI;AACvB,eAAO,CAAA;MACT;AACA,YAAM,YAAY,aACf,MAAM,GAAG,EACT,IAAI,aAAW,iBAAiB,OAAO,CAAC;AAC3C,YAAM,SAAmB,CAAA;AACzB,aAAO,OAAO,OAAO,GAAG,SAAS;IACnC;AAEA,aAAS,iBAAiB,WAAiB;AACzC,cAAO,GAAA,MAAA,QAAO,SAAS,KAAK,UAAU,YAAW,EAAG,WAAW,SAAS,MAAK,GAAA,MAAA,QAAO,UAAU,UAAU,CAAC,CAAC;IAC5G;AAOA,aAAS,0BAA0B,WAAiB;AAClD,aAAO,OAAO,KACZ,WAAW,KACT,UAAU,MAAM,GAAG,EAAE,IAAI,aAAW,OAAO,SAAS,OAAO,CAAC,CAAC,CAC9D;IAEL;AAQA,aAAS,wBAAwB,WAAiB;AAChD,WAAI,GAAA,MAAA,QAAO,SAAS,GAAG;AACrB,eAAO,0BAA0B,SAAS;MAC5C,WAAW,iBAAiB,SAAS,GAAG;AACtC,eAAO,0BAA0B,UAAU,UAAU,CAAC,CAAC;MACzD,YAAW,GAAA,MAAA,QAAO,SAAS,GAAG;AAC5B,YAAI;AACJ,YAAI;AACJ,cAAM,mBAAmB,UAAU,QAAQ,IAAI;AAC/C,YAAI,qBAAqB,IAAI;AAC3B,wBAAc;AACd,yBAAe;QACjB,OAAO;AACL,wBAAc,UAAU,UAAU,GAAG,gBAAgB;AACrD,yBAAe,UAAU,UAAU,mBAAmB,CAAC;QACzD;AACA,cAAM,aAAa,OAAO,KAAK,eAAe,WAAW,CAAC;AAC1D,cAAM,cAAc,OAAO,KAAK,eAAe,YAAY,CAAC;AAC5D,cAAM,eAAe,OAAO,MAC1B,KAAK,WAAW,SAAS,YAAY,QACrC,CAAC;AAEH,eAAO,OAAO,OAAO,CAAC,YAAY,cAAc,WAAW,CAAC;MAC9D,OAAO;AACL,eAAO;MACT;IACF;AAEA,aAAS,2BACP,OAAwB;AAExB,cAAQ,OAAO;QACb,KAAK,qBAAA,kBAAkB;AACrB,iBAAO;YACL,OAAO;;QAEX,KAAK,qBAAA,kBAAkB;AACrB,iBAAO;YACL,OAAO;;QAEX,KAAK,qBAAA,kBAAkB;AACrB,iBAAO;YACL,OAAO;;QAEX,KAAK,qBAAA,kBAAkB;AACrB,iBAAO;YACL,OAAO;;QAEX,KAAK,qBAAA,kBAAkB;AACrB,iBAAO;YACL,OAAO;;QAEX;AACE,iBAAO;YACL,OAAO;;MAEb;IACF;AAEA,aAAS,qBAAqB,MAAkB;AAC9C,UAAI,CAAC,MAAM;AACT,eAAO;MACT;AACA,YAAM,mBAAmB,KAAK,QAAO;AACrC,aAAO;QACL,SAAU,mBAAmB,MAAQ;QACrC,OAAQ,mBAAmB,MAAQ;;IAEvC;AAEA,aAAS,kBAAkB,cAA0B;AACnD,YAAM,eAAe,aAAa,QAAO;AACzC,YAAM,aAAkC,CAAA;AACxC,YAAM,gBAAwC,CAAA;AAE9C,mBAAa,SAAS,SAAS,QAAQ,QAAK;AAC1C,mBAAW,KAAK,oBAAoB,GAAG,CAAC,EAAE,GAAG,CAAC;MAChD,CAAC;AAED,mBAAa,SAAS,YAAY,QAAQ,QAAK;AAC7C,sBAAc,KAAK,uBAAuB,GAAG,CAAC,EAAE,GAAG,CAAC;MACtD,CAAC;AAED,aAAO;QACL,KAAK,oBAAoB,aAAa,GAAG;QACzC,MAAM;UACJ,QAAQ,aAAa;UACrB,OAAO,2BAA2B,aAAa,KAAK;UACpD,eAAe,aAAa,YAAY;UACxC,iBAAiB,aAAa,YAAY;UAC1C,cAAc,aAAa,YAAY;UACvC,6BAA6B,qBAC3B,aAAa,YAAY,wBAAwB;UAEnD,OAAO,aAAa,MAAM,gBAAe;;QAE3C,aAAa;QACb,gBAAgB;;IAEpB;AAEA,aAAS,WACP,MACA,UAA2C;AAE3C,YAAM,YAAY,SAAS,KAAK,QAAQ,YAAY,EAAE;AACtD,YAAM,eACJ;QAAU;;MAAA,EAAsB,gBAAgB,SAAS;AAC3D,UAAI,iBAAiB,QAAW;AAC9B,iBAAS;UACP,MAAM,YAAA,OAAO;UACb,SAAS,kCAAkC;SAC5C;AACD;MACF;AACA,eAAS,MAAM,EAAE,SAAS,kBAAkB,YAAY,EAAC,CAAE;IAC7D;AAEA,aAAS,eACP,MACA,UAA+C;AAE/C,YAAM,aACJ,SAAS,KAAK,QAAQ,aAAa,EAAE,KAAK;AAC5C,YAAM,aAA+B,CAAA;AACrC,YAAM,UAAU,SAAS,KAAK,QAAQ,kBAAkB,EAAE;AAC1D,YAAM,iBAAiB;QAAU;;MAAA;AAEjC,UAAI;AACJ,WACE,IAAI,eAAe,WAAW,OAAO,GACrC,CAAC,EAAE,OAAO,eAAe,IAAG,CAAE,KAAK,WAAW,SAAS,YACvD,IAAI,EAAE,KAAI,GACV;AACA,mBAAW,KAAK,kBAAkB,EAAE,QAAQ,CAAC,CAAC,CAAC;MACjD;AAEA,eAAS,MAAM;QACb,SAAS;QACT,KAAK,EAAE,OAAO,eAAe,IAAG,CAAE;OACnC;IACH;AAEA,aAAS,iBAAiB,aAAwB;AAChD,YAAM,eAAe,YAAY,QAAO;AACxC,YAAM,eAAmC,CAAA;AAEzC,mBAAa,iBAAiB,QAAQ,QAAQ,QAAK;AACjD,qBAAa,KAAK,mBAAmB,GAAG,CAAC,EAAE,GAAG,CAAC;MACjD,CAAC;AAED,aAAO;QACL,KAAK,mBAAmB,YAAY,GAAG;QACvC,MAAM;UACJ,eAAe,aAAa,YAAY;UACxC,iBAAiB,aAAa,YAAY;UAC1C,cAAc,aAAa,YAAY;UACvC,6BAA6B,qBAC3B,aAAa,YAAY,wBAAwB;UAEnD,OAAO,aAAa,MAAM,gBAAe;;QAE3C,eAAe;;IAEnB;AAEA,aAAS,UACP,MACA,UAA0C;AAE1C,YAAM,WAAW,SAAS,KAAK,QAAQ,WAAW,EAAE;AACpD,YAAM,gBAAgB;QAAU;;MAAA;AAChC,YAAM,cAAc,cAAc,gBAAgB,QAAQ;AAC1D,UAAI,gBAAgB,QAAW;AAC7B,iBAAS;UACP,MAAM,YAAA,OAAO;UACb,SAAS,iCAAiC;SAC3C;AACD;MACF;AACA,eAAS,MAAM,EAAE,QAAQ,iBAAiB,WAAW,EAAC,CAAE;IAC1D;AAEA,aAAS,WACP,MACA,UAA2C;AAE3C,YAAM,aACJ,SAAS,KAAK,QAAQ,aAAa,EAAE,KAAK;AAC5C,YAAM,UAAU,SAAS,KAAK,QAAQ,iBAAiB,EAAE;AACzD,YAAM,gBAAgB;QAAU;;MAAA;AAChC,YAAM,aAA8B,CAAA;AAEpC,UAAI;AACJ,WACE,IAAI,cAAc,WAAW,OAAO,GACpC,CAAC,EAAE,OAAO,cAAc,IAAG,CAAE,KAAK,WAAW,SAAS,YACtD,IAAI,EAAE,KAAI,GACV;AACA,mBAAW,KAAK,iBAAiB,EAAE,QAAQ,CAAC,CAAC,CAAC;MAChD;AAEA,eAAS,MAAM;QACb,QAAQ;QACR,KAAK,EAAE,OAAO,cAAc,IAAG,CAAE;OAClC;IACH;AAEA,aAAS,cACP,MACA,UAA8C;AAE9C,YAAM,eAAe,SAAS,KAAK,QAAQ,eAAe,EAAE;AAC5D,YAAM,kBACJ;QAAU;;MAAA,EAAyB,gBAAgB,YAAY;AACjE,UAAI,oBAAoB,QAAW;AACjC,iBAAS;UACP,MAAM,YAAA,OAAO;UACb,SAAS,qCAAqC;SAC/C;AACD;MACF;AACA,YAAM,eAAe,gBAAgB,QAAO;AAC5C,YAAM,eAAmC,CAAA;AAEzC,mBAAa,SAAS,QAAQ,QAAQ,QAAK;AACzC,qBAAa,KAAK,mBAAmB,GAAG,CAAC,EAAE,GAAG,CAAC;MACjD,CAAC;AAED,YAAM,oBAAuC;QAC3C,KAAK,uBAAuB,gBAAgB,GAAG;QAC/C,MAAM;UACJ,QAAQ,aAAa;UACrB,OAAO,2BAA2B,aAAa,KAAK;UACpD,eAAe,aAAa,YAAY;UACxC,iBAAiB,aAAa,YAAY;UAC1C,cAAc,aAAa,YAAY;UACvC,6BAA6B,qBAC3B,aAAa,YAAY,wBAAwB;UAEnD,OAAO,aAAa,MAAM,gBAAe;;QAE3C,YAAY;;AAEd,eAAS,MAAM,EAAE,YAAY,kBAAiB,CAAE;IAClD;AAEA,aAAS,kCACP,mBAAoC;;AAEpC,WAAI,GAAA,qBAAA,wBAAuB,iBAAiB,GAAG;AAC7C,eAAO;UACL,SAAS;UACT,eAAe;YACb,aACE,KAAA,wBAAwB,kBAAkB,IAAI,OAAC,QAAA,OAAA,SAAA,KAAI;YACrD,MAAM,kBAAkB;;;MAG9B,OAAO;AACL,eAAO;UACL,SAAS;UACT,aAAa;YACX,UAAU,kBAAkB;;;MAGlC;IACF;AAEA,aAAS,UACP,MACA,UAA0C;;AAE1C,YAAM,WAAW,SAAS,KAAK,QAAQ,WAAW,EAAE;AACpD,YAAM,cAAc;QAAU;;MAAA,EAAqB,gBAAgB,QAAQ;AAC3E,UAAI,gBAAgB,QAAW;AAC7B,iBAAS;UACP,MAAM,YAAA,OAAO;UACb,SAAS,iCAAiC;SAC3C;AACD;MACF;AACA,YAAM,eAAe,YAAY,QAAO;AACxC,YAAM,kBAAmC,aAAa,WAClD;QACE,OAAO;QACP,KAAK;UACH,cAAc,aAAa,SAAS,0BAChC,kBACA;UACJ,gBACE,KAAA,aAAa,SAAS,6BAAuB,QAAA,OAAA,SAAA,KAAI;UACnD,aAAY,KAAA,aAAa,SAAS,0BAAoB,QAAA,OAAA,SAAA,KAAI;UAC1D,oBACE,KAAA,aAAa,SAAS,sBAAgB,QAAA,OAAA,SAAA,KAAI;UAC5C,qBACE,KAAA,aAAa,SAAS,uBAAiB,QAAA,OAAA,SAAA,KAAI;;UAGjD;AACJ,YAAM,gBAA+B;QACnC,KAAK,mBAAmB,YAAY,GAAG;QACvC,OAAO,aAAa,eAChB,kCAAkC,aAAa,YAAY,IAC3D;QACJ,QAAQ,aAAa,gBACjB,kCAAkC,aAAa,aAAa,IAC5D;QACJ,cAAa,KAAA,aAAa,gBAAU,QAAA,OAAA,SAAA,KAAI;QACxC,UAAU;QACV,MAAM;UACJ,kBAAkB,aAAa;UAC/B,iBAAiB,aAAa;UAC9B,mBAAmB,aAAa;UAChC,gBAAgB,aAAa;UAC7B,qCAAqC,qBACnC,aAAa,+BAA+B;UAE9C,sCAAsC,qBACpC,aAAa,gCAAgC;UAE/C,mBAAmB,aAAa;UAChC,eAAe,aAAa;UAC5B,iCAAiC,qBAC/B,aAAa,4BAA4B;UAE3C,6BAA6B,qBAC3B,aAAa,wBAAwB;UAEvC,2BAA2B,aAAa,yBACpC,EAAE,OAAO,aAAa,uBAAsB,IAC5C;UACJ,4BAA4B,aAAa,0BACrC,EAAE,OAAO,aAAa,wBAAuB,IAC7C;;;AAGR,eAAS,MAAM,EAAE,QAAQ,cAAa,CAAE;IAC1C;AAEA,aAAS,iBACP,MAIA,UAAiD;AAEjD,YAAM,WAAW,SAAS,KAAK,QAAQ,WAAW,EAAE;AACpD,YAAM,cAAc;QAAU;;MAAA,EAAqB,gBAAgB,QAAQ;AAE3E,UAAI,gBAAgB,QAAW;AAC7B,iBAAS;UACP,MAAM,YAAA,OAAO;UACb,SAAS,iCAAiC;SAC3C;AACD;MACF;AAEA,YAAM,UAAU,SAAS,KAAK,QAAQ,iBAAiB,EAAE;AACzD,YAAM,aACJ,SAAS,KAAK,QAAQ,aAAa,EAAE,KAAK;AAC5C,YAAM,eAAe,YAAY,QAAO;AAIxC,YAAM,aAAa,aAAa,gBAAgB;AAChD,YAAM,aAAiC,CAAA;AAEvC,UAAI;AACJ,WACE,IAAI,WAAW,WAAW,OAAO,GACjC,CAAC,EAAE,OAAO,WAAW,IAAG,CAAE,KAAK,WAAW,SAAS,YACnD,IAAI,EAAE,KAAI,GACV;AACA,mBAAW,KAAK,mBAAmB,EAAE,QAAQ,CAAC,EAAE,GAAG,CAAC;MACtD;AAEA,eAAS,MAAM;QACb,YAAY;QACZ,KAAK,EAAE,OAAO,WAAW,IAAG,CAAE;OAC/B;IACH;AAEA,aAAgB,sBAAmB;AACjC,aAAO;QACL;QACA;QACA;QACA;QACA;QACA;QACA;;IAEJ;AAEA,QAAI,2BAAsD;AAE1D,aAAgB,+BAA4B;AAC1C,UAAI,0BAA0B;AAC5B,eAAO;MACT;AAGA,YAAM,iBAAiB,eACpB;AACH,YAAM,cAAc,eAAe,kBAAkB;QACnD,UAAU;QACV,OAAO;QACP,OAAO;QACP,UAAU;QACV,QAAQ;QACR,aAAa,CAAC,GAAG,SAAS,cAAc;OACzC;AACD,YAAM,sBAAqB,GAAA,cAAA,uBACzB,WAAW;AAEb,iCACE,mBAAmB,KAAK,SAAS,GAAG,SAAS;AAC/C,aAAO;IACT;AAEA,aAAgB,QAAK;AACnB,OAAA,GAAA,QAAA,sBAAqB,8BAA8B,mBAAmB;IACxE;;;;;;;;;ACz3BA,IAAAC,SAAA,oBAAA;AAFA,QAAI,iBAAiB;AAErB,aAAgB,oBAAiB;AAC/B,aAAO;IACT;;;;;;;;;;ACJA,QAAY;AAAZ,KAAA,SAAYC,wBAAqB;AAC/B,MAAAA,uBAAAA,uBAAA,UAAA,IAAA,CAAA,IAAA;AACA,MAAAA,uBAAAA,uBAAA,SAAA,IAAA,CAAA,IAAA;AACA,MAAAA,uBAAAA,uBAAA,MAAA,IAAA,CAAA,IAAA;IACF,GAJY,0BAAqBC,SAAA,wBAArB,wBAAqB,CAAA,EAAA;;;;;;;;;;ACqBjC,QAAsB,aAAtB,MAAgC;MAC9B,MAAM,aAAa,UAA2B;AAC5C,eAAO;MACT;MAEA,gBAAgB,UAAkB;AAChC,eAAO;MACT;MAEA,MAAM,YAAY,SAA6B;AAC7C,eAAO;MACT;MAEA,MAAM,eAAe,SAAwB;AAC3C,eAAO;MACT;MAEA,gBAAgBC,SAAoB;AAClC,eAAOA;MACT;;AAnBF,IAAAC,SAAA,aAAA;;;;;;;;;;ACrBA,QAAA,OAAA,QAAA,MAAA;AAKA,QAAA,2BAAA;AACA,QAAA,cAAA;AACA,QAAA,WAAA;AACA,QAAA,UAAA;AAGA,QAAM,4BAA4B,CAChC,QACgC;AAChC,aACE,OAAO,QAAQ,YAAY,OAAO,yBAAA,sBAAsB,GAAG,MAAM;IAErE;AAQA,QAAe,qBAAf,MAAiC;;;;;;MAQ/B,MAAM,aAAa,SAAiB,UAAiB;AACnD,YAAI,gBAAgB;AACpB,YAAI,UAAU;AACZ,0BAAgB,MAAM,KAAK,gBAAgB,aAAa;QAC1D;AACA,cAAM,SAAS,OAAO,YAAY,cAAc,SAAS,CAAC;AAC1D,eAAO,WAAW,WAAW,IAAI,GAAG,CAAC;AACrC,eAAO,cAAc,cAAc,QAAQ,CAAC;AAC5C,sBAAc,KAAK,QAAQ,CAAC;AAC5B,eAAO;MACT;;;;;MAKA,MAAM,YAAY,MAAY;AAC5B,cAAM,aAAa,KAAK,UAAU,CAAC,MAAM;AACzC,YAAI,gBAAyC,KAAK,MAAM,CAAC;AACzD,YAAI,YAAY;AACd,0BAAgB,MAAM,KAAK,kBAAkB,aAAa;QAC5D;AACA,eAAO;MACT;;AAGF,QAAM,kBAAN,cAA8B,mBAAkB;MAC9C,MAAM,gBAAgB,SAAe;AACnC,eAAO;MACT;MAEA,MAAM,aAAa,SAAiB,UAAiB;AACnD,cAAM,SAAS,OAAO,YAAY,QAAQ,SAAS,CAAC;AAGpD,eAAO,WAAW,GAAG,CAAC;AACtB,eAAO,cAAc,QAAQ,QAAQ,CAAC;AACtC,gBAAQ,KAAK,QAAQ,CAAC;AACtB,eAAO;MACT;MAEA,kBAAkB,SAAe;AAC/B,eAAO,QAAQ,OACb,IAAI,MACF,qEAAqE,CACtE;MAEL;;AAGF,QAAM,iBAAN,cAA6B,mBAAkB;MAC7C,YAAoB,sBAA4B;AAC9C,cAAK;AADa,aAAA,uBAAA;MAEpB;MAEA,gBAAgB,SAAe;AAC7B,eAAO,IAAI,QAAgB,CAACC,UAAS,WAAU;AAC7C,eAAK,QAAQ,SAAS,CAAC,KAAK,WAAU;AACpC,gBAAI,KAAK;AACP,qBAAO,GAAG;YACZ,OAAO;AACL,cAAAA,SAAQ,MAAM;YAChB;UACF,CAAC;QACH,CAAC;MACH;MAEA,kBAAkB,SAAe;AAC/B,eAAO,IAAI,QAAgB,CAACA,UAAS,WAAU;AAC7C,cAAI,cAAc;AAClB,gBAAM,eAAyB,CAAA;AAC/B,gBAAM,eAAe,KAAK,cAAa;AACvC,uBAAa,GAAG,QAAQ,CAAC,UAAiB;AACxC,yBAAa,KAAK,KAAK;AACvB,2BAAe,MAAM;AACrB,gBAAI,KAAK,yBAAyB,MAAM,cAAc,KAAK,sBAAsB;AAC/E,2BAAa,QAAO;AACpB,qBAAO;gBACL,MAAM,YAAA,OAAO;gBACb,SAAS,4DAA4D,KAAK,oBAAoB;eAC/F;YACH;UACF,CAAC;AACD,uBAAa,GAAG,OAAO,MAAK;AAC1B,YAAAA,SAAQ,OAAO,OAAO,YAAY,CAAC;UACrC,CAAC;AACD,uBAAa,MAAM,OAAO;AAC1B,uBAAa,IAAG;QAClB,CAAC;MACH;;AAGF,QAAM,cAAN,cAA0B,mBAAkB;MAC1C,YAAoB,sBAA4B;AAC9C,cAAK;AADa,aAAA,uBAAA;MAEpB;MAEA,gBAAgB,SAAe;AAC7B,eAAO,IAAI,QAAgB,CAACA,UAAS,WAAU;AAC7C,eAAK,KAAK,SAAS,CAAC,KAAK,WAAU;AACjC,gBAAI,KAAK;AACP,qBAAO,GAAG;YACZ,OAAO;AACL,cAAAA,SAAQ,MAAM;YAChB;UACF,CAAC;QACH,CAAC;MACH;MAEA,kBAAkB,SAAe;AAC/B,eAAO,IAAI,QAAgB,CAACA,UAAS,WAAU;AAC7C,cAAI,cAAc;AAClB,gBAAM,eAAyB,CAAA;AAC/B,gBAAM,eAAe,KAAK,aAAY;AACtC,uBAAa,GAAG,QAAQ,CAAC,UAAiB;AACxC,yBAAa,KAAK,KAAK;AACvB,2BAAe,MAAM;AACrB,gBAAI,KAAK,yBAAyB,MAAM,cAAc,KAAK,sBAAsB;AAC/E,2BAAa,QAAO;AACpB,qBAAO;gBACL,MAAM,YAAA,OAAO;gBACb,SAAS,4DAA4D,KAAK,oBAAoB;eAC/F;YACH;UACF,CAAC;AACD,uBAAa,GAAG,OAAO,MAAK;AAC1B,YAAAA,SAAQ,OAAO,OAAO,YAAY,CAAC;UACrC,CAAC;AACD,uBAAa,MAAM,OAAO;AAC1B,uBAAa,IAAG;QAClB,CAAC;MACH;;AAGF,QAAM,iBAAN,cAA6B,mBAAkB;MAC7C,YAA6B,iBAAuB;AAClD,cAAK;AADsB,aAAA,kBAAA;MAE7B;MACA,gBAAgB,SAAe;AAC7B,eAAO,QAAQ,OACb,IAAI,MACF,mEAAmE,KAAK,eAAe,EAAE,CAC1F;MAEL;MAEA,kBAAkB,SAAe;AAE/B,eAAO,QAAQ,OACb,IAAI,MAAM,qCAAqC,KAAK,eAAe,EAAE,CAAC;MAE1E;;AAGF,aAAS,sBAAsB,iBAAyB,uBAA6B;AACnF,cAAQ,iBAAiB;QACvB,KAAK;AACH,iBAAO,IAAI,gBAAe;QAC5B,KAAK;AACH,iBAAO,IAAI,eAAe,qBAAqB;QACjD,KAAK;AACH,iBAAO,IAAI,YAAY,qBAAqB;QAC9C;AACE,iBAAO,IAAI,eAAe,eAAe;MAC7C;IACF;AAEA,QAAa,oBAAb,cAAuC,SAAA,WAAU;MAO/C,YACE,gBACQ,oBAAiD;;AAEzD,cAAK;AAFG,aAAA,qBAAA;AARF,aAAA,kBAAsC,IAAI,gBAAe;AACzD,aAAA,qBAAyC,IAAI,gBAAe;AAC5D,aAAA,8BAAoD;AAU1D,cAAM,0BACJ,eAAe,oCAAoC;AACrD,aAAK,2BAA0B,KAAA,eAAe,iCAAiC,OAAC,QAAA,OAAA,SAAA,KAAI,YAAA;AACpF,aAAK,wBAAuB,KAAA,eAAe,8BAA8B,OAAC,QAAA,OAAA,SAAA,KAAI,YAAA;AAC9E,YAAI,4BAA4B,QAAW;AACzC,cAAI,0BAA0B,uBAAuB,GAAG;AACtD,kBAAM,yBAAyB,yBAAA,sBAC7B,uBAAuB;AAEzB,kBAAM,4BACJ,KAAA,mBAAmB,mCAA6B,QAAA,OAAA,SAAA,SAAA,GAAE,MAAM,GAAG;AAQ7D,gBACE,CAAC,4BACD,yBAAyB,SAAS,sBAAsB,GACxD;AACA,mBAAK,8BAA8B;AACnC,mBAAK,kBAAkB,sBACrB,KAAK,6BACL,EAAE;YAEN;UACF,OAAO;AACL,oBAAQ,IACN,YAAA,aAAa,OACb,yEAAyE,uBAAuB,EAAE;UAEtG;QACF;MACF;MAEA,MAAM,aAAa,UAA2B;AAC5C,cAAM,UAAoB,MAAM;AAChC,gBAAQ,IAAI,wBAAwB,uBAAuB;AAC3D,gBAAQ,IAAI,mBAAmB,UAAU;AAGzC,YAAI,KAAK,gCAAgC,YAAY;AACnD,kBAAQ,OAAO,eAAe;QAChC,OAAO;AACL,kBAAQ,IAAI,iBAAiB,KAAK,2BAA2B;QAC/D;AAEA,eAAO;MACT;MAEA,gBAAgB,UAAkB;AAChC,cAAM,kBAAmC,SAAS,IAAI,eAAe;AACrE,YAAI,gBAAgB,SAAS,GAAG;AAC9B,gBAAM,WAA0B,gBAAgB,CAAC;AACjD,cAAI,OAAO,aAAa,UAAU;AAChC,iBAAK,qBAAqB,sBAAsB,UAAU,KAAK,uBAAuB;UACxF;QACF;AACA,iBAAS,OAAO,eAAe;AAI/B,cAAM,iCAAiC,SAAS,IAC9C,sBAAsB,EACtB,CAAC;AACH,YAAI,gCAAgC;AAClC,eAAK,mBAAmB,gCACtB;AACF,gBAAM,2BACJ,+BAA+B,MAAM,GAAG;AAE1C,cACE,CAAC,yBAAyB,SAAS,KAAK,2BAA2B,GACnE;AACA,iBAAK,kBAAkB,IAAI,gBAAe;AAC1C,iBAAK,8BAA8B;UACrC;QACF;AACA,iBAAS,OAAO,sBAAsB;AACtC,eAAO;MACT;MAEA,MAAM,YAAY,SAA6B;;AAI7C,cAAM,kBAA+B,MAAM;AAC3C,YAAI,KAAK,yBAAyB,MAAM,gBAAgB,QAAQ,SAAS,KAAK,sBAAsB;AAClG,gBAAM;YACJ,MAAM,YAAA,OAAO;YACb,SAAS,qDAAqD,KAAK,oBAAoB;;QAE3F;AACA,YAAI;AACJ,YAAI,KAAK,2BAA2B,iBAAiB;AACnD,qBAAW;QACb,OAAO;AACL,wBAAa,KAAA,gBAAgB,WAAK,QAAA,OAAA,SAAA,KAAI,KAAE,OAA8B;QACxE;AAEA,eAAO;UACL,SAAS,MAAM,KAAK,gBAAgB,aAClC,gBAAgB,SAChB,QAAQ;UAEV,OAAO,gBAAgB;;MAE3B;MAEA,MAAM,eAAe,SAAwB;AAK3C,eAAO,KAAK,mBAAmB,YAAY,MAAM,OAAO;MAC1D;;AAlIF,IAAAC,SAAA,oBAAA;AAqIA,QAAa,2BAAb,MAAqC;MAInC,YAAY,SAAmC,SAAuB;AAAvB,aAAA,UAAA;AADvC,aAAA,qBAAoD,CAAA;MACa;MACzE,eAAY;AACV,eAAO,IAAI,kBAAkB,KAAK,SAAS,KAAK,kBAAkB;MACpE;;AAPF,IAAAA,SAAA,2BAAA;;;;;;;;;AC/TA,IAAAC,SAAA,iCAAA;AAbA,QAAA,cAAA;AAEA,QAAM,oCAA8C;MAClD,YAAA,OAAO;MACP,YAAA,OAAO;MACP,YAAA,OAAO;MACP,YAAA,OAAO;MACP,YAAA,OAAO;MACP,YAAA,OAAO;MACP,YAAA,OAAO;MACP,YAAA,OAAO;;AAGT,aAAgB,+BACd,MACA,SAAe;AAEf,UAAI,kCAAkC,SAAS,IAAI,GAAG;AACpD,eAAO;UACL,MAAM,YAAA,OAAO;UACb,SAAS,sCAAsC,IAAI,IAAI,YAAA,OAAO,IAAI,CAAC,IAAI,OAAO;;MAElF,OAAO;AACL,eAAO,EAAE,MAAM,QAAO;MACxB;IACF;;;;;;;;;ACvBA,IAAAC,SAAA,cAAA;AAmBA,IAAAA,SAAA,2BAAA;AAgCA,IAAAA,SAAA,qBAAA;AAaA,IAAAA,SAAA,mBAAA;AAoBA,IAAAA,SAAA,uBAAA;AApFA,aAAgB,eAAe,cAAwB;AACrD,UAAI,WAAW;AACf,iBAAW,YAAY,cAAc;AACnC,cAAM,gBACJ,oBAAoB,OAAO,SAAS,QAAO,IAAK;AAClD,YAAI,gBAAgB,UAAU;AAC5B,qBAAW;QACb;MACF;AACA,aAAO;IACT;AAEA,QAAM,QAAiC;MACrC,CAAC,KAAK,CAAC;MACP,CAAC,KAAK,GAAI;MACV,CAAC,KAAK,KAAK,GAAI;MACf,CAAC,KAAK,KAAK,KAAK,GAAI;;AAGtB,aAAgB,yBAAyB,UAAkB;AACzD,YAAM,OAAM,oBAAI,KAAI,GAAG,QAAO;AAC9B,UAAI,oBAAoB,MAAM;AAC5B,mBAAW,SAAS,QAAO;MAC7B;AACA,YAAM,YAAY,KAAK,IAAI,WAAW,KAAK,CAAC;AAC5C,iBAAW,CAAC,MAAM,MAAM,KAAK,OAAO;AAClC,cAAM,SAAS,YAAY;AAC3B,YAAI,SAAS,KAAK;AAChB,iBAAO,OAAO,KAAK,KAAK,MAAM,CAAC,IAAI;QACrC;MACF;AACA,YAAM,IAAI,MAAM,mCAAmC;IACrD;AAQA,QAAM,mBAAmB;AAWzB,aAAgB,mBAAmB,UAAkB;AACnD,YAAM,aAAa,oBAAoB,OAAO,SAAS,QAAO,IAAK;AACnE,YAAM,OAAM,oBAAI,KAAI,GAAG,QAAO;AAC9B,YAAM,UAAU,aAAa;AAC7B,UAAI,UAAU,GAAG;AACf,eAAO;MACT,WAAW,UAAU,kBAAkB;AACrC,eAAO;MACT,OAAO;AACL,eAAO;MACT;IACF;AAEA,aAAgB,iBAAiB,UAAkB;AACjD,UAAI,oBAAoB,MAAM;AAC5B,eAAO,SAAS,YAAW;MAC7B,OAAO;AACL,cAAM,eAAe,IAAI,KAAK,QAAQ;AACtC,YAAI,OAAO,MAAM,aAAa,QAAO,CAAE,GAAG;AACxC,iBAAO,KAAK;QACd,OAAO;AACL,iBAAO,aAAa,YAAW;QACjC;MACF;IACF;AASA,aAAgB,qBAAqB,WAAiB,SAAa;AACjE,eAAS,QAAQ,QAAO,IAAK,UAAU,QAAO,KAAM,KAAM,QAAQ,CAAC,IAAI;IACzE;;;;;;;;;;ACpFA,QAAa,cAAb,MAAwB;MACtB,YAA6B,SAAiB;AAAjB,aAAA,UAAA;MAAoB;MAEjD,aAAa,UAA2B;AACtC,YAAI,SAA4B;AAEhC,iBAAS,IAAI,GAAG,IAAI,KAAK,QAAQ,QAAQ,KAAK;AAC5C,mBAAS,KAAK,QAAQ,CAAC,EAAE,aAAa,MAAM;QAC9C;AAEA,eAAO;MACT;MAEA,gBAAgB,UAAkB;AAChC,YAAI,SAAmB;AAEvB,iBAAS,IAAI,KAAK,QAAQ,SAAS,GAAG,KAAK,GAAG,KAAK;AACjD,mBAAS,KAAK,QAAQ,CAAC,EAAE,gBAAgB,MAAM;QACjD;AAEA,eAAO;MACT;MAEA,YAAY,SAA6B;AACvC,YAAI,SAA+B;AAEnC,iBAAS,IAAI,GAAG,IAAI,KAAK,QAAQ,QAAQ,KAAK;AAC5C,mBAAS,KAAK,QAAQ,CAAC,EAAE,YAAY,MAAM;QAC7C;AAEA,eAAO;MACT;MAEA,eAAe,SAAwB;AACrC,YAAI,SAA0B;AAE9B,iBAAS,IAAI,KAAK,QAAQ,SAAS,GAAG,KAAK,GAAG,KAAK;AACjD,mBAAS,KAAK,QAAQ,CAAC,EAAE,eAAe,MAAM;QAChD;AAEA,eAAO;MACT;MAEA,gBAAgBC,SAAoB;AAClC,YAAI,SAAuBA;AAE3B,iBAAS,IAAI,KAAK,QAAQ,SAAS,GAAG,KAAK,GAAG,KAAK;AACjD,mBAAS,KAAK,QAAQ,CAAC,EAAE,gBAAgB,MAAM;QACjD;AAEA,eAAO;MACT;MAEA,KAAK,SAAiB;AACpB,aAAK,QAAQ,QAAQ,GAAG,OAAO;MACjC;MAEA,aAAU;AACR,eAAO,KAAK;MACd;;AA3DF,IAAAC,SAAA,cAAA;AA8DA,QAAa,qBAAb,MAAa,oBAAkB;MAC7B,YAA6B,WAAuC;AAAvC,aAAA,YAAA;MAA0C;MAEvE,KAAK,iBAAwC;AAC3C,aAAK,UAAU,QAAQ,GAAG,eAAe;MAC3C;MAEA,QAAK;AACH,eAAO,IAAI,oBAAmB,CAAC,GAAG,KAAK,SAAS,CAAC;MACnD;MAEA,eAAY;AACV,eAAO,IAAI,YACT,KAAK,UAAU,IAAI,aAAW,QAAQ,aAAY,CAAE,CAAC;MAEzD;;AAfF,IAAAA,SAAA,qBAAA;;;;;;;;;;AC/DA,QAAA,gBAAA;AAGA,QAAA,aAAA;AACA,QAAA,uBAAA;AACA,QAAA,uBAAA;AACA,QAAA,cAAA;AACA,QAAA,yBAAA;AACA,QAAA,aAAA;AACA,QAAA,iBAAA;AACA,QAAA,aAAA;AACA,QAAA,aAAA;AAGA,QAAA,eAAA;AAEA,QAAM,wBAAN,MAA2B;MAWzB,YAAoB,YAAgC,QAAgB,oBAAgD,SAAoC,YAAkB;;AAAtJ,aAAA,aAAA;AAAgC,aAAA,SAAA;AAAgE,aAAA,UAAA;AAAoC,aAAA,aAAA;AAVhJ,aAAA,YAAmC;AACnC,aAAA,iBACN;AACM,aAAA,cAAc;AACd,aAAA,mBAAmB;AACnB,aAAA,gBAAqC;AAGrC,aAAA,oBAAoB;AACpB,aAAA,qBAAqB;AAE3B,cAAM,YAAsB,KAAK,OAAO,MAAM,GAAG;AACjD,YAAI,cAAc;AAIlB,YAAI,UAAU,UAAU,GAAG;AACzB,wBAAc,UAAU,CAAC;QAC3B;AACA,cAAM,YAAW,MAAA,MAAA,GAAA,aAAA,eAAc,KAAK,QAAQ,IAAI,OAAC,QAAA,OAAA,SAAA,SAAA,GAAE,UAAI,QAAA,OAAA,SAAA,KAAI;AAG3D,aAAK,aAAa,WAAW,QAAQ,IAAI,WAAW;AACpD,cAAM,WAAU,GAAA,WAAA,oBAAmB,QAAQ,QAAQ;AACnD,YAAI,YAAY,UAAU;AACxB,cAAI,WAAW,GAAG;AAChB,iBAAK,iBAAiB,YAAA,OAAO,mBAAmB,mBAAmB;UACrE,OAAO;AACL,uBAAW,MAAK;AACd,mBAAK,iBAAiB,YAAA,OAAO,mBAAmB,mBAAmB;YACrE,GAAG,OAAO;UACZ;QACF;AACA,aAAK,cAAc,mBAAmB,aAAY;MACpD;MAEA,iBAAiBC,SAAgB,SAAe;AAC9C,YAAI,KAAK,WAAW;AAClB,eAAK,UAAU,iBAAiBA,SAAQ,OAAO;QACjD,OAAO;AACL,eAAK,gBAAgB;YACnB,MAAMA;YACN;YACA,UAAU,IAAI,WAAA,SAAQ;;QAE1B;MAEF;MACA,UAAO;;AACL,gBAAO,MAAA,KAAA,KAAK,eAAS,QAAA,OAAA,SAAA,SAAA,GAAE,QAAO,OAAE,QAAA,OAAA,SAAA,KAAI,KAAK,WAAW,WAAU;MAChE;MACA,MAAM,MAAM,UAAoB,UAA8B;AAC5D,YAAI,KAAK,eAAe;AACtB,mBAAS,gBAAgB,KAAK,aAAa;AAC3C;QACF;AACA,YAAI,KAAK,WAAW,qBAAoB,MAAO,qBAAA,kBAAkB,OAAO;AACtE,mBAAS,gBAAgB;YACvB,MAAM,YAAA,OAAO;YACb,SAAS;YACT,UAAU,IAAI,WAAA,SAAQ;WACvB;AACD;QACF;AACA,cAAM,mBAAmB,MAAM,KAAK,YAAY,aAAa,QAAQ,QAAQ,QAAQ,CAAC;AACtF,YAAI;AACJ,YAAI;AACF,0BAAgB,MAAM,KAAK,WAAW,mBAAkB,EACrD,iBAAiB,EAAC,aAAa,KAAK,QAAQ,aAAa,KAAK,WAAU,CAAC;QAC9E,SAAS,GAAG;AACV,gBAAM,QAAQ;AACd,gBAAM,EAAE,MAAM,QAAO,KAAK,GAAA,uBAAA,gCACxB,OAAO,MAAM,SAAS,WAAW,MAAM,OAAO,YAAA,OAAO,SACrD,mDAAmD,MAAM,OAAO,EAAE;AAEpE,mBAAS,gBACP;YACE;YACA;YACA,UAAU,IAAI,WAAA,SAAQ;WACvB;AAEH;QACF;AACA,sBAAc,MAAM,gBAAgB;AACpC,cAAM,gBAAsC;UAC1C,mBAAmB,OAAMC,cAAW;AAClC,qBAAS,kBAAkB,MAAM,KAAK,YAAY,gBAAgBA,SAAQ,CAAC;UAC7E;UACA,kBAAkB,OAAM,YAAU;AAChC,iBAAK,oBAAoB;AACzB,kBAAM,kBAAkB,MAAM,KAAK,YAAY,eAAe,OAAO;AACrE,iBAAK,oBAAoB;AACzB,qBAAS,iBAAiB,eAAe;AACzC,gBAAI,KAAK,eAAe;AACtB,uBAAS,gBAAgB,KAAK,aAAa;YAC7C;UACF;UACA,iBAAiB,OAAMD,YAAS;AAC9B,kBAAM,iBAAiB,MAAM,KAAK,YAAY,gBAAgBA,OAAM;AACpE,gBAAI,KAAK,mBAAmB;AAC1B,mBAAK,gBAAgB;YACvB,OAAO;AACL,uBAAS,gBAAgB,cAAc;YACzC;UACF;;AAEF,aAAK,YAAY,KAAK,WAAW,WAAW,eAAe,KAAK,QAAQ,MAAM,KAAK,QAAQ,aAAa;AACxG,YAAI,KAAK,aAAa;AACpB,eAAK,UAAU,UAAS;QAC1B;AACA,YAAI,KAAK,gBAAgB;AACvB,eAAK,UAAU,uBAAuB,KAAK,eAAe,SAAS,KAAK,eAAe,OAAO;QAChG;AACA,YAAI,KAAK,oBAAoB,CAAC,KAAK,oBAAoB;AACrD,eAAK,UAAU,UAAS;QAC1B;MACF;MACA,MAAM,uBAAuB,SAAyB,SAAe;AACnE,aAAK,qBAAqB;AAC1B,cAAM,kBAAkB,MAAM,KAAK,YAAY,YAAY,QAAQ,QAAQ,EAAC,SAAkB,OAAO,QAAQ,MAAK,CAAC,CAAC;AACpH,aAAK,qBAAqB;AAC1B,YAAI,KAAK,WAAW;AAClB,eAAK,UAAU,uBAAuB,SAAS,gBAAgB,OAAO;AACtE,cAAI,KAAK,kBAAkB;AACzB,iBAAK,UAAU,UAAS;UAC1B;QACF,OAAO;AACL,eAAK,iBAAiB,EAAE,SAAS,SAAS,gBAAgB,QAAO;QACnE;MACF;MACA,YAAS;AACP,YAAI,KAAK,WAAW;AAClB,eAAK,UAAU,UAAS;QAC1B,OAAO;AACL,eAAK,cAAc;QACrB;MACF;MACA,YAAS;AACP,YAAI,KAAK,aAAa,CAAC,KAAK,oBAAoB;AAC9C,eAAK,UAAU,UAAS;QAC1B,OAAO;AACL,eAAK,mBAAmB;QAC1B;MACF;MACA,gBAAa;AACX,eAAO,KAAK;MACd;MACA,eAAeE,cAA4B;AACzC,cAAM,IAAI,MAAM,yBAAyB;MAC3C;MACA,iBAAc;AACZ,YAAI,KAAK,WAAW;AAClB,iBAAO,KAAK,UAAU,eAAc;QACtC,OAAO;AACL,iBAAO;QACT;MACF;;AAGF,QAAa,0BAAb,MAAoC;MAOlC,YAAoB,YAAgC,QAAiB,SAAuB;AAAxE,aAAA,aAAA;AAAgC,aAAA,SAAA;AAL5C,aAAA,kBAAkB;AAClB,aAAA,gBAAgB,IAAI,WAAA,cAAa;AACjC,aAAA,cAAc,IAAI,WAAA,oBAAmB;AACrC,aAAA,kBAAkB,IAAI,WAAA,wBAAuB;AAGnD,aAAK,kBAAkB,QAAQ,sBAAsB,MAAM;AAC3D,aAAK,eAAc,GAAA,WAAA,0BAAwB,GAAA,aAAA,aAAY,MAAM,GAAI,OAAO;UACtE,QAAQ,IAAG,GAAA,aAAA,aAAY,MAAM,CAAC,KAAK,WAAW,WAAU,CAAE;UAC1D,OAAO,KAAK,WAAW,qBAAoB;UAC3C,OAAO,KAAK;UACZ,aAAa,KAAK;UAClB,UAAU,KAAK,gBAAgB,cAAa;YAC1C,KAAK,eAAe;AACxB,YAAI,KAAK,iBAAiB;AACxB,eAAK,gBAAgB,SAAS,WAAW,eAAc,CAAE;QAC3D;AACA,aAAK,qBAAqB,IAAI,eAAA,mBAAmB,CAAC,IAAI,qBAAA,yBAAyB,MAAM,OAAO,CAAC,CAAC;MAChG;MAEA,QAAK;AACH,YAAI,KAAK,iBAAiB;AACxB,eAAK,gBAAgB,WAAW,KAAK,WAAW,eAAc,CAAE;QAClE;AACA,SAAA,GAAA,WAAA,uBAAsB,KAAK,WAAW;MACxC;MAEA,YAAS;AACP,gBAAO,GAAA,aAAA,aAAY,KAAK,MAAM;MAChC;MACA,qBAAqB,cAAqB;AACxC,cAAM,IAAI,MAAM,yBAAyB;MAC3C;MACA,uBAAuB,cAAiC,UAAyB,UAAiC;AAChH,cAAM,IAAI,MAAM,yBAAyB;MAC3C;MACA,iBAAc;AACZ,eAAO,KAAK;MACd;MACA,WAAW,QAAgB,UAAkB;AAC3C,cAAM,cAAiC;UACrC;UACA,OAAM,GAAA,WAAA,qBAAoB,KAAK,MAAM;UACrC,OAAO,YAAA,UAAU;UACjB,YAAY;;AAEd,eAAO,IAAI,sBAAsB,KAAK,YAAY,QAAQ,KAAK,oBAAoB,cAAa,GAAA,cAAA,mBAAiB,CAAE;MACrH;;AAjDF,IAAAC,SAAA,0BAAA;;;;;;;;;;ACjLA,QAAA,uBAAA;AACA,QAAA,oBAAA;AACA,QAAA,UAAA;AACA,QAAA,cAAA;AACA,QAAA,eAAA;AACA,QAAA,uBAAA;AAIA,QAAA,aAAA;AAqBA,QAAA,8BAAA;AAGA,QAAM,cAAc;AAKpB,QAAM,wBAAwB,EAAE,KAAK;AAOrC,QAAa,aAAb,MAAuB;;;;;;;;;;;MAgErB,YACU,eACA,mBACA,SACRC,cACQ,WAA8B;;AAJ9B,aAAA,gBAAA;AACA,aAAA,oBAAA;AACA,aAAA,UAAA;AAEA,aAAA,YAAA;AAhEF,aAAA,oBAAuC,qBAAA,kBAAkB;AAIzD,aAAA,YAA8B;AAK9B,aAAA,qBAAqB;AAMrB,aAAA,iBAAiD,oBAAI,IAAG;AAQxD,aAAA,WAAW;AAQF,aAAA,kBAA2B;AAcpC,aAAA,gBAA2C,oBAAI,IAAG;AAElD,aAAA,oBAAoC;AAmB1C,cAAM,iBAAiC;UACrC,cAAc,QAAQ,mCAAmC;UACzD,UAAU,QAAQ,+BAA+B;;AAEnD,aAAK,iBAAiB,IAAI,kBAAA,eAAe,MAAK;AAC5C,eAAK,mBAAkB;QACzB,GAAG,cAAc;AACjB,aAAK,eAAe,MAAK;AACzB,aAAK,2BAA0B,GAAA,qBAAA,2BAA0B,iBAAiB;AAE1E,aAAK,iBAAgB,KAAA,QAAQ,wBAAwB,OAAC,QAAA,OAAA,SAAA,KAAI;AAE1D,YAAI,QAAQ,sBAAsB,MAAM,GAAG;AACzC,eAAK,kBAAkB;AACvB,eAAK,gBAAgB,IAAI,WAAA,kBAAiB;AAC1C,eAAK,cAAc,IAAI,WAAA,wBAAuB;AAC9C,eAAK,kBAAkB,IAAI,WAAA,4BAA2B;AACtD,eAAK,gBAAgB,IAAI,WAAA,wBAAuB;QAClD,OAAO;AACL,eAAK,gBAAgB,IAAI,WAAA,cAAa;AACtC,eAAK,cAAc,IAAI,WAAA,oBAAmB;AAC1C,eAAK,kBAAkB,IAAI,WAAA,wBAAuB;AAClD,eAAK,gBAAgB,IAAI,WAAA,oBAAmB;QAC9C;AAEA,aAAK,eAAc,GAAA,WAAA,4BACjB,KAAK,yBACL,MAAM,KAAK,gBAAe,GAC1B,KAAK,eAAe;AAGtB,aAAK,cAAc,SAAS,WAAW,oBAAoB;AAC3D,aAAK,MACH,yCACE,KAAK,UAAU,SAAS,QAAW,CAAC,CAAC;AAEzC,aAAK,kBAAkBA,aAAY,uBAAuB,eAAe,OAAO;MAClF;MAEQ,kBAAe;AACrB,eAAO;UACL,OAAO,KAAK;UACZ,OAAO,KAAK;UACZ,aAAa,KAAK;UAClB,UAAU,KAAK,gBAAgB,cAAa;UAC5C,QAAQ,KAAK;;MAEjB;MAEQ,MAAM,MAAY;AACxB,gBAAQ,MACN,YAAA,aAAa,OACb,aACA,MACE,KAAK,YAAY,KACjB,OACA,KAAK,0BACL,MACA,IAAI;MAEV;MAEQ,SAAS,MAAY;AAC3B,gBAAQ,MACN,YAAA,aAAa,OACb,uBACA,MACE,KAAK,YAAY,KACjB,OACA,KAAK,0BACL,MACA,IAAI;MAEV;MAEQ,qBAAkB;AACxB,YAAI,KAAK,oBAAoB;AAC3B,eAAK,kBACH,CAAC,qBAAA,kBAAkB,iBAAiB,GACpC,qBAAA,kBAAkB,UAAU;QAEhC,OAAO;AACL,eAAK,kBACH,CAAC,qBAAA,kBAAkB,iBAAiB,GACpC,qBAAA,kBAAkB,IAAI;QAE1B;MACF;;;;MAKQ,eAAY;AAClB,aAAK,eAAe,QAAO;MAC7B;MAEQ,cAAW;AACjB,aAAK,eAAe,KAAI;AACxB,aAAK,eAAe,MAAK;MAC3B;MAEQ,0BAAuB;AAC7B,YAAI,UAAU,KAAK;AACnB,YAAI,QAAQ,wBAAwB,GAAG;AACrC,gBAAM,wBAAwB,KAAK,IACjC,KAAK,eACL,qBAAqB;AAEvB,oBAAO,OAAA,OAAA,OAAA,OAAA,CAAA,GAAQ,OAAO,GAAA,EAAE,0BAA0B,sBAAqB,CAAA;QACzE;AACA,aAAK,UACF,QAAQ,KAAK,mBAAmB,KAAK,iBAAiB,OAAO,EAC7D,KACC,eAAY;AACV,cACE,KAAK,kBACH,CAAC,qBAAA,kBAAkB,UAAU,GAC7B,qBAAA,kBAAkB,KAAK,GAEzB;AACA,iBAAK,YAAY;AACjB,gBAAI,KAAK,iBAAiB;AACxB,mBAAK,gBAAgB,SAAS,UAAU,eAAc,CAAE;YAC1D;AACA,sBAAU,sBAAsB,kBAAe;AAC7C,mBAAK,kBACH,CAAC,qBAAA,kBAAkB,KAAK,GACxB,qBAAA,kBAAkB,IAAI;AAExB,kBAAI,gBAAgB,KAAK,gBAAgB,GAAG;AAC1C,qBAAK,iBAAiB;AACtB,wBAAQ,IACN,YAAA,aAAa,OACb,kBAAiB,GAAA,aAAA,aAAY,KAAK,aAAa,CAAC,OAC9C,KAAK,uBACP,4EACE,KAAK,aACP,KAAK;cAET;YACF,CAAC;UACH,OAAO;AAGL,sBAAU,SAAQ;UACpB;QACF,GACA,WAAQ;AACN,eAAK,kBACH,CAAC,qBAAA,kBAAkB,UAAU,GAC7B,qBAAA,kBAAkB,mBAClB,GAAG,KAAK,EAAE;QAEd,CAAC;MAEP;;;;;;;;MASQ,kBACN,WACA,UACA,cAAqB;;AAErB,YAAI,UAAU,QAAQ,KAAK,iBAAiB,MAAM,IAAI;AACpD,iBAAO;QACT;AACA,YAAI,cAAc;AAChB,eAAK,MACH,qBAAA,kBAAkB,KAAK,iBAAiB,IACtC,SACA,qBAAA,kBAAkB,QAAQ,IAC1B,kBAAkB,eAAe,GAAG;QAG1C,OAAO;AACL,eAAK,MACH,qBAAA,kBAAkB,KAAK,iBAAiB,IACtC,SACA,qBAAA,kBAAkB,QAAQ,CAAC;QAEjC;AACA,YAAI,KAAK,iBAAiB;AACxB,eAAK,cAAc,SACjB,WACA,kCAAkC,qBAAA,kBAAkB,QAAQ,CAAC;QAEjE;AACA,cAAM,gBAAgB,KAAK;AAC3B,aAAK,oBAAoB;AACzB,gBAAQ,UAAU;UAChB,KAAK,qBAAA,kBAAkB;AACrB,iBAAK,YAAW;AAChB;UACF,KAAK,qBAAA,kBAAkB;AACrB,iBAAK,aAAY;AACjB,iBAAK,wBAAuB;AAC5B,iBAAK,qBAAqB;AAC1B;UACF,KAAK,qBAAA,kBAAkB;AACrB,gBAAI,KAAK,mBAAmB,KAAK,WAAW;AAC1C,mBAAK,gBAAgB,WAAW,KAAK,UAAU,eAAc,CAAE;YACjE;AACA,aAAA,KAAA,KAAK,eAAS,QAAA,OAAA,SAAA,SAAA,GAAE,SAAQ;AACxB,iBAAK,YAAY;AAIjB,gBAAI,CAAC,KAAK,eAAe,UAAS,GAAI;AACpC,sBAAQ,SAAS,MAAK;AACpB,qBAAK,mBAAkB;cACzB,CAAC;YACH;AACA;UACF,KAAK,qBAAA,kBAAkB;AACrB,gBAAI,KAAK,mBAAmB,KAAK,WAAW;AAC1C,mBAAK,gBAAgB,WAAW,KAAK,UAAU,eAAc,CAAE;YACjE;AACA,aAAA,KAAA,KAAK,eAAS,QAAA,OAAA,SAAA,SAAA,GAAE,SAAQ;AACxB,iBAAK,YAAY;AACjB;UACF;AACE,kBAAM,IAAI,MAAM,4CAA4C,QAAQ,EAAE;QAC1E;AACA,mBAAW,YAAY,KAAK,gBAAgB;AAC1C,mBAAS,MAAM,eAAe,UAAU,KAAK,eAAe,YAAY;QAC1E;AACA,eAAO;MACT;MAEA,MAAG;AACD,aAAK,SAAS,cAAc,KAAK,WAAW,UAAU,KAAK,WAAW,EAAE;AACxE,aAAK,YAAY;MACnB;MAEA,QAAK;AACH,aAAK,SAAS,cAAc,KAAK,WAAW,UAAU,KAAK,WAAW,EAAE;AACxE,aAAK,YAAY;AACjB,YAAI,KAAK,aAAa,GAAG;AACvB,eAAK,cAAc,SAAS,WAAW,eAAe;AACtD,WAAA,GAAA,WAAA,uBAAsB,KAAK,WAAW;AACtC,eAAK,gBAAgB,QAAO;AAC5B,kBAAQ,SAAS,MAAK;AACpB,iBAAK,kBACH,CAAC,qBAAA,kBAAkB,YAAY,qBAAA,kBAAkB,KAAK,GACtD,qBAAA,kBAAkB,IAAI;UAE1B,CAAC;QACH;MACF;MAEA,gBAAa;AACX,YAAI,KAAK,aAAa,GAAG;AACvB,eAAK,MAAK;AACV,iBAAO;QACT;AACA,eAAO;MACT;MAEA,WACE,UACA,MACA,QACA,UAA4C;AAE5C,YAAI,CAAC,KAAK,WAAW;AACnB,gBAAM,IAAI,MAAM,0CAA0C;QAC5D;AACA,YAAI;AACJ,YAAI,KAAK,iBAAiB;AACxB,eAAK,YAAY,eAAc;AAC/B,eAAK,cAAc,eAAc;AACjC,yBAAe;YACb,WAAW,CAAAC,YAAS;AAClB,kBAAIA,QAAO,SAAS,YAAA,OAAO,IAAI;AAC7B,qBAAK,YAAY,iBAAgB;cACnC,OAAO;AACL,qBAAK,YAAY,cAAa;cAChC;YACF;;QAEJ,OAAO;AACL,yBAAe,CAAA;QACjB;AACA,eAAO,KAAK,UAAU,WACpB,UACA,MACA,QACA,UACA,YAAY;MAEhB;;;;;;;MAQA,kBAAe;AACb,gBAAQ,SAAS,MAAK;AAKpB,cACE,CAAC,KAAK,kBACJ,CAAC,qBAAA,kBAAkB,IAAI,GACvB,qBAAA,kBAAkB,UAAU,GAE9B;AACA,gBAAI,KAAK,sBAAsB,qBAAA,kBAAkB,mBAAmB;AAClE,mBAAK,qBAAqB;YAC5B;UACF;QACF,CAAC;MACH;;;;MAKA,uBAAoB;AAClB,eAAO,KAAK;MACd;;;;;;MAOA,6BAA6B,UAAmC;AAC9D,aAAK,eAAe,IAAI,QAAQ;MAClC;;;;;;MAOA,gCAAgC,UAAmC;AACjE,aAAK,eAAe,OAAO,QAAQ;MACrC;;;;MAKA,eAAY;AACV,gBAAQ,SAAS,MAAK;AACpB,eAAK,eAAe,MAAK;AACzB,eAAK,kBACH,CAAC,qBAAA,kBAAkB,iBAAiB,GACpC,qBAAA,kBAAkB,UAAU;QAEhC,CAAC;MACH;MAEA,aAAU;AACR,eAAO,KAAK;MACd;MAEA,iBAAc;AACZ,eAAO,KAAK;MACd;MAEA,YAAS;AACP,eAAO;MACT;MAEA,sBAAsB,UAAoC;MAE1D;MAEA,yBAAyB,UAAoC;MAE7D;MAEA,oBAAiB;AACf,eAAO;MACT;MAEA,qBAAqB,OAA0B;AAC7C,eAAO,MAAM,kBAAiB,MAAO;MACvC;MAEA,kBAAkB,kBAAwB;AACxC,YAAI,mBAAmB,KAAK,eAAe;AACzC,eAAK,gBAAgB;QACvB;MACF;MACA,qBAAkB;AAChB,eAAO,KAAK,gBAAgB,mBAAkB;MAChD;MAEA,aAAU;AACR,YAAI,CAAC,KAAK,mBAAmB;AAC3B,eAAK,oBAAoB,IAAI,4BAAA,wBAAwB,MAAM,KAAK,eAAe,KAAK,OAAO;QAC7F;AACA,eAAO,KAAK;MACd;MAEA,eAAe,aAAwB;AACrC,cAAM,IAAI,MAAM,iBAAiB;MACnC;MAEA,wBAAwB,MAAc,oBAA4D;AAChG,cAAM,mBAAmB,KAAK,cAAc,IAAI,IAAI;AACpD,YAAI,kBAAiB;AACnB,iBAAO;QACT;AACA,cAAM,cAAc,mBAAmB,IAAI;AAC3C,aAAK,cAAc,IAAI,MAAM,WAAW;AACxC,eAAO;MACT;MAEA,mBAAmB,MAAY;AAC7B,aAAK,cAAc,OAAO,IAAI;MAChC;;AA5eF,IAAAC,SAAA,aAAA;;;;;;;;;;;AChDa,IAAAC,SAAA,uCACV,KAAA,QAAQ,IAAI,wCAAkC,QAAA,OAAA,SAAA,KAAI,aAAa;;;;;;;;;;ACsalE,IAAAC,SAAA,QAAA;AAxaA,QAAA,aAAA;AAMA,QAAA,QAAA,QAAA,KAAA;AACA,QAAA,mBAAA;AACA,QAAA,cAAA;AACA,QAAA,mBAAA;AACA,QAAA,aAAA;AACA,QAAA,UAAA;AACA,QAAA,cAAA;AAEA,QAAA,eAAA;AACA,QAAA,QAAA,QAAA,KAAA;AAEA,QAAA,oBAAA;AACA,QAAA,gBAAA;AAEA,QAAM,cAAc;AAEpB,aAAS,MAAM,MAAY;AACzB,cAAQ,MAAM,YAAA,aAAa,OAAO,aAAa,IAAI;IACrD;AAKa,IAAAA,SAAA,eAAe;AAE5B,QAAM,0CAA0C;AAKhD,QAAM,cAAN,MAAiB;MAwBf,YACU,QACA,UACR,gBAA8B;;AAFtB,aAAA,SAAA;AACA,aAAA,WAAA;AAhBF,aAAA,uBAA+D;AAC/D,aAAA,oBAAgD;AAChD,aAAA,qBAAkD;AAClD,aAAA,4BAA4D;AAI5D,aAAA,oBAAoB;AAEpB,aAAA,+BAA+B;AAC/B,aAAA,yBAAyB;AACzB,aAAA,mBAAmB;AACnB,aAAA,sBAAsB,IAAI,MAAA,SAAI,SAAQ;AAO5C,cAAM,sCAAqC,GAAA,aAAA,aAAY,MAAM,CAAC;AAC9D,YAAI,OAAO,WAAW;AACpB,eAAK,oBAAoB,WAAW,CAAC,OAAO,SAAS,CAAC;QACxD;AACA,cAAM,YAAW,GAAA,aAAA,eAAc,OAAO,IAAI;AAC1C,YAAI,aAAa,MAAM;AACrB,eAAK,WAAW;AAChB,eAAK,cAAc;AACnB,eAAK,OAAO;QACd,OAAO;AACL,eAAI,GAAA,MAAA,QAAO,SAAS,IAAI,MAAK,GAAA,MAAA,QAAO,SAAS,IAAI,GAAG;AAClD,iBAAK,WAAW;cACd;gBACE,WAAW;kBACT;oBACE,MAAM,SAAS;oBACf,OAAM,KAAA,SAAS,UAAI,QAAA,OAAA,SAAA,KAAIA,SAAA;;;;;AAK/B,iBAAK,cAAc;AACnB,iBAAK,OAAO;UACd,OAAO;AACL,iBAAK,WAAW;AAChB,iBAAK,cAAc,SAAS;AAC5B,iBAAK,QAAO,KAAA,SAAS,UAAI,QAAA,OAAA,SAAA,KAAIA,SAAA;UAC/B;QACF;AACA,aAAK,aAAa,KAAK,OAAM,IAAK;AAElC,YAAI,eAAe,wCAAwC,MAAM,GAAG;AAClE,eAAK,yBAAyB;QAChC;AAEA,aAAK,yBAAyB;UAC5B,MAAM,YAAA,OAAO;UACb,SAAS,sCAAqC,GAAA,aAAA,aAAY,KAAK,MAAM,CAAC;UACtE,UAAU,IAAI,WAAA,SAAQ;;AAGxB,cAAM,iBAAiC;UACrC,cAAc,eAAe,mCAAmC;UAChE,UAAU,eAAe,+BAA+B;;AAG1D,aAAK,UAAU,IAAI,kBAAA,eAAe,MAAK;AACrC,cAAI,KAAK,mBAAmB;AAC1B,iBAAK,2BAA0B;UACjC;QACF,GAAG,cAAc;AACjB,aAAK,QAAQ,MAAK;AAElB,aAAK,+BACH,KAAA,eAAe,0CAA0C,OAAC,QAAA,OAAA,SAAA,KAC1D;AACF,aAAK,sBAAsB,WAAW,MAAK;QAAE,GAAG,CAAC;AACjD,qBAAa,KAAK,mBAAmB;MACvC;;;;;MAMQ,kBAAe;AACrB,YAAI,KAAK,aAAa,MAAM;AAC1B,cAAI,CAAC,KAAK,kBAAkB;AAC1B,kBAAM,sCAAqC,GAAA,aAAA,aAAY,KAAK,MAAM,CAAC;AACnE,yBAAa,MAAK;AAChB,mBAAK,UACH,GAAA,iBAAA,mBAAkB,KAAK,QAAS,GAChC,CAAA,GACA,MACA,EAAE;YAEN,CAAC;AACD,iBAAK,mBAAmB;UAC1B;AACA,eAAK,QAAQ,KAAI;AACjB,eAAK,QAAQ,MAAK;AAClB,eAAK,wBAAuB;AAC5B;QACF;AACA,YAAI,KAAK,gBAAgB,MAAM;AAC7B,gBAAM,kCAAiC,GAAA,aAAA,aAAY,KAAK,MAAM,CAAC;AAC/D,uBAAa,MAAK;AAChB,iBAAK,UACH,GAAA,iBAAA,mBAAkB;cAChB,MAAM,YAAA,OAAO;cACb,SAAS,gCAA+B,GAAA,aAAA,aAAY,KAAK,MAAM,CAAC;aACjE,GACD,CAAA,GACA,MACA,EAAE;UAEN,CAAC;AACD,eAAK,wBAAuB;QAC9B,OAAO;AACL,cAAI,KAAK,yBAAyB,MAAM;AACtC;UACF;AACA,gBAAM,6BAA6B,KAAK,WAAW;AAOnD,eAAK,qBAAqB;AAC1B,gBAAM,WAAmB,KAAK;AAC9B,eAAK,uBAAuB,KAAK,OAAO,QAAQ;AAChD,eAAK,qBAAqB,KACxB,iBAAc;AACZ,gBAAI,KAAK,yBAAyB,MAAM;AACtC;YACF;AACA,iBAAK,uBAAuB;AAC5B,iBAAK,sBAAqB,GAAA,iBAAA,mBAAkB,YAAY,IAAI,cAAY;cACtE,WAAW,CAAC,OAAO;cACnB,CAAC;AACH,kBAAM,qBACJ,MACA,YAAY,IAAI,UAAQ,KAAK,OAAO,MAAM,KAAK,IAAI,EAAE,KAAK,GAAG,IAC7D;AACF,kBACE,oCACE,GAAA,aAAA,aAAY,KAAK,MAAM,IACvB,OACA,kBAAkB;AAMtB,kBAAM,eAAe,KAAK,SACxB,KAAK,oBACL,CAAA,GACA,KAAK,2BACL,EAAE;AAEJ,iBAAK,mBAAmB,YAAY;UACtC,GACA,SAAM;AACJ,gBAAI,KAAK,yBAAyB,MAAM;AACtC;YACF;AACA,kBACE,kCACE,GAAA,aAAA,aAAY,KAAK,MAAM,IACvB,OACC,IAAc,OAAO;AAE1B,iBAAK,uBAAuB;AAC5B,iBAAK,wBAAuB;AAC5B,iBAAK,UACH,GAAA,iBAAA,mBAAkB,KAAK,sBAAsB,GAC7C,CAAA,GACA,KAAK,2BACL,EAAE;UAEN,CAAC;AAIH,cAAI,KAAK,0BAA0B,KAAK,sBAAsB,MAAM;AAIlE,iBAAK,oBAAoB,KAAK,WAAW,QAAQ;AACjD,iBAAK,kBAAkB,KACrB,eAAY;AACV,kBAAI,KAAK,sBAAsB,MAAM;AACnC;cACF;AACA,mBAAK,oBAAoB;AACzB,kBAAI;AACJ,kBAAI;AACF,iCAAgB,GAAA,iBAAA,+BACd,WACA,KAAK,UAAU;AAEjB,oBAAI,eAAe;AACjB,uBAAK,6BAA4B,GAAA,iBAAA,mBAAkB,aAAa;gBAClE,OAAO;AACL,uBAAK,4BAA4B;gBACnC;cACF,SAAS,KAAK;AACZ,qBAAK,6BAA4B,GAAA,iBAAA,mBAAkB;kBACjD,MAAM,YAAA,OAAO;kBACb,SAAS,4CACN,IAAc,OACjB;iBACD;cACH;AACA,kBAAI,KAAK,uBAAuB,MAAM;AAKpC,qBAAK,SACH,KAAK,oBACL,CAAA,GACA,KAAK,2BACL,EAAE;cAEN;YACF,GACA,SAAM;YAQN,CAAC;UAEL;QACF;MACF;;;;;;;MAQQ,mBAAmB,cAAqB;AAC9C,YAAI,cAAc;AAChB,eAAK,QAAQ,KAAI;AACjB,eAAK,QAAQ,MAAK;QACpB,OAAO;AACL,eAAK,oBAAoB;QAC3B;MACF;MAEQ,MAAM,OAAO,UAAgB;AACnC,YAAI,cAAA,oCAAoC;AACtC,gBAAM,iCAAiC;AAEvC,gBAAM,UAAU,MAAM,QAAQ,WAAW;YACvC,KAAK,oBAAoB,SAAS,QAAQ;YAC1C,KAAK,oBAAoB,SAAS,QAAQ;WAC3C;AAED,cAAI,QAAQ,MAAM,YAAU,OAAO,WAAW,UAAU,GAAG;AACzD,kBAAM,IAAI,MAAO,QAAQ,CAAC,EAA4B,MAAM;UAC9D;AAEA,iBAAO,QACJ,OAAiB,CAAC,KAAK,WAAU;AAChC,mBAAO,OAAO,WAAW,cACrB,CAAC,GAAG,KAAK,GAAG,OAAO,KAAK,IACxB;UACN,GAAG,CAAA,CAAE,EACJ,IAAI,WAAS;YACZ,MAAM;YACN,MAAM,CAAC,KAAK;YACZ;QACN;AAMA,cAAM,cAAc,MAAM,MAAA,SAAI,OAAO,UAAU,EAAE,KAAK,KAAI,CAAE;AAC5D,eAAO,YAAY,IAAI,WAAS,EAAE,MAAM,KAAK,SAAS,MAAM,CAAC,KAAK,KAAK,EAAG;MAC5E;MAEQ,MAAM,WAAW,UAAgB;AACvC,YAAI,cAAA,oCAAoC;AACtC,gBAAM,iCAAiC;AACvC,iBAAO,KAAK,oBAAoB,WAAW,QAAQ;QACrD;AAEA,eAAO,MAAA,SAAI,WAAW,QAAQ;MAChC;MAEQ,2BAAwB;;AAC9B,qBAAa,KAAK,mBAAmB;AACrC,aAAK,sBAAsB,WAAW,MAAK;AACzC,eAAK,wBAAuB;AAC5B,cAAI,KAAK,mBAAmB;AAC1B,iBAAK,2BAA0B;UACjC;QACF,GAAG,KAAK,2BAA2B;AACnC,SAAA,MAAA,KAAA,KAAK,qBAAoB,WAAK,QAAA,OAAA,SAAA,SAAA,GAAA,KAAA,EAAA;AAC9B,aAAK,+BAA+B;MACtC;MAEQ,0BAAuB;AAC7B,qBAAa,KAAK,mBAAmB;AACrC,aAAK,+BAA+B;MACtC;MAEQ,6BAA0B;AAChC,YAAI,KAAK,yBAAyB,MAAM;AACtC,eAAK,oBAAoB;AACzB,eAAK,QAAQ,QAAO;AACpB,eAAK,yBAAwB;AAC7B,eAAK,gBAAe;QACtB;MACF;MAEA,mBAAgB;AAKd,YAAI,KAAK,yBAAyB,MAAM;AACtC,cAAI,KAAK,gCAAgC,KAAK,QAAQ,UAAS,GAAI;AACjE,gBAAI,KAAK,8BAA8B;AACrC,oBACE,wEAAwE;YAE5E,OAAO;AACL,oBACE,sDACE,KAAK,QAAQ,WAAU,EAAG,YAAW,CAAE;YAE7C;AACA,iBAAK,oBAAoB;UAC3B,OAAO;AACL,iBAAK,2BAA0B;UACjC;QACF;MACF;;;;;;MAOA,UAAO;AACL,aAAK,oBAAoB;AACzB,aAAK,QAAQ,MAAK;AAClB,aAAK,QAAQ,KAAI;AACjB,aAAK,wBAAuB;AAC5B,aAAK,uBAAuB;AAC5B,aAAK,oBAAoB;AACzB,aAAK,qBAAqB;AAC1B,aAAK,4BAA4B;AACjC,aAAK,mBAAmB;MAC1B;;;;;;MAOA,OAAO,oBAAoB,QAAe;AACxC,eAAO,OAAO;MAChB;;AAOF,aAAgB,QAAK;AACnB,OAAA,GAAA,WAAA,kBAAiB,OAAO,WAAW;AACnC,OAAA,GAAA,WAAA,uBAAsB,KAAK;IAC7B;;;;;;;;;ACvTA,IAAAC,SAAA,YAAA;AA8CA,IAAAA,SAAA,eAAA;AA0CA,IAAAA,SAAA,uBAAA;AA3MA,QAAA,YAAA;AACA,QAAA,cAAA;AACA,QAAA,QAAA,QAAA,KAAA;AACA,QAAA,OAAA,QAAA,MAAA;AACA,QAAA,UAAA;AACA,QAAA,uBAAA;AAMA,QAAA,eAAA;AACA,QAAA,QAAA,QAAA,KAAA;AACA,QAAA,iBAAA;AAEA,QAAM,cAAc;AAEpB,aAAS,MAAM,MAAY;AACzB,cAAQ,MAAM,YAAA,aAAa,OAAO,aAAa,IAAI;IACrD;AAOA,aAAS,eAAY;AACnB,UAAI,WAAW;AACf,UAAI,SAAS;AAKb,UAAI,QAAQ,IAAI,YAAY;AAC1B,iBAAS;AACT,mBAAW,QAAQ,IAAI;MACzB,WAAW,QAAQ,IAAI,aAAa;AAClC,iBAAS;AACT,mBAAW,QAAQ,IAAI;MACzB,WAAW,QAAQ,IAAI,YAAY;AACjC,iBAAS;AACT,mBAAW,QAAQ,IAAI;MACzB,OAAO;AACL,eAAO,CAAA;MACT;AACA,UAAI;AACJ,UAAI;AACF,mBAAW,IAAI,MAAA,IAAI,QAAQ;MAC7B,SAAS,GAAG;AACV,SAAA,GAAA,UAAA,KAAI,YAAA,aAAa,OAAO,0BAA0B,MAAM,WAAW;AACnE,eAAO,CAAA;MACT;AACA,UAAI,SAAS,aAAa,SAAS;AACjC,SAAA,GAAA,UAAA,KACE,YAAA,aAAa,OACb,IAAI,SAAS,QAAQ,qCAAqC;AAE5D,eAAO,CAAA;MACT;AACA,UAAI,WAA0B;AAC9B,UAAI,SAAS,UAAU;AACrB,YAAI,SAAS,UAAU;AACrB,WAAA,GAAA,UAAA,KAAI,YAAA,aAAa,MAAM,6BAA6B;AACpD,qBAAW,mBAAmB,GAAG,SAAS,QAAQ,IAAI,SAAS,QAAQ,EAAE;QAC3E,OAAO;AACL,qBAAW,SAAS;QACtB;MACF;AACA,YAAM,WAAW,SAAS;AAC1B,UAAI,OAAO,SAAS;AAIpB,UAAI,SAAS,IAAI;AACf,eAAO;MACT;AACA,YAAM,SAAoB;QACxB,SAAS,GAAG,QAAQ,IAAI,IAAI;;AAE9B,UAAI,UAAU;AACZ,eAAO,QAAQ;MACjB;AACA,YACE,kBAAkB,OAAO,UAAU,kCAAkC,MAAM;AAE7E,aAAO;IACT;AAEA,aAAS,qBAAkB;AAEzB,UAAI,aAAiC,QAAQ,IAAI;AACjD,UAAI,SAAS;AACb,UAAI,CAAC,YAAY;AACf,qBAAa,QAAQ,IAAI;AACzB,iBAAS;MACX;AACA,UAAI,YAAY;AACd,cAAM,sDAAsD,MAAM;AAClE,eAAO,WAAW,MAAM,GAAG;MAC7B,OAAO;AACL,eAAO,CAAA;MACT;IACF;AAaA,aAAgB,UAAU,YAAkB;AAC1C,YAAM,aAAa,WAAW,MAAM,GAAG;AACvC,UAAI,WAAW,WAAW,GAAG;AAC3B,eAAO;MACT;AACA,YAAM,eAAe,SAAS,WAAW,CAAC,GAAG,EAAE;AAC/C,UAAI,EAAC,GAAA,MAAA,QAAO,WAAW,CAAC,CAAC,KAAK,OAAO,MAAM,YAAY,KAAK,eAAe,KAAK,eAAe,IAAI;AACjG,eAAO;MACT;AACA,aAAO;QACL,IAAI,QAAQ,WAAW,CAAC,CAAC;QACzB;;IAEJ;AAEA,aAAS,QAAQ,IAAU;AACzB,aAAO,GAAG,MAAM,GAAG,EAAE,OAAO,CAAC,KAAK,WAAW,OAAO,KAAK,SAAS,OAAO,EAAE,GAAG,CAAC;IACjF;AAEA,aAAS,WAAW,MAAoB,YAAkB;AACxD,YAAM,KAAK,KAAK;AAChB,YAAM,OAAO,MAAO,KAAK,KAAK;AAC9B,YAAM,SAAS,QAAQ,UAAU;AAEjC,cAAQ,SAAS,WAAW,KAAK;IACnC;AAEA,aAAS,uBAAuB,YAAkB;AAChD,iBAAW,QAAQ,mBAAkB,GAAI;AACvC,cAAM,aAAa,UAAU,IAAI;AAEjC,aAAI,GAAA,MAAA,QAAO,UAAU,KAAK,cAAc,WAAW,YAAY,UAAU,GAAG;AAC1E,iBAAO;QACT,WAAW,WAAW,SAAS,IAAI,GAAG;AAEpC,iBAAO;QACT;MACF;AACA,aAAO;IACT;AAOA,aAAgB,aACd,QACA,SAAuB;;AAEvB,YAAM,gBAAgC;QACpC;QACA,cAAc,CAAA;;AAEhB,YAAK,KAAA,QAAQ,wBAAwB,OAAC,QAAA,OAAA,SAAA,KAAI,OAAO,GAAG;AAClD,eAAO;MACT;AACA,UAAI,OAAO,WAAW,QAAQ;AAC5B,eAAO;MACT;AACA,YAAM,YAAY,aAAY;AAC9B,UAAI,CAAC,UAAU,SAAS;AACtB,eAAO;MACT;AACA,YAAM,YAAW,GAAA,aAAA,eAAc,OAAO,IAAI;AAC1C,UAAI,CAAC,UAAU;AACb,eAAO;MACT;AACA,YAAM,aAAa,SAAS;AAC5B,UAAI,uBAAuB,UAAU,GAAG;AACtC,cAAM,mDAAkD,GAAA,aAAA,aAAY,MAAM,CAAC;AAC3E,eAAO;MACT;AACA,YAAM,eAA+B;QACnC,6BAA4B,GAAA,aAAA,aAAY,MAAM;;AAEhD,UAAI,UAAU,OAAO;AACnB,qBAAa,yBAAyB,IAAI,UAAU;MACtD;AACA,aAAO;QACL,QAAQ;UACN,QAAQ;UACR,MAAM,UAAU;;QAElB;;IAEJ;AAEA,aAAgB,qBACd,SACA,gBAA8B;;AAE9B,UAAI,EAAE,8BAA8B,iBAAiB;AACnD,eAAO,QAAQ,QAAQ,IAAI;MAC7B;AACA,YAAM,aAAa,eAAe,0BAA0B;AAC5D,YAAM,gBAAe,GAAA,aAAA,UAAS,UAAU;AACxC,UAAI,iBAAiB,MAAM;AACzB,eAAO,QAAQ,QAAQ,IAAI;MAC7B;AACA,YAAM,iBAAgB,GAAA,aAAA,eAAc,aAAa,IAAI;AACrD,UAAI,kBAAkB,MAAM;AAC1B,eAAO,QAAQ,QAAQ,IAAI;MAC7B;AACA,YAAM,WAAW,GAAG,cAAc,IAAI,KACpC,KAAA,cAAc,UAAI,QAAA,OAAA,SAAA,KAAI,eAAA,YACxB;AACA,YAAM,UAA+B;QACnC,QAAQ;QACR,MAAM;;AAER,YAAM,UAAoC;QACxC,MAAM;;AAGR,WAAI,GAAA,qBAAA,wBAAuB,OAAO,GAAG;AACnC,gBAAQ,OAAO,QAAQ;AACvB,gBAAQ,OAAO,QAAQ;MACzB,OAAO;AACL,gBAAQ,aAAa,QAAQ;MAC/B;AACA,UAAI,6BAA6B,gBAAgB;AAC/C,gBAAQ,qBAAqB,IAC3B,WACA,OAAO,KAAK,eAAe,yBAAyB,CAAW,EAAE,SAC/D,QAAQ;MAEd;AACA,cAAQ,UAAU;AAClB,YAAM,sBAAqB,GAAA,qBAAA,2BAA0B,OAAO;AAC5D,YAAM,iBAAiB,qBAAqB,oBAAoB,QAAQ,IAAI;AAC5E,aAAO,IAAI,QAAuB,CAACC,UAAS,WAAU;AACpD,cAAM,UAAU,KAAK,QAAQ,OAAO;AACpC,gBAAQ,KAAK,WAAW,CAAC,KAAK,QAAQ,SAAQ;AAC5C,kBAAQ,mBAAkB;AAC1B,iBAAO,mBAAkB;AACzB,cAAI,IAAI,eAAe,KAAK;AAC1B,kBACE,+BACE,QAAQ,OACR,oBACA,kBAAkB;AAKtB,gBAAI,KAAK,SAAS,GAAG;AACnB,qBAAO,QAAQ,IAAI;YACrB;AACA,kBACE,wDACE,QAAQ,OACR,oBACA,kBAAkB;AAEtB,YAAAA,SAAQ,MAAM;UAChB,OAAO;AACL,aAAA,GAAA,UAAA,KACE,YAAA,aAAa,OACb,0BACE,QAAQ,OACR,oBACA,qBACA,kBACA,IAAI,UAAU;AAElB,mBAAM;UACR;QACF,CAAC;AACD,gBAAQ,KAAK,SAAS,SAAM;AAC1B,kBAAQ,mBAAkB;AAC1B,WAAA,GAAA,UAAA,KACE,YAAA,aAAa,OACb,gCACE,qBACA,iBACA,IAAI,OAAO;AAEf,iBAAM;QACR,CAAC;AACD,gBAAQ,IAAG;MACb,CAAC;IACH;;;;;;;;;;ACzSA,QAAK;AAAL,KAAA,SAAKC,YAAS;AACZ,MAAAA,WAAAA,WAAA,SAAA,IAAA,CAAA,IAAA;AACA,MAAAA,WAAAA,WAAA,cAAA,IAAA,CAAA,IAAA;AACA,MAAAA,WAAAA,WAAA,iBAAA,IAAA,CAAA,IAAA;IACF,GAJK,cAAA,YAAS,CAAA,EAAA;AAMd,QAAa,gBAAb,MAA0B;MASxB,YAAoB,sBAA4B;AAA5B,aAAA,uBAAA;AARZ,aAAA,YAAuB,UAAU;AACjC,aAAA,mBAA2B,OAAO,MAAM,CAAC;AACzC,aAAA,kBAA0B,OAAO,MAAM,CAAC;AACxC,aAAA,oBAAoB;AACpB,aAAA,kBAAkB;AAClB,aAAA,qBAA+B,CAAA;AAC/B,aAAA,uBAAuB;MAEoB;MAEnD,MAAM,MAAY;AAChB,YAAI,WAAW;AACf,YAAI;AACJ,cAAM,SAAmB,CAAA;AAEzB,eAAO,WAAW,KAAK,QAAQ;AAC7B,kBAAQ,KAAK,WAAW;YACtB,KAAK,UAAU;AACb,mBAAK,mBAAmB,KAAK,MAAM,UAAU,WAAW,CAAC;AACzD,0BAAY;AACZ,mBAAK,YAAY,UAAU;AAC3B,mBAAK,gBAAgB,KAAK,CAAC;AAC3B,mBAAK,oBAAoB;AACzB,mBAAK,kBAAkB;AACvB,mBAAK,uBAAuB;AAC5B,mBAAK,qBAAqB,CAAA;AAC1B;YACF,KAAK,UAAU;AACb,uBAAS,KAAK,IAAI,KAAK,SAAS,UAAU,KAAK,iBAAiB;AAChE,mBAAK,KACH,KAAK,iBACL,IAAI,KAAK,mBACT,UACA,WAAW,MAAM;AAEnB,mBAAK,qBAAqB;AAC1B,0BAAY;AAEZ,kBAAI,KAAK,sBAAsB,GAAG;AAChC,qBAAK,kBAAkB,KAAK,gBAAgB,aAAa,CAAC;AAC1D,oBAAI,KAAK,yBAAyB,MAAM,KAAK,kBAAkB,KAAK,sBAAsB;AACxF,wBAAM,IAAI,MAAM,qCAAqC,KAAK,eAAe,OAAO,KAAK,oBAAoB,GAAG;gBAC9G;AACA,qBAAK,uBAAuB,KAAK;AACjC,oBAAI,KAAK,uBAAuB,GAAG;AACjC,uBAAK,YAAY,UAAU;gBAC7B,OAAO;AACL,wBAAM,UAAU,OAAO,OACrB,CAAC,KAAK,kBAAkB,KAAK,eAAe,GAC5C,CAAC;AAGH,uBAAK,YAAY,UAAU;AAC3B,yBAAO,KAAK,OAAO;gBACrB;cACF;AACA;YACF,KAAK,UAAU;AACb,uBAAS,KAAK,IAAI,KAAK,SAAS,UAAU,KAAK,oBAAoB;AACnE,mBAAK,mBAAmB,KAAK,KAAK,MAAM,UAAU,WAAW,MAAM,CAAC;AACpE,mBAAK,wBAAwB;AAC7B,0BAAY;AAEZ,kBAAI,KAAK,yBAAyB,GAAG;AAEnC,sBAAM,uBAAuB;kBAC3B,KAAK;kBACL,KAAK;kBACL,OAAO,KAAK,kBAAkB;AAChC,sBAAM,gBAAgB,OAAO,OAC3B,sBACA,KAAK,kBAAkB,CAAC;AAG1B,qBAAK,YAAY,UAAU;AAC3B,uBAAO,KAAK,aAAa;cAC3B;AACA;YACF;AACE,oBAAM,IAAI,MAAM,uBAAuB;UAC3C;QACF;AAEA,eAAO;MACT;;AArFF,IAAAC,SAAA,gBAAA;;;;;;;;;;ACNA,QAAA,QAAA,QAAA,OAAA;AACA,QAAA,KAAA,QAAA,IAAA;AAEA,QAAA,cAAA;AACA,QAAA,aAAA;AACA,QAAA,mBAAA;AACA,QAAA,UAAA;AACA,QAAA,cAAA;AAUA,QAAM,cAAc;AAuBpB,aAAS,mBAAmB,OAAa;AACvC,iBAAW,CAAC,MAAM,GAAG,KAAK,OAAO,QAAQ,GAAG,UAAU,KAAK,GAAG;AAC5D,YAAI,QAAQ,OAAO;AACjB,iBAAO;QACT;MACF;AACA,aAAO,0BAA0B;IACnC;AAsBA,aAAS,kBAAkB,MAAY;AACrC,YAAM,UAAU,6BAA6B,IAAI;AACjD,UAAI;AACJ,cAAQ,MAAM;;QAEZ,KAAK;AACH,6BAAmB,YAAA,OAAO;AAC1B;QACF,KAAK;AACH,6BAAmB,YAAA,OAAO;AAC1B;QACF,KAAK;AACH,6BAAmB,YAAA,OAAO;AAC1B;QACF,KAAK;AACH,6BAAmB,YAAA,OAAO;AAC1B;QACF,KAAK;QACL,KAAK;QACL,KAAK;QACL,KAAK;AACH,6BAAmB,YAAA,OAAO;AAC1B;QACF;AACE,6BAAmB,YAAA,OAAO;MAC9B;AACA,aAAO;QACL,MAAM;QACN;QACA,UAAU,IAAI,WAAA,SAAQ;;IAE1B;AAEA,QAAa,sBAAb,MAAgC;MA2B9B,YACmB,aACA,kBACA,UACA,WACA,QAAc;;AAJd,aAAA,cAAA;AACA,aAAA,mBAAA;AACA,aAAA,WAAA;AACA,aAAA,YAAA;AACA,aAAA,SAAA;AA7BX,aAAA,sBAAsB;AACtB,aAAA,gBAAgB;AAChB,aAAA,UAAU;AAKV,aAAA,cAAc;AAEd,aAAA,eAAe;AAEf,aAAA,uBAAiC,CAAA;AAKjC,aAAA,cAAmC;AAEnC,aAAA,gBAAoC;AAEpC,aAAA,kBAAkB;AAElB,aAAA,oBAAoB;AAS1B,cAAM,2BAA0B,KAAA,UAAU,WAAU,EAAG,iCAAiC,OAAC,QAAA,OAAA,SAAA,KAAI,YAAA;AAC7F,aAAK,UAAU,IAAI,iBAAA,cAAc,uBAAuB;AACxD,oBAAY,GAAG,YAAY,CAAC,SAAS,UAAS;AAC5C,cAAI,gBAAgB;AACpB,qBAAW,UAAU,OAAO,KAAK,OAAO,GAAG;AACzC,6BAAiB,OAAS,SAAS,OAAO,QAAQ,MAAM,IAAI;UAC9D;AACA,eAAK,MAAM,+BAA+B,aAAa;AACvD,eAAK,iBAAiB,QAAQ,SAAS;AAEvC,cAAI,QAAQ,MAAM,UAAU,yBAAyB;AACnD,iBAAK,eAAe,OAAO;UAC7B,OAAO;AACL,gBAAI;AACJ,gBAAI;AACF,yBAAW,WAAA,SAAS,iBAAiB,OAAO;YAC9C,SAAS,OAAO;AACd,mBAAK,QAAQ;gBACX,MAAM,YAAA,OAAO;gBACb,SAAU,MAAgB;gBAC1B,UAAU,IAAI,WAAA,SAAQ;eACvB;AACD;YACF;AACA,iBAAK,SAAS,kBAAkB,QAAQ;UAC1C;QACF,CAAC;AACD,oBAAY,GAAG,YAAY,CAAC,YAAsC;AAChE,eAAK,eAAe,OAAO;QAC7B,CAAC;AACD,oBAAY,GAAG,QAAQ,CAAC,SAAgB;AAGtC,cAAI,KAAK,cAAc;AACrB;UACF;AACA,eAAK,MAAM,yCAAyC,KAAK,MAAM;AAC/D,cAAI;AACJ,cAAI;AACF,uBAAW,KAAK,QAAQ,MAAM,IAAI;UACpC,SAAS,GAAG;AAWV,gBAAI,KAAK,mBAAmB,UAAa,KAAK,mBAAmB,KAAK;AACpE,oBAAM,eAAe,kBAAkB,KAAK,cAAc;AAC1D,mBAAK,iBAAiB,aAAa,MAAM,aAAa,OAAO;YAC/D,OAAO;AACL,mBAAK,iBAAiB,YAAA,OAAO,oBAAqB,EAAY,OAAO;YACvE;AACA;UACF;AAEA,qBAAW,WAAW,UAAU;AAC9B,iBAAK,MAAM,8BAA8B,QAAQ,MAAM;AACvD,iBAAK,iBAAkB,mBAAkB;AACzC,iBAAK,QAAQ,OAAO;UACtB;QACF,CAAC;AACD,oBAAY,GAAG,OAAO,MAAK;AACzB,eAAK,cAAc;AACnB,eAAK,kBAAiB;QACxB,CAAC;AACD,oBAAY,GAAG,SAAS,MAAK;AAC3B,eAAK,kBAAkB;AAIvB,kBAAQ,SAAS,MAAK;;AACpB,iBAAK,MAAM,oCAAoC,YAAY,OAAO;AAKlE,kBAAIC,MAAA,KAAK,iBAAW,QAAAA,QAAA,SAAA,SAAAA,IAAE,UAAS,YAAA,OAAO,IAAI;AACxC;YACF;AACA,gBAAI;AACJ,gBAAI,UAAU;AACd,oBAAQ,YAAY,SAAS;cAC3B,KAAK,MAAM,UAAU;AAInB,oBAAI,KAAK,gBAAgB,MAAM;AAC7B;gBACF;AACA,oBAAI,KAAK,kBAAkB,KAAK,mBAAmB,KAAK;AACtD,wBAAM,eAAe,kBAAkB,KAAK,cAAc;AAC1D,yBAAO,aAAa;AACpB,4BAAU,aAAa;gBACzB,OAAO;AACL,yBAAO,YAAA,OAAO;AACd,4BAAU,iCAAiC,YAAY,OAAO;gBAChE;AACA;cACF,KAAK,MAAM,UAAU;AACnB,uBAAO,YAAA,OAAO;AACd,0BAAU;AACV;cACF,KAAK,MAAM,UAAU;AAInB,oBAAI,KAAK,mBAAmB;AAC1B,yBAAO,YAAA,OAAO;AACd,4BAAU;gBACZ,OAAO;AACL,yBAAO,YAAA,OAAO;AACd,4BAAU;gBACZ;AACA;cACF,KAAK,MAAM,UAAU;AACnB,uBAAO,YAAA,OAAO;AACd,0BAAU;AACV;cACF,KAAK,MAAM,UAAU;AACnB,uBAAO,YAAA,OAAO;AACd,0BAAU;AACV;cACF,KAAK,MAAM,UAAU;AACnB,uBAAO,YAAA,OAAO;AACd,oBAAI,KAAK,kBAAkB,MAAM;AAM/B,4BAAU,iCAAiC,YAAY,OAAO;gBAChE,OAAO;AACL,sBACE,KAAK,cAAc,SAAS,gBAC5B,KAAK,cAAc,SAAS,aAC5B;AACA,2BAAO,YAAA,OAAO;AACd,8BAAU,KAAK,cAAc;kBAC/B,OAAO;AAKL,8BAAU,iCAAiC,YAAY,OAAO,wCAAwC,KAAK,cAAc,OAAO;kBAClI;gBACF;AACA;cACF;AACE,uBAAO,YAAA,OAAO;AACd,0BAAU,iCAAiC,YAAY,OAAO;YAClE;AAKA,iBAAK,QAAQ;cACX;cACA;cACA,UAAU,IAAI,WAAA,SAAQ;cACtB,SAAS,YAAY;aACtB;UACH,CAAC;QACH,CAAC;AACD,oBAAY,GAAG,SAAS,CAAC,QAAoB;AAQ3C,cAAI,IAAI,SAAS,0BAA0B;AACzC,iBAAK,MACH,+BACE,IAAI,UACJ,WACA,IAAI,OACJ,YACA,mBAAmB,IAAI,KAAK,IAC5B,cACA,IAAI,OAAO;AAEf,iBAAK,gBAAgB;UACvB;AACA,eAAK,iBAAiB,YAAY,KAAK;QACzC,CAAC;MACH;MACA,kBAAe;AACb,eAAO,CAAC,eAAe,KAAK,QAAO,CAAE,EAAE;MACzC;MAEO,eAAY;AACjB,aAAK,oBAAoB;AAGzB,qBAAa,MAAK;AAChB,eAAK,QAAQ;YACX,MAAM,YAAA,OAAO;YACb,SAAS;YACT,UAAU,IAAI,WAAA,SAAQ;WACvB;QACH,CAAC;MACH;MAEQ,eAAY;AAElB,YAAI,CAAC,KAAK,cAAc;AACtB,eAAK,eAAe;AACpB,eAAK,MACH,6BACE,KAAK,YAAa,OAClB,eACA,KAAK,YAAa,UAClB,GAAG;AAEP,eAAK,iBAAiB,UAAU,KAAK,WAAY;AAOjD,kBAAQ,SAAS,MAAK;AACpB,iBAAK,SAAS,gBAAgB,KAAK,WAAY;UACjD,CAAC;AAKD,eAAK,YAAY,OAAM;QACzB;MACF;MAEQ,MAAM,MAAY;AACxB,gBAAQ,MACN,YAAA,aAAa,OACb,aACA,MAAM,KAAK,SAAS,OAAO,IAAI;MAEnC;;;;;;MAOQ,QAAQC,SAA+B;AAG7C,YAAI,KAAK,gBAAgB,QAAQ,KAAK,YAAY,SAAS,YAAA,OAAO,IAAI;AACpE,eAAK,cAAcA;AACnB,eAAK,kBAAiB;QACxB;AACA,aAAK,mBAAkB;MACzB;MAEQ,oBAAiB;AACvB,YAAI,KAAK,gBAAgB,MAAM;AAI7B,cACE,KAAK,YAAY,SAAS,YAAA,OAAO,MAChC,KAAK,eACJ,KAAK,qBAAqB,WAAW,KACrC,CAAC,KAAK,uBACN,CAAC,KAAK,eACR;AACA,iBAAK,aAAY;UACnB;QACF;MACF;MAEQ,KAAK,SAAe;AAC1B,aAAK,MACH,0CACG,mBAAmB,SAAS,QAAQ,SAAS,KAAK;AAEvD,aAAK,UAAU;AACf,aAAK,gBAAgB;AACrB,gBAAQ,SAAS,MAAK;AACpB,eAAK,gBAAgB;AAKrB,cAAI,KAAK,cAAc;AACrB;UACF;AACA,eAAK,SAAS,iBAAiB,OAAO;AACtC,eAAK,kBAAiB;QACxB,CAAC;MACH;MAEQ,QAAQ,cAAoB;AAClC,YAAI,KAAK,SAAS;AAChB,eAAK,YAAa,MAAK;AACvB,eAAK,KAAK,YAAY;QACxB,OAAO;AACL,eAAK,MACH,iDAAiD,aAAa,MAAM;AAEtE,eAAK,qBAAqB,KAAK,YAAY;QAC7C;MACF;MAEQ,eAAe,SAAkC;AACvD,aAAK,kBAAkB;AACvB,aAAK,iBAAiB,YAAY,IAAI;AACtC,YAAI,gBAAgB;AACpB,mBAAW,UAAU,OAAO,KAAK,OAAO,GAAG;AACzC,2BAAiB,OAAS,SAAS,OAAO,QAAQ,MAAM,IAAI;QAC9D;AACA,aAAK,MAAM,gCAAgC,aAAa;AACxD,YAAI;AACJ,YAAI;AACF,qBAAW,WAAA,SAAS,iBAAiB,OAAO;QAC9C,SAAS,GAAG;AACV,qBAAW,IAAI,WAAA,SAAQ;QACzB;AACA,cAAM,cAAc,SAAS,OAAM;AACnC,YAAIA;AACJ,YAAI,OAAO,YAAY,aAAa,MAAM,UAAU;AAClD,gBAAM,iBAAyB,OAAO,YAAY,aAAa,CAAC;AAChE,eAAK,MAAM,0BAA0B,iBAAiB,cAAc;AACpE,mBAAS,OAAO,aAAa;AAC7B,cAAI,UAAU;AACd,cAAI,OAAO,YAAY,cAAc,MAAM,UAAU;AACnD,gBAAI;AACF,wBAAU,UAAU,YAAY,cAAc,CAAC;YACjD,SAAS,GAAG;AACV,wBAAU,YAAY,cAAc;YACtC;AACA,qBAAS,OAAO,cAAc;AAC9B,iBAAK,MACH,qCAAqC,UAAU,eAAe;UAElE;AACA,UAAAA,UAAS;YACP,MAAM;YACN;YACA;;QAEJ,WAAW,KAAK,gBAAgB;AAC9B,UAAAA,UAAS,kBAAkB,KAAK,cAAc;AAC9C,UAAAA,QAAO,WAAW;QACpB,OAAO;AACL,UAAAA,UAAS;YACP,MAAM,YAAA,OAAO;YACb,SAAS;YACT;;QAEJ;AAEA,aAAK,QAAQA,OAAM;MACrB;MAEQ,qBAAkB;;AAGxB,YAAI,KAAK,YAAY,WAAW;AAC9B;QACF;AAIA,YAAI,KAAK,iBAAiB;AACxB,eAAK,YAAY,IAAG;QACtB,OAAO;AAIL,cAAI;AACJ,gBAAI,KAAA,KAAK,iBAAW,QAAA,OAAA,SAAA,SAAA,GAAE,UAAS,YAAA,OAAO,IAAI;AACxC,mBAAO,MAAM,UAAU;UACzB,OAAO;AACL,mBAAO,MAAM,UAAU;UACzB;AACA,eAAK,MAAM,kCAAkC,IAAI;AACjD,eAAK,YAAY,MAAM,IAAI;QAC7B;MACF;MAEA,iBAAiBA,SAAgB,SAAe;AAC9C,aAAK,MACH,4BAA4BA,UAAS,gBAAgB,UAAU,GAAG;AAEpE,aAAK,QAAQ,EAAE,MAAMA,SAAQ,SAAS,UAAU,IAAI,WAAA,SAAQ,EAAE,CAAE;MAClE;MAEA,YAAS;AACP,eAAO,KAAK;MACd;MAEA,UAAO;AACL,eAAO,KAAK,UAAU,YAAW;MACnC;MAEA,gBAAa;AACX,eAAO,KAAK;MACd;MAEA,iBAAc;AACZ,eAAO,KAAK,UAAU,eAAc;MACtC;MAEA,YAAS;AAGP,YAAI,KAAK,gBAAgB,QAAQ,KAAK,YAAY,SAAS,YAAA,OAAO,IAAI;AACpE,eAAK,cAAc;AACnB,eAAK,kBAAiB;AACtB;QACF;AACA,aAAK,UAAU;AACf,YAAI,KAAK,qBAAqB,SAAS,GAAG;AACxC,gBAAM,cAAsB,KAAK,qBAAqB,MAAK;AAC3D,eAAK,KAAK,WAAW;AACrB;QACF;AAGA,aAAK,YAAY,OAAM;MACzB;MAEA,uBAAuB,SAAyB,SAAe;AAC7D,aAAK,MAAM,2CAA2C,QAAQ,MAAM;AACpE,cAAM,KAAoB,CAAC,UAAwB;AAIjD,kBAAQ,SAAS,MAAK;;AACpB,gBAAI,OAAe,YAAA,OAAO;AAC1B,iBACG,UAA+B,QAA/B,UAAK,SAAA,SAAL,MAAiC,UAClC,8BACA;AACA,qBAAO,YAAA,OAAO;YAChB;AACA,gBAAI,OAAO;AACT,mBAAK,iBAAiB,MAAM,gBAAgB,MAAM,OAAO,EAAE;YAC7D;AACA,aAAA,KAAA,QAAQ,cAAQ,QAAA,OAAA,SAAA,SAAA,GAAA,KAAA,OAAA;UAClB,CAAC;QACH;AACA,aAAK,MAAM,kCAAkC,QAAQ,MAAM;AAC3D,aAAK,iBAAiB,eAAc;AACpC,YAAI;AACF,eAAK,YAAa,MAAM,SAAS,EAAE;QACrC,SAAS,OAAO;AACd,eAAK,QAAQ;YACX,MAAM,YAAA,OAAO;YACb,SAAS,2BAA4B,MAAgB,OAAO;YAC5D,UAAU,IAAI,WAAA,SAAQ;WACvB;QACH;MACF;MAEA,YAAS;AACP,aAAK,MAAM,cAAc;AACzB,aAAK,MAAM,gCAAgC;AAC3C,aAAK,YAAY,IAAG;MACtB;;AArfF,IAAAC,SAAA,sBAAA;;;;;;;;;;ACtGA,QAAA,QAAA,QAAA,OAAA;AACA,QAAA,QAAA,QAAA,KAAA;AAOA,QAAA,aAAA;AASA,QAAA,cAAA;AACA,QAAA,eAAA;AACA,QAAA,UAAA;AACA,QAAA,aAAA;AACA,QAAA,uBAAA;AAKA,QAAA,eAAA;AACA,QAAA,MAAA,QAAA,KAAA;AACA,QAAA,oBAAA;AAMA,QAAA,gBAAA;AAIA,QAAM,cAAc;AACpB,QAAM,2BAA2B;AAEjC,QAAM,gBAAgB,kBAA8B;AAEpD,QAAM,EACJ,wBACA,2BACA,qBACA,mBACA,iBACA,wBAAuB,IACrB,MAAM;AAEV,QAAM,uBAAuB;AA6B7B,QAAM,mBAA2B,OAAO,KAAK,kBAAkB,OAAO;AAEtE,QAAM,iBAAN,MAAoB;MA6ClB,YACU,SACR,mBACQ,SAKA,YAAyB;AAPzB,aAAA,UAAA;AAEA,aAAA,UAAA;AAKA,aAAA,aAAA;AArCF,aAAA,iBAAwC;AAKxC,aAAA,2BAA2B;AAI3B,aAAA,cAAwC,oBAAI,IAAG;AAI/C,aAAA,sBAAqD,CAAA;AAErD,aAAA,oBAAoB;AAMX,aAAA,kBAA2B;AAEpC,aAAA,iBAAiB;AACjB,aAAA,eAAe;AACf,aAAA,mBAAmB;AACnB,aAAA,2BAAwC;AACxC,aAAA,+BAA4C;AAclD,aAAK,2BAA0B,GAAA,qBAAA,2BAA0B,iBAAiB;AAE1E,YAAI,QAAQ,sBAAsB,MAAM,GAAG;AACzC,eAAK,kBAAkB;AACvB,eAAK,gBAAgB,IAAI,WAAA,wBAAuB;QAClD,OAAO;AACL,eAAK,gBAAgB,IAAI,WAAA,oBAAmB;QAC9C;AAEA,aAAK,eAAc,GAAA,WAAA,wBACjB,KAAK,yBACL,MAAM,KAAK,gBAAe,GAC1B,KAAK,eAAe;AAItB,aAAK,YAAY;UACf,QAAQ,yBAAyB;UACjC,gBAAgB,aAAa;UAC7B,QAAQ,2BAA2B;UAElC,OAAO,OAAK,CAAC,EACb,KAAK,GAAG;AAEX,YAAI,4BAA4B,SAAS;AACvC,eAAK,kBAAkB,QAAQ,wBAAwB;QACzD,OAAO;AACL,eAAK,kBAAkB;QACzB;AACA,YAAI,+BAA+B,SAAS;AAC1C,eAAK,qBAAqB,QAAQ,2BAA2B;QAC/D,OAAO;AACL,eAAK,qBAAqB;QAC5B;AACA,YAAI,yCAAyC,SAAS;AACpD,eAAK,wBACH,QAAQ,qCAAqC,MAAM;QACvD,OAAO;AACL,eAAK,wBAAwB;QAC/B;AAEA,gBAAQ,KAAK,SAAS,MAAK;AACzB,eAAK,MAAM,gBAAgB;AAC3B,eAAK,iBAAgB;QACvB,CAAC;AAED,gBAAQ,KACN,UACA,CAAC,WAAmB,cAAsB,eAAuB;AAC/D,cAAI,eAAe;AAGnB,cACE,cAAc,MAAM,UAAU,6BAC9B,cACA,WAAW,OAAO,gBAAgB,GAClC;AACA,2BAAe;UACjB;AACA,eAAK,MACH,2CACE,YACA,gBACA,eAAU,QAAV,eAAU,SAAA,SAAV,WAAY,SAAQ,EAAE;AAE1B,eAAK,wBAAwB,YAAY;QAC3C,CAAC;AAGH,gBAAQ,KAAK,SAAS,WAAQ;AAC5B,eAAK,MAAM,kCAAmC,MAAgB,OAAO;AACrE,eAAK,iBAAgB;QACvB,CAAC;AAED,gBAAQ,OAAO,KAAK,SAAS,CAAC,aAAY;AACxC,eAAK,MAAM,iCAAiC,QAAQ;AACpD,eAAK,iBAAgB;QACvB,CAAC;AAED,YAAI,QAAQ,gBAAgB,WAAW,GAAG;AACxC,kBAAQ,GAAG,kBAAkB,CAAC,aAA4B;AACxD,iBAAK,MACH,2BACG,KAAK,YAAY,UAAU,2BAA2B,MACvD,OACA,KAAK,UAAU,QAAQ,CAAC;UAE9B,CAAC;AACD,kBAAQ,GAAG,iBAAiB,CAAC,aAA4B;AACvD,iBAAK,MACH,2CACG,KAAK,YAAY,UAAU,2BAA2B,MACvD,OACA,KAAK,UAAU,QAAQ,CAAC;UAE9B,CAAC;QACH;AAIA,YAAI,KAAK,uBAAuB;AAC9B,eAAK,6BAA4B;QACnC;AAEA,YAAI,QAAQ,kBAAkB,MAAA,WAAW;AACvC,eAAK,cAAc;YACjB,uBAAuB;YACvB,oBAAoB,QAAQ,OAAO,mBAAkB;;QAEzD,OAAO;AACL,eAAK,cAAc,CAAA;QACrB;MACF;MAEQ,kBAAe;;AACrB,cAAM,gBAAgB,KAAK,QAAQ;AACnC,cAAM,gBAAgB,cAAc,iBAChC,GAAA,qBAAA,2BACE,cAAc,eACd,cAAc,UAAU,IAE1B;AACJ,cAAM,eAAe,cAAc,gBAC/B,GAAA,qBAAA,2BACE,cAAc,cACd,cAAc,SAAS,IAEzB;AACJ,YAAI;AACJ,YAAI,KAAK,QAAQ,WAAW;AAC1B,gBAAM,YAAuB;AAC7B,gBAAM,aACJ,UAAU,UAAS;AACrB,gBAAM,cAAc,UAAU,eAAc;AAC5C,gBAAM,kBAAkB,UAAU,mBAAkB;AACpD,oBAAU;YACR,0BAAyB,KAAA,WAAW,kBAAY,QAAA,OAAA,SAAA,KAAI;YACpD,sBAAsB,WAAW,eAAe,OAAO,WAAW;YAClE,kBACE,eAAe,SAAS,cAAc,YAAY,MAAM;YAC1D,mBACE,mBAAmB,SAAS,kBACxB,gBAAgB,MAChB;;QAEV,OAAO;AACL,oBAAU;QACZ;AACA,cAAM,aAAyB;UAC7B;UACA;UACA,UAAU;UACV,YAAY,KAAK;UACjB,gBAAgB,KAAK,cAAc;UACnC,kBAAkB,KAAK,cAAc;UACrC,eAAe,KAAK,cAAc;UAClC,cAAc,KAAK;UACnB,kBAAkB,KAAK;UACvB,gBAAgB,KAAK;UACrB,iCACE,KAAK,cAAc;UACrB,kCAAkC;UAClC,0BAA0B,KAAK;UAC/B,8BAA8B,KAAK;UACnC,yBAAwB,KAAA,KAAK,QAAQ,MAAM,qBAAe,QAAA,OAAA,SAAA,KAAI;UAC9D,0BAAyB,KAAA,KAAK,QAAQ,MAAM,sBAAgB,QAAA,OAAA,SAAA,KAAI;;AAElE,eAAO;MACT;MAEQ,MAAM,MAAY;AACxB,gBAAQ,MACN,YAAA,aAAa,OACb,aACA,MACE,KAAK,YAAY,KACjB,OACA,KAAK,0BACL,MACA,IAAI;MAEV;MAEQ,eAAe,MAAY;AACjC,gBAAQ,MACN,YAAA,aAAa,OACb,aACA,MACE,KAAK,YAAY,KACjB,OACA,KAAK,0BACL,MACA,IAAI;MAEV;MAEQ,iBAAiB,MAAY;AACnC,gBAAQ,MACN,YAAA,aAAa,OACb,0BACA,MACE,KAAK,YAAY,KACjB,OACA,KAAK,0BACL,MACA,IAAI;MAEV;MAEQ,eAAe,MAAY;AACjC,gBAAQ,MACN,YAAA,aAAa,OACb,uBACA,MACE,KAAK,YAAY,KACjB,OACA,KAAK,0BACL,MACA,IAAI;MAEV;;;;;;;;;;MAWQ,wBAAwB,cAAqB;AACnD,YAAI,KAAK,mBAAmB;AAC1B;QACF;AACA,aAAK,oBAAoB;AACzB,aAAK,oBAAoB,QAAQ,cAAY,SAAS,YAAY,CAAC;MACrE;;;;MAKQ,mBAAgB;AACtB,aAAK,sBAAqB;AAC1B,aAAK,wBAAwB,KAAK;AAClC,mBAAW,QAAQ,KAAK,aAAa;AACnC,eAAK,aAAY;QACnB;AAEA,qBAAa,MAAK;AAChB,eAAK,QAAQ,QAAO;QACtB,CAAC;MACH;MAEA,sBAAsB,UAAqC;AACzD,aAAK,oBAAoB,KAAK,QAAQ;MACxC;MAEQ,cAAW;AACjB,eACE,CAAC,KAAK,QAAQ,aACd,KAAK,kBAAkB,MACtB,KAAK,yBAAyB,KAAK,YAAY,OAAO;MAE3D;MAEQ,gBAAa;;AACnB,YAAI,CAAC,KAAK,YAAW,GAAI;AACvB,eAAK,2BAA2B;AAChC;QACF;AACA,YAAI,KAAK,gBAAgB;AACvB,kBAAQ,MAAM,8BAA8B;AAC5C;QACF;AACA,YAAI,KAAK,iBAAiB;AACxB,eAAK,kBAAkB;QACzB;AACA,aAAK,eACH,+BAA+B,KAAK,qBAAqB,IAAI;AAE/D,aAAK,iBAAiB,WAAW,MAAK;AACpC,eAAK,iBAAiB;AACtB,eAAK,eAAe,sCAAsC;AAC1D,eAAK,iBAAgB;QACvB,GAAG,KAAK,kBAAkB;AAC1B,SAAA,MAAA,KAAA,KAAK,gBAAe,WAAK,QAAA,OAAA,SAAA,SAAA,GAAA,KAAA,EAAA;AACzB,YAAI,gBAAgB;AACpB,YAAI;AACF,gBAAM,uBAAuB,KAAK,QAAQ,KACxC,CAAC,KAAmB,UAAkB,YAAmB;AACvD,iBAAK,sBAAqB;AAC1B,gBAAI,KAAK;AACP,mBAAK,eAAe,4BAA4B,IAAI,OAAO;AAC3D,mBAAK,iBAAgB;YACvB,OAAO;AACL,mBAAK,eAAe,wBAAwB;AAC5C,mBAAK,6BAA4B;YACnC;UACF,CAAC;AAEH,cAAI,CAAC,sBAAsB;AACzB,4BAAgB;UAClB;QACF,SAAS,GAAG;AAEV,2BAAiB,aAAa,QAAQ,EAAE,UAAU,OAAO;QAC3D;AACA,YAAI,eAAe;AACjB,eAAK,eAAe,uBAAuB,aAAa;AACxD,eAAK,iBAAgB;QACvB;MACF;;;;;;;MAQQ,+BAA4B;;AAClC,YAAI,CAAC,KAAK,YAAW,GAAI;AACvB;QACF;AACA,YAAI,KAAK,0BAA0B;AACjC,eAAK,2BAA2B;AAChC,eAAK,cAAa;QACpB,WAAW,CAAC,KAAK,gBAAgB;AAC/B,eAAK,eACH,kCAAkC,KAAK,kBAAkB,IAAI;AAE/D,eAAK,iBAAiB,WAAW,MAAK;AACpC,iBAAK,iBAAiB;AACtB,iBAAK,cAAa;UACpB,GAAG,KAAK,eAAe;AACvB,WAAA,MAAA,KAAA,KAAK,gBAAe,WAAK,QAAA,OAAA,SAAA,SAAA,GAAA,KAAA,EAAA;QAC3B;MAGF;;;;MAKQ,wBAAqB;AAC3B,YAAI,KAAK,gBAAgB;AACvB,uBAAa,KAAK,cAAc;AAChC,eAAK,iBAAiB;QACxB;MACF;MAEQ,iBAAiB,MAAyB;AAChD,aAAK,YAAY,OAAO,IAAI;AAC5B,YAAI,KAAK,YAAY,SAAS,GAAG;AAC/B,eAAK,QAAQ,MAAK;QACpB;MACF;MAEQ,cAAc,MAAyB;AAC7C,aAAK,YAAY,IAAI,IAAI;AACzB,YAAI,KAAK,YAAY,SAAS,GAAG;AAC/B,eAAK,QAAQ,IAAG;AAChB,cAAI,CAAC,KAAK,uBAAuB;AAC/B,iBAAK,6BAA4B;UACnC;QACF;MACF;MAEA,WACE,UACA,MACA,QACA,UACA,4BAAqD;AAErD,cAAM,UAAU,SAAS,eAAc;AACvC,gBAAQ,sBAAsB,IAAI;AAClC,gBAAQ,uBAAuB,IAAI,KAAK;AACxC,gBAAQ,yBAAyB,IAAI;AACrC,gBAAQ,mBAAmB,IAAI;AAC/B,gBAAQ,iBAAiB,IAAI;AAC7B,gBAAQ,eAAe,IAAI;AAC3B,YAAI;AASJ,YAAI;AACF,wBAAc,KAAK,QAAQ,QAAQ,OAAO;QAC5C,SAAS,GAAG;AACV,eAAK,iBAAgB;AACrB,gBAAM;QACR;AACA,aAAK,iBACH,wBACE,KAAK,QAAQ,MAAM,kBACnB,0BACA,KAAK,QAAQ,MAAM,gBAAgB;AAEvC,aAAK,eACH,oBACE,KAAK,QAAQ,SACb,wBACA,KAAK,QAAQ,YACb,+BACA,KAAK,QAAQ,OAAO,SAAS;AAEjC,YAAI;AAEJ,YAAI;AACJ,YAAI,KAAK,iBAAiB;AACxB,eAAK,cAAc,eAAc;AACjC,yBAAe;YACb,gBAAgB,MAAK;;AACnB,mBAAK,gBAAgB;AACrB,mBAAK,2BAA2B,oBAAI,KAAI;AACxC,eAAA,KAAA,2BAA2B,oBAAc,QAAA,OAAA,SAAA,SAAA,GAAA,KAAA,0BAAA;YAC3C;YACA,oBAAoB,MAAK;;AACvB,mBAAK,oBAAoB;AACzB,mBAAK,+BAA+B,oBAAI,KAAI;AAC5C,eAAA,KAAA,2BAA2B,wBAAkB,QAAA,OAAA,SAAA,SAAA,GAAA,KAAA,0BAAA;YAC/C;YACA,WAAW,CAAAC,YAAS;;AAClB,eAAA,KAAA,2BAA2B,eAAS,QAAA,OAAA,SAAA,SAAA,GAAA,KAAA,4BAAGA,OAAM;AAC7C,mBAAK,iBAAiB,IAAI;YAC5B;YACA,aAAa,aAAU;;AACrB,kBAAI,SAAS;AACX,qBAAK,cAAc,iBAAgB;cACrC,OAAO;AACL,qBAAK,cAAc,cAAa;cAClC;AACA,eAAA,KAAA,2BAA2B,iBAAW,QAAA,OAAA,SAAA,SAAA,GAAA,KAAA,4BAAG,OAAO;YAClD;;QAEJ,OAAO;AACL,yBAAe;YACb,gBAAgB,MAAK;;AACnB,eAAA,KAAA,2BAA2B,oBAAc,QAAA,OAAA,SAAA,SAAA,GAAA,KAAA,0BAAA;YAC3C;YACA,oBAAoB,MAAK;;AACvB,eAAA,KAAA,2BAA2B,wBAAkB,QAAA,OAAA,SAAA,SAAA,GAAA,KAAA,0BAAA;YAC/C;YACA,WAAW,CAAAA,YAAS;;AAClB,eAAA,KAAA,2BAA2B,eAAS,QAAA,OAAA,SAAA,SAAA,GAAA,KAAA,4BAAGA,OAAM;AAC7C,mBAAK,iBAAiB,IAAI;YAC5B;YACA,aAAa,aAAU;;AACrB,eAAA,KAAA,2BAA2B,iBAAW,QAAA,OAAA,SAAA,SAAA,GAAA,KAAA,4BAAG,OAAO;YAClD;;QAEJ;AACA,eAAO,IAAI,kBAAA,oBACT,aACA,cACA,UACA,OACA,GAAA,cAAA,mBAAiB,CAAE;AAErB,aAAK,cAAc,IAAI;AACvB,eAAO;MACT;MAEA,iBAAc;AACZ,eAAO,KAAK;MACd;MAEA,cAAW;AACT,eAAO,KAAK;MACd;MAEA,aAAU;AACR,eAAO,KAAK;MACd;MAEA,iBAAc;AACZ,eAAO,KAAK;MACd;MAEA,WAAQ;AACN,aAAK,QAAQ,MAAK;AAClB,SAAA,GAAA,WAAA,uBAAsB,KAAK,WAAW;MACxC;;AAYF,QAAa,2BAAb,MAAqC;MAGnC,YAAoB,eAAsB;AAAtB,aAAA,gBAAA;AAFZ,aAAA,UAA2C;AAC3C,aAAA,aAAa;MACwB;MAErC,MAAM,MAAY;AACxB,gBAAQ,MACN,YAAA,aAAa,OACb,cACA,GAAA,aAAA,aAAY,KAAK,aAAa,IAAI,MAAM,IAAI;MAEhD;MAEQ,cACN,qBACA,SACA,SAAuB;AAEvB,YAAI,KAAK,YAAY;AACnB,iBAAO,QAAQ,OAAM;QACvB;AAEA,YAAI,oBAAoB,OAAO,QAAQ;AACrC,iBAAO,QAAQ,OAAO,oDAAoD;QAC5E;AAEA,eAAO,IAAI,QAAwB,CAACC,UAAS,WAAU;;AACrD,cAAI,aAA4B;AAChC,cAAI,aAAsB,KAAK;AAC/B,cAAI,8BAA8B,SAAS;AACzC,kBAAM,gBAAe,GAAA,aAAA,UAAS,QAAQ,0BAA0B,CAAE;AAClE,gBAAI,cAAc;AAChB,2BAAa;AACb,4BAAa,GAAA,aAAA,aAAY,YAAY;YACvC;UACF;AACA,gBAAM,SAAS,oBAAoB,SAAS,UAAU;AACtD,gBAAM,cAAa,GAAA,WAAA,qBAAoB,UAAU;AACjD,gBAAM,eAAe,MAAK;;AACxB,aAAAC,MAAA,KAAK,aAAO,QAAAA,QAAA,SAAA,SAAAA,IAAE,QAAO;AACrB,iBAAK,UAAU;AAEf,yBAAa,MAAK;AAChB,kBAAI,CAAC,eAAe;AAClB,gCAAgB;AAChB,uBAAO,GAAG,aAAa,KAAI,CAAE,MAAK,oBAAI,KAAI,GAAG,YAAW,CAAE,GAAG;cAC/D;YACF,CAAC;UACH;AACA,gBAAM,eAAe,CAAC,UAAgB;;AACpC,aAAAA,MAAA,KAAK,aAAO,QAAAA,QAAA,SAAA,SAAAA,IAAE,QAAO;AACrB,2BAAgB,MAAgB;AAChC,iBAAK,MAAM,kCAAkC,YAAY;AACzD,gBAAI,CAAC,eAAe;AAClB,8BAAgB;AAChB,qBAAO,GAAG,YAAY,MAAK,oBAAI,KAAI,GAAG,YAAW,CAAE,GAAG;YACxD;UACF;AACA,gBAAM,iBAA6C;YACjD,kBAAkB,CAAC,WAAW,WAAU;AACtC,qBAAO,oBAAoB;YAC7B;YACA,UAAU;cACR,oBACE,MAAA,KAAA,QAAQ,+BAA+B,OAAC,QAAA,OAAA,SAAA,MACxC,MAAA,KAAA,MAAM,wBAAkB,QAAA,OAAA,SAAA,SAAA,GAAA,KAAA,KAAA,OAAI,QAAA,OAAA,SAAA,SAAA,GAAE,uBAAiB,QAAA,OAAA,SAAA,KAAI;;YAEvD,0BAA0B,OAAO;;;;;YAKjC,mBAAkB,KAAA,QAAQ,8BAA8B,OAAC,QAAA,OAAA,SAAA,KAAI,OAAO;;AAEtE,gBAAM,UAAU,MAAM,QAAQ,GAAG,MAAM,MAAM,UAAU,IAAI,cAAc;AAEzE,gBAAM,cAAa,MAAA,MAAA,KAAA,MAAM,wBAAkB,QAAA,OAAA,SAAA,SAAA,GAAA,KAAA,KAAA,OAAI,QAAA,OAAA,SAAA,SAAA,GAAE,uBAAiB,QAAA,OAAA,SAAA,KAAI;AACtE,gBAAM,UAAU,QACd,+BAA+B;AAGjC,eAAK,UAAU;AACf,cAAI,eAAe;AACnB,cAAI,gBAAgB;AACpB,kBAAQ,MAAK;AACb,kBAAQ,KAAK,kBAAkB,MAAK;;AAElC,gBAAI,WAAW,UAAU,YAAY;AACnC,kBAAI;AAED,wBAAgB,mBAAmB,OAAO;cAC7C,SAAEC,KAAM;AAEN,sBAAM,QAAQ,YAAWD,MAAA,QAAQ,MAAM,qBAAe,QAAAA,QAAA,SAAAA,MAAI;AAC1D,oBAAI,QAAQ;AAAI,0BAAgB,oBAAoB,KAAK;cAC3D;YACF;AAEA,oBAAQ,mBAAkB;AAC1B,gCAAoB,OAAO,eAAe,SAAS,YAAY;AAC/D,gCAAoB,OAAO,eAAe,SAAS,YAAY;AAC/D,YAAAD,SAAQ,IAAI,eAAe,SAAS,SAAS,SAAS,UAAU,CAAC;AACjE,iBAAK,UAAU;UACjB,CAAC;AACD,kBAAQ,KAAK,SAAS,YAAY;AAClC,kBAAQ,KAAK,SAAS,YAAY;AAClC,8BAAoB,OAAO,KAAK,SAAS,YAAY;AACrD,8BAAoB,OAAO,KAAK,SAAS,YAAY;QACvD,CAAC;MACH;MAEQ,WAAW,SAA4B,SAAuB;AACpE,gBAAO,GAAA,aAAA,sBAAqB,SAAS,OAAO,EAAE,KAAK,mBAAgB;AACjE,cAAI,eAAe;AACjB,mBAAO;UACT,OAAO;AACL,mBAAO,IAAI,QAAgB,CAACA,UAAS,WAAU;AAC7C,oBAAM,gBAAgB,MAAK;AACzB,uBAAO,IAAI,MAAM,eAAe,CAAC;cACnC;AACA,oBAAM,gBAAgB,CAAC,UAAgB;AACrC,uBAAO,KAAK;cACd;AACA,oBAAM,SAAS,IAAI,QAAQ,SAAS,MAAK;AACvC,uBAAO,eAAe,SAAS,aAAa;AAC5C,uBAAO,eAAe,SAAS,aAAa;AAC5C,gBAAAA,SAAQ,MAAM;cAChB,CAAC;AACD,qBAAO,KAAK,SAAS,aAAa;AAClC,qBAAO,KAAK,SAAS,aAAa;YACpC,CAAC;UACH;QACF,CAAC;MACH;MAEA,MAAM,QACJ,SACA,iBACA,SAAuB;AAEvB,YAAI,KAAK,YAAY;AACnB,iBAAO,QAAQ,OAAM;QACvB;AACA,YAAI,gBAAmC;AACvC,YAAI,sBAAmD;AACvD,cAAM,iBAAgB,GAAA,qBAAA,2BAA0B,OAAO;AACvD,YAAI;AACF,eAAK,MAAM,gBAAgB,0CAA0C;AACrE,gBAAM,gBAAgB,aAAY;AAClC,eAAK,MAAM,gBAAgB,2BAA2B;AACtD,0BAAgB,MAAM,KAAK,WAAW,SAAS,OAAO;AACtD,wBAAc,WAAU;AACxB,eAAK,MAAM,gBAAgB,6BAA6B;AACxD,gCAAsB,MAAM,gBAAgB,QAAQ,aAAa;AACjE,eAAK,MAAM,gBAAgB,gCAAgC;AAC3D,iBAAO,KAAK,cAAc,qBAAqB,SAAS,OAAO;QACjE,SAAS,GAAG;AACV,4BAAa,QAAb,kBAAa,SAAA,SAAb,cAAe,QAAO;AACtB,kCAAmB,QAAnB,wBAAmB,SAAA,SAAnB,oBAAqB,OAAO,QAAO;AACnC,gBAAM;QACR;MACF;MAEA,WAAQ;;AACN,aAAK,aAAa;AAClB,SAAA,KAAA,KAAK,aAAO,QAAA,OAAA,SAAA,SAAA,GAAE,MAAK;AACnB,aAAK,UAAU;MACjB;;AAvKF,IAAAG,SAAA,2BAAA;;;;;;;;;;ACveA,IAAAC,SAAA,oBAAA;AAxJA,QAAA,oBAAA;AACA,QAAA,eAAA;AACA,QAAA,uBAAA;AAKA,QAAA,eAAA;AACA,QAAA,cAAA;AAOA,QAAM,qBAAqB;AAE3B,QAAa,iBAAb,MAA2B;;;;;MAmBzB,cAAA;AAlBQ,aAAA,OAOJ,uBAAO,OAAO,IAAI;AAKd,aAAA,eAAsC;MAM/B;;;;;MAMf,yBAAsB;AACpB,YAAI,wBAAwB;AAM5B,mBAAW,iBAAiB,KAAK,MAAM;AACrC,gBAAM,qBAAqB,KAAK,KAAK,aAAa;AAElD,gBAAM,mBAAmB,mBAAmB,OAC1C,WAAS,CAAC,MAAM,WAAW,cAAa,CAAE;AAG5C,cAAI,iBAAiB,SAAS,GAAG;AAC/B,oCAAwB;UAC1B;AAKA,eAAK,KAAK,aAAa,IAAI;QAC7B;AAKA,YAAI,yBAAyB,KAAK,iBAAiB,MAAM;AACvD,wBAAc,KAAK,YAAY;AAC/B,eAAK,eAAe;QACtB;MACF;;;;MAKA,oBAAiB;;AACf,YAAI,KAAK,iBAAiB,MAAM;AAC9B,eAAK,eAAe,YAAY,MAAK;AACnC,iBAAK,uBAAsB;UAC7B,GAAG,kBAAkB;AAIrB,WAAA,MAAA,KAAA,KAAK,cAAa,WAAK,QAAA,OAAA,SAAA,SAAA,GAAA,KAAA,EAAA;QACzB;MACF;;;;;;;;;MAUA,sBACE,kBACA,kBACA,kBACA,oBAAsC;AAEtC,aAAK,kBAAiB;AACtB,cAAM,iBAAgB,GAAA,aAAA,aAAY,gBAAgB;AAClD,YAAI,iBAAiB,KAAK,MAAM;AAC9B,gBAAM,qBAAqB,KAAK,KAAK,aAAa;AAClD,qBAAW,iBAAiB,oBAAoB;AAC9C,iBACE,GAAA,qBAAA,wBACE,kBACA,cAAc,iBAAiB,MAEjC,GAAA,kBAAA,qBACE,kBACA,cAAc,gBAAgB,KAEhC,mBAAmB,QAAQ,cAAc,kBAAkB,GAC3D;AACA,qBAAO,cAAc;YACvB;UACF;QACF;AAEA,cAAM,aAAa,IAAI,aAAA,WACrB,kBACA,kBACA,kBACA,oBACA,IAAI,YAAA,yBAAyB,gBAAgB,CAAC;AAEhD,YAAI,EAAE,iBAAiB,KAAK,OAAO;AACjC,eAAK,KAAK,aAAa,IAAI,CAAA;QAC7B;AACA,aAAK,KAAK,aAAa,EAAE,KAAK;UAC5B,mBAAmB;UACnB;UACA;UACA;SACD;AACD,mBAAW,IAAG;AACd,eAAO;MACT;;AA9HF,IAAAA,SAAA,iBAAA;AAiIA,QAAM,uBAAuB,IAAI,eAAc;AAM/C,aAAgB,kBAAkBC,SAAe;AAC/C,UAAIA,SAAQ;AACV,eAAO;MACT,OAAO;AACL,eAAO,IAAI,eAAc;MAC3B;IACF;;;;;;;;;;ACrJA,QAAA,uBAAA;AACA,QAAA,cAAA;AACA,QAAA,aAAA;AAEA,QAAA,aAAA;AACA,QAAA,WAAA;AAEA,QAAA,eAAA;AACA,QAAA,UAAA;AACA,QAAA,yBAAA;AACA,QAAA,QAAA,QAAA,OAAA;AAGA,QAAM,cAAc;AAapB,QAAa,oBAAb,MAA8B;MAa5B,YACmB,SACA,YACA,YACA,MACAC,cACA,UACA,YAAkB;;AANlB,aAAA,UAAA;AACA,aAAA,aAAA;AACA,aAAA,aAAA;AACA,aAAA,OAAA;AACA,aAAA,cAAAA;AACA,aAAA,WAAA;AACA,aAAA,aAAA;AAnBX,aAAA,QAA+B;AAC/B,aAAA,cAAc;AACd,aAAA,iBACN;AACM,aAAA,mBAAmB;AACnB,aAAA,QAAQ;AAER,aAAA,WAA4B;AAC5B,aAAA,WAAwC;AACxC,aAAA,cAAkC;AAElC,aAAA,iBAA8B;AAUpC,cAAM,YAAsB,KAAK,WAAW,MAAM,GAAG;AACrD,YAAI,cAAc;AAIlB,YAAI,UAAU,UAAU,GAAG;AACzB,wBAAc,UAAU,CAAC;QAC3B;AACA,cAAM,YAAW,MAAA,MAAA,GAAA,aAAA,eAAc,KAAK,IAAI,OAAC,QAAA,OAAA,SAAA,SAAA,GAAE,UAAI,QAAA,OAAA,SAAA,KAAI;AAGnD,aAAK,aAAa,WAAW,QAAQ,IAAI,WAAW;AACpD,aAAK,YAAY,oBAAI,KAAI;MAC3B;MACA,kBAAe;;AACb,cAAM,eAAyB,CAAA;AAC/B,YAAI,KAAK,gBAAgB;AACvB,cAAI,KAAK,iBAAiB,KAAK,WAAW;AACxC,iBAAI,KAAA,KAAK,cAAQ,QAAA,OAAA,SAAA,SAAA,GAAE,WAAU,EAAG,cAAc;AAC5C,2BAAa,KAAK,gBAAgB;YACpC;AACA,yBAAa,KAAK,aAAY,GAAA,WAAA,sBAAqB,KAAK,WAAW,KAAK,cAAc,CAAC,EAAE;UAC3F;AACA,uBAAa,KAAK,GAAG,KAAK,MAAO,gBAAe,CAAE;AAClD,iBAAO;QACT,OAAO;AACL,eAAI,KAAA,KAAK,cAAQ,QAAA,OAAA,SAAA,SAAA,GAAE,WAAU,EAAG,cAAc;AAC5C,yBAAa,KAAK,gBAAgB;UACpC;AACA,uBAAa,KAAK,qBAAqB;QACzC;AACA,eAAO;MACT;MAEQ,MAAM,MAAY;AACxB,gBAAQ,MACN,YAAA,aAAa,OACb,aACA,MAAM,KAAK,aAAa,OAAO,IAAI;MAEvC;MAEQ,aAAaC,SAAsB,UAAqB;;AAC9D,YAAI,CAAC,KAAK,OAAO;AACf,eAAK,QAAQ;AACb,eAAK,MACH,6BACEA,QAAO,OACP,eACAA,QAAO,UACP,kBACA,KAAK,UAAU,YAAW,CAAE;AAEhC,gBAAM,cAAW,OAAA,OAAA,OAAA,OAAA,CAAA,GAAQA,OAAM,GAAA,EAAE,SAAQ,CAAA;AACzC,WAAA,KAAA,KAAK,cAAQ,QAAA,OAAA,SAAA,SAAA,GAAE,gBAAgB,WAAW;AAC1C,WAAA,KAAA,KAAK,iBAAW,QAAA,OAAA,SAAA,SAAA,GAAA,KAAA,MAAG,YAAY,MAAM,YAAY,SAAS,YAAY,QAAQ;QAChF;MACF;MAEA,SAAM;;AACJ,YAAI,KAAK,OAAO;AACd;QACF;AACA,YAAI,CAAC,KAAK,UAAU;AAClB,gBAAM,IAAI,MAAM,4BAA4B;QAC9C;AACA,aAAK,MAAM,aAAa;AACxB,cAAM,gBAAgB,KAAK,SAAS,MAAK;AACzC,cAAM,aAAa,KAAK,QAAQ,OAC9B,eACA,KAAK,WAAW,eAAe;AAEjC,cAAM,mBAAmB,WAAW,aAChC,MACA,WAAW,WAAW,eAAc,EAAG,KACvC,OACA,WAAW,WAAW,WAAU,IAChC,KAAK,WAAW;AACpB,aAAK,MACH,kBACE,SAAA,eAAe,WAAW,cAAc,IACxC,kBACA,mBACA,gBACA,KAAA,WAAW,YAAM,QAAA,OAAA,SAAA,SAAA,GAAE,QACnB,QACA,KAAA,WAAW,YAAM,QAAA,OAAA,SAAA,SAAA,GAAE,QAAO;AAE9B,gBAAQ,WAAW,gBAAgB;UACjC,KAAK,SAAA,eAAe;AAClB,kBAAM,0BAA0B,KAAK,YAAY,QAAQ,WAAW,WAAY,mBAAkB,CAAE;AACpG,oCACG,iBAAiB,EAAE,aAAa,KAAK,YAAY,aAAa,KAAK,WAAU,CAAE,EAC/E,KACC,mBAAgB;;AAId,kBAAI,KAAK,OAAO;AACd,qBAAK,MACH,2DAA2D;AAE7D;cACF;AACA,4BAAc,MAAM,aAAa;AACjC,kBAAI,cAAc,IAAI,eAAe,EAAE,SAAS,GAAG;AACjD,qBAAK,aACH;kBACE,MAAM,YAAA,OAAO;kBACb,SACE;kBACF,UAAU,IAAI,WAAA,SAAQ;mBAExB,WAAW;cAEf;AACA,kBACE,WAAW,WAAY,qBAAoB,MAC3C,qBAAA,kBAAkB,OAClB;AACA,qBAAK,MACH,uBACE,mBACA,gBACA,qBAAA,kBACE,WAAW,WAAY,qBAAoB,CAAE,IAE/C,oDAAoD;AAExD,qBAAK,OAAM;AACX;cACF;AAEA,kBAAI,KAAK,aAAa,UAAU;AAC9B,8BAAc,IACZ,iBACA,GAAA,WAAA,0BAAyB,KAAK,QAAQ,CAAC;cAE3C;AACA,kBAAI;AACF,qBAAK,QAAQ,WACV,WAAY,kBAAiB,EAC7B,WAAW,eAAe,KAAK,MAAM,KAAK,YAAY;kBACrD,mBAAmB,cAAW;AAC5B,yBAAK,MAAM,mBAAmB;AAC9B,yBAAK,SAAU,kBAAkB,QAAQ;kBAC3C;kBACA,kBAAkB,aAAU;AAC1B,yBAAK,MAAM,kBAAkB;AAC7B,yBAAK,SAAU,iBAAiB,OAAO;kBACzC;kBACA,iBAAiB,CAAAA,YAAS;AACxB,yBAAK,MAAM,iBAAiB;AAC5B,wBACEA,QAAO,YACP,MAAM,UAAU,wBAChB;AACA,2BAAK,aAAaA,SAAQ,SAAS;oBACrC,OAAO;AACL,2BAAK,aAAaA,SAAQ,WAAW;oBACvC;kBACF;iBACD;AACH,qBAAK,iBAAiB,oBAAI,KAAI;cAChC,SAAS,OAAO;AACd,qBAAK,MACH,+CACE,mBACA,iBACC,MAAgB,OAAO;AAE5B,qBAAK,aACH;kBACE,MAAM,YAAA,OAAO;kBACb,SACE,8CACC,MAAgB;kBACnB,UAAU,IAAI,WAAA,SAAQ;mBAExB,aAAa;AAEf;cACF;AACA,eAAAC,MAAA,WAAW,mBAAa,QAAAA,QAAA,SAAA,SAAAA,IAAA,KAAA,UAAA;AACxB,mBAAK,cAAc,WAAW;AAC9B,mBAAK,MACH,yBAAyB,KAAK,MAAM,cAAa,IAAK,GAAG;AAE3D,kBAAI,KAAK,aAAa;AACpB,qBAAK,MAAM,UAAS;cACtB;AACA,kBAAI,KAAK,gBAAgB;AACvB,qBAAK,MAAM,uBACT,KAAK,eAAe,SACpB,KAAK,eAAe,OAAO;cAE/B;AACA,kBAAI,KAAK,kBAAkB;AACzB,qBAAK,MAAM,UAAS;cACtB;YACF,GACA,CAAC,UAAmC;AAElC,oBAAM,EAAE,MAAAC,OAAM,SAAAC,SAAO,KAAK,GAAA,uBAAA,gCACxB,OAAO,MAAM,SAAS,WAAW,MAAM,OAAO,YAAA,OAAO,SACrD,mDAAmD,MAAM,OAAO,EAAE;AAEpE,mBAAK,aACH;gBACE,MAAMD;gBACN,SAASC;gBACT,UAAU,IAAI,WAAA,SAAQ;iBAExB,WAAW;YAEf,CAAC;AAEL;UACF,KAAK,SAAA,eAAe;AAClB,kBAAM,EAAE,MAAM,QAAO,KAAK,GAAA,uBAAA,gCACxB,WAAW,OAAQ,MACnB,WAAW,OAAQ,OAAO;AAE5B,yBAAa,MAAK;AAChB,mBAAK,aACH,EAAE,MAAM,SAAS,UAAU,WAAW,OAAQ,SAAQ,GACtD,MAAM;YAEV,CAAC;AACD;UACF,KAAK,SAAA,eAAe;AAClB,gBAAI,KAAK,SAAS,WAAU,EAAG,cAAc;AAC3C,mBAAK,QAAQ,iBAAiB,IAAI;YACpC,OAAO;AACL,oBAAM,EAAE,MAAAD,OAAM,SAAAC,SAAO,KAAK,GAAA,uBAAA,gCACxB,WAAW,OAAQ,MACnB,WAAW,OAAQ,OAAO;AAE5B,2BAAa,MAAK;AAChB,qBAAK,aACH,EAAE,MAAAD,OAAM,SAAAC,UAAS,UAAU,WAAW,OAAQ,SAAQ,GACtD,WAAW;cAEf,CAAC;YACH;AACA;UACF,KAAK,SAAA,eAAe;AAClB,iBAAK,QAAQ,iBAAiB,IAAI;QACtC;MACF;MAEA,iBAAiBH,SAAgB,SAAe;;AAC9C,aAAK,MACH,4BAA4BA,UAAS,gBAAgB,UAAU,GAAG;AAEpE,SAAA,KAAA,KAAK,WAAK,QAAA,OAAA,SAAA,SAAA,GAAE,iBAAiBA,SAAQ,OAAO;AAC5C,aAAK,aACH,EAAE,MAAMA,SAAQ,SAAkB,UAAU,IAAI,WAAA,SAAQ,EAAE,GAC1D,WAAW;MAEf;MACA,UAAO;;AACL,gBAAO,MAAA,KAAA,KAAK,WAAK,QAAA,OAAA,SAAA,SAAA,GAAE,QAAO,OAAE,QAAA,OAAA,SAAA,KAAI,KAAK,QAAQ,UAAS;MACxD;MACA,MACE,UACA,UAA+C;AAE/C,aAAK,MAAM,cAAc;AACzB,aAAK,WAAW;AAChB,aAAK,WAAW;AAChB,aAAK,OAAM;MACb;MACA,uBAAuB,SAAyB,SAAe;AAC7D,aAAK,MAAM,2CAA2C,QAAQ,MAAM;AACpE,YAAI,KAAK,OAAO;AACd,eAAK,MAAM,uBAAuB,SAAS,OAAO;QACpD,OAAO;AACL,eAAK,iBAAiB,EAAE,SAAS,QAAO;QAC1C;MACF;MACA,YAAS;AACP,aAAK,MAAM,kBAAkB;AAC7B,YAAI,KAAK,OAAO;AACd,eAAK,MAAM,UAAS;QACtB,OAAO;AACL,eAAK,cAAc;QACrB;MACF;MACA,YAAS;AACP,aAAK,MAAM,kBAAkB;AAC7B,YAAI,KAAK,OAAO;AACd,eAAK,MAAM,UAAS;QACtB,OAAO;AACL,eAAK,mBAAmB;QAC1B;MACF;MACA,eAAeD,cAA4B;AACzC,cAAM,IAAI,MAAM,yBAAyB;MAC3C;MAEA,gBAAa;AACX,eAAO,KAAK;MACd;MAEA,iBAAc;AACZ,YAAI,KAAK,OAAO;AACd,iBAAO,KAAK,MAAM,eAAc;QAClC,OAAO;AACL,iBAAO;QACT;MACF;;AA7UF,IAAAK,SAAA,oBAAA;;;;;;;;;;ACnCA,QAAA,qBAAA;AASA,QAAA,cAAA;AACA,QAAA,aAAA;AASA,QAAA,aAAA;AACA,QAAA,UAAA;AACA,QAAA,yBAAA;AAGA,QAAM,cAAc;AAEpB,QAAa,gBAAb,MAA0B;MA6BxB,YACmB,SACA,QACjB,SACiB,oBACT,YAAkB;AAJT,aAAA,UAAA;AACA,aAAA,SAAA;AAEA,aAAA,qBAAA;AACT,aAAA,aAAA;AAjCF,aAAA,QAA8C;AAC9C,aAAA,cAAc;AACd,aAAA,iBACN;AACM,aAAA,mBAAmB;AACnB,aAAA,QAAQ;AACR,aAAA,oBAAoB;AACpB,aAAA,qBAAqB;AACrB,aAAA,qBAA0C;AAC1C,aAAA,WAA4B;AAC5B,aAAA,WAAwC;AAGxC,aAAA,iBAAqD,CAAA;AACrD,aAAA,gBAAgC,WAAW,MAAK;QAAE,GAAG,CAAC;AACtD,aAAA,cAAkC;AAElC,aAAA,oBAAiC;AACjC,aAAA,qBAAkC;AAClC,aAAA,iBAA8B;AAO9B,aAAA,cAA+B,mBAAA,gBAAgB,YAAW;AAShE,aAAK,WAAW,QAAQ;AACxB,aAAK,OAAO,QAAQ;AACpB,YAAI,QAAQ,YAAY;AACtB,cAAI,QAAQ,QAAQ,YAAA,UAAU,cAAc;AAC1C,oBAAQ,WAAW,GAAG,aAAa,MAAK;AACtC,mBAAK,iBAAiB,YAAA,OAAO,WAAW,0BAA0B;YACpE,CAAC;UACH;AACA,cAAI,QAAQ,QAAQ,YAAA,UAAU,UAAU;AACtC,iBAAK,MACH,uCACE,QAAQ,WAAW,YAAW,CAAE;AAEpC,iBAAK,YAAW,GAAA,WAAA,aACd,KAAK,UACL,QAAQ,WAAW,YAAW,CAAE;UAEpC;QACF;AACA,aAAK,MAAM,SAAS;AACpB,aAAK,iBAAgB;MACvB;MAEQ,MAAM,MAAY;AACxB,gBAAQ,MACN,YAAA,aAAa,OACb,aACA,MAAM,KAAK,aAAa,OAAO,IAAI;MAEvC;MAEQ,mBAAgB;AACtB,qBAAa,KAAK,aAAa;AAC/B,aAAK,oBAAoB,oBAAI,KAAI;AACjC,aAAK,MAAM,gBAAe,GAAA,WAAA,kBAAiB,KAAK,QAAQ,CAAC;AACzD,cAAM,WAAU,GAAA,WAAA,oBAAmB,KAAK,QAAQ;AAChD,YAAI,YAAY,UAAU;AACxB,eAAK,MAAM,iCAAiC,UAAU,IAAI;AAC1D,gBAAM,iBAAiB,MAAK;AAC1B,gBAAI,CAAC,KAAK,mBAAmB;AAC3B,mBAAK,iBAAiB,YAAA,OAAO,mBAAmB,mBAAmB;AACnE;YACF;AACA,kBAAM,eAAyB,CAAA;AAC/B,kBAAM,kBAAkB,oBAAI,KAAI;AAChC,yBAAa,KAAK,4BAA2B,GAAA,WAAA,sBAAqB,KAAK,mBAAmB,eAAe,CAAC,EAAE;AAC5G,gBAAI,KAAK,oBAAoB;AAC3B,kBAAI,KAAK,qBAAqB,KAAK,mBAAmB;AACpD,6BAAa,KAAK,qBAAoB,GAAA,WAAA,sBAAqB,KAAK,mBAAmB,KAAK,kBAAkB,CAAC,EAAE;cAC/G;AACA,kBAAI,KAAK,gBAAgB;AACvB,oBAAI,KAAK,iBAAiB,KAAK,oBAAoB;AACjD,+BAAa,KAAK,sBAAqB,GAAA,WAAA,sBAAqB,KAAK,oBAAoB,KAAK,cAAc,CAAC,EAAE;gBAC7G;cACF,OAAO;AACL,6BAAa,KAAK,8BAA8B;cAClD;YACF,OAAO;AACL,2BAAa,KAAK,6BAA6B;YACjD;AACA,gBAAI,KAAK,OAAO;AACd,2BAAa,KAAK,GAAG,KAAK,MAAM,gBAAe,CAAE;YACnD;AACA,iBAAK,iBAAiB,YAAA,OAAO,mBAAmB,aAAa,KAAK,GAAG,CAAC;UACxE;AACA,cAAI,WAAW,GAAG;AAChB,oBAAQ,SAAS,cAAc;UACjC,OAAO;AACL,iBAAK,gBAAgB,WAAW,gBAAgB,OAAO;UACzD;QACF;MACF;MAEQ,aAAaC,SAAoB;AACvC,YAAI,CAAC,KAAK,OAAO;AACf,eAAK,QAAQ;AACb,cAAI,CAAC,KAAK,aAAa;AACrB,iBAAK,cAAc,KAAK,mBAAmB,aAAY;UACzD;AACA,uBAAa,KAAK,aAAa;AAC/B,gBAAM,iBAAiB,KAAK,YAAY,gBAAgBA,OAAM;AAC9D,eAAK,MACH,6BACE,eAAe,OACf,eACA,eAAe,UACf,GAAG;AAEP,eAAK,eAAe,QAAQ,aAAW,QAAQ,cAAc,CAAC;AAC9D,kBAAQ,SAAS,MAAK;;AACpB,aAAA,KAAA,KAAK,cAAQ,QAAA,OAAA,SAAA,SAAA,GAAE,gBAAgB,cAAc;UAC/C,CAAC;QACH;MACF;MAEQ,mBAAmB,SAAyB,SAAe;AACjE,YAAI,CAAC,KAAK,OAAO;AACf,gBAAM,IAAI,MAAM,oDAAoD;QACtE;AACA,cAAM,QAAQ,KAAK;AACnB,aAAK,qBAAqB;AAC1B,aAAK,YAAa,YAChB,QAAQ,QAAQ,EAAE,SAAkB,OAAO,QAAQ,MAAK,CAAE,CAAC,EAC3D,KACA,qBAAkB;AAChB,eAAK,qBAAqB;AAC1B,gBAAM,uBAAuB,SAAS,gBAAgB,OAAO;AAC7D,cAAI,KAAK,kBAAkB;AACzB,kBAAM,UAAS;UACjB;QACF,GACA,CAACA,YAAwB;AACvB,eAAK,iBAAiBA,QAAO,MAAMA,QAAO,OAAO;QACnD,CAAC;MAEL;MAEA,YAAS;AACP,YAAI,KAAK,OAAO;AACd;QACF;AACA,YAAI,CAAC,KAAK,YAAY,CAAC,KAAK,UAAU;AACpC,gBAAM,IAAI,MAAM,+BAA+B;QACjD;AACA,cAAM,eAAe,KAAK,QAAQ,UAAU,KAAK,QAAQ,KAAK,QAAQ;AACtE,YAAI,aAAa,SAAS,QAAQ;AAChC,eAAK,QAAQ,mBAAmB,IAAI;AACpC;QACF,WAAW,aAAa,SAAS,SAAS;AACxC,cAAI,KAAK,SAAS,WAAU,EAAG,cAAc;AAC3C,iBAAK,QAAQ,mBAAmB,IAAI;UACtC,OAAO;AACL,iBAAK,aAAa,aAAa,KAAK;UACtC;AACA;QACF;AAEA,aAAK,qBAAqB,oBAAI,KAAI;AAClC,cAAM,SAAS,aAAa;AAC5B,YAAI,OAAO,WAAW,YAAA,OAAO,IAAI;AAC/B,gBAAM,EAAE,MAAM,QAAO,KAAK,GAAA,uBAAA,gCACxB,OAAO,QACP,oCAAoC,KAAK,MAAM;AAEjD,eAAK,aAAa;YAChB;YACA;YACA,UAAU,IAAI,WAAA,SAAQ;WACvB;AACD;QACF;AAEA,YAAI,OAAO,aAAa,SAAS;AAC/B,gBAAM,iBAAiB,oBAAI,KAAI;AAC/B,yBAAe,WACb,eAAe,WAAU,IAAK,OAAO,aAAa,QAAQ,OAAO;AAEnE,yBAAe,gBACb,eAAe,gBAAe,IAC5B,OAAO,aAAa,QAAQ,QAAQ,GAAS;AAEjD,eAAK,YAAW,GAAA,WAAA,aAAY,KAAK,UAAU,cAAc;AACzD,eAAK,iBAAgB;QACvB;AAEA,aAAK,mBAAmB,KAAK,OAAO,sBAAsB;AAC1D,aAAK,cAAc,KAAK,mBAAmB,aAAY;AACvD,aAAK,YAAY,aAAa,QAAQ,QAAQ,KAAK,QAAQ,CAAC,EAAE,KAC5D,sBAAmB;AACjB,eAAK,QAAQ,KAAK,QAAQ,mBACxB,QACA,KAAK,QACL,KAAK,MACL,KAAK,aACL,KAAK,QAAQ;AAEf,eAAK,MAAM,oBAAoB,KAAK,MAAM,cAAa,IAAK,GAAG;AAC/D,eAAK,iBAAiB,oBAAI,KAAI;AAC9B,eAAK,MAAM,MAAM,kBAAkB;YACjC,mBAAmB,cAAW;AAC5B,mBAAK,MAAM,mBAAmB;AAC9B,mBAAK,SAAU,kBACb,KAAK,YAAa,gBAAgB,QAAQ,CAAC;YAE/C;YACA,kBAAkB,aAAU;AAC1B,mBAAK,MAAM,kBAAkB;AAC7B,mBAAK,oBAAoB;AACzB,mBAAK,YAAa,eAAe,OAAO,EAAE,KACxC,sBAAmB;AACjB,qBAAK,MAAM,qCAAqC;AAChD,qBAAK,oBAAoB;AACzB,qBAAK,SAAU,iBAAiB,gBAAgB;AAChD,oBAAI,KAAK,oBAAoB;AAC3B,uBAAK,aAAa,KAAK,kBAAkB;gBAC3C;cACF,GACA,CAACA,YAAwB;AACvB,qBAAK,iBAAiBA,QAAO,MAAMA,QAAO,OAAO;cACnD,CAAC;YAEL;YACA,iBAAiB,CAAAA,YAAS;AACxB,mBAAK,MAAM,iBAAiB;AAC5B,kBAAI,KAAK,mBAAmB;AAC1B,qBAAK,qBAAqBA;cAC5B,OAAO;AACL,qBAAK,aAAaA,OAAM;cAC1B;YACF;WACD;AACD,cAAI,KAAK,aAAa;AACpB,iBAAK,MAAM,UAAS;UACtB;AACA,cAAI,KAAK,gBAAgB;AACvB,iBAAK,mBACH,KAAK,eAAe,SACpB,KAAK,eAAe,OAAO;UAE/B,WAAW,KAAK,kBAAkB;AAChC,iBAAK,MAAM,UAAS;UACtB;QACF,GACA,CAACA,YAAwB;AACvB,eAAK,aAAaA,OAAM;QAC1B,CAAC;MAEL;MAEA,oBAAoBA,SAAoB;;AACtC,aAAI,KAAA,KAAK,cAAQ,QAAA,OAAA,SAAA,SAAA,GAAE,WAAU,EAAG,cAAc;AAC5C,eAAK,QAAQ,mBAAmB,IAAI;QACtC,OAAO;AACL,eAAK,aAAaA,OAAM;QAC1B;MACF;MACA,iBAAiBA,SAAgB,SAAe;;AAC9C,aAAK,MACH,4BAA4BA,UAAS,gBAAgB,UAAU,GAAG;AAEpE,SAAA,KAAA,KAAK,WAAK,QAAA,OAAA,SAAA,SAAA,GAAE,iBAAiBA,SAAQ,OAAO;AAC5C,aAAK,aAAa;UAChB,MAAMA;UACN;UACA,UAAU,IAAI,WAAA,SAAQ;SACvB;MACH;MACA,UAAO;;AACL,gBAAO,MAAA,KAAA,KAAK,WAAK,QAAA,OAAA,SAAA,SAAA,GAAE,QAAO,OAAE,QAAA,OAAA,SAAA,KAAI,KAAK,QAAQ,UAAS;MACxD;MACA,MAAM,UAAoB,UAA8B;AACtD,aAAK,MAAM,cAAc;AACzB,aAAK,WAAW,SAAS,MAAK;AAC9B,aAAK,WAAW;AAChB,aAAK,UAAS;MAChB;MACA,uBAAuB,SAAyB,SAAe;AAC7D,aAAK,MAAM,2CAA2C,QAAQ,MAAM;AACpE,YAAI,KAAK,OAAO;AACd,eAAK,mBAAmB,SAAS,OAAO;QAC1C,OAAO;AACL,eAAK,iBAAiB,EAAE,SAAS,QAAO;QAC1C;MACF;MACA,YAAS;AACP,aAAK,MAAM,kBAAkB;AAC7B,YAAI,KAAK,OAAO;AACd,eAAK,MAAM,UAAS;QACtB,OAAO;AACL,eAAK,cAAc;QACrB;MACF;MACA,YAAS;AACP,aAAK,MAAM,kBAAkB;AAC7B,YAAI,KAAK,SAAS,CAAC,KAAK,oBAAoB;AAC1C,eAAK,MAAM,UAAS;QACtB,OAAO;AACL,eAAK,mBAAmB;QAC1B;MACF;MACA,eAAeC,cAA4B;AACzC,aAAK,cAAcA;MACrB;MAEA,iBAAiB,SAAuC;AACtD,aAAK,eAAe,KAAK,OAAO;MAClC;MAEA,gBAAa;AACX,eAAO,KAAK;MACd;MAEA,iBAAc;AACZ,YAAI,KAAK,OAAO;AACd,iBAAO,KAAK,MAAM,eAAc;QAClC,OAAO;AACL,iBAAO;QACT;MACF;;AA9UF,IAAAC,SAAA,gBAAA;;;;;;;;;;ACzBA,QAAA,cAAA;AACA,QAAA,aAAA;AACA,QAAA,aAAA;AAEA,QAAA,UAAA;AAiBA,QAAM,cAAc;AAEpB,QAAa,iBAAb,MAA2B;MAEzB,YACmB,WACA,YACjB,wBAAuC;AAFtB,aAAA,YAAA;AACA,aAAA,aAAA;AAGjB,YAAI,wBAAwB;AAG1B,eAAK,SACH,uBAAuB,UACtB,YAAY,uBAAuB;QACxC,OAAO;AACL,eAAK,SAAS;QAChB;MACF;MAEA,mBAAgB;AACd,aAAK,SAAS,KAAK,IAAI,KAAK,SAAS,KAAK,YAAY,KAAK,SAAS;MACtE;MAEA,gBAAa;AACX,aAAK,SAAS,KAAK,IAAI,KAAK,SAAS,GAAG,CAAC;MAC3C;MAEA,eAAY;AACV,eAAO,KAAK,SAAU,KAAK,YAAY;MACzC;;AA5BF,IAAAC,SAAA,iBAAA;AA+BA,QAAa,uBAAb,MAAiC;MAI/B,YAAoB,YAA4B,cAAoB;AAAhD,aAAA,aAAA;AAA4B,aAAA,eAAA;AAHxC,aAAA,iBAAiB;AACjB,aAAA,mBAAwC,oBAAI,IAAG;MAEgB;MAEvE,SAAS,MAAc,QAAc;;AACnC,cAAM,kBAAiB,KAAA,KAAK,iBAAiB,IAAI,MAAM,OAAC,QAAA,OAAA,SAAA,KAAI;AAC5D,YACE,KAAK,eAAe,iBAAiB,QACrC,KAAK,aAAa,KAAK,iBAAiB,MACxC;AACA,iBAAO;QACT;AACA,aAAK,iBAAiB,IAAI,QAAQ,iBAAiB,IAAI;AACvD,aAAK,kBAAkB;AACvB,eAAO;MACT;MAEA,KAAK,MAAc,QAAc;;AAC/B,YAAI,KAAK,iBAAiB,MAAM;AAC9B,gBAAM,IAAI,MACR,yCAAyC,MAAM,UAAU,IAAI,sBAAsB,KAAK,cAAc,EAAE;QAE5G;AACA,aAAK,kBAAkB;AACvB,cAAM,kBAAiB,KAAA,KAAK,iBAAiB,IAAI,MAAM,OAAC,QAAA,OAAA,SAAA,KAAI;AAC5D,YAAI,iBAAiB,MAAM;AACzB,gBAAM,IAAI,MACR,yCAAyC,MAAM,UAAU,IAAI,yBAAyB,cAAc,EAAE;QAE1G;AACA,aAAK,iBAAiB,IAAI,QAAQ,iBAAiB,IAAI;MACzD;MAEA,QAAQ,QAAc;;AACpB,cAAM,kBAAiB,KAAA,KAAK,iBAAiB,IAAI,MAAM,OAAC,QAAA,OAAA,SAAA,KAAI;AAC5D,YAAI,KAAK,iBAAiB,gBAAgB;AACxC,gBAAM,IAAI,MACR,yCAAyC,MAAM,cAAc,cAAc,sBAAsB,KAAK,cAAc,EAAE;QAE1H;AACA,aAAK,kBAAkB;AACvB,aAAK,iBAAiB,OAAO,MAAM;MACrC;;AA5CF,IAAAA,SAAA,uBAAA;AA2GA,QAAM,qCAAqC;AAE3C,QAAM,6BAA6B;AAEnC,QAAa,eAAb,MAAyB;MA8BvB,YACmB,SACA,YACA,YACA,MACAC,cACA,UACA,YACA,eACA,gBAA+B;;AAR/B,aAAA,UAAA;AACA,aAAA,aAAA;AACA,aAAA,aAAA;AACA,aAAA,OAAA;AACA,aAAA,cAAAA;AACA,aAAA,WAAA;AACA,aAAA,aAAA;AACA,aAAA,gBAAA;AACA,aAAA,iBAAA;AArCX,aAAA,WAAwC;AACxC,aAAA,kBAAmC;AACnC,aAAA,kBAAoC,CAAA;AACpC,aAAA,cAAkC,CAAA;AAMlC,aAAA,oBAAoB;AAOpB,aAAA,cAAc;AACd,aAAA,uBAAuB;AAIvB,aAAA,WAAW;AACX,aAAA,eAAsC;AACtC,aAAA,qBAAoC;AACpC,aAAA,yBAAyB;AACzB,aAAA,sBAAsB;AAc5B,cAAM,oBACJ,KAAA,QAAQ,WAAU,EAAG,oCAAoC,OAAC,QAAA,OAAA,SAAA,KAC1D;AACF,YAAI,QAAQ,WAAU,EAAG,qBAAqB,MAAM,GAAG;AACrD,eAAK,QAAQ;AACb,eAAK,cAAc;QACrB,WAAW,WAAW,aAAa,aAAa;AAC9C,eAAK,QAAQ;AACb,gBAAM,cAAc,WAAW,aAAa;AAC5C,eAAK,sBAAsB,KAAK,yBAAyB,OACvD,YAAY,eAAe,UACzB,GACA,YAAY,eAAe,SAAS,CAAC,CACtC;AAEH,eAAK,cAAc,KAAK,IAAI,YAAY,aAAa,gBAAgB;QACvE,WAAW,WAAW,aAAa,eAAe;AAChD,eAAK,QAAQ;AACb,eAAK,cAAc,KAAK,IACtB,WAAW,aAAa,cAAc,aACtC,gBAAgB;QAEpB,OAAO;AACL,eAAK,QAAQ;AACb,eAAK,cAAc;QACrB;AACA,aAAK,YAAY,oBAAI,KAAI;MAC3B;MACA,kBAAe;AACb,YAAI,KAAK,gBAAgB,WAAW,GAAG;AACrC,iBAAO,CAAA;QACT;AACA,cAAM,eAAyB,CAAA;AAC/B,cAAM,aAAa,KAAK,gBAAgB,KAAK,gBAAgB,SAAS,CAAC;AACvE,YAAI,KAAK,gBAAgB,SAAS,GAAG;AACnC,uBAAa,KACX,sBAAsB,KAAK,gBAAgB,SAAS,CAAC,EAAE;QAE3D;AACA,YAAI,WAAW,YAAY,KAAK,WAAW;AACzC,uBAAa,KACX,mCAAkC,GAAA,WAAA,sBAChC,KAAK,WACL,WAAW,SAAS,CACrB,EAAE;QAEP;AACA,qBAAa,KAAK,GAAG,WAAW,KAAK,gBAAe,CAAE;AACtD,eAAO;MACT;MACA,gBAAa;AACX,eAAO,KAAK;MACd;MAEQ,MAAM,MAAY;AACxB,gBAAQ,MACN,YAAA,aAAa,OACb,aACA,MAAM,KAAK,aAAa,OAAO,IAAI;MAEvC;MAEQ,aAAa,cAA0B;AAC7C,aAAK,MACH,6BACE,aAAa,OACb,eACA,aAAa,UACb,kBACA,KAAK,UAAU,YAAW,CAAE;AAEhC,aAAK,cAAc,QAAQ,KAAK,UAAU;AAC1C,aAAK,oBAAoB,KAAK,oBAAoB,KAAK,YAAY;AACnE,aAAK,cAAc,CAAA;AACnB,gBAAQ,SAAS,MAAK;;AAEpB,WAAA,KAAA,KAAK,cAAQ,QAAA,OAAA,SAAA,SAAA,GAAE,gBAAgB;YAC7B,MAAM,aAAa;YACnB,SAAS,aAAa;YACtB,UAAU,aAAa;WACxB;QACH,CAAC;MACH;MAEA,iBAAiBC,SAAgB,SAAe;AAC9C,aAAK,MACH,4BAA4BA,UAAS,gBAAgB,UAAU,GAAG;AAEpE,aAAK,aAAa,EAAE,MAAMA,SAAQ,SAAS,UAAU,IAAI,WAAA,SAAQ,EAAE,CAAE;AACrE,mBAAW,EAAE,KAAI,KAAM,KAAK,iBAAiB;AAC3C,eAAK,iBAAiBA,SAAQ,OAAO;QACvC;MACF;MACA,UAAO;AACL,YAAI,KAAK,uBAAuB,MAAM;AACpC,iBAAO,KAAK,gBAAgB,KAAK,kBAAkB,EAAE,KAAK,QAAO;QACnE,OAAO;AACL,iBAAO;QACT;MACF;MAEQ,eAAe,cAAoB;;AACzC,gBACE,KAAA,KAAK,YAAY,eAAe,KAAK,iBAAiB,OAAC,QAAA,OAAA,SAAA,KAAI;UACzD,WAAW;UACX,WAAW;;MAGjB;MAEQ,qBAAkB;AACxB,eAAO,KAAK,oBAAoB,KAAK,YAAY;MACnD;MAEQ,oBAAiB;AACvB,YAAI,KAAK,UAAU,aAAa;AAC9B;QACF;AACA,YAAI;AACJ,YAAI,KAAK,gBAAgB,KAAK,kBAAmB,EAAE,UAAU,aAAa;AAGxE,uCAA6B,KAAK,mBAAkB;QACtD,OAAO;AACL,uCACE,KAAK,gBAAgB,KAAK,kBAAmB,EAAE;QACnD;AACA,iBACM,eAAe,KAAK,mBACxB,eAAe,4BACf,gBACA;AACA,gBAAM,cAAc,KAAK,eAAe,YAAY;AACpD,cAAI,YAAY,WAAW;AACzB,iBAAK,cAAc,KACjB,YAAY,QAAS,QAAQ,QAC7B,KAAK,UAAU;UAEnB;QACF;AACA,aAAK,cAAc,KAAK,YAAY,MAClC,6BAA6B,KAAK,iBAAiB;AAErD,aAAK,oBAAoB;MAC3B;MAEQ,WAAW,OAAa;;AAC9B,YAAI,KAAK,UAAU,aAAa;AAC9B;QACF;AACA,aAAK,MACH,sBACE,KAAK,gBAAgB,KAAK,EAAE,KAAK,cAAa,IAC9C,gBACA,KAAK;AAET,aAAK,QAAQ;AACb,SAAA,MAAA,KAAA,KAAK,YAAW,iBAAW,QAAA,OAAA,SAAA,SAAA,GAAA,KAAA,EAAA;AAC3B,aAAK,qBAAqB;AAC1B,iBAAS,IAAI,GAAG,IAAI,KAAK,gBAAgB,QAAQ,KAAK;AACpD,cAAI,MAAM,OAAO;AACf;UACF;AACA,cAAI,KAAK,gBAAgB,CAAC,EAAE,UAAU,aAAa;AACjD;UACF;AACA,eAAK,gBAAgB,CAAC,EAAE,QAAQ;AAChC,eAAK,gBAAgB,CAAC,EAAE,KAAK,iBAC3B,YAAA,OAAO,WACP,4CAA4C;QAEhD;AACA,aAAK,kBAAiB;MACxB;MAEQ,6BAA0B;AAChC,YAAI,KAAK,UAAU,aAAa;AAC9B;QACF;AACA,YAAI,eAAe;AACnB,YAAI,uBAAuB;AAC3B,mBAAW,CAAC,OAAO,SAAS,KAAK,KAAK,gBAAgB,QAAO,GAAI;AAC/D,cACE,UAAU,UAAU,YACpB,UAAU,oBAAoB,cAC9B;AACA,2BAAe,UAAU;AACzB,mCAAuB;UACzB;QACF;AACA,YAAI,yBAAyB,IAAI;AAG/B,eAAK,QAAQ;QACf,OAAO;AACL,eAAK,WAAW,oBAAoB;QACtC;MACF;MAEQ,mBAAmB,MAA2B,MAAY;AAChE,eAAO,KAAK,KACV,WAAQ;;AACN,iBAAA,UAAU,QACV,MAAM,SAAQ,EAAG,YAAW,QAAO,KAAA,YAAA,OAAO,IAAI,OAAC,QAAA,OAAA,SAAA,SAAA,GAAE,YAAW;SAAE;MAEpE;MAEQ,qBAAkB;AAExB,eAAO,KAAK,OAAM,KAAM,MAAM,OAAO;MACvC;MAEQ,wBAAqB;;AAC3B,cAAM,eAAc,KAAA,KAAK,gBAAU,QAAA,OAAA,SAAA,SAAA,GAAE,aAAa;AAClD,YAAI,CAAC,aAAa;AAChB,iBAAO;QACT;AACA,cAAM,SAAS,KAAK,mBAAkB;AACtC,cAAM,gBAAgB,SAAS,KAAK,sBAAsB;AAC1D,cAAM,gBAAgB,OACpB,YAAY,WAAW,UAAU,GAAG,YAAY,WAAW,SAAS,CAAC,CAAC;AAExE,aAAK,sBAAsB,KAAK,IAC9B,KAAK,sBAAsB,YAAY,mBACvC,aAAa;AAEf,eAAO;MACT;MAEQ,eACN,UACA,UAAoC;AAEpC,YAAI,KAAK,UAAU,SAAS;AAC1B,mBAAS,KAAK;AACd;QACF;AACA,YAAI,KAAK,YAAY,KAAK,aAAa;AACrC,mBAAS,KAAK;AACd;QACF;AACA,YAAI;AACJ,YAAI,aAAa,MAAM;AACrB,yBAAe,KAAK,sBAAqB;QAC3C,WAAW,WAAW,GAAG;AACvB,eAAK,QAAQ;AACb,mBAAS,KAAK;AACd;QACF,OAAO;AACL,yBAAe;AACf,eAAK,sBAAsB,KAAK;QAClC;AACA,mBAAW,MAAK;;AACd,cAAI,KAAK,UAAU,SAAS;AAC1B,qBAAS,KAAK;AACd;UACF;AACA,eAAI,MAAA,KAAA,KAAK,oBAAc,QAAA,OAAA,SAAA,SAAA,GAAE,aAAY,OAAE,QAAA,OAAA,SAAA,KAAI,MAAM;AAC/C,qBAAS,IAAI;AACb,iBAAK,YAAY;AACjB,iBAAK,gBAAe;UACtB,OAAO;AACL,iBAAK,MAAM,2CAA2C;AACtD,qBAAS,KAAK;UAChB;QACF,GAAG,YAAY;MACjB;MAEQ,mBAAgB;AACtB,YAAI,QAAQ;AACZ,mBAAW,QAAQ,KAAK,iBAAiB;AACvC,eAAI,SAAI,QAAJ,SAAI,SAAA,SAAJ,KAAM,WAAU,UAAU;AAC5B,qBAAS;UACX;QACF;AACA,eAAO;MACT;MAEQ,sBACNA,SACA,WACA,UAAuB;;AAEvB,gBAAQ,KAAK,OAAO;UAClB,KAAK;UACL,KAAK;UACL,KAAK;AACH,iBAAK,WAAW,SAAS;AACzB,iBAAK,aAAaA,OAAM;AACxB;UACF,KAAK;AACH,gBACE,KAAK,oBACH,KAAA,KAAK,WAAY,aAAa,cAAe,yBAAmB,QAAA,OAAA,SAAA,KAC9D,CAAA,GACFA,QAAO,IAAI,GAEb;AACA,eAAA,KAAA,KAAK,oBAAc,QAAA,OAAA,SAAA,SAAA,GAAE,cAAa;AAClC,kBAAI;AACJ,kBAAI,aAAa,MAAM;AACrB,0BAAU;cACZ,WAAW,WAAW,GAAG;AACvB,qBAAK,QAAQ;AACb,qBAAK,WAAW,SAAS;AACzB,qBAAK,aAAaA,OAAM;AACxB;cACF,OAAO;AACL,0BAAU;cACZ;AACA,yBAAW,MAAK;AACd,qBAAK,yBAAwB;AAE7B,oBAAI,KAAK,iBAAgB,MAAO,GAAG;AACjC,uBAAK,WAAW,SAAS;AACzB,uBAAK,aAAaA,OAAM;gBAC1B;cACF,GAAG,OAAO;YACZ,OAAO;AACL,mBAAK,WAAW,SAAS;AACzB,mBAAK,aAAaA,OAAM;YAC1B;AACA;UACF,KAAK;AACH,gBACE,KAAK,mBACH,KAAK,WAAY,aAAa,YAAa,sBAC3CA,QAAO,IAAI,GAEb;AACA,eAAA,KAAA,KAAK,oBAAc,QAAA,OAAA,SAAA,SAAA,GAAE,cAAa;AAClC,mBAAK,eAAe,UAAU,aAAU;AACtC,oBAAI,CAAC,SAAS;AACZ,uBAAK,WAAW,SAAS;AACzB,uBAAK,aAAaA,OAAM;gBAC1B;cACF,CAAC;YACH,OAAO;AACL,mBAAK,WAAW,SAAS;AACzB,mBAAK,aAAaA,OAAM;YAC1B;AACA;QACJ;MACF;MAEQ,YAAY,UAAkB;AACpC,cAAM,UAAU,SAAS,IAAI,wBAAwB;AACrD,YAAI,QAAQ,WAAW,GAAG;AACxB,iBAAO;QACT;AACA,YAAI;AACF,iBAAO,SAAS,QAAQ,CAAC,CAAW;QACtC,SAAS,GAAG;AACV,iBAAO;QACT;MACF;MAEQ,kBACNA,SACA,WAAiB;;AAEjB,YAAI,KAAK,gBAAgB,SAAS,EAAE,UAAU,aAAa;AACzD;QACF;AACA,aAAK,MACH,WACE,KAAK,QACL,oCACAA,QAAO,WACP,kBACA,KAAK,gBAAgB,SAAS,EAAE,KAAK,cAAa,IAClD,gBACA,KAAK,gBAAgB,SAAS,EAAE,KAAK;AAEzC,aAAK,gBAAgB,SAAS,EAAE,QAAQ;AACxC,YAAIA,QAAO,SAAS,YAAA,OAAO,IAAI;AAC7B,WAAA,KAAA,KAAK,oBAAc,QAAA,OAAA,SAAA,SAAA,GAAE,iBAAgB;AACrC,eAAK,WAAW,SAAS;AACzB,eAAK,aAAaA,OAAM;AACxB;QACF;AACA,YAAI,KAAK,UAAU,YAAY;AAC7B,eAAK,WAAW,SAAS;AACzB,eAAK,aAAaA,OAAM;AACxB;QACF;AACA,YAAI,KAAK,UAAU,aAAa;AAC9B,eAAK,aAAaA,OAAM;AACxB;QACF;AACA,cAAM,WAAW,KAAK,YAAYA,QAAO,QAAQ;AACjD,gBAAQA,QAAO,UAAU;UACvB,KAAK;AAEH,iBAAK,gBAAe;AACpB;UACF,KAAK;AAEH,gBAAI,KAAK,sBAAsB;AAC7B,mBAAK,sBAAsBA,SAAQ,WAAW,QAAQ;YACxD,OAAO;AACL,mBAAK,uBAAuB;AAC5B,mBAAK,gBAAe;YACtB;AACA;UACF,KAAK;AACH,iBAAK,WAAW,SAAS;AACzB,iBAAK,aAAaA,OAAM;AACxB;UACF,KAAK;AACH,iBAAK,sBAAsBA,SAAQ,WAAW,QAAQ;AACtD;QACJ;MACF;MAEQ,2BAAwB;AAC9B,YAAI,KAAK,UAAU,WAAW;AAC5B;QACF;AACA,YAAI,CAAC,KAAK,WAAW,aAAa,eAAe;AAC/C;QACF;AACA,YAAI,KAAK,YAAY,KAAK,aAAa;AACrC;QACF;AACA,aAAK,YAAY;AACjB,aAAK,gBAAe;AACpB,aAAK,uBAAsB;MAC7B;MAEQ,yBAAsB;;AAC5B,YAAI,KAAK,cAAc;AACrB,uBAAa,KAAK,YAAY;QAChC;AACA,YAAI,KAAK,UAAU,WAAW;AAC5B;QACF;AACA,YAAI,CAAC,KAAK,WAAW,aAAa,eAAe;AAC/C;QACF;AACA,cAAM,gBAAgB,KAAK,WAAW,aAAa;AACnD,YAAI,KAAK,YAAY,KAAK,aAAa;AACrC;QACF;AACA,cAAM,sBAAqB,KAAA,cAAc,kBAAY,QAAA,OAAA,SAAA,KAAI;AACzD,cAAM,kBAAkB,OACtB,mBAAmB,UAAU,GAAG,mBAAmB,SAAS,CAAC,CAAC;AAEhE,aAAK,eAAe,WAAW,MAAK;AAClC,eAAK,yBAAwB;QAC/B,GAAG,kBAAkB,GAAI;AACzB,SAAA,MAAA,KAAA,KAAK,cAAa,WAAK,QAAA,OAAA,SAAA,SAAA,GAAA,KAAA,EAAA;MACzB;MAEQ,kBAAe;AACrB,cAAM,QAAQ,KAAK,QAAQ,wBACzB,KAAK,YACL,KAAK,YACL,KAAK,MACL,KAAK,aACL,KAAK,QAAQ;AAEf,aAAK,MACH,yBACE,MAAM,cAAa,IACnB,mBACA,KAAK,QAAQ;AAEjB,cAAM,QAAQ,KAAK,gBAAgB;AACnC,aAAK,gBAAgB,KAAK;UACxB,OAAO;UACP,MAAM;UACN,mBAAmB;UACnB,WAAW,oBAAI,KAAI;SACpB;AACD,cAAM,mBAAmB,KAAK,WAAW;AACzC,cAAM,kBAAkB,KAAK,gBAAiB,MAAK;AACnD,YAAI,mBAAmB,GAAG;AACxB,0BAAgB,IACd,oCACA,GAAG,gBAAgB,EAAE;QAEzB;AACA,YAAI,mBAAmB;AACvB,cAAM,MAAM,iBAAiB;UAC3B,mBAAmB,cAAW;AAC5B,iBAAK,MACH,mCAAmC,MAAM,cAAa,IAAK,GAAG;AAEhE,iBAAK,WAAW,KAAK;AACrB,+BAAmB;AACnB,gBAAI,mBAAmB,GAAG;AACxB,uBAAS,IACP,oCACA,GAAG,gBAAgB,EAAE;YAEzB;AACA,gBAAI,KAAK,gBAAgB,KAAK,EAAE,UAAU,UAAU;AAClD,mBAAK,SAAU,kBAAkB,QAAQ;YAC3C;UACF;UACA,kBAAkB,aAAU;AAC1B,iBAAK,MACH,kCAAkC,MAAM,cAAa,IAAK,GAAG;AAE/D,iBAAK,WAAW,KAAK;AACrB,gBAAI,KAAK,gBAAgB,KAAK,EAAE,UAAU,UAAU;AAClD,mBAAK,SAAU,iBAAiB,OAAO;YACzC;UACF;UACA,iBAAiB,CAAAA,YAAS;AACxB,iBAAK,MACH,iCAAiC,MAAM,cAAa,IAAK,GAAG;AAE9D,gBAAI,CAAC,oBAAoB,mBAAmB,GAAG;AAC7C,cAAAA,QAAO,SAAS,IACd,oCACA,GAAG,gBAAgB,EAAE;YAEzB;AACA,iBAAK,kBAAkBA,SAAQ,KAAK;UACtC;SACD;AACD,aAAK,qBAAqB,KAAK;AAC/B,YAAI,KAAK,aAAa;AACpB,gBAAM,UAAS;QACjB;MACF;MAEA,MAAM,UAAoB,UAA8B;AACtD,aAAK,MAAM,cAAc;AACzB,aAAK,WAAW;AAChB,aAAK,kBAAkB;AACvB,aAAK,YAAY;AACjB,aAAK,gBAAe;AACpB,aAAK,uBAAsB;MAC7B;MAEQ,0BAA0B,YAAoB,cAAoB;;AACxE,SAAA,MAAA,KAAA,KAAK,eAAe,YAAY,GAAE,cAAQ,QAAA,OAAA,SAAA,SAAA,GAAA,KAAA,EAAA;AAC1C,aAAK,kBAAiB;AACtB,cAAM,YAAY,KAAK,gBAAgB,UAAU;AACjD,kBAAU,qBAAqB;AAC/B,aAAK,qBAAqB,UAAU;MACtC;MAEQ,qBAAqB,YAAkB;AAC7C,cAAM,YAAY,KAAK,gBAAgB,UAAU;AACjD,YAAI,UAAU,UAAU,aAAa;AACnC;QACF;AACA,cAAM,eAAe,UAAU;AAC/B,YAAI,KAAK,eAAe,YAAY,GAAG;AACrC,gBAAM,cAAc,KAAK,eAAe,YAAY;AACpD,kBAAQ,YAAY,WAAW;YAC7B,KAAK;AACH,wBAAU,KAAK,uBACb;gBACE,UAAU,WAAQ;AAEhB,uBAAK,0BAA0B,YAAY,YAAY;gBACzD;iBAEF,YAAY,QAAS,OAAO;AAK9B,oBAAM,YAAY,KAAK,eAAe,eAAe,CAAC;AACtD,kBAAI,UAAU,cAAc,cAAc;AACxC,qBAAK,MACH,2DACE,UAAU,KAAK,cAAa,IAC5B,wCAAwC;AAE5C,0BAAU,qBAAqB;AAC/B,0BAAU,KAAK,UAAS;cAC1B;AACA;YACF,KAAK;AACH,wBAAU,qBAAqB;AAC/B,wBAAU,KAAK,UAAS;AACxB;YACF,KAAK;AAEH;UACJ;QACF;MACF;MAEA,uBAAuB,SAAyB,SAAe;AAC7D,aAAK,MAAM,2CAA2C,QAAQ,MAAM;AACpE,cAAM,WAAwB;UAC5B;UACA,OAAO,QAAQ;;AAEjB,cAAM,eAAe,KAAK,mBAAkB;AAC5C,cAAM,cAAgC;UACpC,WAAW;UACX,SAAS;UACT,WAAW,KAAK,cAAc,SAAS,QAAQ,QAAQ,KAAK,UAAU;;AAExE,aAAK,YAAY,KAAK,WAAW;AACjC,YAAI,YAAY,WAAW;AAGzB,kBAAQ,SAAS,MAAK;;AACpB,aAAA,KAAA,QAAQ,cAAQ,QAAA,OAAA,SAAA,SAAA,GAAA,KAAA,OAAA;UAClB,CAAC;AACD,qBAAW,CAAC,WAAW,IAAI,KAAK,KAAK,gBAAgB,QAAO,GAAI;AAC9D,gBACE,KAAK,UAAU,YACf,KAAK,sBAAsB,cAC3B;AACA,mBAAK,KAAK,uBACR;gBACE,UAAU,WAAQ;AAEhB,uBAAK,0BAA0B,WAAW,YAAY;gBACxD;iBAEF,OAAO;YAEX;UACF;QACF,OAAO;AACL,eAAK,2BAA0B;AAE/B,cAAI,KAAK,uBAAuB,MAAM;AACpC;UACF;AACA,gBAAM,OAAO,KAAK,gBAAgB,KAAK,kBAAkB;AACzD,sBAAY,WAAW,QAAQ;AAC/B,cAAI,KAAK,UAAU,YAAY,KAAK,sBAAsB,cAAc;AACtE,iBAAK,KAAK,uBACR;cACE,UAAU,WAAQ;AAEhB,qBAAK,0BAA0B,KAAK,oBAAqB,YAAY;cACvE;eAEF,OAAO;UAEX;QACF;MACF;MACA,YAAS;AACP,aAAK,MAAM,kBAAkB;AAC7B,aAAK,cAAc;AACnB,mBAAW,kBAAkB,KAAK,iBAAiB;AACjD,eAAI,mBAAc,QAAd,mBAAc,SAAA,SAAd,eAAgB,WAAU,UAAU;AACtC,2BAAe,KAAK,UAAS;UAC/B;QACF;MACF;MACA,YAAS;AACP,aAAK,MAAM,kBAAkB;AAC7B,cAAM,iBAAiB,KAAK,mBAAkB;AAC9C,aAAK,YAAY,KAAK;UACpB,WAAW;UACX,WAAW;SACZ;AACD,mBAAW,QAAQ,KAAK,iBAAiB;AACvC,eAAI,SAAI,QAAJ,SAAI,SAAA,SAAJ,KAAM,WAAU,UAAU;AAI5B,gBAAI,KAAK,sBAAsB,kBAC1B,KAAK,sBAAsB,iBAAiB,GAAG;AAClD,mBAAK,MACH,6CACE,KAAK,KAAK,cAAa,IACvB,+BAA+B;AAEnC,mBAAK,qBAAqB;AAC1B,mBAAK,KAAK,UAAS;YACrB;UAEF;QACF;MACF;MACA,eAAe,gBAA+B;AAC5C,cAAM,IAAI,MAAM,yBAAyB;MAC3C;MACA,YAAS;AACP,eAAO,KAAK;MACd;MACA,UAAO;AACL,eAAO,KAAK;MACd;MACA,iBAAc;AACZ,YAAI,KAAK,uBAAuB,MAAM;AACpC,iBAAO,KAAK,gBACV,KAAK,kBAAkB,EACvB,KAAK,eAAc;QACvB,OAAO;AACL,iBAAO;QACT;MACF;;AAnuBF,IAAAF,SAAA,eAAA;;;;;;;;;;ACrGA,QAAsB,wBAAtB,MAA2C;MAKzC,YAAsB,OAA0B;AAA1B,aAAA,QAAA;AAJd,aAAA,UAAU;AACV,aAAA,kBAAuC,oBAAI,IAAG;AAC9C,aAAA,WAAW;AACX,aAAA,eAAiC,oBAAI,IAAG;AAE9C,cAAM,sBAAsB,kBAAe;AAGzC,cAAI,KAAK,SAAS;AAChB,iBAAK,sBAAqB;UAC5B;QACF,CAAC;MACH;MAEQ,wBAAqB;AAC3B,mBAAW,YAAY,KAAK,iBAAiB;AAC3C,mBAAS,KAAK,UAAS,CAAE;QAC3B;MACF;MAEA,uBAAoB;AAClB,eAAO,KAAK,MAAM,qBAAoB;MACxC;MACA,6BAA6B,UAAmC;AAC9D,aAAK,MAAM,6BAA6B,QAAQ;MAClD;MACA,gCAAgC,UAAmC;AACjE,aAAK,MAAM,gCAAgC,QAAQ;MACrD;MACA,kBAAe;AACb,aAAK,MAAM,gBAAe;MAC5B;MACA,aAAU;AACR,eAAO,KAAK,MAAM,WAAU;MAC9B;MACA,kBAAkB,kBAAwB;AACxC,aAAK,MAAM,kBAAkB,gBAAgB;MAC/C;MACA,MAAG;AACD,aAAK,MAAM,IAAG;AACd,aAAK,YAAY;MACnB;MACA,QAAK;AACH,aAAK,MAAM,MAAK;AAChB,aAAK,YAAY;AACjB,YAAI,KAAK,aAAa,GAAG;AACvB,eAAK,QAAO;QACd;MACF;MACU,UAAO;AACf,mBAAW,WAAW,KAAK,cAAc;AACvC,kBAAQ,QAAO;QACjB;MACF;MACA,iBAAc;AACZ,eAAO,KAAK,MAAM,eAAc;MAClC;MACA,YAAS;AACP,eAAO,KAAK,WAAW,KAAK,MAAM,UAAS;MAC7C;MACA,sBAAsB,UAAwB;AAC5C,aAAK,gBAAgB,IAAI,QAAQ;MACnC;MACA,yBAAyB,UAAwB;AAC/C,aAAK,gBAAgB,OAAO,QAAQ;MACtC;MACA,eAAe,aAAwB;AACrC,oBAAY,cAAc,KAAK,kBAAiB,CAAE;AAClD,aAAK,aAAa,IAAI,WAAW;MACnC;MACU,WAAW,SAAgB;AACnC,YAAI,YAAY,KAAK,SAAS;AAC5B,eAAK,UAAU;AAGf,cAAI,KAAK,MAAM,UAAS,GAAI;AAC1B,iBAAK,sBAAqB;UAC5B;QACF;MACF;MACA,oBAAiB;AACf,eAAO,KAAK,MAAM,kBAAiB;MACrC;MACA,qBAAqB,OAA0B;AAC7C,eAAO,KAAK,kBAAiB,MAAO,MAAM,kBAAiB;MAC7D;MACA,qBAAkB;AAChB,eAAO,KAAK,MAAM,mBAAkB;MACtC;MACA,aAAU;AACN,eAAO,KAAK,MAAM,WAAU;MAChC;;AA5FF,IAAAG,SAAA,wBAAA;;;;;;;;;;ACjEA,QAAA,wBAAA;AAEA,QAAA,4BAAA;AACA,QAAA,oBAAA;AAEA,QAAA,WAAA;AACA,QAAA,aAAA;AACA,QAAA,cAAA;AACA,QAAA,iBAAA;AACA,QAAA,uBAAA;AACA,QAAA,aAAA;AAMA,QAAA,YAAA;AAEA,QAAA,eAAA;AACA,QAAA,eAAA;AAGA,QAAA,uBAAA;AACA,QAAA,aAAA;AAUA,QAAA,wBAAA;AAGA,QAAA,aAAA;AACA,QAAA,mBAAA;AACA,QAAA,gBAAA;AACA,QAAA,yBAAA;AACA,QAAA,kBAAA;AAKA,QAAA,yBAAA;AASA,QAAM,mBAAmB;AAEzB,QAAM,sBAAsB;AAG5B,QAAM,0BAA0B,KAAK,KAAK;AA2B1C,QAAM,sBAAmD,oBAAI,IAAG;AAEhE,QAAM,kCAAkC,KAAK;AAC7C,QAAM,0CAA0C,KAAK;AAErD,QAAM,2BAAN,cACU,uBAAA,sBAAqB;MAK7B,YACE,iBACQ,SAAwB;AAEhC,cAAM,eAAe;AAFb,aAAA,UAAA;AAJF,aAAA,WAAW;AAOjB,aAAK,0BAA0B,CAC7B,YACA,eACA,UACA,kBACE;AACF,kBAAQ,kBAAkB,aAAa;QACzC;MACF;MAEA,MAAG;AACD,YAAI,KAAK,aAAa,GAAG;AACvB,eAAK,MAAM,6BAA6B,KAAK,uBAAuB;AACpE,eAAK,QAAQ,qBAAqB,IAAI;QACxC;AACA,aAAK,MAAM,IAAG;AACd,aAAK,YAAY;MACnB;MAEA,QAAK;AACH,aAAK,MAAM,MAAK;AAChB,aAAK,YAAY;AACjB,YAAI,KAAK,YAAY,GAAG;AACtB,eAAK,MAAM,gCAAgC,KAAK,uBAAuB;AACvE,eAAK,QAAQ,wBAAwB,IAAI;QAC3C;MACF;;AAGF,QAAM,iBAAN,MAAoB;MAClB,KAAK,UAAkB;AACrB,eAAO;UACL,gBAAgB,SAAA,eAAe;UAC/B,QAAQ;YACN,MAAM,YAAA,OAAO;YACb,SAAS;YACT,UAAU,IAAI,WAAA,SAAQ;;UAExB,YAAY;UACZ,eAAe;UACf,aAAa;;MAEjB;;AAGW,IAAAC,SAAA,qCAAqC;AAClD,QAAM,sBAAN,MAAyB;MAKvB,YAAoB,QAAc;AAAd,aAAA,SAAA;AAJX,aAAA,QAAQ,IAAI,WAAA,cAAa;AACzB,aAAA,cAAc,IAAI,WAAA,oBAAmB;AACrC,aAAA,kBAAkB,IAAI,WAAA,wBAAuB;AACtD,aAAA,QAA2B,qBAAA,kBAAkB;MACR;MAErC,0BAAuB;AACrB,eAAO,MAAK;AACV,iBAAO;YACL,QAAQ,KAAK;YACb,OAAO,KAAK;YACZ,OAAO,KAAK;YACZ,aAAa,KAAK;YAClB,UAAU,KAAK,gBAAgB,cAAa;;QAEhD;MACF;;AAGF,QAAa,kBAAb,MAA4B;MAyD1B,YACE,QACiBC,cACA,SAAuB;;AADvB,aAAA,cAAAA;AACA,aAAA,UAAA;AAzDX,aAAA,oBAAuC,qBAAA,kBAAkB;AACzD,aAAA,gBAAwB,IAAI,SAAA,kBAAiB;AAK7C,aAAA,uBAAwC,CAAA;AACxC,aAAA,YAAiC,CAAA;AACjC,aAAA,4BAAwD,CAAA;AAYxD,aAAA,eAAsC;AACtC,aAAA,iBAAwC;AAQxC,aAAA,yBAA8C;AAGrC,aAAA,qBACf,oBAAI,IAAG;AAED,aAAA,YAAY;AACZ,aAAA,YAAmC;AAK1B,aAAA,kBAA2B;AAS3B,aAAA,kBAAkB,KAAK,MACtC,KAAK,OAAM,IAAK,OAAO,gBAAgB;AAQvC,YAAI,OAAO,WAAW,UAAU;AAC9B,gBAAM,IAAI,UAAU,iCAAiC;QACvD;AACA,YAAI,EAAEA,wBAAuB,sBAAA,qBAAqB;AAChD,gBAAM,IAAI,UACR,yDAAyD;QAE7D;AACA,YAAI,SAAS;AACX,cAAI,OAAO,YAAY,UAAU;AAC/B,kBAAM,IAAI,UAAU,mCAAmC;UACzD;QACF;AACA,aAAK,sBAAsB,IAAI,oBAAoB,MAAM;AACzD,cAAM,qBAAoB,GAAA,aAAA,UAAS,MAAM;AACzC,YAAI,sBAAsB,MAAM;AAC9B,gBAAM,IAAI,MAAM,gCAAgC,MAAM,GAAG;QAC3D;AAGA,cAAM,0BAAyB,GAAA,WAAA,qBAAoB,iBAAiB;AACpE,YAAI,2BAA2B,MAAM;AACnC,gBAAM,IAAI,MACR,oDAAoD,MAAM,GAAG;QAEjE;AAEA,YAAI,KAAK,QAAQ,sBAAsB,MAAM,GAAG;AAC9C,eAAK,kBAAkB;QACzB;AAEA,aAAK,eAAc,GAAA,WAAA,yBACjB,QACA,KAAK,oBAAoB,wBAAuB,GAChD,KAAK,eAAe;AAEtB,YAAI,KAAK,iBAAiB;AACxB,eAAK,oBAAoB,MAAM,SAAS,WAAW,iBAAiB;QACtE;AAEA,YAAI,KAAK,QAAQ,wBAAwB,GAAG;AAC1C,eAAK,mBAAmB,KAAK,QAAQ,wBAAwB;QAC/D,OAAO;AACL,eAAK,oBAAmB,GAAA,WAAA,qBAAoB,sBAAsB;QACpE;AACA,cAAM,kBAAiB,GAAA,aAAA,cAAa,wBAAwB,OAAO;AACnE,aAAK,SAAS,eAAe;AAC7B,aAAK,UAAU,OAAO,OAAO,CAAA,GAAI,KAAK,SAAS,eAAe,YAAY;AAI1E,aAAK,kBAAiB,GAAA,kBAAA,qBACnB,KAAA,KAAK,QAAQ,gCAAgC,OAAC,QAAA,OAAA,SAAA,KAAI,OAAO,CAAC;AAE7D,aAAK,qBAAqB,IAAI,gBAAA,sBAC5B,KAAA,KAAK,QAAQ,wBAAwB,OAAC,QAAA,OAAA,SAAA,KAAI,kCAC1C,KAAA,KAAK,QAAQ,gCAAgC,OAAC,QAAA,OAAA,SAAA,KAC5C,uCAAuC;AAE3C,aAAK,iBAAgB,KAAA,KAAK,QAAQ,wBAAwB,OAAC,QAAA,OAAA,SAAA,KAAI;AAC/D,aAAK,gBAAgB,KAAK,KACxB,KAAA,KAAK,QAAQ,6BAA6B,OAAC,QAAA,OAAA,SAAA,KAAI,yBAC/C,mBAAmB;AAErB,cAAM,uBAA6C;UACjD,kBAAkB,CAChB,mBACA,mBACE;AACF,kBAAM,sBAAsC,CAAA;AAC5C,uBAAW,CAAC,KAAK,KAAK,KAAK,OAAO,QAAQ,cAAc,GAAG;AACzD,kBAAI,CAAC,IAAI,WAAWD,SAAA,kCAAkC,GAAG;AACvD,oCAAoB,GAAG,IAAI;cAC7B;YACF;AACA,kBAAM,aAAa,KAAK,eAAe,sBACrC,KAAK,QACL,mBACA,qBACA,KAAK,WAAW;AAElB,uBAAW,kBAAkB,KAAK,aAAa;AAC/C,gBAAI,KAAK,iBAAiB;AACxB,mBAAK,oBAAoB,MAAM,SAC7B,WACA,kDACA,WAAW,eAAc,CAAE;YAE/B;AACA,kBAAM,oBAAoB,IAAI,yBAC5B,YACA,IAAI;AAEN,mBAAO;UACT;UACA,aAAa,CAAC,mBAAsC,WAAkB;AACpE,iBAAK,gBAAgB;AACrB,kBAAM,YAAY,KAAK,UAAU,MAAK;AACtC,iBAAK,YAAY,CAAA;AACjB,gBAAI,UAAU,SAAS,GAAG;AACxB,mBAAK,kBAAiB;YACxB;AACA,uBAAW,QAAQ,WAAW;AAC5B,mBAAK,OAAM;YACb;AACA,iBAAK,YAAY,iBAAiB;UACpC;UACA,qBAAqB,MAAK;AAExB,kBAAM,IAAI,MACR,+DAA+D;UAEnE;UACA,kBAAkB,CAAC,UAAqC;AACtD,gBAAI,KAAK,iBAAiB;AACxB,mBAAK,oBAAoB,gBAAgB,SAAS,KAAK;YACzD;UACF;UACA,qBAAqB,CAAC,UAAqC;AACzD,gBAAI,KAAK,iBAAiB;AACxB,mBAAK,oBAAoB,gBAAgB,WAAW,KAAK;YAC3D;UACF;;AAEF,aAAK,wBAAwB,IAAI,0BAAA,sBAC/B,KAAK,QACL,sBACA,KAAK,SACL,CAAC,eAAe,mBAAkB;;AAChC,cAAI,cAAc,iBAAiB;AACjC,gCAAoB,IAClB,KAAK,UAAS,GACd,IAAI,gBAAA,eACF,cAAc,gBAAgB,WAC9B,cAAc,gBAAgB,YAC9B,oBAAoB,IAAI,KAAK,UAAS,CAAE,CAAC,CAC1C;UAEL,OAAO;AACL,gCAAoB,OAAO,KAAK,UAAS,CAAE;UAC7C;AACA,cAAI,KAAK,iBAAiB;AACxB,iBAAK,oBAAoB,MAAM,SAC7B,WACA,8BAA8B;UAElC;AACA,WAAAE,MAAA,KAAK,oBAAc,QAAAA,QAAA,SAAA,SAAAA,IAAE,MAAK;AAC1B,eAAK,iBAAiB;AACtB,eAAK,yBAAyB;AAG9B,kBAAQ,SAAS,MAAK;AACpB,kBAAM,aAAa,KAAK;AACxB,iBAAK,uBAAuB,CAAA;AAC5B,gBAAI,WAAW,SAAS,GAAG;AACzB,mBAAK,kBAAiB;YACxB;AACA,uBAAW,QAAQ,YAAY;AAC7B,mBAAK,UAAS;YAChB;UACF,CAAC;QACH,GACA,CAAAC,YAAS;AACP,cAAI,KAAK,iBAAiB;AACxB,iBAAK,oBAAoB,MAAM,SAC7B,cACA,yCACEA,QAAO,OACP,mBACAA,QAAO,UACP,GAAG;UAET;AACA,cAAI,KAAK,qBAAqB,SAAS,GAAG;AACxC,iBAAK,MACH,+DAA+D;UAEnE;AACA,cAAI,KAAK,mBAAmB,MAAM;AAChC,iBAAK,yBAAsB,OAAA,OAAA,OAAA,OAAA,CAAA,IACtB,GAAA,uBAAA,gCAA+BA,QAAO,MAAMA,QAAO,OAAO,CAAC,GAAA,EAC9D,UAAUA,QAAO,SAAQ,CAAA;UAE7B;AACA,gBAAM,aAAa,KAAK;AACxB,eAAK,uBAAuB,CAAA;AAC5B,cAAI,WAAW,SAAS,GAAG;AACzB,iBAAK,kBAAiB;UACxB;AACA,qBAAW,QAAQ,YAAY;AAC7B,iBAAK,oBAAoBA,OAAM;UACjC;QACF,CAAC;AAEH,aAAK,qBAAqB,IAAI,eAAA,mBAAmB;UAC/C,IAAI,qBAAA,yBAAyB,MAAM,KAAK,OAAO;SAChD;AACD,aAAK,MACH,sCACE,KAAK,UAAU,SAAS,QAAW,CAAC,CAAC;AAEzC,cAAM,QAAQ,IAAI,MAAK;AACvB,aAAI,GAAA,UAAA,iBAAgB,oBAAoB,GAAE;AACxC,WAAA,GAAA,UAAA,OACE,YAAA,aAAa,OACb,sBACA,MACE,KAAK,YAAY,KACjB,+BAEA,KAAA,MAAM,WAAK,QAAA,OAAA,SAAA,SAAA,GAAE,UAAU,MAAM,MAAM,QAAQ,IAAI,IAAI,CAAC,EAAC;QAE3D;AACA,aAAK,wBAAwB,oBAAI,KAAI;MACvC;MAEQ,MAAM,MAAc,mBAAgC;AAC1D,SAAA,GAAA,UAAA,OACE,sBAAiB,QAAjB,sBAAiB,SAAjB,oBAAqB,YAAA,aAAa,OAClC,WACA,MAAM,KAAK,YAAY,KAAK,QAAO,GAAA,aAAA,aAAY,KAAK,MAAM,IAAI,MAAM,IAAI;MAE5E;MAEQ,kBAAe;;AACrB,YAAI,CAAC,KAAK,cAAc;AACtB,eAAK,eAAe,YAAY,MAAK;UAAE,GAAG,gBAAgB;QAC5D;AAEA,YAAI,GAAC,MAAA,KAAA,KAAK,cAAa,YAAM,QAAA,OAAA,SAAA,SAAA,GAAA,KAAA,EAAA,IAAM;AACjC,eAAK,MACH,oDACE,KAAK,qBAAqB,SAC1B,uBACA,KAAK,UAAU,MAAM;AAEzB,WAAA,MAAA,KAAA,KAAK,cAAa,SAAG,QAAA,OAAA,SAAA,SAAA,GAAA,KAAA,EAAA;QACvB;MACF;MAEQ,oBAAiB;;AAEvB,YAAI,GAAC,KAAA,KAAK,kBAAY,QAAA,OAAA,SAAA,SAAA,GAAE,WAAU,KAAK,aAAa,OAAM,GAAI;AAC5D,eAAK,MACH,sDACE,KAAK,qBAAqB,SAC1B,uBACA,KAAK,UAAU,MAAM;AAEzB,WAAA,MAAA,KAAA,KAAK,kBAAY,QAAA,OAAA,SAAA,SAAA,GAAE,WAAK,QAAA,OAAA,SAAA,SAAA,GAAA,KAAA,EAAA;QAC1B;MACF;MAEQ,+BACN,eAAuC;AAEvC,cAAM,eAAe,KAAK,0BAA0B,UAClD,WAAS,UAAU,aAAa;AAElC,YAAI,gBAAgB,GAAG;AACrB,eAAK,0BAA0B,OAAO,cAAc,CAAC;QACvD;MACF;MAEQ,YAAY,UAA2B;AAC7C,SAAA,GAAA,UAAA,OACE,YAAA,aAAa,OACb,sBACA,MACE,KAAK,YAAY,KACjB,QACA,GAAA,aAAA,aAAY,KAAK,MAAM,IACvB,MACA,qBAAA,kBAAkB,KAAK,iBAAiB,IACxC,SACA,qBAAA,kBAAkB,QAAQ,CAAC;AAE/B,YAAI,KAAK,iBAAiB;AACxB,eAAK,oBAAoB,MAAM,SAC7B,WACA,kCAAkC,qBAAA,kBAAkB,QAAQ,CAAC;QAEjE;AACA,aAAK,oBAAoB;AACzB,aAAK,oBAAoB,QAAQ;AACjC,cAAM,eAAe,KAAK,0BAA0B,MAAK;AACzD,mBAAW,iBAAiB,cAAc;AACxC,cAAI,aAAa,cAAc,cAAc;AAC3C,gBAAI,cAAc,OAAO;AACvB,2BAAa,cAAc,KAAK;YAClC;AACA,iBAAK,+BAA+B,aAAa;AACjD,0BAAc,SAAQ;UACxB;QACF;AACA,YAAI,aAAa,qBAAA,kBAAkB,mBAAmB;AACpD,eAAK,yBAAyB;QAChC;MACF;MAEA,kBAAkB,kBAAwB;AACxC,YAAI,mBAAmB,KAAK,eAAe;AACzC,eAAK,gBAAgB;AACrB,qBAAW,qBAAqB,KAAK,oBAAoB;AACvD,8BAAkB,kBAAkB,gBAAgB;UACtD;QACF;MACF;MAEA,qBAAqB,mBAA2C;AAC9D,aAAK,mBAAmB,IAAI,iBAAiB;MAC/C;MAEA,wBAAwB,mBAA2C;AACjE,aAAK,mBAAmB,OAAO,iBAAiB;MAClD;MAEA,OAAO,UAAoB,eAAwC;AACjE,eAAO,KAAK,cAAc,KAAK;UAC7B;UACA;SACD;MACH;MAEA,iBAAiB,MAAuB;AACtC,aAAK,UAAU,KAAK,IAAI;AACxB,aAAK,gBAAe;MACtB;MAEA,UAAU,QAAgB,UAAkB;AAC1C,YAAI,KAAK,sBAAsB,qBAAA,kBAAkB,UAAU;AACzD,eAAK,sBAAsB,SAAQ;QACrC;AACA,YAAI,KAAK,gBAAgB;AACvB,iBAAO;YACL,MAAM;YACN,QAAQ,KAAK,eAAe,OAAO,QAAQ,UAAU,KAAK,eAAe;;QAE7E,OAAO;AACL,cAAI,KAAK,wBAAwB;AAC/B,mBAAO;cACL,MAAM;cACN,OAAO,KAAK;;UAEhB,OAAO;AACL,mBAAO;cACL,MAAM;;UAEV;QACF;MACF;MAEA,mBAAmB,MAAmB;AACpC,aAAK,qBAAqB,KAAK,IAAI;AACnC,aAAK,gBAAe;MACtB;MAEQ,YAAS;AACf,aAAK,sBAAsB,QAAO;AAClC,aAAK,YAAY,qBAAA,kBAAkB,IAAI;AACvC,aAAK,gBAAgB,IAAI,SAAA,YAAY,KAAK,qBAAqB;AAC/D,YAAI,KAAK,WAAW;AAClB,uBAAa,KAAK,SAAS;AAC3B,eAAK,YAAY;QACnB;AACA,YAAI,KAAK,cAAc;AACrB,wBAAc,KAAK,YAAY;AAC/B,eAAK,eAAe;QACtB;MACF;MAEQ,iBAAiB,WAAiB;;AACxC,aAAK,YAAY,WAAW,MAAK;AAC/B,cAAI,KAAK,YAAY,GAAG;AAItB,iBAAK,iBAAiB,KAAK,aAAa;AACxC;UACF;AACA,gBAAM,MAAM,oBAAI,KAAI;AACpB,gBAAM,wBACJ,IAAI,QAAO,IAAK,KAAK,sBAAsB,QAAO;AACpD,cAAI,yBAAyB,KAAK,eAAe;AAC/C,iBAAK,MACH,gCACE,KAAK,gBACL,kBAAkB;AAEtB,iBAAK,UAAS;UAChB,OAAO;AAKL,iBAAK,iBAAiB,KAAK,gBAAgB,qBAAqB;UAClE;QACF,GAAG,SAAS;AACZ,SAAA,MAAA,KAAA,KAAK,WAAU,WAAK,QAAA,OAAA,SAAA,SAAA,GAAA,KAAA,EAAA;MACtB;MAEQ,sBAAmB;AACzB,YACE,KAAK,sBAAsB,qBAAA,kBAAkB,YAC7C,CAAC,KAAK,WACN;AACA,eAAK,iBAAiB,KAAK,aAAa;QAC1C;MACF;MAEQ,cAAW;AACjB,YAAI,KAAK,iBAAiB;AACxB,eAAK,oBAAoB,YAAY,eAAc;QACrD;AACA,aAAK,aAAa;MACpB;MAEQ,UAAUA,SAAoB;AACpC,YAAI,KAAK,iBAAiB;AACxB,cAAIA,QAAO,SAAS,YAAA,OAAO,IAAI;AAC7B,iBAAK,oBAAoB,YAAY,iBAAgB;UACvD,OAAO;AACL,iBAAK,oBAAoB,YAAY,cAAa;UACpD;QACF;AACA,aAAK,aAAa;AAClB,aAAK,wBAAwB,oBAAI,KAAI;AACrC,aAAK,oBAAmB;MAC1B;MAEA,wBACE,YACA,QACA,MACAF,cACA,UAAkB;AAElB,cAAM,cAAa,GAAA,cAAA,mBAAiB;AACpC,aAAK,MACH,8BAA8B,aAAa,eAAe,SAAS,GAAG;AAExE,eAAO,IAAI,sBAAA,kBACT,MACA,YACA,QACA,MACAA,cACA,UACA,UAAU;MAEd;MAEA,mBACE,YACA,QACA,MACAA,cACA,UAAkB;AAElB,cAAM,cAAa,GAAA,cAAA,mBAAiB;AACpC,aAAK,MACH,yBAAyB,aAAa,eAAe,SAAS,GAAG;AAEnE,eAAO,IAAI,gBAAA,aACT,MACA,YACA,QACA,MACAA,cACA,UACA,YACA,KAAK,oBACL,oBAAoB,IAAI,KAAK,UAAS,CAAE,CAAC;MAE7C;MAEA,oBACE,QACA,UACA,MACA,YACA,gBAAyC;AAEzC,cAAM,cAAa,GAAA,cAAA,mBAAiB;AACpC,aAAK,MACH,0BACE,aACA,eACA,SACA,kBACA,GAAA,WAAA,kBAAiB,QAAQ,CAAC;AAE9B,cAAM,eAAkC;UACtC;UACA,OAAO,mBAAc,QAAd,mBAAc,SAAd,iBAAkB,YAAA,UAAU;UACnC,MAAM,SAAI,QAAJ,SAAI,SAAJ,OAAQ,KAAK;UACnB;;AAGF,cAAM,OAAO,IAAI,iBAAA,cACf,MACA,QACA,cACA,KAAK,mBAAmB,MAAK,GAC7B,UAAU;AAGZ,aAAK,YAAW;AAChB,aAAK,iBAAiB,CAAAE,YAAS;AAC7B,eAAK,UAAUA,OAAM;QACvB,CAAC;AACD,eAAO;MACT;MAEA,QAAK;;AACH,aAAK,sBAAsB,QAAO;AAClC,aAAK,YAAY,qBAAA,kBAAkB,QAAQ;AAC3C,aAAK,gBAAgB,IAAI,eAAc;AACvC,mBAAW,QAAQ,KAAK,sBAAsB;AAC5C,eAAK,iBAAiB,YAAA,OAAO,aAAa,oCAAoC;QAChF;AACA,aAAK,uBAAuB,CAAA;AAC5B,mBAAW,QAAQ,KAAK,WAAW;AACjC,eAAK,iBAAiB,YAAA,OAAO,aAAa,oCAAoC;QAChF;AACA,aAAK,YAAY,CAAA;AACjB,YAAI,KAAK,cAAc;AACrB,wBAAc,KAAK,YAAY;QACjC;AACA,YAAI,KAAK,WAAW;AAClB,uBAAa,KAAK,SAAS;QAC7B;AACA,YAAI,KAAK,iBAAiB;AACxB,WAAA,GAAA,WAAA,uBAAsB,KAAK,WAAW;QACxC;AAEA,aAAK,eAAe,uBAAsB;AAC1C,SAAA,KAAA,KAAK,oBAAc,QAAA,OAAA,SAAA,SAAA,GAAE,MAAK;AAC1B,aAAK,iBAAiB;MACxB;MAEA,YAAS;AACP,gBAAO,GAAA,aAAA,aAAY,KAAK,MAAM;MAChC;MAEA,qBAAqB,cAAqB;AACxC,cAAM,oBAAoB,KAAK;AAC/B,YAAI,cAAc;AAChB,eAAK,sBAAsB,SAAQ;AACnC,eAAK,wBAAwB,oBAAI,KAAI;AACrC,eAAK,oBAAmB;QAC1B;AACA,eAAO;MACT;MAEA,uBACE,cACA,UACA,UAAiC;AAEjC,YAAI,KAAK,sBAAsB,qBAAA,kBAAkB,UAAU;AACzD,gBAAM,IAAI,MAAM,4BAA4B;QAC9C;AACA,YAAI,QAAQ;AACZ,YAAI,aAAa,UAAU;AACzB,gBAAM,eACJ,oBAAoB,OAAO,WAAW,IAAI,KAAK,QAAQ;AACzD,gBAAM,MAAM,oBAAI,KAAI;AACpB,cAAI,aAAa,aAAa,gBAAgB,KAAK;AACjD,oBAAQ,SACN,UACA,IAAI,MAAM,mDAAmD,CAAC;AAEhE;UACF;AACA,kBAAQ,WAAW,MAAK;AACtB,iBAAK,+BAA+B,aAAa;AACjD,qBACE,IAAI,MAAM,mDAAmD,CAAC;UAElE,GAAG,aAAa,QAAO,IAAK,IAAI,QAAO,CAAE;QAC3C;AACA,cAAM,gBAAgB;UACpB;UACA;UACA;;AAEF,aAAK,0BAA0B,KAAK,aAAa;MACnD;;;;;;MAOA,iBAAc;AACZ,eAAO,KAAK;MACd;MAEA,WACE,QACA,UACA,MACA,YACA,gBAAyC;AAEzC,YAAI,OAAO,WAAW,UAAU;AAC9B,gBAAM,IAAI,UAAU,6CAA6C;QACnE;AACA,YAAI,EAAE,OAAO,aAAa,YAAY,oBAAoB,OAAO;AAC/D,gBAAM,IAAI,UACR,uDAAuD;QAE3D;AACA,YAAI,KAAK,sBAAsB,qBAAA,kBAAkB,UAAU;AACzD,gBAAM,IAAI,MAAM,4BAA4B;QAC9C;AACA,eAAO,KAAK,oBACV,QACA,UACA,MACA,YACA,cAAc;MAElB;MAEA,aAAU;AACR,eAAO,KAAK;MACd;;AAnrBF,IAAAH,SAAA,kBAAA;;;;;;;;;;ACxKA,QAAA,wBAAA;AAOA,QAAA,qBAAA;AAoEA,QAAa,wBAAb,MAAkC;MAGhC,YACE,QACAI,cACA,SAAuB;AAEvB,YAAI,OAAO,WAAW,UAAU;AAC9B,gBAAM,IAAI,UAAU,iCAAiC;QACvD;AACA,YAAI,EAAEA,wBAAuB,sBAAA,qBAAqB;AAChD,gBAAM,IAAI,UACR,yDAAyD;QAE7D;AACA,YAAI,SAAS;AACX,cAAI,OAAO,YAAY,UAAU;AAC/B,kBAAM,IAAI,UAAU,mCAAmC;UACzD;QACF;AAEA,aAAK,kBAAkB,IAAI,mBAAA,gBAAgB,QAAQA,cAAa,OAAO;MACzE;MAEA,QAAK;AACH,aAAK,gBAAgB,MAAK;MAC5B;MAEA,YAAS;AACP,eAAO,KAAK,gBAAgB,UAAS;MACvC;MAEA,qBAAqB,cAAqB;AACxC,eAAO,KAAK,gBAAgB,qBAAqB,YAAY;MAC/D;MAEA,uBACE,cACA,UACA,UAAiC;AAEjC,aAAK,gBAAgB,uBACnB,cACA,UACA,QAAQ;MAEZ;;;;;;MAOA,iBAAc;AACZ,eAAO,KAAK,gBAAgB,eAAc;MAC5C;MAEA,WACE,QACA,UACA,MACA,YACA,gBAAyC;AAEzC,YAAI,OAAO,WAAW,UAAU;AAC9B,gBAAM,IAAI,UAAU,6CAA6C;QACnE;AACA,YAAI,EAAE,OAAO,aAAa,YAAY,oBAAoB,OAAO;AAC/D,gBAAM,IAAI,UACR,uDAAuD;QAE3D;AACA,eAAO,KAAK,gBAAgB,WAC1B,QACA,UACA,MACA,YACA,cAAc;MAElB;;AAhFF,IAAAC,SAAA,wBAAA;;;;;;;;;;AC/BA,IAAAC,SAAA,sBAAA;AA5CA,QAAA,WAAA,QAAA,QAAA;AACA,QAAA,WAAA,QAAA,QAAA;AAEA,QAAA,cAAA;AAEA,QAAA,aAAA;AAuCA,aAAgB,oBACd,OACA,kBAAuC;;AAEvC,YAAMC,UAA8B;QAClC,MAAM,YAAA,OAAO;QACb,SAAS,aAAa,QAAQ,MAAM,UAAU;QAC9C,WAAU,KAAA,qBAAgB,QAAhB,qBAAgB,SAAhB,mBAAoB,MAAM,cAAQ,QAAA,OAAA,SAAA,KAAI;;AAGlD,UACE,UAAU,SACV,OAAO,MAAM,SAAS,YACtB,OAAO,UAAU,MAAM,IAAI,GAC3B;AACA,QAAAA,QAAO,OAAO,MAAM;AAEpB,YAAI,aAAa,SAAS,OAAO,MAAM,YAAY,UAAU;AAC3D,UAAAA,QAAO,UAAU,MAAM;QACzB;MACF;AACA,aAAOA;IACT;AAEA,QAAa,sBAAb,cACU,SAAA,aAAY;MAKpB,YACU,MACA,MACD,UACA,SAAoB;AAE3B,cAAK;AALG,aAAA,OAAA;AACA,aAAA,OAAA;AACD,aAAA,WAAA;AACA,aAAA,UAAA;AAGP,aAAK,YAAY;MACnB;MAEA,UAAO;AACL,eAAO,KAAK,KAAK,QAAO;MAC1B;MAEA,aAAa,kBAA0B;AACrC,aAAK,KAAK,aAAa,gBAAgB;MACzC;MAEA,cAAW;AACT,eAAO,KAAK,KAAK,YAAW;MAC9B;MAEA,UAAO;AACL,eAAO,KAAK;MACd;MAEA,UAAO;AACL,eAAO,KAAK,KAAK,QAAO;MAC1B;MAEA,iBAAc;AACZ,eAAO,KAAK,KAAK,eAAc;MACjC;MAEA,qBAAkB;AAChB,eAAO,KAAK,KAAK,mBAAkB;MACrC;;AA1CF,IAAAD,SAAA,sBAAA;AA6CA,QAAa,2BAAb,cACU,SAAA,SAAQ;MAKhB,YACU,MACA,MACD,UAAkB;AAEzB,cAAM,EAAE,YAAY,KAAI,CAAE;AAJlB,aAAA,OAAA;AACA,aAAA,OAAA;AACD,aAAA,WAAA;AAGP,aAAK,YAAY;MACnB;MAEA,MAAM,MAAY;AAChB,aAAK,KAAK,UAAS;MACrB;MAEA,UAAO;AACL,eAAO,KAAK,KAAK,QAAO;MAC1B;MAEA,aAAa,kBAA0B;AACrC,aAAK,KAAK,aAAa,gBAAgB;MACzC;MAEA,cAAW;AACT,eAAO,KAAK,KAAK,YAAW;MAC9B;MAEA,UAAO;AACL,eAAO,KAAK;MACd;MAEA,UAAO;AACL,eAAO,KAAK,KAAK,QAAO;MAC1B;MAEA,iBAAc;AACZ,eAAO,KAAK,KAAK,eAAc;MACjC;MAEA,qBAAkB;AAChB,eAAO,KAAK,KAAK,mBAAkB;MACrC;;AA7CF,IAAAA,SAAA,2BAAA;AAgDA,QAAa,2BAAb,cACU,SAAA,SAAQ;MAUhB,YACU,MACA,MACD,UACA,SAAoB;AAE3B,cAAM,EAAE,YAAY,KAAI,CAAE;AALlB,aAAA,OAAA;AACA,aAAA,OAAA;AACD,aAAA,WAAA;AACA,aAAA,UAAA;AATD,aAAA,gBAAqC;UAC3C,MAAM,YAAA,OAAO;UACb,SAAS;;AAUT,aAAK,YAAY;AACjB,aAAK,mBAAmB,IAAI,WAAA,SAAQ;AAEpC,aAAK,GAAG,SAAS,SAAM;AACrB,eAAK,gBAAgB,oBAAoB,GAAG;AAC5C,eAAK,IAAG;QACV,CAAC;MACH;MAEA,UAAO;AACL,eAAO,KAAK,KAAK,QAAO;MAC1B;MAEA,aAAa,kBAA0B;AACrC,aAAK,KAAK,aAAa,gBAAgB;MACzC;MAEA,cAAW;AACT,eAAO,KAAK,KAAK,YAAW;MAC9B;MAEA,UAAO;AACL,eAAO,KAAK;MACd;MAEA,UAAO;AACL,eAAO,KAAK,KAAK,QAAO;MAC1B;MAEA,iBAAc;AACZ,eAAO,KAAK,KAAK,eAAc;MACjC;MAEA,qBAAkB;AAChB,eAAO,KAAK,KAAK,mBAAkB;MACrC;MAEA,OACE,OACA,UAEA,UAAkC;AAElC,aAAK,KAAK,YAAY,OAAO,QAAQ;MACvC;MAEA,OAAO,UAAkB;;AACvB,iBAAS,IAAI;AACb,aAAK,KAAK,WAAU,OAAA,OAAA,OAAA,OAAA,CAAA,GACf,KAAK,aAAa,GAAA,EACrB,WAAU,KAAA,KAAK,cAAc,cAAQ,QAAA,OAAA,SAAA,KAAI,KAAK,iBAAgB,CAAA,CAAA;MAElE;;MAGA,IAAI,UAAc;AAChB,YAAI,UAAU;AACZ,eAAK,mBAAmB;QAC1B;AAEA,eAAO,MAAM,IAAG;MAClB;;AA/EF,IAAAA,SAAA,2BAAA;AAkFA,QAAa,yBAAb,cACU,SAAA,OAAM;MAUd,YACU,MACA,MACD,UAAkB;AAEzB,cAAM,EAAE,YAAY,KAAI,CAAE;AAJlB,aAAA,OAAA;AACA,aAAA,OAAA;AACD,aAAA,WAAA;AARD,aAAA,gBAAqC;UAC3C,MAAM,YAAA,OAAO;UACb,SAAS;;AAST,aAAK,YAAY;AACjB,aAAK,mBAAmB,IAAI,WAAA,SAAQ;AAEpC,aAAK,GAAG,SAAS,SAAM;AACrB,eAAK,gBAAgB,oBAAoB,GAAG;AAC5C,eAAK,IAAG;QACV,CAAC;MACH;MAEA,UAAO;AACL,eAAO,KAAK,KAAK,QAAO;MAC1B;MAEA,aAAa,kBAA0B;AACrC,aAAK,KAAK,aAAa,gBAAgB;MACzC;MAEA,cAAW;AACT,eAAO,KAAK,KAAK,YAAW;MAC9B;MAEA,UAAO;AACL,eAAO,KAAK;MACd;MAEA,UAAO;AACL,eAAO,KAAK,KAAK,QAAO;MAC1B;MAEA,iBAAc;AACZ,eAAO,KAAK,KAAK,eAAc;MACjC;MAEA,qBAAkB;AAChB,eAAO,KAAK,KAAK,mBAAkB;MACrC;MAEA,MAAM,MAAY;AAChB,aAAK,KAAK,UAAS;MACrB;MAEA,OACE,OACA,UAEA,UAAkC;AAElC,aAAK,KAAK,YAAY,OAAO,QAAQ;MACvC;MAEA,OAAO,UAAkB;;AACvB,iBAAS,IAAI;AACb,aAAK,KAAK,WAAU,OAAA,OAAA,OAAA,OAAA,CAAA,GACf,KAAK,aAAa,GAAA,EACrB,WAAU,KAAA,KAAK,cAAc,cAAQ,QAAA,OAAA,SAAA,KAAI,KAAK,iBAAgB,CAAA,CAAA;MAElE;;MAGA,IAAI,UAAc;AAChB,YAAI,UAAU;AACZ,eAAK,mBAAmB;QAC1B;AAEA,eAAO,MAAM,IAAG;MAClB;;AAlFF,IAAAA,SAAA,yBAAA;;;;;;;;;;ACqCA,IAAAE,SAAA,6CAAA;AAoDA,IAAAA,SAAA,0CAAA;AA3UA,QAAA,gBAAA;AAcA,QAAsB,oBAAtB,MAAuC;MAGrC,YAAoB,0BAAsD,gBAAqC;AAA3F,aAAA,2BAAA;AAFZ,aAAA,WAAsC,oBAAI,IAAG;AAC7C,aAAA,uBAAoD;AAE1D,aAAK,uBAAuB,mBAAc,QAAd,mBAAc,SAAd,iBAAkB;MAChD;MAEA,YAAY,SAA6B;AACvC,aAAK,SAAS,IAAI,OAAO;MAC3B;MACA,eAAe,SAA6B;AAC1C,aAAK,SAAS,OAAO,OAAO;MAC9B;MACU,kBAAe;AACvB,eAAO,KAAK,SAAS;MACvB;MACU,2BAA2B,SAAoC;AACvE,aAAK,uBAAuB;AAC5B,mBAAW,WAAW,KAAK,UAAU;AACnC,kBAAQ,KAAK,oBAAoB;QACnC;MACF;MACA,YAAS;AACP,eAAO,KAAK,6BAA6B;MAC3C;MACA,2BAAwB;AACtB,eAAO,KAAK;MACd;MACA,yBAAsB;AACpB,eAAO,KAAK;MACd;MACA,mBAAgB;AACd,eAAO,CAAA;MACT;MAGA,OAAO,iBAAc;AACnB,eAAO,IAAI,0BAAyB;MACtC;MAEA,OAAO,UACL,WACA,cACA,yBAAyB,OAAK;;AAE9B,YAAI,cAAc,QAAQ,CAAC,OAAO,SAAS,SAAS,GAAG;AACrD,gBAAM,IAAI,UAAU,oCAAoC;QAC1D;AAEA,YAAI,CAAC,MAAM,QAAQ,YAAY,GAAG;AAChC,gBAAM,IAAI,UAAU,+BAA+B;QACrD;AAEA,YAAI,OAAO,2BAA2B,WAAW;AAC/C,gBAAM,IAAI,UAAU,0CAA0C;QAChE;AAEA,cAAM,OAAiB,CAAA;AACvB,cAAM,MAAgB,CAAA;AAEtB,iBAAS,IAAI,GAAG,IAAI,aAAa,QAAQ,KAAK;AAC5C,gBAAM,OAAO,aAAa,CAAC;AAE3B,cAAI,SAAS,QAAQ,OAAO,SAAS,UAAU;AAC7C,kBAAM,IAAI,UAAU,eAAe,CAAC,qBAAqB;UAC3D;AAEA,cAAI,CAAC,OAAO,SAAS,KAAK,WAAW,GAAG;AACtC,kBAAM,IAAI,UAAU,eAAe,CAAC,gCAAgC;UACtE;AAEA,cAAI,CAAC,OAAO,SAAS,KAAK,UAAU,GAAG;AACrC,kBAAM,IAAI,UAAU,eAAe,CAAC,+BAA+B;UACrE;AAEA,eAAK,KAAK,KAAK,UAAU;AACzB,cAAI,KAAK,KAAK,WAAW;QAC3B;AAEA,eAAO,IAAI,wBAAwB;UACjC,aAAa;UACb,SAAS,cAAA;WACR;UACD,KAAI,KAAA,cAAS,QAAT,cAAS,SAAT,aAAa,GAAA,cAAA,qBAAmB,OAAE,QAAA,OAAA,SAAA,KAAI;UAC1C;UACA;SACD;MACH;;AAvFF,IAAAA,SAAA,oBAAA;AA0FA,QAAM,4BAAN,MAAM,mCAAkC,kBAAiB;MACvD,cAAA;AACE,cAAM,IAAI;MACZ;MAEA,eAAY;AACV,eAAO;MACT;MAEA,QAAQ,OAAwB;AAC9B,eAAO,iBAAiB;MAC1B;;AAGF,QAAM,0BAAN,MAAM,iCAAgC,kBAAiB;MAGrD,YAAY,oBAAyC,gBAAoC;AACvF,cAAM,oBAAoB,cAAc;AACxC,aAAK,UAAO,OAAA,OAAA,OAAA,OAAA,CAAA,GAAO,kBAAkB,GAAK,cAAc;MAC1D;;;;;;;MAQA,QAAQ,OAAwB;AAC9B,YAAI,SAAS,OAAO;AAClB,iBAAO;QACT;AACA,YAAI,EAAE,iBAAiB,2BAA0B;AAC/C,iBAAO;QACT;AAEA,YAAI,OAAO,SAAS,KAAK,QAAQ,EAAE,KAAK,OAAO,SAAS,MAAM,QAAQ,EAAE,GAAG;AACzE,cAAI,CAAC,KAAK,QAAQ,GAAG,OAAO,MAAM,QAAQ,EAAE,GAAG;AAC7C,mBAAO;UACT;QACF,OAAO;AACL,cAAI,KAAK,QAAQ,OAAO,MAAM,QAAQ,IAAI;AACxC,mBAAO;UACT;QACF;AAEA,YAAI,MAAM,QAAQ,KAAK,QAAQ,IAAI,KAAK,MAAM,QAAQ,MAAM,QAAQ,IAAI,GAAG;AACzE,cAAI,KAAK,QAAQ,KAAK,WAAW,MAAM,QAAQ,KAAK,QAAQ;AAC1D,mBAAO;UACT;AACA,mBAAS,IAAI,GAAG,IAAI,KAAK,QAAQ,KAAK,QAAQ,KAAK;AACjD,kBAAM,WAAW,KAAK,QAAQ,KAAK,CAAC;AACpC,kBAAM,YAAY,MAAM,QAAQ,KAAK,CAAC;AACtC,gBAAI,OAAO,SAAS,QAAQ,KAAK,OAAO,SAAS,SAAS,GAAG;AAC3D,kBAAI,CAAC,SAAS,OAAO,SAAS,GAAG;AAC/B,uBAAO;cACT;YACF,OAAO;AACL,kBAAI,aAAa,WAAW;AAC1B,uBAAO;cACT;YACF;UACF;QACF,OAAO;AACL,cAAI,KAAK,QAAQ,SAAS,MAAM,QAAQ,MAAM;AAC5C,mBAAO;UACT;QACF;AAEA,YAAI,MAAM,QAAQ,KAAK,QAAQ,GAAG,KAAK,MAAM,QAAQ,MAAM,QAAQ,GAAG,GAAG;AACvE,cAAI,KAAK,QAAQ,IAAI,WAAW,MAAM,QAAQ,IAAI,QAAQ;AACxD,mBAAO;UACT;AACA,mBAAS,IAAI,GAAG,IAAI,KAAK,QAAQ,IAAI,QAAQ,KAAK;AAChD,kBAAM,UAAU,KAAK,QAAQ,IAAI,CAAC;AAClC,kBAAM,WAAW,MAAM,QAAQ,IAAI,CAAC;AACpC,gBAAI,OAAO,SAAS,OAAO,KAAK,OAAO,SAAS,QAAQ,GAAG;AACzD,kBAAI,CAAC,QAAQ,OAAO,QAAQ,GAAG;AAC7B,uBAAO;cACT;YACF,OAAO;AACL,kBAAI,YAAY,UAAU;AACxB,uBAAO;cACT;YACF;UACF;QACF,OAAO;AACL,cAAI,KAAK,QAAQ,QAAQ,MAAM,QAAQ,KAAK;AAC1C,mBAAO;UACT;QACF;AAEA,YAAI,KAAK,QAAQ,gBAAgB,MAAM,QAAQ,aAAa;AAC1D,iBAAO;QACT;AAGA,eAAO;MACT;;AAGF,QAAM,uCAAN,MAAM,8CAA6C,kBAAiB;MAKlE,YACU,6BACA,uBACA,0BAAiC;AAEzC,cAAM;UACJ,aAAa,0BAA0B;UACvC,oBAAoB;UACpB,SAAS,cAAA;SACV;AARO,aAAA,8BAAA;AACA,aAAA,wBAAA;AACA,aAAA,2BAAA;AAPF,aAAA,iBAA6C;AAC7C,aAAA,uBAAyD;AACzD,aAAA,8BAA2D,KAAK,0BAA0B,KAAK,IAAI;AACnG,aAAA,oCAAuE,KAAK,kCAAkC,KAAK,IAAI;MAW/H;MACA,YAAY,SAA6B;;AACvC,YAAI,KAAK,gBAAe,MAAO,GAAG;AAChC,WAAA,KAAA,KAAK,2BAAqB,QAAA,OAAA,SAAA,SAAA,GAAE,yBAAyB,KAAK,2BAA2B;AACrF,eAAK,4BAA4B,+BAA+B,KAAK,iCAAiC;QACxG;AACA,cAAM,YAAY,OAAO;MAC3B;MACA,eAAe,SAA6B;;AAC1C,cAAM,eAAe,OAAO;AAC5B,YAAI,KAAK,gBAAe,MAAO,GAAG;AAChC,WAAA,KAAA,KAAK,2BAAqB,QAAA,OAAA,SAAA,SAAA,GAAE,4BAA4B,KAAK,2BAA2B;AACxF,eAAK,4BAA4B,kCAAkC,KAAK,iCAAiC;QAC3G;MACF;MACA,QAAQ,OAAwB;AAC9B,YAAI,SAAS,OAAO;AAClB,iBAAO;QACT;AACA,YAAI,EAAE,iBAAiB,wCAAuC;AAC5D,iBAAO;QACT;AACA,eACE,KAAK,0BAA0B,MAAM,yBACrC,KAAK,gCAAgC,MAAM,+BAC3C,KAAK,6BAA6B,MAAM;MAE5C;MAEQ,gCAA6B;;AACnC,YAAI,KAAK,yBAAyB,MAAM;AACtC,iBAAO;QACT;AACA,YAAI,KAAK,0BAA0B,QAAQ,KAAK,mBAAmB,MAAM;AACvE,iBAAO;QACT;AACA,eAAO;UACL,KAAI,KAAA,KAAK,oBAAc,QAAA,OAAA,SAAA,SAAA,GAAE;UACzB,MAAM,CAAC,KAAK,qBAAqB,WAAW;UAC5C,KAAK,CAAC,KAAK,qBAAqB,UAAU;;MAE9C;MAEQ,iBAAc;AACpB,cAAM,uBAAuB,KAAK,8BAA6B;AAC/D,aAAK,2BAA2B,oBAAoB;MACtD;MAEQ,0BAA0B,QAAkC;AAClE,aAAK,iBAAiB;AACtB,aAAK,eAAc;MACrB;MAEQ,kCAAkC,QAAwC;AAChF,aAAK,uBAAuB;AAC5B,aAAK,eAAc;MACrB;;AAGF,aAAgB,2CACd,uBACA,6BACA,0BAAiC;AAEjC,aAAO,IAAI,qCACT,uBACA,6BACA,wBAAwB;IAC5B;AAEA,QAAM,+BAAN,MAAM,sCAAqC,kBAAiB;MAC1D,YAA6B,kBAAsD,cAAiC;AAClH,cAAM,CAAA,CAAE;AADmB,aAAA,mBAAA;AAAsD,aAAA,eAAA;MAEnF;MACA,YAAS;AACP,eAAO,KAAK,iBAAiB,UAAS;MACxC;MACA,QAAQ,OAAwB;AAC9B,YAAI,EAAE,iBAAiB,gCAA+B;AACpD,iBAAO;QACT;AACA,YAAI,CAAE,KAAK,iBAAiB,QAAQ,MAAM,gBAAgB,GAAI;AAC5D,iBAAO;QACT;AACA,YAAI,KAAK,aAAa,WAAW,MAAM,aAAa,QAAQ;AAC1D,iBAAO;QACT;AACA,iBAAS,IAAI,GAAG,IAAI,KAAK,aAAa,QAAQ,KAAK;AACjD,cAAI,KAAK,aAAa,CAAC,MAAM,MAAM,aAAa,CAAC,GAAG;AAClD,mBAAO;UACT;QACF;AACA,eAAO;MACT;MACS,mBAAgB;AACvB,eAAO,KAAK;MACd;MACS,YAAY,SAA6B;AAChD,aAAK,iBAAiB,YAAY,OAAO;MAC3C;MACS,eAAe,SAA6B;AACnD,aAAK,iBAAiB,eAAe,OAAO;MAC9C;MACS,yBAAsB;AAC7B,eAAO,KAAK,iBAAiB,uBAAsB;MACrD;MACS,2BAAwB;AAC/B,eAAO,KAAK,iBAAiB,yBAAwB;MACvD;;AAGF,aAAgB,wCAAwCC,cAAgC,cAAiC;AACvH,aAAO,IAAI,6BAA6BA,cAAa,YAAY;IACnE;;;;;;;;;ACpUA,IAAAC,SAAA,4BAAA;AAOA,IAAAA,SAAA,eAAA;AAOA,IAAAA,SAAA,eAAA;AAIA,IAAAA,SAAA,aAAA;AAIA,IAAAA,SAAA,oBAAA;AAKA,IAAAA,SAAA,gBAAA;AAWA,IAAAA,SAAA,mBAAA;AAtCA,aAAgB,0BAA0B,SAAwB;AAChE,aAAO;QACL,SAAS,OAAO,SAAS,QAAQ,OAAO;QACxC,OAAO,QAAQ;;IAEnB;AAEA,aAAgB,aAAa,QAAc;AACzC,aAAO;QACL,SAAU,SAAS,MAAQ;QAC3B,OAAS,SAAS,MAAQ,MAAa;;IAE3C;AAEA,aAAgB,aAAa,UAAkB;AAC7C,aAAQ,SAAS,UAAU,MAAO,SAAS,QAAQ,MAAa;IAClE;AAEA,aAAgB,WAAW,OAAU;AACnC,aAAO,OAAO,MAAM,YAAY,YAAY,OAAO,MAAM,UAAU;IACrE;AAEA,aAAgB,kBAAkB,OAAU;AAC1C,aAAO,OAAO,MAAM,YAAY,YAAY,OAAO,MAAM,UAAU;IACrE;AAEA,QAAMC,iBAAgB;AACtB,aAAgB,cAAc,OAAa;AACzC,YAAM,QAAQ,MAAM,MAAMA,cAAa;AACvC,UAAI,CAAC,OAAO;AACV,eAAO;MACT;AACA,aAAO;QACL,SAAS,OAAO,SAAS,MAAM,CAAC,GAAG,EAAE;QACrC,OAAO,MAAM,CAAC,IAAI,OAAO,SAAS,MAAM,CAAC,EAAE,OAAO,GAAG,GAAG,GAAG,EAAE,IAAI;;IAErE;AAEA,aAAgB,iBAAiB,UAAkB;AACjD,UAAI,SAAS,UAAU,GAAG;AACxB,eAAO,GAAG,SAAS,OAAO;MAC5B;AACA,UAAI;AACJ,UAAI,SAAS,QAAQ,QAAc,GAAG;AACpC,sBAAc;MAChB,WAAW,SAAS,QAAQ,QAAU,GAAG;AACvC,sBAAc;MAChB,OAAO;AACL,sBAAc;MAChB;AACA,aAAO,GAAG,SAAS,OAAO,IAAI,SAAS,QAAM,WAAW;IAC1D;;;;;;;;;;AC4IA,IAAAC,SAAA,mBAAA;AAiBA,IAAAA,SAAA,sBAAA;AAtNA,QAAA,gBAAA;AAEA,QAAA,aAAA;AAEA,QAAA,wBAAA;AAIA,QAAA,yBAAA;AAEA,QAAA,cAAA;AACA,QAAA,oBAAA;AACA,QAAA,uBAAA;AAEA,QAAM,kBAA4C;AAClD,aAAS,gBAAa;AACpB,UAAI,iBAAiB;AACnB,eAAO;MACT;AAGA,YAAM,iBAAiB,eACpB;AACH,YAAM,cAAc,eAAe,kCAAkC;QACnE,UAAU;QACV,OAAO;QACP,OAAO;QACP,UAAU;QACV,QAAQ;QACR,aAAa;UACX,GAAG,SAAS;UACZ,GAAG,SAAS;;OAEf;AACD,cAAO,GAAA,cAAA,uBAAsB,WAAW;IAC1C;AAKA,QAAa,2BAAb,MAAqC;MAArC,cAAA;AACU,aAAA,UAA0B,CAAA;MAkFpC;;;;;;MA3EE,wBAAwB,MAAc,OAAa;AACjD,YAAI,CAAC,KAAK,QAAQ,cAAc;AAC9B,eAAK,QAAQ,eAAe,CAAA;QAC9B;AACA,aAAK,QAAQ,aAAa,IAAI,IAAI;MACpC;;;;;;MAOA,wBAAwB,MAAc,OAAa;AACjD,YAAI,CAAC,KAAK,QAAQ,aAAa;AAC7B,eAAK,QAAQ,cAAc,CAAA;QAC7B;AACA,aAAK,QAAQ,YAAY,IAAI,IAAI;MACnC;;;;;;MAOA,kBAAkB,MAAc,OAAa;AAC3C,YAAI,CAAC,KAAK,QAAQ,eAAe;AAC/B,eAAK,QAAQ,gBAAgB,CAAA;QAC/B;AACA,aAAK,QAAQ,cAAc,IAAI,IAAI;MACrC;;;;;MAMA,2BAA2B,OAAa;AACtC,aAAK,QAAQ,kBAAkB;MACjC;;;;;MAMA,8BAA8B,OAAa;AACzC,aAAK,QAAQ,kBAAkB;MACjC;;;;;MAMA,mCAAmC,OAAa;AAC9C,aAAK,QAAQ,0BAA0B;MACzC;;;;;MAMA,gBAAgB,OAAa;AAC3B,aAAK,QAAQ,iBAAiB;MAChC;;;;;MAMA,gBAAgB,OAAa;AAC3B,aAAK,QAAQ,MAAM;MACrB;MAEA,YAAS;AACP,cAAM,YAAY,cAAa;AAC/B,eAAO,UAAU,IAAI,KAAK,KAAK,GAAG,eAAe,UAAU,KAAK,OAAO;MACzE;;AAlFF,IAAAA,SAAA,2BAAA;AAqFA,QAAM,6BAA6B;AAEnC,QAAa,uBAAb,MAAiC;MAAjC,cAAA;AACU,aAAA,UAA0B,CAAA;AAE1B,aAAA,wBAAgD;UACtD,mBAAmB,UAAO;AACxB,kBAAM,iBAAiB,KAAK,QAAQ,mBAClC,GAAA,WAAA,eAAa,GAAA,WAAA,2BAA0B,KAAK,QAAQ,eAAe,CAAC,IACpE;AACF,kBAAM,cAAc,YAAY,MAAK;AACnC,mBAAK,MAAM,KAAK,OAAO;YACzB,GAAG,cAAc;AACjB,iBAAK,GAAG,aAAa,MAAK;AACxB,4BAAc,WAAW;YAC3B,CAAC;UACH;;MAsDJ;MAnDE,qBAAqB,MAAc,OAAa;AAC9C,YAAI,CAAC,KAAK,QAAQ,aAAa;AAC7B,eAAK,QAAQ,cAAc,CAAA;QAC7B;AACA,aAAK,QAAQ,YAAY,IAAI,IAAI;MACnC;MAEA,yBAAyB,SAAiC;AACxD,aAAK,QAAQ,cAAW,OAAA,OAAA,CAAA,GAAO,OAAO;MACxC;MAEA,wBAAwB,MAAY;;AAC3B,SAAA,KAAA,KAAK,QAAQ,iBAAW,QAAA,OAAA,SAAA,OAAA,OAAA,GAAG,IAAI;MACxC;MAEA,wBAAwB,OAAa;AACnC,aAAK,QAAQ,kBAAkB;MACjC;MAEA,6BAA0B;AACxB,eAAO,KAAK,QAAQ;MACtB;MAEA,gCAAgC,OAAa;AAC3C,aAAK,QAAQ,0BAA0B;MACzC;MAEA,qCAAkC;AAChC,eAAO,KAAK,QAAQ;MACtB;MAEA,aAAa,OAAa;AACxB,aAAK,QAAQ,iBAAiB;MAChC;MAEA,kBAAe;AACb,eAAO,KAAK,QAAQ;MACtB;MAEA,aAAa,OAAa;AACxB,aAAK,QAAQ,MAAM;MACrB;MAEA,kBAAe;AACb,eAAO,KAAK,QAAQ;MACtB;MAEA,YAAY,QAAc;AACxB,cAAM,oBAAoB,cAAa,EAAG,IAAI,QAAQ,KAAK,GAAG,eAAe;AAC7E,eAAO,WAAW,mBAAmB,KAAK,qBAAqB;MACjE;;AAnEF,IAAAA,SAAA,uBAAA;AAsEA,aAAgB,iBAAiB,SAAgB;AAC/C,YAAM,cAAc,cAAa,EAAG,IAAI,QAAQ,KAAK,GAAG;AACxD,aAAO,IAAI,YAAY,UAAU,sBAAA,mBAAmB,eAAc,GAAI,EAAC,iBAAiB,QAAO,CAAC;IAClG;AAIa,IAAAA,SAAA,sBAAsB;AACnC,QAAM,yBAAyB;AAS/B,aAAgB,oBAAoB,UAA2B,qBAAuC;AACpG,aAAO,CAAC,MAAM,SAAS,aAAY;AACjC,YAAI,mBAAmB,SAAS,UAAU,sBAAsB;AAChE,YAAI,kBAAkB;AACpB,mBAAS,gBAAgB;QAC3B,OAAO;AACL,gBAAM,uBAAuB,SAAS,IAAIA,SAAA,mBAAmB;AAC7D,cAAI,qBAAqB,SAAS,GAAG;AACnC,kBAAM,YAAY,cAAa;AAC/B,+BAAmB,UAAU,IAAI,KAAK,KAAK,GAAG,eAAe,YAAY,qBAAqB,CAAC,CAAW;AAC1G,qBAAS,gBAAgB;AACzB,qBAAS,UAAU,wBAAwB,gBAAgB;UAC7D;QACF;AACA,YAAI,qBAAqB;AACvB,8BAAoB,MAAM,SAAS,QAAQ;QAC7C;MACF;IACF;AAEA,QAAM,oBAAoB;AAE1B,QAAM,wBAAN,MAA2B;MAEzB,YAAoB,iBAA0C,YAAkB;AAA5D,aAAA,kBAAA;AAA0C,aAAA,aAAA;AADtD,aAAA,eAAoC;MACuC;MACnF,cAAc,YAAsB;AAClC,cAAM,WAAW,WAAW,wBAAwB,mBAAmB,4BAA4B;AACnG,aAAK,eAAe;AACpB,iBAAS,eAAe,IAAI;MAC9B;MACA,UAAO;;AACL,SAAA,KAAA,KAAK,kBAAY,QAAA,OAAA,SAAA,SAAA,GAAE,kBAAkB,IAAI;MAC3C;MACA,cAAW;AACT,eAAO,KAAK;MACd;MACA,gBAAgB,SAA+B;AAC7C,aAAK,gBAAgB,OAAO;MAC9B;;AAGF,QAAM,yBAAN,MAA4B;MAQ1B,YAAoB,YAAsB;AAAtB,aAAA,aAAA;AAPZ,aAAA,eAA2C,oBAAI,IAAG;AAClD,aAAA,gBAAgB;AAEhB,aAAA,cAAmE;AACnE,aAAA,kBAAkB;AAClB,aAAA,eAAe,IAAI,kBAAA,eAAe,MAAM,KAAK,0BAAyB,CAAE;AACxE,aAAA,0BAA0B,MAAM,KAAK,0BAAyB;AAEpE,cAAM,UAAU,WAAW,WAAU;AACrC,aAAK,SAAS,iBAAiB,OAAO;AACtC,mBAAW,6BAA6B,KAAK,uBAAuB;MACtE;MACA,eAAe,aAAkC;AAC/C,aAAK,aAAa,IAAI,WAAW;AACjC,aAAK,0BAAyB;MAChC;MACA,kBAAkB,aAAkC;;AAClD,aAAK,aAAa,OAAO,WAAW;AACpC,YAAI,KAAK,aAAa,SAAS,GAAG;AAChC,eAAK,WAAW,mBAAmB,iBAAiB;AACpD,WAAA,KAAA,KAAK,iBAAW,QAAA,OAAA,SAAA,SAAA,GAAE,OAAM;AACxB,eAAK,cAAc;AACnB,eAAK,OAAO,MAAK;AACjB,eAAK,WAAW,gCAAgC,KAAK,uBAAuB;QAC9E,OAAO;AACL,eAAK,0BAAyB;QAChC;MACF;MACQ,4BAAyB;;AAC/B,YAAI,KAAK,aAAa,SAAS,KAAK,CAAC,KAAK,iBAAiB,KAAK,WAAW,qBAAoB,MAAO,qBAAA,kBAAkB,OAAO;AAC7H;QACF;AACA,cAAM,cAAc,KAAK,IAAI,GAAG,MAAM,KAAK,KAAK,YAAY,EAAE,IAAI,aAAW,QAAQ,YAAW,CAAE,CAAC;AACnG,YAAI,CAAC,KAAK,eAAe,gBAAgB,KAAK,iBAAiB;AAC7D,WAAA,KAAA,KAAK,iBAAW,QAAA,OAAA,SAAA,SAAA,GAAE,OAAM;AACxB,eAAK,kBAAkB;AACvB,gBAAM,cAAc,KAAK,OAAO,kBAAkB,EAAC,kBAAiB,GAAA,WAAA,cAAa,WAAW,EAAC,CAAC;AAC9F,eAAK,cAAc;AACnB,sBAAY,GAAG,QAAQ,CAAC,WAAkC;AACxD,iBAAK,aAAa,QAAQ,aAAU;AAClC,sBAAQ,gBAAgB,MAAM;YAChC,CAAC;UACH,CAAC;AACD,sBAAY,GAAG,SAAS,CAAC,UAAuB;AAC9C,iBAAK,cAAc;AACnB,gBAAI,MAAM,SAAS,YAAA,OAAO,eAAe;AACvC,mBAAK,gBAAgB;AACrB;YACF;AACA,gBAAI,MAAM,SAAS,YAAA,OAAO,WAAW;AACnC;YACF;AACA,iBAAK,aAAa,QAAO;UAC3B,CAAC;QACH;MACF;;AAGF,QAAa,kCAAb,cAAqD,uBAAA,sBAAqB;MACxE,YAAY,OAA4B,iBAAkC,YAAkB;AAC1F,cAAM,KAAK;AACX,aAAK,eAAe,IAAI,sBAAsB,iBAAiB,UAAU,CAAC;MAC5E;MAEA,uBAAoB;AAClB,eAAO,KAAK;MACd;;AARF,IAAAA,SAAA,kCAAA;AAWA,aAAS,6BAA6B,YAAsB;AAC1D,aAAO,IAAI,uBAAuB,UAAU;IAC9C;;;;;;;;;;ACzOA,IAAAC,SAAA,+BAAA;AA+5BA,IAAAA,SAAA,4BAAA;AA//BA,QAAA,aAAA;AAIA,QAAA,cAAA;AAMA,QAAA,QAAA,QAAA,OAAA;AACA,QAAA,UAAA;AACA,QAAA,OAAA,QAAA,MAAA;AACA,QAAA,mBAAA;AAEA,QAAA,UAAA;AAEA,QAAA,QAAA,QAAA,KAAA;AACA,QAAA,SAAA;AAEA,QAAM,cAAc;AAEpB,aAAS,MAAM,MAAY;AACzB,cAAQ,MAAM,YAAA,aAAa,OAAO,aAAa,IAAI;IACrD;AA4BA,QAAa,wBAAb,MAAkC;MAAlC,cAAA;AACU,aAAA,WAA+C;AAC/C,aAAA,UAA6C;AAC7C,aAAA,YAAiD;AACjD,aAAA,SAA2C;MA8BrD;MA5BE,sBAAsB,mBAAyC;AAC7D,aAAK,WAAW;AAChB,eAAO;MACT;MAEA,qBAAqB,kBAAuC;AAC1D,aAAK,UAAU;AACf,eAAO;MACT;MAEA,uBAAuB,oBAA2C;AAChE,aAAK,YAAY;AACjB,eAAO;MACT;MAEA,aAAa,UAA8B;AACzC,aAAK,SAAS;AACd,eAAO;MACT;MAEA,QAAK;AACH,eAAO;UACL,mBAAmB,KAAK;UACxB,kBAAkB,KAAK;UACvB,oBAAoB,KAAK;UACzB,UAAU,KAAK;;MAEnB;;AAjCF,IAAAA,SAAA,wBAAA;AA4CA,aAAgB,6BACd,UAAqD;AAErD,aACE,SAAS,sBAAsB,UAC/B,SAAS,kBAAkB,WAAW;IAE1C;AAEA,QAAM,iCAAN,MAAoC;MAWlC,YACU,UACA,cAAwC;AADxC,aAAA,WAAA;AACA,aAAA,eAAA;AATF,aAAA,YAAY;AACZ,aAAA,qBAAqB;AACrB,aAAA,oBAAoB;AACpB,aAAA,iBAAsB;AACtB,aAAA,oBAAoB;AACpB,aAAA,sBAAsB;MAK3B;MAEK,wBAAqB;AAC3B,YAAI,KAAK,mBAAmB;AAC1B,eAAK,aAAa,iBAAiB,KAAK,cAAc;AACtD,eAAK,iBAAiB;AACtB,eAAK,oBAAoB;QAC3B;MACF;MAEQ,0BAAuB;AAC7B,YAAI,KAAK,qBAAqB;AAC5B,eAAK,aAAa,mBAAkB;AACpC,eAAK,sBAAsB;QAC7B;MACF;MAEA,kBAAkB,UAAkB;AAClC,YAAI,KAAK,WAAW;AAClB;QACF;AACA,aAAK,qBAAqB;AAC1B,aAAK,SAAS,kBAAkB,UAAU,yBAAsB;AAC9D,eAAK,qBAAqB;AAC1B,cAAI,KAAK,WAAW;AAClB;UACF;AACA,eAAK,aAAa,kBAAkB,mBAAmB;AACvD,eAAK,sBAAqB;AAC1B,eAAK,wBAAuB;QAC9B,CAAC;MACH;MACA,iBAAiB,SAAY;AAC3B,YAAI,KAAK,WAAW;AAClB;QACF;AACA,aAAK,oBAAoB;AACzB,aAAK,SAAS,iBAAiB,SAAS,SAAM;AAC5C,eAAK,oBAAoB;AACzB,cAAI,KAAK,WAAW;AAClB;UACF;AACA,cAAI,KAAK,oBAAoB;AAC3B,iBAAK,iBAAiB;AACtB,iBAAK,oBAAoB;UAC3B,OAAO;AACL,iBAAK,aAAa,iBAAiB,GAAG;AACtC,iBAAK,wBAAuB;UAC9B;QACF,CAAC;MACH;MACA,qBAAkB;AAChB,YAAI,KAAK,WAAW;AAClB;QACF;AACA,aAAK,SAAS,mBAAmB,MAAK;AACpC,cAAI,KAAK,WAAW;AAClB;UACF;AACA,cAAI,KAAK,sBAAsB,KAAK,mBAAmB;AACrD,iBAAK,sBAAsB;UAC7B,OAAO;AACL,iBAAK,aAAa,mBAAkB;UACtC;QACF,CAAC;MACH;MACA,WAAQ;AACN,aAAK,YAAY;AACjB,aAAK,SAAS,SAAQ;AACtB,aAAK,aAAa,SAAQ;MAC5B;;AAgCF,QAAa,mBAAb,MAA6B;MAA7B,cAAA;AACU,aAAA,QAAoC;AACpC,aAAA,WAA0C;AAC1C,aAAA,UAAwC;AACxC,aAAA,SAAsC;MA8BhD;MA5BE,UAAU,OAAqB;AAC7B,aAAK,QAAQ;AACb,eAAO;MACT;MAEA,iBAAiB,cAA+B;AAC9C,aAAK,WAAW;AAChB,eAAO;MACT;MAEA,gBAAgB,aAA6B;AAC3C,aAAK,UAAU;AACf,eAAO;MACT;MAEA,eAAe,YAA2B;AACxC,aAAK,SAAS;AACd,eAAO;MACT;MAEA,QAAK;AACH,eAAO;UACL,OAAO,KAAK;UACZ,cAAc,KAAK;UACnB,aAAa,KAAK;UAClB,YAAY,KAAK;;MAErB;;AAjCF,IAAAA,SAAA,mBAAA;AAoCA,QAAM,wBAA4C;MAChD,mBAAmB,CAAC,UAAU,SAAQ;AACpC,aAAK,QAAQ;MACf;MACA,kBAAkB,CAAC,SAAS,SAAQ;AAClC,aAAK,OAAO;MACd;MACA,oBAAoB,UAAO;AACzB,aAAI;MACN;MACA,UAAU,MAAK;MAAE;;AAGnB,QAAM,mBAAkC;MACtC,OAAO,UAAO;AACZ,aAAI;MACN;MACA,cAAc,CAAC,UAAU,SAAQ;AAC/B,aAAK,QAAQ;MACf;MACA,aAAa,CAAC,SAAS,SAAQ;AAC7B,aAAK,OAAO;MACd;MACA,YAAY,CAACC,SAAQ,SAAQ;AAC3B,aAAKA,OAAM;MACb;;AA2DF,QAAa,yBAAb,MAAmC;MAQjC,YACU,UACR,WAAqB;;AADb,aAAA,WAAA;AAPF,aAAA,qBAAqB;AACrB,aAAA,eAAe;AACf,aAAA,oBAAoB;AACpB,aAAA,iBAAsB;AACtB,aAAA,yBAA8C;AAC9C,aAAA,gBAA4C;AAKlD,aAAK,YAAY;UACf,QAAO,KAAA,cAAS,QAAT,cAAS,SAAA,SAAT,UAAW,WAAK,QAAA,OAAA,SAAA,KAAI,iBAAiB;UAC5C,eAAc,KAAA,cAAS,QAAT,cAAS,SAAA,SAAT,UAAW,kBAAY,QAAA,OAAA,SAAA,KAAI,iBAAiB;UAC1D,cAAa,KAAA,cAAS,QAAT,cAAS,SAAA,SAAT,UAAW,iBAAW,QAAA,OAAA,SAAA,KAAI,iBAAiB;UACxD,aAAY,KAAA,cAAS,QAAT,cAAS,SAAA,SAAT,UAAW,gBAAU,QAAA,OAAA,SAAA,KAAI,iBAAiB;;MAE1D;MAEQ,wBAAqB;AAC3B,YAAI,KAAK,wBAAwB;AAC/B,eAAK,SAAS,YACZ,KAAK,gBACL,KAAK,sBAAsB;AAE7B,eAAK,iBAAiB;AACtB,eAAK,yBAAyB;QAChC;MACF;MAEQ,uBAAoB;AAC1B,YAAI,KAAK,eAAe;AACtB,eAAK,SAAS,WAAW,KAAK,aAAa;AAC3C,eAAK,gBAAgB;QACvB;MACF;MAEA,MAAM,UAAoC;AACxC,aAAK,UAAU,MAAM,yBAAsB;;AACzC,gBAAM,0BAA8C;YAClD,oBACE,KAAA,wBAAmB,QAAnB,wBAAmB,SAAA,SAAnB,oBAAqB,uBAAiB,QAAA,OAAA,SAAA,KACtC,sBAAsB;YACxB,mBACE,KAAA,wBAAmB,QAAnB,wBAAmB,SAAA,SAAnB,oBAAqB,sBAAgB,QAAA,OAAA,SAAA,KACrC,sBAAsB;YACxB,qBACE,KAAA,wBAAmB,QAAnB,wBAAmB,SAAA,SAAnB,oBAAqB,wBAAkB,QAAA,OAAA,SAAA,KACvC,sBAAsB;YACxB,WACE,KAAA,wBAAmB,QAAnB,wBAAmB,SAAA,SAAnB,oBAAqB,cAAQ,QAAA,OAAA,SAAA,KAAI,sBAAsB;;AAE3D,gBAAM,4BAA4B,IAAI,+BACpC,yBACA,QAAQ;AAEV,eAAK,SAAS,MAAM,yBAAyB;QAC/C,CAAC;MACH;MACA,aAAa,UAAkB;AAC7B,aAAK,qBAAqB;AAC1B,aAAK,eAAe;AACpB,aAAK,UAAU,aAAa,UAAU,yBAAsB;AAC1D,eAAK,qBAAqB;AAC1B,eAAK,SAAS,aAAa,mBAAmB;AAC9C,eAAK,sBAAqB;AAC1B,eAAK,qBAAoB;QAC3B,CAAC;MACH;MACA,YAAY,SAAc,UAAoB;AAC5C,aAAK,oBAAoB;AACzB,YAAI,CAAC,KAAK,cAAc;AACtB,eAAK,aAAa,IAAI,WAAA,SAAQ,CAAE;QAClC;AACA,aAAK,UAAU,YAAY,SAAS,wBAAqB;AACvD,eAAK,oBAAoB;AACzB,cAAI,KAAK,oBAAoB;AAC3B,iBAAK,iBAAiB;AACtB,iBAAK,yBAAyB;UAChC,OAAO;AACL,iBAAK,SAAS,YAAY,oBAAoB,QAAQ;UACxD;QACF,CAAC;MACH;MACA,WAAWA,SAA2B;AACpC,aAAK,UAAU,WAAWA,SAAQ,uBAAoB;AACpD,cAAI,KAAK,sBAAsB,KAAK,mBAAmB;AACrD,iBAAK,gBAAgB;UACvB,OAAO;AACL,iBAAK,SAAS,WAAW,iBAAiB;UAC5C;QACF,CAAC;MACH;MACA,YAAS;AACP,aAAK,SAAS,UAAS;MACzB;MACA,UAAO;AACL,eAAO,KAAK,SAAS,QAAO;MAC9B;MACA,cAAW;AACT,eAAO,KAAK,SAAS,YAAW;MAClC;MACA,UAAO;AACL,eAAO,KAAK,SAAS,QAAO;MAC9B;MACA,iBAAc;AACZ,eAAO,KAAK,SAAS,eAAc;MACrC;MACA,oBAAiB;AACf,eAAO,KAAK,SAAS,kBAAiB;MACxC;MACA,qBAAkB;AAChB,eAAO,KAAK,SAAS,mBAAkB;MACzC;;AAlHF,IAAAD,SAAA,yBAAA;AAgIA,QAAM,8BAA8B;AACpC,QAAM,uBAAuB;AAC7B,QAAM,sBAAsB;AAC5B,QAAM,qBAAqB;AAC3B,QAAM,sBAAsB;AAC5B,QAAM,iBAAiB;AACvB,QAAM,oBAAgD;MACpD,GAAG;MACH,GAAG;MACH,GAAG;MACH,GAAG;MACH,GAAG;MACH,GAAG;;AAGL,QAAM,4BAA4B;;;MAGhC,CAAC,2BAA2B,GAAG;MAC/B,CAAC,oBAAoB,GAAG;;AAE1B,QAAM,yBAAyB;MAC7B,CAAC,MAAM,UAAU,mBAAmB,GAAG,MAAM,UAAU;MACvD,CAAC,MAAM,UAAU,yBAAyB,GAAG;;AAE/C,QAAM,yBAAyB;MAC7B,iBAAiB;;AAWnB,QAAa,6BAAb,MAAuC;MAwBrC,YACmB,QACjB,SACiB,kBACA,SACjB,SAAuB;;AAJN,aAAA,SAAA;AAEA,aAAA,mBAAA;AACA,aAAA,UAAA;AAzBX,aAAA,WAA8C;AAE9C,aAAA,gBAAuC;AACvC,aAAA,WAAqB;AACrB,aAAA,qBAA6B,YAAA;AAC7B,aAAA,wBAAgC,YAAA;AAChC,aAAA,YAAY;AACZ,aAAA,eAAe;AACf,aAAA,eAAe;AACf,aAAA,iBAAiB;AACjB,aAAA,mBAAmB;AAEnB,aAAA,YAA8B,CAAA;AAC9B,aAAA,gBAAgB;AAChB,aAAA,oBAAoB;AACpB,aAAA,cAAc;AAGd,aAAA,kBAAkB,IAAI,OAAA,yBAAwB;AAUpD,aAAK,OAAO,KAAK,SAAS,CAAC,QAA4B;QAMvD,CAAC;AAED,aAAK,OAAO,KAAK,SAAS,MAAK;;AAC7B,gBACE,yBACEE,MAAA,KAAK,aAAO,QAAAA,QAAA,SAAA,SAAAA,IAAE,QACd,iCACA,KAAK,OAAO,OAAO;AAGvB,cAAI,KAAK,oBAAoB,CAAC,KAAK,aAAa;AAC9C,iBAAK,cAAc;AACnB,iBAAK,iBAAiB,YAAY,KAAK;AACvC,iBAAK,iBAAiB,UAAU;cAC9B,MAAM,YAAA,OAAO;cACb,SAAS;cACT,UAAU;aACX;UACH;AAEA,eAAK,eAAc;QACrB,CAAC;AAED,aAAK,OAAO,GAAG,QAAQ,CAAC,SAAgB;AACtC,eAAK,gBAAgB,IAAI;QAC3B,CAAC;AACD,aAAK,OAAO,MAAK;AAEjB,aAAK,OAAO,GAAG,OAAO,MAAK;AACzB,eAAK,eAAc;QACrB,CAAC;AAED,YAAI,kCAAkC,SAAS;AAC7C,eAAK,qBAAqB,QAAQ,8BAA8B;QAClE;AACA,YAAI,qCAAqC,SAAS;AAChD,eAAK,wBAAwB,QAAQ,iCAAiC;QACxE;AAEA,aAAK,QAAO,KAAA,QAAQ,YAAY,OAAC,QAAA,OAAA,SAAA,KAAI,QAAQ;AAC7C,aAAK,UAAU,IAAI,iBAAA,cAAc,KAAK,qBAAqB;AAE3D,cAAM,WAAW,WAAA,SAAS,iBAAiB,OAAO;AAElD,YAAI,QAAQ,gBAAgB,WAAW,GAAG;AACxC,gBACE,gBACE,KAAK,QAAQ,OACb,uBACA,KAAK,UAAU,SAAS,OAAM,CAAE,CAAC;QAEvC;AAEA,cAAM,gBAAgB,SAAS,IAAI,mBAAmB;AAEtD,YAAI,cAAc,SAAS,GAAG;AAC5B,eAAK,oBAAoB,cAAc,CAAC,CAAW;QACrD;AAEA,cAAM,iBAAiB,SAAS,IAAI,oBAAoB;AAExD,YAAI,eAAe,SAAS,GAAG;AAC7B,eAAK,mBAAmB,eAAe,CAAC;QAC1C;AAGA,iBAAS,OAAO,mBAAmB;AACnC,iBAAS,OAAO,oBAAoB;AACpC,iBAAS,OAAO,2BAA2B;AAC3C,iBAAS,OAAO,MAAM,UAAU,4BAA4B;AAC5D,iBAAS,OAAO,MAAM,UAAU,eAAe;AAC/C,iBAAS,OAAO,MAAM,UAAU,yBAAyB;AACzD,aAAK,WAAW;AAEhB,cAAM,UAAS,KAAA,OAAO,aAAO,QAAA,OAAA,SAAA,SAAA,GAAE;AAC/B,aAAK,iBAAiB;UACpB,cAAc,WAAM,QAAN,WAAM,SAAA,SAAN,OAAQ;UACtB,WAAW,WAAM,QAAN,WAAM,SAAA,SAAN,OAAQ;UACnB,eAAe,WAAM,QAAN,WAAM,SAAA,SAAN,OAAQ;UACvB,YAAY,WAAM,QAAN,WAAM,SAAA,SAAN,OAAQ;;AAEtB,aAAK,oBAAoB,CAAC,CAAC,QAAQ,mCAAmC;MACxE;MAEQ,oBAAoB,eAAqB;AAC/C,cAAM,QAAQ,cAAc,SAAQ,EAAG,MAAM,cAAc;AAE3D,YAAI,UAAU,MAAM;AAClB,gBAAMD,UAA8B;YAClC,MAAM,YAAA,OAAO;YACb,SAAS,WAAW,mBAAmB,WAAW,aAAa;YAC/D,UAAU;;AAGZ,kBAAQ,SAAS,MAAK;AACpB,iBAAK,WAAWA,OAAM;UACxB,CAAC;AACD;QACF;AAEA,cAAM,UAAW,CAAC,MAAM,CAAC,IAAI,kBAAkB,MAAM,CAAC,CAAC,IAAK;AAE5D,cAAM,MAAM,oBAAI,KAAI;AACpB,aAAK,WAAW,IAAI,gBAAgB,IAAI,gBAAe,IAAK,OAAO;AACnE,aAAK,gBAAgB,WAAW,MAAK;AACnC,gBAAMA,UAA8B;YAClC,MAAM,YAAA,OAAO;YACb,SAAS;YACT,UAAU;;AAEZ,eAAK,WAAWA,OAAM;QACxB,GAAG,OAAO;MACZ;MAEQ,iBAAc;AAGpB,YAAI,CAAC,KAAK,cAAc,KAAK,OAAO,aAAa,KAAK,OAAO,SAAS;AACpE,eAAK,eAAc;AACnB,eAAK,YAAY;QACnB;AACA,eAAO,KAAK;MACd;MACQ,iBAAc;AACpB,YAAI,KAAK,gBAAgB;AACvB;QACF;AACA,aAAK,iBAAiB;AACtB,aAAK,YAAY;AACjB,gBAAQ,SAAS,MAAK;;AACpB,WAAA,KAAA,KAAK,cAAQ,QAAA,OAAA,SAAA,SAAA,GAAE,SAAQ;QACzB,CAAC;AACD,YAAI,KAAK,eAAe;AACtB,uBAAa,KAAK,aAAa;QACjC;AAEA,aAAK,OAAO,OAAM;MACpB;;;;;;MAOQ,oBAAiB;AACvB,YAAI,CAAC,KAAK,cAAc;AACtB,eAAK,aAAa,IAAI,WAAA,SAAQ,CAAE;QAClC;MACF;;;;;;MAOQ,iBAAiB,OAAU;AACjC,cAAM,gBAAgB,KAAK,QAAQ,UAAU,KAAK;AAClD,cAAM,aAAa,cAAc;AACjC,cAAM,SAAS,OAAO,YAAY,aAAa,CAAC;AAGhD,eAAO,WAAW,GAAG,CAAC;AACtB,eAAO,cAAc,YAAY,CAAC;AAClC,sBAAc,KAAK,QAAQ,CAAC;AAC5B,eAAO;MACT;MAEQ,kBACN,SACA,UAAgB;AAEhB,cAAM,kBAAkB,QAAQ,SAAS,CAAC;AAC1C,YAAI,aAAa,YAAY;AAC3B,iBAAO;QACT,WAAW,aAAa,aAAa,aAAa,QAAQ;AACxD,cAAI;AACJ,cAAI,aAAa,WAAW;AAC1B,2BAAe,KAAK,cAAa;UACnC,OAAO;AACL,2BAAe,KAAK,aAAY;UAClC;AACA,iBAAO,IAAI,QAAQ,CAACE,UAAS,WAAU;AACrC,gBAAI,cAAc;AAClB,kBAAM,eAAyB,CAAA;AAC/B,yBAAa,GAAG,QAAQ,CAAC,UAAiB;AACxC,2BAAa,KAAK,KAAK;AACvB,6BAAe,MAAM;AACrB,kBAAI,KAAK,0BAA0B,MAAM,cAAc,KAAK,uBAAuB;AACjF,6BAAa,QAAO;AACpB,uBAAO;kBACL,MAAM,YAAA,OAAO;kBACb,SAAS,4DAA4D,KAAK,qBAAqB;iBAChG;cACH;YACF,CAAC;AACD,yBAAa,GAAG,OAAO,MAAK;AAC1B,cAAAA,SAAQ,OAAO,OAAO,YAAY,CAAC;YACrC,CAAC;AACD,yBAAa,MAAM,eAAe;AAClC,yBAAa,IAAG;UAClB,CAAC;QACH,OAAO;AACL,iBAAO,QAAQ,OAAO;YACpB,MAAM,YAAA,OAAO;YACb,SAAS,0DAA0D,QAAQ;WAC5E;QACH;MACF;MAEQ,MAAM,uBAAuB,YAA0B;AAC7D,YAAI,WAAW,SAAS,cAAc;AACpC,gBAAM,IAAI,MAAM,6BAA6B,WAAW,IAAI,EAAE;QAChE;AAEA,cAAM,aAAa,WAAW,kBAAmB,UAAU,CAAC,MAAM;AAClE,cAAM,4BAA4B,aAC9B,KAAK,mBACL;AACJ,YAAI;AACJ,YAAI;AACF,gCAAsB,MAAM,KAAK,kBAC/B,WAAW,mBACX,yBAAyB;QAE7B,SAAS,KAAK;AACZ,eAAK,WAAW,GAA0B;AAC1C;QACF;AACA,YAAI;AACF,qBAAW,gBAAgB,KAAK,QAAQ,YAAY,mBAAmB;QACzE,SAAS,KAAK;AACZ,eAAK,WAAW;YACd,MAAM,YAAA,OAAO;YACb,SAAS,gCAAiC,IAAc,OAAO;WAChE;AACD;QACF;AACA,mBAAW,OAAO;AAClB,aAAK,qBAAoB;MAC3B;MAEQ,uBAAoB;AAC1B,YACE,KAAK,YACL,KAAK,iBACL,KAAK,UAAU,SAAS,KACxB,KAAK,UAAU,CAAC,EAAE,SAAS,cAC3B;AACA,eAAK,gBAAgB;AACrB,gBAAM,iBAAiB,KAAK,UAAU,MAAK;AAC3C,cAAI,eAAe,SAAS,YAAY;AACtC,iBAAK,SAAS,iBAAiB,eAAe,aAAa;UAC7D,OAAO;AAEL,iBAAK,SAAS,mBAAkB;UAClC;QACF;MACF;MAEQ,gBAAgB,MAAY;;AAClC,YAAI,KAAK,eAAc,GAAI;AACzB;QACF;AACA,cACE,gBACE,KAAK,QAAQ,OACb,kCACA,KAAK,MAAM;AAEf,YAAI;AACJ,YAAI;AACF,wBAAc,KAAK,QAAQ,MAAM,IAAI;QACvC,SAAS,GAAG;AACV,eAAK,WAAW,EAAE,MAAM,YAAA,OAAO,oBAAoB,SAAU,EAAY,QAAO,CAAE;AAClF;QACF;AAEA,mBAAW,gBAAgB,aAAa;AACtC,eAAK,OAAO,MAAK;AACjB,gBAAM,aAA6B;YACjC,MAAM;YACN,mBAAmB;YACnB,eAAe;;AAEjB,eAAK,UAAU,KAAK,UAAU;AAC9B,eAAK,uBAAuB,UAAU;AACtC,WAAA,KAAA,KAAK,sBAAgB,QAAA,OAAA,SAAA,SAAA,GAAE,mBAAkB;QAC3C;MACF;MACQ,iBAAc;AACpB,aAAK,UAAU,KAAK;UAClB,MAAM;UACN,mBAAmB;UACnB,eAAe;SAChB;AACD,aAAK,oBAAoB;AACzB,aAAK,qBAAoB;MAC3B;MACA,MAAM,UAAoC;AACxC,cAAM,gBAAgB,KAAK,QAAQ,OAAO,eAAe;AACzD,YAAI,KAAK,eAAc,GAAI;AACzB;QACF;AACA,aAAK,WAAW;AAChB,iBAAS,kBAAkB,KAAK,QAAQ;MAC1C;MACA,aAAa,UAAkB;AAC7B,YAAI,KAAK,eAAc,GAAI;AACzB;QACF;AAEA,YAAI,KAAK,cAAc;AACrB;QACF;AAEA,aAAK,eAAe;AACpB,cAAMC,UAAS,WAAW,SAAS,eAAc,IAAK;AACtD,cAAM,UAAO,OAAA,OAAA,OAAA,OAAA,OAAA,OAAA,CAAA,GACR,sBAAsB,GACtB,yBAAyB,GACzBA,OAAM;AAEX,aAAK,OAAO,QAAQ,SAAS,sBAAsB;MACrD;MACA,YAAY,SAAc,UAAoB;AAC5C,YAAI,KAAK,eAAc,GAAI;AACzB;QACF;AACA,YAAI;AACJ,YAAI;AACF,qBAAW,KAAK,iBAAiB,OAAO;QAC1C,SAAS,GAAG;AACV,eAAK,WAAW;YACd,MAAM,YAAA,OAAO;YACb,SAAS,gCAA+B,GAAA,QAAA,iBAAgB,CAAC,CAAC;YAC1D,UAAU;WACX;AACD;QACF;AAEA,YACE,KAAK,uBAAuB,MAC5B,SAAS,SAAS,IAAI,KAAK,oBAC3B;AACA,eAAK,WAAW;YACd,MAAM,YAAA,OAAO;YACb,SAAS,iCAAiC,SAAS,MAAM,QAAQ,KAAK,kBAAkB;YACxF,UAAU;WACX;AACD;QACF;AACA,aAAK,kBAAiB;AACtB,cACE,gBACE,KAAK,QAAQ,OACb,8BACA,SAAS,MAAM;AAEnB,aAAK,OAAO,MAAM,UAAU,WAAQ;;AAClC,cAAI,OAAO;AACT,iBAAK,WAAW;cACd,MAAM,YAAA,OAAO;cACb,SAAS,2BAA0B,GAAA,QAAA,iBAAgB,KAAK,CAAC;cACzD,UAAU;aACX;AACD;UACF;AACA,WAAA,KAAA,KAAK,sBAAgB,QAAA,OAAA,SAAA,SAAA,GAAE,eAAc;AACrC,mBAAQ;QACV,CAAC;MACH;MACA,WAAWH,SAA2B;;AACpC,YAAI,KAAK,eAAc,GAAI;AACzB;QACF;AAEA,cACE,yBACE,KAAA,KAAK,aAAO,QAAA,OAAA,SAAA,SAAA,GAAE,QACd,8BACA,YAAA,OAAOA,QAAO,IAAI,IAClB,eACAA,QAAO,OAAO;AAGlB,cAAM,kBAAiB,MAAA,KAAAA,QAAO,cAAQ,QAAA,OAAA,SAAA,SAAA,GAAE,MAAK,OAAE,QAAA,OAAA,SAAA,KAAI,IAAI,WAAA,SAAQ;AAC/D,YAAI,KAAK,mBAAmB;AAC1B,yBAAe,IAAI,OAAA,qBAAqB,KAAK,gBAAgB,UAAS,CAAE;QAC1E;AAEA,YAAI,KAAK,cAAc;AACrB,cAAI,CAAC,KAAK,cAAc;AACtB,iBAAK,eAAe;AACpB,iBAAK,OAAO,KAAK,gBAAgB,MAAK;AACpC,kBAAI,KAAK,oBAAoB,CAAC,KAAK,aAAa;AAC9C,qBAAK,cAAc;AACnB,qBAAK,iBAAiB,YAAY,IAAI;AACtC,qBAAK,iBAAiB,UAAUA,OAAM;cACxC;AACA,oBAAM,iBAAc,OAAA,OAAA,EAClB,CAAC,kBAAkB,GAAGA,QAAO,MAC7B,CAAC,mBAAmB,GAAG,UAAUA,QAAO,OAAO,EAAC,GAC7C,eAAe,eAAc,CAAE;AAGpC,mBAAK,OAAO,aAAa,cAAc;AACvC,mBAAK,eAAc;YACrB,CAAC;AACD,iBAAK,OAAO,IAAG;UACjB,OAAO;AACL,iBAAK,eAAc;UACrB;QACF,OAAO;AACL,cAAI,KAAK,oBAAoB,CAAC,KAAK,aAAa;AAC9C,iBAAK,cAAc;AACnB,iBAAK,iBAAiB,YAAY,IAAI;AACtC,iBAAK,iBAAiB,UAAUA,OAAM;UACxC;AAEA,gBAAM,iBAAc,OAAA,OAAA,OAAA,OAAA,EAClB,CAAC,kBAAkB,GAAGA,QAAO,MAC7B,CAAC,mBAAmB,GAAG,UAAUA,QAAO,OAAO,EAAC,GAC7C,sBAAsB,GACtB,eAAe,eAAc,CAAE;AAEpC,eAAK,OAAO,QAAQ,gBAAgB,EAAE,WAAW,KAAI,CAAE;AACvD,eAAK,eAAc;QACrB;MACF;MACA,YAAS;AACP,cAAM,gBAAgB,KAAK,QAAQ,OAAO,mBAAmB;AAC7D,YAAI,KAAK,eAAc,GAAI;AACzB;QACF;AACA,aAAK,gBAAgB;AACrB,YAAI,KAAK,UAAU,WAAW,GAAG;AAC/B,cAAI,CAAC,KAAK,mBAAmB;AAC3B,iBAAK,OAAO,OAAM;UACpB;QACF,OAAO;AACL,eAAK,qBAAoB;QAC3B;MACF;MACA,UAAO;;AACL,cAAM,UAAS,KAAA,KAAK,OAAO,aAAO,QAAA,OAAA,SAAA,SAAA,GAAE;AACpC,YAAI,WAAM,QAAN,WAAM,SAAA,SAAN,OAAQ,eAAe;AACzB,cAAI,OAAO,YAAY;AACrB,mBAAO,GAAG,OAAO,aAAa,IAAI,OAAO,UAAU;UACrD,OAAO;AACL,mBAAO,OAAO;UAChB;QACF,OAAO;AACL,iBAAO;QACT;MACF;MACA,cAAW;AACT,eAAO,KAAK;MACd;MACA,UAAO;AACL,eAAO,KAAK;MACd;MACA,iBAAc;;AACZ,cAAI,KAAA,KAAK,OAAO,aAAO,QAAA,OAAA,SAAA,SAAA,GAAE,mBAAkB,MAAA,WAAW;AACpD,gBAAM,kBAAkB,KAAK,OAAO,QAAQ,OAAO,mBAAkB;AACrE,iBAAO;YACL,uBAAuB;YACvB,oBAAoB,gBAAgB,MAAM,kBAAkB;;QAEhE,OAAO;AACL,iBAAO,CAAA;QACT;MACF;MACA,oBAAiB;AACf,eAAO,KAAK;MACd;MACA,qBAAkB;AAChB,eAAO,KAAK;MACd;;AAlgBF,IAAAD,SAAA,6BAAA;AAqgBA,aAAgB,0BACd,cACA,QACA,SACA,kBACA,SACA,SAAuB;AAEvB,YAAM,mBAAqD;QACzD,MAAM,QAAQ;QACd,eAAe,QAAQ,SAAS,kBAAkB,QAAQ,SAAS;QACnE,gBAAgB,QAAQ,SAAS,kBAAkB,QAAQ,SAAS;QACpE,oBAAoB,QAAQ;QAC5B,mBAAmB,QAAQ;;AAE7B,YAAM,WAAW,IAAI,2BACnB,QACA,SACA,kBACA,SACA,OAAO;AAET,aAAO,aAAa,OAClB,CAAC,MAAuC,gBAAkC;AACxE,eAAO,YAAY,kBAAkB,IAAI;MAC3C,GACA,QAAQ;IAEZ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC7hCA,QAAA,QAAA,QAAA,OAAA;AACA,QAAAK,QAAA,QAAA,MAAA;AAGA,QAAA,cAAA;AAGA,QAAA,gBAAA;AAmBA,QAAA,uBAAA;AAEA,QAAA,aAAA;AAKA,QAAA,UAAA;AACA,QAAA,uBAAA;AAMA,QAAA,eAAA;AAOA,QAAA,aAAA;AAiBA,QAAA,wBAAA;AAUA,QAAM,8BAA8B,EAAE,KAAK;AAC3C,QAAM,wBAAwB,EAAE,KAAK;AACrC,QAAM,uBAAuB;AAC7B,QAAM,yBAAyB,EAAE,KAAK;AAEtC,QAAM,EAAE,kBAAiB,IAAK,MAAM;AAEpC,QAAM,cAAc;AACpB,QAAM,UAAU,OAAO,KAAK,SAAS;AAErC,aAAS,gBAAgB,MAAY;AACnC,cAAQ,MAAM,YAAA,aAAa,OAAO,eAAe,IAAI;IACvD;AAeA,aAAS,OAAI;IAAU;AAOvB,aAAS,UAAU,SAAe;AAChC,aAAO,SACL,QACA,SAGC;AAED,eAAOA,MAAK,UAAU,QAAQ,OAAO;MACvC;IACF;AAEA,aAAS,+BACP,YAAkB;AAElB,aAAO;QACL,MAAM,YAAA,OAAO;QACb,SAAS,4CAA4C,UAAU;;IAEnE;AAaA,aAAS,kBAAkB,aAA0B,YAAkB;AACrE,YAAM,8BACJ,+BAA+B,UAAU;AAC3C,cAAQ,aAAa;QACnB,KAAK;AACH,iBAAO,CACL,MACA,aACE;AACF,qBAAS,6BAA6C,IAAI;UAC5D;QACF,KAAK;AACH,iBAAO,CACL,MACA,aACE;AACF,qBAAS,6BAA6C,IAAI;UAC5D;QACF,KAAK;AACH,iBAAO,CAAC,SAAwC;AAC9C,iBAAK,KAAK,SAAS,2BAA2B;UAChD;QACF,KAAK;AACH,iBAAO,CAAC,SAAsC;AAC5C,iBAAK,KAAK,SAAS,2BAA2B;UAChD;QACF;AACE,gBAAM,IAAI,MAAM,uBAAuB,WAAW,EAAE;MACxD;IACF;QAkFa,UAAM,MAAA;;;;wBAAN,OAAM;QAkDjB,YAAY,SAAuB;;AAjD3B,eAAA,cADG,kBAAA,MAAA,0BAAA,GACkC,oBAAI,IAAG;AAC5C,eAAA,eAAqD,oBAAI,IAAG;AAC5D,eAAA,sBAAsB,oBAAI,IAAG;AAK7B,eAAA,WAAwC,oBAAI,IAAG;AAI/C,eAAA,WAAW,oBAAI,IAAG;AAKlB,eAAA,UAAU;AACV,eAAA,WAAW;AAEX,eAAA,sBAAsB;AAGb,eAAA,kBAA2B;AA4B1C,eAAK,UAAU,YAAO,QAAP,YAAO,SAAP,UAAW,CAAA;AAC1B,cAAI,KAAK,QAAQ,sBAAsB,MAAM,GAAG;AAC9C,iBAAK,kBAAkB;AACvB,iBAAK,gBAAgB,IAAI,WAAA,kBAAiB;AAC1C,iBAAK,cAAc,IAAI,WAAA,wBAAuB;AAC9C,iBAAK,0BAA0B,IAAI,WAAA,4BAA2B;AAC9D,iBAAK,yBAAyB,IAAI,WAAA,4BAA2B;UAC/D,OAAO;AACL,iBAAK,gBAAgB,IAAI,WAAA,cAAa;AACtC,iBAAK,cAAc,IAAI,WAAA,oBAAmB;AAC1C,iBAAK,0BAA0B,IAAI,WAAA,wBAAuB;AAC1D,iBAAK,yBAAyB,IAAI,WAAA,wBAAuB;UAC3D;AAEA,eAAK,eAAc,GAAA,WAAA,wBACjB,UACA,MAAM,KAAK,gBAAe,GAC1B,KAAK,eAAe;AAGtB,eAAK,cAAc,SAAS,WAAW,gBAAgB;AACvD,eAAK,sBACH,KAAA,KAAK,QAAQ,4BAA4B,OAAC,QAAA,OAAA,SAAA,KAAI;AAChD,eAAK,2BACH,KAAA,KAAK,QAAQ,kCAAkC,OAAC,QAAA,OAAA,SAAA,KAChD;AACF,eAAK,mBACH,KAAA,KAAK,QAAQ,wBAAwB,OAAC,QAAA,OAAA,SAAA,KAAI;AAC5C,eAAK,sBACH,KAAA,KAAK,QAAQ,2BAA2B,OAAC,QAAA,OAAA,SAAA,KAAI;AAC/C,eAAK,sBACH,KAAA,KAAK,QAAQ,6BAA6B,OAAC,QAAA,OAAA,SAAA,KAAI;AAEjD,eAAK,sBAAsB;YACzB,0BAA0B,OAAO;;AAEnC,cAAI,kCAAkC,KAAK,SAAS;AAClD,iBAAK,oBAAoB,mBACvB,KAAK,QAAQ,8BAA8B;UAC/C,OAAO;AAKL,iBAAK,oBAAoB,mBAAmB,OAAO;UACrD;AACA,cAAI,iCAAiC,KAAK,SAAS;AACjD,iBAAK,oBAAoB,WAAW;cAClC,sBAAsB,KAAK,QAAQ,6BAA6B;;UAEpE;AACA,eAAK,gBAAe,KAAA,KAAK,QAAQ,kBAAY,QAAA,OAAA,SAAA,KAAI,CAAA;AACjD,eAAK,MAAM,oBAAoB;QACjC;QAEQ,kBAAe;AACrB,iBAAO;YACL,OAAO,KAAK;YACZ,aAAa,KAAK;YAClB,kBAAkB,KAAK,wBAAwB,cAAa;YAC5D,iBAAiB,KAAK,uBAAuB,cAAa;;QAE9D;QAEQ,uBACN,SAAiC;;AAEjC,gBAAM,cAAc,KAAK,SAAS,IAAI,OAAO;AAC7C,gBAAM,gBAAgB,QAAQ;AAC9B,gBAAM,gBAAgB,cAAc,iBAChC,GAAA,qBAAA,2BACE,cAAc,eACd,cAAc,UAAU,IAE1B;AACJ,gBAAM,eAAe,cAAc,gBAC/B,GAAA,qBAAA,2BACE,cAAc,cACd,cAAc,SAAS,IAEzB;AACJ,cAAI;AACJ,cAAI,QAAQ,WAAW;AACrB,kBAAM,YAAuB;AAC7B,kBAAM,aACJ,UAAU,UAAS;AACrB,kBAAM,cAAc,UAAU,eAAc;AAC5C,kBAAM,kBAAkB,UAAU,mBAAkB;AACpD,sBAAU;cACR,0BAAyB,KAAA,WAAW,kBAAY,QAAA,OAAA,SAAA,KAAI;cACpD,sBAAsB,WAAW,eAAe,OAAO,WAAW;cAClE,kBACE,eAAe,SAAS,cAAc,YAAY,MAAM;cAC1D,mBACE,mBAAmB,SAAS,kBACxB,gBAAgB,MAChB;;UAEV,OAAO;AACL,sBAAU;UACZ;AACA,gBAAM,aAAyB;YAC7B;YACA;YACA,UAAU;YACV,YAAY;YACZ,gBAAgB,YAAY,cAAc;YAC1C,kBAAkB,YAAY,cAAc;YAC5C,eAAe,YAAY,cAAc;YACzC,cAAc,YAAY;YAC1B,kBAAkB,YAAY;YAC9B,gBAAgB,YAAY;YAC5B,iCAAiC;YACjC,kCACE,YAAY,cAAc;YAC5B,0BAA0B,YAAY;YACtC,8BAA8B,YAAY;YAC1C,yBAAwB,KAAA,QAAQ,MAAM,qBAAe,QAAA,OAAA,SAAA,KAAI;YACzD,0BAAyB,KAAA,QAAQ,MAAM,sBAAgB,QAAA,OAAA,SAAA,KAAI;;AAE7D,iBAAO;QACT;QAEQ,MAAM,MAAY;AACxB,kBAAQ,MACN,YAAA,aAAa,OACb,aACA,MAAM,KAAK,YAAY,KAAK,OAAO,IAAI;QAE3C;QAEQ,eAAe,MAAY;AACjC,kBAAQ,MACN,YAAA,aAAa,OACb,aACA,MAAM,KAAK,YAAY,KAAK,OAAO,IAAI;QAE3C;QAEA,kBAAe;AACb,gBAAM,IAAI,MAAM,2CAA2C;QAC7D;QAEA,WACE,SACA,gBAA4C;AAE5C,cACE,YAAY,QACZ,OAAO,YAAY,YACnB,mBAAmB,QACnB,OAAO,mBAAmB,UAC1B;AACA,kBAAM,IAAI,MAAM,gDAAgD;UAClE;AAEA,gBAAM,cAAc,OAAO,KAAK,OAAO;AAEvC,cAAI,YAAY,WAAW,GAAG;AAC5B,kBAAM,IAAI,MAAM,yCAAyC;UAC3D;AAEA,sBAAY,QAAQ,UAAO;AACzB,kBAAM,QAAQ,QAAQ,IAAI;AAC1B,gBAAI;AAEJ,gBAAI,MAAM,eAAe;AACvB,kBAAI,MAAM,gBAAgB;AACxB,6BAAa;cACf,OAAO;AACL,6BAAa;cACf;YACF,OAAO;AACL,kBAAI,MAAM,gBAAgB;AACxB,6BAAa;cACf,OAAO;AACL,6BAAa;cACf;YACF;AAEA,gBAAI,SAAS,eAAe,IAAI;AAChC,gBAAI;AAEJ,gBAAI,WAAW,UAAa,OAAO,MAAM,iBAAiB,UAAU;AAClE,uBAAS,eAAe,MAAM,YAAY;YAC5C;AAEA,gBAAI,WAAW,QAAW;AACxB,qBAAO,OAAO,KAAK,cAAc;YACnC,OAAO;AACL,qBAAO,kBAAkB,YAAY,IAAI;YAC3C;AAEA,kBAAM,UAAU,KAAK,SACnB,MAAM,MACN,MACA,MAAM,mBACN,MAAM,oBACN,UAAU;AAGZ,gBAAI,YAAY,OAAO;AACrB,oBAAM,IAAI,MAAM,sBAAsB,MAAM,IAAI,oBAAoB;YACtE;UACF,CAAC;QACH;QAEA,cAAc,SAA0B;AACtC,cAAI,YAAY,QAAQ,OAAO,YAAY,UAAU;AACnD,kBAAM,IAAI,MAAM,6CAA6C;UAC/D;AAEA,gBAAM,cAAc,OAAO,KAAK,OAAO;AACvC,sBAAY,QAAQ,UAAO;AACzB,kBAAM,QAAQ,QAAQ,IAAI;AAC1B,iBAAK,WAAW,MAAM,IAAI;UAC5B,CAAC;QACH;QAEA,KAAK,MAAc,OAAwB;AACzC,gBAAM,IAAI,MAAM,0CAA0C;QAC5D;;;;;;QAOU,uCAAuC,cAA+B;AAC9E,kBAAO,GAAA,WAAA,yBACL,GAAA,qBAAA,2BAA0B,YAAY,GACtC,MAAK;AACH,mBAAO;cACL,cAAc;cACd,eAAe;cACf,UAAU;cACV,YAAY;cACZ,gBAAgB;cAChB,kBAAkB;cAClB,eAAe;cACf,cAAc;cACd,kBAAkB;cAClB,gBAAgB;cAChB,iCAAiC;cACjC,kCAAkC;cAClC,0BAA0B;cAC1B,8BAA8B;cAC9B,wBAAwB;cACxB,yBAAyB;;UAE7B,GACA,KAAK,eAAe;QAExB;QAEU,2CAA2C,aAAsB;AACzE,WAAA,GAAA,WAAA,uBAAsB,WAAW;QACnC;QAEQ,kBAAkBC,cAA8B;AACtD,cAAI;AACJ,cAAIA,aAAY,UAAS,GAAI;AAC3B,kBAAM,qBAAqBA,aAAY,uBAAsB;AAC7D,kBAAM,iBAAiBA,aAAY,yBAAwB;AAC3D,kBAAM,sBAAmB,OAAA,OAAA,OAAA,OAAA,OAAA,OAAA,OAAA,OAAA,CAAA,GACpB,KAAK,mBAAmB,GACxB,kBAAkB,GAClB,cAAc,GAAA,EACjB,aAAa,KAAK,QAAQ,4BAA4B,MAAM,EAAC,CAAA;AAE/D,gBAAI,sBAAsB,mBAAmB;AAC7C,iBAAK,MAAM,gCAAgC,mBAAmB;AAC9D,0BAAc,MAAM,mBAAmB,mBAAmB;AAC1D,wBAAY,gBAAgB,cAAc,CAAC,WAAkB;AAC3D,kBAAI,CAAC,qBAAqB;AACxB,qBAAK,MAAM,6BAA6B,KAAK,UAAU,OAAO,QAAO,CAAE,IAAI,8BAA8B;AACzG,uBAAO,QAAO;cAChB;YACF,CAAC;AACD,wBAAY,GAAG,oBAAoB,CAAC,WAAqB;AAGvD,qBAAO,GAAG,SAAS,CAAC,MAAY;AAC9B,qBAAK,MACH,mDAAmD,EAAE,OAAO;cAEhE,CAAC;YACH,CAAC;AACD,kBAAM,eAAqC,aAAU;AACnD,kBAAI,SAAS;AACX,sBAAM,eAAe;AACrB,oBAAI;AACF,+BAAa,iBAAiB,OAAO;gBACvC,SAAS,GAAG;AACV,0BAAQ,IAAI,YAAA,aAAa,OAAO,6CAA8C,EAAY,OAAO;AACjG,4BAAU;gBACZ;cACF;AACA,oCAAsB,YAAY;AAClC,mBAAK,MAAM,oCAAoC,mBAAmB;YACpE;AACA,YAAAA,aAAY,YAAY,YAAY;AACpC,wBAAY,GAAG,SAAS,MAAK;AAC3B,cAAAA,aAAY,eAAe,YAAY;YACzC,CAAC;UACH,OAAO;AACL,0BAAc,MAAM,aAAa,KAAK,mBAAmB;UAC3D;AAEA,sBAAY,WAAW,GAAG,IAAI;AAC9B,eAAK,eAAe,aAAaA,aAAY,iBAAgB,CAAE;AAC/D,iBAAO;QACT;QAEQ,eACN,SACA,iBAA0B;AAE1B,eAAK,MAAM,yBAAwB,GAAA,qBAAA,2BAA0B,OAAO,CAAC;AACrE,gBAAM,cAAc,KAAK,kBAAkB,gBAAgB,WAAW;AACtE,iBAAO,IAAI,QAAiC,CAACC,UAAS,WAAU;AAC9D,kBAAM,UAAU,CAAC,QAAc;AAC7B,mBAAK,MACH,qBACE,GAAA,qBAAA,2BAA0B,OAAO,IACjC,iBACA,IAAI,OAAO;AAEf,cAAAA,SAAQ;gBACN,MAAM,UAAU,UAAU,QAAQ,OAAO;gBACzC,OAAO,IAAI;eACZ;YACH;AAEA,wBAAY,KAAK,SAAS,OAAO;AAEjC,wBAAY,OAAO,SAAS,MAAK;AAC/B,oBAAM,eAAe,YAAY,QAAO;AACxC,kBAAI;AACJ,kBAAI,OAAO,iBAAiB,UAAU;AACpC,yCAAyB;kBACvB,MAAM;;cAEV,OAAO;AACL,yCAAyB;kBACvB,MAAM,aAAa;kBACnB,MAAM,aAAa;;cAEvB;AAEA,oBAAM,cAAc,KAAK,uCACvB,sBAAsB;AAExB,mBAAK,wBAAwB,SAAS,WAAW;AAEjD,mBAAK,aAAa,IAAI,aAAa;gBACjC;gBACA,UAAU,oBAAI,IAAG;gBACjB,iBAAiB;eAClB;AACD,8BAAgB,iBAAiB,IAAI,WAAW;AAChD,mBAAK,MACH,yBACE,GAAA,qBAAA,2BAA0B,sBAAsB,CAAC;AAErD,cAAAA,SAAQ;gBACN,MACE,UAAU,yBAAyB,uBAAuB,OAAO;eACpE;AACD,0BAAY,eAAe,SAAS,OAAO;YAC7C,CAAC;UACH,CAAC;QACH;QAEQ,MAAM,cACZ,aACA,iBAA0B;AAE1B,cAAI,YAAY,WAAW,GAAG;AAC5B,mBAAO;cACL,OAAO;cACP,MAAM;cACN,QAAQ,CAAA;;UAEZ;AACA,eAAI,GAAA,qBAAA,wBAAuB,YAAY,CAAC,CAAC,KAAK,YAAY,CAAC,EAAE,SAAS,GAAG;AAGvE,kBAAM,qBAAqB,MAAM,KAAK,eACpC,YAAY,CAAC,GACb,eAAe;AAEjB,gBAAI,mBAAmB,OAAO;AAG5B,oBAAM,oBAAoB,MAAM,KAAK,cACnC,YAAY,MAAM,CAAC,GACnB,eAAe;AAEjB,qBAAA,OAAA,OAAA,OAAA,OAAA,CAAA,GACK,iBAAiB,GAAA,EACpB,QAAQ,CAAC,mBAAmB,OAAO,GAAG,kBAAkB,MAAM,EAAC,CAAA;YAEnE,OAAO;AACL,oBAAM,gBAAgB,YACnB,MAAM,CAAC,EACP,IAAI,cACH,GAAA,qBAAA,wBAAuB,OAAO,IAC1B,EAAE,MAAM,QAAQ,MAAM,MAAM,mBAAmB,KAAI,IACnD,OAAO;AAEf,oBAAM,oBAAoB,MAAM,QAAQ,IACtC,cAAc,IAAI,aAChB,KAAK,eAAe,SAAS,eAAe,CAAC,CAC9C;AAEH,oBAAM,aAAa,CAAC,oBAAoB,GAAG,iBAAiB;AAC5D,qBAAO;gBACL,OAAO,WAAW,OAAO,YAAU,OAAO,UAAU,MAAS,EAAE;gBAC/D,MAAM,mBAAmB;gBACzB,QAAQ,WACL,OAAO,YAAU,OAAO,KAAK,EAC7B,IAAI,YAAU,OAAO,KAAM;;YAElC;UACF,OAAO;AACL,kBAAM,aAAa,MAAM,QAAQ,IAC/B,YAAY,IAAI,aACd,KAAK,eAAe,SAAS,eAAe,CAAC,CAC9C;AAEH,mBAAO;cACL,OAAO,WAAW,OAAO,YAAU,OAAO,UAAU,MAAS,EAAE;cAC/D,MAAM,WAAW,CAAC,EAAE;cACpB,QAAQ,WACL,OAAO,YAAU,OAAO,KAAK,EAC7B,IAAI,YAAU,OAAO,KAAM;;UAElC;QACF;QAEQ,MAAM,gBACZ,aACA,iBAA0B;AAE1B,gBAAM,aAAa,MAAM,KAAK,cAAc,aAAa,eAAe;AACxE,cAAI,WAAW,QAAQ,GAAG;AACxB,gBAAI,WAAW,QAAQ,YAAY,QAAQ;AACzC,sBAAQ,IACN,YAAA,aAAa,MACb,gBAAgB,WAAW,KAAK,iCAAiC,YAAY,MAAM,WAAW;YAElG;AACA,mBAAO,WAAW;UACpB,OAAO;AACL,kBAAM,cAAc,iCAAiC,YAAY,MAAM;AACvE,oBAAQ,IAAI,YAAA,aAAa,OAAO,WAAW;AAC3C,kBAAM,IAAI,MACR,GAAG,WAAW,aAAa,WAAW,OAAO,KAAK,GAAG,CAAC,GAAG;UAE7D;QACF;QAEQ,YAAY,MAAa;AAC/B,iBAAO,IAAI,QAA6B,CAACA,UAAS,WAAU;AAC1D,gBAAI,iBAAiB;AACrB,kBAAM,mBAAqC,CACzC,cACA,YACA,eACA,mBACE;AACF,kBAAI,gBAAgB;AAClB,uBAAO;cACT;AACA,+BAAiB;AACjB,kBAAI,CAAC,aAAa,IAAI;AACpB,uBAAO,IAAI,MAAM,aAAa,MAAM,OAAO,CAAC;AAC5C,uBAAO;cACT;AACA,oBAAM,cAAe,CAAA,EAA2B,OAC9C,GAAG,aAAa,MAAM,IAAI,cAAY,SAAS,SAAS,CAAC;AAE3D,kBAAI,YAAY,WAAW,GAAG;AAC5B,uBAAO,IAAI,MAAM,kCAAkC,IAAI,EAAE,CAAC;AAC1D,uBAAO;cACT;AACA,cAAAA,SAAQ,WAAW;AACnB,qBAAO;YACT;AACA,kBAAM,YAAW,GAAA,WAAA,gBAAe,MAAM,kBAAkB,KAAK,OAAO;AACpE,qBAAS,iBAAgB;UAC3B,CAAC;QACH;QAEQ,MAAM,SACZ,MACA,iBAA0B;AAE1B,gBAAM,cAAc,MAAM,KAAK,YAAY,IAAI;AAC/C,cAAI,gBAAgB,WAAW;AAC7B,iBAAK,eAAe,eAAe;AACnC,kBAAM,IAAI,MAAM,8CAA8C;UAChE;AACA,gBAAM,aAAa,MAAM,KAAK,gBAAgB,aAAa,eAAe;AAC1E,cAAI,gBAAgB,WAAW;AAC7B,iBAAK,eAAe,eAAe;AACnC,kBAAM,IAAI,MAAM,8CAA8C;UAChE;AACA,iBAAO;QACT;QAEQ,cAAc,MAAY;AAChC,gBAAM,kBAAiB,GAAA,aAAA,UAAS,IAAI;AACpC,cAAI,mBAAmB,MAAM;AAC3B,kBAAM,IAAI,MAAM,yBAAyB,IAAI,GAAG;UAClD;AACA,gBAAM,WAAU,GAAA,WAAA,qBAAoB,cAAc;AAClD,cAAI,YAAY,MAAM;AACpB,kBAAM,IAAI,MAAM,4CAA4C,IAAI,GAAG;UACrE;AACA,iBAAO;QACT;QAEA,UACE,MACA,OACA,UAAqD;AAErD,cAAI,KAAK,UAAU;AACjB,kBAAM,IAAI,MAAM,iCAAiC;UACnD;AACA,cAAI,OAAO,SAAS,UAAU;AAC5B,kBAAM,IAAI,UAAU,uBAAuB;UAC7C;AAEA,cAAI,UAAU,QAAQ,EAAE,iBAAiB,qBAAA,oBAAoB;AAC3D,kBAAM,IAAI,UAAU,0CAA0C;UAChE;AAEA,cAAI,OAAO,aAAa,YAAY;AAClC,kBAAM,IAAI,UAAU,6BAA6B;UACnD;AAEA,eAAK,MAAM,oBAAoB,IAAI;AAEnC,gBAAM,UAAU,KAAK,cAAc,IAAI;AAEvC,gBAAM,mBAAmB,CAAC,OAAqBC,UAAgB;AAC7D,oBAAQ,SAAS,MAAM,SAAS,OAAOA,KAAI,CAAC;UAC9C;AAIA,cAAI,kBAAkB,KAAK,WAAW,KAAI,GAAA,aAAA,aAAY,OAAO,CAAC;AAC9D,cAAI,iBAAiB;AACnB,gBAAI,CAAC,MAAM,QAAQ,gBAAgB,WAAW,GAAG;AAC/C,+BACE,IAAI,MAAM,GAAG,IAAI,8CAA8C,GAC/D,CAAC;AAEH;YACF;AAGA,4BAAgB,YAAY;AAC5B,gBAAI,gBAAgB,mBAAmB;AACrC,8BAAgB,kBAAkB,KAChC,aAAW,SAAS,MAAM,OAAO,GACjC,WAAS,SAAS,OAAgB,CAAC,CAAC;YAExC,OAAO;AACL,+BAAiB,MAAM,gBAAgB,UAAU;YACnD;AACA;UACF;AACA,4BAAkB;YAChB,SAAQ,GAAA,aAAA,aAAY,OAAO;YAC3B,aAAa;YACb,mBAAmB;YACnB,WAAW;YACX,YAAY;YACZ,aAAa;YACb,kBAAkB,oBAAI,IAAG;;AAE3B,gBAAM,aAAY,GAAA,aAAA,eAAc,QAAQ,IAAI;AAC5C,gBAAM,oBAAoB,KAAK,SAAS,SAAS,eAAe;AAChE,0BAAgB,oBAAoB;AAIpC,eAAI,cAAS,QAAT,cAAS,SAAA,SAAT,UAAW,UAAS,GAAG;AACzB,8BAAkB,KAChB,aAAU;AACR,oBAAM,WAAoB;gBACxB,QAAQ,QAAQ;gBAChB,WAAW,QAAQ;gBACnB,OAAM,GAAA,aAAA,iBAAgB,EAAE,MAAM,UAAU,MAAM,MAAM,QAAO,CAAE;;AAE/D,8BAAiB,UAAS,GAAA,aAAA,aAAY,QAAQ;AAC9C,8BAAiB,oBAAoB;AACrC,8BAAiB,aAAa;AAC9B,mBAAK,WAAW,IAAI,gBAAiB,QAAQ,eAAgB;AAC7D,uBAAS,MAAM,OAAO;YACxB,GACA,WAAQ;AACN,uBAAS,OAAO,CAAC;YACnB,CAAC;UAEL,OAAO;AACL,iBAAK,WAAW,IAAI,gBAAgB,QAAQ,eAAe;AAC3D,8BAAkB,KAChB,aAAU;AACR,8BAAiB,oBAAoB;AACrC,8BAAiB,aAAa;AAC9B,uBAAS,MAAM,OAAO;YACxB,GACA,WAAQ;AACN,uBAAS,OAAO,CAAC;YACnB,CAAC;UAEL;QACF;QAEQ,6BAA0B;AAChC,kBAAO,GAAA,WAAA,wBACL,YACA,MAAK;AACH,mBAAO;cACL,cAAc;cACd,eAAe;cACf,UAAU;cACV,YAAY;cACZ,gBAAgB;cAChB,kBAAkB;cAClB,eAAe;cACf,cAAc;cACd,kBAAkB;cAClB,gBAAgB;cAChB,iCAAiC;cACjC,kCAAkC;cAClC,0BAA0B;cAC1B,8BAA8B;cAC9B,wBAAwB;cACxB,yBAAyB;;UAE7B,GACA,KAAK,eAAe;QAExB;;;;;;;QAQU,oDAAoDF,cAAgC,aAAwB,kBAAgB,OAAK;AACzI,cAAIA,iBAAgB,QAAQ,EAAEA,wBAAuB,qBAAA,oBAAoB;AACvE,kBAAM,IAAI,UAAU,0CAA0C;UAChE;AACA,cAAI,KAAK,iBAAiB;AACxB,iBAAK,wBAAwB,SAAS,WAAW;UACnD;AACA,gBAAM,SAAS,KAAK,kBAAkBA,YAAW;AACjD,gBAAM,cAA6C,oBAAI,IAAG;AAC1D,eAAK,aAAa,IAAI,QAAQ;YAC5B;YACA,UAAU;YACV;WACD;AACD,iBAAO;YACL,kBAAkB,CAAC,eAAsB;AACvC,qBAAO,KAAK,cAAc,UAAU;YACtC;YACA,OAAO,CAAC,gBAAuB;;AAC7B,yBAAW,WAAW,aAAa;AACjC,qBAAK,aAAa,OAAO;cAC3B;AACA,eAAA,MAAA,KAAA,WAAW,MAAK;AACd,2BAAW,WAAW,aAAa;AACjC,0BAAQ,QAAQ,MAAM,UAAU,cAAqB;gBACvD;cACF,GAAG,WAAW,GAAE,WAAK,QAAA,OAAA,SAAA,SAAA,GAAA,KAAA,EAAA;YACvB;YACA,SAAS,MAAK;AACZ,mBAAK,YAAY,MAAM;AACvB,yBAAW,WAAW,aAAa;AACjC,qBAAK,aAAa,OAAO;cAC3B;YACF;;QAEJ;QAEA,yBAAyBA,cAA8B;AACrD,cAAIA,iBAAgB,QAAQ,EAAEA,wBAAuB,qBAAA,oBAAoB;AACvE,kBAAM,IAAI,UAAU,0CAA0C;UAChE;AACA,gBAAM,cAAc,KAAK,2BAA0B;AACnD,iBAAO,KAAK,oDAAoDA,cAAa,aAAa,IAAI;QAChG;QAEQ,YAAY,QAAwB,UAAqB;AAC/D,eAAK,MACH,iCAAiC,KAAK,UAAU,OAAO,QAAO,CAAE,CAAC;AAEnE,gBAAM,aAAa,KAAK,aAAa,IAAI,MAAM;AAC/C,iBAAO,MAAM,MAAK;AAChB,gBAAI,cAAc,WAAW,iBAAiB;AAC5C,mBAAK,wBAAwB,WAAW,WAAW,WAAW;AAC9D,eAAA,GAAA,WAAA,uBAAsB,WAAW,WAAW;YAC9C;AACA,iBAAK,aAAa,OAAO,MAAM;AAC/B,yBAAQ,QAAR,aAAQ,SAAA,SAAR,SAAQ;UACV,CAAC;QACH;QAEQ,aACN,SACA,UAAqB;;AAErB,eAAK,MAAM,oCAAkC,KAAA,QAAQ,YAAM,QAAA,OAAA,SAAA,SAAA,GAAE,cAAa;AAC1E,gBAAM,cAAc,KAAK,SAAS,IAAI,OAAO;AAC7C,gBAAM,gBAAgB,MAAK;AACzB,gBAAI,aAAa;AACf,mBAAK,uBAAuB,WAAW,YAAY,GAAG;AACtD,eAAA,GAAA,WAAA,uBAAsB,YAAY,GAAG;YACvC;AACA,yBAAQ,QAAR,aAAQ,SAAA,SAAR,SAAQ;UACV;AACA,cAAI,QAAQ,QAAQ;AAClB,2BAAe,aAAa;UAC9B,OAAO;AACL,oBAAQ,MAAM,aAAa;UAC7B;QACF;QAEQ,eAAe,iBAA0B;AAC/C,qBAAW,UAAU,gBAAgB,kBAAkB;AACrD,kBAAM,aAAa,KAAK,aAAa,IAAI,MAAM;AAC/C,iBAAK,YAAY,QAAQ,MAAK;AAC5B,8BAAgB,iBAAiB,OAAO,MAAM;YAChD,CAAC;AACD,gBAAI,YAAY;AACd,yBAAW,WAAW,WAAW,UAAU;AACzC,qBAAK,aAAa,OAAO;cAC3B;YACF;UACF;AACA,eAAK,WAAW,OAAO,gBAAgB,MAAM;QAC/C;;;;;;;;QASA,OAAO,MAAY;AACjB,eAAK,MAAM,iBAAiB,IAAI;AAChC,gBAAM,UAAU,KAAK,cAAc,IAAI;AACvC,gBAAM,aAAY,GAAA,aAAA,eAAc,QAAQ,IAAI;AAC5C,eAAI,cAAS,QAAT,cAAS,SAAA,SAAT,UAAW,UAAS,GAAG;AACzB,kBAAM,IAAI,MAAM,sBAAsB;UACxC;AACA,gBAAM,kBAAkB,KAAK,WAAW,KAAI,GAAA,aAAA,aAAY,OAAO,CAAC;AAChE,cAAI,iBAAiB;AACnB,iBAAK,MACH,eACE,gBAAgB,SAChB,2BACA,GAAA,aAAA,aAAY,gBAAgB,WAAW,CAAC;AAI5C,gBAAI,gBAAgB,mBAAmB;AACrC,8BAAgB,YAAY;YAC9B,OAAO;AACL,mBAAK,eAAe,eAAe;YACrC;UACF;QACF;;;;;;;;;;;;QAaA,MAAM,MAAc,aAAmB;;AACrC,eAAK,MAAM,gBAAgB,OAAO,kBAAkB,WAAW;AAC/D,gBAAM,UAAU,KAAK,cAAc,IAAI;AACvC,gBAAM,aAAY,GAAA,aAAA,eAAc,QAAQ,IAAI;AAC5C,eAAI,cAAS,QAAT,cAAS,SAAA,SAAT,UAAW,UAAS,GAAG;AACzB,kBAAM,IAAI,MAAM,qBAAqB;UACvC;AACA,gBAAM,kBAAkB,KAAK,WAAW,KAAI,GAAA,aAAA,aAAY,OAAO,CAAC;AAChE,cAAI,CAAC,iBAAiB;AACpB;UACF;AACA,gBAAM,cAAuC,oBAAI,IAAG;AACpD,qBAAW,eAAe,gBAAgB,kBAAkB;AAC1D,kBAAM,cAAc,KAAK,aAAa,IAAI,WAAW;AACrD,gBAAI,aAAa;AACf,yBAAW,WAAW,YAAY,UAAU;AAC1C,4BAAY,IAAI,OAAO;AACvB,qBAAK,aAAa,SAAS,MAAK;AAC9B,8BAAY,OAAO,OAAO;gBAC5B,CAAC;cACH;YACF;UACF;AAGA,WAAA,MAAA,KAAA,WAAW,MAAK;AACd,uBAAW,WAAW,aAAa;AACjC,sBAAQ,QAAQ,MAAM,UAAU,cAAqB;YACvD;UACF,GAAG,WAAW,GAAE,WAAK,QAAA,OAAA,SAAA,SAAA,GAAA,KAAA,EAAA;QACvB;QAEA,gBAAa;AACX,qBAAW,mBAAmB,KAAK,WAAW,OAAM,GAAI;AACtD,4BAAgB,YAAY;UAC9B;AACA,eAAK,WAAW,MAAK;AAErB,qBAAW,UAAU,KAAK,aAAa,KAAI,GAAI;AAC7C,iBAAK,YAAY,MAAM;UACzB;AAIA,eAAK,SAAS,QAAQ,CAAC,cAAc,YAAW;AAC9C,iBAAK,aAAa,OAAO;AAIzB,oBAAQ,QAAQ,MAAM,UAAU,cAAqB;UACvD,CAAC;AACD,eAAK,SAAS,MAAK;AACnB,WAAA,GAAA,WAAA,uBAAsB,KAAK,WAAW;AAEtC,eAAK,WAAW;QAClB;QAEA,SACE,MACA,SACA,WACA,aACA,MAAY;AAEZ,cAAI,KAAK,SAAS,IAAI,IAAI,GAAG;AAC3B,mBAAO;UACT;AAEA,eAAK,SAAS,IAAI,MAAM;YACtB,MAAM;YACN;YACA;YACA;YACA,MAAM;WACW;AACnB,iBAAO;QACT;QAEA,WAAW,MAAY;AACrB,iBAAO,KAAK,SAAS,OAAO,IAAI;QAClC;;;;QAQA,QAAK;AACH,cACE,KAAK,aAAa,SAAS,KAC3B,CAAC,GAAG,KAAK,aAAa,KAAI,CAAE,EAAE,MAAM,YAAU,CAAC,OAAO,SAAS,GAC/D;AACA,kBAAM,IAAI,MAAM,wCAAwC;UAC1D;AAEA,cAAI,KAAK,YAAY,MAAM;AACzB,kBAAM,IAAI,MAAM,2BAA2B;UAC7C;AACA,eAAK,UAAU;QACjB;QAEA,YAAY,UAAiC;;AAC3C,gBAAM,kBAAkB,CAAC,UAAiB;AACxC,aAAA,GAAA,WAAA,uBAAsB,KAAK,WAAW;AACtC,qBAAS,KAAK;UAChB;AACA,cAAI,gBAAgB;AAEpB,mBAAS,gBAAa;AACpB;AAEA,gBAAI,kBAAkB,GAAG;AACvB,8BAAe;YACjB;UACF;AACA,eAAK,WAAW;AAEhB,qBAAW,CAAC,WAAW,MAAM,KAAK,KAAK,aAAa,QAAO,GAAI;AAC7D;AACA,kBAAM,eAAe,OAAO,YAAY;AACxC,iBAAK,MAAM,wBAAwB,eAAe,WAAW;AAC7D,iBAAK,YAAY,WAAW,MAAK;AAC/B,mBAAK,MAAM,YAAY,eAAe,mBAAmB;AACzD,4BAAa;YACf,CAAC;AAED,uBAAW,WAAW,OAAO,SAAS,KAAI,GAAI;AAC5C;AACA,oBAAM,iBAAgB,KAAA,QAAQ,YAAM,QAAA,OAAA,SAAA,SAAA,GAAE;AACtC,mBAAK,MAAM,yBAAyB,gBAAgB,WAAW;AAC/D,mBAAK,aAAa,SAAS,MAAK;AAC9B,qBAAK,MAAM,aAAa,gBAAgB,mBAAmB;AAC3D,8BAAa;cACf,CAAC;YACH;UACF;AAEA,cAAI,kBAAkB,GAAG;AACvB,4BAAe;UACjB;QACF;QAEA,eAAY;AACV,gBAAM,IAAI,MAAM,qBAAqB;QACvC;;;;;;QAOA,iBAAc;AACZ,iBAAO,KAAK;QACd;QAEQ,mBACN,QACA,SAAkC;AAElC,gBAAM,cAAc,QAAQ,MAAM,UAAU,yBAAyB;AAErE,cACE,OAAO,gBAAgB,YACvB,CAAC,YAAY,WAAW,kBAAkB,GAC1C;AACA,mBAAO,QACL;cACE,CAAC,MAAM,UAAU,mBAAmB,GAClC,MAAM,UAAU;eAEpB,EAAE,WAAW,KAAI,CAAE;AAErB,mBAAO;UACT;AAEA,iBAAO;QACT;QAEQ,iBAAiB,MAAY;AACnC,0BACE,6BACE,OACA,iBACA,KAAK,mBAAmB;AAG5B,gBAAM,UAAU,KAAK,SAAS,IAAI,IAAI;AAEtC,cAAI,YAAY,QAAW;AACzB,4BACE,sCACE,OACA,iCAAiC;AAErC,mBAAO;UACT;AAEA,iBAAO;QACT;QAEQ,kBACN,KACA,QACA,sBAAkD,MAAI;;AAEtD,gBAAM,iBAAc,OAAA,OAAA,EAClB,gBAAe,KAAA,IAAI,UAAI,QAAA,OAAA,SAAA,KAAI,YAAA,OAAO,UAClC,gBAAgB,IAAI,SACpB,CAAC,MAAM,UAAU,mBAAmB,GAAG,MAAM,UAAU,gBACvD,CAAC,MAAM,UAAU,yBAAyB,GAAG,yBAAwB,IAClE,KAAA,IAAI,cAAQ,QAAA,OAAA,SAAA,SAAA,GAAE,eAAc,CAAE;AAEnC,iBAAO,QAAQ,gBAAgB,EAAE,WAAW,KAAI,CAAE;AAElD,eAAK,YAAY,cAAa;AAC9B,kCAAmB,QAAnB,wBAAmB,SAAA,SAAnB,oBAAqB,cAAc,cAAa;QAClD;QAEQ,iBACN,mBACA,QACA,SAAkC;AAGlC,eAAK,eAAe,MAAM;AAE1B,gBAAM,sBAAsB,KAAK,SAAS,IACxC,OAAO,OAAmC;AAG5C,eAAK,YAAY,eAAc;AAC/B,kCAAmB,QAAnB,wBAAmB,SAAA,SAAnB,oBAAqB,cAAc,eAAc;AAEjD,cAAI,CAAC,KAAK,mBAAmB,QAAQ,OAAO,GAAG;AAC7C,iBAAK,YAAY,cAAa;AAC9B,oCAAmB,QAAnB,wBAAmB,SAAA,SAAnB,oBAAqB,cAAc,cAAa;AAChD;UACF;AAEA,gBAAM,OAAO,QAAQ,iBAAiB;AAEtC,gBAAM,UAAU,KAAK,iBAAiB,IAAI;AAC1C,cAAI,CAAC,SAAS;AACZ,iBAAK,kBACH,+BAA+B,IAAI,GACnC,QACA,mBAAmB;AAErB;UACF;AAEA,gBAAM,mBAAqC;YACzC,gBAAgB,MAAK;AACnB,kBAAI,qBAAqB;AACvB,oCAAoB,gBAAgB;AACpC,oCAAoB,2BAA2B,oBAAI,KAAI;cACzD;YACF;YACA,oBAAoB,MAAK;AACvB,kBAAI,qBAAqB;AACvB,oCAAoB,oBAAoB;AACxC,oCAAoB,+BAA+B,oBAAI,KAAI;cAC7D;YACF;YACA,WAAW,CAAAG,YAAS;AAClB,kBAAIA,QAAO,SAAS,YAAA,OAAO,IAAI;AAC7B,qBAAK,YAAY,iBAAgB;cACnC,OAAO;AACL,qBAAK,YAAY,cAAa;cAChC;YACF;YACA,aAAa,aAAU;AACrB,kBAAI,qBAAqB;AACvB,oBAAI,SAAS;AACX,sCAAoB,cAAc,iBAAgB;gBACpD,OAAO;AACL,sCAAoB,cAAc,cAAa;gBACjD;cACF;YACF;;AAGF,gBAAM,QAAO,GAAA,sBAAA,2BACX,CAAC,GAAG,mBAAmB,GAAG,KAAK,YAAY,GAC3C,QACA,SACA,kBACA,SACA,KAAK,OAAO;AAGd,cAAI,CAAC,KAAK,mBAAmB,MAAM,OAAO,GAAG;AAC3C,iBAAK,YAAY,cAAa;AAC9B,oCAAmB,QAAnB,wBAAmB,SAAA,SAAnB,oBAAqB,cAAc,cAAa;AAEhD,iBAAK,WAAW;cACd,MAAM,YAAA,OAAO;cACb,SAAS,yBAAyB,QAAQ,IAAI;aAC/C;UACH;QACF;QAEQ,eACN,mBACA,QACA,SAAkC;AAGlC,eAAK,eAAe,MAAM;AAE1B,cAAI,KAAK,mBAAmB,QAAQ,OAAO,MAAM,MAAM;AACrD;UACF;AAEA,gBAAM,OAAO,QAAQ,iBAAiB;AAEtC,gBAAM,UAAU,KAAK,iBAAiB,IAAI;AAC1C,cAAI,CAAC,SAAS;AACZ,iBAAK,kBACH,+BAA+B,IAAI,GACnC,QACA,IAAI;AAEN;UACF;AAEA,gBAAM,QAAO,GAAA,sBAAA,2BACX,CAAC,GAAG,mBAAmB,GAAG,KAAK,YAAY,GAC3C,QACA,SACA,MACA,SACA,KAAK,OAAO;AAGd,cAAI,CAAC,KAAK,mBAAmB,MAAM,OAAO,GAAG;AAC3C,iBAAK,WAAW;cACd,MAAM,YAAA,OAAO;cACb,SAAS,yBAAyB,QAAQ,IAAI;aAC/C;UACH;QACF;QAEQ,mBACN,MACA,SAI+B;AAE/B,gBAAM,EAAE,KAAI,IAAK;AACjB,cAAI,SAAS,SAAS;AACpB,wBAAY,MAAM,OAAO;UAC3B,WAAW,SAAS,gBAAgB;AAClC,kCAAsB,MAAM,OAAO;UACrC,WAAW,SAAS,gBAAgB;AAClC,kCAAsB,MAAM,OAAO;UACrC,WAAW,SAAS,QAAQ;AAC1B,gCAAoB,MAAM,OAAO;UACnC,OAAO;AACL,mBAAO;UACT;AAEA,iBAAO;QACT;QAEQ,eACN,aACA,mBAAsC;AAEtC,cAAI,gBAAgB,MAAM;AACxB;UACF;AAEA,gBAAM,gBAAgB,YAAY,QAAO;AACzC,cAAI,sBAAsB;AAC1B,cAAI,eAAe;AACjB,gBAAI,OAAO,kBAAkB,UAAU;AACrC,oCAAsB;YACxB,OAAO;AACL,oCAAsB,cAAc,UAAU,MAAM,cAAc;YACpE;UACF;AACA,eAAK,sBAAsB;AAE3B,gBAAM,UAAU,KAAK,kBACjB,KAAK,mBACL,KAAK;AAET,gBAAM,iBAAiB,KAAK,kBACxB,KAAK,wBAAwB,WAAW,IACxC,KAAK,gBAAgB,WAAW;AAEpC,sBAAY,GAAG,UAAU,QAAQ,KAAK,MAAM,iBAAiB,CAAC;AAC9D,sBAAY,GAAG,WAAW,cAAc;QAC1C;QAEQ,gBACN,aAAwD;AAExD,iBAAO,CAAC,YAAqC;;AAC3C,aAAA,KAAA,KAAK,aAAa,IAAI,WAAW,OAAC,QAAA,OAAA,SAAA,SAAA,GAAE,SAAS,IAAI,OAAO;AAExD,gBAAI,qBAA4C;AAChD,gBAAI,0BAAiD;AACrD,gBAAI,iBAAwC;AAC5C,gBAAI,wBAAwB;AAE5B,kBAAM,iBAAiB,KAAK,kBAAkB,OAAO;AAErD,gBAAI,KAAK,uBAAuB,6BAA6B;AAE3D,oBAAM,kBAAkB,KAAK,qBAAqB;AAClD,oBAAM,SAAS,KAAK,OAAM,IAAK,kBAAkB,IAAI;AAErD,mCAAqB,WAAW,MAAK;;AACnC,wCAAwB;AAExB,qBAAK,MACH,iDACEC,MAAA,QAAQ,YAAM,QAAAA,QAAA,SAAA,SAAAA,IAAE,cAAa;AAGjC,oBAAI;AACF,0BAAQ,OACN,MAAM,UAAU,kBAChB,EAAE,KAAK,KACP,OAAO;gBAEX,SAAS,GAAG;AAEV,0BAAQ,QAAO;AACf;gBACF;AACA,wBAAQ,MAAK;AAIb,oBAAI,KAAK,4BAA4B,6BAA6B;AAChE,4CAA0B,WAAW,MAAK;AACxC,4BAAQ,QAAO;kBACjB,GAAG,KAAK,uBAAuB;AAC/B,mBAAAC,MAAA,wBAAwB,WAAK,QAAAA,QAAA,SAAA,SAAAA,IAAA,KAAA,uBAAA;gBAC/B;cACF,GAAG,KAAK,qBAAqB,MAAM;AACnC,eAAA,KAAA,mBAAmB,WAAK,QAAA,OAAA,SAAA,SAAA,GAAA,KAAA,kBAAA;YAC1B;AAEA,kBAAM,wBAAwB,MAAK;AACjC,kBAAI,gBAAgB;AAClB,6BAAa,cAAc;AAC3B,iCAAiB;cACnB;YACF;AAEA,kBAAM,cAAc,MAAK;AACvB,qBACE,CAAC,QAAQ,aACT,KAAK,kBAAkB,yBACvB,KAAK,kBAAkB;YAE3B;AAGA,gBAAI;AAEJ,kBAAM,+BAA+B,MAAK;;AACxC,kBAAI,CAAC,YAAW,GAAI;AAClB;cACF;AACA,mBAAK,eACH,kCAAkC,KAAK,kBAAkB,IAAI;AAE/D,+BAAiB,WAAW,MAAK;AAC/B,sCAAqB;AACrB,yBAAQ;cACV,GAAG,KAAK,eAAe;AACvB,eAAAD,MAAA,eAAe,WAAK,QAAAA,QAAA,SAAA,SAAAA,IAAA,KAAA,cAAA;YACtB;AAEA,uBAAW,MAAK;;AACd,kBAAI,CAAC,YAAW,GAAI;AAClB;cACF;AACA,mBAAK,eACH,+BAA+B,KAAK,qBAAqB,IAAI;AAE/D,kBAAI,gBAAgB;AACpB,kBAAI;AACF,sBAAM,uBAAuB,QAAQ,KACnC,CAAC,KAAmB,UAAkB,YAAmB;AACvD,wCAAqB;AACrB,sBAAI,KAAK;AACP,yBAAK,eAAe,6BAA6B,IAAI,OAAO;AAC5D,4CAAwB;AACxB,4BAAQ,QAAO;kBACjB,OAAO;AACL,yBAAK,eAAe,wBAAwB;AAC5C,iDAA4B;kBAC9B;gBACF,CAAC;AAEH,oBAAI,CAAC,sBAAsB;AACzB,kCAAgB;gBAClB;cACF,SAAS,GAAG;AAEV,iCACG,aAAa,QAAQ,EAAE,UAAU,OAAO;cAC7C;AAEA,kBAAI,eAAe;AACjB,qBAAK,eAAe,uBAAuB,aAAa;AACxD,qBAAK,MACH,gDAAgD,aAAa;AAE/D,wCAAwB;AACxB,wBAAQ,QAAO;AACf;cACF;AAEA,+BAAiB,WAAW,MAAK;AAC/B,sCAAqB;AACrB,qBAAK,eAAe,sCAAsC;AAC1D,qBAAK,MAAM,yCAAyC;AACpD,wCAAwB;AACxB,wBAAQ,QAAO;cACjB,GAAG,KAAK,kBAAkB;AAC1B,eAAAA,MAAA,eAAe,WAAK,QAAAA,QAAA,SAAA,SAAAA,IAAA,KAAA,cAAA;YACtB;AAEA,yCAA4B;AAE5B,oBAAQ,GAAG,SAAS,MAAK;;AACvB,kBAAI,CAAC,uBAAuB;AAC1B,qBAAK,MACH,iCAAgCA,MAAA,QAAQ,YAAM,QAAAA,QAAA,SAAA,SAAAA,IAAE,aAAa,EAAE;cAEnE;AAEA,kBAAI,oBAAoB;AACtB,6BAAa,kBAAkB;cACjC;AAEA,kBAAI,yBAAyB;AAC3B,6BAAa,uBAAuB;cACtC;AAEA,oCAAqB;AAErB,kBAAI,mBAAmB,MAAM;AAC3B,6BAAa,eAAe,OAAO;AACnC,qBAAK,oBAAoB,OAAO,OAAO;cACzC;AAEA,eAAAC,MAAA,KAAK,aAAa,IAAI,WAAW,OAAC,QAAAA,QAAA,SAAA,SAAAA,IAAE,SAAS,OAAO,OAAO;YAC7D,CAAC;UACH;QACF;QAEQ,wBACN,aAAwD;AAExD,iBAAO,CAAC,YAAqC;;AAC3C,kBAAM,eAAc,GAAA,WAAA,yBAClB,MAAA,KAAA,QAAQ,YAAM,QAAA,OAAA,SAAA,SAAA,GAAE,mBAAa,QAAA,OAAA,SAAA,KAAI,WACjC,KAAK,uBAAuB,KAAK,MAAM,OAAO,GAC9C,KAAK,eAAe;AAGtB,kBAAM,sBAA2C;cAC/C,KAAK;cACL,eAAe,IAAI,WAAA,oBAAmB;cACtC,cAAc;cACd,kBAAkB;cAClB,gBAAgB;cAChB,0BAA0B;cAC1B,8BAA8B;;AAGhC,aAAA,KAAA,KAAK,aAAa,IAAI,WAAW,OAAC,QAAA,OAAA,SAAA,SAAA,GAAE,SAAS,IAAI,OAAO;AACxD,iBAAK,SAAS,IAAI,SAAS,mBAAmB;AAC9C,kBAAM,gBAAgB,GAAG,QAAQ,OAAO,aAAa,IAAI,QAAQ,OAAO,UAAU;AAElF,iBAAK,cAAc,SACjB,WACA,sCAAsC,aAAa;AAErD,iBAAK,MAAM,sCAAsC,aAAa;AAC9D,iBAAK,uBAAuB,SAAS,WAAW;AAEhD,gBAAI,qBAA4C;AAChD,gBAAI,0BAAiD;AACrD,gBAAI,mBAA0C;AAC9C,gBAAI,wBAAwB;AAE5B,kBAAM,iBAAiB,KAAK,kBAAkB,OAAO;AAErD,gBAAI,KAAK,uBAAuB,6BAA6B;AAE3D,oBAAM,kBAAkB,KAAK,qBAAqB;AAClD,oBAAM,SAAS,KAAK,OAAM,IAAK,kBAAkB,IAAI;AAErD,mCAAqB,WAAW,MAAK;;AACnC,wCAAwB;AACxB,qBAAK,cAAc,SACjB,WACA,mDAAmD,aAAa;AAGlE,oBAAI;AACF,0BAAQ,OACN,MAAM,UAAU,kBAChB,EAAE,KAAK,KACP,OAAO;gBAEX,SAAS,GAAG;AAEV,0BAAQ,QAAO;AACf;gBACF;AACA,wBAAQ,MAAK;AAIb,oBAAI,KAAK,4BAA4B,6BAA6B;AAChE,4CAA0B,WAAW,MAAK;AACxC,4BAAQ,QAAO;kBACjB,GAAG,KAAK,uBAAuB;AAC/B,mBAAAD,MAAA,wBAAwB,WAAK,QAAAA,QAAA,SAAA,SAAAA,IAAA,KAAA,uBAAA;gBAC/B;cACF,GAAG,KAAK,qBAAqB,MAAM;AACnC,eAAA,KAAA,mBAAmB,WAAK,QAAA,OAAA,SAAA,SAAA,GAAA,KAAA,kBAAA;YAC1B;AAEA,kBAAM,wBAAwB,MAAK;AACjC,kBAAI,kBAAkB;AACpB,6BAAa,gBAAgB;AAC7B,mCAAmB;cACrB;YACF;AAEA,kBAAM,cAAc,MAAK;AACvB,qBACE,CAAC,QAAQ,aACT,KAAK,kBAAkB,yBACvB,KAAK,kBAAkB;YAE3B;AAGA,gBAAI;AAEJ,kBAAM,+BAA+B,MAAK;;AACxC,kBAAI,CAAC,YAAW,GAAI;AAClB;cACF;AACA,mBAAK,eACH,kCAAkC,KAAK,kBAAkB,IAAI;AAE/D,iCAAmB,WAAW,MAAK;AACjC,sCAAqB;AACrB,yBAAQ;cACV,GAAG,KAAK,eAAe;AACvB,eAAAA,MAAA,iBAAiB,WAAK,QAAAA,QAAA,SAAA,SAAAA,IAAA,KAAA,gBAAA;YACxB;AAEA,uBAAW,MAAK;;AACd,kBAAI,CAAC,YAAW,GAAI;AAClB;cACF;AACA,mBAAK,eACH,+BAA+B,KAAK,qBAAqB,IAAI;AAE/D,kBAAI,gBAAgB;AACpB,kBAAI;AACF,sBAAM,uBAAuB,QAAQ,KACnC,CAAC,KAAmB,UAAkB,YAAmB;AACvD,wCAAqB;AACrB,sBAAI,KAAK;AACP,yBAAK,eAAe,6BAA6B,IAAI,OAAO;AAC5D,yBAAK,cAAc,SACjB,WACA,qDACE,IAAI,UACJ,gBACA,QAAQ;AAEZ,4CAAwB;AACxB,4BAAQ,QAAO;kBACjB,OAAO;AACL,yBAAK,eAAe,wBAAwB;AAC5C,iDAA4B;kBAC9B;gBACF,CAAC;AAEH,oBAAI,CAAC,sBAAsB;AACzB,kCAAgB;gBAClB;cACF,SAAS,GAAG;AAEV,iCACG,aAAa,QAAQ,EAAE,UAAU,OAAO;cAC7C;AAEA,kBAAI,eAAe;AACjB,qBAAK,eAAe,uBAAuB,aAAa;AACxD,qBAAK,cAAc,SACjB,WACA,gDAAgD,aAAa;AAE/D,wCAAwB;AACxB,wBAAQ,QAAO;AACf;cACF;AAEA,kCAAoB,kBAAkB;AAEtC,iCAAmB,WAAW,MAAK;AACjC,sCAAqB;AACrB,qBAAK,eAAe,sCAAsC;AAC1D,qBAAK,cAAc,SACjB,WACA,kDAAkD,aAAa;AAEjE,wCAAwB;AACxB,wBAAQ,QAAO;cACjB,GAAG,KAAK,kBAAkB;AAC1B,eAAAA,MAAA,iBAAiB,WAAK,QAAAA,QAAA,SAAA,SAAAA,IAAA,KAAA,gBAAA;YACxB;AAEA,yCAA4B;AAE5B,oBAAQ,GAAG,SAAS,MAAK;;AACvB,kBAAI,CAAC,uBAAuB;AAC1B,qBAAK,cAAc,SACjB,WACA,kCAAkC,aAAa;cAEnD;AAEA,mBAAK,uBAAuB,WAAW,WAAW;AAClD,eAAA,GAAA,WAAA,uBAAsB,WAAW;AAEjC,kBAAI,oBAAoB;AACtB,6BAAa,kBAAkB;cACjC;AAEA,kBAAI,yBAAyB;AAC3B,6BAAa,uBAAuB;cACtC;AAEA,oCAAqB;AAErB,kBAAI,mBAAmB,MAAM;AAC3B,6BAAa,eAAe,OAAO;AACnC,qBAAK,oBAAoB,OAAO,OAAO;cACzC;AAEA,eAAAA,MAAA,KAAK,aAAa,IAAI,WAAW,OAAC,QAAAA,QAAA,SAAA,SAAAA,IAAE,SAAS,OAAO,OAAO;AAC3D,mBAAK,SAAS,OAAO,OAAO;YAC9B,CAAC;UACH;QACF;QAEQ,kBACN,SAAiC;;AAEjC,cAAI,KAAK,sBAAsB,wBAAwB;AACrD,mBAAO;UACT;AAEA,gBAAM,iBAA4C;YAChD,eAAe;YACf,UAAU,KAAK,IAAG;YAClB,SAAS,KAAK,cAAc,KAAK,MAAM,OAAO;YAC9C,SAAS,WACP,KAAK,eACL,KAAK,oBACL,MACA,OAAO;;AAGX,WAAA,MAAA,KAAA,eAAe,SAAQ,WAAK,QAAA,OAAA,SAAA,SAAA,GAAA,KAAA,EAAA;AAC5B,eAAK,oBAAoB,IAAI,SAAS,cAAc;AAEpD,gBAAM,EAAE,OAAM,IAAK;AACnB,eAAK,MACH,6BACE,OAAO,gBACP,MACA,OAAO,UAAU;AAGrB,iBAAO;QACT;QAEQ,cAEN,KACA,SAAiC;AAEjC,gBAAM,EAAE,OAAM,IAAK;AACnB,gBAAM,cAAc,IAAI,oBAAoB,IAAI,OAAO;AAMvD,cACE,gBAAgB,UAChB,YAAY,kBAAkB,GAC9B;AACA,gBAAI,KAAK,IAAG,IAAK,YAAY,YAAY,IAAI,oBAAoB;AAC/D,kBAAI,MACF,yCACE,WAAM,QAAN,WAAM,SAAA,SAAN,OAAQ,iBACR,OACA,WAAM,QAAN,WAAM,SAAA,SAAN,OAAQ,cACR,mBACA,YAAY,QAAQ;AAGxB,kBAAI,aAAa,OAAO;YAC1B,OAAO;AACL,0BAAY,QAAQ,QAAO;YAC7B;UACF;QACF;QAEQ,eAAe,QAA+B;AACpD,gBAAM,UAAU,OAAO;AAEvB,gBAAM,iBAAiB,KAAK,oBAAoB,IAAI,OAAO;AAC3D,cAAI,gBAAgB;AAClB,2BAAe,iBAAiB;AAChC,mBAAO,KAAK,SAAS,eAAe,OAAO;UAC7C;QACF;QAEQ,cAAc,SAAiC;;AACrD,gBAAM,iBAAiB,KAAK,oBAAoB,IAAI,OAAO;AAE3D,cAAI,gBAAgB;AAClB,2BAAe,iBAAiB;AAChC,gBAAI,eAAe,kBAAkB,GAAG;AACtC,6BAAe,WAAW,KAAK,IAAG;AAClC,6BAAe,QAAQ,QAAO;AAE9B,mBAAK,MACH,4BACE,KAAA,QAAQ,YAAM,QAAA,OAAA,SAAA,SAAA,GAAE,iBAChB,QACA,KAAA,QAAQ,YAAM,QAAA,OAAA,SAAA,SAAA,GAAE,cAChB,SACA,eAAe,QAAQ;YAE7B;UACF;QACF;;;6BAxwBC,UACC,mEAAmE,CACpE;AACD,qBAAA,IAAA,MAAA,mBAAA,EAAA,MAAA,UAAA,MAAA,SAAA,QAAA,OAAA,SAAA,OAAA,QAAA,EAAA,KAAA,SAAA,WAAA,KAAA,KAAA,SAAA,IAAA,MAAK,GAAA,UAAA,UAAA,GAAA,MAAA,0BAAA;;;;AAt6BM,IAAAE,SAAA,SAAA;AA8qDb,mBAAe,YACb,MACA,SAAgD;AAEhD,UAAI;AAEJ,eAAS,QACP,KACA,OACA,SACA,OAAc;AAEd,YAAI,KAAK;AACP,eAAK,YAAW,GAAA,cAAA,qBAAoB,KAAK,OAAO,CAAC;AACjD;QACF;AACA,aAAK,YAAY,OAAO,MAAK;AAC3B,eAAK,WAAW;YACd,MAAM,YAAA,OAAO;YACb,SAAS;YACT,UAAU,YAAO,QAAP,YAAO,SAAP,UAAW;WACtB;QACH,CAAC;MACH;AAEA,UAAI;AACJ,UAAI,iBAAqC;AACzC,WAAK,MAAM;QACT,kBAAkB,UAAQ;AACxB,4BAAkB;AAClB,eAAK,UAAS;QAChB;QACA,iBAAiB,SAAO;AACtB,cAAI,gBAAgB;AAClB,iBAAK,WAAW;cACd,MAAM,YAAA,OAAO;cACb,SAAS,iEAAiE,QAAQ,IAAI;cACtF,UAAU;aACX;AACD;UACF;AACA,2BAAiB;AACjB,eAAK,UAAS;QAChB;QACA,qBAAkB;AAChB,cAAI,CAAC,gBAAgB;AACnB,iBAAK,WAAW;cACd,MAAM,YAAA,OAAO;cACb,SAAS,2DAA2D,QAAQ,IAAI;cAChF,UAAU;aACX;AACD;UACF;AACA,mBAAS,IAAI,cAAA,yBACX,QAAQ,MACR,MACA,iBACA,cAAc;AAEhB,cAAI;AACF,oBAAQ,KAAK,QAAQ,OAAO;UAC9B,SAAS,KAAK;AACZ,iBAAK,WAAW;cACd,MAAM,YAAA,OAAO;cACb,SAAS,qCACN,IAAc,OACjB;cACA,UAAU;aACX;UACH;QACF;QACA,WAAQ;AACN,cAAI,QAAQ;AACV,mBAAO,YAAY;AACnB,mBAAO,KAAK,aAAa,WAAW;UACtC;QACF;OACD;IACH;AAEA,aAAS,sBACP,MACA,SAA0D;AAE1D,UAAI;AAEJ,eAAS,QACP,KACA,OACA,SACA,OAAc;AAEd,YAAI,KAAK;AACP,eAAK,YAAW,GAAA,cAAA,qBAAoB,KAAK,OAAO,CAAC;AACjD;QACF;AACA,aAAK,YAAY,OAAO,MAAK;AAC3B,eAAK,WAAW;YACd,MAAM,YAAA,OAAO;YACb,SAAS;YACT,UAAU,YAAO,QAAP,YAAO,SAAP,UAAW;WACtB;QACH,CAAC;MACH;AAEA,WAAK,MAAM;QACT,kBAAkB,UAAQ;AACxB,mBAAS,IAAI,cAAA,uBAAuB,QAAQ,MAAM,MAAM,QAAQ;AAChE,cAAI;AACF,oBAAQ,KAAK,QAAQ,OAAO;UAC9B,SAAS,KAAK;AACZ,iBAAK,WAAW;cACd,MAAM,YAAA,OAAO;cACb,SAAS,qCACN,IAAc,OACjB;cACA,UAAU;aACX;UACH;QACF;QACA,iBAAiB,SAAO;AACtB,iBAAO,KAAK,OAAO;QACrB;QACA,qBAAkB;AAChB,iBAAO,KAAK,IAAI;QAClB;QACA,WAAQ;AACN,cAAI,QAAQ;AACV,mBAAO,YAAY;AACnB,mBAAO,KAAK,aAAa,WAAW;AACpC,mBAAO,QAAO;UAChB;QACF;OACD;IACH;AAEA,aAAS,sBACP,MACA,SAA0D;AAE1D,UAAI;AAEJ,UAAI;AACJ,UAAI,iBAAqC;AACzC,WAAK,MAAM;QACT,kBAAkB,UAAQ;AACxB,4BAAkB;AAClB,eAAK,UAAS;QAChB;QACA,iBAAiB,SAAO;AACtB,cAAI,gBAAgB;AAClB,iBAAK,WAAW;cACd,MAAM,YAAA,OAAO;cACb,SAAS,iEAAiE,QAAQ,IAAI;cACtF,UAAU;aACX;AACD;UACF;AACA,2BAAiB;AACjB,eAAK,UAAS;QAChB;QACA,qBAAkB;AAChB,cAAI,CAAC,gBAAgB;AACnB,iBAAK,WAAW;cACd,MAAM,YAAA,OAAO;cACb,SAAS,2DAA2D,QAAQ,IAAI;cAChF,UAAU;aACX;AACD;UACF;AACA,mBAAS,IAAI,cAAA,yBACX,QAAQ,MACR,MACA,iBACA,cAAc;AAEhB,cAAI;AACF,oBAAQ,KAAK,MAAM;UACrB,SAAS,KAAK;AACZ,iBAAK,WAAW;cACd,MAAM,YAAA,OAAO;cACb,SAAS,qCACN,IAAc,OACjB;cACA,UAAU;aACX;UACH;QACF;QACA,WAAQ;AACN,cAAI,QAAQ;AACV,mBAAO,YAAY;AACnB,mBAAO,KAAK,aAAa,WAAW;AACpC,mBAAO,QAAO;UAChB;QACF;OACD;IACH;AAEA,aAAS,oBACP,MACA,SAAwD;AAExD,UAAI;AAEJ,WAAK,MAAM;QACT,kBAAkB,UAAQ;AACxB,mBAAS,IAAI,cAAA,uBAAuB,QAAQ,MAAM,MAAM,QAAQ;AAChE,cAAI;AACF,oBAAQ,KAAK,MAAM;UACrB,SAAS,KAAK;AACZ,iBAAK,WAAW;cACd,MAAM,YAAA,OAAO;cACb,SAAS,qCACN,IAAc,OACjB;cACA,UAAU;aACX;UACH;QACF;QACA,iBAAiB,SAAO;AACtB,iBAAO,KAAK,OAAO;QACrB;QACA,qBAAkB;AAChB,iBAAO,KAAK,IAAI;QAClB;QACA,WAAQ;AACN,cAAI,QAAQ;AACV,mBAAO,YAAY;AACnB,mBAAO,KAAK,aAAa,WAAW;AACpC,mBAAO,QAAO;UAChB;QACF;OACD;IACH;;;;;;;;;;AC3oEA,QAAa,gBAAb,MAA0B;MAKxB,cAAA;AACE,aAAK,OAAO;AACZ,aAAK,UAAU;AACf,aAAK,WAAW;MAClB;;;;MAKA,SAAS,MAAY;AACnB,aAAK,OAAO;AACZ,eAAO;MACT;;;;MAKA,YAAY,SAAe;AACzB,aAAK,UAAU;AACf,eAAO;MACT;;;;MAKA,aAAa,UAAkB;AAC7B,aAAK,WAAW;AAChB,eAAO;MACT;;;;MAKA,QAAK;AACH,cAAMC,UAAgC,CAAA;AAEtC,YAAI,KAAK,SAAS,MAAM;AACtB,UAAAA,QAAO,OAAO,KAAK;QACrB;AAEA,YAAI,KAAK,YAAY,MAAM;AACzB,UAAAA,QAAO,UAAU,KAAK;QACxB;AAEA,YAAI,KAAK,aAAa,MAAM;AAC1B,UAAAA,QAAO,WAAW,KAAK;QACzB;AAEA,eAAOA;MACT;;AAtDF,IAAAC,SAAA,gBAAA;;;;;;;;;;ACkGA,IAAAC,SAAA,WAAA;AAohBA,IAAAA,SAAA,QAAA;AA7nBA,QAAA,kBAAA;AAQA,QAAA,uBAAA;AACA,QAAA,WAAA;AAQA,QAAA,uBAAA;AACA,QAAA,UAAA;AACA,QAAA,cAAA;AAMA,QAAA,uBAAA;AACA,QAAA,QAAA,QAAA,KAAA;AAEA,QAAA,mBAAA;AAEA,QAAM,cAAc;AAEpB,aAAS,MAAM,MAAY;AACzB,cAAQ,MAAM,YAAA,aAAa,OAAO,aAAa,IAAI;IACrD;AAEA,QAAM,YAAY;AAMlB,QAAM,+BAA+B;AAErC,QAAa,+BAAb,MAAa,8BAA4B;MACvC,YAA6B,oBAA2B;AAA3B,aAAA,qBAAA;MAA8B;MAE3D,sBAAmB;AACjB,eAAO;MACT;MAEA,eAAY;AACV,eAAO;UACL,CAAC,SAAS,GAAG;YACX,oBAAoB,KAAK;;;MAG/B;MAEA,wBAAqB;AACnB,eAAO,KAAK;MACd;;MAGA,OAAO,eAAe,KAAQ;AAC5B,YACE,wBAAwB,OACxB,EAAE,OAAO,IAAI,uBAAuB,YACpC;AACA,gBAAM,IAAI,MACR,0EAA0E;QAE9E;AACA,eAAO,IAAI,8BAA6B,IAAI,uBAAuB,IAAI;MACzE;;AA9BF,IAAAA,SAAA,+BAAA;AAqCA,QAAM,kBAAN,MAAqB;MACnB,YAAoB,YAA+B;AAA/B,aAAA,aAAA;MAAkC;MAEtD,KAAK,UAAkB;AACrB,eAAO;UACL,gBAAgB,SAAA,eAAe;UAC/B,YAAY,KAAK;UACjB,QAAQ;UACR,eAAe;UACf,aAAa;;MAEjB;;AAaF,aAAgB,SAAY,MAAS;AACnC,YAAM,SAAS,KAAK,MAAK;AACzB,eAAS,IAAI,OAAO,SAAS,GAAG,IAAI,GAAG,KAAK;AAC1C,cAAM,IAAI,KAAK,MAAM,KAAK,OAAM,KAAM,IAAI,EAAE;AAC5C,cAAM,OAAO,OAAO,CAAC;AACrB,eAAO,CAAC,IAAI,OAAO,CAAC;AACpB,eAAO,CAAC,IAAI;MACd;AACA,aAAO;IACT;AAOA,aAAS,0BACP,aAAgC;AAEhC,UAAI,YAAY,WAAW,GAAG;AAC5B,eAAO,CAAA;MACT;AACA,YAAM,SAA8B,CAAA;AACpC,YAAM,gBAAqC,CAAA;AAC3C,YAAM,gBAAqC,CAAA;AAC3C,YAAM,aACJ,GAAA,qBAAA,wBAAuB,YAAY,CAAC,CAAC,MAAK,GAAA,MAAA,QAAO,YAAY,CAAC,EAAE,IAAI;AACtE,iBAAW,WAAW,aAAa;AACjC,aAAI,GAAA,qBAAA,wBAAuB,OAAO,MAAK,GAAA,MAAA,QAAO,QAAQ,IAAI,GAAG;AAC3D,wBAAc,KAAK,OAAO;QAC5B,OAAO;AACL,wBAAc,KAAK,OAAO;QAC5B;MACF;AACA,YAAM,YAAY,YAAY,gBAAgB;AAC9C,YAAM,aAAa,YAAY,gBAAgB;AAC/C,eAAS,IAAI,GAAG,IAAI,KAAK,IAAI,UAAU,QAAQ,WAAW,MAAM,GAAG,KAAK;AACtE,YAAI,IAAI,UAAU,QAAQ;AACxB,iBAAO,KAAK,UAAU,CAAC,CAAC;QAC1B;AACA,YAAI,IAAI,WAAW,QAAQ;AACzB,iBAAO,KAAK,WAAW,CAAC,CAAC;QAC3B;MACF;AACA,aAAO;IACT;AAEA,QAAM,mCACJ;AAEF,QAAa,wBAAb,MAAkC;;;;;;;;MA4EhC,YACmB,sBAA0C;AAA1C,aAAA,uBAAA;AAxEX,aAAA,WAA8B,CAAA;AAI9B,aAAA,eAAkC,qBAAA,kBAAkB;AAKpD,aAAA,yBAAyB;AAMzB,aAAA,cAA0C;AAK1C,aAAA,0BAAqD,CAC3D,YACA,eACA,UACA,eACA,iBACE;AACF,eAAK,wBACH,YACA,eACA,UACA,YAAY;QAEhB;AAEQ,aAAA,iCAAiD,MACvD,KAAK,2BAA0B;AAYzB,aAAA,6BAA6B;AAE7B,aAAA,qBAA8B;AAM9B,aAAA,YAA2B;AAE3B,aAAA,oBAAgD;AAEhD,aAAA,gBAAgC,CAAA;AAEhC,aAAA,uBAA+B;AAYrC,aAAK,yBAAyB,WAAW,MAAK;QAAE,GAAG,CAAC;AACpD,qBAAa,KAAK,sBAAsB;MAC1C;MAEQ,4BAAyB;AAC/B,eAAO,KAAK,SAAS,MAAM,WAAS,MAAM,2BAA2B;MACvE;MAEQ,0BAAuB;AAC7B,aAAK,SAAS,MAAM,WAAS,MAAM,8BAA8B,KAAK;MACxE;MAEQ,6BAA0B;;AAChC,YAAI,KAAK,aAAa;AACpB,cAAI,KAAK,sBAAsB,CAAC,KAAK,YAAY,UAAS,GAAI;AAC5D,kBAAM,eAAe,qBAAqB,KAAK,YAAY,WAAU,CAAE;AACvE,iBAAK,YACH,qBAAA,kBAAkB,mBAClB,IAAI,SAAA,kBAAkB;cACpB,SAAS;aACV,GACD,YAAY;UAEhB,OAAO;AACL,iBAAK,YACH,qBAAA,kBAAkB,OAClB,IAAI,gBAAgB,KAAK,WAAW,GACpC,IAAI;UAER;QACF,aAAW,KAAA,KAAK,uBAAiB,QAAA,OAAA,SAAA,SAAA,GAAE,YAAW,GAAG;AAC/C,gBAAM,eAAe,0CAA0C,KAAK,SAAS,sBAAsB,KAAK,oBAAoB;AAC5H,eAAK,YACH,qBAAA,kBAAkB,mBAClB,IAAI,SAAA,kBAAkB;YACpB,SAAS;WACV,GACD,YAAY;QAEhB,WAAW,KAAK,SAAS,WAAW,GAAG;AACrC,eAAK,YAAY,qBAAA,kBAAkB,MAAM,IAAI,SAAA,YAAY,IAAI,GAAG,IAAI;QACtE,OAAO;AACL,cAAI,KAAK,4BAA4B;AACnC,kBAAM,eAAe,0CAA0C,KAAK,SAAS,sBAAsB,KAAK,oBAAoB;AAC5H,iBAAK,YACH,qBAAA,kBAAkB,mBAClB,IAAI,SAAA,kBAAkB;cACpB,SAAS;aACV,GACD,YAAY;UAEhB,OAAO;AACL,iBAAK,YAAY,qBAAA,kBAAkB,YAAY,IAAI,SAAA,YAAY,IAAI,GAAG,IAAI;UAC5E;QACF;MACF;MAEQ,sBAAmB;AACzB,aAAK,qBAAqB,oBAAmB;MAC/C;MAEQ,uCAAoC;AAC1C,YAAI,CAAC,KAAK,0BAAyB,GAAI;AACrC;QACF;AACA,aAAK,oBAAmB;AACxB,aAAK,wBAAuB;AAC5B,YAAI,KAAK,4BAA4B;AACnC,eAAK,2BAA0B;AAC/B;QACF;AACA,aAAK,6BAA6B;AAClC,mBAAW,EAAE,WAAU,KAAM,KAAK,UAAU;AAC1C,qBAAW,gBAAe;QAC5B;AACA,aAAK,2BAA0B;MACjC;MAEQ,oBAAiB;AACvB,YAAI,KAAK,gBAAgB,MAAM;AAC7B,eAAK,YAAY,gCAAgC,KAAK,uBAAuB;AAC7E,eAAK,qBAAqB,oBACxB,KAAK,YAAY,eAAc,CAAE;AAEnC,eAAK,YAAY,yBACf,KAAK,8BAA8B;AAGrC,eAAK,YAAY,MAAK;AACtB,eAAK,cAAc;QACrB;MACF;MAEQ,wBACN,YACA,eACA,UACA,cAAqB;;AAErB,aAAI,KAAA,KAAK,iBAAW,QAAA,OAAA,SAAA,SAAA,GAAE,qBAAqB,UAAU,GAAG;AACtD,cAAI,aAAa,qBAAA,kBAAkB,OAAO;AACxC,iBAAK,kBAAiB;AACtB,iBAAK,2BAA0B;UACjC;AACA;QACF;AACA,mBAAW,CAAC,OAAO,KAAK,KAAK,KAAK,SAAS,QAAO,GAAI;AACpD,cAAI,WAAW,qBAAqB,MAAM,UAAU,GAAG;AACrD,gBAAI,aAAa,qBAAA,kBAAkB,OAAO;AACxC,mBAAK,eAAe,MAAM,UAAU;YACtC;AACA,gBAAI,aAAa,qBAAA,kBAAkB,mBAAmB;AACpD,oBAAM,8BAA8B;AACpC,kBAAI,cAAc;AAChB,qBAAK,YAAY;cACnB;AACA,mBAAK,qCAAoC;AACzC,kBAAI,UAAU,KAAK,wBAAwB;AACzC,qBAAK,8BAA8B,QAAQ,CAAC;cAC9C;YACF;AACA,kBAAM,WAAW,gBAAe;AAChC;UACF;QACF;MACF;MAEQ,8BAA8B,YAAkB;AACtD,qBAAa,KAAK,sBAAsB;AACxC,mBAAW,CAAC,OAAO,KAAK,KAAK,KAAK,SAAS,QAAO,GAAI;AACpD,cAAI,SAAS,YAAY;AACvB,kBAAM,kBAAkB,MAAM,WAAW,qBAAoB;AAC7D,gBACE,oBAAoB,qBAAA,kBAAkB,QACtC,oBAAoB,qBAAA,kBAAkB,YACtC;AACA,mBAAK,gBAAgB,KAAK;AAC1B;YACF;UACF;QACF;AACA,aAAK,qCAAoC;MAC3C;;;;;MAMQ,gBAAgB,iBAAuB;;AAC7C,qBAAa,KAAK,sBAAsB;AACxC,aAAK,yBAAyB;AAC9B,YACE,KAAK,SAAS,eAAe,EAAE,WAAW,qBAAoB,MAC9D,qBAAA,kBAAkB,MAClB;AACA,gBACE,iDACE,KAAK,SAAS,eAAe,EAAE,WAAW,WAAU,CAAE;AAE1D,kBAAQ,SAAS,MAAK;;AACpB,aAAAC,MAAA,KAAK,SAAS,eAAe,OAAC,QAAAA,QAAA,SAAA,SAAAA,IAAE,WAAW,gBAAe;UAC5D,CAAC;QACH;AACA,aAAK,yBAAyB,WAAW,MAAK;AAC5C,eAAK,8BAA8B,kBAAkB,CAAC;QACxD,GAAG,4BAA4B;AAC/B,SAAA,MAAA,KAAA,KAAK,wBAAuB,WAAK,QAAA,OAAA,SAAA,SAAA,GAAA,KAAA,EAAA;MACnC;;;;;;;;MASQ,eAAe,YAA+B;AACpD,cAAM,kCAAkC,WAAW,WAAU,CAAE;AAC/D,aAAK,6BAA6B;AAGlC,mBAAW,IAAG;AACd,aAAK,qBAAqB,iBAAiB,WAAW,eAAc,CAAE;AACtE,aAAK,kBAAiB;AACtB,aAAK,oBAAmB;AACxB,mBAAW,6BAA6B,KAAK,uBAAuB;AACpE,mBAAW,sBAAsB,KAAK,8BAA8B;AACpE,aAAK,cAAc;AACnB,qBAAa,KAAK,sBAAsB;AACxC,aAAK,2BAA0B;MACjC;MAEQ,YAAY,UAA6B,QAAgB,cAA2B;AAC1F,cACE,qBAAA,kBAAkB,KAAK,YAAY,IACjC,SACA,qBAAA,kBAAkB,QAAQ,CAAC;AAE/B,aAAK,eAAe;AACpB,aAAK,qBAAqB,YAAY,UAAU,QAAQ,YAAY;MACtE;MAEQ,sBAAmB;AACzB,mBAAW,SAAS,KAAK,UAAU;AAGjC,gBAAM,WAAW,gCACf,KAAK,uBAAuB;AAM9B,gBAAM,WAAW,MAAK;AACtB,eAAK,qBAAqB,oBACxB,MAAM,WAAW,eAAc,CAAE;QAErC;AACA,aAAK,yBAAyB;AAC9B,aAAK,WAAW,CAAA;MAClB;MAEQ,qBAAqB,aAAkC,SAAuB;AACpF,cAAM,2BAA2B,YAAY,IAAI,cAAW,GAAA,qBAAA,2BAA0B,OAAO,CAAC,IAAI,IAAI;AACtG,cAAM,kBAAkB,YAAY,IAAI,cAAY;UAClD,YAAY,KAAK,qBAAqB,iBAAiB,SAAS,OAAO;UACvE,6BAA6B;UAC7B;AACF,mBAAW,EAAE,WAAU,KAAM,iBAAiB;AAC5C,cAAI,WAAW,qBAAoB,MAAO,qBAAA,kBAAkB,OAAO;AACjE,iBAAK,eAAe,UAAU;AAC9B;UACF;QACF;AAIA,mBAAW,EAAE,WAAU,KAAM,iBAAiB;AAC5C,qBAAW,IAAG;AACd,eAAK,qBAAqB,iBAAiB,WAAW,eAAc,CAAE;QACxE;AACA,aAAK,oBAAmB;AACxB,aAAK,WAAW;AAChB,mBAAW,EAAE,WAAU,KAAM,KAAK,UAAU;AAC1C,qBAAW,6BAA6B,KAAK,uBAAuB;QACtE;AACA,mBAAW,SAAS,KAAK,UAAU;AACjC,cACE,MAAM,WAAW,qBAAoB,MACrC,qBAAA,kBAAkB,mBAClB;AACA,kBAAM,8BAA8B;UACtC;QACF;AACA,aAAK,8BAA8B,CAAC;AACpC,aAAK,2BAA0B;MACjC;MAEA,kBACE,mBACA,UACA,SACA,gBAAsB;AAEtB,YAAI,EAAE,oBAAoB,+BAA+B;AACvD,iBAAO;QACT;AACA,YAAI,CAAC,kBAAkB,IAAI;AACzB,cAAI,KAAK,SAAS,WAAW,KAAK,KAAK,gBAAgB,MAAM;AAC3D,iBAAK,qBAAqB,YACxB,qBAAA,kBAAkB,mBAClB,IAAI,SAAA,kBAAkB,kBAAkB,KAAK,GAC7C,kBAAkB,MAAM,OAAO;UAEnC;AACA,iBAAO;QACT;AACA,YAAI,eAAe,kBAAkB;AACrC,aAAK,qBAAqB,QAAQ,gCAAgC;AAIlE,YAAI,SAAS,sBAAqB,GAAI;AACpC,yBAAe,SAAS,YAAY;QACtC;AACA,cAAM,iBAAkB,CAAA,EAA2B,OACjD,GAAG,aAAa,IAAI,cAAY,SAAS,SAAS,CAAC;AAErD,cAAM,wBAAwB,eAAe,IAAI,cAAW,GAAA,qBAAA,2BAA0B,OAAO,CAAC,IAAI,IAAI;AACtG,cAAM,cAAc,0BAA0B,cAAc;AAC5D,aAAK,oBAAoB;AACzB,aAAK,gBAAgB;AACrB,aAAK,qBAAqB,aAAa,OAAO;AAC9C,aAAK,uBAAuB;AAC5B,YAAI,eAAe,SAAS,GAAG;AAC7B,iBAAO;QACT,OAAO;AACL,eAAK,YAAY;AACjB,iBAAO;QACT;MACF;MAEA,WAAQ;AACN,YACE,KAAK,iBAAiB,qBAAA,kBAAkB,QACxC,KAAK,mBACL;AACA,eAAK,qBAAqB,KAAK,mBAAmB,KAAK,aAAa;QACtE;MACF;MAEA,eAAY;MAGZ;MAEA,UAAO;AACL,aAAK,oBAAmB;AACxB,aAAK,kBAAiB;MACxB;MAEA,cAAW;AACT,eAAO;MACT;;AAlZF,IAAAD,SAAA,wBAAA;AAqZA,QAAM,cAAc,IAAI,6BAA6B,KAAK;AAO1D,QAAa,mBAAb,MAA6B;MAI3B,YACU,UACR,sBACQ,SACA,gBAAsB;AAHtB,aAAA,WAAA;AAEA,aAAA,UAAA;AACA,aAAA,iBAAA;AANF,aAAA,cAAiC,qBAAA,kBAAkB;AAQzD,cAAM,6BAA4B,GAAA,gBAAA,iCAChC,sBACA;UACE,aAAa,CAAC,mBAAmB,QAAQ,iBAAgB;AACvD,iBAAK,cAAc;AACnB,iBAAK,eAAe;AACpB,iCAAqB,YAAY,mBAAmB,QAAQ,YAAY;UAC1E;SACD;AAEH,aAAK,oBAAoB,IAAI,sBAC3B,yBAAyB;AAE3B,aAAK,eAAe,IAAI,SAAA,YAAY,KAAK,iBAAiB;MAC5D;MAEA,kBAAe;AACb,aAAK,kBAAkB,mBACrB,GAAA,iBAAA,mBAAkB,CAAC,KAAK,QAAQ,CAAC,GACjC,aAAW,OAAA,OAAA,OAAA,OAAA,CAAA,GACN,KAAK,OAAO,GAAA,EAAE,CAAC,gCAAgC,GAAG,KAAI,CAAA,GAC3D,KAAK,cAAc;MAEvB;;;;;;;MAQA,eAAe,aAAuB,YAA0B;AAC9D,aAAK,UAAU;AACf,aAAK,WAAW;AAChB,YAAI,KAAK,gBAAgB,qBAAA,kBAAkB,MAAM;AAC/C,eAAK,gBAAe;QACtB;MACF;MAEA,uBAAoB;AAClB,eAAO,KAAK;MACd;MAEA,YAAS;AACP,eAAO,KAAK;MACd;MAEA,cAAW;AACT,eAAO,KAAK;MACd;MAEA,WAAQ;AACN,aAAK,kBAAkB,SAAQ;MACjC;MAEA,UAAO;AACL,aAAK,kBAAkB,QAAO;MAChC;;AAnEF,IAAAA,SAAA,mBAAA;AAsEA,aAAgB,QAAK;AACnB,OAAA,GAAA,gBAAA,0BACE,WACA,uBACA,4BAA4B;AAE9B,OAAA,GAAA,gBAAA,iCAAgC,SAAS;IAC3C;;;;;;;;;;ACpoBA,QAAA,KAAA,QAAA,IAAA;AACA,QAAA,UAAA;AACA,QAAA,cAAA;AACA,QAAA,SAAA,QAAA,MAAA;AAEA,QAAM,cAAc;AAEpB,aAAS,MAAM,MAAY;AACzB,cAAQ,MAAM,YAAA,aAAa,OAAO,aAAa,IAAI;IACrD;AAiCA,QAAM,mBAAkB,GAAA,OAAA,WAAU,GAAG,QAAQ;AAE7C,QAAa,iCAAb,MAA2C;MASzC,YACU,QAA4C;AAA5C,aAAA,SAAA;AATF,aAAA,eAAsC;AACtC,aAAA,oBAAgI;AAChI,aAAA,iBAAyD;AACzD,aAAA,cAAgD,oBAAI,IAAG;AACvD,aAAA,uBAAqE;AACrE,aAAA,oBAA4D,oBAAI,IAAG;AACnE,aAAA,iBAA8B;AAKpC,YAAK,OAAO,oBAAoB,YAAgB,OAAO,mBAAmB,SAAY;AACpF,gBAAM,IAAI,MAAM,kEAAkE;QACpF;AACA,YAAI,OAAO,oBAAoB,UAAa,OAAO,sBAAsB,QAAW;AAClF,gBAAM,IAAI,MAAM,mEAAmE;QACrF;AACA,cAAM,0CAA0C,KAAK,UAAU,MAAM,CAAC;MACxE;MAEQ,qBAAkB;AACxB,YAAI,KAAK,mBAAmB;AAC1B;QACF;AACA,aAAK,oBAAoB,QAAQ,WAAW;UAC1C,KAAK,OAAO,kBAAkB,gBAAgB,KAAK,OAAO,eAAe,IAAI,QAAQ,OAAM;UAC3F,KAAK,OAAO,iBAAiB,gBAAgB,KAAK,OAAO,cAAc,IAAI,QAAQ,OAAM;UACzF,KAAK,OAAO,oBAAoB,gBAAgB,KAAK,OAAO,iBAAiB,IAAI,QAAQ,OAAM;SAChG;AACD,aAAK,kBAAkB,KAAK,CAAC,CAAC,mBAAmB,kBAAkB,mBAAmB,MAAK;AACzF,cAAI,CAAC,KAAK,cAAc;AACtB;UACF;AACA,gBAAM,gDAAgD,kBAAkB,SAAS,kBAAkB,iBAAiB,SAAS,sBAAsB,oBAAoB,MAAM;AAC7K,eAAK,iBAAiB,oBAAI,KAAI;AAC9B,eAAK,oBAAoB;AACzB,cAAI,kBAAkB,WAAW,eAAe,iBAAiB,WAAW,aAAa;AACvF,iBAAK,uBAAuB;cAC1B,aAAa,kBAAkB;cAC/B,YAAY,iBAAiB;;UAEjC,OAAO;AACL,iBAAK,uBAAuB;UAC9B;AACA,cAAI,oBAAoB,WAAW,aAAa;AAC9C,iBAAK,iBAAiB;cACpB,eAAe,oBAAoB;;UAEvC,OAAO;AACL,iBAAK,iBAAiB;UACxB;AACA,qBAAW,YAAY,KAAK,mBAAmB;AAC7C,qBAAS,KAAK,oBAAoB;UACpC;AACA,qBAAW,YAAY,KAAK,aAAa;AACvC,qBAAS,KAAK,cAAc;UAC9B;QACF,CAAC;AACD,cAAM,2CAA2C;MACnD;MAEQ,0BAAuB;AAC7B,YAAI,CAAC,KAAK,cAAc;AAKtB,gBAAM,sBAAsB,KAAK,kBAAkB,oBAAI,KAAI,GAAI,QAAO,IAAK,KAAK,eAAe,QAAO,IAAK;AAC3G,cAAI,sBAAsB,KAAK,OAAO,mBAAmB;AACvD,iBAAK,mBAAkB;UACzB;AACA,cAAI,sBAAsB,KAAK,OAAO,oBAAoB,GAAG;AAE3D,iBAAK,iBAAiB;AACtB,iBAAK,uBAAuB;UAC9B;AACA,eAAK,eAAe,YAAY,MAAM,KAAK,mBAAkB,GAAI,KAAK,OAAO,iBAAiB;AAC9F,gBAAM,+BAA+B;QACvC;MACF;MAEQ,yBAAsB;AAC5B,YAAI,KAAK,YAAY,SAAS,KAAK,KAAK,kBAAkB,SAAS,GAAG;AACpE,eAAK,oBAAoB;AACzB,cAAI,KAAK,cAAc;AACrB,0BAAc,KAAK,YAAY;AAC/B,iBAAK,eAAe;UACtB;QACF;MACF;MAEA,yBAAyB,UAAqC;AAC5D,aAAK,YAAY,IAAI,QAAQ;AAC7B,aAAK,wBAAuB;AAC5B,YAAI,KAAK,mBAAmB,QAAW;AACrC,kBAAQ,SAAS,UAAU,KAAK,cAAc;QAChD;MACF;MACA,4BAA4B,UAAqC;AAC/D,aAAK,YAAY,OAAO,QAAQ;AAChC,aAAK,uBAAsB;MAC7B;MACA,+BAA+B,UAA2C;AACxE,aAAK,kBAAkB,IAAI,QAAQ;AACnC,aAAK,wBAAuB;AAC5B,YAAI,KAAK,yBAAyB,QAAW;AAC3C,kBAAQ,SAAS,UAAU,KAAK,oBAAoB;QACtD;MACF;MACA,kCAAkC,UAA2C;AAC3E,aAAK,kBAAkB,OAAO,QAAQ;AACtC,aAAK,uBAAsB;MAC7B;;AAjHF,IAAAE,SAAA,iCAAA;;;;;;;;;;AC7DA,QAAA,YAAA;AAAS,WAAA,eAAAC,UAAA,SAAA,EAAA,YAAA,MAAA,KAAA,WAAA;AAAA,aAAA,UAAA;IAAK,EAAA,CAAA;AAAE,WAAA,eAAAA,UAAA,OAAA,EAAA,YAAA,MAAA,KAAA,WAAA;AAAA,aAAA,UAAA;IAAG,EAAA,CAAA;AACnB,QAAA,aAAA;AAGE,WAAA,eAAAA,UAAA,oBAAA,EAAA,YAAA,MAAA,KAAA,WAAA;AAAA,aAAA,WAAA;IAAgB,EAAA,CAAA;AAEhB,WAAA,eAAAA,UAAA,kBAAA,EAAA,YAAA,MAAA,KAAA,WAAA;AAAA,aAAA,WAAA;IAAc,EAAA,CAAA;AACd,WAAA,eAAAA,UAAA,oCAAA,EAAA,YAAA,MAAA,KAAA,WAAA;AAAA,aAAA,WAAA;IAAgC,EAAA,CAAA;AAElC,QAAA,eAAA;AAAkB,WAAA,eAAAA,UAAA,eAAA,EAAA,YAAA,MAAA,KAAA,WAAA;AAAA,aAAA,aAAA;IAAW,EAAA,CAAA;AAAE,WAAA,eAAAA,UAAA,iBAAA,EAAA,YAAA,MAAA,KAAA,WAAA;AAAA,aAAA,aAAA;IAAa,EAAA,CAAA;AAC5C,QAAA,aAAA;AAAmB,WAAA,eAAAA,UAAA,gBAAA,EAAA,YAAA,MAAA,KAAA,WAAA;AAAA,aAAA,WAAA;IAAY,EAAA,CAAA;AAAE,WAAA,eAAAA,UAAA,iBAAA,EAAA,YAAA,MAAA,KAAA,WAAA;AAAA,aAAA,WAAA;IAAa,EAAA,CAAA;AAC9C,QAAA,oBAAA;AAAS,WAAA,eAAAA,UAAA,kBAAA,EAAA,YAAA,MAAA,KAAA,WAAA;AAAA,aAAA,kBAAA;IAAc,EAAA,CAAA;AACvB,QAAA,kBAAA;AAIE,WAAA,eAAAA,UAAA,mCAAA,EAAA,YAAA,MAAA,KAAA,WAAA;AAAA,aAAA,gBAAA;IAA+B,EAAA,CAAA;AAC/B,WAAA,eAAAA,UAAA,4BAAA,EAAA,YAAA,MAAA,KAAA,WAAA;AAAA,aAAA,gBAAA;IAAwB,EAAA,CAAA;AACxB,WAAA,eAAAA,UAAA,0BAAA,EAAA,YAAA,MAAA,KAAA,WAAA;AAAA,aAAA,gBAAA;IAAsB,EAAA,CAAA;AACtB,WAAA,eAAAA,UAAA,4BAAA,EAAA,YAAA,MAAA,KAAA,WAAA;AAAA,aAAA,gBAAA;IAAwB,EAAA,CAAA;AACxB,WAAA,eAAAA,UAAA,gCAAA,EAAA,YAAA,MAAA,KAAA,WAAA;AAAA,aAAA,gBAAA;IAA4B,EAAA,CAAA;AAE9B,QAAA,6BAAA;AAAS,WAAA,eAAAA,UAAA,oBAAA,EAAA,YAAA,MAAA,KAAA,WAAA;AAAA,aAAA,2BAAA;IAAgB,EAAA,CAAA;AACzB,QAAA,uBAAA;AAEE,WAAA,eAAAA,UAAA,6BAAA,EAAA,YAAA,MAAA,KAAA,WAAA;AAAA,aAAA,qBAAA;IAAyB,EAAA,CAAA;AAEzB,WAAA,eAAAA,UAAA,oBAAA,EAAA,YAAA,MAAA,KAAA,WAAA;AAAA,aAAA,qBAAA;IAAgB,EAAA,CAAA;AAChB,WAAA,eAAAA,UAAA,sBAAA,EAAA,YAAA,MAAA,KAAA,WAAA;AAAA,aAAA,qBAAA;IAAkB,EAAA,CAAA;AAClB,WAAA,eAAAA,UAAA,eAAA,EAAA,YAAA,MAAA,KAAA,WAAA;AAAA,aAAA,qBAAA;IAAW,EAAA,CAAA;AAEb,QAAA,gCAAA;AAAS,WAAA,eAAAA,UAAA,4BAAA,EAAA,YAAA,MAAA,KAAA,WAAA;AAAA,aAAA,8BAAA;IAAwB,EAAA,CAAA;AACjC,QAAA,WAAA;AAEE,WAAA,eAAAA,UAAA,qBAAA,EAAA,YAAA,MAAA,KAAA,WAAA;AAAA,aAAA,SAAA;IAAiB,EAAA,CAAA;AACjB,WAAA,eAAAA,UAAA,eAAA,EAAA,YAAA,MAAA,KAAA,WAAA;AAAA,aAAA,SAAA;IAAW,EAAA,CAAA;AAGX,WAAA,eAAAA,UAAA,kBAAA,EAAA,YAAA,MAAA,KAAA,WAAA;AAAA,aAAA,SAAA;IAAc,EAAA,CAAA;AAEhB,QAAA,mBAAA;AAGE,WAAA,eAAAA,UAAA,qBAAA,EAAA,YAAA,MAAA,KAAA,WAAA;AAAA,aAAA,iBAAA;IAAiB,EAAA,CAAA;AACjB,WAAA,eAAAA,UAAA,qBAAA,EAAA,YAAA,MAAA,KAAA,WAAA;AAAA,aAAA,iBAAA;IAAiB,EAAA,CAAA;AAEnB,QAAA,WAAA;AAAiB,WAAA,eAAAA,UAAA,cAAA,EAAA,YAAA,MAAA,KAAA,WAAA;AAAA,aAAA,SAAA;IAAU,EAAA,CAAA;AAC3B,QAAA,iBAAA;AAAS,WAAA,eAAAA,UAAA,sBAAA,EAAA,YAAA,MAAA,KAAA,WAAA;AAAA,aAAA,eAAA;IAAkB,EAAA,CAAA;AAC3B,QAAA,UAAA;AAAS,WAAA,eAAAA,UAAA,wBAAA,EAAA,YAAA,MAAA,KAAA,WAAA;AAAA,aAAA,QAAA;IAAoB,EAAA,CAAA;AAC7B,QAAA,yBAAA;AAEE,WAAA,eAAAA,UAAA,yBAAA,EAAA,YAAA,MAAA,KAAA,WAAA;AAAA,aAAA,uBAAA;IAAqB,EAAA,CAAA;AAUvB,QAAA,uBAAA;AAAS,WAAA,eAAAA,UAAA,2CAAA,EAAA,YAAA,MAAA,KAAA,WAAA;AAAA,aAAA,qBAAA;IAAuC,EAAA,CAAA;AAAE,WAAA,eAAAA,UAAA,8CAAA,EAAA,YAAA,MAAA,KAAA,WAAA;AAAA,aAAA,qBAAA;IAA0C,EAAA,CAAA;AAC5F,QAAA,yBAAA;AAME,WAAA,eAAAA,UAAA,kCAAA,EAAA,YAAA,MAAA,KAAA,WAAA;AAAA,aAAA,uBAAA;IAA8B,EAAA,CAAA;AAGhC,QAAA,wBAAA;AAAS,WAAA,eAAAA,UAAA,+CAAA,EAAA,YAAA,MAAA,KAAA,WAAA;AAAA,aAAA,sBAAA;IAA2C,EAAA,CAAA;AACpD,QAAA,qBAAA;AAAS,WAAA,eAAAA,UAAA,sCAAA,EAAA,YAAA,MAAA,KAAA,WAAA;AAAA,aAAA,mBAAA;IAAkC,EAAA,CAAA;;;;;;;;;ACZ3C,IAAAC,SAAA,QAAA;AA5CA,QAAA,aAAA;AAIA,QAAA,mBAAA;AAEA,QAAM,cAAN,MAAiB;MAGf,YACE,QACQ,UACR,gBAA8B;AADtB,aAAA,WAAA;AAJF,aAAA,oBAAoB;AACpB,aAAA,YAAwB,CAAA;AAM9B,YAAI;AACJ,YAAI,OAAO,cAAc,IAAI;AAC3B,iBAAO,MAAM,OAAO;QACtB,OAAO;AACL,iBAAO,OAAO;QAChB;AACA,aAAK,YAAY,CAAC,EAAE,WAAW,CAAC,EAAE,KAAI,CAAE,EAAC,CAAE;MAC7C;MACA,mBAAgB;AACd,YAAI,CAAC,KAAK,mBAAmB;AAC3B,eAAK,oBAAoB;AACzB,kBAAQ,SACN,KAAK,WACL,GAAA,iBAAA,mBAAkB,KAAK,SAAS,GAChC,CAAA,GACA,MACA,EAAE;QAEN;MACF;MAEA,UAAO;AACL,aAAK,oBAAoB;MAC3B;MAEA,OAAO,oBAAoB,QAAe;AACxC,eAAO;MACT;;AAGF,aAAgB,QAAK;AACnB,OAAA,GAAA,WAAA,kBAAiB,QAAQ,WAAW;IACtC;;;;;;;;;AC0DA,IAAAC,SAAA,QAAA;AAxGA,QAAA,QAAA,QAAA,KAAA;AACA,QAAA,mBAAA;AAEA,QAAA,cAAA;AACA,QAAA,aAAA;AACA,QAAA,aAAA;AACA,QAAA,uBAAA;AACA,QAAA,eAAA;AACA,QAAA,UAAA;AAEA,QAAM,cAAc;AAEpB,aAAS,MAAM,MAAY;AACzB,cAAQ,MAAM,YAAA,aAAa,OAAO,aAAa,IAAI;IACrD;AAEA,QAAM,cAAc;AACpB,QAAM,cAAc;AAKpB,QAAM,eAAe;AAErB,QAAM,aAAN,MAAgB;MAId,YACE,QACQ,UACR,gBAA8B;;AADtB,aAAA,WAAA;AALF,aAAA,YAAwB,CAAA;AACxB,aAAA,QAA6B;AAC7B,aAAA,oBAAoB;AAM1B,cAAM,sCAAqC,GAAA,aAAA,aAAY,MAAM,CAAC;AAC9D,cAAM,YAAiC,CAAA;AACvC,YAAI,EAAE,OAAO,WAAW,eAAe,OAAO,WAAW,cAAc;AACrE,eAAK,QAAQ;YACX,MAAM,YAAA,OAAO;YACb,SAAS,uBAAuB,OAAO,MAAM;YAC7C,UAAU,IAAI,WAAA,SAAQ;;AAExB;QACF;AACA,cAAM,WAAW,OAAO,KAAK,MAAM,GAAG;AACtC,mBAAW,QAAQ,UAAU;AAC3B,gBAAM,YAAW,GAAA,aAAA,eAAc,IAAI;AACnC,cAAI,aAAa,MAAM;AACrB,iBAAK,QAAQ;cACX,MAAM,YAAA,OAAO;cACb,SAAS,mBAAmB,OAAO,MAAM,YAAY,IAAI;cACzD,UAAU,IAAI,WAAA,SAAQ;;AAExB;UACF;AACA,cACG,OAAO,WAAW,eAAe,EAAC,GAAA,MAAA,QAAO,SAAS,IAAI,KACtD,OAAO,WAAW,eAAe,EAAC,GAAA,MAAA,QAAO,SAAS,IAAI,GACvD;AACA,iBAAK,QAAQ;cACX,MAAM,YAAA,OAAO;cACb,SAAS,mBAAmB,OAAO,MAAM,YAAY,IAAI;cACzD,UAAU,IAAI,WAAA,SAAQ;;AAExB;UACF;AACA,oBAAU,KAAK;YACb,MAAM,SAAS;YACf,OAAM,KAAA,SAAS,UAAI,QAAA,OAAA,SAAA,KAAI;WACxB;QACH;AACA,aAAK,YAAY,UAAU,IAAI,cAAY,EAAE,WAAW,CAAC,OAAO,EAAC,EAAG;AACpE,cAAM,YAAY,OAAO,SAAS,mBAAmB,UAAU,IAAI,qBAAA,yBAAyB,CAAC;MAC/F;MACA,mBAAgB;AACd,YAAI,CAAC,KAAK,mBAAmB;AAC3B,eAAK,oBAAoB;AACzB,kBAAQ,SAAS,MAAK;AACpB,gBAAI,KAAK,OAAO;AACd,mBAAK,UACH,GAAA,iBAAA,mBAAkB,KAAK,KAAK,GAC5B,CAAA,GACA,MACA,EAAE;YAEN,OAAO;AACL,mBAAK,UACH,GAAA,iBAAA,mBAAkB,KAAK,SAAS,GAChC,CAAA,GACA,MACA,EAAE;YAEN;UACF,CAAC;QACH;MACF;MACA,UAAO;AACL,aAAK,oBAAoB;MAC3B;MAEA,OAAO,oBAAoB,QAAe;AACxC,eAAO,OAAO,KAAK,MAAM,GAAG,EAAE,CAAC;MACjC;;AAGF,aAAgB,QAAK;AACnB,OAAA,GAAA,WAAA,kBAAiB,aAAa,UAAU;AACxC,OAAA,GAAA,WAAA,kBAAiB,aAAa,UAAU;IAC1C;;;;;;;;;;AC6JA,IAAAC,SAAA,QAAA;AAvQA,QAAA,kBAAA;AAOA,QAAA,uBAAA;AACA,QAAA,WAAA;AAOA,QAAA,UAAA;AACA,QAAA,cAAA;AACA,QAAA,uBAAA;AAKA,QAAA,6BAAA;AAIA,QAAM,cAAc;AAEpB,aAAS,MAAM,MAAY;AACzB,cAAQ,MAAM,YAAA,aAAa,OAAO,aAAa,IAAI;IACrD;AAEA,QAAM,YAAY;AAElB,QAAM,gCAAN,MAAM,+BAA6B;MACjC,sBAAmB;AACjB,eAAO;MACT;MAEA,cAAA;MAAe;MAEf,eAAY;AACV,eAAO;UACL,CAAC,SAAS,GAAG,CAAA;;MAEjB;;MAGA,OAAO,eAAe,KAAQ;AAC5B,eAAO,IAAI,+BAA6B;MAC1C;;AAGF,QAAM,mBAAN,MAAsB;MACpB,YACmB,UACT,YAAY,GAAC;AADJ,aAAA,WAAA;AACT,aAAA,YAAA;MACP;MAEH,KAAK,UAAkB;AACrB,cAAM,cAAc,KAAK,SAAS,KAAK,SAAS,EAAE;AAClD,aAAK,aAAa,KAAK,YAAY,KAAK,KAAK,SAAS;AACtD,eAAO,YAAY,KAAK,QAAQ;MAClC;;;;;;MAOA,mBAAgB;AACd,eAAO,KAAK,SAAS,KAAK,SAAS,EAAE;MACvC;;AAGF,aAAS,YAAe,MAAW,YAAkB;AACnD,aAAO,CAAC,GAAG,KAAK,MAAM,UAAU,GAAG,GAAG,KAAK,MAAM,GAAG,UAAU,CAAC;IACjE;AAEA,QAAa,yBAAb,MAAmC;MAajC,YACmB,sBAA0C;AAA1C,aAAA,uBAAA;AAbX,aAAA,WAA+B,CAAA;AAE/B,aAAA,eAAkC,qBAAA,kBAAkB;AAEpD,aAAA,qBAA8C;AAE9C,aAAA,gBAAgB;AAIhB,aAAA,YAA2B;AAKjC,aAAK,6BAA4B,GAAA,gBAAA,iCAC/B,sBACA;UACE,aAAa,CAAC,mBAAmB,QAAQ,iBAAgB;AAKvD,gBAAI,KAAK,iBAAiB,qBAAA,kBAAkB,SAAS,sBAAsB,qBAAA,kBAAkB,OAAO;AAClG,mBAAK,qBAAqB,oBAAmB;YAC/C;AACA,gBAAI,cAAc;AAChB,mBAAK,YAAY;YACnB;AACA,iBAAK,wBAAuB;UAC9B;SACD;MAEL;MAEQ,uBAAuB,OAAwB;AACrD,eAAO,KAAK,SAAS,OAAO,WAAS,MAAM,qBAAoB,MAAO,KAAK,EACxE;MACL;MAEQ,0BAAuB;AAC7B,YAAI,KAAK,eAAe;AACtB;QACF;AACA,YAAI,KAAK,uBAAuB,qBAAA,kBAAkB,KAAK,IAAI,GAAG;AAC5D,gBAAM,gBAAgB,KAAK,SAAS,OAClC,WAAS,MAAM,qBAAoB,MAAO,qBAAA,kBAAkB,KAAK;AAEnE,cAAI,QAAQ;AACZ,cAAI,KAAK,uBAAuB,MAAM;AACpC,kBAAM,qBAAqB,KAAK,mBAAmB,iBAAgB;AACnE,oBAAQ,cAAc,UAAU,YAC9B,GAAA,qBAAA,eAAc,MAAM,YAAW,GAAI,kBAAkB,CAAC;AAExD,gBAAI,QAAQ,GAAG;AACb,sBAAQ;YACV;UACF;AACA,eAAK,YACH,qBAAA,kBAAkB,OAClB,IAAI,iBACF,cAAc,IAAI,YAAU;YAC1B,UAAU,MAAM,YAAW;YAC3B,QAAQ,MAAM,UAAS;YACvB,GACF,KAAK,GAEP,IAAI;QAER,WAAW,KAAK,uBAAuB,qBAAA,kBAAkB,UAAU,IAAI,GAAG;AACxE,eAAK,YAAY,qBAAA,kBAAkB,YAAY,IAAI,SAAA,YAAY,IAAI,GAAG,IAAI;QAC5E,WACE,KAAK,uBAAuB,qBAAA,kBAAkB,iBAAiB,IAAI,GACnE;AACA,gBAAM,eAAe,uDAAuD,KAAK,SAAS;AAC1F,eAAK,YACH,qBAAA,kBAAkB,mBAClB,IAAI,SAAA,kBAAkB;YACpB,SAAS;WACV,GACD,YAAY;QAEhB,OAAO;AACL,eAAK,YAAY,qBAAA,kBAAkB,MAAM,IAAI,SAAA,YAAY,IAAI,GAAG,IAAI;QACtE;AAKA,mBAAW,SAAS,KAAK,UAAU;AACjC,cAAI,MAAM,qBAAoB,MAAO,qBAAA,kBAAkB,MAAM;AAC3D,kBAAM,SAAQ;UAChB;QACF;MACF;MAEQ,YAAY,UAA6B,QAAgB,cAA2B;AAC1F,cACE,qBAAA,kBAAkB,KAAK,YAAY,IACjC,SACA,qBAAA,kBAAkB,QAAQ,CAAC;AAE/B,YAAI,aAAa,qBAAA,kBAAkB,OAAO;AACxC,eAAK,qBAAqB;QAC5B,OAAO;AACL,eAAK,qBAAqB;QAC5B;AACA,aAAK,eAAe;AACpB,aAAK,qBAAqB,YAAY,UAAU,QAAQ,YAAY;MACtE;MAEQ,sBAAmB;AACzB,mBAAW,SAAS,KAAK,UAAU;AACjC,gBAAM,QAAO;QACf;AACA,aAAK,WAAW,CAAA;MAClB;MAEA,kBACE,mBACA,UACA,SACA,gBAAsB;AAEtB,YAAI,EAAE,oBAAoB,gCAAgC;AACxD,iBAAO;QACT;AACA,YAAI,CAAC,kBAAkB,IAAI;AACzB,cAAI,KAAK,SAAS,WAAW,GAAG;AAC9B,iBAAK,YACH,qBAAA,kBAAkB,mBAClB,IAAI,SAAA,kBAAkB,kBAAkB,KAAK,GAC7C,kBAAkB,MAAM,OAAO;UAEnC;AACA,iBAAO;QACT;AACA,cAAM,aAAc,KAAK,OAAM,IAAK,kBAAkB,MAAM,SAAU;AACtE,cAAM,eAAe,YAAY,kBAAkB,OAAO,UAAU;AACpE,aAAK,oBAAmB;AACxB,YAAI,aAAa,WAAW,GAAG;AAC7B,gBAAM,eAAe,2CAA2C,cAAc;AAC9E,eAAK,YACH,qBAAA,kBAAkB,mBAClB,IAAI,SAAA,kBAAkB,EAAC,SAAS,aAAY,CAAC,GAC7C,YAAY;QAEhB;AACA,cAAM,8BAA8B,aAAa,IAAI,qBAAA,gBAAgB,CAAC;AACtE,aAAK,gBAAgB;AACrB,aAAK,WAAW,aAAa,IAC3B,cACE,IAAI,2BAAA,iBACF,UACA,KAAK,2BACL,SACA,cAAc,CACf;AAEL,mBAAW,SAAS,KAAK,UAAU;AACjC,gBAAM,gBAAe;QACvB;AACA,aAAK,gBAAgB;AACrB,aAAK,wBAAuB;AAC5B,eAAO;MACT;MAEA,WAAQ;MAIR;MACA,eAAY;MAEZ;MACA,UAAO;AACL,aAAK,oBAAmB;MAC1B;MACA,cAAW;AACT,eAAO;MACT;;AArLF,IAAAA,SAAA,yBAAA;AAwLA,aAAgB,QAAK;AACnB,OAAA,GAAA,gBAAA,0BACE,WACA,wBACA,6BAA6B;IAEjC;;;;;;;;;;;ACiiBA,IAAAC,SAAA,QAAA;AA7yBA,QAAA,uBAAA;AACA,QAAA,cAAA;AACA,QAAA,aAAA;AACA,QAAA,iBAAA;AAKA,QAAA,kBAAA;AAKA,QAAA,gCAAA;AACA,QAAA,WAAA;AACA,QAAA,uBAAA;AAMA,QAAA,yBAAA;AAIA,QAAA,UAAA;AAIA,QAAM,cAAc;AAEpB,aAAS,MAAM,MAAY;AACzB,cAAQ,MAAM,YAAA,aAAa,OAAO,aAAa,IAAI;IACrD;AAEA,QAAM,YAAY;AAElB,QAAM,8BACH,KAAA,QAAQ,IAAI,gDAA0C,QAAA,OAAA,SAAA,KAAI,YAAY;AA0BzE,QAAM,mCAA8D;MAClE,cAAc;MACd,wBAAwB;MACxB,eAAe;MACf,gBAAgB;;AAGlB,QAAM,yCACJ;MACE,WAAW;MACX,wBAAwB;MACxB,eAAe;MACf,gBAAgB;;AAWpB,aAAS,kBACP,KACA,WACA,cACA,YAAmB;AAEnB,UACE,aAAa,OACb,IAAI,SAAS,MAAM,UACnB,OAAO,IAAI,SAAS,MAAM,cAC1B;AACA,cAAM,gBAAgB,aAAa,GAAG,UAAU,IAAI,SAAS,KAAK;AAClE,cAAM,IAAI,MACR,4BAA4B,aAAa,0BAA0B,YAAY,SAAS,OAAO,IAC7F,SAAS,CACV,EAAE;MAEP;IACF;AAEA,aAAS,yBACP,KACA,WACA,YAAmB;AAEnB,YAAM,gBAAgB,aAAa,GAAG,UAAU,IAAI,SAAS,KAAK;AAClE,UAAI,aAAa,OAAO,IAAI,SAAS,MAAM,QAAW;AACpD,YAAI,EAAC,GAAA,WAAA,YAAW,IAAI,SAAS,CAAC,GAAG;AAC/B,gBAAM,IAAI,MACR,4BAA4B,aAAa,wCAAwC,OAAO,IACtF,SAAS,CACV,EAAE;QAEP;AACA,YACE,EACE,IAAI,SAAS,EAAE,WAAW,KAC1B,IAAI,SAAS,EAAE,WAAW,YAC1B,IAAI,SAAS,EAAE,SAAS,KACxB,IAAI,SAAS,EAAE,SAAS,YAE1B;AACA,gBAAM,IAAI,MACR,4BAA4B,aAAa,8DAA8D;QAE3G;MACF;IACF;AAEA,aAAS,mBAAmB,KAAU,WAAmB,YAAmB;AAC1E,YAAM,gBAAgB,aAAa,GAAG,UAAU,IAAI,SAAS,KAAK;AAClE,wBAAkB,KAAK,WAAW,UAAU,UAAU;AACtD,UACE,aAAa,OACb,IAAI,SAAS,MAAM,UACnB,EAAE,IAAI,SAAS,KAAK,KAAK,IAAI,SAAS,KAAK,MAC3C;AACA,cAAM,IAAI,MACR,4BAA4B,aAAa,yDAAyD;MAEtG;IACF;AAEA,QAAa,sCAAb,MAAa,qCAAmC;MAU9C,YACE,YACA,oBACA,mBACA,oBACA,qBACA,2BACiB,aAAqC;AAArC,aAAA,cAAA;AAEjB,YAAI,YAAY,oBAAmB,MAAO,cAAc;AACtD,gBAAM,IAAI,MACR,mEAAmE;QAEvE;AACA,aAAK,aAAa,eAAU,QAAV,eAAU,SAAV,aAAc;AAChC,aAAK,qBAAqB,uBAAkB,QAAlB,uBAAkB,SAAlB,qBAAsB;AAChD,aAAK,oBAAoB,sBAAiB,QAAjB,sBAAiB,SAAjB,oBAAqB;AAC9C,aAAK,qBAAqB,uBAAkB,QAAlB,uBAAkB,SAAlB,qBAAsB;AAChD,aAAK,sBAAsB,sBACxB,OAAA,OAAA,OAAA,OAAA,CAAA,GAAM,gCAAgC,GAAK,mBAAmB,IAC7D;AACJ,aAAK,4BAA4B,4BAC9B,OAAA,OAAA,OAAA,OAAA,CAAA,GACM,sCAAsC,GACtC,yBAAyB,IAE9B;MACN;MACA,sBAAmB;AACjB,eAAO;MACT;MACA,eAAY;;AACV,eAAO;UACL,mBAAmB;YACjB,WAAU,GAAA,WAAA,cAAa,KAAK,UAAU;YACtC,qBAAoB,GAAA,WAAA,cAAa,KAAK,kBAAkB;YACxD,oBAAmB,GAAA,WAAA,cAAa,KAAK,iBAAiB;YACtD,sBAAsB,KAAK;YAC3B,wBAAuBC,MAAA,KAAK,yBAAmB,QAAAA,QAAA,SAAAA,MAAI;YACnD,8BACE,KAAA,KAAK,+BAAyB,QAAA,OAAA,SAAA,KAAI;YACpC,cAAc,CAAC,KAAK,YAAY,aAAY,CAAE;;;MAGpD;MAEA,gBAAa;AACX,eAAO,KAAK;MACd;MACA,wBAAqB;AACnB,eAAO,KAAK;MACd;MACA,uBAAoB;AAClB,eAAO,KAAK;MACd;MACA,wBAAqB;AACnB,eAAO,KAAK;MACd;MACA,+BAA4B;AAC1B,eAAO,KAAK;MACd;MACA,qCAAkC;AAChC,eAAO,KAAK;MACd;MACA,iBAAc;AACZ,eAAO,KAAK;MACd;MAEA,OAAO,eAAe,KAAQ;;AAC5B,iCAAyB,KAAK,UAAU;AACxC,iCAAyB,KAAK,oBAAoB;AAClD,iCAAyB,KAAK,mBAAmB;AACjD,2BAAmB,KAAK,sBAAsB;AAC9C,YACE,2BAA2B,OAC3B,IAAI,0BAA0B,QAC9B;AACA,cAAI,OAAO,IAAI,0BAA0B,UAAU;AACjD,kBAAM,IAAI,MACR,kEAAkE;UAEtE;AACA,4BACE,IAAI,uBACJ,gBACA,UACA,uBAAuB;AAEzB,6BACE,IAAI,uBACJ,0BACA,uBAAuB;AAEzB,4BACE,IAAI,uBACJ,iBACA,UACA,uBAAuB;AAEzB,4BACE,IAAI,uBACJ,kBACA,UACA,uBAAuB;QAE3B;AACA,YACE,iCAAiC,OACjC,IAAI,gCAAgC,QACpC;AACA,cAAI,OAAO,IAAI,gCAAgC,UAAU;AACvD,kBAAM,IAAI,MACR,wEAAwE;UAE5E;AACA,6BACE,IAAI,6BACJ,aACA,6BAA6B;AAE/B,6BACE,IAAI,6BACJ,0BACA,6BAA6B;AAE/B,4BACE,IAAI,6BACJ,iBACA,UACA,6BAA6B;AAE/B,4BACE,IAAI,6BACJ,kBACA,UACA,6BAA6B;QAEjC;AAEA,YAAI,EAAE,kBAAkB,QAAQ,CAAC,MAAM,QAAQ,IAAI,YAAY,GAAG;AAChE,gBAAM,IAAI,MAAM,wDAAwD;QAC1E;AACA,cAAM,eAAc,GAAA,gBAAA,wBAAuB,IAAI,YAAY;AAC3D,YAAI,CAAC,aAAa;AAChB,gBAAM,IAAI,MACR,yEAAyE;QAE7E;AAEA,eAAO,IAAI,qCACT,IAAI,YAAW,GAAA,WAAA,cAAa,IAAI,QAAQ,IAAI,MAC5C,IAAI,sBAAqB,GAAA,WAAA,cAAa,IAAI,kBAAkB,IAAI,MAChE,IAAI,qBAAoB,GAAA,WAAA,cAAa,IAAI,iBAAiB,IAAI,OAC9DA,MAAA,IAAI,0BAAoB,QAAAA,QAAA,SAAAA,MAAI,MAC5B,IAAI,uBACJ,IAAI,6BACJ,WAAW;MAEf;;AAxKF,IAAAD,SAAA,sCAAA;AA2KA,QAAM,oCAAN,cACU,uBAAA,sBAAqB;MAI7B,YACE,iBACQ,UAAmB;AAE3B,cAAM,eAAe;AAFb,aAAA,WAAA;AAHF,aAAA,WAAW;MAMnB;MAEA,MAAG;AACD,aAAK,MAAM,IAAG;AACd,aAAK,YAAY;MACnB;MAEA,QAAK;AACH,aAAK,MAAM,MAAK;AAChB,aAAK,YAAY;AACjB,YAAI,KAAK,YAAY,GAAG;AACtB,cAAI,KAAK,UAAU;AACjB,kBAAM,QAAQ,KAAK,SAAS,mBAAmB,QAAQ,IAAI;AAC3D,gBAAI,SAAS,GAAG;AACd,mBAAK,SAAS,mBAAmB,OAAO,OAAO,CAAC;YAClD;UACF;QACF;MACF;MAEA,QAAK;AACH,aAAK,WAAW,KAAK;MACvB;MAEA,UAAO;AACL,aAAK,WAAW,IAAI;MACtB;MAEA,cAAW;AACT,eAAO,KAAK;MACd;MAEA,uBAAoB;AAClB,eAAO,KAAK;MACd;;AAQF,aAAS,oBAAiB;AACxB,aAAO;QACL,SAAS;QACT,SAAS;;IAEb;AAEA,QAAM,cAAN,MAAiB;MAAjB,cAAA;AACU,aAAA,eAAgC,kBAAiB;AACjD,aAAA,iBAAkC,kBAAiB;MAiB7D;MAhBE,aAAU;AACR,aAAK,aAAa,WAAW;MAC/B;MACA,aAAU;AACR,aAAK,aAAa,WAAW;MAC/B;MACA,gBAAa;AACX,aAAK,iBAAiB,KAAK;AAC3B,aAAK,eAAe,kBAAiB;MACvC;MACA,mBAAgB;AACd,eAAO,KAAK,eAAe;MAC7B;MACA,kBAAe;AACb,eAAO,KAAK,eAAe;MAC7B;;AAGF,QAAM,yBAAN,MAA4B;MAC1B,YAAoB,eAA+B,YAAmB;AAAlD,aAAA,gBAAA;AAA+B,aAAA,aAAA;MAAsB;MACzE,KAAK,UAAkB;AACrB,cAAM,cAAc,KAAK,cAAc,KAAK,QAAQ;AACpD,YAAI,YAAY,mBAAmB,SAAA,eAAe,UAAU;AAC1D,gBAAM,oBACJ,YAAY;AACd,gBAAM,WAAW,kBAAkB,YAAW;AAC9C,cAAI,UAAU;AACZ,gBAAI,cAAc,YAAY;AAC9B,gBAAI,KAAK,YAAY;AACnB,4BAAc,CAAC,YAAY,SAAS,aAAY;;AAC9C,oBAAI,eAAe,YAAA,OAAO,IAAI;AAC5B,2BAAS,QAAQ,WAAU;gBAC7B,OAAO;AACL,2BAAS,QAAQ,WAAU;gBAC7B;AACA,iBAAAC,MAAA,YAAY,iBAAW,QAAAA,QAAA,SAAA,SAAAA,IAAA,KAAA,aAAG,YAAY,SAAS,QAAQ;cACzD;YACF;AACA,mBAAA,OAAA,OAAA,OAAA,OAAA,CAAA,GACK,WAAW,GAAA,EACd,YAAY,kBAAkB,qBAAoB,GAClD,YAAwB,CAAA;UAE5B,OAAO;AACL,mBAAA,OAAA,OAAA,OAAA,OAAA,CAAA,GACK,WAAW,GAAA,EACd,YAAY,kBAAkB,qBAAoB,EAAE,CAAA;UAExD;QACF,OAAO;AACL,iBAAO;QACT;MACF;;AAUF,QAAa,+BAAb,MAAyC;MAOvC,YACE,sBAA0C;AANpC,aAAA,WAAW,IAAI,qBAAA,YAAW;AAC1B,aAAA,eAA2D;AAE3D,aAAA,iBAA8B;AAKpC,aAAK,gBAAgB,IAAI,8BAAA,0BACvB,GAAA,eAAA,iCAAgC,sBAAsB;UACpD,kBAAkB,CAChB,mBACA,mBACE;AACF,kBAAM,qBAAqB,qBAAqB,iBAC9C,mBACA,cAAc;AAEhB,kBAAM,WACJ,KAAK,SAAS,wBAAwB,iBAAiB;AACzD,kBAAM,oBAAoB,IAAI,kCAC5B,oBACA,QAAQ;AAEV,iBAAI,aAAQ,QAAR,aAAQ,SAAA,SAAR,SAAU,8BAA6B,MAAM;AAE/C,gCAAkB,MAAK;YACzB;AACA,yBAAQ,QAAR,aAAQ,SAAA,SAAR,SAAU,mBAAmB,KAAK,iBAAiB;AACnD,mBAAO;UACT;UACA,aAAa,CAAC,mBAAsC,QAAgB,iBAAwB;AAC1F,gBAAI,sBAAsB,qBAAA,kBAAkB,OAAO;AACjD,mCAAqB,YACnB,mBACA,IAAI,uBAAuB,QAAQ,KAAK,kBAAiB,CAAE,GAC3D,YAAY;YAEhB,OAAO;AACL,mCAAqB,YAAY,mBAAmB,QAAQ,YAAY;YAC1E;UACF;SACD,CAAC;AAEJ,aAAK,gBAAgB,YAAY,MAAK;QAAE,GAAG,CAAC;AAC5C,sBAAc,KAAK,aAAa;MAClC;MAEQ,oBAAiB;AACvB,eACE,KAAK,iBAAiB,SACrB,KAAK,aAAa,6BAA4B,MAAO,QACpD,KAAK,aAAa,mCAAkC,MAAO;MAEjE;MAEQ,4BAAyB;AAC/B,YAAI,gBAAgB;AACpB,mBAAW,YAAY,KAAK,SAAS,OAAM,GAAI;AAC7C,cAAI,SAAS,6BAA6B,MAAM;AAC9C,6BAAiB;UACnB;QACF;AACA,eAAQ,gBAAgB,MAAO,KAAK,SAAS;MAC/C;MAEQ,oBAAoB,mBAAuB;AACjD,YAAI,CAAC,KAAK,cAAc;AACtB;QACF;AACA,cAAM,oBAAoB,KAAK,aAAa,6BAA4B;AACxE,YAAI,CAAC,mBAAmB;AACtB;QACF;AACA,cAAM,4BAA4B;AAElC,cAAM,sBAAsB,kBAAkB;AAC9C,YAAI,2BAA2B;AAC/B,cAAM,eAAyB,CAAA;AAC/B,mBAAW,CAAC,UAAU,QAAQ,KAAK,KAAK,SAAS,QAAO,GAAI;AAC1D,gBAAM,YAAY,SAAS,QAAQ,iBAAgB;AACnD,gBAAM,WAAW,SAAS,QAAQ,gBAAe;AACjD,gBACE,gBACE,GAAA,qBAAA,kBAAiB,QAAQ,IACzB,iBACA,YACA,eACA,WACA,0BACA,mBAAmB;AAEvB,cAAI,YAAY,YAAY,qBAAqB;AAC/C,wCAA4B;AAC5B,yBAAa,KAAK,aAAa,YAAY,SAAS;UACtD;QACF;AACA,cACE,WACE,2BACA,sDACA,KAAK,0BAAyB,IAC9B,oBACA,eACA,GAAG;AAEP,YAAI,2BAA2B,kBAAkB,eAAe;AAC9D;QACF;AAGA,cAAM,kBACJ,aAAa,OAAO,CAAC,GAAG,MAAM,IAAI,CAAC,IAAI,aAAa;AACtD,YAAI,0BAA0B;AAC9B,mBAAW,QAAQ,cAAc;AAC/B,gBAAM,YAAY,OAAO;AACzB,qCAA2B,YAAY;QACzC;AACA,cAAM,sBAAsB,0BAA0B,aAAa;AACnE,cAAM,mBAAmB,KAAK,KAAK,mBAAmB;AACtD,cAAM,oBACJ,kBACA,oBAAoB,kBAAkB,eAAe;AACvD,cACE,WAAW,mBAAmB,wBAAwB,iBAAiB;AAIzE,mBAAW,CAAC,SAAS,QAAQ,KAAK,KAAK,SAAS,QAAO,GAAI;AAEzD,cACE,KAAK,0BAAyB,KAC9B,KAAK,aAAa,sBAAqB,GACvC;AACA;UACF;AAEA,gBAAM,YAAY,SAAS,QAAQ,iBAAgB;AACnD,gBAAM,WAAW,SAAS,QAAQ,gBAAe;AACjD,cAAI,YAAY,WAAW,qBAAqB;AAC9C;UACF;AAEA,gBAAM,cAAc,aAAa,YAAY;AAC7C,gBAAM,wBAAwB,UAAU,kBAAkB,WAAW;AACrE,cAAI,cAAc,mBAAmB;AACnC,kBAAM,eAAe,KAAK,OAAM,IAAK;AACrC,kBACE,eACE,UACA,mBACA,eACA,6BACA,kBAAkB,sBAAsB;AAE5C,gBAAI,eAAe,kBAAkB,wBAAwB;AAC3D,oBAAM,wBAAwB,OAAO;AACrC,mBAAK,MAAM,UAAU,iBAAiB;YACxC;UACF;QACF;MACF;MAEQ,0BAA0B,mBAAuB;AACvD,YAAI,CAAC,KAAK,cAAc;AACtB;QACF;AACA,cAAM,0BACJ,KAAK,aAAa,mCAAkC;AACtD,YAAI,CAAC,yBAAyB;AAC5B;QACF;AACA,cACE,iDACE,wBAAwB,YACxB,+BACA,wBAAwB,cAAc;AAG1C,YAAI,4BAA4B;AAChC,mBAAW,YAAY,KAAK,SAAS,OAAM,GAAI;AAC7C,gBAAM,YAAY,SAAS,QAAQ,iBAAgB;AACnD,gBAAM,WAAW,SAAS,QAAQ,gBAAe;AACjD,cAAI,YAAY,YAAY,wBAAwB,gBAAgB;AAClE,yCAA6B;UAC/B;QACF;AACA,YAAI,4BAA4B,wBAAwB,eAAe;AACrE;QACF;AAGA,mBAAW,CAAC,SAAS,QAAQ,KAAK,KAAK,SAAS,QAAO,GAAI;AAEzD,cACE,KAAK,0BAAyB,KAC9B,KAAK,aAAa,sBAAqB,GACvC;AACA;UACF;AAEA,gBAAM,YAAY,SAAS,QAAQ,iBAAgB;AACnD,gBAAM,WAAW,SAAS,QAAQ,gBAAe;AACjD,gBAAM,yBAAyB,YAAY,eAAe,QAAQ;AAClE,cAAI,YAAY,WAAW,wBAAwB,gBAAgB;AACjE;UACF;AAEA,gBAAM,oBAAqB,WAAW,OAAQ,WAAW;AACzD,cAAI,oBAAoB,wBAAwB,WAAW;AACzD,kBAAM,eAAe,KAAK,OAAM,IAAK;AACrC,kBACE,eACE,UACA,mBACA,eACA,6BACA,wBAAwB,sBAAsB;AAElD,gBAAI,eAAe,wBAAwB,wBAAwB;AACjE,oBAAM,wBAAwB,OAAO;AACrC,mBAAK,MAAM,UAAU,iBAAiB;YACxC;UACF;QACF;MACF;MAEQ,MAAM,UAAoB,mBAAuB;AACvD,iBAAS,2BAA2B,oBAAI,KAAI;AAC5C,iBAAS,0BAA0B;AACnC,mBAAW,qBAAqB,SAAS,oBAAoB;AAC3D,4BAAkB,MAAK;QACzB;MACF;MAEQ,QAAQ,UAAkB;AAChC,iBAAS,2BAA2B;AACpC,mBAAW,qBAAqB,SAAS,oBAAoB;AAC3D,4BAAkB,QAAO;QAC3B;MACF;MAEQ,mBAAgB;AACtB,mBAAW,YAAY,KAAK,SAAS,OAAM,GAAI;AAC7C,mBAAS,QAAQ,cAAa;QAChC;MACF;MAEQ,WAAW,SAAe;;AAChC,aAAK,gBAAgB,WAAW,MAAM,KAAK,UAAS,GAAI,OAAO;AAC/D,SAAA,MAAAA,MAAA,KAAK,eAAc,WAAK,QAAA,OAAA,SAAA,SAAA,GAAA,KAAAA,GAAA;MAC1B;MAEQ,YAAS;AACf,cAAM,oBAAoB,oBAAI,KAAI;AAClC,cAAM,wBAAwB;AAE9B,aAAK,iBAAgB;AAErB,YAAI,CAAC,KAAK,cAAc;AACtB;QACF;AACA,aAAK,iBAAiB;AACtB,aAAK,WAAW,KAAK,aAAa,cAAa,CAAE;AAEjD,aAAK,oBAAoB,iBAAiB;AAC1C,aAAK,0BAA0B,iBAAiB;AAEhD,mBAAW,CAAC,SAAS,QAAQ,KAAK,KAAK,SAAS,QAAO,GAAI;AACzD,cAAI,SAAS,6BAA6B,MAAM;AAC9C,gBAAI,SAAS,yBAAyB,GAAG;AACvC,uBAAS,0BAA0B;YACrC;UACF,OAAO;AACL,kBAAM,qBAAqB,KAAK,aAAa,sBAAqB;AAClE,kBAAM,oBAAoB,KAAK,aAAa,qBAAoB;AAChE,kBAAM,aAAa,IAAI,KACrB,SAAS,yBAAyB,QAAO,CAAE;AAE7C,uBAAW,gBACT,WAAW,gBAAe,IACxB,KAAK,IACH,qBAAqB,SAAS,wBAC9B,KAAK,IAAI,oBAAoB,iBAAiB,CAAC,CAChD;AAEL,gBAAI,aAAa,oBAAI,KAAI,GAAI;AAC3B,oBAAM,gBAAgB,OAAO;AAC7B,mBAAK,QAAQ,QAAQ;YACvB;UACF;QACF;MACF;MAEA,kBACE,cACA,UACA,SACA,gBAAsB;AAEtB,YAAI,EAAE,oBAAoB,sCAAsC;AAC9D,iBAAO;QACT;AACA,cAAM,kCAAkC,KAAK,UAAU,SAAS,aAAY,GAAI,QAAW,CAAC,CAAC;AAC7F,YAAI,aAAa,IAAI;AACnB,qBAAW,YAAY,aAAa,OAAO;AACzC,gBAAI,CAAC,KAAK,SAAS,IAAI,QAAQ,GAAG;AAChC,oBAAM,2BAA0B,GAAA,qBAAA,kBAAiB,QAAQ,CAAC;AAC1D,mBAAK,SAAS,IAAI,UAAU;gBAC1B,SAAS,IAAI,YAAW;gBACxB,0BAA0B;gBAC1B,wBAAwB;gBACxB,oBAAoB,CAAA;eACrB;YACH;UACF;AACA,eAAK,SAAS,cAAc,aAAa,KAAK;QAChD;AACA,cAAM,cAAc,SAAS,eAAc;AAC3C,aAAK,cAAc,kBAAkB,cAAc,aAAa,SAAS,cAAc;AAEvF,YACE,SAAS,6BAA4B,KACrC,SAAS,mCAAkC,GAC3C;AACA,cAAI,KAAK,gBAAgB;AACvB,kBAAM,yCAAyC;AAC/C,yBAAa,KAAK,aAAa;AAC/B,kBAAM,iBACJ,SAAS,cAAa,MACrB,oBAAI,KAAI,GAAG,QAAO,IAAK,KAAK,eAAe,QAAO;AACrD,iBAAK,WAAW,cAAc;UAChC,OAAO;AACL,kBAAM,oBAAoB;AAC1B,iBAAK,iBAAiB,oBAAI,KAAI;AAC9B,iBAAK,WAAW,SAAS,cAAa,CAAE;AACxC,iBAAK,iBAAgB;UACvB;QACF,OAAO;AACL,gBAAM,sCAAsC;AAC5C,eAAK,iBAAiB;AACtB,uBAAa,KAAK,aAAa;AAC/B,qBAAW,YAAY,KAAK,SAAS,OAAM,GAAI;AAC7C,iBAAK,QAAQ,QAAQ;AACrB,qBAAS,yBAAyB;UACpC;QACF;AAEA,aAAK,eAAe;AACpB,eAAO;MACT;MACA,WAAQ;AACN,aAAK,cAAc,SAAQ;MAC7B;MACA,eAAY;AACV,aAAK,cAAc,aAAY;MACjC;MACA,UAAO;AACL,qBAAa,KAAK,aAAa;AAC/B,aAAK,cAAc,QAAO;MAC5B;MACA,cAAW;AACT,eAAO;MACT;;AA7WF,IAAAD,SAAA,+BAAA;AAgXA,aAAgB,QAAK;AACnB,UAAI,2BAA2B;AAC7B,SAAA,GAAA,eAAA,0BACE,WACA,8BACA,mCAAmC;MAEvC;IACF;;;;;;;;;;ACtzBA,QAAM,MAAM;AACZ,QAAM,SAAS,CAAC,MAAc,KAAK,MAAM,IAAI,CAAC;AAC9C,QAAM,OAAO,CAAC,MAAc,IAAI,IAAI;AACpC,QAAM,QAAQ,CAAC,MAAc,IAAI,IAAI;AAMrC,QAAa,gBAAb,MAA0B;;;;;;MAOxB,YAA6B,aAAa,CAAC,GAAM,MAAS,IAAI,GAAC;AAAlC,aAAA,aAAA;AANZ,aAAA,OAAY,CAAA;MAMqC;;;;MAKlE,OAAI;AACF,eAAO,KAAK,KAAK;MACnB;;;;MAIA,UAAO;AACL,eAAO,KAAK,KAAI,KAAM;MACxB;;;;;;MAMA,OAAI;AACF,eAAO,KAAK,KAAK,GAAG;MACtB;;;;;;MAMA,QAAQ,QAAW;AACjB,eAAO,QAAQ,WAAQ;AACrB,eAAK,KAAK,KAAK,KAAK;AACpB,eAAK,OAAM;QACb,CAAC;AACD,eAAO,KAAK,KAAI;MAClB;;;;;MAKA,MAAG;AACD,cAAM,cAAc,KAAK,KAAI;AAC7B,cAAM,SAAS,KAAK,KAAI,IAAK;AAC7B,YAAI,SAAS,KAAK;AAChB,eAAK,KAAK,KAAK,MAAM;QACvB;AACA,aAAK,KAAK,IAAG;AACb,aAAK,SAAQ;AACb,eAAO;MACT;;;;;;;MAOA,QAAQ,OAAQ;AACd,cAAM,gBAAgB,KAAK,KAAI;AAC/B,aAAK,KAAK,GAAG,IAAI;AACjB,aAAK,SAAQ;AACb,eAAO;MACT;MACQ,QAAQ,GAAW,GAAS;AAClC,eAAO,KAAK,WAAW,KAAK,KAAK,CAAC,GAAG,KAAK,KAAK,CAAC,CAAC;MACnD;MACQ,KAAK,GAAW,GAAS;AAC/B,SAAC,KAAK,KAAK,CAAC,GAAG,KAAK,KAAK,CAAC,CAAC,IAAI,CAAC,KAAK,KAAK,CAAC,GAAG,KAAK,KAAK,CAAC,CAAC;MAC5D;MACQ,SAAM;AACZ,YAAI,OAAO,KAAK,KAAI,IAAK;AACzB,eAAO,OAAO,OAAO,KAAK,QAAQ,MAAM,OAAO,IAAI,CAAC,GAAG;AACrD,eAAK,KAAK,MAAM,OAAO,IAAI,CAAC;AAC5B,iBAAO,OAAO,IAAI;QACpB;MACF;MACQ,WAAQ;AACd,YAAI,OAAO;AACX,eACG,KAAK,IAAI,IAAI,KAAK,KAAI,KAAM,KAAK,QAAQ,KAAK,IAAI,GAAG,IAAI,KACzD,MAAM,IAAI,IAAI,KAAK,KAAI,KAAM,KAAK,QAAQ,MAAM,IAAI,GAAG,IAAI,GAC5D;AACA,cAAI,WAAY,MAAM,IAAI,IAAI,KAAK,KAAI,KAAM,KAAK,QAAQ,MAAM,IAAI,GAAG,KAAK,IAAI,CAAC,IAAK,MAAM,IAAI,IAAI,KAAK,IAAI;AAC7G,eAAK,KAAK,MAAM,QAAQ;AACxB,iBAAO;QACT;MACF;;AA1FF,IAAAE,SAAA,gBAAA;;;;;;;;;;AC6cA,IAAAC,SAAA,QAAA;AApdA,QAAA,uBAAA;AACA,QAAA,cAAA;AACA,QAAA,aAAA;AAEA,QAAA,kBAAA;AACA,QAAA,6BAAA;AACA,QAAA,UAAA;AACA,QAAA,SAAA;AACA,QAAA,WAAA;AACA,QAAA,mBAAA;AACA,QAAA,uBAAA;AAEA,QAAM,cAAc;AAEpB,aAAS,MAAM,MAAY;AACzB,cAAQ,MAAM,YAAA,aAAa,OAAO,aAAa,IAAI;IACrD;AAEA,QAAM,YAAY;AAElB,QAAM,kCAAkC;AACxC,QAAM,6BAA6B;AACnC,QAAM,sCAAsC,IAAI;AAChD,QAAM,kCAAkC;AACxC,QAAM,oCAAoC;AAU1C,aAAS,kBACP,KACA,WACA,cAA0B;AAE1B,UACE,aAAa,OACb,IAAI,SAAS,MAAM,UACnB,OAAO,IAAI,SAAS,MAAM,cAC1B;AACA,cAAM,IAAI,MACR,+BAA+B,SAAS,0BAA0B,YAAY,SAAS,OAAO,IAC5F,SAAS,CACV,EAAE;MAEP;IACF;AAEA,aAAS,mBAAmB,KAAU,WAAiB;AACrD,UAAI,aAAa,OAAO,IAAI,SAAS,MAAM,UAAa,IAAI,SAAS,MAAM,MAAM;AAC/E,YAAI;AACJ,aAAI,GAAA,WAAA,YAAW,IAAI,SAAS,CAAC,GAAG;AAC9B,2BAAiB,IAAI,SAAS;QAChC,YAAW,GAAA,WAAA,mBAAkB,IAAI,SAAS,CAAC,GAAG;AAC5C,4BAAiB,GAAA,WAAA,2BAA0B,IAAI,SAAS,CAAC;QAC3D,WAAW,OAAO,IAAI,SAAS,MAAM,UAAU;AAC7C,gBAAM,kBAAiB,GAAA,WAAA,eAAc,IAAI,SAAS,CAAC;AACnD,cAAI,CAAC,gBAAgB;AACnB,kBAAM,IAAI,MAAM,+BAA+B,SAAS,qCAAqC,IAAI,SAAS,CAAC,EAAE;UAC/G;AACA,2BAAiB;QACnB,OAAO;AACL,gBAAM,IAAI,MAAM,+BAA+B,SAAS,4BAA4B,OAAO,IAAI,SAAS,CAAC,EAAE;QAC7G;AACA,gBAAO,GAAA,WAAA,cAAa,cAAc;MACpC;AACA,aAAO;IACT;AAEA,QAAa,wCAAb,MAAa,uCAAqC;MAQhD,YACE,qBACA,0BACA,kBACA,0BACA,sBACA,yBAAsC;AAEtC,aAAK,sBAAsB,wBAAmB,QAAnB,wBAAmB,SAAnB,sBAAuB;AAClD,aAAK,2BAA2B,6BAAwB,QAAxB,6BAAwB,SAAxB,2BAA4B;AAC5D,aAAK,mBAAmB,qBAAgB,QAAhB,qBAAgB,SAAhB,mBAAoB;AAC5C,aAAK,2BAA2B,6BAAwB,QAAxB,6BAAwB,SAAxB,2BAA4B;AAC5D,aAAK,uBAAuB,KAAK,IAAI,yBAAoB,QAApB,yBAAoB,SAApB,uBAAwB,iCAAiC,GAAG;AACjG,aAAK,0BAA0B,4BAAuB,QAAvB,4BAAuB,SAAvB,0BAA2B;MAC5D;MAEA,sBAAmB;AACjB,eAAO;MACT;MACA,eAAY;AACV,eAAO;UACL,wBAAwB,KAAK;UAC7B,4BAA2B,GAAA,WAAA,mBAAiB,GAAA,WAAA,cAAa,KAAK,wBAAwB,CAAC;UACvF,kBAAiB,GAAA,WAAA,mBAAiB,GAAA,WAAA,cAAa,KAAK,gBAAgB,CAAC;UACrE,2BAA0B,GAAA,WAAA,mBAAiB,GAAA,WAAA,cAAa,KAAK,wBAAwB,CAAC;UACtF,uBAAsB,GAAA,WAAA,mBAAiB,GAAA,WAAA,cAAa,KAAK,oBAAoB,CAAC;UAC9E,2BAA2B,KAAK;;MAEpC;MACA,OAAO,eAAe,KAAQ;AAC5B,0BAAkB,KAAK,0BAA0B,SAAS;AAC1D,0BAAkB,KAAK,6BAA6B,QAAQ;AAC5D,YAAI,IAAI,4BAA4B,GAAG;AACrC,gBAAM,IAAI,MAAM,2DAA2D;QAC7E;AACA,eAAO,IAAI,uCACT,IAAI,wBACJ,mBAAmB,KAAK,2BAA2B,GACnD,mBAAmB,KAAK,iBAAiB,GACzC,mBAAmB,KAAK,0BAA0B,GAClD,mBAAmB,KAAK,sBAAsB,GAC9C,IAAI,yBAAyB;MAEjC;MAEA,yBAAsB;AACpB,eAAO,KAAK;MACd;MACA,8BAA2B;AACzB,eAAO,KAAK;MACd;MACA,sBAAmB;AACjB,eAAO,KAAK;MACd;MACA,8BAA2B;AACzB,eAAO,KAAK;MACd;MACA,0BAAuB;AACrB,eAAO,KAAK;MACd;MACA,6BAA0B;AACxB,eAAO,KAAK;MACd;;AAtEF,IAAAA,SAAA,wCAAA;AAwFA,QAAM,2BAAN,MAA8B;MAE5B,YAAY,UAA6C,gBAAqC;AAArC,aAAA,iBAAA;AADjD,aAAA,QAAmC,IAAI,iBAAA,cAAc,CAAC,GAAG,MAAM,EAAE,WAAW,EAAE,QAAQ;AAE5F,cAAM,iBAAiB,SAAS,OAAO,YAAU,OAAO,SAAS,CAAC;AAClE,YAAI;AACJ,YAAI,eAAe,SAAS,GAAG;AAC7B,0BAAgB;QAClB,OAAO;AACL,cAAI,YAAoB;AACxB,qBAAW,EAAE,OAAM,KAAM,gBAAgB;AACvC,yBAAa;UACf;AACA,0BAAgB,YAAY,eAAe;QAC7C;AACA,mBAAW,SAAS,UAAU;AAC5B,gBAAM,SAAS,MAAM,SAAS,IAAI,IAAI,MAAM,SAAS;AACrD,eAAK,MAAM,KAAK;YACd,cAAc,MAAM;YACpB,QAAQ,MAAM;YACd;YACA,UAAU,KAAK,OAAM,IAAK;WAC3B;QACH;MACF;MACA,KAAK,UAAkB;AACrB,cAAM,QAAQ,KAAK,MAAM,IAAG;AAC5B,aAAK,MAAM,KAAI,OAAA,OAAA,OAAA,OAAA,CAAA,GACV,KAAK,GAAA,EACR,UAAU,MAAM,WAAW,MAAM,OAAM,CAAA,CAAA;AAEzC,cAAM,YAAY,MAAM,OAAO,KAAK,QAAQ;AAC5C,YAAI,UAAU,mBAAmB,SAAA,eAAe,UAAU;AACxD,cAAI,KAAK,gBAAgB;AACvB,mBAAA,OAAA,OAAA,OAAA,OAAA,CAAA,GACK,SAAS,GAAA,EACZ,cAAa,GAAA,OAAA,qBAAoB,gBAAc,KAAK,eAAgB,YAAY,MAAM,YAAY,GAAG,UAAU,WAAW,EAAC,CAAA;UAE/H,OAAO;AACL,kBAAM,oBAAoB,UAAU;AACpC,mBAAA,OAAA,OAAA,OAAA,OAAA,CAAA,GACK,SAAS,GAAA,EACZ,YAAY,kBAAkB,qBAAoB,EAAE,CAAA;UAExD;QACF,OAAO;AACL,iBAAO;QACT;MACF;;AAWF,QAAM,iCAAN,MAAoC;MAalC,YAA6B,sBAA0C;AAA1C,aAAA,uBAAA;AAZrB,aAAA,eAA6D;AAE7D,aAAA,WAAoC,oBAAI,IAAG;AAE3C,aAAA,eAAkC,qBAAA,kBAAkB;AAEpD,aAAA,gBAAgB;AAEhB,aAAA,YAA2B;AAE3B,aAAA,oBAA2C;MAEuB;MAElE,uBAAuB,OAAwB;AACrD,YAAI,QAAQ;AACZ,mBAAW,SAAS,KAAK,SAAS,OAAM,GAAI;AAC1C,cAAI,MAAM,MAAM,qBAAoB,MAAO,OAAO;AAChD,qBAAS;UACX;QACF;AACA,eAAO;MACT;MAEA,aAAa,OAAmB,YAAkC;;AAChE,cAAM,MAAM,WAAW;AACvB,YAAI,cAAc,WAAW;AAC7B,YAAI,cAAc,KAAK,MAAM,GAAG;AAC9B,yBAAgB,WAAW,MAAM,QAAQ,MAAA,KAAA,KAAK,kBAAY,QAAA,OAAA,SAAA,SAAA,GAAE,2BAA0B,OAAE,QAAA,OAAA,SAAA,KAAI;QAC9F;AACA,cAAM,YAAY,gBAAgB,IAAI,IAAI,MAAM;AAChD,YAAI,cAAc,GAAG;AACnB;QACF;AACA,cAAM,MAAM,oBAAI,KAAI;AACpB,YAAI,MAAM,kBAAkB,MAAM;AAChC,gBAAM,gBAAgB;QACxB;AACA,cAAM,cAAc;AACpB,cAAM,SAAS;MACjB;MAEA,UAAU,OAAiB;AACzB,YAAI,CAAC,KAAK,cAAc;AACtB,iBAAO;QACT;AACA,cAAM,OAAM,oBAAI,KAAI,GAAG,QAAO;AAC9B,YAAI,MAAM,MAAM,YAAY,QAAO,KAAM,KAAK,aAAa,4BAA2B,GAAI;AACxF,gBAAM,gBAAgB;AACtB,iBAAO;QACT;AACA,cAAM,iBAAiB,KAAK,aAAa,oBAAmB;AAC5D,YAAI,iBAAiB,MAAM,MAAM,kBAAkB,QAAQ,MAAM,MAAM,cAAc,QAAO,IAAK,iBAAiB;AAChH,iBAAO;QACT;AACA,eAAO,MAAM;MACf;MAEQ,0BAAuB;AAC7B,YAAI,KAAK,iBAAiB,CAAC,KAAK,cAAc;AAC5C;QACF;AACA,YAAI,KAAK,uBAAuB,qBAAA,kBAAkB,KAAK,IAAI,GAAG;AAC5D,gBAAM,kBAAoC,CAAA;AAC1C,qBAAW,CAAC,UAAU,KAAK,KAAK,KAAK,UAAU;AAC7C,gBAAI,MAAM,MAAM,qBAAoB,MAAO,qBAAA,kBAAkB,OAAO;AAClE;YACF;AACA,4BAAgB,KAAK;cACnB,cAAc;cACd,QAAQ,MAAM,MAAM,UAAS;cAC7B,QAAQ,KAAK,UAAU,KAAK;aAC7B;UACH;AACA,gBAAM,kCAAkC,gBAAgB,IAAI,WAAS,MAAM,eAAe,MAAM,MAAM,MAAM,EAAE,KAAK,GAAG,CAAC;AACvH,cAAI;AACJ,cAAI,CAAC,KAAK,aAAa,uBAAsB,GAAI;AAC/C,6BAAiB,CAAC,YAAY,iBAAgB;AAC5C,oBAAM,aAAa,KAAK,SAAS,IAAI,YAAY;AACjD,kBAAI,YAAY;AACd,qBAAK,aAAa,YAAY,UAAU;cAC1C;YACF;UACF,OAAO;AACL,6BAAiB;UACnB;AACA,eAAK,YACH,qBAAA,kBAAkB,OAClB,IAAI,yBACF,iBACA,cAAc,GAEhB,IAAI;QAER,WAAW,KAAK,uBAAuB,qBAAA,kBAAkB,UAAU,IAAI,GAAG;AACxE,eAAK,YAAY,qBAAA,kBAAkB,YAAY,IAAI,SAAA,YAAY,IAAI,GAAG,IAAI;QAC5E,WACE,KAAK,uBAAuB,qBAAA,kBAAkB,iBAAiB,IAAI,GACnE;AACA,gBAAM,eAAe,gEAAgE,KAAK,SAAS;AACnG,eAAK,YACH,qBAAA,kBAAkB,mBAClB,IAAI,SAAA,kBAAkB;YACpB,SAAS;WACV,GACD,YAAY;QAEhB,OAAO;AACL,eAAK,YAAY,qBAAA,kBAAkB,MAAM,IAAI,SAAA,YAAY,IAAI,GAAG,IAAI;QACtE;AAKA,mBAAW,EAAC,MAAK,KAAK,KAAK,SAAS,OAAM,GAAI;AAC5C,cAAI,MAAM,qBAAoB,MAAO,qBAAA,kBAAkB,MAAM;AAC3D,kBAAM,SAAQ;UAChB;QACF;MACF;MAEQ,YAAY,UAA6B,QAAgB,cAA2B;AAC1F,cACE,qBAAA,kBAAkB,KAAK,YAAY,IACjC,SACA,qBAAA,kBAAkB,QAAQ,CAAC;AAE/B,aAAK,eAAe;AACpB,aAAK,qBAAqB,YAAY,UAAU,QAAQ,YAAY;MACtE;MAEA,kBAAkB,mBAAyC,UAAoC,SAAyB,gBAAsB;;AAC5I,YAAI,EAAE,oBAAoB,wCAAwC;AAChE,iBAAO;QACT;AACA,YAAI,CAAC,kBAAkB,IAAI;AACzB,cAAI,KAAK,SAAS,SAAS,GAAG;AAC5B,iBAAK,YACH,qBAAA,kBAAkB,mBAClB,IAAI,SAAA,kBAAkB,kBAAkB,KAAK,GAC7C,kBAAkB,MAAM,OAAO;UAEnC;AACA,iBAAO;QACT;AACA,YAAI,kBAAkB,MAAM,WAAW,GAAG;AACxC,gBAAM,eAAe,2CAA2C,cAAc;AAC9E,eAAK,YACH,qBAAA,kBAAkB,mBAClB,IAAI,SAAA,kBAAkB,EAAC,SAAS,aAAY,CAAC,GAC7C,YAAY;AAEd,iBAAO;QACT;AACA,cAAM,8BAA8B,kBAAkB,MAAM,IAAI,qBAAA,gBAAgB,CAAC;AACjF,cAAM,MAAM,oBAAI,KAAI;AACpB,cAAM,oBAAoB,oBAAI,IAAG;AACjC,aAAK,gBAAgB;AACrB,aAAK,eAAe;AACpB,mBAAW,YAAY,kBAAkB,OAAO;AAC9C,gBAAM,QAAO,GAAA,qBAAA,kBAAiB,QAAQ;AACtC,4BAAkB,IAAI,IAAI;AAC1B,cAAI,QAAQ,KAAK,SAAS,IAAI,IAAI;AAClC,cAAI,CAAC,OAAO;AACV,oBAAQ;cACN,OAAO,IAAI,2BAAA,iBAAiB,WAAU,GAAA,gBAAA,iCAAgC,KAAK,sBAAsB;gBAC/F,aAAa,CAAC,mBAAmB,QAAQ,iBAAgB;AAKvD,sBAAI,KAAK,iBAAiB,qBAAA,kBAAkB,SAAS,sBAAsB,qBAAA,kBAAkB,OAAO;AAClG,yBAAK,qBAAqB,oBAAmB;kBAC/C;AACA,sBAAI,sBAAsB,qBAAA,kBAAkB,OAAO;AACjD,0BAAO,gBAAgB;kBACzB;AACA,sBAAI,cAAc;AAChB,yBAAK,YAAY;kBACnB;AACA,uBAAK,wBAAuB;gBAC9B;gBACA,kBAAkB,CAAC,mBAAmB,mBAAkB;AACtD,wBAAM,aAAa,KAAK,qBAAqB,iBAAiB,mBAAmB,cAAc;AAC/F,sBAAI,UAAK,QAAL,UAAK,SAAA,SAAL,MAAO,oBAAoB;AAC7B,2BAAO,IAAI,OAAA,gCAAgC,YAAY,MAAM,oBAAoB,KAAK,aAAc,4BAA2B,CAAE;kBACnI,OAAO;AACL,2BAAO;kBACT;gBACF;eACD,GAAG,SAAS,cAAc;cAC3B,aAAa;cACb,eAAe;cACf,QAAQ;cACR,oBAAoB;;AAEtB,iBAAK,SAAS,IAAI,MAAM,KAAK;UAC/B;AACA,cAAI,SAAS,uBAAsB,GAAI;AACrC,kBAAM,qBAAqB,gBAAa;AACtC,mBAAK,aAAa,OAAQ,UAAU;YACtC;UACF,OAAO;AACL,kBAAM,qBAAqB;UAC7B;QACF;AACA,mBAAW,CAAC,cAAc,KAAK,KAAK,KAAK,UAAU;AACjD,cAAI,kBAAkB,IAAI,YAAY,GAAG;AACvC,kBAAM,MAAM,gBAAe;UAC7B,OAAO;AACL,kBAAM,MAAM,QAAO;AACnB,iBAAK,SAAS,OAAO,YAAY;UACnC;QACF;AACA,aAAK,gBAAgB;AACrB,aAAK,wBAAuB;AAC5B,YAAI,KAAK,mBAAmB;AAC1B,wBAAc,KAAK,iBAAiB;QACtC;AACA,aAAK,qBAAoB,MAAA,KAAA,YAAY,MAAK;AACxC,cAAI,KAAK,iBAAiB,qBAAA,kBAAkB,OAAO;AACjD,iBAAK,wBAAuB;UAC9B;QACF,GAAG,SAAS,wBAAuB,CAAE,GAAE,WAAK,QAAA,OAAA,SAAA,SAAA,GAAA,KAAA,EAAA;AAC5C,eAAO;MACT;MACA,WAAQ;MAIR;MACA,eAAY;MAEZ;MACA,UAAO;AACL,mBAAW,SAAS,KAAK,SAAS,OAAM,GAAI;AAC1C,gBAAM,MAAM,QAAO;QACrB;AACA,aAAK,SAAS,MAAK;AACnB,YAAI,KAAK,mBAAmB;AAC1B,wBAAc,KAAK,iBAAiB;QACtC;MACF;MACA,cAAW;AACT,eAAO;MACT;;AAGF,aAAgB,QAAK;AACnB,OAAA,GAAA,gBAAA,0BACE,WACA,gCACA,qCAAqC;IAEzC;;;;;;;;;;ACrdA,QAAA,qBAAA;AA+IE,WAAA,eAAAC,UAAA,mBAAA,EAAA,YAAA,MAAA,KAAA,WAAA;AAAA,aA/IO,mBAAA;IAAe,EAAA,CAAA;AAExB,QAAA,YAAA;AAuH2B,WAAA,eAAAA,UAAA,WAAA,EAAA,YAAA,MAAA,KAAA,WAAA;AAAA,aAvHT,UAAA;IAAqB,EAAA,CAAA;AACvC,QAAA,2BAAA;AAwG2B,WAAA,eAAAA,UAAA,yBAAA,EAAA,YAAA,MAAA,KAAA,WAAA;AAAA,aAxGlB,yBAAA;IAAqB,EAAA,CAAA;AAC9B,QAAA,uBAAA;AAqGuB,WAAA,eAAAA,UAAA,qBAAA,EAAA,YAAA,MAAA,KAAA,WAAA;AAAA,aArGd,qBAAA;IAAiB,EAAA,CAAA;AAC1B,QAAA,wBAAA;AAyIE,WAAA,eAAAA,UAAA,sBAAA,EAAA,YAAA,MAAA,KAAA,WAAA;AAAA,aAzIO,sBAAA;IAAkB,EAAA,CAAA;AAC3B,QAAA,WAAA;AA4GE,WAAA,eAAAA,UAAA,UAAA,EAAA,YAAA,MAAA,KAAA,WAAA;AAAA,aA1GA,SAAA;IAAM,EAAA,CAAA;AAMR,QAAA,cAAA;AAyFkB,WAAA,eAAAA,UAAA,gBAAA,EAAA,YAAA,MAAA,KAAA,WAAA;AAAA,aAzFT,YAAA;IAAY,EAAA,CAAA;AA0FT,WAAA,eAAAA,UAAA,UAAA,EAAA,YAAA,MAAA,KAAA,WAAA;AAAA,aA1FW,YAAA;IAAM,EAAA,CAAA;AA4Fd,WAAA,eAAAA,UAAA,aAAA,EAAA,YAAA,MAAA,KAAA,WAAA;AAAA,aA5FgB,YAAA;IAAS,EAAA,CAAA;AACxC,QAAA,UAAA;AACA,QAAA,gBAAA;AAoGE,WAAA,eAAAA,UAAA,yBAAA,EAAA,YAAA,MAAA,KAAA,WAAA;AAAA,aAlGA,cAAA;IAAqB,EAAA,CAAA;AAmGrB,WAAA,eAAAA,UAAA,yBAAA,EAAA,YAAA,MAAA,KAAA,WAAA;AAAA,aAlGA,cAAA;IAAqB,EAAA,CAAA;AAmGI,WAAA,eAAAA,UAAA,gCAAA,EAAA,YAAA,MAAA,KAAA,WAAA;AAAA,aAnGzB,cAAA;IAAqB,EAAA,CAAA;AAMvB,QAAA,aAAA;AAyES,WAAA,eAAAA,UAAA,YAAA,EAAA,YAAA,MAAA,KAAA,WAAA;AAAA,aAzEA,WAAA;IAAQ,EAAA,CAAA;AACjB,QAAA,WAAA;AAsL6B,WAAA,eAAAA,UAAA,UAAA,EAAA,YAAA,MAAA,KAAA,WAAA;AAAA,aApL3B,SAAA;IAAM,EAAA,CAAA;AAKR,QAAA,uBAAA;AAgLS,WAAA,eAAAA,UAAA,qBAAA,EAAA,YAAA,MAAA,KAAA,WAAA;AAAA,aAhLa,qBAAA;IAAiB,EAAA,CAAA;AACvC,QAAA,mBAAA;AAsLS,WAAA,eAAAA,UAAA,iBAAA,EAAA,YAAA,MAAA,KAAA,WAAA;AAAA,aAtLA,iBAAA;IAAa,EAAA,CAAA;AAmBT,IAAAA,SAAA,cAAc;;;;;;;;MAQzB,2BAA2B,CACzB,uBACG,oBACmB;AACtB,eAAO,gBAAgB,OACrB,CAAC,KAAK,UAAU,IAAI,QAAQ,KAAK,GACjC,kBAAkB;MAEtB;;;;;;;;MASA,wBAAwB,CACtB,UACG,eACgB;AACnB,eAAO,WAAW,OAAO,CAAC,KAAK,UAAU,IAAI,QAAQ,KAAK,GAAG,KAAK;MACpE;;MAGA,gBAAgB,sBAAA,mBAAmB;MACnC,WAAW,sBAAA,mBAAmB;MAC9B,yBAAyB,sBAAA,mBAAmB;;MAG5C,6BAA6B,mBAAA,gBAAgB;MAC7C,4BAA4B,mBAAA,gBAAgB;MAC5C,aAAa,mBAAA,gBAAgB;;AAqCxB,QAAM,cAAc,CAAC,WAAmB,OAAO,MAAK;AAA9C,IAAAA,SAAA,cAAW;AAEjB,QAAM,qBAAqB,CAChC,QACA,UACA,aACG,OAAO,aAAa,UAAU,QAAQ;AAJ9B,IAAAA,SAAA,qBAAkB;AAwDxB,QAAM,aAAa,CAAC,OAAY,YAAuB;AAC5D,YAAM,IAAI,MACR,yFAAyF;IAE7F;AAJa,IAAAA,SAAA,aAAU;AAMhB,QAAM,OAAO,CAAC,UAAe,QAAa,YAAuB;AACtE,YAAM,IAAI,MACR,yFAAyF;IAE7F;AAJa,IAAAA,SAAA,OAAI;AAMV,QAAM,YAAY,CAACC,YAAkC;AAC1D,cAAQ,UAAUA,OAAM;IAC1B;AAFa,IAAAD,SAAA,YAAS;AAIf,QAAM,kBAAkB,CAAC,cAAiC;AAC/D,cAAQ,mBAAmB,SAAS;IACtC;AAFa,IAAAA,SAAA,kBAAe;AAQrB,QAAM,mBAAmB,CAAC,WAAkB;AACjD,aAAO,SAAA,OAAO,UAAU,WAAW,KAAK,MAAM;IAChD;AAFa,IAAAA,SAAA,mBAAgB;AAQ7B,QAAA,wBAAA;AAEE,WAAA,eAAAA,UAAA,mBAAA,EAAA,YAAA,MAAA,KAAA,WAAA;AAAA,aAAA,sBAAA;IAAe,EAAA,CAAA;AACf,WAAA,eAAAA,UAAA,oBAAA,EAAA,YAAA,MAAA,KAAA,WAAA;AAAA,aAAA,sBAAA;IAAgB,EAAA,CAAA;AAIhB,WAAA,eAAAA,UAAA,oBAAA,EAAA,YAAA,MAAA,KAAA,WAAA;AAAA,aAAA,sBAAA;IAAgB,EAAA,CAAA;AAChB,WAAA,eAAAA,UAAA,iCAAA,EAAA,YAAA,MAAA,KAAA,WAAA;AAAA,aAAA,sBAAA;IAA6B,EAAA,CAAA;AAY/B,QAAA,aAAA;AAAS,WAAA,eAAAA,UAAA,gCAAA,EAAA,YAAA,MAAA,KAAA,WAAA;AAAA,aAAA,WAAA;IAA4B,EAAA,CAAA;AAAE,WAAA,eAAAA,UAAA,uBAAA,EAAA,YAAA,MAAA,KAAA,WAAA;AAAA,aAAA,WAAA;IAAmB,EAAA,CAAA;AAE1D,QAAA,UAAA;AAAS,WAAA,eAAAA,UAAA,4BAAA,EAAA,YAAA,MAAA,KAAA,WAAA;AAAA,aAAA,QAAA;IAAwB,EAAA,CAAA;AASjC,QAAA,wBAAA;AAGE,WAAA,eAAAA,UAAA,yBAAA,EAAA,YAAA,MAAA,KAAA,WAAA;AAAA,aAAA,sBAAA;IAAqB,EAAA,CAAA;AAGrB,WAAA,eAAAA,UAAA,oBAAA,EAAA,YAAA,MAAA,KAAA,WAAA;AAAA,aAAA,sBAAA;IAAgB,EAAA,CAAA;AAEhB,WAAA,eAAAA,UAAA,0BAAA,EAAA,YAAA,MAAA,KAAA,WAAA;AAAA,aAAA,sBAAA;IAAsB,EAAA,CAAA;AAIxB,QAAA,SAAA;AAAS,WAAA,eAAAA,UAAA,wBAAA,EAAA,YAAA,MAAA,KAAA,WAAA;AAAA,aAAA,OAAA;IAAoB,EAAA,CAAA;AAE7B,QAAA,eAAA;AACS,IAAAA,SAAA,eAAA;AAET,QAAA,eAAA;AACA,QAAA,eAAA;AACA,QAAA,cAAA;AACA,QAAA,2BAAA;AACA,QAAA,4BAAA;AACA,QAAA,kCAAA;AACA,QAAA,qCAAA;AACA,QAAA,WAAA;AAGA,KAAC,MAAK;AACJ,mBAAa,MAAK;AAClB,mBAAa,MAAK;AAClB,kBAAY,MAAK;AACjB,+BAAyB,MAAK;AAC9B,gCAA0B,MAAK;AAC/B,sCAAgC,MAAK;AACrC,yCAAmC,MAAK;AACxC,eAAS,MAAK;IAChB,GAAE;;;;;ACvTF,mBAAsB;AAGf,IAAM;AAAA,EACX;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AACF,IAAI,aAAAE;;;ACHJ,IAAAC,aAAwB;AACxB,IAAAC,eAAkD;AAClD,IAAAC,aASO;AACP,IAAAC,cAA8B;;;ACpB9B,gBAA8E;AAC9E,kBAAqB;AACrB,gBAAwB;;;ACNxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;ACAO,IAAI;AAAA,CACV,SAAUC,OAAM;AACb,EAAAA,MAAK,cAAc,CAAC,MAAM;AAAA,EAAE;AAC5B,WAAS,SAAS,MAAM;AAAA,EAAE;AAC1B,EAAAA,MAAK,WAAW;AAChB,WAAS,YAAY,IAAI;AACrB,UAAM,IAAI,MAAM;AAAA,EACpB;AACA,EAAAA,MAAK,cAAc;AACnB,EAAAA,MAAK,cAAc,CAAC,UAAU;AAC1B,UAAM,MAAM,CAAC;AACb,eAAW,QAAQ,OAAO;AACtB,UAAI,IAAI,IAAI;AAAA,IAChB;AACA,WAAO;AAAA,EACX;AACA,EAAAA,MAAK,qBAAqB,CAAC,QAAQ;AAC/B,UAAM,YAAYA,MAAK,WAAW,GAAG,EAAE,OAAO,CAAC,MAAM,OAAO,IAAI,IAAI,CAAC,CAAC,MAAM,QAAQ;AACpF,UAAM,WAAW,CAAC;AAClB,eAAW,KAAK,WAAW;AACvB,eAAS,CAAC,IAAI,IAAI,CAAC;AAAA,IACvB;AACA,WAAOA,MAAK,aAAa,QAAQ;AAAA,EACrC;AACA,EAAAA,MAAK,eAAe,CAAC,QAAQ;AACzB,WAAOA,MAAK,WAAW,GAAG,EAAE,IAAI,SAAU,GAAG;AACzC,aAAO,IAAI,CAAC;AAAA,IAChB,CAAC;AAAA,EACL;AACA,EAAAA,MAAK,aAAa,OAAO,OAAO,SAAS,aACnC,CAAC,QAAQ,OAAO,KAAK,GAAG,IACxB,CAAC,WAAW;AACV,UAAM,OAAO,CAAC;AACd,eAAW,OAAO,QAAQ;AACtB,UAAI,OAAO,UAAU,eAAe,KAAK,QAAQ,GAAG,GAAG;AACnD,aAAK,KAAK,GAAG;AAAA,MACjB;AAAA,IACJ;AACA,WAAO;AAAA,EACX;AACJ,EAAAA,MAAK,OAAO,CAAC,KAAK,YAAY;AAC1B,eAAW,QAAQ,KAAK;AACpB,UAAI,QAAQ,IAAI;AACZ,eAAO;AAAA,IACf;AACA,WAAO;AAAA,EACX;AACA,EAAAA,MAAK,YAAY,OAAO,OAAO,cAAc,aACvC,CAAC,QAAQ,OAAO,UAAU,GAAG,IAC7B,CAAC,QAAQ,OAAO,QAAQ,YAAY,OAAO,SAAS,GAAG,KAAK,KAAK,MAAM,GAAG,MAAM;AACtF,WAAS,WAAW,OAAO,YAAY,OAAO;AAC1C,WAAO,MAAM,IAAI,CAAC,QAAS,OAAO,QAAQ,WAAW,IAAI,GAAG,MAAM,GAAI,EAAE,KAAK,SAAS;AAAA,EAC1F;AACA,EAAAA,MAAK,aAAa;AAClB,EAAAA,MAAK,wBAAwB,CAAC,GAAG,UAAU;AACvC,QAAI,OAAO,UAAU,UAAU;AAC3B,aAAO,MAAM,SAAS;AAAA,IAC1B;AACA,WAAO;AAAA,EACX;AACJ,GAAG,SAAS,OAAO,CAAC,EAAE;AACf,IAAI;AAAA,CACV,SAAUC,aAAY;AACnB,EAAAA,YAAW,cAAc,CAAC,OAAO,WAAW;AACxC,WAAO;AAAA,MACH,GAAG;AAAA,MACH,GAAG;AAAA;AAAA,IACP;AAAA,EACJ;AACJ,GAAG,eAAe,aAAa,CAAC,EAAE;AAC3B,IAAM,gBAAgB,KAAK,YAAY;AAAA,EAC1C;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AACJ,CAAC;AACM,IAAM,gBAAgB,CAAC,SAAS;AACnC,QAAM,IAAI,OAAO;AACjB,UAAQ,GAAG;AAAA,IACP,KAAK;AACD,aAAO,cAAc;AAAA,IACzB,KAAK;AACD,aAAO,cAAc;AAAA,IACzB,KAAK;AACD,aAAO,OAAO,MAAM,IAAI,IAAI,cAAc,MAAM,cAAc;AAAA,IAClE,KAAK;AACD,aAAO,cAAc;AAAA,IACzB,KAAK;AACD,aAAO,cAAc;AAAA,IACzB,KAAK;AACD,aAAO,cAAc;AAAA,IACzB,KAAK;AACD,aAAO,cAAc;AAAA,IACzB,KAAK;AACD,UAAI,MAAM,QAAQ,IAAI,GAAG;AACrB,eAAO,cAAc;AAAA,MACzB;AACA,UAAI,SAAS,MAAM;AACf,eAAO,cAAc;AAAA,MACzB;AACA,UAAI,KAAK,QAAQ,OAAO,KAAK,SAAS,cAAc,KAAK,SAAS,OAAO,KAAK,UAAU,YAAY;AAChG,eAAO,cAAc;AAAA,MACzB;AACA,UAAI,OAAO,QAAQ,eAAe,gBAAgB,KAAK;AACnD,eAAO,cAAc;AAAA,MACzB;AACA,UAAI,OAAO,QAAQ,eAAe,gBAAgB,KAAK;AACnD,eAAO,cAAc;AAAA,MACzB;AACA,UAAI,OAAO,SAAS,eAAe,gBAAgB,MAAM;AACrD,eAAO,cAAc;AAAA,MACzB;AACA,aAAO,cAAc;AAAA,IACzB;AACI,aAAO,cAAc;AAAA,EAC7B;AACJ;;;ACnIO,IAAM,eAAe,KAAK,YAAY;AAAA,EACzC;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AACJ,CAAC;AACM,IAAM,gBAAgB,CAAC,QAAQ;AAClC,QAAM,OAAO,KAAK,UAAU,KAAK,MAAM,CAAC;AACxC,SAAO,KAAK,QAAQ,eAAe,KAAK;AAC5C;AACO,IAAM,WAAN,MAAM,kBAAiB,MAAM;AAAA,EAChC,IAAI,SAAS;AACT,WAAO,KAAK;AAAA,EAChB;AAAA,EACA,YAAY,QAAQ;AAChB,UAAM;AACN,SAAK,SAAS,CAAC;AACf,SAAK,WAAW,CAAC,QAAQ;AACrB,WAAK,SAAS,CAAC,GAAG,KAAK,QAAQ,GAAG;AAAA,IACtC;AACA,SAAK,YAAY,CAAC,OAAO,CAAC,MAAM;AAC5B,WAAK,SAAS,CAAC,GAAG,KAAK,QAAQ,GAAG,IAAI;AAAA,IAC1C;AACA,UAAM,cAAc,WAAW;AAC/B,QAAI,OAAO,gBAAgB;AAEvB,aAAO,eAAe,MAAM,WAAW;AAAA,IAC3C,OACK;AACD,WAAK,YAAY;AAAA,IACrB;AACA,SAAK,OAAO;AACZ,SAAK,SAAS;AAAA,EAClB;AAAA,EACA,OAAO,SAAS;AACZ,UAAM,SAAS,WACX,SAAU,OAAO;AACb,aAAO,MAAM;AAAA,IACjB;AACJ,UAAM,cAAc,EAAE,SAAS,CAAC,EAAE;AAClC,UAAM,eAAe,CAAC,UAAU;AAC5B,iBAAW,SAAS,MAAM,QAAQ;AAC9B,YAAI,MAAM,SAAS,iBAAiB;AAChC,gBAAM,YAAY,IAAI,YAAY;AAAA,QACtC,WACS,MAAM,SAAS,uBAAuB;AAC3C,uBAAa,MAAM,eAAe;AAAA,QACtC,WACS,MAAM,SAAS,qBAAqB;AACzC,uBAAa,MAAM,cAAc;AAAA,QACrC,WACS,MAAM,KAAK,WAAW,GAAG;AAC9B,sBAAY,QAAQ,KAAK,OAAO,KAAK,CAAC;AAAA,QAC1C,OACK;AACD,cAAI,OAAO;AACX,cAAI,IAAI;AACR,iBAAO,IAAI,MAAM,KAAK,QAAQ;AAC1B,kBAAM,KAAK,MAAM,KAAK,CAAC;AACvB,kBAAM,WAAW,MAAM,MAAM,KAAK,SAAS;AAC3C,gBAAI,CAAC,UAAU;AACX,mBAAK,EAAE,IAAI,KAAK,EAAE,KAAK,EAAE,SAAS,CAAC,EAAE;AAAA,YAQzC,OACK;AACD,mBAAK,EAAE,IAAI,KAAK,EAAE,KAAK,EAAE,SAAS,CAAC,EAAE;AACrC,mBAAK,EAAE,EAAE,QAAQ,KAAK,OAAO,KAAK,CAAC;AAAA,YACvC;AACA,mBAAO,KAAK,EAAE;AACd;AAAA,UACJ;AAAA,QACJ;AAAA,MACJ;AAAA,IACJ;AACA,iBAAa,IAAI;AACjB,WAAO;AAAA,EACX;AAAA,EACA,OAAO,OAAO,OAAO;AACjB,QAAI,EAAE,iBAAiB,YAAW;AAC9B,YAAM,IAAI,MAAM,mBAAmB,KAAK,EAAE;AAAA,IAC9C;AAAA,EACJ;AAAA,EACA,WAAW;AACP,WAAO,KAAK;AAAA,EAChB;AAAA,EACA,IAAI,UAAU;AACV,WAAO,KAAK,UAAU,KAAK,QAAQ,KAAK,uBAAuB,CAAC;AAAA,EACpE;AAAA,EACA,IAAI,UAAU;AACV,WAAO,KAAK,OAAO,WAAW;AAAA,EAClC;AAAA,EACA,QAAQ,SAAS,CAAC,UAAU,MAAM,SAAS;AACvC,UAAM,cAAc,CAAC;AACrB,UAAM,aAAa,CAAC;AACpB,eAAW,OAAO,KAAK,QAAQ;AAC3B,UAAI,IAAI,KAAK,SAAS,GAAG;AACrB,cAAM,UAAU,IAAI,KAAK,CAAC;AAC1B,oBAAY,OAAO,IAAI,YAAY,OAAO,KAAK,CAAC;AAChD,oBAAY,OAAO,EAAE,KAAK,OAAO,GAAG,CAAC;AAAA,MACzC,OACK;AACD,mBAAW,KAAK,OAAO,GAAG,CAAC;AAAA,MAC/B;AAAA,IACJ;AACA,WAAO,EAAE,YAAY,YAAY;AAAA,EACrC;AAAA,EACA,IAAI,aAAa;AACb,WAAO,KAAK,QAAQ;AAAA,EACxB;AACJ;AACA,SAAS,SAAS,CAAC,WAAW;AAC1B,QAAM,QAAQ,IAAI,SAAS,MAAM;AACjC,SAAO;AACX;;;AClIA,IAAM,WAAW,CAAC,OAAO,SAAS;AAC9B,MAAI;AACJ,UAAQ,MAAM,MAAM;AAAA,IAChB,KAAK,aAAa;AACd,UAAI,MAAM,aAAa,cAAc,WAAW;AAC5C,kBAAU;AAAA,MACd,OACK;AACD,kBAAU,YAAY,MAAM,QAAQ,cAAc,MAAM,QAAQ;AAAA,MACpE;AACA;AAAA,IACJ,KAAK,aAAa;AACd,gBAAU,mCAAmC,KAAK,UAAU,MAAM,UAAU,KAAK,qBAAqB,CAAC;AACvG;AAAA,IACJ,KAAK,aAAa;AACd,gBAAU,kCAAkC,KAAK,WAAW,MAAM,MAAM,IAAI,CAAC;AAC7E;AAAA,IACJ,KAAK,aAAa;AACd,gBAAU;AACV;AAAA,IACJ,KAAK,aAAa;AACd,gBAAU,yCAAyC,KAAK,WAAW,MAAM,OAAO,CAAC;AACjF;AAAA,IACJ,KAAK,aAAa;AACd,gBAAU,gCAAgC,KAAK,WAAW,MAAM,OAAO,CAAC,eAAe,MAAM,QAAQ;AACrG;AAAA,IACJ,KAAK,aAAa;AACd,gBAAU;AACV;AAAA,IACJ,KAAK,aAAa;AACd,gBAAU;AACV;AAAA,IACJ,KAAK,aAAa;AACd,gBAAU;AACV;AAAA,IACJ,KAAK,aAAa;AACd,UAAI,OAAO,MAAM,eAAe,UAAU;AACtC,YAAI,cAAc,MAAM,YAAY;AAChC,oBAAU,gCAAgC,MAAM,WAAW,QAAQ;AACnE,cAAI,OAAO,MAAM,WAAW,aAAa,UAAU;AAC/C,sBAAU,GAAG,OAAO,sDAAsD,MAAM,WAAW,QAAQ;AAAA,UACvG;AAAA,QACJ,WACS,gBAAgB,MAAM,YAAY;AACvC,oBAAU,mCAAmC,MAAM,WAAW,UAAU;AAAA,QAC5E,WACS,cAAc,MAAM,YAAY;AACrC,oBAAU,iCAAiC,MAAM,WAAW,QAAQ;AAAA,QACxE,OACK;AACD,eAAK,YAAY,MAAM,UAAU;AAAA,QACrC;AAAA,MACJ,WACS,MAAM,eAAe,SAAS;AACnC,kBAAU,WAAW,MAAM,UAAU;AAAA,MACzC,OACK;AACD,kBAAU;AAAA,MACd;AACA;AAAA,IACJ,KAAK,aAAa;AACd,UAAI,MAAM,SAAS;AACf,kBAAU,sBAAsB,MAAM,QAAQ,YAAY,MAAM,YAAY,aAAa,WAAW,IAAI,MAAM,OAAO;AAAA,eAChH,MAAM,SAAS;AACpB,kBAAU,uBAAuB,MAAM,QAAQ,YAAY,MAAM,YAAY,aAAa,MAAM,IAAI,MAAM,OAAO;AAAA,eAC5G,MAAM,SAAS;AACpB,kBAAU,kBAAkB,MAAM,QAAQ,sBAAsB,MAAM,YAAY,8BAA8B,eAAe,GAAG,MAAM,OAAO;AAAA,eAC1I,MAAM,SAAS;AACpB,kBAAU,kBAAkB,MAAM,QAAQ,sBAAsB,MAAM,YAAY,8BAA8B,eAAe,GAAG,MAAM,OAAO;AAAA,eAC1I,MAAM,SAAS;AACpB,kBAAU,gBAAgB,MAAM,QAAQ,sBAAsB,MAAM,YAAY,8BAA8B,eAAe,GAAG,IAAI,KAAK,OAAO,MAAM,OAAO,CAAC,CAAC;AAAA;AAE/J,kBAAU;AACd;AAAA,IACJ,KAAK,aAAa;AACd,UAAI,MAAM,SAAS;AACf,kBAAU,sBAAsB,MAAM,QAAQ,YAAY,MAAM,YAAY,YAAY,WAAW,IAAI,MAAM,OAAO;AAAA,eAC/G,MAAM,SAAS;AACpB,kBAAU,uBAAuB,MAAM,QAAQ,YAAY,MAAM,YAAY,YAAY,OAAO,IAAI,MAAM,OAAO;AAAA,eAC5G,MAAM,SAAS;AACpB,kBAAU,kBAAkB,MAAM,QAAQ,YAAY,MAAM,YAAY,0BAA0B,WAAW,IAAI,MAAM,OAAO;AAAA,eACzH,MAAM,SAAS;AACpB,kBAAU,kBAAkB,MAAM,QAAQ,YAAY,MAAM,YAAY,0BAA0B,WAAW,IAAI,MAAM,OAAO;AAAA,eACzH,MAAM,SAAS;AACpB,kBAAU,gBAAgB,MAAM,QAAQ,YAAY,MAAM,YAAY,6BAA6B,cAAc,IAAI,IAAI,KAAK,OAAO,MAAM,OAAO,CAAC,CAAC;AAAA;AAEpJ,kBAAU;AACd;AAAA,IACJ,KAAK,aAAa;AACd,gBAAU;AACV;AAAA,IACJ,KAAK,aAAa;AACd,gBAAU;AACV;AAAA,IACJ,KAAK,aAAa;AACd,gBAAU,gCAAgC,MAAM,UAAU;AAC1D;AAAA,IACJ,KAAK,aAAa;AACd,gBAAU;AACV;AAAA,IACJ;AACI,gBAAU,KAAK;AACf,WAAK,YAAY,KAAK;AAAA,EAC9B;AACA,SAAO,EAAE,QAAQ;AACrB;AACA,IAAO,aAAQ;;;AC3Gf,IAAI,mBAAmB;AAEhB,SAAS,YAAY,KAAK;AAC7B,qBAAmB;AACvB;AACO,SAAS,cAAc;AAC1B,SAAO;AACX;;;ACNO,IAAM,YAAY,CAAC,WAAW;AACjC,QAAM,EAAE,MAAM,MAAM,WAAW,UAAU,IAAI;AAC7C,QAAM,WAAW,CAAC,GAAG,MAAM,GAAI,UAAU,QAAQ,CAAC,CAAE;AACpD,QAAM,YAAY;AAAA,IACd,GAAG;AAAA,IACH,MAAM;AAAA,EACV;AACA,MAAI,UAAU,YAAY,QAAW;AACjC,WAAO;AAAA,MACH,GAAG;AAAA,MACH,MAAM;AAAA,MACN,SAAS,UAAU;AAAA,IACvB;AAAA,EACJ;AACA,MAAI,eAAe;AACnB,QAAM,OAAO,UACR,OAAO,CAAC,MAAM,CAAC,CAAC,CAAC,EACjB,MAAM,EACN,QAAQ;AACb,aAAW,OAAO,MAAM;AACpB,mBAAe,IAAI,WAAW,EAAE,MAAM,cAAc,aAAa,CAAC,EAAE;AAAA,EACxE;AACA,SAAO;AAAA,IACH,GAAG;AAAA,IACH,MAAM;AAAA,IACN,SAAS;AAAA,EACb;AACJ;AACO,IAAM,aAAa,CAAC;AACpB,SAAS,kBAAkB,KAAK,WAAW;AAC9C,QAAM,cAAc,YAAY;AAChC,QAAM,QAAQ,UAAU;AAAA,IACpB;AAAA,IACA,MAAM,IAAI;AAAA,IACV,MAAM,IAAI;AAAA,IACV,WAAW;AAAA,MACP,IAAI,OAAO;AAAA;AAAA,MACX,IAAI;AAAA;AAAA,MACJ;AAAA;AAAA,MACA,gBAAgB,aAAkB,SAAY;AAAA;AAAA,IAClD,EAAE,OAAO,CAAC,MAAM,CAAC,CAAC,CAAC;AAAA,EACvB,CAAC;AACD,MAAI,OAAO,OAAO,KAAK,KAAK;AAChC;AACO,IAAM,cAAN,MAAM,aAAY;AAAA,EACrB,cAAc;AACV,SAAK,QAAQ;AAAA,EACjB;AAAA,EACA,QAAQ;AACJ,QAAI,KAAK,UAAU;AACf,WAAK,QAAQ;AAAA,EACrB;AAAA,EACA,QAAQ;AACJ,QAAI,KAAK,UAAU;AACf,WAAK,QAAQ;AAAA,EACrB;AAAA,EACA,OAAO,WAAWC,SAAQ,SAAS;AAC/B,UAAM,aAAa,CAAC;AACpB,eAAW,KAAK,SAAS;AACrB,UAAI,EAAE,WAAW;AACb,eAAO;AACX,UAAI,EAAE,WAAW;AACb,QAAAA,QAAO,MAAM;AACjB,iBAAW,KAAK,EAAE,KAAK;AAAA,IAC3B;AACA,WAAO,EAAE,QAAQA,QAAO,OAAO,OAAO,WAAW;AAAA,EACrD;AAAA,EACA,aAAa,iBAAiBA,SAAQ,OAAO;AACzC,UAAM,YAAY,CAAC;AACnB,eAAW,QAAQ,OAAO;AACtB,YAAM,MAAM,MAAM,KAAK;AACvB,YAAM,QAAQ,MAAM,KAAK;AACzB,gBAAU,KAAK;AAAA,QACX;AAAA,QACA;AAAA,MACJ,CAAC;AAAA,IACL;AACA,WAAO,aAAY,gBAAgBA,SAAQ,SAAS;AAAA,EACxD;AAAA,EACA,OAAO,gBAAgBA,SAAQ,OAAO;AAClC,UAAM,cAAc,CAAC;AACrB,eAAW,QAAQ,OAAO;AACtB,YAAM,EAAE,KAAK,MAAM,IAAI;AACvB,UAAI,IAAI,WAAW;AACf,eAAO;AACX,UAAI,MAAM,WAAW;AACjB,eAAO;AACX,UAAI,IAAI,WAAW;AACf,QAAAA,QAAO,MAAM;AACjB,UAAI,MAAM,WAAW;AACjB,QAAAA,QAAO,MAAM;AACjB,UAAI,IAAI,UAAU,gBAAgB,OAAO,MAAM,UAAU,eAAe,KAAK,YAAY;AACrF,oBAAY,IAAI,KAAK,IAAI,MAAM;AAAA,MACnC;AAAA,IACJ;AACA,WAAO,EAAE,QAAQA,QAAO,OAAO,OAAO,YAAY;AAAA,EACtD;AACJ;AACO,IAAM,UAAU,OAAO,OAAO;AAAA,EACjC,QAAQ;AACZ,CAAC;AACM,IAAM,QAAQ,CAAC,WAAW,EAAE,QAAQ,SAAS,MAAM;AACnD,IAAM,KAAK,CAAC,WAAW,EAAE,QAAQ,SAAS,MAAM;AAChD,IAAM,YAAY,CAAC,MAAM,EAAE,WAAW;AACtC,IAAM,UAAU,CAAC,MAAM,EAAE,WAAW;AACpC,IAAM,UAAU,CAAC,MAAM,EAAE,WAAW;AACpC,IAAM,UAAU,CAAC,MAAM,OAAO,YAAY,eAAe,aAAa;;;AC5GtE,IAAI;AAAA,CACV,SAAUC,YAAW;AAClB,EAAAA,WAAU,WAAW,CAAC,YAAY,OAAO,YAAY,WAAW,EAAE,QAAQ,IAAI,WAAW,CAAC;AAE1F,EAAAA,WAAU,WAAW,CAAC,YAAY,OAAO,YAAY,WAAW,UAAU,SAAS;AACvF,GAAG,cAAc,YAAY,CAAC,EAAE;;;ACAhC,IAAM,qBAAN,MAAyB;AAAA,EACrB,YAAY,QAAQ,OAAO,MAAM,KAAK;AAClC,SAAK,cAAc,CAAC;AACpB,SAAK,SAAS;AACd,SAAK,OAAO;AACZ,SAAK,QAAQ;AACb,SAAK,OAAO;AAAA,EAChB;AAAA,EACA,IAAI,OAAO;AACP,QAAI,CAAC,KAAK,YAAY,QAAQ;AAC1B,UAAI,MAAM,QAAQ,KAAK,IAAI,GAAG;AAC1B,aAAK,YAAY,KAAK,GAAG,KAAK,OAAO,GAAG,KAAK,IAAI;AAAA,MACrD,OACK;AACD,aAAK,YAAY,KAAK,GAAG,KAAK,OAAO,KAAK,IAAI;AAAA,MAClD;AAAA,IACJ;AACA,WAAO,KAAK;AAAA,EAChB;AACJ;AACA,IAAM,eAAe,CAAC,KAAK,WAAW;AAClC,MAAI,QAAQ,MAAM,GAAG;AACjB,WAAO,EAAE,SAAS,MAAM,MAAM,OAAO,MAAM;AAAA,EAC/C,OACK;AACD,QAAI,CAAC,IAAI,OAAO,OAAO,QAAQ;AAC3B,YAAM,IAAI,MAAM,2CAA2C;AAAA,IAC/D;AACA,WAAO;AAAA,MACH,SAAS;AAAA,MACT,IAAI,QAAQ;AACR,YAAI,KAAK;AACL,iBAAO,KAAK;AAChB,cAAM,QAAQ,IAAI,SAAS,IAAI,OAAO,MAAM;AAC5C,aAAK,SAAS;AACd,eAAO,KAAK;AAAA,MAChB;AAAA,IACJ;AAAA,EACJ;AACJ;AACA,SAAS,oBAAoB,QAAQ;AACjC,MAAI,CAAC;AACD,WAAO,CAAC;AACZ,QAAM,EAAE,UAAAC,WAAU,oBAAoB,gBAAgB,YAAY,IAAI;AACtE,MAAIA,cAAa,sBAAsB,iBAAiB;AACpD,UAAM,IAAI,MAAM,0FAA0F;AAAA,EAC9G;AACA,MAAIA;AACA,WAAO,EAAE,UAAUA,WAAU,YAAY;AAC7C,QAAM,YAAY,CAAC,KAAK,QAAQ;AAC5B,UAAM,EAAE,QAAQ,IAAI;AACpB,QAAI,IAAI,SAAS,sBAAsB;AACnC,aAAO,EAAE,SAAS,WAAW,IAAI,aAAa;AAAA,IAClD;AACA,QAAI,OAAO,IAAI,SAAS,aAAa;AACjC,aAAO,EAAE,SAAS,WAAW,kBAAkB,IAAI,aAAa;AAAA,IACpE;AACA,QAAI,IAAI,SAAS;AACb,aAAO,EAAE,SAAS,IAAI,aAAa;AACvC,WAAO,EAAE,SAAS,WAAW,sBAAsB,IAAI,aAAa;AAAA,EACxE;AACA,SAAO,EAAE,UAAU,WAAW,YAAY;AAC9C;AACO,IAAM,UAAN,MAAc;AAAA,EACjB,IAAI,cAAc;AACd,WAAO,KAAK,KAAK;AAAA,EACrB;AAAA,EACA,SAAS,OAAO;AACZ,WAAO,cAAc,MAAM,IAAI;AAAA,EACnC;AAAA,EACA,gBAAgB,OAAO,KAAK;AACxB,WAAQ,OAAO;AAAA,MACX,QAAQ,MAAM,OAAO;AAAA,MACrB,MAAM,MAAM;AAAA,MACZ,YAAY,cAAc,MAAM,IAAI;AAAA,MACpC,gBAAgB,KAAK,KAAK;AAAA,MAC1B,MAAM,MAAM;AAAA,MACZ,QAAQ,MAAM;AAAA,IAClB;AAAA,EACJ;AAAA,EACA,oBAAoB,OAAO;AACvB,WAAO;AAAA,MACH,QAAQ,IAAI,YAAY;AAAA,MACxB,KAAK;AAAA,QACD,QAAQ,MAAM,OAAO;AAAA,QACrB,MAAM,MAAM;AAAA,QACZ,YAAY,cAAc,MAAM,IAAI;AAAA,QACpC,gBAAgB,KAAK,KAAK;AAAA,QAC1B,MAAM,MAAM;AAAA,QACZ,QAAQ,MAAM;AAAA,MAClB;AAAA,IACJ;AAAA,EACJ;AAAA,EACA,WAAW,OAAO;AACd,UAAM,SAAS,KAAK,OAAO,KAAK;AAChC,QAAI,QAAQ,MAAM,GAAG;AACjB,YAAM,IAAI,MAAM,wCAAwC;AAAA,IAC5D;AACA,WAAO;AAAA,EACX;AAAA,EACA,YAAY,OAAO;AACf,UAAM,SAAS,KAAK,OAAO,KAAK;AAChC,WAAO,QAAQ,QAAQ,MAAM;AAAA,EACjC;AAAA,EACA,MAAM,MAAM,QAAQ;AAChB,UAAM,SAAS,KAAK,UAAU,MAAM,MAAM;AAC1C,QAAI,OAAO;AACP,aAAO,OAAO;AAClB,UAAM,OAAO;AAAA,EACjB;AAAA,EACA,UAAU,MAAM,QAAQ;AACpB,UAAM,MAAM;AAAA,MACR,QAAQ;AAAA,QACJ,QAAQ,CAAC;AAAA,QACT,OAAO,QAAQ,SAAS;AAAA,QACxB,oBAAoB,QAAQ;AAAA,MAChC;AAAA,MACA,MAAM,QAAQ,QAAQ,CAAC;AAAA,MACvB,gBAAgB,KAAK,KAAK;AAAA,MAC1B,QAAQ;AAAA,MACR;AAAA,MACA,YAAY,cAAc,IAAI;AAAA,IAClC;AACA,UAAM,SAAS,KAAK,WAAW,EAAE,MAAM,MAAM,IAAI,MAAM,QAAQ,IAAI,CAAC;AACpE,WAAO,aAAa,KAAK,MAAM;AAAA,EACnC;AAAA,EACA,YAAY,MAAM;AACd,UAAM,MAAM;AAAA,MACR,QAAQ;AAAA,QACJ,QAAQ,CAAC;AAAA,QACT,OAAO,CAAC,CAAC,KAAK,WAAW,EAAE;AAAA,MAC/B;AAAA,MACA,MAAM,CAAC;AAAA,MACP,gBAAgB,KAAK,KAAK;AAAA,MAC1B,QAAQ;AAAA,MACR;AAAA,MACA,YAAY,cAAc,IAAI;AAAA,IAClC;AACA,QAAI,CAAC,KAAK,WAAW,EAAE,OAAO;AAC1B,UAAI;AACA,cAAM,SAAS,KAAK,WAAW,EAAE,MAAM,MAAM,CAAC,GAAG,QAAQ,IAAI,CAAC;AAC9D,eAAO,QAAQ,MAAM,IACf;AAAA,UACE,OAAO,OAAO;AAAA,QAClB,IACE;AAAA,UACE,QAAQ,IAAI,OAAO;AAAA,QACvB;AAAA,MACR,SACO,KAAK;AACR,YAAI,KAAK,SAAS,YAAY,GAAG,SAAS,aAAa,GAAG;AACtD,eAAK,WAAW,EAAE,QAAQ;AAAA,QAC9B;AACA,YAAI,SAAS;AAAA,UACT,QAAQ,CAAC;AAAA,UACT,OAAO;AAAA,QACX;AAAA,MACJ;AAAA,IACJ;AACA,WAAO,KAAK,YAAY,EAAE,MAAM,MAAM,CAAC,GAAG,QAAQ,IAAI,CAAC,EAAE,KAAK,CAAC,WAAW,QAAQ,MAAM,IAClF;AAAA,MACE,OAAO,OAAO;AAAA,IAClB,IACE;AAAA,MACE,QAAQ,IAAI,OAAO;AAAA,IACvB,CAAC;AAAA,EACT;AAAA,EACA,MAAM,WAAW,MAAM,QAAQ;AAC3B,UAAM,SAAS,MAAM,KAAK,eAAe,MAAM,MAAM;AACrD,QAAI,OAAO;AACP,aAAO,OAAO;AAClB,UAAM,OAAO;AAAA,EACjB;AAAA,EACA,MAAM,eAAe,MAAM,QAAQ;AAC/B,UAAM,MAAM;AAAA,MACR,QAAQ;AAAA,QACJ,QAAQ,CAAC;AAAA,QACT,oBAAoB,QAAQ;AAAA,QAC5B,OAAO;AAAA,MACX;AAAA,MACA,MAAM,QAAQ,QAAQ,CAAC;AAAA,MACvB,gBAAgB,KAAK,KAAK;AAAA,MAC1B,QAAQ;AAAA,MACR;AAAA,MACA,YAAY,cAAc,IAAI;AAAA,IAClC;AACA,UAAM,mBAAmB,KAAK,OAAO,EAAE,MAAM,MAAM,IAAI,MAAM,QAAQ,IAAI,CAAC;AAC1E,UAAM,SAAS,OAAO,QAAQ,gBAAgB,IAAI,mBAAmB,QAAQ,QAAQ,gBAAgB;AACrG,WAAO,aAAa,KAAK,MAAM;AAAA,EACnC;AAAA,EACA,OAAO,OAAO,SAAS;AACnB,UAAM,qBAAqB,CAAC,QAAQ;AAChC,UAAI,OAAO,YAAY,YAAY,OAAO,YAAY,aAAa;AAC/D,eAAO,EAAE,QAAQ;AAAA,MACrB,WACS,OAAO,YAAY,YAAY;AACpC,eAAO,QAAQ,GAAG;AAAA,MACtB,OACK;AACD,eAAO;AAAA,MACX;AAAA,IACJ;AACA,WAAO,KAAK,YAAY,CAAC,KAAK,QAAQ;AAClC,YAAM,SAAS,MAAM,GAAG;AACxB,YAAM,WAAW,MAAM,IAAI,SAAS;AAAA,QAChC,MAAM,aAAa;AAAA,QACnB,GAAG,mBAAmB,GAAG;AAAA,MAC7B,CAAC;AACD,UAAI,OAAO,YAAY,eAAe,kBAAkB,SAAS;AAC7D,eAAO,OAAO,KAAK,CAAC,SAAS;AACzB,cAAI,CAAC,MAAM;AACP,qBAAS;AACT,mBAAO;AAAA,UACX,OACK;AACD,mBAAO;AAAA,UACX;AAAA,QACJ,CAAC;AAAA,MACL;AACA,UAAI,CAAC,QAAQ;AACT,iBAAS;AACT,eAAO;AAAA,MACX,OACK;AACD,eAAO;AAAA,MACX;AAAA,IACJ,CAAC;AAAA,EACL;AAAA,EACA,WAAW,OAAO,gBAAgB;AAC9B,WAAO,KAAK,YAAY,CAAC,KAAK,QAAQ;AAClC,UAAI,CAAC,MAAM,GAAG,GAAG;AACb,YAAI,SAAS,OAAO,mBAAmB,aAAa,eAAe,KAAK,GAAG,IAAI,cAAc;AAC7F,eAAO;AAAA,MACX,OACK;AACD,eAAO;AAAA,MACX;AAAA,IACJ,CAAC;AAAA,EACL;AAAA,EACA,YAAY,YAAY;AACpB,WAAO,IAAI,WAAW;AAAA,MAClB,QAAQ;AAAA,MACR,UAAU,sBAAsB;AAAA,MAChC,QAAQ,EAAE,MAAM,cAAc,WAAW;AAAA,IAC7C,CAAC;AAAA,EACL;AAAA,EACA,YAAY,YAAY;AACpB,WAAO,KAAK,YAAY,UAAU;AAAA,EACtC;AAAA,EACA,YAAY,KAAK;AAEb,SAAK,MAAM,KAAK;AAChB,SAAK,OAAO;AACZ,SAAK,QAAQ,KAAK,MAAM,KAAK,IAAI;AACjC,SAAK,YAAY,KAAK,UAAU,KAAK,IAAI;AACzC,SAAK,aAAa,KAAK,WAAW,KAAK,IAAI;AAC3C,SAAK,iBAAiB,KAAK,eAAe,KAAK,IAAI;AACnD,SAAK,MAAM,KAAK,IAAI,KAAK,IAAI;AAC7B,SAAK,SAAS,KAAK,OAAO,KAAK,IAAI;AACnC,SAAK,aAAa,KAAK,WAAW,KAAK,IAAI;AAC3C,SAAK,cAAc,KAAK,YAAY,KAAK,IAAI;AAC7C,SAAK,WAAW,KAAK,SAAS,KAAK,IAAI;AACvC,SAAK,WAAW,KAAK,SAAS,KAAK,IAAI;AACvC,SAAK,UAAU,KAAK,QAAQ,KAAK,IAAI;AACrC,SAAK,QAAQ,KAAK,MAAM,KAAK,IAAI;AACjC,SAAK,UAAU,KAAK,QAAQ,KAAK,IAAI;AACrC,SAAK,KAAK,KAAK,GAAG,KAAK,IAAI;AAC3B,SAAK,MAAM,KAAK,IAAI,KAAK,IAAI;AAC7B,SAAK,YAAY,KAAK,UAAU,KAAK,IAAI;AACzC,SAAK,QAAQ,KAAK,MAAM,KAAK,IAAI;AACjC,SAAK,UAAU,KAAK,QAAQ,KAAK,IAAI;AACrC,SAAK,QAAQ,KAAK,MAAM,KAAK,IAAI;AACjC,SAAK,WAAW,KAAK,SAAS,KAAK,IAAI;AACvC,SAAK,OAAO,KAAK,KAAK,KAAK,IAAI;AAC/B,SAAK,WAAW,KAAK,SAAS,KAAK,IAAI;AACvC,SAAK,aAAa,KAAK,WAAW,KAAK,IAAI;AAC3C,SAAK,aAAa,KAAK,WAAW,KAAK,IAAI;AAC3C,SAAK,WAAW,IAAI;AAAA,MAChB,SAAS;AAAA,MACT,QAAQ;AAAA,MACR,UAAU,CAAC,SAAS,KAAK,WAAW,EAAE,IAAI;AAAA,IAC9C;AAAA,EACJ;AAAA,EACA,WAAW;AACP,WAAO,YAAY,OAAO,MAAM,KAAK,IAAI;AAAA,EAC7C;AAAA,EACA,WAAW;AACP,WAAO,YAAY,OAAO,MAAM,KAAK,IAAI;AAAA,EAC7C;AAAA,EACA,UAAU;AACN,WAAO,KAAK,SAAS,EAAE,SAAS;AAAA,EACpC;AAAA,EACA,QAAQ;AACJ,WAAO,SAAS,OAAO,IAAI;AAAA,EAC/B;AAAA,EACA,UAAU;AACN,WAAO,WAAW,OAAO,MAAM,KAAK,IAAI;AAAA,EAC5C;AAAA,EACA,GAAG,QAAQ;AACP,WAAO,SAAS,OAAO,CAAC,MAAM,MAAM,GAAG,KAAK,IAAI;AAAA,EACpD;AAAA,EACA,IAAI,UAAU;AACV,WAAO,gBAAgB,OAAO,MAAM,UAAU,KAAK,IAAI;AAAA,EAC3D;AAAA,EACA,UAAU,WAAW;AACjB,WAAO,IAAI,WAAW;AAAA,MAClB,GAAG,oBAAoB,KAAK,IAAI;AAAA,MAChC,QAAQ;AAAA,MACR,UAAU,sBAAsB;AAAA,MAChC,QAAQ,EAAE,MAAM,aAAa,UAAU;AAAA,IAC3C,CAAC;AAAA,EACL;AAAA,EACA,QAAQ,KAAK;AACT,UAAM,mBAAmB,OAAO,QAAQ,aAAa,MAAM,MAAM;AACjE,WAAO,IAAI,WAAW;AAAA,MAClB,GAAG,oBAAoB,KAAK,IAAI;AAAA,MAChC,WAAW;AAAA,MACX,cAAc;AAAA,MACd,UAAU,sBAAsB;AAAA,IACpC,CAAC;AAAA,EACL;AAAA,EACA,QAAQ;AACJ,WAAO,IAAI,WAAW;AAAA,MAClB,UAAU,sBAAsB;AAAA,MAChC,MAAM;AAAA,MACN,GAAG,oBAAoB,KAAK,IAAI;AAAA,IACpC,CAAC;AAAA,EACL;AAAA,EACA,MAAM,KAAK;AACP,UAAM,iBAAiB,OAAO,QAAQ,aAAa,MAAM,MAAM;AAC/D,WAAO,IAAI,SAAS;AAAA,MAChB,GAAG,oBAAoB,KAAK,IAAI;AAAA,MAChC,WAAW;AAAA,MACX,YAAY;AAAA,MACZ,UAAU,sBAAsB;AAAA,IACpC,CAAC;AAAA,EACL;AAAA,EACA,SAAS,aAAa;AAClB,UAAM,OAAO,KAAK;AAClB,WAAO,IAAI,KAAK;AAAA,MACZ,GAAG,KAAK;AAAA,MACR;AAAA,IACJ,CAAC;AAAA,EACL;AAAA,EACA,KAAK,QAAQ;AACT,WAAO,YAAY,OAAO,MAAM,MAAM;AAAA,EAC1C;AAAA,EACA,WAAW;AACP,WAAO,YAAY,OAAO,IAAI;AAAA,EAClC;AAAA,EACA,aAAa;AACT,WAAO,KAAK,UAAU,MAAS,EAAE;AAAA,EACrC;AAAA,EACA,aAAa;AACT,WAAO,KAAK,UAAU,IAAI,EAAE;AAAA,EAChC;AACJ;AACA,IAAM,YAAY;AAClB,IAAM,aAAa;AACnB,IAAM,YAAY;AAGlB,IAAM,YAAY;AAClB,IAAM,cAAc;AACpB,IAAM,WAAW;AACjB,IAAM,gBAAgB;AAatB,IAAM,aAAa;AAInB,IAAM,cAAc;AACpB,IAAI;AAEJ,IAAM,YAAY;AAClB,IAAM,gBAAgB;AAGtB,IAAM,YAAY;AAClB,IAAM,gBAAgB;AAEtB,IAAM,cAAc;AAEpB,IAAM,iBAAiB;AAMvB,IAAM,kBAAkB;AACxB,IAAM,YAAY,IAAI,OAAO,IAAI,eAAe,GAAG;AACnD,SAAS,gBAAgB,MAAM;AAC3B,MAAI,qBAAqB;AACzB,MAAI,KAAK,WAAW;AAChB,yBAAqB,GAAG,kBAAkB,UAAU,KAAK,SAAS;AAAA,EACtE,WACS,KAAK,aAAa,MAAM;AAC7B,yBAAqB,GAAG,kBAAkB;AAAA,EAC9C;AACA,QAAM,oBAAoB,KAAK,YAAY,MAAM;AACjD,SAAO,8BAA8B,kBAAkB,IAAI,iBAAiB;AAChF;AACA,SAAS,UAAU,MAAM;AACrB,SAAO,IAAI,OAAO,IAAI,gBAAgB,IAAI,CAAC,GAAG;AAClD;AAEO,SAAS,cAAc,MAAM;AAChC,MAAI,QAAQ,GAAG,eAAe,IAAI,gBAAgB,IAAI,CAAC;AACvD,QAAM,OAAO,CAAC;AACd,OAAK,KAAK,KAAK,QAAQ,OAAO,GAAG;AACjC,MAAI,KAAK;AACL,SAAK,KAAK,sBAAsB;AACpC,UAAQ,GAAG,KAAK,IAAI,KAAK,KAAK,GAAG,CAAC;AAClC,SAAO,IAAI,OAAO,IAAI,KAAK,GAAG;AAClC;AACA,SAAS,UAAU,IAAI,SAAS;AAC5B,OAAK,YAAY,QAAQ,CAAC,YAAY,UAAU,KAAK,EAAE,GAAG;AACtD,WAAO;AAAA,EACX;AACA,OAAK,YAAY,QAAQ,CAAC,YAAY,UAAU,KAAK,EAAE,GAAG;AACtD,WAAO;AAAA,EACX;AACA,SAAO;AACX;AACA,SAAS,WAAW,KAAK,KAAK;AAC1B,MAAI,CAAC,SAAS,KAAK,GAAG;AAClB,WAAO;AACX,MAAI;AACA,UAAM,CAAC,MAAM,IAAI,IAAI,MAAM,GAAG;AAC9B,QAAI,CAAC;AACD,aAAO;AAEX,UAAM,SAAS,OACV,QAAQ,MAAM,GAAG,EACjB,QAAQ,MAAM,GAAG,EACjB,OAAO,OAAO,UAAW,IAAK,OAAO,SAAS,KAAM,GAAI,GAAG;AAChE,UAAM,UAAU,KAAK,MAAM,KAAK,MAAM,CAAC;AACvC,QAAI,OAAO,YAAY,YAAY,YAAY;AAC3C,aAAO;AACX,QAAI,SAAS,WAAW,SAAS,QAAQ;AACrC,aAAO;AACX,QAAI,CAAC,QAAQ;AACT,aAAO;AACX,QAAI,OAAO,QAAQ,QAAQ;AACvB,aAAO;AACX,WAAO;AAAA,EACX,QACM;AACF,WAAO;AAAA,EACX;AACJ;AACA,SAAS,YAAY,IAAI,SAAS;AAC9B,OAAK,YAAY,QAAQ,CAAC,YAAY,cAAc,KAAK,EAAE,GAAG;AAC1D,WAAO;AAAA,EACX;AACA,OAAK,YAAY,QAAQ,CAAC,YAAY,cAAc,KAAK,EAAE,GAAG;AAC1D,WAAO;AAAA,EACX;AACA,SAAO;AACX;AACO,IAAM,YAAN,MAAM,mBAAkB,QAAQ;AAAA,EACnC,OAAO,OAAO;AACV,QAAI,KAAK,KAAK,QAAQ;AAClB,YAAM,OAAO,OAAO,MAAM,IAAI;AAAA,IAClC;AACA,UAAM,aAAa,KAAK,SAAS,KAAK;AACtC,QAAI,eAAe,cAAc,QAAQ;AACrC,YAAMC,OAAM,KAAK,gBAAgB,KAAK;AACtC,wBAAkBA,MAAK;AAAA,QACnB,MAAM,aAAa;AAAA,QACnB,UAAU,cAAc;AAAA,QACxB,UAAUA,KAAI;AAAA,MAClB,CAAC;AACD,aAAO;AAAA,IACX;AACA,UAAMC,UAAS,IAAI,YAAY;AAC/B,QAAI,MAAM;AACV,eAAW,SAAS,KAAK,KAAK,QAAQ;AAClC,UAAI,MAAM,SAAS,OAAO;AACtB,YAAI,MAAM,KAAK,SAAS,MAAM,OAAO;AACjC,gBAAM,KAAK,gBAAgB,OAAO,GAAG;AACrC,4BAAkB,KAAK;AAAA,YACnB,MAAM,aAAa;AAAA,YACnB,SAAS,MAAM;AAAA,YACf,MAAM;AAAA,YACN,WAAW;AAAA,YACX,OAAO;AAAA,YACP,SAAS,MAAM;AAAA,UACnB,CAAC;AACD,UAAAA,QAAO,MAAM;AAAA,QACjB;AAAA,MACJ,WACS,MAAM,SAAS,OAAO;AAC3B,YAAI,MAAM,KAAK,SAAS,MAAM,OAAO;AACjC,gBAAM,KAAK,gBAAgB,OAAO,GAAG;AACrC,4BAAkB,KAAK;AAAA,YACnB,MAAM,aAAa;AAAA,YACnB,SAAS,MAAM;AAAA,YACf,MAAM;AAAA,YACN,WAAW;AAAA,YACX,OAAO;AAAA,YACP,SAAS,MAAM;AAAA,UACnB,CAAC;AACD,UAAAA,QAAO,MAAM;AAAA,QACjB;AAAA,MACJ,WACS,MAAM,SAAS,UAAU;AAC9B,cAAM,SAAS,MAAM,KAAK,SAAS,MAAM;AACzC,cAAM,WAAW,MAAM,KAAK,SAAS,MAAM;AAC3C,YAAI,UAAU,UAAU;AACpB,gBAAM,KAAK,gBAAgB,OAAO,GAAG;AACrC,cAAI,QAAQ;AACR,8BAAkB,KAAK;AAAA,cACnB,MAAM,aAAa;AAAA,cACnB,SAAS,MAAM;AAAA,cACf,MAAM;AAAA,cACN,WAAW;AAAA,cACX,OAAO;AAAA,cACP,SAAS,MAAM;AAAA,YACnB,CAAC;AAAA,UACL,WACS,UAAU;AACf,8BAAkB,KAAK;AAAA,cACnB,MAAM,aAAa;AAAA,cACnB,SAAS,MAAM;AAAA,cACf,MAAM;AAAA,cACN,WAAW;AAAA,cACX,OAAO;AAAA,cACP,SAAS,MAAM;AAAA,YACnB,CAAC;AAAA,UACL;AACA,UAAAA,QAAO,MAAM;AAAA,QACjB;AAAA,MACJ,WACS,MAAM,SAAS,SAAS;AAC7B,YAAI,CAAC,WAAW,KAAK,MAAM,IAAI,GAAG;AAC9B,gBAAM,KAAK,gBAAgB,OAAO,GAAG;AACrC,4BAAkB,KAAK;AAAA,YACnB,YAAY;AAAA,YACZ,MAAM,aAAa;AAAA,YACnB,SAAS,MAAM;AAAA,UACnB,CAAC;AACD,UAAAA,QAAO,MAAM;AAAA,QACjB;AAAA,MACJ,WACS,MAAM,SAAS,SAAS;AAC7B,YAAI,CAAC,YAAY;AACb,uBAAa,IAAI,OAAO,aAAa,GAAG;AAAA,QAC5C;AACA,YAAI,CAAC,WAAW,KAAK,MAAM,IAAI,GAAG;AAC9B,gBAAM,KAAK,gBAAgB,OAAO,GAAG;AACrC,4BAAkB,KAAK;AAAA,YACnB,YAAY;AAAA,YACZ,MAAM,aAAa;AAAA,YACnB,SAAS,MAAM;AAAA,UACnB,CAAC;AACD,UAAAA,QAAO,MAAM;AAAA,QACjB;AAAA,MACJ,WACS,MAAM,SAAS,QAAQ;AAC5B,YAAI,CAAC,UAAU,KAAK,MAAM,IAAI,GAAG;AAC7B,gBAAM,KAAK,gBAAgB,OAAO,GAAG;AACrC,4BAAkB,KAAK;AAAA,YACnB,YAAY;AAAA,YACZ,MAAM,aAAa;AAAA,YACnB,SAAS,MAAM;AAAA,UACnB,CAAC;AACD,UAAAA,QAAO,MAAM;AAAA,QACjB;AAAA,MACJ,WACS,MAAM,SAAS,UAAU;AAC9B,YAAI,CAAC,YAAY,KAAK,MAAM,IAAI,GAAG;AAC/B,gBAAM,KAAK,gBAAgB,OAAO,GAAG;AACrC,4BAAkB,KAAK;AAAA,YACnB,YAAY;AAAA,YACZ,MAAM,aAAa;AAAA,YACnB,SAAS,MAAM;AAAA,UACnB,CAAC;AACD,UAAAA,QAAO,MAAM;AAAA,QACjB;AAAA,MACJ,WACS,MAAM,SAAS,QAAQ;AAC5B,YAAI,CAAC,UAAU,KAAK,MAAM,IAAI,GAAG;AAC7B,gBAAM,KAAK,gBAAgB,OAAO,GAAG;AACrC,4BAAkB,KAAK;AAAA,YACnB,YAAY;AAAA,YACZ,MAAM,aAAa;AAAA,YACnB,SAAS,MAAM;AAAA,UACnB,CAAC;AACD,UAAAA,QAAO,MAAM;AAAA,QACjB;AAAA,MACJ,WACS,MAAM,SAAS,SAAS;AAC7B,YAAI,CAAC,WAAW,KAAK,MAAM,IAAI,GAAG;AAC9B,gBAAM,KAAK,gBAAgB,OAAO,GAAG;AACrC,4BAAkB,KAAK;AAAA,YACnB,YAAY;AAAA,YACZ,MAAM,aAAa;AAAA,YACnB,SAAS,MAAM;AAAA,UACnB,CAAC;AACD,UAAAA,QAAO,MAAM;AAAA,QACjB;AAAA,MACJ,WACS,MAAM,SAAS,QAAQ;AAC5B,YAAI,CAAC,UAAU,KAAK,MAAM,IAAI,GAAG;AAC7B,gBAAM,KAAK,gBAAgB,OAAO,GAAG;AACrC,4BAAkB,KAAK;AAAA,YACnB,YAAY;AAAA,YACZ,MAAM,aAAa;AAAA,YACnB,SAAS,MAAM;AAAA,UACnB,CAAC;AACD,UAAAA,QAAO,MAAM;AAAA,QACjB;AAAA,MACJ,WACS,MAAM,SAAS,OAAO;AAC3B,YAAI;AACA,cAAI,IAAI,MAAM,IAAI;AAAA,QACtB,QACM;AACF,gBAAM,KAAK,gBAAgB,OAAO,GAAG;AACrC,4BAAkB,KAAK;AAAA,YACnB,YAAY;AAAA,YACZ,MAAM,aAAa;AAAA,YACnB,SAAS,MAAM;AAAA,UACnB,CAAC;AACD,UAAAA,QAAO,MAAM;AAAA,QACjB;AAAA,MACJ,WACS,MAAM,SAAS,SAAS;AAC7B,cAAM,MAAM,YAAY;AACxB,cAAM,aAAa,MAAM,MAAM,KAAK,MAAM,IAAI;AAC9C,YAAI,CAAC,YAAY;AACb,gBAAM,KAAK,gBAAgB,OAAO,GAAG;AACrC,4BAAkB,KAAK;AAAA,YACnB,YAAY;AAAA,YACZ,MAAM,aAAa;AAAA,YACnB,SAAS,MAAM;AAAA,UACnB,CAAC;AACD,UAAAA,QAAO,MAAM;AAAA,QACjB;AAAA,MACJ,WACS,MAAM,SAAS,QAAQ;AAC5B,cAAM,OAAO,MAAM,KAAK,KAAK;AAAA,MACjC,WACS,MAAM,SAAS,YAAY;AAChC,YAAI,CAAC,MAAM,KAAK,SAAS,MAAM,OAAO,MAAM,QAAQ,GAAG;AACnD,gBAAM,KAAK,gBAAgB,OAAO,GAAG;AACrC,4BAAkB,KAAK;AAAA,YACnB,MAAM,aAAa;AAAA,YACnB,YAAY,EAAE,UAAU,MAAM,OAAO,UAAU,MAAM,SAAS;AAAA,YAC9D,SAAS,MAAM;AAAA,UACnB,CAAC;AACD,UAAAA,QAAO,MAAM;AAAA,QACjB;AAAA,MACJ,WACS,MAAM,SAAS,eAAe;AACnC,cAAM,OAAO,MAAM,KAAK,YAAY;AAAA,MACxC,WACS,MAAM,SAAS,eAAe;AACnC,cAAM,OAAO,MAAM,KAAK,YAAY;AAAA,MACxC,WACS,MAAM,SAAS,cAAc;AAClC,YAAI,CAAC,MAAM,KAAK,WAAW,MAAM,KAAK,GAAG;AACrC,gBAAM,KAAK,gBAAgB,OAAO,GAAG;AACrC,4BAAkB,KAAK;AAAA,YACnB,MAAM,aAAa;AAAA,YACnB,YAAY,EAAE,YAAY,MAAM,MAAM;AAAA,YACtC,SAAS,MAAM;AAAA,UACnB,CAAC;AACD,UAAAA,QAAO,MAAM;AAAA,QACjB;AAAA,MACJ,WACS,MAAM,SAAS,YAAY;AAChC,YAAI,CAAC,MAAM,KAAK,SAAS,MAAM,KAAK,GAAG;AACnC,gBAAM,KAAK,gBAAgB,OAAO,GAAG;AACrC,4BAAkB,KAAK;AAAA,YACnB,MAAM,aAAa;AAAA,YACnB,YAAY,EAAE,UAAU,MAAM,MAAM;AAAA,YACpC,SAAS,MAAM;AAAA,UACnB,CAAC;AACD,UAAAA,QAAO,MAAM;AAAA,QACjB;AAAA,MACJ,WACS,MAAM,SAAS,YAAY;AAChC,cAAM,QAAQ,cAAc,KAAK;AACjC,YAAI,CAAC,MAAM,KAAK,MAAM,IAAI,GAAG;AACzB,gBAAM,KAAK,gBAAgB,OAAO,GAAG;AACrC,4BAAkB,KAAK;AAAA,YACnB,MAAM,aAAa;AAAA,YACnB,YAAY;AAAA,YACZ,SAAS,MAAM;AAAA,UACnB,CAAC;AACD,UAAAA,QAAO,MAAM;AAAA,QACjB;AAAA,MACJ,WACS,MAAM,SAAS,QAAQ;AAC5B,cAAM,QAAQ;AACd,YAAI,CAAC,MAAM,KAAK,MAAM,IAAI,GAAG;AACzB,gBAAM,KAAK,gBAAgB,OAAO,GAAG;AACrC,4BAAkB,KAAK;AAAA,YACnB,MAAM,aAAa;AAAA,YACnB,YAAY;AAAA,YACZ,SAAS,MAAM;AAAA,UACnB,CAAC;AACD,UAAAA,QAAO,MAAM;AAAA,QACjB;AAAA,MACJ,WACS,MAAM,SAAS,QAAQ;AAC5B,cAAM,QAAQ,UAAU,KAAK;AAC7B,YAAI,CAAC,MAAM,KAAK,MAAM,IAAI,GAAG;AACzB,gBAAM,KAAK,gBAAgB,OAAO,GAAG;AACrC,4BAAkB,KAAK;AAAA,YACnB,MAAM,aAAa;AAAA,YACnB,YAAY;AAAA,YACZ,SAAS,MAAM;AAAA,UACnB,CAAC;AACD,UAAAA,QAAO,MAAM;AAAA,QACjB;AAAA,MACJ,WACS,MAAM,SAAS,YAAY;AAChC,YAAI,CAAC,cAAc,KAAK,MAAM,IAAI,GAAG;AACjC,gBAAM,KAAK,gBAAgB,OAAO,GAAG;AACrC,4BAAkB,KAAK;AAAA,YACnB,YAAY;AAAA,YACZ,MAAM,aAAa;AAAA,YACnB,SAAS,MAAM;AAAA,UACnB,CAAC;AACD,UAAAA,QAAO,MAAM;AAAA,QACjB;AAAA,MACJ,WACS,MAAM,SAAS,MAAM;AAC1B,YAAI,CAAC,UAAU,MAAM,MAAM,MAAM,OAAO,GAAG;AACvC,gBAAM,KAAK,gBAAgB,OAAO,GAAG;AACrC,4BAAkB,KAAK;AAAA,YACnB,YAAY;AAAA,YACZ,MAAM,aAAa;AAAA,YACnB,SAAS,MAAM;AAAA,UACnB,CAAC;AACD,UAAAA,QAAO,MAAM;AAAA,QACjB;AAAA,MACJ,WACS,MAAM,SAAS,OAAO;AAC3B,YAAI,CAAC,WAAW,MAAM,MAAM,MAAM,GAAG,GAAG;AACpC,gBAAM,KAAK,gBAAgB,OAAO,GAAG;AACrC,4BAAkB,KAAK;AAAA,YACnB,YAAY;AAAA,YACZ,MAAM,aAAa;AAAA,YACnB,SAAS,MAAM;AAAA,UACnB,CAAC;AACD,UAAAA,QAAO,MAAM;AAAA,QACjB;AAAA,MACJ,WACS,MAAM,SAAS,QAAQ;AAC5B,YAAI,CAAC,YAAY,MAAM,MAAM,MAAM,OAAO,GAAG;AACzC,gBAAM,KAAK,gBAAgB,OAAO,GAAG;AACrC,4BAAkB,KAAK;AAAA,YACnB,YAAY;AAAA,YACZ,MAAM,aAAa;AAAA,YACnB,SAAS,MAAM;AAAA,UACnB,CAAC;AACD,UAAAA,QAAO,MAAM;AAAA,QACjB;AAAA,MACJ,WACS,MAAM,SAAS,UAAU;AAC9B,YAAI,CAAC,YAAY,KAAK,MAAM,IAAI,GAAG;AAC/B,gBAAM,KAAK,gBAAgB,OAAO,GAAG;AACrC,4BAAkB,KAAK;AAAA,YACnB,YAAY;AAAA,YACZ,MAAM,aAAa;AAAA,YACnB,SAAS,MAAM;AAAA,UACnB,CAAC;AACD,UAAAA,QAAO,MAAM;AAAA,QACjB;AAAA,MACJ,WACS,MAAM,SAAS,aAAa;AACjC,YAAI,CAAC,eAAe,KAAK,MAAM,IAAI,GAAG;AAClC,gBAAM,KAAK,gBAAgB,OAAO,GAAG;AACrC,4BAAkB,KAAK;AAAA,YACnB,YAAY;AAAA,YACZ,MAAM,aAAa;AAAA,YACnB,SAAS,MAAM;AAAA,UACnB,CAAC;AACD,UAAAA,QAAO,MAAM;AAAA,QACjB;AAAA,MACJ,OACK;AACD,aAAK,YAAY,KAAK;AAAA,MAC1B;AAAA,IACJ;AACA,WAAO,EAAE,QAAQA,QAAO,OAAO,OAAO,MAAM,KAAK;AAAA,EACrD;AAAA,EACA,OAAO,OAAO,YAAY,SAAS;AAC/B,WAAO,KAAK,WAAW,CAAC,SAAS,MAAM,KAAK,IAAI,GAAG;AAAA,MAC/C;AAAA,MACA,MAAM,aAAa;AAAA,MACnB,GAAG,UAAU,SAAS,OAAO;AAAA,IACjC,CAAC;AAAA,EACL;AAAA,EACA,UAAU,OAAO;AACb,WAAO,IAAI,WAAU;AAAA,MACjB,GAAG,KAAK;AAAA,MACR,QAAQ,CAAC,GAAG,KAAK,KAAK,QAAQ,KAAK;AAAA,IACvC,CAAC;AAAA,EACL;AAAA,EACA,MAAM,SAAS;AACX,WAAO,KAAK,UAAU,EAAE,MAAM,SAAS,GAAG,UAAU,SAAS,OAAO,EAAE,CAAC;AAAA,EAC3E;AAAA,EACA,IAAI,SAAS;AACT,WAAO,KAAK,UAAU,EAAE,MAAM,OAAO,GAAG,UAAU,SAAS,OAAO,EAAE,CAAC;AAAA,EACzE;AAAA,EACA,MAAM,SAAS;AACX,WAAO,KAAK,UAAU,EAAE,MAAM,SAAS,GAAG,UAAU,SAAS,OAAO,EAAE,CAAC;AAAA,EAC3E;AAAA,EACA,KAAK,SAAS;AACV,WAAO,KAAK,UAAU,EAAE,MAAM,QAAQ,GAAG,UAAU,SAAS,OAAO,EAAE,CAAC;AAAA,EAC1E;AAAA,EACA,OAAO,SAAS;AACZ,WAAO,KAAK,UAAU,EAAE,MAAM,UAAU,GAAG,UAAU,SAAS,OAAO,EAAE,CAAC;AAAA,EAC5E;AAAA,EACA,KAAK,SAAS;AACV,WAAO,KAAK,UAAU,EAAE,MAAM,QAAQ,GAAG,UAAU,SAAS,OAAO,EAAE,CAAC;AAAA,EAC1E;AAAA,EACA,MAAM,SAAS;AACX,WAAO,KAAK,UAAU,EAAE,MAAM,SAAS,GAAG,UAAU,SAAS,OAAO,EAAE,CAAC;AAAA,EAC3E;AAAA,EACA,KAAK,SAAS;AACV,WAAO,KAAK,UAAU,EAAE,MAAM,QAAQ,GAAG,UAAU,SAAS,OAAO,EAAE,CAAC;AAAA,EAC1E;AAAA,EACA,OAAO,SAAS;AACZ,WAAO,KAAK,UAAU,EAAE,MAAM,UAAU,GAAG,UAAU,SAAS,OAAO,EAAE,CAAC;AAAA,EAC5E;AAAA,EACA,UAAU,SAAS;AAEf,WAAO,KAAK,UAAU;AAAA,MAClB,MAAM;AAAA,MACN,GAAG,UAAU,SAAS,OAAO;AAAA,IACjC,CAAC;AAAA,EACL;AAAA,EACA,IAAI,SAAS;AACT,WAAO,KAAK,UAAU,EAAE,MAAM,OAAO,GAAG,UAAU,SAAS,OAAO,EAAE,CAAC;AAAA,EACzE;AAAA,EACA,GAAG,SAAS;AACR,WAAO,KAAK,UAAU,EAAE,MAAM,MAAM,GAAG,UAAU,SAAS,OAAO,EAAE,CAAC;AAAA,EACxE;AAAA,EACA,KAAK,SAAS;AACV,WAAO,KAAK,UAAU,EAAE,MAAM,QAAQ,GAAG,UAAU,SAAS,OAAO,EAAE,CAAC;AAAA,EAC1E;AAAA,EACA,SAAS,SAAS;AACd,QAAI,OAAO,YAAY,UAAU;AAC7B,aAAO,KAAK,UAAU;AAAA,QAClB,MAAM;AAAA,QACN,WAAW;AAAA,QACX,QAAQ;AAAA,QACR,OAAO;AAAA,QACP,SAAS;AAAA,MACb,CAAC;AAAA,IACL;AACA,WAAO,KAAK,UAAU;AAAA,MAClB,MAAM;AAAA,MACN,WAAW,OAAO,SAAS,cAAc,cAAc,OAAO,SAAS;AAAA,MACvE,QAAQ,SAAS,UAAU;AAAA,MAC3B,OAAO,SAAS,SAAS;AAAA,MACzB,GAAG,UAAU,SAAS,SAAS,OAAO;AAAA,IAC1C,CAAC;AAAA,EACL;AAAA,EACA,KAAK,SAAS;AACV,WAAO,KAAK,UAAU,EAAE,MAAM,QAAQ,QAAQ,CAAC;AAAA,EACnD;AAAA,EACA,KAAK,SAAS;AACV,QAAI,OAAO,YAAY,UAAU;AAC7B,aAAO,KAAK,UAAU;AAAA,QAClB,MAAM;AAAA,QACN,WAAW;AAAA,QACX,SAAS;AAAA,MACb,CAAC;AAAA,IACL;AACA,WAAO,KAAK,UAAU;AAAA,MAClB,MAAM;AAAA,MACN,WAAW,OAAO,SAAS,cAAc,cAAc,OAAO,SAAS;AAAA,MACvE,GAAG,UAAU,SAAS,SAAS,OAAO;AAAA,IAC1C,CAAC;AAAA,EACL;AAAA,EACA,SAAS,SAAS;AACd,WAAO,KAAK,UAAU,EAAE,MAAM,YAAY,GAAG,UAAU,SAAS,OAAO,EAAE,CAAC;AAAA,EAC9E;AAAA,EACA,MAAM,OAAO,SAAS;AAClB,WAAO,KAAK,UAAU;AAAA,MAClB,MAAM;AAAA,MACN;AAAA,MACA,GAAG,UAAU,SAAS,OAAO;AAAA,IACjC,CAAC;AAAA,EACL;AAAA,EACA,SAAS,OAAO,SAAS;AACrB,WAAO,KAAK,UAAU;AAAA,MAClB,MAAM;AAAA,MACN;AAAA,MACA,UAAU,SAAS;AAAA,MACnB,GAAG,UAAU,SAAS,SAAS,OAAO;AAAA,IAC1C,CAAC;AAAA,EACL;AAAA,EACA,WAAW,OAAO,SAAS;AACvB,WAAO,KAAK,UAAU;AAAA,MAClB,MAAM;AAAA,MACN;AAAA,MACA,GAAG,UAAU,SAAS,OAAO;AAAA,IACjC,CAAC;AAAA,EACL;AAAA,EACA,SAAS,OAAO,SAAS;AACrB,WAAO,KAAK,UAAU;AAAA,MAClB,MAAM;AAAA,MACN;AAAA,MACA,GAAG,UAAU,SAAS,OAAO;AAAA,IACjC,CAAC;AAAA,EACL;AAAA,EACA,IAAI,WAAW,SAAS;AACpB,WAAO,KAAK,UAAU;AAAA,MAClB,MAAM;AAAA,MACN,OAAO;AAAA,MACP,GAAG,UAAU,SAAS,OAAO;AAAA,IACjC,CAAC;AAAA,EACL;AAAA,EACA,IAAI,WAAW,SAAS;AACpB,WAAO,KAAK,UAAU;AAAA,MAClB,MAAM;AAAA,MACN,OAAO;AAAA,MACP,GAAG,UAAU,SAAS,OAAO;AAAA,IACjC,CAAC;AAAA,EACL;AAAA,EACA,OAAO,KAAK,SAAS;AACjB,WAAO,KAAK,UAAU;AAAA,MAClB,MAAM;AAAA,MACN,OAAO;AAAA,MACP,GAAG,UAAU,SAAS,OAAO;AAAA,IACjC,CAAC;AAAA,EACL;AAAA;AAAA;AAAA;AAAA,EAIA,SAAS,SAAS;AACd,WAAO,KAAK,IAAI,GAAG,UAAU,SAAS,OAAO,CAAC;AAAA,EAClD;AAAA,EACA,OAAO;AACH,WAAO,IAAI,WAAU;AAAA,MACjB,GAAG,KAAK;AAAA,MACR,QAAQ,CAAC,GAAG,KAAK,KAAK,QAAQ,EAAE,MAAM,OAAO,CAAC;AAAA,IAClD,CAAC;AAAA,EACL;AAAA,EACA,cAAc;AACV,WAAO,IAAI,WAAU;AAAA,MACjB,GAAG,KAAK;AAAA,MACR,QAAQ,CAAC,GAAG,KAAK,KAAK,QAAQ,EAAE,MAAM,cAAc,CAAC;AAAA,IACzD,CAAC;AAAA,EACL;AAAA,EACA,cAAc;AACV,WAAO,IAAI,WAAU;AAAA,MACjB,GAAG,KAAK;AAAA,MACR,QAAQ,CAAC,GAAG,KAAK,KAAK,QAAQ,EAAE,MAAM,cAAc,CAAC;AAAA,IACzD,CAAC;AAAA,EACL;AAAA,EACA,IAAI,aAAa;AACb,WAAO,CAAC,CAAC,KAAK,KAAK,OAAO,KAAK,CAAC,OAAO,GAAG,SAAS,UAAU;AAAA,EACjE;AAAA,EACA,IAAI,SAAS;AACT,WAAO,CAAC,CAAC,KAAK,KAAK,OAAO,KAAK,CAAC,OAAO,GAAG,SAAS,MAAM;AAAA,EAC7D;AAAA,EACA,IAAI,SAAS;AACT,WAAO,CAAC,CAAC,KAAK,KAAK,OAAO,KAAK,CAAC,OAAO,GAAG,SAAS,MAAM;AAAA,EAC7D;AAAA,EACA,IAAI,aAAa;AACb,WAAO,CAAC,CAAC,KAAK,KAAK,OAAO,KAAK,CAAC,OAAO,GAAG,SAAS,UAAU;AAAA,EACjE;AAAA,EACA,IAAI,UAAU;AACV,WAAO,CAAC,CAAC,KAAK,KAAK,OAAO,KAAK,CAAC,OAAO,GAAG,SAAS,OAAO;AAAA,EAC9D;AAAA,EACA,IAAI,QAAQ;AACR,WAAO,CAAC,CAAC,KAAK,KAAK,OAAO,KAAK,CAAC,OAAO,GAAG,SAAS,KAAK;AAAA,EAC5D;AAAA,EACA,IAAI,UAAU;AACV,WAAO,CAAC,CAAC,KAAK,KAAK,OAAO,KAAK,CAAC,OAAO,GAAG,SAAS,OAAO;AAAA,EAC9D;AAAA,EACA,IAAI,SAAS;AACT,WAAO,CAAC,CAAC,KAAK,KAAK,OAAO,KAAK,CAAC,OAAO,GAAG,SAAS,MAAM;AAAA,EAC7D;AAAA,EACA,IAAI,WAAW;AACX,WAAO,CAAC,CAAC,KAAK,KAAK,OAAO,KAAK,CAAC,OAAO,GAAG,SAAS,QAAQ;AAAA,EAC/D;AAAA,EACA,IAAI,SAAS;AACT,WAAO,CAAC,CAAC,KAAK,KAAK,OAAO,KAAK,CAAC,OAAO,GAAG,SAAS,MAAM;AAAA,EAC7D;AAAA,EACA,IAAI,UAAU;AACV,WAAO,CAAC,CAAC,KAAK,KAAK,OAAO,KAAK,CAAC,OAAO,GAAG,SAAS,OAAO;AAAA,EAC9D;AAAA,EACA,IAAI,SAAS;AACT,WAAO,CAAC,CAAC,KAAK,KAAK,OAAO,KAAK,CAAC,OAAO,GAAG,SAAS,MAAM;AAAA,EAC7D;AAAA,EACA,IAAI,OAAO;AACP,WAAO,CAAC,CAAC,KAAK,KAAK,OAAO,KAAK,CAAC,OAAO,GAAG,SAAS,IAAI;AAAA,EAC3D;AAAA,EACA,IAAI,SAAS;AACT,WAAO,CAAC,CAAC,KAAK,KAAK,OAAO,KAAK,CAAC,OAAO,GAAG,SAAS,MAAM;AAAA,EAC7D;AAAA,EACA,IAAI,WAAW;AACX,WAAO,CAAC,CAAC,KAAK,KAAK,OAAO,KAAK,CAAC,OAAO,GAAG,SAAS,QAAQ;AAAA,EAC/D;AAAA,EACA,IAAI,cAAc;AAEd,WAAO,CAAC,CAAC,KAAK,KAAK,OAAO,KAAK,CAAC,OAAO,GAAG,SAAS,WAAW;AAAA,EAClE;AAAA,EACA,IAAI,YAAY;AACZ,QAAI,MAAM;AACV,eAAW,MAAM,KAAK,KAAK,QAAQ;AAC/B,UAAI,GAAG,SAAS,OAAO;AACnB,YAAI,QAAQ,QAAQ,GAAG,QAAQ;AAC3B,gBAAM,GAAG;AAAA,MACjB;AAAA,IACJ;AACA,WAAO;AAAA,EACX;AAAA,EACA,IAAI,YAAY;AACZ,QAAI,MAAM;AACV,eAAW,MAAM,KAAK,KAAK,QAAQ;AAC/B,UAAI,GAAG,SAAS,OAAO;AACnB,YAAI,QAAQ,QAAQ,GAAG,QAAQ;AAC3B,gBAAM,GAAG;AAAA,MACjB;AAAA,IACJ;AACA,WAAO;AAAA,EACX;AACJ;AACA,UAAU,SAAS,CAAC,WAAW;AAC3B,SAAO,IAAI,UAAU;AAAA,IACjB,QAAQ,CAAC;AAAA,IACT,UAAU,sBAAsB;AAAA,IAChC,QAAQ,QAAQ,UAAU;AAAA,IAC1B,GAAG,oBAAoB,MAAM;AAAA,EACjC,CAAC;AACL;AAEA,SAAS,mBAAmB,KAAK,MAAM;AACnC,QAAM,eAAe,IAAI,SAAS,EAAE,MAAM,GAAG,EAAE,CAAC,KAAK,IAAI;AACzD,QAAM,gBAAgB,KAAK,SAAS,EAAE,MAAM,GAAG,EAAE,CAAC,KAAK,IAAI;AAC3D,QAAM,WAAW,cAAc,eAAe,cAAc;AAC5D,QAAM,SAAS,OAAO,SAAS,IAAI,QAAQ,QAAQ,EAAE,QAAQ,KAAK,EAAE,CAAC;AACrE,QAAM,UAAU,OAAO,SAAS,KAAK,QAAQ,QAAQ,EAAE,QAAQ,KAAK,EAAE,CAAC;AACvE,SAAQ,SAAS,UAAW,MAAM;AACtC;AACO,IAAM,YAAN,MAAM,mBAAkB,QAAQ;AAAA,EACnC,cAAc;AACV,UAAM,GAAG,SAAS;AAClB,SAAK,MAAM,KAAK;AAChB,SAAK,MAAM,KAAK;AAChB,SAAK,OAAO,KAAK;AAAA,EACrB;AAAA,EACA,OAAO,OAAO;AACV,QAAI,KAAK,KAAK,QAAQ;AAClB,YAAM,OAAO,OAAO,MAAM,IAAI;AAAA,IAClC;AACA,UAAM,aAAa,KAAK,SAAS,KAAK;AACtC,QAAI,eAAe,cAAc,QAAQ;AACrC,YAAMD,OAAM,KAAK,gBAAgB,KAAK;AACtC,wBAAkBA,MAAK;AAAA,QACnB,MAAM,aAAa;AAAA,QACnB,UAAU,cAAc;AAAA,QACxB,UAAUA,KAAI;AAAA,MAClB,CAAC;AACD,aAAO;AAAA,IACX;AACA,QAAI,MAAM;AACV,UAAMC,UAAS,IAAI,YAAY;AAC/B,eAAW,SAAS,KAAK,KAAK,QAAQ;AAClC,UAAI,MAAM,SAAS,OAAO;AACtB,YAAI,CAAC,KAAK,UAAU,MAAM,IAAI,GAAG;AAC7B,gBAAM,KAAK,gBAAgB,OAAO,GAAG;AACrC,4BAAkB,KAAK;AAAA,YACnB,MAAM,aAAa;AAAA,YACnB,UAAU;AAAA,YACV,UAAU;AAAA,YACV,SAAS,MAAM;AAAA,UACnB,CAAC;AACD,UAAAA,QAAO,MAAM;AAAA,QACjB;AAAA,MACJ,WACS,MAAM,SAAS,OAAO;AAC3B,cAAM,WAAW,MAAM,YAAY,MAAM,OAAO,MAAM,QAAQ,MAAM,QAAQ,MAAM;AAClF,YAAI,UAAU;AACV,gBAAM,KAAK,gBAAgB,OAAO,GAAG;AACrC,4BAAkB,KAAK;AAAA,YACnB,MAAM,aAAa;AAAA,YACnB,SAAS,MAAM;AAAA,YACf,MAAM;AAAA,YACN,WAAW,MAAM;AAAA,YACjB,OAAO;AAAA,YACP,SAAS,MAAM;AAAA,UACnB,CAAC;AACD,UAAAA,QAAO,MAAM;AAAA,QACjB;AAAA,MACJ,WACS,MAAM,SAAS,OAAO;AAC3B,cAAM,SAAS,MAAM,YAAY,MAAM,OAAO,MAAM,QAAQ,MAAM,QAAQ,MAAM;AAChF,YAAI,QAAQ;AACR,gBAAM,KAAK,gBAAgB,OAAO,GAAG;AACrC,4BAAkB,KAAK;AAAA,YACnB,MAAM,aAAa;AAAA,YACnB,SAAS,MAAM;AAAA,YACf,MAAM;AAAA,YACN,WAAW,MAAM;AAAA,YACjB,OAAO;AAAA,YACP,SAAS,MAAM;AAAA,UACnB,CAAC;AACD,UAAAA,QAAO,MAAM;AAAA,QACjB;AAAA,MACJ,WACS,MAAM,SAAS,cAAc;AAClC,YAAI,mBAAmB,MAAM,MAAM,MAAM,KAAK,MAAM,GAAG;AACnD,gBAAM,KAAK,gBAAgB,OAAO,GAAG;AACrC,4BAAkB,KAAK;AAAA,YACnB,MAAM,aAAa;AAAA,YACnB,YAAY,MAAM;AAAA,YAClB,SAAS,MAAM;AAAA,UACnB,CAAC;AACD,UAAAA,QAAO,MAAM;AAAA,QACjB;AAAA,MACJ,WACS,MAAM,SAAS,UAAU;AAC9B,YAAI,CAAC,OAAO,SAAS,MAAM,IAAI,GAAG;AAC9B,gBAAM,KAAK,gBAAgB,OAAO,GAAG;AACrC,4BAAkB,KAAK;AAAA,YACnB,MAAM,aAAa;AAAA,YACnB,SAAS,MAAM;AAAA,UACnB,CAAC;AACD,UAAAA,QAAO,MAAM;AAAA,QACjB;AAAA,MACJ,OACK;AACD,aAAK,YAAY,KAAK;AAAA,MAC1B;AAAA,IACJ;AACA,WAAO,EAAE,QAAQA,QAAO,OAAO,OAAO,MAAM,KAAK;AAAA,EACrD;AAAA,EACA,IAAI,OAAO,SAAS;AAChB,WAAO,KAAK,SAAS,OAAO,OAAO,MAAM,UAAU,SAAS,OAAO,CAAC;AAAA,EACxE;AAAA,EACA,GAAG,OAAO,SAAS;AACf,WAAO,KAAK,SAAS,OAAO,OAAO,OAAO,UAAU,SAAS,OAAO,CAAC;AAAA,EACzE;AAAA,EACA,IAAI,OAAO,SAAS;AAChB,WAAO,KAAK,SAAS,OAAO,OAAO,MAAM,UAAU,SAAS,OAAO,CAAC;AAAA,EACxE;AAAA,EACA,GAAG,OAAO,SAAS;AACf,WAAO,KAAK,SAAS,OAAO,OAAO,OAAO,UAAU,SAAS,OAAO,CAAC;AAAA,EACzE;AAAA,EACA,SAAS,MAAM,OAAO,WAAW,SAAS;AACtC,WAAO,IAAI,WAAU;AAAA,MACjB,GAAG,KAAK;AAAA,MACR,QAAQ;AAAA,QACJ,GAAG,KAAK,KAAK;AAAA,QACb;AAAA,UACI;AAAA,UACA;AAAA,UACA;AAAA,UACA,SAAS,UAAU,SAAS,OAAO;AAAA,QACvC;AAAA,MACJ;AAAA,IACJ,CAAC;AAAA,EACL;AAAA,EACA,UAAU,OAAO;AACb,WAAO,IAAI,WAAU;AAAA,MACjB,GAAG,KAAK;AAAA,MACR,QAAQ,CAAC,GAAG,KAAK,KAAK,QAAQ,KAAK;AAAA,IACvC,CAAC;AAAA,EACL;AAAA,EACA,IAAI,SAAS;AACT,WAAO,KAAK,UAAU;AAAA,MAClB,MAAM;AAAA,MACN,SAAS,UAAU,SAAS,OAAO;AAAA,IACvC,CAAC;AAAA,EACL;AAAA,EACA,SAAS,SAAS;AACd,WAAO,KAAK,UAAU;AAAA,MAClB,MAAM;AAAA,MACN,OAAO;AAAA,MACP,WAAW;AAAA,MACX,SAAS,UAAU,SAAS,OAAO;AAAA,IACvC,CAAC;AAAA,EACL;AAAA,EACA,SAAS,SAAS;AACd,WAAO,KAAK,UAAU;AAAA,MAClB,MAAM;AAAA,MACN,OAAO;AAAA,MACP,WAAW;AAAA,MACX,SAAS,UAAU,SAAS,OAAO;AAAA,IACvC,CAAC;AAAA,EACL;AAAA,EACA,YAAY,SAAS;AACjB,WAAO,KAAK,UAAU;AAAA,MAClB,MAAM;AAAA,MACN,OAAO;AAAA,MACP,WAAW;AAAA,MACX,SAAS,UAAU,SAAS,OAAO;AAAA,IACvC,CAAC;AAAA,EACL;AAAA,EACA,YAAY,SAAS;AACjB,WAAO,KAAK,UAAU;AAAA,MAClB,MAAM;AAAA,MACN,OAAO;AAAA,MACP,WAAW;AAAA,MACX,SAAS,UAAU,SAAS,OAAO;AAAA,IACvC,CAAC;AAAA,EACL;AAAA,EACA,WAAW,OAAO,SAAS;AACvB,WAAO,KAAK,UAAU;AAAA,MAClB,MAAM;AAAA,MACN;AAAA,MACA,SAAS,UAAU,SAAS,OAAO;AAAA,IACvC,CAAC;AAAA,EACL;AAAA,EACA,OAAO,SAAS;AACZ,WAAO,KAAK,UAAU;AAAA,MAClB,MAAM;AAAA,MACN,SAAS,UAAU,SAAS,OAAO;AAAA,IACvC,CAAC;AAAA,EACL;AAAA,EACA,KAAK,SAAS;AACV,WAAO,KAAK,UAAU;AAAA,MAClB,MAAM;AAAA,MACN,WAAW;AAAA,MACX,OAAO,OAAO;AAAA,MACd,SAAS,UAAU,SAAS,OAAO;AAAA,IACvC,CAAC,EAAE,UAAU;AAAA,MACT,MAAM;AAAA,MACN,WAAW;AAAA,MACX,OAAO,OAAO;AAAA,MACd,SAAS,UAAU,SAAS,OAAO;AAAA,IACvC,CAAC;AAAA,EACL;AAAA,EACA,IAAI,WAAW;AACX,QAAI,MAAM;AACV,eAAW,MAAM,KAAK,KAAK,QAAQ;AAC/B,UAAI,GAAG,SAAS,OAAO;AACnB,YAAI,QAAQ,QAAQ,GAAG,QAAQ;AAC3B,gBAAM,GAAG;AAAA,MACjB;AAAA,IACJ;AACA,WAAO;AAAA,EACX;AAAA,EACA,IAAI,WAAW;AACX,QAAI,MAAM;AACV,eAAW,MAAM,KAAK,KAAK,QAAQ;AAC/B,UAAI,GAAG,SAAS,OAAO;AACnB,YAAI,QAAQ,QAAQ,GAAG,QAAQ;AAC3B,gBAAM,GAAG;AAAA,MACjB;AAAA,IACJ;AACA,WAAO;AAAA,EACX;AAAA,EACA,IAAI,QAAQ;AACR,WAAO,CAAC,CAAC,KAAK,KAAK,OAAO,KAAK,CAAC,OAAO,GAAG,SAAS,SAAU,GAAG,SAAS,gBAAgB,KAAK,UAAU,GAAG,KAAK,CAAE;AAAA,EACtH;AAAA,EACA,IAAI,WAAW;AACX,QAAI,MAAM;AACV,QAAI,MAAM;AACV,eAAW,MAAM,KAAK,KAAK,QAAQ;AAC/B,UAAI,GAAG,SAAS,YAAY,GAAG,SAAS,SAAS,GAAG,SAAS,cAAc;AACvE,eAAO;AAAA,MACX,WACS,GAAG,SAAS,OAAO;AACxB,YAAI,QAAQ,QAAQ,GAAG,QAAQ;AAC3B,gBAAM,GAAG;AAAA,MACjB,WACS,GAAG,SAAS,OAAO;AACxB,YAAI,QAAQ,QAAQ,GAAG,QAAQ;AAC3B,gBAAM,GAAG;AAAA,MACjB;AAAA,IACJ;AACA,WAAO,OAAO,SAAS,GAAG,KAAK,OAAO,SAAS,GAAG;AAAA,EACtD;AACJ;AACA,UAAU,SAAS,CAAC,WAAW;AAC3B,SAAO,IAAI,UAAU;AAAA,IACjB,QAAQ,CAAC;AAAA,IACT,UAAU,sBAAsB;AAAA,IAChC,QAAQ,QAAQ,UAAU;AAAA,IAC1B,GAAG,oBAAoB,MAAM;AAAA,EACjC,CAAC;AACL;AACO,IAAM,YAAN,MAAM,mBAAkB,QAAQ;AAAA,EACnC,cAAc;AACV,UAAM,GAAG,SAAS;AAClB,SAAK,MAAM,KAAK;AAChB,SAAK,MAAM,KAAK;AAAA,EACpB;AAAA,EACA,OAAO,OAAO;AACV,QAAI,KAAK,KAAK,QAAQ;AAClB,UAAI;AACA,cAAM,OAAO,OAAO,MAAM,IAAI;AAAA,MAClC,QACM;AACF,eAAO,KAAK,iBAAiB,KAAK;AAAA,MACtC;AAAA,IACJ;AACA,UAAM,aAAa,KAAK,SAAS,KAAK;AACtC,QAAI,eAAe,cAAc,QAAQ;AACrC,aAAO,KAAK,iBAAiB,KAAK;AAAA,IACtC;AACA,QAAI,MAAM;AACV,UAAMA,UAAS,IAAI,YAAY;AAC/B,eAAW,SAAS,KAAK,KAAK,QAAQ;AAClC,UAAI,MAAM,SAAS,OAAO;AACtB,cAAM,WAAW,MAAM,YAAY,MAAM,OAAO,MAAM,QAAQ,MAAM,QAAQ,MAAM;AAClF,YAAI,UAAU;AACV,gBAAM,KAAK,gBAAgB,OAAO,GAAG;AACrC,4BAAkB,KAAK;AAAA,YACnB,MAAM,aAAa;AAAA,YACnB,MAAM;AAAA,YACN,SAAS,MAAM;AAAA,YACf,WAAW,MAAM;AAAA,YACjB,SAAS,MAAM;AAAA,UACnB,CAAC;AACD,UAAAA,QAAO,MAAM;AAAA,QACjB;AAAA,MACJ,WACS,MAAM,SAAS,OAAO;AAC3B,cAAM,SAAS,MAAM,YAAY,MAAM,OAAO,MAAM,QAAQ,MAAM,QAAQ,MAAM;AAChF,YAAI,QAAQ;AACR,gBAAM,KAAK,gBAAgB,OAAO,GAAG;AACrC,4BAAkB,KAAK;AAAA,YACnB,MAAM,aAAa;AAAA,YACnB,MAAM;AAAA,YACN,SAAS,MAAM;AAAA,YACf,WAAW,MAAM;AAAA,YACjB,SAAS,MAAM;AAAA,UACnB,CAAC;AACD,UAAAA,QAAO,MAAM;AAAA,QACjB;AAAA,MACJ,WACS,MAAM,SAAS,cAAc;AAClC,YAAI,MAAM,OAAO,MAAM,UAAU,OAAO,CAAC,GAAG;AACxC,gBAAM,KAAK,gBAAgB,OAAO,GAAG;AACrC,4BAAkB,KAAK;AAAA,YACnB,MAAM,aAAa;AAAA,YACnB,YAAY,MAAM;AAAA,YAClB,SAAS,MAAM;AAAA,UACnB,CAAC;AACD,UAAAA,QAAO,MAAM;AAAA,QACjB;AAAA,MACJ,OACK;AACD,aAAK,YAAY,KAAK;AAAA,MAC1B;AAAA,IACJ;AACA,WAAO,EAAE,QAAQA,QAAO,OAAO,OAAO,MAAM,KAAK;AAAA,EACrD;AAAA,EACA,iBAAiB,OAAO;AACpB,UAAM,MAAM,KAAK,gBAAgB,KAAK;AACtC,sBAAkB,KAAK;AAAA,MACnB,MAAM,aAAa;AAAA,MACnB,UAAU,cAAc;AAAA,MACxB,UAAU,IAAI;AAAA,IAClB,CAAC;AACD,WAAO;AAAA,EACX;AAAA,EACA,IAAI,OAAO,SAAS;AAChB,WAAO,KAAK,SAAS,OAAO,OAAO,MAAM,UAAU,SAAS,OAAO,CAAC;AAAA,EACxE;AAAA,EACA,GAAG,OAAO,SAAS;AACf,WAAO,KAAK,SAAS,OAAO,OAAO,OAAO,UAAU,SAAS,OAAO,CAAC;AAAA,EACzE;AAAA,EACA,IAAI,OAAO,SAAS;AAChB,WAAO,KAAK,SAAS,OAAO,OAAO,MAAM,UAAU,SAAS,OAAO,CAAC;AAAA,EACxE;AAAA,EACA,GAAG,OAAO,SAAS;AACf,WAAO,KAAK,SAAS,OAAO,OAAO,OAAO,UAAU,SAAS,OAAO,CAAC;AAAA,EACzE;AAAA,EACA,SAAS,MAAM,OAAO,WAAW,SAAS;AACtC,WAAO,IAAI,WAAU;AAAA,MACjB,GAAG,KAAK;AAAA,MACR,QAAQ;AAAA,QACJ,GAAG,KAAK,KAAK;AAAA,QACb;AAAA,UACI;AAAA,UACA;AAAA,UACA;AAAA,UACA,SAAS,UAAU,SAAS,OAAO;AAAA,QACvC;AAAA,MACJ;AAAA,IACJ,CAAC;AAAA,EACL;AAAA,EACA,UAAU,OAAO;AACb,WAAO,IAAI,WAAU;AAAA,MACjB,GAAG,KAAK;AAAA,MACR,QAAQ,CAAC,GAAG,KAAK,KAAK,QAAQ,KAAK;AAAA,IACvC,CAAC;AAAA,EACL;AAAA,EACA,SAAS,SAAS;AACd,WAAO,KAAK,UAAU;AAAA,MAClB,MAAM;AAAA,MACN,OAAO,OAAO,CAAC;AAAA,MACf,WAAW;AAAA,MACX,SAAS,UAAU,SAAS,OAAO;AAAA,IACvC,CAAC;AAAA,EACL;AAAA,EACA,SAAS,SAAS;AACd,WAAO,KAAK,UAAU;AAAA,MAClB,MAAM;AAAA,MACN,OAAO,OAAO,CAAC;AAAA,MACf,WAAW;AAAA,MACX,SAAS,UAAU,SAAS,OAAO;AAAA,IACvC,CAAC;AAAA,EACL;AAAA,EACA,YAAY,SAAS;AACjB,WAAO,KAAK,UAAU;AAAA,MAClB,MAAM;AAAA,MACN,OAAO,OAAO,CAAC;AAAA,MACf,WAAW;AAAA,MACX,SAAS,UAAU,SAAS,OAAO;AAAA,IACvC,CAAC;AAAA,EACL;AAAA,EACA,YAAY,SAAS;AACjB,WAAO,KAAK,UAAU;AAAA,MAClB,MAAM;AAAA,MACN,OAAO,OAAO,CAAC;AAAA,MACf,WAAW;AAAA,MACX,SAAS,UAAU,SAAS,OAAO;AAAA,IACvC,CAAC;AAAA,EACL;AAAA,EACA,WAAW,OAAO,SAAS;AACvB,WAAO,KAAK,UAAU;AAAA,MAClB,MAAM;AAAA,MACN;AAAA,MACA,SAAS,UAAU,SAAS,OAAO;AAAA,IACvC,CAAC;AAAA,EACL;AAAA,EACA,IAAI,WAAW;AACX,QAAI,MAAM;AACV,eAAW,MAAM,KAAK,KAAK,QAAQ;AAC/B,UAAI,GAAG,SAAS,OAAO;AACnB,YAAI,QAAQ,QAAQ,GAAG,QAAQ;AAC3B,gBAAM,GAAG;AAAA,MACjB;AAAA,IACJ;AACA,WAAO;AAAA,EACX;AAAA,EACA,IAAI,WAAW;AACX,QAAI,MAAM;AACV,eAAW,MAAM,KAAK,KAAK,QAAQ;AAC/B,UAAI,GAAG,SAAS,OAAO;AACnB,YAAI,QAAQ,QAAQ,GAAG,QAAQ;AAC3B,gBAAM,GAAG;AAAA,MACjB;AAAA,IACJ;AACA,WAAO;AAAA,EACX;AACJ;AACA,UAAU,SAAS,CAAC,WAAW;AAC3B,SAAO,IAAI,UAAU;AAAA,IACjB,QAAQ,CAAC;AAAA,IACT,UAAU,sBAAsB;AAAA,IAChC,QAAQ,QAAQ,UAAU;AAAA,IAC1B,GAAG,oBAAoB,MAAM;AAAA,EACjC,CAAC;AACL;AACO,IAAM,aAAN,cAAyB,QAAQ;AAAA,EACpC,OAAO,OAAO;AACV,QAAI,KAAK,KAAK,QAAQ;AAClB,YAAM,OAAO,QAAQ,MAAM,IAAI;AAAA,IACnC;AACA,UAAM,aAAa,KAAK,SAAS,KAAK;AACtC,QAAI,eAAe,cAAc,SAAS;AACtC,YAAM,MAAM,KAAK,gBAAgB,KAAK;AACtC,wBAAkB,KAAK;AAAA,QACnB,MAAM,aAAa;AAAA,QACnB,UAAU,cAAc;AAAA,QACxB,UAAU,IAAI;AAAA,MAClB,CAAC;AACD,aAAO;AAAA,IACX;AACA,WAAO,GAAG,MAAM,IAAI;AAAA,EACxB;AACJ;AACA,WAAW,SAAS,CAAC,WAAW;AAC5B,SAAO,IAAI,WAAW;AAAA,IAClB,UAAU,sBAAsB;AAAA,IAChC,QAAQ,QAAQ,UAAU;AAAA,IAC1B,GAAG,oBAAoB,MAAM;AAAA,EACjC,CAAC;AACL;AACO,IAAM,UAAN,MAAM,iBAAgB,QAAQ;AAAA,EACjC,OAAO,OAAO;AACV,QAAI,KAAK,KAAK,QAAQ;AAClB,YAAM,OAAO,IAAI,KAAK,MAAM,IAAI;AAAA,IACpC;AACA,UAAM,aAAa,KAAK,SAAS,KAAK;AACtC,QAAI,eAAe,cAAc,MAAM;AACnC,YAAMD,OAAM,KAAK,gBAAgB,KAAK;AACtC,wBAAkBA,MAAK;AAAA,QACnB,MAAM,aAAa;AAAA,QACnB,UAAU,cAAc;AAAA,QACxB,UAAUA,KAAI;AAAA,MAClB,CAAC;AACD,aAAO;AAAA,IACX;AACA,QAAI,OAAO,MAAM,MAAM,KAAK,QAAQ,CAAC,GAAG;AACpC,YAAMA,OAAM,KAAK,gBAAgB,KAAK;AACtC,wBAAkBA,MAAK;AAAA,QACnB,MAAM,aAAa;AAAA,MACvB,CAAC;AACD,aAAO;AAAA,IACX;AACA,UAAMC,UAAS,IAAI,YAAY;AAC/B,QAAI,MAAM;AACV,eAAW,SAAS,KAAK,KAAK,QAAQ;AAClC,UAAI,MAAM,SAAS,OAAO;AACtB,YAAI,MAAM,KAAK,QAAQ,IAAI,MAAM,OAAO;AACpC,gBAAM,KAAK,gBAAgB,OAAO,GAAG;AACrC,4BAAkB,KAAK;AAAA,YACnB,MAAM,aAAa;AAAA,YACnB,SAAS,MAAM;AAAA,YACf,WAAW;AAAA,YACX,OAAO;AAAA,YACP,SAAS,MAAM;AAAA,YACf,MAAM;AAAA,UACV,CAAC;AACD,UAAAA,QAAO,MAAM;AAAA,QACjB;AAAA,MACJ,WACS,MAAM,SAAS,OAAO;AAC3B,YAAI,MAAM,KAAK,QAAQ,IAAI,MAAM,OAAO;AACpC,gBAAM,KAAK,gBAAgB,OAAO,GAAG;AACrC,4BAAkB,KAAK;AAAA,YACnB,MAAM,aAAa;AAAA,YACnB,SAAS,MAAM;AAAA,YACf,WAAW;AAAA,YACX,OAAO;AAAA,YACP,SAAS,MAAM;AAAA,YACf,MAAM;AAAA,UACV,CAAC;AACD,UAAAA,QAAO,MAAM;AAAA,QACjB;AAAA,MACJ,OACK;AACD,aAAK,YAAY,KAAK;AAAA,MAC1B;AAAA,IACJ;AACA,WAAO;AAAA,MACH,QAAQA,QAAO;AAAA,MACf,OAAO,IAAI,KAAK,MAAM,KAAK,QAAQ,CAAC;AAAA,IACxC;AAAA,EACJ;AAAA,EACA,UAAU,OAAO;AACb,WAAO,IAAI,SAAQ;AAAA,MACf,GAAG,KAAK;AAAA,MACR,QAAQ,CAAC,GAAG,KAAK,KAAK,QAAQ,KAAK;AAAA,IACvC,CAAC;AAAA,EACL;AAAA,EACA,IAAI,SAAS,SAAS;AAClB,WAAO,KAAK,UAAU;AAAA,MAClB,MAAM;AAAA,MACN,OAAO,QAAQ,QAAQ;AAAA,MACvB,SAAS,UAAU,SAAS,OAAO;AAAA,IACvC,CAAC;AAAA,EACL;AAAA,EACA,IAAI,SAAS,SAAS;AAClB,WAAO,KAAK,UAAU;AAAA,MAClB,MAAM;AAAA,MACN,OAAO,QAAQ,QAAQ;AAAA,MACvB,SAAS,UAAU,SAAS,OAAO;AAAA,IACvC,CAAC;AAAA,EACL;AAAA,EACA,IAAI,UAAU;AACV,QAAI,MAAM;AACV,eAAW,MAAM,KAAK,KAAK,QAAQ;AAC/B,UAAI,GAAG,SAAS,OAAO;AACnB,YAAI,QAAQ,QAAQ,GAAG,QAAQ;AAC3B,gBAAM,GAAG;AAAA,MACjB;AAAA,IACJ;AACA,WAAO,OAAO,OAAO,IAAI,KAAK,GAAG,IAAI;AAAA,EACzC;AAAA,EACA,IAAI,UAAU;AACV,QAAI,MAAM;AACV,eAAW,MAAM,KAAK,KAAK,QAAQ;AAC/B,UAAI,GAAG,SAAS,OAAO;AACnB,YAAI,QAAQ,QAAQ,GAAG,QAAQ;AAC3B,gBAAM,GAAG;AAAA,MACjB;AAAA,IACJ;AACA,WAAO,OAAO,OAAO,IAAI,KAAK,GAAG,IAAI;AAAA,EACzC;AACJ;AACA,QAAQ,SAAS,CAAC,WAAW;AACzB,SAAO,IAAI,QAAQ;AAAA,IACf,QAAQ,CAAC;AAAA,IACT,QAAQ,QAAQ,UAAU;AAAA,IAC1B,UAAU,sBAAsB;AAAA,IAChC,GAAG,oBAAoB,MAAM;AAAA,EACjC,CAAC;AACL;AACO,IAAM,YAAN,cAAwB,QAAQ;AAAA,EACnC,OAAO,OAAO;AACV,UAAM,aAAa,KAAK,SAAS,KAAK;AACtC,QAAI,eAAe,cAAc,QAAQ;AACrC,YAAM,MAAM,KAAK,gBAAgB,KAAK;AACtC,wBAAkB,KAAK;AAAA,QACnB,MAAM,aAAa;AAAA,QACnB,UAAU,cAAc;AAAA,QACxB,UAAU,IAAI;AAAA,MAClB,CAAC;AACD,aAAO;AAAA,IACX;AACA,WAAO,GAAG,MAAM,IAAI;AAAA,EACxB;AACJ;AACA,UAAU,SAAS,CAAC,WAAW;AAC3B,SAAO,IAAI,UAAU;AAAA,IACjB,UAAU,sBAAsB;AAAA,IAChC,GAAG,oBAAoB,MAAM;AAAA,EACjC,CAAC;AACL;AACO,IAAM,eAAN,cAA2B,QAAQ;AAAA,EACtC,OAAO,OAAO;AACV,UAAM,aAAa,KAAK,SAAS,KAAK;AACtC,QAAI,eAAe,cAAc,WAAW;AACxC,YAAM,MAAM,KAAK,gBAAgB,KAAK;AACtC,wBAAkB,KAAK;AAAA,QACnB,MAAM,aAAa;AAAA,QACnB,UAAU,cAAc;AAAA,QACxB,UAAU,IAAI;AAAA,MAClB,CAAC;AACD,aAAO;AAAA,IACX;AACA,WAAO,GAAG,MAAM,IAAI;AAAA,EACxB;AACJ;AACA,aAAa,SAAS,CAAC,WAAW;AAC9B,SAAO,IAAI,aAAa;AAAA,IACpB,UAAU,sBAAsB;AAAA,IAChC,GAAG,oBAAoB,MAAM;AAAA,EACjC,CAAC;AACL;AACO,IAAM,UAAN,cAAsB,QAAQ;AAAA,EACjC,OAAO,OAAO;AACV,UAAM,aAAa,KAAK,SAAS,KAAK;AACtC,QAAI,eAAe,cAAc,MAAM;AACnC,YAAM,MAAM,KAAK,gBAAgB,KAAK;AACtC,wBAAkB,KAAK;AAAA,QACnB,MAAM,aAAa;AAAA,QACnB,UAAU,cAAc;AAAA,QACxB,UAAU,IAAI;AAAA,MAClB,CAAC;AACD,aAAO;AAAA,IACX;AACA,WAAO,GAAG,MAAM,IAAI;AAAA,EACxB;AACJ;AACA,QAAQ,SAAS,CAAC,WAAW;AACzB,SAAO,IAAI,QAAQ;AAAA,IACf,UAAU,sBAAsB;AAAA,IAChC,GAAG,oBAAoB,MAAM;AAAA,EACjC,CAAC;AACL;AACO,IAAM,SAAN,cAAqB,QAAQ;AAAA,EAChC,cAAc;AACV,UAAM,GAAG,SAAS;AAElB,SAAK,OAAO;AAAA,EAChB;AAAA,EACA,OAAO,OAAO;AACV,WAAO,GAAG,MAAM,IAAI;AAAA,EACxB;AACJ;AACA,OAAO,SAAS,CAAC,WAAW;AACxB,SAAO,IAAI,OAAO;AAAA,IACd,UAAU,sBAAsB;AAAA,IAChC,GAAG,oBAAoB,MAAM;AAAA,EACjC,CAAC;AACL;AACO,IAAM,aAAN,cAAyB,QAAQ;AAAA,EACpC,cAAc;AACV,UAAM,GAAG,SAAS;AAElB,SAAK,WAAW;AAAA,EACpB;AAAA,EACA,OAAO,OAAO;AACV,WAAO,GAAG,MAAM,IAAI;AAAA,EACxB;AACJ;AACA,WAAW,SAAS,CAAC,WAAW;AAC5B,SAAO,IAAI,WAAW;AAAA,IAClB,UAAU,sBAAsB;AAAA,IAChC,GAAG,oBAAoB,MAAM;AAAA,EACjC,CAAC;AACL;AACO,IAAM,WAAN,cAAuB,QAAQ;AAAA,EAClC,OAAO,OAAO;AACV,UAAM,MAAM,KAAK,gBAAgB,KAAK;AACtC,sBAAkB,KAAK;AAAA,MACnB,MAAM,aAAa;AAAA,MACnB,UAAU,cAAc;AAAA,MACxB,UAAU,IAAI;AAAA,IAClB,CAAC;AACD,WAAO;AAAA,EACX;AACJ;AACA,SAAS,SAAS,CAAC,WAAW;AAC1B,SAAO,IAAI,SAAS;AAAA,IAChB,UAAU,sBAAsB;AAAA,IAChC,GAAG,oBAAoB,MAAM;AAAA,EACjC,CAAC;AACL;AACO,IAAM,UAAN,cAAsB,QAAQ;AAAA,EACjC,OAAO,OAAO;AACV,UAAM,aAAa,KAAK,SAAS,KAAK;AACtC,QAAI,eAAe,cAAc,WAAW;AACxC,YAAM,MAAM,KAAK,gBAAgB,KAAK;AACtC,wBAAkB,KAAK;AAAA,QACnB,MAAM,aAAa;AAAA,QACnB,UAAU,cAAc;AAAA,QACxB,UAAU,IAAI;AAAA,MAClB,CAAC;AACD,aAAO;AAAA,IACX;AACA,WAAO,GAAG,MAAM,IAAI;AAAA,EACxB;AACJ;AACA,QAAQ,SAAS,CAAC,WAAW;AACzB,SAAO,IAAI,QAAQ;AAAA,IACf,UAAU,sBAAsB;AAAA,IAChC,GAAG,oBAAoB,MAAM;AAAA,EACjC,CAAC;AACL;AACO,IAAM,WAAN,MAAM,kBAAiB,QAAQ;AAAA,EAClC,OAAO,OAAO;AACV,UAAM,EAAE,KAAK,QAAAA,QAAO,IAAI,KAAK,oBAAoB,KAAK;AACtD,UAAM,MAAM,KAAK;AACjB,QAAI,IAAI,eAAe,cAAc,OAAO;AACxC,wBAAkB,KAAK;AAAA,QACnB,MAAM,aAAa;AAAA,QACnB,UAAU,cAAc;AAAA,QACxB,UAAU,IAAI;AAAA,MAClB,CAAC;AACD,aAAO;AAAA,IACX;AACA,QAAI,IAAI,gBAAgB,MAAM;AAC1B,YAAM,SAAS,IAAI,KAAK,SAAS,IAAI,YAAY;AACjD,YAAM,WAAW,IAAI,KAAK,SAAS,IAAI,YAAY;AACnD,UAAI,UAAU,UAAU;AACpB,0BAAkB,KAAK;AAAA,UACnB,MAAM,SAAS,aAAa,UAAU,aAAa;AAAA,UACnD,SAAU,WAAW,IAAI,YAAY,QAAQ;AAAA,UAC7C,SAAU,SAAS,IAAI,YAAY,QAAQ;AAAA,UAC3C,MAAM;AAAA,UACN,WAAW;AAAA,UACX,OAAO;AAAA,UACP,SAAS,IAAI,YAAY;AAAA,QAC7B,CAAC;AACD,QAAAA,QAAO,MAAM;AAAA,MACjB;AAAA,IACJ;AACA,QAAI,IAAI,cAAc,MAAM;AACxB,UAAI,IAAI,KAAK,SAAS,IAAI,UAAU,OAAO;AACvC,0BAAkB,KAAK;AAAA,UACnB,MAAM,aAAa;AAAA,UACnB,SAAS,IAAI,UAAU;AAAA,UACvB,MAAM;AAAA,UACN,WAAW;AAAA,UACX,OAAO;AAAA,UACP,SAAS,IAAI,UAAU;AAAA,QAC3B,CAAC;AACD,QAAAA,QAAO,MAAM;AAAA,MACjB;AAAA,IACJ;AACA,QAAI,IAAI,cAAc,MAAM;AACxB,UAAI,IAAI,KAAK,SAAS,IAAI,UAAU,OAAO;AACvC,0BAAkB,KAAK;AAAA,UACnB,MAAM,aAAa;AAAA,UACnB,SAAS,IAAI,UAAU;AAAA,UACvB,MAAM;AAAA,UACN,WAAW;AAAA,UACX,OAAO;AAAA,UACP,SAAS,IAAI,UAAU;AAAA,QAC3B,CAAC;AACD,QAAAA,QAAO,MAAM;AAAA,MACjB;AAAA,IACJ;AACA,QAAI,IAAI,OAAO,OAAO;AAClB,aAAO,QAAQ,IAAI,CAAC,GAAG,IAAI,IAAI,EAAE,IAAI,CAAC,MAAM,MAAM;AAC9C,eAAO,IAAI,KAAK,YAAY,IAAI,mBAAmB,KAAK,MAAM,IAAI,MAAM,CAAC,CAAC;AAAA,MAC9E,CAAC,CAAC,EAAE,KAAK,CAACC,YAAW;AACjB,eAAO,YAAY,WAAWD,SAAQC,OAAM;AAAA,MAChD,CAAC;AAAA,IACL;AACA,UAAM,SAAS,CAAC,GAAG,IAAI,IAAI,EAAE,IAAI,CAAC,MAAM,MAAM;AAC1C,aAAO,IAAI,KAAK,WAAW,IAAI,mBAAmB,KAAK,MAAM,IAAI,MAAM,CAAC,CAAC;AAAA,IAC7E,CAAC;AACD,WAAO,YAAY,WAAWD,SAAQ,MAAM;AAAA,EAChD;AAAA,EACA,IAAI,UAAU;AACV,WAAO,KAAK,KAAK;AAAA,EACrB;AAAA,EACA,IAAI,WAAW,SAAS;AACpB,WAAO,IAAI,UAAS;AAAA,MAChB,GAAG,KAAK;AAAA,MACR,WAAW,EAAE,OAAO,WAAW,SAAS,UAAU,SAAS,OAAO,EAAE;AAAA,IACxE,CAAC;AAAA,EACL;AAAA,EACA,IAAI,WAAW,SAAS;AACpB,WAAO,IAAI,UAAS;AAAA,MAChB,GAAG,KAAK;AAAA,MACR,WAAW,EAAE,OAAO,WAAW,SAAS,UAAU,SAAS,OAAO,EAAE;AAAA,IACxE,CAAC;AAAA,EACL;AAAA,EACA,OAAO,KAAK,SAAS;AACjB,WAAO,IAAI,UAAS;AAAA,MAChB,GAAG,KAAK;AAAA,MACR,aAAa,EAAE,OAAO,KAAK,SAAS,UAAU,SAAS,OAAO,EAAE;AAAA,IACpE,CAAC;AAAA,EACL;AAAA,EACA,SAAS,SAAS;AACd,WAAO,KAAK,IAAI,GAAG,OAAO;AAAA,EAC9B;AACJ;AACA,SAAS,SAAS,CAAC,QAAQ,WAAW;AAClC,SAAO,IAAI,SAAS;AAAA,IAChB,MAAM;AAAA,IACN,WAAW;AAAA,IACX,WAAW;AAAA,IACX,aAAa;AAAA,IACb,UAAU,sBAAsB;AAAA,IAChC,GAAG,oBAAoB,MAAM;AAAA,EACjC,CAAC;AACL;AACA,SAAS,eAAe,QAAQ;AAC5B,MAAI,kBAAkB,WAAW;AAC7B,UAAM,WAAW,CAAC;AAClB,eAAW,OAAO,OAAO,OAAO;AAC5B,YAAM,cAAc,OAAO,MAAM,GAAG;AACpC,eAAS,GAAG,IAAI,YAAY,OAAO,eAAe,WAAW,CAAC;AAAA,IAClE;AACA,WAAO,IAAI,UAAU;AAAA,MACjB,GAAG,OAAO;AAAA,MACV,OAAO,MAAM;AAAA,IACjB,CAAC;AAAA,EACL,WACS,kBAAkB,UAAU;AACjC,WAAO,IAAI,SAAS;AAAA,MAChB,GAAG,OAAO;AAAA,MACV,MAAM,eAAe,OAAO,OAAO;AAAA,IACvC,CAAC;AAAA,EACL,WACS,kBAAkB,aAAa;AACpC,WAAO,YAAY,OAAO,eAAe,OAAO,OAAO,CAAC,CAAC;AAAA,EAC7D,WACS,kBAAkB,aAAa;AACpC,WAAO,YAAY,OAAO,eAAe,OAAO,OAAO,CAAC,CAAC;AAAA,EAC7D,WACS,kBAAkB,UAAU;AACjC,WAAO,SAAS,OAAO,OAAO,MAAM,IAAI,CAAC,SAAS,eAAe,IAAI,CAAC,CAAC;AAAA,EAC3E,OACK;AACD,WAAO;AAAA,EACX;AACJ;AACO,IAAM,YAAN,MAAM,mBAAkB,QAAQ;AAAA,EACnC,cAAc;AACV,UAAM,GAAG,SAAS;AAClB,SAAK,UAAU;AAKf,SAAK,YAAY,KAAK;AAqCtB,SAAK,UAAU,KAAK;AAAA,EACxB;AAAA,EACA,aAAa;AACT,QAAI,KAAK,YAAY;AACjB,aAAO,KAAK;AAChB,UAAM,QAAQ,KAAK,KAAK,MAAM;AAC9B,UAAM,OAAO,KAAK,WAAW,KAAK;AAClC,SAAK,UAAU,EAAE,OAAO,KAAK;AAC7B,WAAO,KAAK;AAAA,EAChB;AAAA,EACA,OAAO,OAAO;AACV,UAAM,aAAa,KAAK,SAAS,KAAK;AACtC,QAAI,eAAe,cAAc,QAAQ;AACrC,YAAMD,OAAM,KAAK,gBAAgB,KAAK;AACtC,wBAAkBA,MAAK;AAAA,QACnB,MAAM,aAAa;AAAA,QACnB,UAAU,cAAc;AAAA,QACxB,UAAUA,KAAI;AAAA,MAClB,CAAC;AACD,aAAO;AAAA,IACX;AACA,UAAM,EAAE,QAAAC,SAAQ,IAAI,IAAI,KAAK,oBAAoB,KAAK;AACtD,UAAM,EAAE,OAAO,MAAM,UAAU,IAAI,KAAK,WAAW;AACnD,UAAM,YAAY,CAAC;AACnB,QAAI,EAAE,KAAK,KAAK,oBAAoB,YAAY,KAAK,KAAK,gBAAgB,UAAU;AAChF,iBAAW,OAAO,IAAI,MAAM;AACxB,YAAI,CAAC,UAAU,SAAS,GAAG,GAAG;AAC1B,oBAAU,KAAK,GAAG;AAAA,QACtB;AAAA,MACJ;AAAA,IACJ;AACA,UAAM,QAAQ,CAAC;AACf,eAAW,OAAO,WAAW;AACzB,YAAM,eAAe,MAAM,GAAG;AAC9B,YAAM,QAAQ,IAAI,KAAK,GAAG;AAC1B,YAAM,KAAK;AAAA,QACP,KAAK,EAAE,QAAQ,SAAS,OAAO,IAAI;AAAA,QACnC,OAAO,aAAa,OAAO,IAAI,mBAAmB,KAAK,OAAO,IAAI,MAAM,GAAG,CAAC;AAAA,QAC5E,WAAW,OAAO,IAAI;AAAA,MAC1B,CAAC;AAAA,IACL;AACA,QAAI,KAAK,KAAK,oBAAoB,UAAU;AACxC,YAAM,cAAc,KAAK,KAAK;AAC9B,UAAI,gBAAgB,eAAe;AAC/B,mBAAW,OAAO,WAAW;AACzB,gBAAM,KAAK;AAAA,YACP,KAAK,EAAE,QAAQ,SAAS,OAAO,IAAI;AAAA,YACnC,OAAO,EAAE,QAAQ,SAAS,OAAO,IAAI,KAAK,GAAG,EAAE;AAAA,UACnD,CAAC;AAAA,QACL;AAAA,MACJ,WACS,gBAAgB,UAAU;AAC/B,YAAI,UAAU,SAAS,GAAG;AACtB,4BAAkB,KAAK;AAAA,YACnB,MAAM,aAAa;AAAA,YACnB,MAAM;AAAA,UACV,CAAC;AACD,UAAAA,QAAO,MAAM;AAAA,QACjB;AAAA,MACJ,WACS,gBAAgB,SAAS;AAAA,MAClC,OACK;AACD,cAAM,IAAI,MAAM,sDAAsD;AAAA,MAC1E;AAAA,IACJ,OACK;AAED,YAAM,WAAW,KAAK,KAAK;AAC3B,iBAAW,OAAO,WAAW;AACzB,cAAM,QAAQ,IAAI,KAAK,GAAG;AAC1B,cAAM,KAAK;AAAA,UACP,KAAK,EAAE,QAAQ,SAAS,OAAO,IAAI;AAAA,UACnC,OAAO,SAAS;AAAA,YAAO,IAAI,mBAAmB,KAAK,OAAO,IAAI,MAAM,GAAG;AAAA;AAAA,UACvE;AAAA,UACA,WAAW,OAAO,IAAI;AAAA,QAC1B,CAAC;AAAA,MACL;AAAA,IACJ;AACA,QAAI,IAAI,OAAO,OAAO;AAClB,aAAO,QAAQ,QAAQ,EAClB,KAAK,YAAY;AAClB,cAAM,YAAY,CAAC;AACnB,mBAAW,QAAQ,OAAO;AACtB,gBAAM,MAAM,MAAM,KAAK;AACvB,gBAAM,QAAQ,MAAM,KAAK;AACzB,oBAAU,KAAK;AAAA,YACX;AAAA,YACA;AAAA,YACA,WAAW,KAAK;AAAA,UACpB,CAAC;AAAA,QACL;AACA,eAAO;AAAA,MACX,CAAC,EACI,KAAK,CAAC,cAAc;AACrB,eAAO,YAAY,gBAAgBA,SAAQ,SAAS;AAAA,MACxD,CAAC;AAAA,IACL,OACK;AACD,aAAO,YAAY,gBAAgBA,SAAQ,KAAK;AAAA,IACpD;AAAA,EACJ;AAAA,EACA,IAAI,QAAQ;AACR,WAAO,KAAK,KAAK,MAAM;AAAA,EAC3B;AAAA,EACA,OAAO,SAAS;AACZ,cAAU;AACV,WAAO,IAAI,WAAU;AAAA,MACjB,GAAG,KAAK;AAAA,MACR,aAAa;AAAA,MACb,GAAI,YAAY,SACV;AAAA,QACE,UAAU,CAAC,OAAO,QAAQ;AACtB,gBAAM,eAAe,KAAK,KAAK,WAAW,OAAO,GAAG,EAAE,WAAW,IAAI;AACrE,cAAI,MAAM,SAAS;AACf,mBAAO;AAAA,cACH,SAAS,UAAU,SAAS,OAAO,EAAE,WAAW;AAAA,YACpD;AACJ,iBAAO;AAAA,YACH,SAAS;AAAA,UACb;AAAA,QACJ;AAAA,MACJ,IACE,CAAC;AAAA,IACX,CAAC;AAAA,EACL;AAAA,EACA,QAAQ;AACJ,WAAO,IAAI,WAAU;AAAA,MACjB,GAAG,KAAK;AAAA,MACR,aAAa;AAAA,IACjB,CAAC;AAAA,EACL;AAAA,EACA,cAAc;AACV,WAAO,IAAI,WAAU;AAAA,MACjB,GAAG,KAAK;AAAA,MACR,aAAa;AAAA,IACjB,CAAC;AAAA,EACL;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAkBA,OAAO,cAAc;AACjB,WAAO,IAAI,WAAU;AAAA,MACjB,GAAG,KAAK;AAAA,MACR,OAAO,OAAO;AAAA,QACV,GAAG,KAAK,KAAK,MAAM;AAAA,QACnB,GAAG;AAAA,MACP;AAAA,IACJ,CAAC;AAAA,EACL;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAMA,MAAM,SAAS;AACX,UAAM,SAAS,IAAI,WAAU;AAAA,MACzB,aAAa,QAAQ,KAAK;AAAA,MAC1B,UAAU,QAAQ,KAAK;AAAA,MACvB,OAAO,OAAO;AAAA,QACV,GAAG,KAAK,KAAK,MAAM;AAAA,QACnB,GAAG,QAAQ,KAAK,MAAM;AAAA,MAC1B;AAAA,MACA,UAAU,sBAAsB;AAAA,IACpC,CAAC;AACD,WAAO;AAAA,EACX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAoCA,OAAO,KAAK,QAAQ;AAChB,WAAO,KAAK,QAAQ,EAAE,CAAC,GAAG,GAAG,OAAO,CAAC;AAAA,EACzC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAsBA,SAAS,OAAO;AACZ,WAAO,IAAI,WAAU;AAAA,MACjB,GAAG,KAAK;AAAA,MACR,UAAU;AAAA,IACd,CAAC;AAAA,EACL;AAAA,EACA,KAAK,MAAM;AACP,UAAM,QAAQ,CAAC;AACf,eAAW,OAAO,KAAK,WAAW,IAAI,GAAG;AACrC,UAAI,KAAK,GAAG,KAAK,KAAK,MAAM,GAAG,GAAG;AAC9B,cAAM,GAAG,IAAI,KAAK,MAAM,GAAG;AAAA,MAC/B;AAAA,IACJ;AACA,WAAO,IAAI,WAAU;AAAA,MACjB,GAAG,KAAK;AAAA,MACR,OAAO,MAAM;AAAA,IACjB,CAAC;AAAA,EACL;AAAA,EACA,KAAK,MAAM;AACP,UAAM,QAAQ,CAAC;AACf,eAAW,OAAO,KAAK,WAAW,KAAK,KAAK,GAAG;AAC3C,UAAI,CAAC,KAAK,GAAG,GAAG;AACZ,cAAM,GAAG,IAAI,KAAK,MAAM,GAAG;AAAA,MAC/B;AAAA,IACJ;AACA,WAAO,IAAI,WAAU;AAAA,MACjB,GAAG,KAAK;AAAA,MACR,OAAO,MAAM;AAAA,IACjB,CAAC;AAAA,EACL;AAAA;AAAA;AAAA;AAAA,EAIA,cAAc;AACV,WAAO,eAAe,IAAI;AAAA,EAC9B;AAAA,EACA,QAAQ,MAAM;AACV,UAAM,WAAW,CAAC;AAClB,eAAW,OAAO,KAAK,WAAW,KAAK,KAAK,GAAG;AAC3C,YAAM,cAAc,KAAK,MAAM,GAAG;AAClC,UAAI,QAAQ,CAAC,KAAK,GAAG,GAAG;AACpB,iBAAS,GAAG,IAAI;AAAA,MACpB,OACK;AACD,iBAAS,GAAG,IAAI,YAAY,SAAS;AAAA,MACzC;AAAA,IACJ;AACA,WAAO,IAAI,WAAU;AAAA,MACjB,GAAG,KAAK;AAAA,MACR,OAAO,MAAM;AAAA,IACjB,CAAC;AAAA,EACL;AAAA,EACA,SAAS,MAAM;AACX,UAAM,WAAW,CAAC;AAClB,eAAW,OAAO,KAAK,WAAW,KAAK,KAAK,GAAG;AAC3C,UAAI,QAAQ,CAAC,KAAK,GAAG,GAAG;AACpB,iBAAS,GAAG,IAAI,KAAK,MAAM,GAAG;AAAA,MAClC,OACK;AACD,cAAM,cAAc,KAAK,MAAM,GAAG;AAClC,YAAI,WAAW;AACf,eAAO,oBAAoB,aAAa;AACpC,qBAAW,SAAS,KAAK;AAAA,QAC7B;AACA,iBAAS,GAAG,IAAI;AAAA,MACpB;AAAA,IACJ;AACA,WAAO,IAAI,WAAU;AAAA,MACjB,GAAG,KAAK;AAAA,MACR,OAAO,MAAM;AAAA,IACjB,CAAC;AAAA,EACL;AAAA,EACA,QAAQ;AACJ,WAAO,cAAc,KAAK,WAAW,KAAK,KAAK,CAAC;AAAA,EACpD;AACJ;AACA,UAAU,SAAS,CAAC,OAAO,WAAW;AAClC,SAAO,IAAI,UAAU;AAAA,IACjB,OAAO,MAAM;AAAA,IACb,aAAa;AAAA,IACb,UAAU,SAAS,OAAO;AAAA,IAC1B,UAAU,sBAAsB;AAAA,IAChC,GAAG,oBAAoB,MAAM;AAAA,EACjC,CAAC;AACL;AACA,UAAU,eAAe,CAAC,OAAO,WAAW;AACxC,SAAO,IAAI,UAAU;AAAA,IACjB,OAAO,MAAM;AAAA,IACb,aAAa;AAAA,IACb,UAAU,SAAS,OAAO;AAAA,IAC1B,UAAU,sBAAsB;AAAA,IAChC,GAAG,oBAAoB,MAAM;AAAA,EACjC,CAAC;AACL;AACA,UAAU,aAAa,CAAC,OAAO,WAAW;AACtC,SAAO,IAAI,UAAU;AAAA,IACjB;AAAA,IACA,aAAa;AAAA,IACb,UAAU,SAAS,OAAO;AAAA,IAC1B,UAAU,sBAAsB;AAAA,IAChC,GAAG,oBAAoB,MAAM;AAAA,EACjC,CAAC;AACL;AACO,IAAM,WAAN,cAAuB,QAAQ;AAAA,EAClC,OAAO,OAAO;AACV,UAAM,EAAE,IAAI,IAAI,KAAK,oBAAoB,KAAK;AAC9C,UAAM,UAAU,KAAK,KAAK;AAC1B,aAAS,cAAc,SAAS;AAE5B,iBAAW,UAAU,SAAS;AAC1B,YAAI,OAAO,OAAO,WAAW,SAAS;AAClC,iBAAO,OAAO;AAAA,QAClB;AAAA,MACJ;AACA,iBAAW,UAAU,SAAS;AAC1B,YAAI,OAAO,OAAO,WAAW,SAAS;AAElC,cAAI,OAAO,OAAO,KAAK,GAAG,OAAO,IAAI,OAAO,MAAM;AAClD,iBAAO,OAAO;AAAA,QAClB;AAAA,MACJ;AAEA,YAAM,cAAc,QAAQ,IAAI,CAAC,WAAW,IAAI,SAAS,OAAO,IAAI,OAAO,MAAM,CAAC;AAClF,wBAAkB,KAAK;AAAA,QACnB,MAAM,aAAa;AAAA,QACnB;AAAA,MACJ,CAAC;AACD,aAAO;AAAA,IACX;AACA,QAAI,IAAI,OAAO,OAAO;AAClB,aAAO,QAAQ,IAAI,QAAQ,IAAI,OAAO,WAAW;AAC7C,cAAM,WAAW;AAAA,UACb,GAAG;AAAA,UACH,QAAQ;AAAA,YACJ,GAAG,IAAI;AAAA,YACP,QAAQ,CAAC;AAAA,UACb;AAAA,UACA,QAAQ;AAAA,QACZ;AACA,eAAO;AAAA,UACH,QAAQ,MAAM,OAAO,YAAY;AAAA,YAC7B,MAAM,IAAI;AAAA,YACV,MAAM,IAAI;AAAA,YACV,QAAQ;AAAA,UACZ,CAAC;AAAA,UACD,KAAK;AAAA,QACT;AAAA,MACJ,CAAC,CAAC,EAAE,KAAK,aAAa;AAAA,IAC1B,OACK;AACD,UAAI,QAAQ;AACZ,YAAM,SAAS,CAAC;AAChB,iBAAW,UAAU,SAAS;AAC1B,cAAM,WAAW;AAAA,UACb,GAAG;AAAA,UACH,QAAQ;AAAA,YACJ,GAAG,IAAI;AAAA,YACP,QAAQ,CAAC;AAAA,UACb;AAAA,UACA,QAAQ;AAAA,QACZ;AACA,cAAM,SAAS,OAAO,WAAW;AAAA,UAC7B,MAAM,IAAI;AAAA,UACV,MAAM,IAAI;AAAA,UACV,QAAQ;AAAA,QACZ,CAAC;AACD,YAAI,OAAO,WAAW,SAAS;AAC3B,iBAAO;AAAA,QACX,WACS,OAAO,WAAW,WAAW,CAAC,OAAO;AAC1C,kBAAQ,EAAE,QAAQ,KAAK,SAAS;AAAA,QACpC;AACA,YAAI,SAAS,OAAO,OAAO,QAAQ;AAC/B,iBAAO,KAAK,SAAS,OAAO,MAAM;AAAA,QACtC;AAAA,MACJ;AACA,UAAI,OAAO;AACP,YAAI,OAAO,OAAO,KAAK,GAAG,MAAM,IAAI,OAAO,MAAM;AACjD,eAAO,MAAM;AAAA,MACjB;AACA,YAAM,cAAc,OAAO,IAAI,CAACE,YAAW,IAAI,SAASA,OAAM,CAAC;AAC/D,wBAAkB,KAAK;AAAA,QACnB,MAAM,aAAa;AAAA,QACnB;AAAA,MACJ,CAAC;AACD,aAAO;AAAA,IACX;AAAA,EACJ;AAAA,EACA,IAAI,UAAU;AACV,WAAO,KAAK,KAAK;AAAA,EACrB;AACJ;AACA,SAAS,SAAS,CAAC,OAAO,WAAW;AACjC,SAAO,IAAI,SAAS;AAAA,IAChB,SAAS;AAAA,IACT,UAAU,sBAAsB;AAAA,IAChC,GAAG,oBAAoB,MAAM;AAAA,EACjC,CAAC;AACL;AAQA,IAAM,mBAAmB,CAAC,SAAS;AAC/B,MAAI,gBAAgB,SAAS;AACzB,WAAO,iBAAiB,KAAK,MAAM;AAAA,EACvC,WACS,gBAAgB,YAAY;AACjC,WAAO,iBAAiB,KAAK,UAAU,CAAC;AAAA,EAC5C,WACS,gBAAgB,YAAY;AACjC,WAAO,CAAC,KAAK,KAAK;AAAA,EACtB,WACS,gBAAgB,SAAS;AAC9B,WAAO,KAAK;AAAA,EAChB,WACS,gBAAgB,eAAe;AAEpC,WAAO,KAAK,aAAa,KAAK,IAAI;AAAA,EACtC,WACS,gBAAgB,YAAY;AACjC,WAAO,iBAAiB,KAAK,KAAK,SAAS;AAAA,EAC/C,WACS,gBAAgB,cAAc;AACnC,WAAO,CAAC,MAAS;AAAA,EACrB,WACS,gBAAgB,SAAS;AAC9B,WAAO,CAAC,IAAI;AAAA,EAChB,WACS,gBAAgB,aAAa;AAClC,WAAO,CAAC,QAAW,GAAG,iBAAiB,KAAK,OAAO,CAAC,CAAC;AAAA,EACzD,WACS,gBAAgB,aAAa;AAClC,WAAO,CAAC,MAAM,GAAG,iBAAiB,KAAK,OAAO,CAAC,CAAC;AAAA,EACpD,WACS,gBAAgB,YAAY;AACjC,WAAO,iBAAiB,KAAK,OAAO,CAAC;AAAA,EACzC,WACS,gBAAgB,aAAa;AAClC,WAAO,iBAAiB,KAAK,OAAO,CAAC;AAAA,EACzC,WACS,gBAAgB,UAAU;AAC/B,WAAO,iBAAiB,KAAK,KAAK,SAAS;AAAA,EAC/C,OACK;AACD,WAAO,CAAC;AAAA,EACZ;AACJ;AACO,IAAM,wBAAN,MAAM,+BAA8B,QAAQ;AAAA,EAC/C,OAAO,OAAO;AACV,UAAM,EAAE,IAAI,IAAI,KAAK,oBAAoB,KAAK;AAC9C,QAAI,IAAI,eAAe,cAAc,QAAQ;AACzC,wBAAkB,KAAK;AAAA,QACnB,MAAM,aAAa;AAAA,QACnB,UAAU,cAAc;AAAA,QACxB,UAAU,IAAI;AAAA,MAClB,CAAC;AACD,aAAO;AAAA,IACX;AACA,UAAM,gBAAgB,KAAK;AAC3B,UAAM,qBAAqB,IAAI,KAAK,aAAa;AACjD,UAAM,SAAS,KAAK,WAAW,IAAI,kBAAkB;AACrD,QAAI,CAAC,QAAQ;AACT,wBAAkB,KAAK;AAAA,QACnB,MAAM,aAAa;AAAA,QACnB,SAAS,MAAM,KAAK,KAAK,WAAW,KAAK,CAAC;AAAA,QAC1C,MAAM,CAAC,aAAa;AAAA,MACxB,CAAC;AACD,aAAO;AAAA,IACX;AACA,QAAI,IAAI,OAAO,OAAO;AAClB,aAAO,OAAO,YAAY;AAAA,QACtB,MAAM,IAAI;AAAA,QACV,MAAM,IAAI;AAAA,QACV,QAAQ;AAAA,MACZ,CAAC;AAAA,IACL,OACK;AACD,aAAO,OAAO,WAAW;AAAA,QACrB,MAAM,IAAI;AAAA,QACV,MAAM,IAAI;AAAA,QACV,QAAQ;AAAA,MACZ,CAAC;AAAA,IACL;AAAA,EACJ;AAAA,EACA,IAAI,gBAAgB;AAChB,WAAO,KAAK,KAAK;AAAA,EACrB;AAAA,EACA,IAAI,UAAU;AACV,WAAO,KAAK,KAAK;AAAA,EACrB;AAAA,EACA,IAAI,aAAa;AACb,WAAO,KAAK,KAAK;AAAA,EACrB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EASA,OAAO,OAAO,eAAe,SAAS,QAAQ;AAE1C,UAAM,aAAa,oBAAI,IAAI;AAE3B,eAAW,QAAQ,SAAS;AACxB,YAAM,sBAAsB,iBAAiB,KAAK,MAAM,aAAa,CAAC;AACtE,UAAI,CAAC,oBAAoB,QAAQ;AAC7B,cAAM,IAAI,MAAM,mCAAmC,aAAa,mDAAmD;AAAA,MACvH;AACA,iBAAW,SAAS,qBAAqB;AACrC,YAAI,WAAW,IAAI,KAAK,GAAG;AACvB,gBAAM,IAAI,MAAM,0BAA0B,OAAO,aAAa,CAAC,wBAAwB,OAAO,KAAK,CAAC,EAAE;AAAA,QAC1G;AACA,mBAAW,IAAI,OAAO,IAAI;AAAA,MAC9B;AAAA,IACJ;AACA,WAAO,IAAI,uBAAsB;AAAA,MAC7B,UAAU,sBAAsB;AAAA,MAChC;AAAA,MACA;AAAA,MACA;AAAA,MACA,GAAG,oBAAoB,MAAM;AAAA,IACjC,CAAC;AAAA,EACL;AACJ;AACA,SAAS,YAAY,GAAG,GAAG;AACvB,QAAM,QAAQ,cAAc,CAAC;AAC7B,QAAM,QAAQ,cAAc,CAAC;AAC7B,MAAI,MAAM,GAAG;AACT,WAAO,EAAE,OAAO,MAAM,MAAM,EAAE;AAAA,EAClC,WACS,UAAU,cAAc,UAAU,UAAU,cAAc,QAAQ;AACvE,UAAM,QAAQ,KAAK,WAAW,CAAC;AAC/B,UAAM,aAAa,KAAK,WAAW,CAAC,EAAE,OAAO,CAAC,QAAQ,MAAM,QAAQ,GAAG,MAAM,EAAE;AAC/E,UAAM,SAAS,EAAE,GAAG,GAAG,GAAG,EAAE;AAC5B,eAAW,OAAO,YAAY;AAC1B,YAAM,cAAc,YAAY,EAAE,GAAG,GAAG,EAAE,GAAG,CAAC;AAC9C,UAAI,CAAC,YAAY,OAAO;AACpB,eAAO,EAAE,OAAO,MAAM;AAAA,MAC1B;AACA,aAAO,GAAG,IAAI,YAAY;AAAA,IAC9B;AACA,WAAO,EAAE,OAAO,MAAM,MAAM,OAAO;AAAA,EACvC,WACS,UAAU,cAAc,SAAS,UAAU,cAAc,OAAO;AACrE,QAAI,EAAE,WAAW,EAAE,QAAQ;AACvB,aAAO,EAAE,OAAO,MAAM;AAAA,IAC1B;AACA,UAAM,WAAW,CAAC;AAClB,aAAS,QAAQ,GAAG,QAAQ,EAAE,QAAQ,SAAS;AAC3C,YAAM,QAAQ,EAAE,KAAK;AACrB,YAAM,QAAQ,EAAE,KAAK;AACrB,YAAM,cAAc,YAAY,OAAO,KAAK;AAC5C,UAAI,CAAC,YAAY,OAAO;AACpB,eAAO,EAAE,OAAO,MAAM;AAAA,MAC1B;AACA,eAAS,KAAK,YAAY,IAAI;AAAA,IAClC;AACA,WAAO,EAAE,OAAO,MAAM,MAAM,SAAS;AAAA,EACzC,WACS,UAAU,cAAc,QAAQ,UAAU,cAAc,QAAQ,CAAC,MAAM,CAAC,GAAG;AAChF,WAAO,EAAE,OAAO,MAAM,MAAM,EAAE;AAAA,EAClC,OACK;AACD,WAAO,EAAE,OAAO,MAAM;AAAA,EAC1B;AACJ;AACO,IAAM,kBAAN,cAA8B,QAAQ;AAAA,EACzC,OAAO,OAAO;AACV,UAAM,EAAE,QAAAF,SAAQ,IAAI,IAAI,KAAK,oBAAoB,KAAK;AACtD,UAAM,eAAe,CAAC,YAAY,gBAAgB;AAC9C,UAAI,UAAU,UAAU,KAAK,UAAU,WAAW,GAAG;AACjD,eAAO;AAAA,MACX;AACA,YAAM,SAAS,YAAY,WAAW,OAAO,YAAY,KAAK;AAC9D,UAAI,CAAC,OAAO,OAAO;AACf,0BAAkB,KAAK;AAAA,UACnB,MAAM,aAAa;AAAA,QACvB,CAAC;AACD,eAAO;AAAA,MACX;AACA,UAAI,QAAQ,UAAU,KAAK,QAAQ,WAAW,GAAG;AAC7C,QAAAA,QAAO,MAAM;AAAA,MACjB;AACA,aAAO,EAAE,QAAQA,QAAO,OAAO,OAAO,OAAO,KAAK;AAAA,IACtD;AACA,QAAI,IAAI,OAAO,OAAO;AAClB,aAAO,QAAQ,IAAI;AAAA,QACf,KAAK,KAAK,KAAK,YAAY;AAAA,UACvB,MAAM,IAAI;AAAA,UACV,MAAM,IAAI;AAAA,UACV,QAAQ;AAAA,QACZ,CAAC;AAAA,QACD,KAAK,KAAK,MAAM,YAAY;AAAA,UACxB,MAAM,IAAI;AAAA,UACV,MAAM,IAAI;AAAA,UACV,QAAQ;AAAA,QACZ,CAAC;AAAA,MACL,CAAC,EAAE,KAAK,CAAC,CAAC,MAAM,KAAK,MAAM,aAAa,MAAM,KAAK,CAAC;AAAA,IACxD,OACK;AACD,aAAO,aAAa,KAAK,KAAK,KAAK,WAAW;AAAA,QAC1C,MAAM,IAAI;AAAA,QACV,MAAM,IAAI;AAAA,QACV,QAAQ;AAAA,MACZ,CAAC,GAAG,KAAK,KAAK,MAAM,WAAW;AAAA,QAC3B,MAAM,IAAI;AAAA,QACV,MAAM,IAAI;AAAA,QACV,QAAQ;AAAA,MACZ,CAAC,CAAC;AAAA,IACN;AAAA,EACJ;AACJ;AACA,gBAAgB,SAAS,CAAC,MAAM,OAAO,WAAW;AAC9C,SAAO,IAAI,gBAAgB;AAAA,IACvB;AAAA,IACA;AAAA,IACA,UAAU,sBAAsB;AAAA,IAChC,GAAG,oBAAoB,MAAM;AAAA,EACjC,CAAC;AACL;AAEO,IAAM,WAAN,MAAM,kBAAiB,QAAQ;AAAA,EAClC,OAAO,OAAO;AACV,UAAM,EAAE,QAAAA,SAAQ,IAAI,IAAI,KAAK,oBAAoB,KAAK;AACtD,QAAI,IAAI,eAAe,cAAc,OAAO;AACxC,wBAAkB,KAAK;AAAA,QACnB,MAAM,aAAa;AAAA,QACnB,UAAU,cAAc;AAAA,QACxB,UAAU,IAAI;AAAA,MAClB,CAAC;AACD,aAAO;AAAA,IACX;AACA,QAAI,IAAI,KAAK,SAAS,KAAK,KAAK,MAAM,QAAQ;AAC1C,wBAAkB,KAAK;AAAA,QACnB,MAAM,aAAa;AAAA,QACnB,SAAS,KAAK,KAAK,MAAM;AAAA,QACzB,WAAW;AAAA,QACX,OAAO;AAAA,QACP,MAAM;AAAA,MACV,CAAC;AACD,aAAO;AAAA,IACX;AACA,UAAM,OAAO,KAAK,KAAK;AACvB,QAAI,CAAC,QAAQ,IAAI,KAAK,SAAS,KAAK,KAAK,MAAM,QAAQ;AACnD,wBAAkB,KAAK;AAAA,QACnB,MAAM,aAAa;AAAA,QACnB,SAAS,KAAK,KAAK,MAAM;AAAA,QACzB,WAAW;AAAA,QACX,OAAO;AAAA,QACP,MAAM;AAAA,MACV,CAAC;AACD,MAAAA,QAAO,MAAM;AAAA,IACjB;AACA,UAAM,QAAQ,CAAC,GAAG,IAAI,IAAI,EACrB,IAAI,CAAC,MAAM,cAAc;AAC1B,YAAM,SAAS,KAAK,KAAK,MAAM,SAAS,KAAK,KAAK,KAAK;AACvD,UAAI,CAAC;AACD,eAAO;AACX,aAAO,OAAO,OAAO,IAAI,mBAAmB,KAAK,MAAM,IAAI,MAAM,SAAS,CAAC;AAAA,IAC/E,CAAC,EACI,OAAO,CAAC,MAAM,CAAC,CAAC,CAAC;AACtB,QAAI,IAAI,OAAO,OAAO;AAClB,aAAO,QAAQ,IAAI,KAAK,EAAE,KAAK,CAAC,YAAY;AACxC,eAAO,YAAY,WAAWA,SAAQ,OAAO;AAAA,MACjD,CAAC;AAAA,IACL,OACK;AACD,aAAO,YAAY,WAAWA,SAAQ,KAAK;AAAA,IAC/C;AAAA,EACJ;AAAA,EACA,IAAI,QAAQ;AACR,WAAO,KAAK,KAAK;AAAA,EACrB;AAAA,EACA,KAAK,MAAM;AACP,WAAO,IAAI,UAAS;AAAA,MAChB,GAAG,KAAK;AAAA,MACR;AAAA,IACJ,CAAC;AAAA,EACL;AACJ;AACA,SAAS,SAAS,CAAC,SAAS,WAAW;AACnC,MAAI,CAAC,MAAM,QAAQ,OAAO,GAAG;AACzB,UAAM,IAAI,MAAM,uDAAuD;AAAA,EAC3E;AACA,SAAO,IAAI,SAAS;AAAA,IAChB,OAAO;AAAA,IACP,UAAU,sBAAsB;AAAA,IAChC,MAAM;AAAA,IACN,GAAG,oBAAoB,MAAM;AAAA,EACjC,CAAC;AACL;AACO,IAAM,YAAN,MAAM,mBAAkB,QAAQ;AAAA,EACnC,IAAI,YAAY;AACZ,WAAO,KAAK,KAAK;AAAA,EACrB;AAAA,EACA,IAAI,cAAc;AACd,WAAO,KAAK,KAAK;AAAA,EACrB;AAAA,EACA,OAAO,OAAO;AACV,UAAM,EAAE,QAAAA,SAAQ,IAAI,IAAI,KAAK,oBAAoB,KAAK;AACtD,QAAI,IAAI,eAAe,cAAc,QAAQ;AACzC,wBAAkB,KAAK;AAAA,QACnB,MAAM,aAAa;AAAA,QACnB,UAAU,cAAc;AAAA,QACxB,UAAU,IAAI;AAAA,MAClB,CAAC;AACD,aAAO;AAAA,IACX;AACA,UAAM,QAAQ,CAAC;AACf,UAAM,UAAU,KAAK,KAAK;AAC1B,UAAM,YAAY,KAAK,KAAK;AAC5B,eAAW,OAAO,IAAI,MAAM;AACxB,YAAM,KAAK;AAAA,QACP,KAAK,QAAQ,OAAO,IAAI,mBAAmB,KAAK,KAAK,IAAI,MAAM,GAAG,CAAC;AAAA,QACnE,OAAO,UAAU,OAAO,IAAI,mBAAmB,KAAK,IAAI,KAAK,GAAG,GAAG,IAAI,MAAM,GAAG,CAAC;AAAA,QACjF,WAAW,OAAO,IAAI;AAAA,MAC1B,CAAC;AAAA,IACL;AACA,QAAI,IAAI,OAAO,OAAO;AAClB,aAAO,YAAY,iBAAiBA,SAAQ,KAAK;AAAA,IACrD,OACK;AACD,aAAO,YAAY,gBAAgBA,SAAQ,KAAK;AAAA,IACpD;AAAA,EACJ;AAAA,EACA,IAAI,UAAU;AACV,WAAO,KAAK,KAAK;AAAA,EACrB;AAAA,EACA,OAAO,OAAO,OAAO,QAAQ,OAAO;AAChC,QAAI,kBAAkB,SAAS;AAC3B,aAAO,IAAI,WAAU;AAAA,QACjB,SAAS;AAAA,QACT,WAAW;AAAA,QACX,UAAU,sBAAsB;AAAA,QAChC,GAAG,oBAAoB,KAAK;AAAA,MAChC,CAAC;AAAA,IACL;AACA,WAAO,IAAI,WAAU;AAAA,MACjB,SAAS,UAAU,OAAO;AAAA,MAC1B,WAAW;AAAA,MACX,UAAU,sBAAsB;AAAA,MAChC,GAAG,oBAAoB,MAAM;AAAA,IACjC,CAAC;AAAA,EACL;AACJ;AACO,IAAM,SAAN,cAAqB,QAAQ;AAAA,EAChC,IAAI,YAAY;AACZ,WAAO,KAAK,KAAK;AAAA,EACrB;AAAA,EACA,IAAI,cAAc;AACd,WAAO,KAAK,KAAK;AAAA,EACrB;AAAA,EACA,OAAO,OAAO;AACV,UAAM,EAAE,QAAAA,SAAQ,IAAI,IAAI,KAAK,oBAAoB,KAAK;AACtD,QAAI,IAAI,eAAe,cAAc,KAAK;AACtC,wBAAkB,KAAK;AAAA,QACnB,MAAM,aAAa;AAAA,QACnB,UAAU,cAAc;AAAA,QACxB,UAAU,IAAI;AAAA,MAClB,CAAC;AACD,aAAO;AAAA,IACX;AACA,UAAM,UAAU,KAAK,KAAK;AAC1B,UAAM,YAAY,KAAK,KAAK;AAC5B,UAAM,QAAQ,CAAC,GAAG,IAAI,KAAK,QAAQ,CAAC,EAAE,IAAI,CAAC,CAAC,KAAK,KAAK,GAAG,UAAU;AAC/D,aAAO;AAAA,QACH,KAAK,QAAQ,OAAO,IAAI,mBAAmB,KAAK,KAAK,IAAI,MAAM,CAAC,OAAO,KAAK,CAAC,CAAC;AAAA,QAC9E,OAAO,UAAU,OAAO,IAAI,mBAAmB,KAAK,OAAO,IAAI,MAAM,CAAC,OAAO,OAAO,CAAC,CAAC;AAAA,MAC1F;AAAA,IACJ,CAAC;AACD,QAAI,IAAI,OAAO,OAAO;AAClB,YAAM,WAAW,oBAAI,IAAI;AACzB,aAAO,QAAQ,QAAQ,EAAE,KAAK,YAAY;AACtC,mBAAW,QAAQ,OAAO;AACtB,gBAAM,MAAM,MAAM,KAAK;AACvB,gBAAM,QAAQ,MAAM,KAAK;AACzB,cAAI,IAAI,WAAW,aAAa,MAAM,WAAW,WAAW;AACxD,mBAAO;AAAA,UACX;AACA,cAAI,IAAI,WAAW,WAAW,MAAM,WAAW,SAAS;AACpD,YAAAA,QAAO,MAAM;AAAA,UACjB;AACA,mBAAS,IAAI,IAAI,OAAO,MAAM,KAAK;AAAA,QACvC;AACA,eAAO,EAAE,QAAQA,QAAO,OAAO,OAAO,SAAS;AAAA,MACnD,CAAC;AAAA,IACL,OACK;AACD,YAAM,WAAW,oBAAI,IAAI;AACzB,iBAAW,QAAQ,OAAO;AACtB,cAAM,MAAM,KAAK;AACjB,cAAM,QAAQ,KAAK;AACnB,YAAI,IAAI,WAAW,aAAa,MAAM,WAAW,WAAW;AACxD,iBAAO;AAAA,QACX;AACA,YAAI,IAAI,WAAW,WAAW,MAAM,WAAW,SAAS;AACpD,UAAAA,QAAO,MAAM;AAAA,QACjB;AACA,iBAAS,IAAI,IAAI,OAAO,MAAM,KAAK;AAAA,MACvC;AACA,aAAO,EAAE,QAAQA,QAAO,OAAO,OAAO,SAAS;AAAA,IACnD;AAAA,EACJ;AACJ;AACA,OAAO,SAAS,CAAC,SAAS,WAAW,WAAW;AAC5C,SAAO,IAAI,OAAO;AAAA,IACd;AAAA,IACA;AAAA,IACA,UAAU,sBAAsB;AAAA,IAChC,GAAG,oBAAoB,MAAM;AAAA,EACjC,CAAC;AACL;AACO,IAAM,SAAN,MAAM,gBAAe,QAAQ;AAAA,EAChC,OAAO,OAAO;AACV,UAAM,EAAE,QAAAA,SAAQ,IAAI,IAAI,KAAK,oBAAoB,KAAK;AACtD,QAAI,IAAI,eAAe,cAAc,KAAK;AACtC,wBAAkB,KAAK;AAAA,QACnB,MAAM,aAAa;AAAA,QACnB,UAAU,cAAc;AAAA,QACxB,UAAU,IAAI;AAAA,MAClB,CAAC;AACD,aAAO;AAAA,IACX;AACA,UAAM,MAAM,KAAK;AACjB,QAAI,IAAI,YAAY,MAAM;AACtB,UAAI,IAAI,KAAK,OAAO,IAAI,QAAQ,OAAO;AACnC,0BAAkB,KAAK;AAAA,UACnB,MAAM,aAAa;AAAA,UACnB,SAAS,IAAI,QAAQ;AAAA,UACrB,MAAM;AAAA,UACN,WAAW;AAAA,UACX,OAAO;AAAA,UACP,SAAS,IAAI,QAAQ;AAAA,QACzB,CAAC;AACD,QAAAA,QAAO,MAAM;AAAA,MACjB;AAAA,IACJ;AACA,QAAI,IAAI,YAAY,MAAM;AACtB,UAAI,IAAI,KAAK,OAAO,IAAI,QAAQ,OAAO;AACnC,0BAAkB,KAAK;AAAA,UACnB,MAAM,aAAa;AAAA,UACnB,SAAS,IAAI,QAAQ;AAAA,UACrB,MAAM;AAAA,UACN,WAAW;AAAA,UACX,OAAO;AAAA,UACP,SAAS,IAAI,QAAQ;AAAA,QACzB,CAAC;AACD,QAAAA,QAAO,MAAM;AAAA,MACjB;AAAA,IACJ;AACA,UAAM,YAAY,KAAK,KAAK;AAC5B,aAAS,YAAYG,WAAU;AAC3B,YAAM,YAAY,oBAAI,IAAI;AAC1B,iBAAW,WAAWA,WAAU;AAC5B,YAAI,QAAQ,WAAW;AACnB,iBAAO;AACX,YAAI,QAAQ,WAAW;AACnB,UAAAH,QAAO,MAAM;AACjB,kBAAU,IAAI,QAAQ,KAAK;AAAA,MAC/B;AACA,aAAO,EAAE,QAAQA,QAAO,OAAO,OAAO,UAAU;AAAA,IACpD;AACA,UAAM,WAAW,CAAC,GAAG,IAAI,KAAK,OAAO,CAAC,EAAE,IAAI,CAAC,MAAM,MAAM,UAAU,OAAO,IAAI,mBAAmB,KAAK,MAAM,IAAI,MAAM,CAAC,CAAC,CAAC;AACzH,QAAI,IAAI,OAAO,OAAO;AAClB,aAAO,QAAQ,IAAI,QAAQ,EAAE,KAAK,CAACG,cAAa,YAAYA,SAAQ,CAAC;AAAA,IACzE,OACK;AACD,aAAO,YAAY,QAAQ;AAAA,IAC/B;AAAA,EACJ;AAAA,EACA,IAAI,SAAS,SAAS;AAClB,WAAO,IAAI,QAAO;AAAA,MACd,GAAG,KAAK;AAAA,MACR,SAAS,EAAE,OAAO,SAAS,SAAS,UAAU,SAAS,OAAO,EAAE;AAAA,IACpE,CAAC;AAAA,EACL;AAAA,EACA,IAAI,SAAS,SAAS;AAClB,WAAO,IAAI,QAAO;AAAA,MACd,GAAG,KAAK;AAAA,MACR,SAAS,EAAE,OAAO,SAAS,SAAS,UAAU,SAAS,OAAO,EAAE;AAAA,IACpE,CAAC;AAAA,EACL;AAAA,EACA,KAAK,MAAM,SAAS;AAChB,WAAO,KAAK,IAAI,MAAM,OAAO,EAAE,IAAI,MAAM,OAAO;AAAA,EACpD;AAAA,EACA,SAAS,SAAS;AACd,WAAO,KAAK,IAAI,GAAG,OAAO;AAAA,EAC9B;AACJ;AACA,OAAO,SAAS,CAAC,WAAW,WAAW;AACnC,SAAO,IAAI,OAAO;AAAA,IACd;AAAA,IACA,SAAS;AAAA,IACT,SAAS;AAAA,IACT,UAAU,sBAAsB;AAAA,IAChC,GAAG,oBAAoB,MAAM;AAAA,EACjC,CAAC;AACL;AACO,IAAM,cAAN,MAAM,qBAAoB,QAAQ;AAAA,EACrC,cAAc;AACV,UAAM,GAAG,SAAS;AAClB,SAAK,WAAW,KAAK;AAAA,EACzB;AAAA,EACA,OAAO,OAAO;AACV,UAAM,EAAE,IAAI,IAAI,KAAK,oBAAoB,KAAK;AAC9C,QAAI,IAAI,eAAe,cAAc,UAAU;AAC3C,wBAAkB,KAAK;AAAA,QACnB,MAAM,aAAa;AAAA,QACnB,UAAU,cAAc;AAAA,QACxB,UAAU,IAAI;AAAA,MAClB,CAAC;AACD,aAAO;AAAA,IACX;AACA,aAAS,cAAc,MAAM,OAAO;AAChC,aAAO,UAAU;AAAA,QACb,MAAM;AAAA,QACN,MAAM,IAAI;AAAA,QACV,WAAW,CAAC,IAAI,OAAO,oBAAoB,IAAI,gBAAgB,YAAY,GAAG,UAAe,EAAE,OAAO,CAAC,MAAM,CAAC,CAAC,CAAC;AAAA,QAChH,WAAW;AAAA,UACP,MAAM,aAAa;AAAA,UACnB,gBAAgB;AAAA,QACpB;AAAA,MACJ,CAAC;AAAA,IACL;AACA,aAAS,iBAAiB,SAAS,OAAO;AACtC,aAAO,UAAU;AAAA,QACb,MAAM;AAAA,QACN,MAAM,IAAI;AAAA,QACV,WAAW,CAAC,IAAI,OAAO,oBAAoB,IAAI,gBAAgB,YAAY,GAAG,UAAe,EAAE,OAAO,CAAC,MAAM,CAAC,CAAC,CAAC;AAAA,QAChH,WAAW;AAAA,UACP,MAAM,aAAa;AAAA,UACnB,iBAAiB;AAAA,QACrB;AAAA,MACJ,CAAC;AAAA,IACL;AACA,UAAM,SAAS,EAAE,UAAU,IAAI,OAAO,mBAAmB;AACzD,UAAM,KAAK,IAAI;AACf,QAAI,KAAK,KAAK,mBAAmB,YAAY;AAIzC,YAAM,KAAK;AACX,aAAO,GAAG,kBAAmB,MAAM;AAC/B,cAAM,QAAQ,IAAI,SAAS,CAAC,CAAC;AAC7B,cAAM,aAAa,MAAM,GAAG,KAAK,KAAK,WAAW,MAAM,MAAM,EAAE,MAAM,CAAC,MAAM;AACxE,gBAAM,SAAS,cAAc,MAAM,CAAC,CAAC;AACrC,gBAAM;AAAA,QACV,CAAC;AACD,cAAM,SAAS,MAAM,QAAQ,MAAM,IAAI,MAAM,UAAU;AACvD,cAAM,gBAAgB,MAAM,GAAG,KAAK,QAAQ,KAAK,KAC5C,WAAW,QAAQ,MAAM,EACzB,MAAM,CAAC,MAAM;AACd,gBAAM,SAAS,iBAAiB,QAAQ,CAAC,CAAC;AAC1C,gBAAM;AAAA,QACV,CAAC;AACD,eAAO;AAAA,MACX,CAAC;AAAA,IACL,OACK;AAID,YAAM,KAAK;AACX,aAAO,GAAG,YAAa,MAAM;AACzB,cAAM,aAAa,GAAG,KAAK,KAAK,UAAU,MAAM,MAAM;AACtD,YAAI,CAAC,WAAW,SAAS;AACrB,gBAAM,IAAI,SAAS,CAAC,cAAc,MAAM,WAAW,KAAK,CAAC,CAAC;AAAA,QAC9D;AACA,cAAM,SAAS,QAAQ,MAAM,IAAI,MAAM,WAAW,IAAI;AACtD,cAAM,gBAAgB,GAAG,KAAK,QAAQ,UAAU,QAAQ,MAAM;AAC9D,YAAI,CAAC,cAAc,SAAS;AACxB,gBAAM,IAAI,SAAS,CAAC,iBAAiB,QAAQ,cAAc,KAAK,CAAC,CAAC;AAAA,QACtE;AACA,eAAO,cAAc;AAAA,MACzB,CAAC;AAAA,IACL;AAAA,EACJ;AAAA,EACA,aAAa;AACT,WAAO,KAAK,KAAK;AAAA,EACrB;AAAA,EACA,aAAa;AACT,WAAO,KAAK,KAAK;AAAA,EACrB;AAAA,EACA,QAAQ,OAAO;AACX,WAAO,IAAI,aAAY;AAAA,MACnB,GAAG,KAAK;AAAA,MACR,MAAM,SAAS,OAAO,KAAK,EAAE,KAAK,WAAW,OAAO,CAAC;AAAA,IACzD,CAAC;AAAA,EACL;AAAA,EACA,QAAQ,YAAY;AAChB,WAAO,IAAI,aAAY;AAAA,MACnB,GAAG,KAAK;AAAA,MACR,SAAS;AAAA,IACb,CAAC;AAAA,EACL;AAAA,EACA,UAAU,MAAM;AACZ,UAAM,gBAAgB,KAAK,MAAM,IAAI;AACrC,WAAO;AAAA,EACX;AAAA,EACA,gBAAgB,MAAM;AAClB,UAAM,gBAAgB,KAAK,MAAM,IAAI;AACrC,WAAO;AAAA,EACX;AAAA,EACA,OAAO,OAAO,MAAM,SAAS,QAAQ;AACjC,WAAO,IAAI,aAAY;AAAA,MACnB,MAAO,OAAO,OAAO,SAAS,OAAO,CAAC,CAAC,EAAE,KAAK,WAAW,OAAO,CAAC;AAAA,MACjE,SAAS,WAAW,WAAW,OAAO;AAAA,MACtC,UAAU,sBAAsB;AAAA,MAChC,GAAG,oBAAoB,MAAM;AAAA,IACjC,CAAC;AAAA,EACL;AACJ;AACO,IAAM,UAAN,cAAsB,QAAQ;AAAA,EACjC,IAAI,SAAS;AACT,WAAO,KAAK,KAAK,OAAO;AAAA,EAC5B;AAAA,EACA,OAAO,OAAO;AACV,UAAM,EAAE,IAAI,IAAI,KAAK,oBAAoB,KAAK;AAC9C,UAAM,aAAa,KAAK,KAAK,OAAO;AACpC,WAAO,WAAW,OAAO,EAAE,MAAM,IAAI,MAAM,MAAM,IAAI,MAAM,QAAQ,IAAI,CAAC;AAAA,EAC5E;AACJ;AACA,QAAQ,SAAS,CAAC,QAAQ,WAAW;AACjC,SAAO,IAAI,QAAQ;AAAA,IACf;AAAA,IACA,UAAU,sBAAsB;AAAA,IAChC,GAAG,oBAAoB,MAAM;AAAA,EACjC,CAAC;AACL;AACO,IAAM,aAAN,cAAyB,QAAQ;AAAA,EACpC,OAAO,OAAO;AACV,QAAI,MAAM,SAAS,KAAK,KAAK,OAAO;AAChC,YAAM,MAAM,KAAK,gBAAgB,KAAK;AACtC,wBAAkB,KAAK;AAAA,QACnB,UAAU,IAAI;AAAA,QACd,MAAM,aAAa;AAAA,QACnB,UAAU,KAAK,KAAK;AAAA,MACxB,CAAC;AACD,aAAO;AAAA,IACX;AACA,WAAO,EAAE,QAAQ,SAAS,OAAO,MAAM,KAAK;AAAA,EAChD;AAAA,EACA,IAAI,QAAQ;AACR,WAAO,KAAK,KAAK;AAAA,EACrB;AACJ;AACA,WAAW,SAAS,CAAC,OAAO,WAAW;AACnC,SAAO,IAAI,WAAW;AAAA,IAClB;AAAA,IACA,UAAU,sBAAsB;AAAA,IAChC,GAAG,oBAAoB,MAAM;AAAA,EACjC,CAAC;AACL;AACA,SAAS,cAAc,QAAQ,QAAQ;AACnC,SAAO,IAAI,QAAQ;AAAA,IACf;AAAA,IACA,UAAU,sBAAsB;AAAA,IAChC,GAAG,oBAAoB,MAAM;AAAA,EACjC,CAAC;AACL;AACO,IAAM,UAAN,MAAM,iBAAgB,QAAQ;AAAA,EACjC,OAAO,OAAO;AACV,QAAI,OAAO,MAAM,SAAS,UAAU;AAChC,YAAM,MAAM,KAAK,gBAAgB,KAAK;AACtC,YAAM,iBAAiB,KAAK,KAAK;AACjC,wBAAkB,KAAK;AAAA,QACnB,UAAU,KAAK,WAAW,cAAc;AAAA,QACxC,UAAU,IAAI;AAAA,QACd,MAAM,aAAa;AAAA,MACvB,CAAC;AACD,aAAO;AAAA,IACX;AACA,QAAI,CAAC,KAAK,QAAQ;AACd,WAAK,SAAS,IAAI,IAAI,KAAK,KAAK,MAAM;AAAA,IAC1C;AACA,QAAI,CAAC,KAAK,OAAO,IAAI,MAAM,IAAI,GAAG;AAC9B,YAAM,MAAM,KAAK,gBAAgB,KAAK;AACtC,YAAM,iBAAiB,KAAK,KAAK;AACjC,wBAAkB,KAAK;AAAA,QACnB,UAAU,IAAI;AAAA,QACd,MAAM,aAAa;AAAA,QACnB,SAAS;AAAA,MACb,CAAC;AACD,aAAO;AAAA,IACX;AACA,WAAO,GAAG,MAAM,IAAI;AAAA,EACxB;AAAA,EACA,IAAI,UAAU;AACV,WAAO,KAAK,KAAK;AAAA,EACrB;AAAA,EACA,IAAI,OAAO;AACP,UAAM,aAAa,CAAC;AACpB,eAAW,OAAO,KAAK,KAAK,QAAQ;AAChC,iBAAW,GAAG,IAAI;AAAA,IACtB;AACA,WAAO;AAAA,EACX;AAAA,EACA,IAAI,SAAS;AACT,UAAM,aAAa,CAAC;AACpB,eAAW,OAAO,KAAK,KAAK,QAAQ;AAChC,iBAAW,GAAG,IAAI;AAAA,IACtB;AACA,WAAO;AAAA,EACX;AAAA,EACA,IAAI,OAAO;AACP,UAAM,aAAa,CAAC;AACpB,eAAW,OAAO,KAAK,KAAK,QAAQ;AAChC,iBAAW,GAAG,IAAI;AAAA,IACtB;AACA,WAAO;AAAA,EACX;AAAA,EACA,QAAQ,QAAQ,SAAS,KAAK,MAAM;AAChC,WAAO,SAAQ,OAAO,QAAQ;AAAA,MAC1B,GAAG,KAAK;AAAA,MACR,GAAG;AAAA,IACP,CAAC;AAAA,EACL;AAAA,EACA,QAAQ,QAAQ,SAAS,KAAK,MAAM;AAChC,WAAO,SAAQ,OAAO,KAAK,QAAQ,OAAO,CAAC,QAAQ,CAAC,OAAO,SAAS,GAAG,CAAC,GAAG;AAAA,MACvE,GAAG,KAAK;AAAA,MACR,GAAG;AAAA,IACP,CAAC;AAAA,EACL;AACJ;AACA,QAAQ,SAAS;AACV,IAAM,gBAAN,cAA4B,QAAQ;AAAA,EACvC,OAAO,OAAO;AACV,UAAM,mBAAmB,KAAK,mBAAmB,KAAK,KAAK,MAAM;AACjE,UAAM,MAAM,KAAK,gBAAgB,KAAK;AACtC,QAAI,IAAI,eAAe,cAAc,UAAU,IAAI,eAAe,cAAc,QAAQ;AACpF,YAAM,iBAAiB,KAAK,aAAa,gBAAgB;AACzD,wBAAkB,KAAK;AAAA,QACnB,UAAU,KAAK,WAAW,cAAc;AAAA,QACxC,UAAU,IAAI;AAAA,QACd,MAAM,aAAa;AAAA,MACvB,CAAC;AACD,aAAO;AAAA,IACX;AACA,QAAI,CAAC,KAAK,QAAQ;AACd,WAAK,SAAS,IAAI,IAAI,KAAK,mBAAmB,KAAK,KAAK,MAAM,CAAC;AAAA,IACnE;AACA,QAAI,CAAC,KAAK,OAAO,IAAI,MAAM,IAAI,GAAG;AAC9B,YAAM,iBAAiB,KAAK,aAAa,gBAAgB;AACzD,wBAAkB,KAAK;AAAA,QACnB,UAAU,IAAI;AAAA,QACd,MAAM,aAAa;AAAA,QACnB,SAAS;AAAA,MACb,CAAC;AACD,aAAO;AAAA,IACX;AACA,WAAO,GAAG,MAAM,IAAI;AAAA,EACxB;AAAA,EACA,IAAI,OAAO;AACP,WAAO,KAAK,KAAK;AAAA,EACrB;AACJ;AACA,cAAc,SAAS,CAAC,QAAQ,WAAW;AACvC,SAAO,IAAI,cAAc;AAAA,IACrB;AAAA,IACA,UAAU,sBAAsB;AAAA,IAChC,GAAG,oBAAoB,MAAM;AAAA,EACjC,CAAC;AACL;AACO,IAAM,aAAN,cAAyB,QAAQ;AAAA,EACpC,SAAS;AACL,WAAO,KAAK,KAAK;AAAA,EACrB;AAAA,EACA,OAAO,OAAO;AACV,UAAM,EAAE,IAAI,IAAI,KAAK,oBAAoB,KAAK;AAC9C,QAAI,IAAI,eAAe,cAAc,WAAW,IAAI,OAAO,UAAU,OAAO;AACxE,wBAAkB,KAAK;AAAA,QACnB,MAAM,aAAa;AAAA,QACnB,UAAU,cAAc;AAAA,QACxB,UAAU,IAAI;AAAA,MAClB,CAAC;AACD,aAAO;AAAA,IACX;AACA,UAAM,cAAc,IAAI,eAAe,cAAc,UAAU,IAAI,OAAO,QAAQ,QAAQ,IAAI,IAAI;AAClG,WAAO,GAAG,YAAY,KAAK,CAAC,SAAS;AACjC,aAAO,KAAK,KAAK,KAAK,WAAW,MAAM;AAAA,QACnC,MAAM,IAAI;AAAA,QACV,UAAU,IAAI,OAAO;AAAA,MACzB,CAAC;AAAA,IACL,CAAC,CAAC;AAAA,EACN;AACJ;AACA,WAAW,SAAS,CAAC,QAAQ,WAAW;AACpC,SAAO,IAAI,WAAW;AAAA,IAClB,MAAM;AAAA,IACN,UAAU,sBAAsB;AAAA,IAChC,GAAG,oBAAoB,MAAM;AAAA,EACjC,CAAC;AACL;AACO,IAAM,aAAN,cAAyB,QAAQ;AAAA,EACpC,YAAY;AACR,WAAO,KAAK,KAAK;AAAA,EACrB;AAAA,EACA,aAAa;AACT,WAAO,KAAK,KAAK,OAAO,KAAK,aAAa,sBAAsB,aAC1D,KAAK,KAAK,OAAO,WAAW,IAC5B,KAAK,KAAK;AAAA,EACpB;AAAA,EACA,OAAO,OAAO;AACV,UAAM,EAAE,QAAAH,SAAQ,IAAI,IAAI,KAAK,oBAAoB,KAAK;AACtD,UAAM,SAAS,KAAK,KAAK,UAAU;AACnC,UAAM,WAAW;AAAA,MACb,UAAU,CAAC,QAAQ;AACf,0BAAkB,KAAK,GAAG;AAC1B,YAAI,IAAI,OAAO;AACX,UAAAA,QAAO,MAAM;AAAA,QACjB,OACK;AACD,UAAAA,QAAO,MAAM;AAAA,QACjB;AAAA,MACJ;AAAA,MACA,IAAI,OAAO;AACP,eAAO,IAAI;AAAA,MACf;AAAA,IACJ;AACA,aAAS,WAAW,SAAS,SAAS,KAAK,QAAQ;AACnD,QAAI,OAAO,SAAS,cAAc;AAC9B,YAAM,YAAY,OAAO,UAAU,IAAI,MAAM,QAAQ;AACrD,UAAI,IAAI,OAAO,OAAO;AAClB,eAAO,QAAQ,QAAQ,SAAS,EAAE,KAAK,OAAOI,eAAc;AACxD,cAAIJ,QAAO,UAAU;AACjB,mBAAO;AACX,gBAAM,SAAS,MAAM,KAAK,KAAK,OAAO,YAAY;AAAA,YAC9C,MAAMI;AAAA,YACN,MAAM,IAAI;AAAA,YACV,QAAQ;AAAA,UACZ,CAAC;AACD,cAAI,OAAO,WAAW;AAClB,mBAAO;AACX,cAAI,OAAO,WAAW;AAClB,mBAAO,MAAM,OAAO,KAAK;AAC7B,cAAIJ,QAAO,UAAU;AACjB,mBAAO,MAAM,OAAO,KAAK;AAC7B,iBAAO;AAAA,QACX,CAAC;AAAA,MACL,OACK;AACD,YAAIA,QAAO,UAAU;AACjB,iBAAO;AACX,cAAM,SAAS,KAAK,KAAK,OAAO,WAAW;AAAA,UACvC,MAAM;AAAA,UACN,MAAM,IAAI;AAAA,UACV,QAAQ;AAAA,QACZ,CAAC;AACD,YAAI,OAAO,WAAW;AAClB,iBAAO;AACX,YAAI,OAAO,WAAW;AAClB,iBAAO,MAAM,OAAO,KAAK;AAC7B,YAAIA,QAAO,UAAU;AACjB,iBAAO,MAAM,OAAO,KAAK;AAC7B,eAAO;AAAA,MACX;AAAA,IACJ;AACA,QAAI,OAAO,SAAS,cAAc;AAC9B,YAAM,oBAAoB,CAAC,QAAQ;AAC/B,cAAM,SAAS,OAAO,WAAW,KAAK,QAAQ;AAC9C,YAAI,IAAI,OAAO,OAAO;AAClB,iBAAO,QAAQ,QAAQ,MAAM;AAAA,QACjC;AACA,YAAI,kBAAkB,SAAS;AAC3B,gBAAM,IAAI,MAAM,2FAA2F;AAAA,QAC/G;AACA,eAAO;AAAA,MACX;AACA,UAAI,IAAI,OAAO,UAAU,OAAO;AAC5B,cAAM,QAAQ,KAAK,KAAK,OAAO,WAAW;AAAA,UACtC,MAAM,IAAI;AAAA,UACV,MAAM,IAAI;AAAA,UACV,QAAQ;AAAA,QACZ,CAAC;AACD,YAAI,MAAM,WAAW;AACjB,iBAAO;AACX,YAAI,MAAM,WAAW;AACjB,UAAAA,QAAO,MAAM;AAEjB,0BAAkB,MAAM,KAAK;AAC7B,eAAO,EAAE,QAAQA,QAAO,OAAO,OAAO,MAAM,MAAM;AAAA,MACtD,OACK;AACD,eAAO,KAAK,KAAK,OAAO,YAAY,EAAE,MAAM,IAAI,MAAM,MAAM,IAAI,MAAM,QAAQ,IAAI,CAAC,EAAE,KAAK,CAAC,UAAU;AACjG,cAAI,MAAM,WAAW;AACjB,mBAAO;AACX,cAAI,MAAM,WAAW;AACjB,YAAAA,QAAO,MAAM;AACjB,iBAAO,kBAAkB,MAAM,KAAK,EAAE,KAAK,MAAM;AAC7C,mBAAO,EAAE,QAAQA,QAAO,OAAO,OAAO,MAAM,MAAM;AAAA,UACtD,CAAC;AAAA,QACL,CAAC;AAAA,MACL;AAAA,IACJ;AACA,QAAI,OAAO,SAAS,aAAa;AAC7B,UAAI,IAAI,OAAO,UAAU,OAAO;AAC5B,cAAM,OAAO,KAAK,KAAK,OAAO,WAAW;AAAA,UACrC,MAAM,IAAI;AAAA,UACV,MAAM,IAAI;AAAA,UACV,QAAQ;AAAA,QACZ,CAAC;AACD,YAAI,CAAC,QAAQ,IAAI;AACb,iBAAO;AACX,cAAM,SAAS,OAAO,UAAU,KAAK,OAAO,QAAQ;AACpD,YAAI,kBAAkB,SAAS;AAC3B,gBAAM,IAAI,MAAM,iGAAiG;AAAA,QACrH;AACA,eAAO,EAAE,QAAQA,QAAO,OAAO,OAAO,OAAO;AAAA,MACjD,OACK;AACD,eAAO,KAAK,KAAK,OAAO,YAAY,EAAE,MAAM,IAAI,MAAM,MAAM,IAAI,MAAM,QAAQ,IAAI,CAAC,EAAE,KAAK,CAAC,SAAS;AAChG,cAAI,CAAC,QAAQ,IAAI;AACb,mBAAO;AACX,iBAAO,QAAQ,QAAQ,OAAO,UAAU,KAAK,OAAO,QAAQ,CAAC,EAAE,KAAK,CAAC,YAAY;AAAA,YAC7E,QAAQA,QAAO;AAAA,YACf,OAAO;AAAA,UACX,EAAE;AAAA,QACN,CAAC;AAAA,MACL;AAAA,IACJ;AACA,SAAK,YAAY,MAAM;AAAA,EAC3B;AACJ;AACA,WAAW,SAAS,CAAC,QAAQ,QAAQ,WAAW;AAC5C,SAAO,IAAI,WAAW;AAAA,IAClB;AAAA,IACA,UAAU,sBAAsB;AAAA,IAChC;AAAA,IACA,GAAG,oBAAoB,MAAM;AAAA,EACjC,CAAC;AACL;AACA,WAAW,uBAAuB,CAAC,YAAY,QAAQ,WAAW;AAC9D,SAAO,IAAI,WAAW;AAAA,IAClB;AAAA,IACA,QAAQ,EAAE,MAAM,cAAc,WAAW,WAAW;AAAA,IACpD,UAAU,sBAAsB;AAAA,IAChC,GAAG,oBAAoB,MAAM;AAAA,EACjC,CAAC;AACL;AAEO,IAAM,cAAN,cAA0B,QAAQ;AAAA,EACrC,OAAO,OAAO;AACV,UAAM,aAAa,KAAK,SAAS,KAAK;AACtC,QAAI,eAAe,cAAc,WAAW;AACxC,aAAO,GAAG,MAAS;AAAA,IACvB;AACA,WAAO,KAAK,KAAK,UAAU,OAAO,KAAK;AAAA,EAC3C;AAAA,EACA,SAAS;AACL,WAAO,KAAK,KAAK;AAAA,EACrB;AACJ;AACA,YAAY,SAAS,CAAC,MAAM,WAAW;AACnC,SAAO,IAAI,YAAY;AAAA,IACnB,WAAW;AAAA,IACX,UAAU,sBAAsB;AAAA,IAChC,GAAG,oBAAoB,MAAM;AAAA,EACjC,CAAC;AACL;AACO,IAAM,cAAN,cAA0B,QAAQ;AAAA,EACrC,OAAO,OAAO;AACV,UAAM,aAAa,KAAK,SAAS,KAAK;AACtC,QAAI,eAAe,cAAc,MAAM;AACnC,aAAO,GAAG,IAAI;AAAA,IAClB;AACA,WAAO,KAAK,KAAK,UAAU,OAAO,KAAK;AAAA,EAC3C;AAAA,EACA,SAAS;AACL,WAAO,KAAK,KAAK;AAAA,EACrB;AACJ;AACA,YAAY,SAAS,CAAC,MAAM,WAAW;AACnC,SAAO,IAAI,YAAY;AAAA,IACnB,WAAW;AAAA,IACX,UAAU,sBAAsB;AAAA,IAChC,GAAG,oBAAoB,MAAM;AAAA,EACjC,CAAC;AACL;AACO,IAAM,aAAN,cAAyB,QAAQ;AAAA,EACpC,OAAO,OAAO;AACV,UAAM,EAAE,IAAI,IAAI,KAAK,oBAAoB,KAAK;AAC9C,QAAI,OAAO,IAAI;AACf,QAAI,IAAI,eAAe,cAAc,WAAW;AAC5C,aAAO,KAAK,KAAK,aAAa;AAAA,IAClC;AACA,WAAO,KAAK,KAAK,UAAU,OAAO;AAAA,MAC9B;AAAA,MACA,MAAM,IAAI;AAAA,MACV,QAAQ;AAAA,IACZ,CAAC;AAAA,EACL;AAAA,EACA,gBAAgB;AACZ,WAAO,KAAK,KAAK;AAAA,EACrB;AACJ;AACA,WAAW,SAAS,CAAC,MAAM,WAAW;AAClC,SAAO,IAAI,WAAW;AAAA,IAClB,WAAW;AAAA,IACX,UAAU,sBAAsB;AAAA,IAChC,cAAc,OAAO,OAAO,YAAY,aAAa,OAAO,UAAU,MAAM,OAAO;AAAA,IACnF,GAAG,oBAAoB,MAAM;AAAA,EACjC,CAAC;AACL;AACO,IAAM,WAAN,cAAuB,QAAQ;AAAA,EAClC,OAAO,OAAO;AACV,UAAM,EAAE,IAAI,IAAI,KAAK,oBAAoB,KAAK;AAE9C,UAAM,SAAS;AAAA,MACX,GAAG;AAAA,MACH,QAAQ;AAAA,QACJ,GAAG,IAAI;AAAA,QACP,QAAQ,CAAC;AAAA,MACb;AAAA,IACJ;AACA,UAAM,SAAS,KAAK,KAAK,UAAU,OAAO;AAAA,MACtC,MAAM,OAAO;AAAA,MACb,MAAM,OAAO;AAAA,MACb,QAAQ;AAAA,QACJ,GAAG;AAAA,MACP;AAAA,IACJ,CAAC;AACD,QAAI,QAAQ,MAAM,GAAG;AACjB,aAAO,OAAO,KAAK,CAACK,YAAW;AAC3B,eAAO;AAAA,UACH,QAAQ;AAAA,UACR,OAAOA,QAAO,WAAW,UACnBA,QAAO,QACP,KAAK,KAAK,WAAW;AAAA,YACnB,IAAI,QAAQ;AACR,qBAAO,IAAI,SAAS,OAAO,OAAO,MAAM;AAAA,YAC5C;AAAA,YACA,OAAO,OAAO;AAAA,UAClB,CAAC;AAAA,QACT;AAAA,MACJ,CAAC;AAAA,IACL,OACK;AACD,aAAO;AAAA,QACH,QAAQ;AAAA,QACR,OAAO,OAAO,WAAW,UACnB,OAAO,QACP,KAAK,KAAK,WAAW;AAAA,UACnB,IAAI,QAAQ;AACR,mBAAO,IAAI,SAAS,OAAO,OAAO,MAAM;AAAA,UAC5C;AAAA,UACA,OAAO,OAAO;AAAA,QAClB,CAAC;AAAA,MACT;AAAA,IACJ;AAAA,EACJ;AAAA,EACA,cAAc;AACV,WAAO,KAAK,KAAK;AAAA,EACrB;AACJ;AACA,SAAS,SAAS,CAAC,MAAM,WAAW;AAChC,SAAO,IAAI,SAAS;AAAA,IAChB,WAAW;AAAA,IACX,UAAU,sBAAsB;AAAA,IAChC,YAAY,OAAO,OAAO,UAAU,aAAa,OAAO,QAAQ,MAAM,OAAO;AAAA,IAC7E,GAAG,oBAAoB,MAAM;AAAA,EACjC,CAAC;AACL;AACO,IAAM,SAAN,cAAqB,QAAQ;AAAA,EAChC,OAAO,OAAO;AACV,UAAM,aAAa,KAAK,SAAS,KAAK;AACtC,QAAI,eAAe,cAAc,KAAK;AAClC,YAAM,MAAM,KAAK,gBAAgB,KAAK;AACtC,wBAAkB,KAAK;AAAA,QACnB,MAAM,aAAa;AAAA,QACnB,UAAU,cAAc;AAAA,QACxB,UAAU,IAAI;AAAA,MAClB,CAAC;AACD,aAAO;AAAA,IACX;AACA,WAAO,EAAE,QAAQ,SAAS,OAAO,MAAM,KAAK;AAAA,EAChD;AACJ;AACA,OAAO,SAAS,CAAC,WAAW;AACxB,SAAO,IAAI,OAAO;AAAA,IACd,UAAU,sBAAsB;AAAA,IAChC,GAAG,oBAAoB,MAAM;AAAA,EACjC,CAAC;AACL;AACO,IAAM,QAAQ,OAAO,WAAW;AAChC,IAAM,aAAN,cAAyB,QAAQ;AAAA,EACpC,OAAO,OAAO;AACV,UAAM,EAAE,IAAI,IAAI,KAAK,oBAAoB,KAAK;AAC9C,UAAM,OAAO,IAAI;AACjB,WAAO,KAAK,KAAK,KAAK,OAAO;AAAA,MACzB;AAAA,MACA,MAAM,IAAI;AAAA,MACV,QAAQ;AAAA,IACZ,CAAC;AAAA,EACL;AAAA,EACA,SAAS;AACL,WAAO,KAAK,KAAK;AAAA,EACrB;AACJ;AACO,IAAM,cAAN,MAAM,qBAAoB,QAAQ;AAAA,EACrC,OAAO,OAAO;AACV,UAAM,EAAE,QAAAC,SAAQ,IAAI,IAAI,KAAK,oBAAoB,KAAK;AACtD,QAAI,IAAI,OAAO,OAAO;AAClB,YAAM,cAAc,YAAY;AAC5B,cAAM,WAAW,MAAM,KAAK,KAAK,GAAG,YAAY;AAAA,UAC5C,MAAM,IAAI;AAAA,UACV,MAAM,IAAI;AAAA,UACV,QAAQ;AAAA,QACZ,CAAC;AACD,YAAI,SAAS,WAAW;AACpB,iBAAO;AACX,YAAI,SAAS,WAAW,SAAS;AAC7B,UAAAA,QAAO,MAAM;AACb,iBAAO,MAAM,SAAS,KAAK;AAAA,QAC/B,OACK;AACD,iBAAO,KAAK,KAAK,IAAI,YAAY;AAAA,YAC7B,MAAM,SAAS;AAAA,YACf,MAAM,IAAI;AAAA,YACV,QAAQ;AAAA,UACZ,CAAC;AAAA,QACL;AAAA,MACJ;AACA,aAAO,YAAY;AAAA,IACvB,OACK;AACD,YAAM,WAAW,KAAK,KAAK,GAAG,WAAW;AAAA,QACrC,MAAM,IAAI;AAAA,QACV,MAAM,IAAI;AAAA,QACV,QAAQ;AAAA,MACZ,CAAC;AACD,UAAI,SAAS,WAAW;AACpB,eAAO;AACX,UAAI,SAAS,WAAW,SAAS;AAC7B,QAAAA,QAAO,MAAM;AACb,eAAO;AAAA,UACH,QAAQ;AAAA,UACR,OAAO,SAAS;AAAA,QACpB;AAAA,MACJ,OACK;AACD,eAAO,KAAK,KAAK,IAAI,WAAW;AAAA,UAC5B,MAAM,SAAS;AAAA,UACf,MAAM,IAAI;AAAA,UACV,QAAQ;AAAA,QACZ,CAAC;AAAA,MACL;AAAA,IACJ;AAAA,EACJ;AAAA,EACA,OAAO,OAAO,GAAG,GAAG;AAChB,WAAO,IAAI,aAAY;AAAA,MACnB,IAAI;AAAA,MACJ,KAAK;AAAA,MACL,UAAU,sBAAsB;AAAA,IACpC,CAAC;AAAA,EACL;AACJ;AACO,IAAM,cAAN,cAA0B,QAAQ;AAAA,EACrC,OAAO,OAAO;AACV,UAAM,SAAS,KAAK,KAAK,UAAU,OAAO,KAAK;AAC/C,UAAM,SAAS,CAAC,SAAS;AACrB,UAAI,QAAQ,IAAI,GAAG;AACf,aAAK,QAAQ,OAAO,OAAO,KAAK,KAAK;AAAA,MACzC;AACA,aAAO;AAAA,IACX;AACA,WAAO,QAAQ,MAAM,IAAI,OAAO,KAAK,CAAC,SAAS,OAAO,IAAI,CAAC,IAAI,OAAO,MAAM;AAAA,EAChF;AAAA,EACA,SAAS;AACL,WAAO,KAAK,KAAK;AAAA,EACrB;AACJ;AACA,YAAY,SAAS,CAAC,MAAM,WAAW;AACnC,SAAO,IAAI,YAAY;AAAA,IACnB,WAAW;AAAA,IACX,UAAU,sBAAsB;AAAA,IAChC,GAAG,oBAAoB,MAAM;AAAA,EACjC,CAAC;AACL;AAQA,SAAS,YAAY,QAAQ,MAAM;AAC/B,QAAM,IAAI,OAAO,WAAW,aAAa,OAAO,IAAI,IAAI,OAAO,WAAW,WAAW,EAAE,SAAS,OAAO,IAAI;AAC3G,QAAM,KAAK,OAAO,MAAM,WAAW,EAAE,SAAS,EAAE,IAAI;AACpD,SAAO;AACX;AACO,SAAS,OAAO,OAAO,UAAU,CAAC,GAWzC,OAAO;AACH,MAAI;AACA,WAAO,OAAO,OAAO,EAAE,YAAY,CAAC,MAAM,QAAQ;AAC9C,YAAM,IAAI,MAAM,IAAI;AACpB,UAAI,aAAa,SAAS;AACtB,eAAO,EAAE,KAAK,CAACC,OAAM;AACjB,cAAI,CAACA,IAAG;AACJ,kBAAM,SAAS,YAAY,SAAS,IAAI;AACxC,kBAAM,SAAS,OAAO,SAAS,SAAS;AACxC,gBAAI,SAAS,EAAE,MAAM,UAAU,GAAG,QAAQ,OAAO,OAAO,CAAC;AAAA,UAC7D;AAAA,QACJ,CAAC;AAAA,MACL;AACA,UAAI,CAAC,GAAG;AACJ,cAAM,SAAS,YAAY,SAAS,IAAI;AACxC,cAAM,SAAS,OAAO,SAAS,SAAS;AACxC,YAAI,SAAS,EAAE,MAAM,UAAU,GAAG,QAAQ,OAAO,OAAO,CAAC;AAAA,MAC7D;AACA;AAAA,IACJ,CAAC;AACL,SAAO,OAAO,OAAO;AACzB;AAEO,IAAM,OAAO;AAAA,EAChB,QAAQ,UAAU;AACtB;AACO,IAAI;AAAA,CACV,SAAUC,wBAAuB;AAC9B,EAAAA,uBAAsB,WAAW,IAAI;AACrC,EAAAA,uBAAsB,WAAW,IAAI;AACrC,EAAAA,uBAAsB,QAAQ,IAAI;AAClC,EAAAA,uBAAsB,WAAW,IAAI;AACrC,EAAAA,uBAAsB,YAAY,IAAI;AACtC,EAAAA,uBAAsB,SAAS,IAAI;AACnC,EAAAA,uBAAsB,WAAW,IAAI;AACrC,EAAAA,uBAAsB,cAAc,IAAI;AACxC,EAAAA,uBAAsB,SAAS,IAAI;AACnC,EAAAA,uBAAsB,QAAQ,IAAI;AAClC,EAAAA,uBAAsB,YAAY,IAAI;AACtC,EAAAA,uBAAsB,UAAU,IAAI;AACpC,EAAAA,uBAAsB,SAAS,IAAI;AACnC,EAAAA,uBAAsB,UAAU,IAAI;AACpC,EAAAA,uBAAsB,WAAW,IAAI;AACrC,EAAAA,uBAAsB,UAAU,IAAI;AACpC,EAAAA,uBAAsB,uBAAuB,IAAI;AACjD,EAAAA,uBAAsB,iBAAiB,IAAI;AAC3C,EAAAA,uBAAsB,UAAU,IAAI;AACpC,EAAAA,uBAAsB,WAAW,IAAI;AACrC,EAAAA,uBAAsB,QAAQ,IAAI;AAClC,EAAAA,uBAAsB,QAAQ,IAAI;AAClC,EAAAA,uBAAsB,aAAa,IAAI;AACvC,EAAAA,uBAAsB,SAAS,IAAI;AACnC,EAAAA,uBAAsB,YAAY,IAAI;AACtC,EAAAA,uBAAsB,SAAS,IAAI;AACnC,EAAAA,uBAAsB,YAAY,IAAI;AACtC,EAAAA,uBAAsB,eAAe,IAAI;AACzC,EAAAA,uBAAsB,aAAa,IAAI;AACvC,EAAAA,uBAAsB,aAAa,IAAI;AACvC,EAAAA,uBAAsB,YAAY,IAAI;AACtC,EAAAA,uBAAsB,UAAU,IAAI;AACpC,EAAAA,uBAAsB,YAAY,IAAI;AACtC,EAAAA,uBAAsB,YAAY,IAAI;AACtC,EAAAA,uBAAsB,aAAa,IAAI;AACvC,EAAAA,uBAAsB,aAAa,IAAI;AAC3C,GAAG,0BAA0B,wBAAwB,CAAC,EAAE;AAKxD,IAAM,iBAAiB,CAEvB,KAAK,SAAS;AAAA,EACV,SAAS,yBAAyB,IAAI,IAAI;AAC9C,MAAM,OAAO,CAAC,SAAS,gBAAgB,KAAK,MAAM;AAClD,IAAM,aAAa,UAAU;AAC7B,IAAM,aAAa,UAAU;AAC7B,IAAM,UAAU,OAAO;AACvB,IAAM,aAAa,UAAU;AAC7B,IAAM,cAAc,WAAW;AAC/B,IAAM,WAAW,QAAQ;AACzB,IAAM,aAAa,UAAU;AAC7B,IAAM,gBAAgB,aAAa;AACnC,IAAM,WAAW,QAAQ;AACzB,IAAM,UAAU,OAAO;AACvB,IAAM,cAAc,WAAW;AAC/B,IAAM,YAAY,SAAS;AAC3B,IAAM,WAAW,QAAQ;AACzB,IAAM,YAAY,SAAS;AAC3B,IAAM,aAAa,UAAU;AAC7B,IAAM,mBAAmB,UAAU;AACnC,IAAM,YAAY,SAAS;AAC3B,IAAM,yBAAyB,sBAAsB;AACrD,IAAM,mBAAmB,gBAAgB;AACzC,IAAM,YAAY,SAAS;AAC3B,IAAM,aAAa,UAAU;AAC7B,IAAM,UAAU,OAAO;AACvB,IAAM,UAAU,OAAO;AACvB,IAAM,eAAe,YAAY;AACjC,IAAM,WAAW,QAAQ;AACzB,IAAM,cAAc,WAAW;AAC/B,IAAM,WAAW,QAAQ;AACzB,IAAM,iBAAiB,cAAc;AACrC,IAAM,cAAc,WAAW;AAC/B,IAAM,cAAc,WAAW;AAC/B,IAAM,eAAe,YAAY;AACjC,IAAM,eAAe,YAAY;AACjC,IAAM,iBAAiB,WAAW;AAClC,IAAM,eAAe,YAAY;AACjC,IAAM,UAAU,MAAM,WAAW,EAAE,SAAS;AAC5C,IAAM,UAAU,MAAM,WAAW,EAAE,SAAS;AAC5C,IAAM,WAAW,MAAM,YAAY,EAAE,SAAS;AACvC,IAAM,SAAS;AAAA,EAClB,QAAS,CAAC,QAAQ,UAAU,OAAO,EAAE,GAAG,KAAK,QAAQ,KAAK,CAAC;AAAA,EAC3D,QAAS,CAAC,QAAQ,UAAU,OAAO,EAAE,GAAG,KAAK,QAAQ,KAAK,CAAC;AAAA,EAC3D,SAAU,CAAC,QAAQ,WAAW,OAAO;AAAA,IACjC,GAAG;AAAA,IACH,QAAQ;AAAA,EACZ,CAAC;AAAA,EACD,QAAS,CAAC,QAAQ,UAAU,OAAO,EAAE,GAAG,KAAK,QAAQ,KAAK,CAAC;AAAA,EAC3D,MAAO,CAAC,QAAQ,QAAQ,OAAO,EAAE,GAAG,KAAK,QAAQ,KAAK,CAAC;AAC3D;AAEO,IAAM,QAAQ;;;ACnmHrB,IAAM,qBAA+C;AAAA,EACnD,OAAO;AAAA,EACP,MAAM;AAAA,EACN,MAAM;AAAA,EACN,OAAO;AACT;AAEA,IAAM,SAAN,MAAa;AAAA,EACH;AAAA,EAER,cAAc;AAEZ,SAAK,WAAW,QAAQ,IAAI,qBAAqB,MAAM,UAAU;AAAA,EACnE;AAAA,EAEQ,UAAU,OAA0B;AAC1C,WAAO,mBAAmB,KAAK,KAAK,mBAAmB,KAAK,QAAQ;AAAA,EACtE;AAAA,EAEQ,MAAM,OAAiB,YAAoB,MAAmB;AACpE,QAAI,CAAC,KAAK,UAAU,KAAK,EAAG;AAE5B,UAAM,aAAY,oBAAI,KAAK,GAAE,YAAY;AACzC,UAAM,mBAAmB,IAAI,SAAS,MAAM,KAAK,KAAK,OAAO;AAE7D,QAAI,KAAK,SAAS,GAAG;AACnB,cAAQ,MAAM,kBAAkB,GAAG,IAAI;AAAA,IACzC,OAAO;AACL,cAAQ,MAAM,gBAAgB;AAAA,IAChC;AAAA,EACF;AAAA,EAEA,KAAK,YAAoB,MAAmB;AAC1C,SAAK,MAAM,QAAQ,SAAS,GAAG,IAAI;AAAA,EACrC;AAAA,EAEA,KAAK,YAAoB,MAAmB;AAC1C,SAAK,MAAM,QAAQ,SAAS,GAAG,IAAI;AAAA,EACrC;AAAA,EAEA,MAAM,YAAoB,MAAmB;AAC3C,SAAK,MAAM,SAAS,SAAS,GAAG,IAAI;AAAA,EACtC;AAAA,EAEA,MAAM,YAAoB,MAAmB;AAC3C,SAAK,MAAM,SAAS,SAAS,GAAG,IAAI;AAAA,EACtC;AAAA;AAAA;AAAA;AAAA,EAKA,cAAoB;AAClB,SAAK,WAAW;AAAA,EAClB;AACF;AAEO,IAAM,SAAS,IAAI,OAAO;;;ATvDjC,IAAM,mBAAmB,iBAAE,OAAO;AAAA,EAChC,QAAQ,iBAAE,OAAO,EAAE,QAAQ,EAAE;AAC/B,CAAC;AAED,IAAM,sBAAsB,iBAAE,OAAO;AAAA,EACnC,gBAAgB,iBAAE,OAAO,EAAE,QAAQ,GAAG;AAAA,EACtC,kBAAkB,iBAAE,QAAQ,EAAE,QAAQ,IAAI;AAAA,EAC1C,iBAAiB,iBAAE,QAAQ,EAAE,QAAQ,IAAI;AAAA,EACzC,qBAAqB,iBAAE,OAAO,EAAE,QAAQ,CAAC;AAAA,EACzC,oBAAoB,iBAAE,MAAM,iBAAE,OAAO,CAAC,EAAE,QAAQ,CAAC,UAAU,eAAe,UAAU,MAAM,CAAC;AAAA,EAC3F,mBAAmB,iBAAE,MAAM,iBAAE,OAAO,CAAC,EAAE,QAAQ;AAAA,IAC7C;AAAA,IAAO;AAAA,IAAO;AAAA,IAAO;AAAA,IAAQ;AAAA,IAAQ;AAAA,IAAO;AAAA,IAAO;AAAA,IACnD;AAAA,IAAM;AAAA,IAAQ;AAAA,IAAM;AAAA,IAAQ;AAAA,IAAQ;AAAA,IAAO;AAAA,IAAU;AAAA,IACrD;AAAA,IAAU;AAAA,IAAQ;AAAA,IAAO;AAAA,IAAO;AAAA,IAAQ;AAAA,IAAS;AAAA,IACjD;AAAA,IAAS;AAAA,IAAQ;AAAA,IAAS;AAAA,IAAS;AAAA,IAAS;AAAA,IAAQ;AAAA,IACpD;AAAA,IAAS;AAAA,IAAQ;AAAA,IAAS;AAAA,IAAQ;AAAA,IAAS;AAAA,IAAQ;AAAA,EACrD,CAAC;AACH,CAAC;AAED,IAAM,sBAAsB,iBAAE,OAAO;AAAA,EACnC,OAAO,iBAAE,OAAO,EAAE,QAAQ,MAAM;AAAA,EAChC,UAAU,iBAAE,OAAO,EAAE,SAAS;AAAA,EAC9B,eAAe,iBAAE,QAAQ,EAAE,QAAQ,IAAI;AAAA,EACvC,aAAa,iBAAE,OAAO,EAAE,QAAQ,GAAU;AAAA,EAC1C,aAAa,iBAAE,OAAO,EAAE,QAAQ,CAAC;AACnC,CAAC;AAED,IAAM,kBAAkB,iBAAE,OAAO;AAAA,EAC/B,MAAM,iBAAiB,QAAQ,CAAC,CAAC;AAAA,EACjC,SAAS,oBAAoB,QAAQ,CAAC,CAAC;AAAA,EACvC,SAAS,oBAAoB,QAAQ,CAAC,CAAC;AAAA,EACvC,gBAAgB,iBAAE,OAAO,EAAE,QAAQ,uBAAuB;AAAA,EAC1D,YAAY,iBAAE,QAAQ,EAAE,SAAS;AAAA;AAAA,EACjC,YAAY,iBAAE,OAAO,EAAE,QAAQ,mBAAmB;AAAA,EAClD,eAAe,iBAAE,OAAO,EAAE,QAAQ,OAAO;AAAA;AAAA;AAG3C,CAAC;AAOM,IAAM,gBAAN,MAAoB;AAAA,EACjB;AAAA,EACA;AAAA,EACA,SAA2B;AAAA,EAEnC,YAAY,WAAoB;AAC9B,QAAI,WAAW;AACb,WAAK,YAAY;AAAA,IACnB,OAAO;AACL,WAAK,gBAAY,sBAAK,mBAAQ,GAAG,aAAa;AAAA,IAChD;AAEA,SAAK,iBAAa,kBAAK,KAAK,WAAW,aAAa;AAEpD,QAAI,KAAC,sBAAW,KAAK,SAAS,GAAG;AAC/B,+BAAU,KAAK,WAAW,EAAE,WAAW,KAAK,CAAC;AAAA,IAC/C;AAAA,EACF;AAAA,EAEA,aAAwB;AACtB,QAAI,aAAkB,CAAC;AAEvB,YAAI,sBAAW,KAAK,UAAU,GAAG;AAC/B,UAAI;AACF,cAAM,kBAAc,wBAAa,KAAK,YAAY,MAAM;AACxD,qBAAa,KAAK,MAAM,WAAW;AAAA,MACrC,SAAS,OAAO;AACd,eAAO,KAAK,wCAAwC,KAAK,EAAE;AAAA,MAC7D;AAAA,IACF;AAEA,SAAK,SAAS,gBAAgB,MAAM,UAAU;AAC9C,WAAO,KAAK;AAAA,EACd;AAAA,EAEA,WAAW,QAAyB;AAClC,QAAI;AAGF,mCAAc,KAAK,YAAY,KAAK,UAAU,QAAQ,MAAM,CAAC,GAAG,EAAE,MAAM,IAAM,CAAC;AAE/E,+BAAU,KAAK,YAAY,GAAK;AAChC,WAAK,SAAS;AAAA,IAChB,SAAS,OAAO;AACd,aAAO,MAAM,wBAAwB,iBAAiB,QAAQ,MAAM,UAAU,KAAK,EAAE;AAAA,IACvF;AAAA,EACF;AAAA,EAEA,YAAuB;AACrB,QAAI,KAAK,WAAW,MAAM;AACxB,aAAO,KAAK,WAAW;AAAA,IACzB;AACA,WAAO,KAAK;AAAA,EACd;AAAA;AAAA,EAIA,eAAe,QAA6B;AAC1C,UAAM,SAAmB,CAAC;AAE1B,QAAI,CAAC,OAAO,KAAK,QAAQ;AACvB,aAAO,KAAK,iEAAiE;AAAA,IAC/E;AAEA,QAAI,CAAC,OAAO,gBAAgB;AAC1B,aAAO,KAAK,6BAA6B;AAAA,IAC3C;AAEA,WAAO;AAAA,EACT;AAAA;AAAA;AAAA;AAAA,EAKA,eAAwB;AACtB,UAAM,SAAS,KAAK,UAAU;AAC9B,WAAO,CAAC,CAAC,OAAO,KAAK;AAAA,EACvB;AACF;;;AU9HA,WAAsB;AACtB,kBAA6B;AAC7B,IAAAC,eAA8B;AAC9B,iBAA8B;;;ACI9B,aAAwB;AAGxB,IAAM,iBAAiB;AACvB,IAAM,YAAY;AAYlB,eAAe,gBAAgB,iBAAoD;AACjF,QAAM,YAAY,OAAO,KAAK,iBAAiB,QAAQ;AAGvD,QAAM,YAAY;AAClB,QAAM,YAAY;AAClB,QAAM,SAAS,YAAY,UAAU,SAAS,QAAQ,EAAE,MAAM,UAAU,EAAG,KAAK,IAAI,IAAI;AAExF,SAAc,uBAAgB;AAAA,IAC5B,KAAK;AAAA,IACL,QAAQ;AAAA,IACR,MAAM;AAAA,EACR,CAAC;AACH;AASA,eAAsB,eACpB,WACA,iBAC2B;AAE3B,QAAM,SAAgB,mBAAY,cAAc;AAGhD,QAAM,KAAY,mBAAY,SAAS;AAGvC,QAAM,SAAgB,sBAAe,eAAe,QAAQ,EAAE;AAC9D,QAAM,YAAY,OAAO,OAAO;AAAA,IAC9B,OAAO,OAAO,WAAW,MAAM;AAAA,IAC/B,OAAO,MAAM;AAAA,EACf,CAAC;AACD,QAAM,UAAU,OAAO,WAAW;AAGlC,QAAM,mBAAmB,OAAO,OAAO,CAAC,WAAW,OAAO,CAAC;AAG3D,QAAM,YAAY,MAAM,gBAAgB,eAAe;AACvD,QAAM,eAAsB;AAAA,IAC1B;AAAA,MACE,KAAK;AAAA,MACL,SAAgB,iBAAU;AAAA,MAC1B,UAAU;AAAA,IACZ;AAAA,IACA;AAAA,EACF;AAEA,SAAO;AAAA,IACL,kBAAkB,iBAAiB,SAAS,QAAQ;AAAA,IACpD,cAAc,aAAa,SAAS,QAAQ;AAAA,IAC5C,IAAI,GAAG,SAAS,QAAQ;AAAA,IACxB,SAAS;AAAA,EACX;AACF;AASA,eAAsB,qBACpB,MAMA,WAMC;AACD,QAAM,SAKF,CAAC;AAGL,MAAI,KAAK,gBAAgB,KAAK,aAAa,SAAS,GAAG;AACrD,UAAM,UAAU,MAAM,eAAe,KAAK,UAAU,KAAK,YAAY,GAAG,SAAS;AACjF,WAAO,wBAAwB,KAAK,UAAU,OAAO;AAAA,EACvD;AAGA,MAAI,KAAK,iBAAiB,KAAK,cAAc,SAAS,GAAG;AACvD,UAAM,UAAU,MAAM,eAAe,KAAK,UAAU,KAAK,aAAa,GAAG,SAAS;AAClF,WAAO,yBAAyB,KAAK,UAAU,OAAO;AAAA,EACxD;AAGA,MAAI,KAAK,eAAe,KAAK,YAAY,SAAS,GAAG;AACnD,UAAM,UAAU,MAAM,eAAe,KAAK,UAAU,KAAK,WAAW,GAAG,SAAS;AAChF,WAAO,uBAAuB,KAAK,UAAU,OAAO;AAAA,EACtD;AAGA,MAAI,KAAK,kBAAkB,KAAK,eAAe,SAAS,GAAG;AACzD,UAAM,UAAU,MAAM,eAAe,KAAK,UAAU,KAAK,cAAc,GAAG,SAAS;AACnF,WAAO,0BAA0B,KAAK,UAAU,OAAO;AAAA,EACzD;AAEA,SAAO;AACT;AAKA,eAAsB,iBAAiB,iBAA2C;AAChF,MAAI,CAAC,mBAAmB,gBAAgB,SAAS,KAAK;AACpD,WAAO;AAAA,EACT;AAEA,MAAI;AACF,UAAM,gBAAgB,eAAe;AACrC,WAAO;AAAA,EACT,SAAS,OAAO;AACd,WAAO,KAAK,8BAA8B,KAAK;AAC/C,WAAO;AAAA,EACT;AACF;;;ADnJA,IAAM,iBAAa,0BAAc,YAAY,GAAG;AAChD,IAAMC,iBAAY,sBAAQ,UAAU;AAE7B,IAAM,gBAAN,MAAoB;AAAA,EACjB;AAAA,EACA;AAAA,EACA;AAAA,EACA,eAKG;AAAA,EACH,oBAAoB,IAAI,KAAK;AAAA,EAErC,YACE,QACA,aAAqB,mBACrB,QACA;AACA,SAAK,SAAS;AAEd,UAAM,cACJ,WAAW,WAAW,WAAW,KAAK,WAAW,WAAW,WAAW;AACzE,QAAI,CAAC,WAAW,SAAS,GAAG,GAAG;AAC7B,WAAK,aAAa,cACd,GAAG,UAAU,WACb,GAAG,UAAU;AAAA,IACnB,OAAO;AACL,WAAK,aAAa;AAAA,IACpB;AAIA,UAAM,iBAAa,mBAAKA,YAAW,MAAM,wBAAwB;AAEjE,UAAM,oBAAgC,qBAAS,YAAY;AAAA,MACzD,UAAU;AAAA,MACV,OAAO;AAAA,MACP,OAAO;AAAA,MACP,UAAU;AAAA,MACV,QAAQ;AAAA,IACV,CAAC;AAED,UAAM,kBAAuB;AAAA,MAC3B;AAAA,IACF;AACA,UAAM,aAAa,gBAAgB;AAGnC,UAAM,oBACJ,KAAK,WAAW,WAAW,WAAW,KACtC,KAAK,WAAW,WAAW,WAAW;AACxC,UAAM,eAAe,UAAU,CAAC;AAEhC,UAAMC,eAAc,eACX,iBAAY,UAAU,IACtB,iBAAY,eAAe;AAEpC,SAAK,SAAS,IAAI,WAAW;AAAA,MAC3B,KAAK;AAAA,MACLA;AAAA,IACF;AAEA,WAAO;AAAA,MACL,4BAA4B,KAAK,UAAU,UAAU,YAAY;AAAA,IACnE;AAAA,EACF;AAAA,EAEQ,cAA6B;AACnC,UAAM,WAAW,IAAS,cAAS;AACnC,aAAS,IAAI,iBAAiB,UAAU,KAAK,MAAM,EAAE;AACrD,WAAO;AAAA,EACT;AAAA;AAAA;AAAA;AAAA;AAAA,EAMQ,YAAY,iBAAyB,IAAU;AACrD,UAAM,WAAW,oBAAI,KAAK;AAC1B,aAAS,WAAW,SAAS,WAAW,IAAI,cAAc;AAC1D,WAAO;AAAA,EACT;AAAA;AAAA;AAAA;AAAA,EAKQ,gBAAgB,OAAmC;AACzD,WAAO,MAAM,SAAc,YAAO;AAAA,EACpC;AAAA;AAAA;AAAA;AAAA,EAKQ,gBAAgB,OAA0B,WAA2B;AAC3E,YAAQ,MAAM,MAAM;AAAA,MAClB,KAAU,YAAO;AACf,eAAO;AAAA,MACT,KAAU,YAAO;AACf,eAAO;AAAA,MACT,KAAU,YAAO;AACf,eAAO;AAAA,MACT,KAAU,YAAO;AACf,eAAO;AAAA,MACT,KAAU,YAAO;AACf,eAAO;AAAA,MACT,KAAU,YAAO;AACf,eAAO;AAAA,MACT;AACE,eAAO,GAAG,SAAS,YAAY,MAAM,OAAO;AAAA,IAChD;AAAA,EACF;AAAA,EAEQ,4BAA4B,aAA2B;AAC7D,WAAO,YAAY,IAAI,CAAC,SAAS;AAAA,MAC/B,MAAM,IAAI,QAAQ;AAAA,MAClB,cAAc,IAAI,eAAe,IAAI,gBAAgB;AAAA,MACrD,YAAY,IAAI,aAAa,IAAI,cAAc;AAAA,MAC/C,YAAY,IAAI,aAAa,IAAI,cAAc;AAAA,MAC/C,UAAU,IAAI,YAAY;AAAA,MAC1B,YAAY,IAAI,aAAa,IAAI,cAAc;AAAA,MAC/C,mBAAmB,IAAI,oBAAoB,IAAI,qBAAqB;AAAA,MACpE,aACE,IAAI,cAAc,IAAI,gBAAe,oBAAI,KAAK,GAAE,YAAY;AAAA,IAChE,EAAE;AAAA,EACJ;AAAA,EAEA,MAAM,iBAA2C;AAC/C,WAAO,IAAI,QAAQ,CAACC,UAAS,WAAW;AACtC,WAAK,OAAO;AAAA,QACV,EAAE,SAAS,KAAK,OAAO;AAAA,QACvB,EAAE,UAAU,KAAK,YAAY,EAAE;AAAA,QAC/B,CAAC,OAAiC,aAAkB;AAClD,cAAI,OAAO;AAET,gBACE,KAAK,gBAAgB,KAAK,KAC1B,MAAM,SAAc,YAAO,iBAC3B;AACA,cAAAA,SAAQ,IAAI;AACZ;AAAA,YACF;AAEA;AAAA,cACE,IAAI,MAAM,KAAK,gBAAgB,OAAO,oBAAoB,CAAC;AAAA,YAC7D;AACA;AAAA,UACF;AAEA,UAAAA,SAAQ;AAAA,YACN,QAAQ,SAAS;AAAA,YACjB,OAAO,SAAS;AAAA,YAChB,kBAAkB,SAAS;AAAA,UAC7B,CAAC;AAAA,QACH;AAAA,MACF;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,MAAM,cAA8B;AAClC,WAAO,IAAI,QAAQ,CAACA,UAAS,WAAW;AACtC,WAAK,OAAO;AAAA,QACV,CAAC;AAAA,QACD,KAAK,YAAY;AAAA,QACjB,EAAE,UAAU,KAAK,YAAY,EAAE;AAAA,QAC/B,CAAC,OAAiC,aAAkB;AAClD,cAAI,OAAO;AAET,gBAAI,KAAK,gBAAgB,KAAK,GAAG;AAC/B,cAAAA,SAAQ,CAAC,CAAC;AACV;AAAA,YACF;AACA,mBAAO,IAAI,MAAM,2BAA2B,MAAM,OAAO,EAAE,CAAC;AAC5D;AAAA,UACF;AAEA,gBAAM,WAAW,SAAS,SAAS,IAAI,CAAC,OAAY;AAAA,YAClD,IAAI,EAAE;AAAA,YACN,MAAM,EAAE;AAAA,YACR,cAAc,EAAE;AAAA,YAChB,aAAa,EAAE;AAAA,YACf,SAAS,EAAE;AAAA,YACX,YAAY,EAAE;AAAA,YACd,YAAY,EAAE;AAAA,YACd,kBAAkB,EAAE;AAAA,YACpB,UAAU,EAAE;AAAA,YACZ,UAAU,EAAE;AAAA,YACZ,YAAY,EAAE;AAAA,YACd,kBAAkB,EAAE;AAAA,YACpB,mBAAmB,EAAE;AAAA,YACrB,gBAAgB,EAAE;AAAA,YAClB,uBAAuB,EAAE;AAAA,YACzB,qBAAqB,EAAE;AAAA;AAAA,YAEvB,iBAAiB,EAAE,mBAAmB;AAAA,UACxC,EAAE;AAEF,UAAAA,SAAQ,QAAQ;AAAA,QAClB;AAAA,MACF;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,MAAM,cAAc,aAMI;AACtB,WAAO,IAAI,QAAQ,CAACA,UAAS,WAAW;AACtC,WAAK,OAAO;AAAA,QACV;AAAA,QACA,KAAK,YAAY;AAAA,QACjB,EAAE,UAAU,KAAK,YAAY,EAAE;AAAA,QAC/B,CAAC,OAAiC,aAAkB;AAClD,cAAI,OAAO;AACT,mBAAO,IAAI,MAAM,6BAA6B,MAAM,OAAO,EAAE,CAAC;AAC9D;AAAA,UACF;AAEA,UAAAA,SAAQ;AAAA,YACN,IAAI,SAAS;AAAA,YACb,MAAM,SAAS;AAAA,YACf,cAAc,SAAS;AAAA,YACvB,GAAG;AAAA,UACL,CAAC;AAAA,QACH;AAAA,MACF;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEQ,qBACN,aACA,WACQ;AACR,UAAM,OAAO,GAAG,eAAe,EAAE,IAAI,aAAa,EAAE,GAAG,YAAY;AAEnE,QACE,KAAK,SAAS,KAAK,KACnB,KAAK,SAAS,KAAK,KACnB,KAAK,SAAS,QAAQ,GACtB;AACA,aAAO;AAAA,IACT;AACA,QAAI,KAAK,SAAS,UAAU,GAAG;AAC7B,aAAO;AAAA,IACT;AACA,QAAI,KAAK,SAAS,SAAS,KAAK,KAAK,SAAS,YAAY,GAAG;AAC3D,aAAO;AAAA,IACT;AACA,QAAI,KAAK,SAAS,OAAO,GAAG;AAC1B,aAAO;AAAA,IACT;AACA,QAAI,KAAK,SAAS,SAAS,GAAG;AAC5B,aAAO;AAAA,IACT;AAEA,WAAO;AAAA,EACT;AAAA,EAEA,MAAM,cAAc,aAAqD;AACvE,WAAO,IAAI,QAAQ,CAACA,UAAS,WAAW;AACtC,YAAM,qBAA6C,CAAC;AACpD,UAAI,YAAY,UAAU;AACxB,mBAAW,CAAC,KAAK,KAAK,KAAK,OAAO,QAAQ,YAAY,QAAQ,GAAG;AAC/D,cAAI,OAAO,UAAU,UAAU;AAC7B,+BAAmB,GAAG,IAAI;AAAA,UAC5B,WAAW,OAAO,UAAU,YAAY,OAAO,UAAU,WAAW;AAClE,+BAAmB,GAAG,IAAI,OAAO,KAAK;AAAA,UACxC,WAAW,UAAU,QAAQ,UAAU,QAAW;AAChD,+BAAmB,GAAG,IAAI,OAAO,KAAK;AAAA,UACxC,OAAO;AACL,+BAAmB,GAAG,IAAI,KAAK,UAAU,KAAK;AAAA,UAChD;AAAA,QACF;AAAA,MACF;AAEA,YAAM,2BACJ,YAAY,kBAAkB,YAAY,eAAe,SAAS,IAC9D,YAAY,eACT;AAAA,QACC,CAAC,aACC,SAAS,aACT,MAAM,QAAQ,SAAS,KAAK,KAC5B,SAAS,MAAM,SAAS;AAAA,MAC5B,EACC,IAAI,CAAC,cAAc;AAAA,QAClB,WAAW,SAAS;AAAA,QACpB,OAAO,SAAS,MAAM,IAAI,CAAC,UAAU;AAAA,UACnC,SAAS,KAAK;AAAA,UACd,QAAQ,KAAK;AAAA,UACb,aAAa,KAAK;AAAA,QACpB,EAAE;AAAA,MACJ,EAAE,IACJ,CAAC;AAEP,YAAM,cAAc,KAAK;AAAA,QACvB,YAAY;AAAA,QACZ,YAAY;AAAA,MACd;AAEA,YAAM,kBACJ,YAAY,gBAAgB,YAAY,aAAa,SAAS,IAC1D,KAAK,UAAU,YAAY,YAAY,IACvC;AAEN,YAAM,UAAU;AAAA,QACd,cAAc,YAAY;AAAA,QAC1B,cAAc,YAAY;AAAA,QAC1B,YAAY,YAAY;AAAA,QACxB,UAAU,YAAY;AAAA,QACtB,MAAM,YAAY;AAAA,QAClB,WAAW,YAAY;AAAA,QACvB,YAAY,YAAY;AAAA,QACxB,MAAM;AAAA,QACN,cAAc,YAAY,gBAAgB;AAAA,QAC1C,eAAe,YAAY,iBAAiB;AAAA,QAC5C,qBAAqB,YAAY,uBAAuB;AAAA,QACxD,mBAAmB,YAAY,qBAAqB;AAAA,QACpD,gBAAgB;AAAA,QAChB,iBACE,YAAY,mBAAmB,YAAY,gBAAgB,SAAS,IAChE,KAAK,4BAA4B,YAAY,eAAe,IAC5D,CAAC;AAAA,QACP,mBAAmB;AAAA,QACnB,cAAc,YAAY,gBAAgB,CAAC;AAAA,QAC3C,UAAU;AAAA,MACZ;AAEA,WAAK,OAAO;AAAA,QACV;AAAA,QACA,KAAK,YAAY;AAAA,QACjB,EAAE,UAAU,KAAK,YAAY,EAAE,EAAE;AAAA;AAAA,QACjC,CAAC,OAAiC,aAAkB;AAClD,cAAI,OAAO;AACT,mBAAO,IAAI,MAAM,6BAA6B,MAAM,OAAO,EAAE,CAAC;AAC9D;AAAA,UACF;AAEA,iBAAO,KAAK,oBAAoB,SAAS,UAAU,EAAE;AACrD,UAAAA,SAAQ,SAAS,UAAU;AAAA,QAC7B;AAAA,MACF;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,MAAM,cAAc,aAMjB;AAGD,QAAI,iBAAiB;AAErB,QAAI;AACF,YAAM,WAAW,MAAM,KAAK,YAAY;AACxC,YAAM,UAAU,SAAS;AAAA,QACvB,CAAC,MAAW,EAAE,SAAS,YAAY;AAAA,MACrC;AACA,UAAI,SAAS;AACX,yBAAiB,QAAQ,mBAAmB;AAC5C,eAAO,KAAK,4BAA4B,cAAc,EAAE;AAAA,MAC1D,OAAO;AAEL,eAAO;AAAA,UACL;AAAA,QACF;AAAA,MACF;AAAA,IACF,SAAS,OAAO;AACd,aAAO;AAAA,QACL;AAAA,QACA;AAAA,MACF;AAAA,IACF;AAGA,UAAM,gBACJ,mBAAmB,gBAAgB,mBAAmB;AACxD,QAAI,YAA2B;AAC/B,QAAI,aAAa;AACjB,QAAI,kBAAuB;AAE3B,QAAI,eAAe;AACjB,UAAI;AAEF,cAAM,cAAc,MAAM,KAAK,kBAAkB;AACjD,YACE,aAAa,aACZ,MAAM,iBAAiB,YAAY,SAAS,GAC7C;AACA,sBAAY,YAAY;AACxB,uBAAa,YAAY;AACzB,iBAAO;AAAA,YACL,2CAA2C,cAAc;AAAA,UAC3D;AAAA,QACF,OAAO;AAEL,gBAAM,UAAU,MAAM,KAAK,iBAAiB;AAC5C,cACE,SAAS,aACR,MAAM,iBAAiB,QAAQ,SAAS,GACzC;AACA,wBAAY,QAAQ;AACpB,yBAAa,QAAQ;AACrB,mBAAO;AAAA,cACL,yDAAyD,cAAc;AAAA,YACzE;AAAA,UACF;AAAA,QACF;AAGA,YAAI,CAAC,WAAW;AACd,gBAAM,IAAI;AAAA,YACR,wBAAwB,cAAc;AAAA,UACxC;AAAA,QACF;AAGA,0BAAkB,MAAM;AAAA,UACtB;AAAA,YACE,cAAc,YAAY;AAAA,YAC1B,eAAe,YAAY;AAAA,YAC3B,aAAa,YAAY;AAAA,YACzB,gBAAgB,YAAY;AAAA,UAC9B;AAAA,UACA;AAAA,QACF;AACA,eAAO,KAAK,qCAAqC;AAAA,MACnD,SAAS,OAAO;AAEd,cAAM,eACJ,iBAAiB,QAAQ,MAAM,UAAU,OAAO,KAAK;AACvD,eAAO;AAAA,UACL,sCAAsC,cAAc;AAAA,UACpD;AAAA,QACF;AACA,cAAM,IAAI;AAAA,UACR,2BAA2B,cAAc,qBAAqB,YAAY;AAAA,QAC5E;AAAA,MACF;AAAA,IACF,OAAO;AAEL,aAAO;AAAA,QACL;AAAA,MACF;AAAA,IACF;AAEA,WAAO,IAAI,QAAQ,CAACA,UAAS,WAAW;AACtC,YAAM,qBAA6C,CAAC;AACpD,UAAI,YAAY,UAAU;AACxB,mBAAW,CAAC,KAAK,KAAK,KAAK,OAAO,QAAQ,YAAY,QAAQ,GAAG;AAC/D,cAAI,OAAO,UAAU,UAAU;AAC7B,+BAAmB,GAAG,IAAI;AAAA,UAC5B,WAAW,OAAO,UAAU,YAAY,OAAO,UAAU,WAAW;AAClE,+BAAmB,GAAG,IAAI,OAAO,KAAK;AAAA,UACxC,WAAW,UAAU,QAAQ,UAAU,QAAW;AAChD,+BAAmB,GAAG,IAAI,OAAO,KAAK;AAAA,UACxC,OAAO;AACL,+BAAmB,GAAG,IAAI,KAAK,UAAU,KAAK;AAAA,UAChD;AAAA,QACF;AAAA,MACF;AAEA,YAAM,2BACJ,YAAY,kBAAkB,YAAY,eAAe,SAAS,IAC9D,YAAY,eACT;AAAA,QACC,CAAC,aACC,SAAS,aACT,MAAM,QAAQ,SAAS,KAAK,KAC5B,SAAS,MAAM,SAAS;AAAA,MAC5B,EACC,IAAI,CAAC,cAAc;AAAA,QAClB,WAAW,SAAS;AAAA,QACpB,OAAO,SAAS,MAAM,IAAI,CAAC,UAAU;AAAA,UACnC,SAAS,KAAK;AAAA,UACd,QAAQ,KAAK;AAAA,UACb,aAAa,KAAK;AAAA,QACpB,EAAE;AAAA,MACJ,EAAE,IACJ,CAAC;AAEP,YAAM,cAAc,KAAK;AAAA,QACvB,YAAY;AAAA,QACZ,YAAY;AAAA,MACd;AAEA,YAAM,kBACJ,YAAY,gBAAgB,YAAY,aAAa,SAAS,IAC1D,KAAK,UAAU,YAAY,YAAY,IACvC;AAGN,YAAM,cAAc,oBAAoB;AAExC,YAAM,UAAe;AAAA,QACnB,cAAc,YAAY;AAAA,QAC1B,cAAc,YAAY;AAAA,QAC1B,YAAY,YAAY;AAAA,QACxB,UAAU,YAAY;AAAA,QACtB,MAAM,YAAY;AAAA,QAClB,WAAW,YAAY;AAAA,QACvB,YAAY,YAAY;AAAA,QACxB,MAAM;AAAA,QACN,cAAc,YAAY,gBAAgB;AAAA,QAC1C,eAAe,YAAY,iBAAiB;AAAA,QAC5C,qBAAqB,YAAY,uBAAuB;AAAA,QACxD,mBAAmB,YAAY,qBAAqB;AAAA,QACpD,UAAU;AAAA,MACZ;AAEA,UAAI,YAAY,WAAW;AACzB,gBAAQ,YAAY,YAAY;AAAA,MAClC;AAEA,UAAI,aAAa;AAEf,gBAAQ,oBAAoB;AAC5B,gBAAQ,qBAAqB;AAC7B,gBAAQ,yBAAyB,gBAAgB;AACjD,gBAAQ,2BACN,gBAAgB;AAClB,gBAAQ,yBAAyB,gBAAgB;AACjD,gBAAQ,4BACN,gBAAgB;AAElB,gBAAQ,iBAAiB,CAAC;AAC1B,gBAAQ,kBAAkB,CAAC;AAC3B,gBAAQ,eAAe,CAAC;AACxB,gBAAQ,oBAAoB;AAAA,MAC9B,OAAO;AAEL,gBAAQ,oBAAoB;AAC5B,gBAAQ,qBAAqB;AAC7B,gBAAQ,iBAAiB;AACzB,gBAAQ,kBACN,YAAY,mBAAmB,YAAY,gBAAgB,SAAS,IAChE,KAAK,4BAA4B,YAAY,eAAe,IAC5D,CAAC;AACP,gBAAQ,oBAAoB;AAC5B,gBAAQ,gBAAgB,YAAY,gBAAgB,CAAC,GAAG;AAAA,UACtD,CAAC,QAAa;AACZ,kBAAM,gCAAwD,CAAC;AAC/D,gBAAI,IAAI,UAAU;AAChB,yBAAW,CAAC,KAAK,KAAK,KAAK,OAAO,QAAQ,IAAI,QAAQ,GAAG;AACvD,oBAAI,OAAO,UAAU,UAAU;AAC7B,gDAA8B,GAAG,IAAI;AAAA,gBACvC,WACE,OAAO,UAAU,YACjB,OAAO,UAAU,WACjB;AACA,gDAA8B,GAAG,IAAI,OAAO,KAAK;AAAA,gBACnD,WAAW,UAAU,QAAQ,UAAU,QAAW;AAChD,gDAA8B,GAAG,IAAI,OAAO,KAAK;AAAA,gBACnD,OAAO;AACL,gDAA8B,GAAG,IAAI,KAAK,UAAU,KAAK;AAAA,gBAC3D;AAAA,cACF;AAAA,YACF;AACA,mBAAO;AAAA,cACL,WAAW,IAAI;AAAA,cACf,kBAAkB,IAAI;AAAA,cACtB,SAAS,IAAI;AAAA,cACb,WAAW,IAAI;AAAA,cACf,UAAU;AAAA,cACV,cAAc,IAAI,gBAAgB;AAAA,cAClC,eAAe,IAAI,iBAAiB;AAAA,YACtC;AAAA,UACF;AAAA,QACF;AAAA,MACF;AAEA,WAAK,OAAO;AAAA,QACV;AAAA,QACA,KAAK,YAAY;AAAA,QACjB,EAAE,UAAU,KAAK,YAAY,EAAE,EAAE;AAAA;AAAA,QACjC,CAAC,OAAiC,aAAkB;AAClD,cAAI,OAAO;AACT,mBAAO,IAAI,MAAM,6BAA6B,MAAM,OAAO,EAAE,CAAC;AAC9D;AAAA,UACF;AAEA,gBAAM,SAAS,SAAS,cAAc,YAAY;AAClD,gBAAM,iBAAiB,cAAc,iBAAiB;AACtD,iBAAO;AAAA,YACL,WAAW,MAAM,KAAK,SAAS,UAAU,KAAK,SAAS,sBAAsB,iBAAiB,cAAc;AAAA,UAC9G;AACA,cAAI,SAAS,oBAAoB;AAC/B,mBAAO,KAAK,8CAA8C;AAAA,UAC5D;AACA,cAAI,SAAS,wBAAwB;AACnC,mBAAO;AAAA,cACL;AAAA,YACF;AAAA,UACF;AACA,UAAAA,SAAQ;AAAA,YACN,WAAW,SAAS;AAAA,YACpB,YAAY,SAAS;AAAA,YACrB,sBAAsB,SAAS,0BAA0B;AAAA,YACzD,mBAAmB,SAAS,sBAAsB;AAAA,YAClD,uBAAuB,SAAS,0BAA0B;AAAA,UAC5D,CAAC;AAAA,QACH;AAAA,MACF;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,MAAM,qBACJ,WACA,SACkB;AAClB,WAAO,IAAI,QAAQ,CAACA,UAAS,WAAW;AACtC,WAAK,OAAO;AAAA,QACV;AAAA,UACE,YAAY;AAAA,UACZ,UAAU;AAAA,QACZ;AAAA,QACA,KAAK,YAAY;AAAA,QACjB,EAAE,UAAU,KAAK,YAAY,EAAE;AAAA,QAC/B,CAAC,OAAiC,aAAkB;AAClD,cAAI,OAAO;AACT,mBAAO,IAAI,MAAM,6BAA6B,MAAM,OAAO,EAAE,CAAC;AAC9D;AAAA,UACF;AAEA,iBAAO,KAAK,6BAA6B,SAAS,EAAE;AACpD,UAAAA,SAAQ,IAAI;AAAA,QACd;AAAA,MACF;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,MAAM,qBACJ,WACA,cACA,YAAoB,KAC8C;AAClE,QAAI,iBAAiB;AACrB,QAAI,cAAc;AAElB,aAAS,IAAI,GAAG,IAAI,aAAa,QAAQ,KAAK,WAAW;AACvD,YAAM,QAAQ,aAAa,MAAM,GAAG,IAAI,SAAS;AAEjD,YAAM,SAAS,MAAM,IAAI;AAAA,QACvB,CAACA,UAAS,WAAW;AACnB,eAAK,OAAO;AAAA,YACV;AAAA,cACE,YAAY;AAAA,cACZ,cAAc,MAAM,IAAI,CAAC,QAAQ;AAC/B,sBAAM,qBAA6C,CAAC;AACpD,oBAAI,IAAI,UAAU;AAChB,6BAAW,CAAC,KAAK,KAAK,KAAK,OAAO,QAAQ,IAAI,QAAQ,GAAG;AACvD,wBAAI,OAAO,UAAU,UAAU;AAC7B,yCAAmB,GAAG,IAAI;AAAA,oBAC5B,WACE,OAAO,UAAU,YACjB,OAAO,UAAU,WACjB;AACA,yCAAmB,GAAG,IAAI,OAAO,KAAK;AAAA,oBACxC,WAAW,UAAU,QAAQ,UAAU,QAAW;AAChD,yCAAmB,GAAG,IAAI,OAAO,KAAK;AAAA,oBACxC,OAAO;AACL,yCAAmB,GAAG,IAAI,KAAK,UAAU,KAAK;AAAA,oBAChD;AAAA,kBACF;AAAA,gBACF;AAEA,uBAAO;AAAA,kBACL,WAAW,IAAI;AAAA,kBACf,kBAAkB,IAAI;AAAA,kBACtB,SAAS,IAAI;AAAA,kBACb,WAAW,IAAI;AAAA,kBACf,UAAU;AAAA,kBACV,cAAc,IAAI,gBAAgB;AAAA,kBAClC,eAAe,IAAI,iBAAiB;AAAA,gBACtC;AAAA,cACF,CAAC;AAAA,YACH;AAAA,YACA,KAAK,YAAY;AAAA,YACjB,EAAE,UAAU,KAAK,YAAY,EAAE,EAAE;AAAA;AAAA,YACjC,CAAC,OAAiC,aAAkB;AAClD,kBAAI,OAAO;AACT,uBAAO;AAAA,kBACL,SAAS,KAAK,MAAM,IAAI,SAAS,IAAI,CAAC,YAAY,MAAM,OAAO;AAAA,gBACjE;AAEA,gBAAAA,SAAQ,EAAE,WAAW,GAAG,QAAQ,MAAM,OAAO,CAAC;AAC9C;AAAA,cACF;AAEA,qBAAO;AAAA,gBACL,SAAS,KAAK,MAAM,IAAI,SAAS,IAAI,CAAC,KAAK,SAAS,SAAS;AAAA,cAC/D;AACA,cAAAA,SAAQ;AAAA,gBACN,WAAW,SAAS;AAAA,gBACpB,QAAQ,SAAS;AAAA,cACnB,CAAC;AAAA,YACH;AAAA,UACF;AAAA,QACF;AAAA,MACF;AAEA,wBAAkB,OAAO;AACzB,qBAAe,OAAO;AAAA,IACxB;AAEA,WAAO;AAAA,MACL,SAAS,gBAAgB;AAAA,MACzB,WAAW;AAAA,MACX,QAAQ;AAAA,IACV;AAAA,EACF;AAAA,EAEA,MAAM,mBACJ,WACA,cACkE;AAClE,WAAO,IAAI,QAAQ,CAACA,UAAS,WAAW;AACtC,YAAM,OAAO,KAAK,OAAO;AAAA,QACvB,KAAK,YAAY;AAAA,QACjB,CAAC,OAAiC,aAAkB;AAClD,cAAI,OAAO;AACT,mBAAO,MAAM,kBAAkB,MAAM,OAAO,EAAE;AAC9C,mBAAO,KAAK;AACZ;AAAA,UACF;AAEA,iBAAO,KAAK,oBAAoB,SAAS,SAAS,YAAY;AAC9D,UAAAA,SAAQ;AAAA,YACN,SAAS,SAAS;AAAA,YAClB,WAAW,SAAS;AAAA,YACpB,QAAQ,SAAS;AAAA,UACnB,CAAC;AAAA,QACH;AAAA,MACF;AAEA,iBAAW,eAAe,cAAc;AACtC,cAAM,qBAA6C,CAAC;AACpD,YAAI,YAAY,UAAU;AACxB,qBAAW,CAAC,KAAK,KAAK,KAAK,OAAO,QAAQ,YAAY,QAAQ,GAAG;AAC/D,gBAAI,OAAO,UAAU,UAAU;AAC7B,iCAAmB,GAAG,IAAI;AAAA,YAC5B,WACE,OAAO,UAAU,YACjB,OAAO,UAAU,WACjB;AACA,iCAAmB,GAAG,IAAI,OAAO,KAAK;AAAA,YACxC,WAAW,UAAU,QAAQ,UAAU,QAAW;AAChD,iCAAmB,GAAG,IAAI,OAAO,KAAK;AAAA,YACxC,OAAO;AACL,iCAAmB,GAAG,IAAI,KAAK,UAAU,KAAK;AAAA,YAChD;AAAA,UACF;AAAA,QACF;AAEA,aAAK,MAAM;AAAA,UACT,YAAY;AAAA,UACZ,aAAa;AAAA,YACX,WAAW,YAAY;AAAA,YACvB,kBAAkB,YAAY;AAAA,YAC9B,SAAS,YAAY;AAAA,YACrB,WAAW,YAAY;AAAA,YACvB,UAAU;AAAA,YACV,cAAc,YAAY,gBAAgB;AAAA,YAC1C,eAAe,YAAY,iBAAiB;AAAA,UAC9C;AAAA,QACF,CAAC;AAAA,MACH;AAEA,WAAK,IAAI;AAAA,IACX,CAAC;AAAA,EACH;AAAA,EAEA,MAAM,QAAuB;AAC3B,SAAK,OAAO,MAAM;AAAA,EACpB;AAAA;AAAA;AAAA;AAAA,EAKA,MAAM,qBAQI;AACR,WAAO,IAAI,QAAQ,CAACA,UAAS,WAAW;AACtC,WAAK,OAAO;AAAA,QACV,CAAC;AAAA,QACD,KAAK,YAAY;AAAA,QACjB,EAAE,UAAU,KAAK,YAAY,EAAE;AAAA,QAC/B,CAAC,OAAiC,aAAkB;AAClD,cAAI,OAAO;AAET,gBAAI,KAAK,gBAAgB,KAAK,GAAG;AAC/B,cAAAA,SAAQ,IAAI;AACZ;AAAA,YACF;AACA;AAAA,cACE,IAAI,MAAM,mCAAmC,MAAM,OAAO,EAAE;AAAA,YAC9D;AACA;AAAA,UACF;AAEA,UAAAA,SAAQ;AAAA,YACN,cAAc,SAAS;AAAA,YACvB,kBAAkB,SAAS;AAAA,YAC3B,kBAAkB,SAAS;AAAA,YAC3B,uBAAuB,SAAS,2BAA2B;AAAA,YAC3D,2BACE,SAAS,gCAAgC;AAAA,YAC3C,kCACE,SAAS,wCAAwC;AAAA,YACnD,iBAAiB,SAAS,qBAAqB;AAAA;AAAA,UACjD,CAAC;AAAA,QACH;AAAA,MACF;AAAA,IACF,CAAC;AAAA,EACH;AAAA;AAAA;AAAA;AAAA,EAKA,MAAM,iBACJ,WACA,kBACA,YACA,WACA,UAMC;AACD,WAAO,IAAI,QAAQ,CAACA,UAAS,WAAW;AACtC,WAAK,OAAO;AAAA,QACV;AAAA,UACE,YAAY;AAAA,UACZ,mBAAmB;AAAA,UACnB,aAAa;AAAA,UACb,YAAY;AAAA,UACZ;AAAA,QACF;AAAA,QACA,KAAK,YAAY;AAAA,QACjB,EAAE,UAAU,KAAK,YAAY,EAAE,EAAE;AAAA;AAAA,QACjC,CAAC,OAAiC,aAAkB;AAClD,cAAI,OAAO;AAGT,YAAAA,SAAQ,EAAE,SAAS,OAAO,OAAO,MAAM,QAAQ,CAAC;AAChD;AAAA,UACF;AAEA,cAAI,CAAC,SAAS,SAAS;AACrB,YAAAA,SAAQ,EAAE,SAAS,OAAO,OAAO,SAAS,MAAM,CAAC;AACjD;AAAA,UACF;AAEA,UAAAA,SAAQ;AAAA,YACN,SAAS;AAAA,YACT,aAAa,SAAS;AAAA,YACtB,WAAW,SAAS;AAAA,UACtB,CAAC;AAAA,QACH;AAAA,MACF;AAAA,IACF,CAAC;AAAA,EACH;AAAA;AAAA;AAAA;AAAA;AAAA,EAMA,MAAM,eACJ,WACA,MACA,SAIC;AACD,WAAO,IAAI,QAAQ,CAACA,UAAS,WAAW;AAEtC,YAAM,WAAW,OAAO,KAAK,SAAS,OAAO;AAE7C,WAAK,OAAO;AAAA,QACV;AAAA,UACE,YAAY;AAAA,UACZ;AAAA,UACA,WAAW;AAAA,QACb;AAAA,QACA,KAAK,YAAY;AAAA,QACjB,EAAE,UAAU,KAAK,YAAY,EAAE,EAAE;AAAA;AAAA,QACjC,CAAC,OAAiC,aAAkB;AAClD,cAAI,OAAO;AAGT,YAAAA,SAAQ,EAAE,SAAS,OAAO,OAAO,MAAM,QAAQ,CAAC;AAChD;AAAA,UACF;AAEA,cAAI,CAAC,SAAS,SAAS;AACrB,YAAAA,SAAQ,EAAE,SAAS,OAAO,OAAO,SAAS,MAAM,CAAC;AACjD;AAAA,UACF;AAEA,UAAAA,SAAQ,EAAE,SAAS,KAAK,CAAC;AAAA,QAC3B;AAAA,MACF;AAAA,IACF,CAAC;AAAA,EACH;AAAA;AAAA;AAAA;AAAA,EAKA,MAAM,uBACJ,WACA,OAiBQ;AACR,WAAO,IAAI,QAAQ,CAACA,UAAS,WAAW;AACtC,WAAK,OAAO;AAAA,QACV;AAAA,UACE,YAAY;AAAA,UACZ;AAAA,QACF;AAAA,QACA,KAAK,YAAY;AAAA,QACjB,EAAE,UAAU,KAAK,YAAY,EAAE;AAAA,QAC/B,CAAC,OAAiC,aAAkB;AAClD,cAAI,OAAO;AAET,gBAAI,KAAK,gBAAgB,KAAK,GAAG;AAC/B,cAAAA,SAAQ,IAAI;AACZ;AAAA,YACF;AACA;AAAA,cACE,IAAI,MAAM,uCAAuC,MAAM,OAAO,EAAE;AAAA,YAClE;AACA;AAAA,UACF;AAEA,gBAAM,gBAAgB,SAAS,gBAAgB,CAAC,GAAG;AAAA,YACjD,CAAC,SAAc;AAAA,cACb,IAAI,IAAI;AAAA,cACR,WAAW,IAAI;AAAA,cACf,WAAW,IAAI;AAAA,cACf,MAAM,IAAI;AAAA,cACV,OAAO,IAAI;AAAA,cACX,UAAU,IAAI;AAAA,cACd,WAAW,IAAI;AAAA,cACf,OAAO,IAAI,SAAS,CAAC;AAAA,cACrB,UAAU,IAAI,YAAY,CAAC;AAAA,cAC3B,OAAO,IAAI,SAAS,CAAC;AAAA,cACrB,UAAU,IAAI;AAAA,cACd,WAAW,IAAI;AAAA,YACjB;AAAA,UACF;AAEA,UAAAA,SAAQ;AAAA,YACN;AAAA,YACA,YAAY,SAAS,eAAe,aAAa;AAAA,UACnD,CAAC;AAAA,QACH;AAAA,MACF;AAAA,IACF,CAAC;AAAA,EACH;AAAA;AAAA;AAAA;AAAA;AAAA,EAMA,MAAM,mBAGI;AACR,WAAO,IAAI,QAAQ,CAACA,UAAS,WAAW;AACtC,WAAK,OAAO;AAAA,QACV,CAAC;AAAA,QACD,KAAK,YAAY;AAAA,QACjB,EAAE,UAAU,KAAK,YAAY,EAAE;AAAA,QAC/B,CAAC,OAAiC,aAAkB;AAClD,cAAI,OAAO;AAET,gBAAI,KAAK,gBAAgB,KAAK,GAAG;AAC/B,cAAAA,SAAQ,IAAI;AACZ;AAAA,YACF;AACA;AAAA,cACE,IAAI,MAAM,KAAK,gBAAgB,OAAO,qBAAqB,CAAC;AAAA,YAC9D;AACA;AAAA,UACF;AAEA,UAAAA,SAAQ;AAAA,YACN,WAAW,SAAS;AAAA,YACpB,YAAY,SAAS,eAAe;AAAA,UACtC,CAAC;AAAA,QACH;AAAA,MACF;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEQ,sBAA+B;AACrC,QAAI,CAAC,KAAK,cAAc;AACtB,aAAO;AAAA,IACT;AAEA,WAAO,KAAK,IAAI,IAAI,KAAK,aAAa,YAAY,KAAK;AAAA,EACzD;AAAA,EAEA,MAAM,gBAEJ;AACA,WAAO,IAAI,QAAQ,CAACA,UAAS,WAAW;AACtC,WAAK,OAAO;AAAA,QACV,CAAC;AAAA,QACD,KAAK,YAAY;AAAA,QACjB,EAAE,UAAU,KAAK,YAAY,EAAE;AAAA,QAC/B,CAAC,OAAiC,aAAkB;AAClD,cAAI,OAAO;AACT,gBAAI,KAAK,gBAAgB,KAAK,GAAG;AAC/B,cAAAA,SAAQ,CAAC,CAAC;AACV;AAAA,YACF;AACA,mBAAO,IAAI,MAAM,KAAK,gBAAgB,OAAO,iBAAiB,CAAC,CAAC;AAChE;AAAA,UACF;AAEA,gBAAM,SAAS,SAAS,SAAS,CAAC,GAAG,IAAI,CAAC,UAAe;AAAA,YACvD,IAAI,KAAK;AAAA,YACT,MAAM,KAAK;AAAA,YACX,MAAM,KAAK;AAAA,UACb,EAAE;AAEF,UAAAA,SAAQ,KAAK;AAAA,QACf;AAAA,MACF;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,MAAM,iBAAiB,QAGb;AACR,WAAO,IAAI,QAAQ,CAACA,UAAS,WAAW;AACtC,WAAK,OAAO;AAAA,QACV,EAAE,SAAS,OAAO;AAAA,QAClB,KAAK,YAAY;AAAA,QACjB,EAAE,UAAU,KAAK,YAAY,EAAE;AAAA,QAC/B,CAAC,OAAiC,aAAkB;AAClD,cAAI,OAAO;AACT,gBAAI,KAAK,gBAAgB,KAAK,GAAG;AAC/B,cAAAA,SAAQ,IAAI;AACZ;AAAA,YACF;AACA;AAAA,cACE,IAAI,MAAM,KAAK,gBAAgB,OAAO,qBAAqB,CAAC;AAAA,YAC9D;AACA;AAAA,UACF;AAEA,UAAAA,SAAQ;AAAA,YACN,WAAW,SAAS;AAAA,YACpB,YAAY,SAAS,eAAe;AAAA,UACtC,CAAC;AAAA,QACH;AAAA,MACF;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,MAAc,oBAIJ;AACR,QAAI,KAAK,oBAAoB,GAAG;AAC9B,aAAO,KAAK;AAAA,IACd;AAEA,QAAI;AACF,YAAM,QAAQ,MAAM,KAAK,cAAc;AACvC,UAAI,CAAC,MAAM,QAAQ;AACjB,eAAO;AAAA,MACT;AAEA,UAAI,MAAM,SAAS,GAAG;AACpB,eAAO;AAAA,UACL,4BAA4B,MAAM,MAAM;AAAA,QAC1C;AAAA,MACF;AAEA,YAAM,SAAS,MAAM,CAAC,EAAE;AACxB,YAAM,UAAU,MAAM,KAAK,iBAAiB,MAAM;AAClD,UAAI,CAAC,SAAS,WAAW;AACvB,eAAO;AAAA,MACT;AAEA,WAAK,eAAe;AAAA,QAClB;AAAA,QACA,WAAW,QAAQ;AAAA,QACnB,YAAY,QAAQ;AAAA,QACpB,WAAW,KAAK,IAAI;AAAA,MACtB;AAEA,aAAO,KAAK;AAAA,IACd,SAAS,OAAO;AACd,aAAO,KAAK,0CAA0C,KAAK;AAC3D,aAAO;AAAA,IACT;AAAA,EACF;AAAA;AAAA;AAAA;AAAA;AAAA,EAMA,MAAM,cACJ,QACA,WACA,OAgBA;AACA,WAAO,IAAI,QAAQ,CAACA,UAAS,WAAW;AACtC,YAAM,UAAe,EAAE,SAAS,OAAO;AACvC,UAAI,UAAW,SAAQ,aAAa;AACpC,UAAI,MAAO,SAAQ,QAAQ;AAE3B,WAAK,OAAO;AAAA,QACV;AAAA,QACA,KAAK,YAAY;AAAA,QACjB,EAAE,UAAU,KAAK,YAAY,EAAE;AAAA,QAC/B,CAAC,OAAiC,aAAkB;AAClD,cAAI,OAAO;AACT,gBAAI,KAAK,gBAAgB,KAAK,GAAG;AAC/B,cAAAA,SAAQ,CAAC,CAAC;AACV;AAAA,YACF;AACA,mBAAO,IAAI,MAAM,KAAK,gBAAgB,OAAO,iBAAiB,CAAC,CAAC;AAChE;AAAA,UACF;AAEA,gBAAM,UAAU,SAAS,UAAU,CAAC,GAAG,IAAI,CAAC,OAAY;AAAA,YACtD,IAAI,EAAE;AAAA,YACN,MAAM,EAAE;AAAA,YACR,OAAO,EAAE;AAAA,YACT,SAAS,EAAE,WAAW;AAAA,YACtB,SAAS,EAAE;AAAA,YACX,UAAU,EAAE;AAAA,YACZ,MAAM,EAAE,QAAQ,CAAC;AAAA,YACjB,OAAO,EAAE;AAAA,YACT,SAAS,EAAE,WAAW;AAAA,YACtB,iBAAiB,EAAE,qBAAqB;AAAA,YACxC,WAAW,EAAE,cAAc;AAAA,YAC3B,OACE,EAAE,SAAS,OAAO,KAAK,EAAE,KAAK,EAAE,SAAS,IAAI,EAAE,QAAQ;AAAA,UAC3D,EAAE;AAEF,UAAAA,SAAQ,MAAM;AAAA,QAChB;AAAA,MACF;AAAA,IACF,CAAC;AAAA,EACH;AAAA;AAAA;AAAA;AAAA;AAAA,EAMA,MAAM,gBAAgB,OAUyB;AAC7C,WAAO,IAAI,QAAQ,CAACA,UAAS,WAAW;AACtC,YAAM,UAAe;AAAA,QACnB,SAAS,MAAM;AAAA,QACf,OAAO,MAAM;AAAA,QACb,SAAS,MAAM;AAAA,MACjB;AACA,UAAI,MAAM,UAAW,SAAQ,aAAa,MAAM;AAChD,UAAI,MAAM,QAAS,SAAQ,UAAU,MAAM;AAC3C,UAAI,MAAM,SAAU,SAAQ,WAAW,MAAM;AAC7C,UAAI,MAAM,QAAQ,MAAM,KAAK,SAAS,EAAG,SAAQ,OAAO,MAAM;AAC9D,UAAI,MAAM,MAAO,SAAQ,QAAQ,MAAM;AACvC,UAAI,MAAM,SAAS,OAAO,KAAK,MAAM,KAAK,EAAE,SAAS;AACnD,gBAAQ,QAAQ,MAAM;AAExB,WAAK,OAAO;AAAA,QACV;AAAA,QACA,KAAK,YAAY;AAAA,QACjB,EAAE,UAAU,KAAK,YAAY,EAAE;AAAA,QAC/B,CAAC,OAAiC,aAAkB;AAClD,cAAI,OAAO;AACT,mBAAO,IAAI,MAAM,KAAK,gBAAgB,OAAO,mBAAmB,CAAC,CAAC;AAClE;AAAA,UACF;AAEA,UAAAA,SAAQ;AAAA,YACN,SAAS,SAAS;AAAA,YAClB,MAAM,SAAS;AAAA,UACjB,CAAC;AAAA,QACH;AAAA,MACF;AAAA,IACF,CAAC;AAAA,EACH;AAAA;AAAA;AAAA;AAAA;AAAA,EAMA,MAAM,kBAKI;AACR,WAAO,IAAI,QAAQ,CAACA,UAAS,WAAW;AACtC,WAAK,OAAO;AAAA,QACV,CAAC;AAAA,QACD,KAAK,YAAY;AAAA,QACjB,EAAE,UAAU,KAAK,YAAY,EAAE;AAAA,QAC/B,CAAC,OAAiC,aAAkB;AAClD,cAAI,OAAO;AAET,gBAAI,KAAK,gBAAgB,KAAK,GAAG;AAC/B,cAAAA,SAAQ,IAAI;AACZ;AAAA,YACF;AACA,mBAAO,IAAI,MAAM,gCAAgC,MAAM,OAAO,EAAE,CAAC;AACjE;AAAA,UACF;AAEA,UAAAA,SAAQ;AAAA,YACN,cAAc,SAAS,iBAAiB;AAAA,YACxC,OAAO,SAAS,SAAS;AAAA,YACzB,WAAW,SAAS,aAAa;AAAA,YACjC,kBAAkB,SAAS,qBAAqB;AAAA,UAClD,CAAC;AAAA,QACH;AAAA,MACF;AAAA,IACF,CAAC;AAAA,EACH;AACF;AAoBO,SAAS,uBAAuB,OAAwC;AAC7E,QAAM,UAAU,MAAM,WAAW;AACjC,QAAM,QAAQ,QAAQ;AAAA,IACpB;AAAA,EACF;AACA,MAAI,OAAO;AACT,WAAO;AAAA,MACL,MAAM;AAAA,MACN,cAAc,SAAS,MAAM,CAAC,GAAG,EAAE;AAAA,MACnC,OAAO,SAAS,MAAM,CAAC,GAAG,EAAE;AAAA,MAC5B,YAAY,MAAM,CAAC;AAAA,IACrB;AAAA,EACF;AACA,SAAO;AACT;AAyBO,SAAS,qBAAqB,OAAsC;AACzE,QAAM,UAAU,MAAM,WAAW;AACjC,MACE,QAAQ,SAAS,eAAe,KAChC,QAAQ,SAAS,qBAAqB,GACtC;AACA,WAAO;AAAA,MACL,MAAM;AAAA,MACN,SACE;AAAA,IACJ;AAAA,EACF;AACA,SAAO;AACT;;;AEp1CA,IAAAC,aAAwB;AAMjB,IAAM,mBAAN,MAAuB;AAAA,EACpB;AAAA,EACA;AAAA,EAER,YAAY,SAAkE;AAC5E,SAAK,cAAc,SAAS;AAC5B,SAAK,aAAa,SAAS;AAAA,EAC7B;AAAA,EAEA,cAAc,QAA6B;AACzC,SAAK,aAAa;AAAA,EACpB;AAAA,EAEA,eAAe,MAAsB;AACnC,SAAK,cAAc;AAAA,EACrB;AAAA;AAAA;AAAA;AAAA,EAKQ,yBAAyB,gBAG9B;AACD,UAAM,SAA2D,CAAC;AAElE,QAAI,CAAC,MAAM,QAAQ,cAAc,GAAG;AAClC,aAAO;AAAA,IACT;AAEA,eAAW,QAAQ,gBAAgB;AACjC,UACE,KAAK,SAAS,WACd,KAAK,QAAQ,SAAS,YACtB,KAAK,QAAQ,QACb,KAAK,QAAQ,YACb;AACA,eAAO,KAAK;AAAA,UACV,YAAY,KAAK,OAAO;AAAA,UACxB,WAAW,KAAK,OAAO;AAAA,QACzB,CAAC;AAAA,MACH;AAAA,IACF;AAEA,WAAO;AAAA,EACT;AAAA;AAAA;AAAA;AAAA;AAAA,EAMQ,4BAA4B,gBAAuB,YAA2B;AACpF,QAAI,eAAe;AACnB,WAAO,eAAe,IAAI,CAAC,SAAS;AAClC,UACE,KAAK,SAAS,WACd,KAAK,QAAQ,SAAS,UACtB;AACA,eAAO;AAAA,UACL,MAAM;AAAA,UACN,kBAAkB;AAAA,QACpB;AAAA,MACF;AACA,aAAO;AAAA,IACT,CAAC;AAAA,EACH;AAAA,EAEA,MAAM,sBAAsB,UAAwC;AAClE,UAAM,KAAK,MAAM,OAAO,aAAa;AACrC,QAAI,KAAiD;AAErD,QAAI;AAEF,WAAK,MAAM,GAAG,KAAK,UAAU,GAAG;AAChC,YAAM,SAAS,OAAO,MAAM,KAAK;AACjC,YAAM,EAAE,UAAU,IAAI,MAAM,GAAG,KAAK,QAAQ,GAAG,OAAO,CAAC;AAEvD,UAAI,cAAc,EAAG,QAAO;AAE5B,YAAM,UAAU,OAAO,SAAS,SAAS,GAAG,SAAS;AAGrD,YAAM,QAAQ,QAAQ,MAAM,6BAA6B;AACzD,UAAI,OAAO;AACT,eAAO,IAAI,KAAK,MAAM,CAAC,CAAC;AAAA,MAC1B;AAEA,aAAO;AAAA,IACT,QAAQ;AACN,aAAO;AAAA,IACT,UAAE;AAEA,UAAI,IAAI;AACN,cAAM,GAAG,MAAM,EAAE,MAAM,MAAM;AAAA,QAAC,CAAC;AAAA,MACjC;AAAA,IACF;AAAA,EACF;AAAA,EAEA,MAAM,sBAAsB,UAA0C;AACpE,UAAM,KAAK,MAAM,OAAO,aAAa;AACrC,QAAI,KAAiD;AAErD,QAAI;AAEF,WAAK,MAAM,GAAG,KAAK,UAAU,GAAG;AAChC,YAAM,SAAS,OAAO,MAAM,KAAK;AACjC,YAAM,EAAE,UAAU,IAAI,MAAM,GAAG,KAAK,QAAQ,GAAG,OAAO,CAAC;AAEvD,UAAI,cAAc,EAAG,QAAO;AAE5B,YAAM,UAAU,OAAO,SAAS,SAAS,GAAG,SAAS;AAGrD,YAAM,QAAQ,QAAQ,MAAM,qCAAqC;AACjE,UAAI,OAAO;AACT,eAAO,MAAM,CAAC;AAAA,MAChB;AAEA,aAAO;AAAA,IACT,QAAQ;AACN,aAAO;AAAA,IACT,UAAE;AAEA,UAAI,IAAI;AACN,cAAM,GAAG,MAAM,EAAE,MAAM,MAAM;AAAA,QAAC,CAAC;AAAA,MACjC;AAAA,IACF;AAAA,EACF;AAAA,EAEQ,4BAA4B,OAA2B;AAC7D,UAAM,YAAY,oBAAI,IAAY;AAElC,eAAW,QAAQ,OAAO;AACxB,UAAI;AACF,cAAM,QAAQ,KAAK,MAAM,IAAI;AAE7B,YAAI,MAAM,eAAe,UAAU;AACjC,gBAAM,WAAW,MAAM,cAAc,SAAS,YAAY;AAC1D,eAAK,wBAAwB,UAAU,SAAS;AAAA,QAClD;AAEA,YAAI,MAAM,YAAY,WAAW;AAC/B,gBAAM,WAAW,MAAM,WAAW,UAAU,YAAY;AACxD,eAAK,wBAAwB,UAAU,SAAS;AAAA,QAClD;AAEA,YAAI,MAAM,SAAS,WAAW,MAAM,QAAQ,MAAM,QAAQ,OAAO,GAAG;AAClE,qBAAW,QAAQ,MAAM,QAAQ,SAAS;AACxC,gBAAI,KAAK,SAAS,cAAc,KAAK,OAAO,WAAW;AACrD,oBAAM,WAAW,KAAK,MAAM,UAAU,YAAY;AAClD,mBAAK,wBAAwB,UAAU,SAAS;AAAA,YAClD;AAAA,UACF;AAAA,QACF;AAAA,MACF,QAAQ;AACN;AAAA,MACF;AAAA,IACF;AAEA,WAAO,MAAM,KAAK,SAAS;AAAA,EAC7B;AAAA,EAEQ,wBAAwB,UAAkB,WAA8B;AAC9E,QAAI,SAAS,SAAS,KAAK,KAAK,SAAS,SAAS,MAAM,EAAG,WAAU,IAAI,YAAY;AAAA,aAC5E,SAAS,SAAS,KAAK,KAAK,SAAS,SAAS,MAAM,EAAG,WAAU,IAAI,YAAY;AAAA,aACjF,SAAS,SAAS,KAAK,EAAG,WAAU,IAAI,QAAQ;AAAA,aAChD,SAAS,SAAS,OAAO,EAAG,WAAU,IAAI,MAAM;AAAA,aAChD,SAAS,SAAS,MAAM,EAAG,WAAU,IAAI,UAAU;AAAA,aACnD,SAAS,SAAS,KAAK,EAAG,WAAU,IAAI,IAAI;AAAA,aAC5C,SAAS,SAAS,KAAK,EAAG,WAAU,IAAI,MAAM;AAAA,aAC9C,SAAS,SAAS,IAAI,KAAK,CAAC,SAAS,SAAS,KAAK,EAAG,WAAU,IAAI,GAAG;AAAA,aACvE,SAAS,SAAS,MAAM,KAAK,SAAS,SAAS,KAAK,KAAK,SAAS,SAAS,MAAM,EAAG,WAAU,IAAI,KAAK;AAAA,aACvG,SAAS,SAAS,QAAQ,EAAG,WAAU,IAAI,OAAO;AAAA,aAClD,SAAS,SAAS,KAAK,KAAK,SAAS,SAAS,MAAM,EAAG,WAAU,IAAI,QAAQ;AAAA,aAC7E,SAAS,SAAS,MAAM,EAAG,WAAU,IAAI,KAAK;AAAA,aAC9C,SAAS,SAAS,KAAK,EAAG,WAAU,IAAI,MAAM;AAAA,aAC9C,SAAS,SAAS,KAAK,KAAK,SAAS,SAAS,OAAO,EAAG,WAAU,IAAI,OAAO;AAAA,aAC7E,SAAS,SAAS,MAAM,EAAG,WAAU,IAAI,KAAK;AAAA,aAC9C,SAAS,SAAS,OAAO,KAAK,SAAS,SAAS,MAAM,EAAG,WAAU,IAAI,MAAM;AAAA,aAC7E,SAAS,SAAS,MAAM,KAAK,SAAS,SAAS,OAAO,KAAK,SAAS,SAAS,OAAO,EAAG,WAAU,IAAI,KAAK;AAAA,EACrH;AAAA,EAEQ,oBACN,cACA,OAC6C;AAC7C,UAAM,iBAA2B,CAAC;AAClC,aAAS,IAAI,GAAG,IAAI,aAAa,QAAQ,KAAK;AAC5C,UAAI,aAAa,CAAC,EAAE,qBAAqB,UAAU;AACjD,uBAAe,KAAK,CAAC;AAAA,MACvB;AAAA,IACF;AAEA,QAAI,eAAe,WAAW,KAAK,SAAS,eAAe,QAAQ;AACjE,aAAO,EAAE,cAAc,YAAY,EAAE;AAAA,IACvC;AAEA,UAAM,YAAY,eAAe,eAAe,SAAS,KAAK;AAE9D,WAAO;AAAA,MACL,cAAc,aAAa,MAAM,SAAS;AAAA,MAC1C,YAAY;AAAA,IACd;AAAA,EACF;AAAA,EAEA,MAAM,oBAAoB,UAAkB,eAA6D;AACvG,QAAI;AACF,YAAM,KAAK,MAAM,OAAO,aAAa;AACrC,YAAM,OAAO,MAAM,OAAO,MAAM;AAChC,YAAM,KAAK,MAAM,OAAO,IAAI;AAG5B,YAAM,gBAAgB,MAAM,OAAO;AACnC,YAAM,QAAQ,MAAM,GAAG,KAAK,QAAQ;AACpC,UAAI,MAAM,OAAO,eAAe;AAC9B,eAAO,MAAM,8BAA8B,MAAM,IAAI,eAAe,aAAa,cAAc;AAC/F,eAAO;AAAA,MACT;AAEA,YAAM,UAAU,MAAM,GAAG,SAAS,UAAU,OAAO;AACnD,YAAM,QAAQ,QAAQ,MAAM,IAAI,EAAE,OAAO,CAAC,SAAS,KAAK,KAAK,CAAC;AAE9D,UAAI,MAAM,WAAW,GAAG;AACtB,eAAO;AAAA,MACT;AAEA,YAAM,eAAsB,CAAC;AAC7B,YAAM,cAAc,oBAAI,IAAiB;AACzC,UAAI,mBAAmB;AACvB,UAAI,oBAAoB;AACxB,UAAI,yBAAyB;AAC7B,UAAI,uBAAuB;AAC3B,UAAI,YAAY;AAChB,UAAI,YAAY;AAChB,UAAI,UAAU;AACd,UAAI,cAAc;AAClB,UAAI,YAAY;AAEhB,UAAI,aAAa;AACjB,UAAI,cAAc;AAClB,UAAI,qBAAqB;AAEzB,YAAM,aAAqC,CAAC;AAC5C,UAAI,YAA2B;AAC/B,UAAI,gBAAgB;AAEpB,YAAM,qBAA6B,CAAC;AACpC,YAAM,QAAkD,CAAC;AACzD,YAAM,gBAA0D,CAAC;AACjE,YAAM,iBAAuC,CAAC;AAG9C,YAAM,UAAU,oBAAI,IAMjB;AAEH,YAAM,qBAAqB,oBAAI,IAA6F;AAG5H,UAAI;AACJ,UAAI;AACJ,UAAI;AACJ,UAAI;AAKJ,UAAI;AACJ,iBAAW,QAAQ,OAAO;AACxB,YAAI;AACF,gBAAM,QAAQ,KAAK,MAAM,IAAI;AAC7B,cAAI,MAAM,QAAQ,MAAM,SAAS,eAAe;AAC9C,4BAAgB,MAAM;AACtB,2BAAe;AACf;AAAA,UACF;AAAA,QACF,QAAQ;AACN;AAAA,QACF;AAAA,MACF;AAKA,UAAI,CAAC,iBAAiB;AACpB,cAAM,kBAAkB;AACxB,mBAAW,QAAQ,OAAO;AACxB,cAAI;AACF,kBAAM,QAAQ,KAAK,MAAM,IAAI;AAC7B,kBAAM,aAAa,KAAK,UAAU,KAAK;AACvC,kBAAM,UAAU,CAAC,GAAG,WAAW,SAAS,eAAe,CAAC;AAExD,uBAAW,SAAS,SAAS;AAC3B,oBAAM,gBAAgB,MAAM,CAAC;AAC7B,kBAAI,iBAAiB,kBAAkB,cAAc;AAEnD,+BAAe;AACf;AAAA,cACF;AAAA,YACF;AACA,gBAAI,aAAc;AAAA,UACpB,QAAQ;AACN;AAAA,UACF;AAAA,QACF;AAAA,MACF;AAGA,UAAI,gBAAgB,CAAC,iBAAiB;AACpC,cAAM,gBAAgB,KAAK,KAAK,GAAG,QAAQ,GAAG,WAAW,SAAS,GAAG,YAAY,KAAK;AACtF,YAAI;AACF,gBAAM,YAAY,MAAM,GAAG,KAAK,aAAa;AAC7C,yBAAe;AACf,4BAAkB,MAAM,GAAG,SAAS,eAAe,OAAO;AAC1D,+BAAqB,UAAU,MAAM,YAAY;AACjD,iBAAO,KAAK,qBAAqB,aAAa,WAAW,YAAY,GAAG;AAAA,QAC1E,QAAQ;AACN,iBAAO,MAAM,yBAAyB,aAAa,WAAW,YAAY,GAAG;AAAA,QAC/E;AAAA,MACF;AAEA,iBAAW,QAAQ,OAAO;AACxB,YAAI;AACF,gBAAM,QAAQ,KAAK,MAAM,IAAI;AAE7B,cAAI,CAAC,aAAa,MAAM,WAAW;AACjC,wBAAY,MAAM;AAClB,0BAAc,MAAM,OAAO,QAAQ,IAAI;AACvC,wBAAY,MAAM,aAAa;AAC/B,wBAAY,MAAM;AAClB,yBAAa,MAAM,OAAO,QAAQ,IAAI;AACtC,gBAAI,MAAM,KAAM,eAAc,MAAM;AAAA,UACtC;AAEA,cAAI,MAAM,WAAW;AACnB,sBAAU,MAAM;AAAA,UAClB;AAEA,cAAI,MAAM,SAAS,UAAU,MAAM,SAAS,SAAS,QAAQ;AAE3D,gBAAI,MAAM,QAAQ,MAAM,QAAQ,OAAO,KAAK,KAAK,cAAc,WAAW;AACxE,oBAAM,SAAS,KAAK,yBAAyB,MAAM,QAAQ,OAAO;AAElE,kBAAI,OAAO,SAAS,GAAG;AACrB,uBAAO,KAAK,SAAS,OAAO,MAAM,qDAAqD;AAGvF,sBAAM,uBAAuB,eAAe;AAE5C,yBAAS,IAAI,GAAG,IAAI,OAAO,QAAQ,KAAK;AACtC,wBAAM,QAAQ,OAAO,CAAC;AACtB,wBAAM,0BAA0B,aAAa;AAE7C,sBAAI;AACF,0BAAM,SAAS,MAAM,KAAK,WAAW;AAAA,sBACnC;AAAA,sBACA;AAAA,sBACA,MAAM;AAAA,sBACN,MAAM;AAAA,oBACR;AAEA,wBAAI,OAAO,WAAW,OAAO,eAAe,OAAO,WAAW;AAC5D,qCAAe,KAAK;AAAA,wBAClB,MAAM;AAAA,wBACN,aAAa,OAAO;AAAA,wBACpB,WAAW,OAAO;AAAA,wBAClB,WAAW,MAAM;AAAA,wBACjB,UAAU,OAAO,YAAY,MAAM,GAAG,EAAE,IAAI,KAAK;AAAA,wBACjD,WAAW,KAAK,KAAK,MAAM,WAAW,SAAS,IAAI;AAAA;AAAA,wBACnD,kBAAkB;AAAA,wBAClB,aAAY,oBAAI,KAAK,GAAE,YAAY;AAAA,sBACrC,CAAC;AACD,6BAAO,KAAK,SAAS,IAAI,CAAC,IAAI,OAAO,MAAM,cAAc,OAAO,WAAW,EAAE;AAAA,oBAC/E,OAAO;AACL,6BAAO,KAAK,0BAA0B,IAAI,CAAC,IAAI,OAAO,MAAM,KAAK,OAAO,KAAK,EAAE;AAAA,oBAEjF;AAAA,kBACF,SAAS,aAAa;AACpB,2BAAO,MAAM,6BAA6B,IAAI,CAAC,IAAI,OAAO,MAAM,KAAK,WAAW,EAAE;AAAA,kBAEpF;AAAA,gBACF;AAGA,sBAAM,QAAQ,UAAU,KAAK;AAAA,kBAC3B,MAAM,QAAQ;AAAA,kBACd;AAAA,gBACF;AAAA,cACF;AAAA,YACF;AAEA,gBAAI,MAAM,QAAQ,MAAM,QAAQ,OAAO,GAAG;AACxC,yBAAW,eAAe,MAAM,QAAQ,SAAS;AAC/C,oBAAI,YAAY,SAAS,iBAAiB,YAAY,aAAa;AAEjE,wBAAM,gBAAgB,mBAAmB,IAAI,YAAY,WAAW;AACpE,sBAAI,eAAe;AAGjB,0BAAM,gBAAgB,MAAM,QAAQ,YAAY,OAAO,IACnD,YAAY,QAAQ,IAAI,CAAC,MAAW,EAAE,QAAQ,KAAK,EAAE,EAAE,KAAK,EAAE,IAC7D,YAAY,WAAW;AAE5B,0BAAM,cAAc,cAAc,MAAM,cAAc;AACtD,wBAAI,aAAa;AACf,4BAAM,SAAS,YAAY,CAAC;AAC5B,8BAAQ,IAAI,QAAQ;AAAA,wBAClB,SAAS,cAAc;AAAA,wBACvB,aAAa,cAAc;AAAA,wBAC3B,YAAY,cAAc;AAAA,wBAC1B,QAAQ;AAAA,wBACR,WAAW,cAAc;AAAA,sBAC3B,CAAC;AAGD,4BAAM,aAAa,MAAM,KAAK,QAAQ,OAAO,CAAC,EAAE,IAAI,QAAM;AAAA,wBACxD,SAAS,EAAE;AAAA,wBACX,QAAQ,EAAE;AAAA,wBACV,YAAY,EAAE;AAAA,sBAChB,EAAE;AACF,oCAAc,KAAK;AAAA,wBACjB,WAAW,MAAM;AAAA,wBACjB,OAAO;AAAA,sBACT,CAAC;AAED,6BAAO,MAAM,8BAA8B,MAAM,MAAM,cAAc,OAAO,EAAE;AAAA,oBAChF;AACA,uCAAmB,OAAO,YAAY,WAAW;AAAA,kBACnD;AAEA,wBAAM,WAAW,YAAY,IAAI,YAAY,WAAW;AACxD,sBAAI,UAAU;AACZ,0BAAM,WAAW,SAAS,SAAS;AAEnC,0BAAM,oBAAoB,CAAC,QAAQ,SAAS,WAAW,EAAE,SAAS,QAAQ;AAC1E,0BAAM,cAAc,aAAa;AACjC,0BAAM,iBAAiB,aAAa;AAEpC,wBAAI,kBAAkB,SAAS,SAAS,YAAY,MAAM;AACxD,4BAAM,KAAK;AAAA,wBACT,WAAW,MAAM;AAAA,wBACjB,MAAM,SAAS,SAAS,WAAW;AAAA,sBACrC,CAAC;AACD;AAAA,oBACF;AAEA,wBAAI,qBAAqB,MAAM,eAAe;AAC5C,4BAAM,yBAAyB;AAAA,wBAC7B,kBAAkB;AAAA,wBAClB,SAAS,mBAAmB,QAAQ;AAAA,wBACpC,WAAW,MAAM;AAAA,wBACjB,UAAU;AAAA,0BACR,WAAW;AAAA,0BACX,YAAY;AAAA,0BACZ,eAAe;AAAA,4BACb,UAAU,MAAM,cAAc;AAAA,4BAC9B,iBAAiB,MAAM,cAAc;AAAA,4BACrC,GAAI,aAAa,UAAU;AAAA,8BACzB,WAAW,MAAM,cAAc;AAAA,8BAC/B,WAAW,MAAM,cAAc;AAAA,4BACjC;AAAA,0BACF;AAAA,wBACF;AAAA,sBACF;AAEA,mCAAa,KAAK,sBAAsB;AAAA,oBAC1C,WAAW,eAAe,MAAM,eAAe;AAC7C,4BAAM,yBAAyB;AAAA,wBAC7B,kBAAkB;AAAA,wBAClB,SAAS,wBAAwB,SAAS,SAAS,YAAY,SAAS,OAAO;AAAA,wBAC/E,WAAW,MAAM;AAAA,wBACjB,UAAU;AAAA,0BACR,WAAW;AAAA,0BACX,YAAY;AAAA,0BACZ,eAAe;AAAA,4BACb,OAAO,MAAM,cAAc;AAAA,4BAC3B,SAAS,MAAM,cAAc;AAAA,0BAC/B;AAAA,wBACF;AAAA,sBACF;AAEA,mCAAa,KAAK,sBAAsB;AAAA,oBAC1C;AAAA,kBACF;AACA;AAAA,gBACF;AAAA,cACF;AAAA,YACF;AAEA,kBAAM,cAAc,MAAM,QAAQ,MAAM,QAAQ,OAAO,IACnD,MAAM,QAAQ,QACX,OAAO,CAAC,MAAW,EAAE,SAAS,UAAU,OAAO,MAAM,QAAQ,EAC7D,IAAI,CAAC,MAAW,EAAE,QAAQ,KAAK,EAAE,EACjC,KAAK,IAAI,EACT,KAAK,IACR,MAAM,QAAQ,WAAW;AAE7B,kBAAM,kBAAkB,gBACtB,YAAY,WAAW,gBAAgB,KACvC,YAAY,SAAS,wBAAwB,KAC7C,YAAY,SAAS,wBAAwB,KAC7C,YAAY,SAAS,mBAAmB,KACxC,YAAY,SAAS,2BAA2B,KAChD,YAAY,SAAS,0BAA0B,KAC/C,YAAY,WAAW,qFAAqF;AAG9G,gBAAI,eAAe,CAAC,iBAAiB;AACnC,2BAAa,KAAK;AAAA,gBAChB,kBAAkB;AAAA,gBAClB,SAAS;AAAA,gBACT,WAAW,MAAM;AAAA,cACnB,CAAC;AAAA,YACH;AAAA,UACF;AAEA,cAAI,MAAM,SAAS,eAAe,MAAM,SAAS,SAAS,aAAa;AACrE,kBAAM,eAAe,MAAM,QAAQ,WAAW,CAAC;AAC/C,kBAAM,YAAY,MAAM,QAAQ,YAAY,IACxC,aACG,OAAO,CAAC,SAAc,KAAK,SAAS,UAAU,KAAK,IAAI,EACvD,IAAI,CAAC,SAAc,KAAK,IAAI,IAC/B,CAAC;AAEL,gBAAI,UAAU,SAAS,GAAG;AACxB,oBAAM,kBAAkB,UAAU,KAAK,IAAI,EAAE,KAAK;AAGlD,oBAAMC,SAAQ,MAAM,QAAQ,SAAS,CAAC;AACtC,2BAAa,KAAK;AAAA,gBAChB,kBAAkB;AAAA,gBAClB,SAAS;AAAA,gBACT,WAAW,MAAM;AAAA,gBACjB,UAAU;AAAA,kBACR,cAAcA,OAAM,gBAAgB;AAAA,kBACpC,eAAeA,OAAM,iBAAiB;AAAA,kBACtC,6BAA6BA,OAAM,+BAA+B;AAAA,kBAClE,yBAAyBA,OAAM,2BAA2B;AAAA,gBAC5D;AAAA,cACF,CAAC;AAAA,YACH;AAEA,gBAAI,MAAM,QAAQ,OAAO;AACvB,yBAAW,MAAM,QAAQ,KAAK,KAAK,WAAW,MAAM,QAAQ,KAAK,KAAK,KAAK;AAE3E,kBAAI,aAAa,cAAc,MAAM,QAAQ,OAAO;AAClD;AAAA,cACF;AACA,0BAAY,MAAM,QAAQ;AAAA,YAC5B;AAEA,gBAAI,MAAM,QAAQ,YAAY,GAAG;AAC/B,yBAAW,QAAQ,cAAc;AAC/B,oBAAI,KAAK,SAAS,cAAc,KAAK,SAAS,gBAAgB;AAC5D,qCAAmB,KAAK,IAAI,KAAK,MAAM,SAAS,CAAC;AAEjD,sBAAI,KAAK,OAAO,MAAM;AACpB,0BAAM,KAAK;AAAA,sBACT,WAAW,MAAM;AAAA,sBACjB,MAAM,KAAK,MAAM;AAAA,oBACnB,CAAC;AAAA,kBACH,WAAW,iBAAiB;AAG1B,0BAAM,KAAK;AAAA,sBACT,WAAW,MAAM;AAAA,sBACjB,MAAM;AAAA,oBACR,CAAC;AAAA,kBACH;AAAA,gBACF;AAEA,oBAAI,KAAK,SAAS,cAAc,KAAK,SAAS,eAAe,KAAK,OAAO,SAAS,MAAM,QAAQ,KAAK,MAAM,KAAK,GAAG;AACjH,gCAAc,KAAK;AAAA,oBACjB,WAAW,MAAM;AAAA,oBACjB,OAAO,KAAK,MAAM;AAAA,kBACpB,CAAC;AAAA,gBACH;AAGA,oBAAI,KAAK,SAAS,cAAc,KAAK,SAAS,gBAAgB,KAAK,IAAI;AACrE,wBAAM,QAAQ,KAAK,SAAS,CAAC;AAC7B,qCAAmB,IAAI,KAAK,IAAI;AAAA,oBAC9B,SAAS,MAAM,WAAW;AAAA,oBAC1B,aAAa,MAAM,eAAe;AAAA,oBAClC,YAAY,MAAM,cAAc;AAAA,oBAChC,WAAW,MAAM;AAAA,kBACnB,CAAC;AAAA,gBACH;AAGA,oBAAI,KAAK,SAAS,cAAc,KAAK,SAAS,cAAc;AAC1D,wBAAM,QAAQ,KAAK,SAAS,CAAC;AAC7B,wBAAM,SAAS,MAAM;AACrB,sBAAI,UAAU,QAAQ,IAAI,MAAM,GAAG;AACjC,0BAAM,OAAO,QAAQ,IAAI,MAAM;AAC/B,wBAAI,MAAM,QAAQ;AAChB,2BAAK,SAAS,MAAM;AAAA,oBACtB;AACA,wBAAI,MAAM,SAAS;AACjB,2BAAK,UAAU,MAAM;AAAA,oBACvB;AACA,wBAAI,MAAM,aAAa;AACrB,2BAAK,cAAc,MAAM;AAAA,oBAC3B;AACA,wBAAI,MAAM,YAAY;AACpB,2BAAK,aAAa,MAAM;AAAA,oBAC1B;AACA,4BAAQ,IAAI,QAAQ,IAAI;AAGxB,0BAAM,aAAa,MAAM,KAAK,QAAQ,OAAO,CAAC,EAAE,IAAI,QAAM;AAAA,sBACxD,SAAS,EAAE;AAAA,sBACX,QAAQ,EAAE;AAAA,sBACV,YAAY,EAAE;AAAA,oBAChB,EAAE;AACF,kCAAc,KAAK;AAAA,sBACjB,WAAW,MAAM;AAAA,sBACjB,OAAO;AAAA,oBACT,CAAC;AAAA,kBACH;AAAA,gBACF;AAAA,cACF;AAAA,YACF;AAEA,kBAAM,eAAe,MAAM,QAAQ,YAAY,IAC3C,aAAa,OAAO,CAAC,SAAc,KAAK,SAAS,UAAU,IAC3D,CAAC;AAEL,uBAAW,eAAe,cAAc;AACtC,oBAAM,WAAW,YAAY,QAAQ;AACrC,oBAAM,YAAY,YAAY,SAAS,CAAC;AACxC,oBAAM,SAAS,YAAY;AAE3B,kBAAI,aAAa,eAAe,aAAa,gBAAgB;AAC3D;AAAA,cACF;AAEA,kBAAI,qBAA0B;AAE9B,kBAAI,CAAC,QAAQ,SAAS,WAAW,EAAE,SAAS,QAAQ,GAAG;AACrD,qCAAqB;AAAA,kBACnB,WAAW,UAAU;AAAA,gBACvB;AACA,oBAAI,aAAa,WAAW,UAAU,SAAS;AAC7C,qCAAmB,UAAU,UAAU;AAAA,gBACzC;AACA,oBAAI,aAAa,QAAQ;AACvB,qCAAmB,aAAa,UAAU;AAC1C,qCAAmB,aAAa,UAAU;AAAA,gBAC5C;AACA,oBAAI,aAAa,eAAe,UAAU,OAAO;AAC/C,qCAAmB,QAAQ,UAAU;AAAA,gBACvC;AAAA,cACF,WAAW,aAAa,UAAU,UAAU,SAAS;AACnD,qCAAqB;AAAA,kBACnB,SAAS,UAAU;AAAA,gBACrB;AAAA,cACF,WAAW,aAAa,UAAU,UAAU,SAAS;AACnD,qCAAqB;AAAA,kBACnB,SAAS,UAAU;AAAA,kBACnB,GAAI,UAAU,QAAQ,EAAE,MAAM,UAAU,KAAK;AAAA,gBAC/C;AAAA,cACF,WAAW,aAAa,UAAU,UAAU,SAAS;AACnD,qCAAqB;AAAA,kBACnB,SAAS,UAAU;AAAA,kBACnB,GAAI,UAAU,QAAQ,EAAE,MAAM,UAAU,KAAK;AAAA,gBAC/C;AAAA,cACF,WAAW,aAAa,UAAU,UAAU,WAAW;AACrD,qCAAqB;AAAA,kBACnB,WAAW,UAAU;AAAA,gBACvB;AAAA,cACF,WAAW,aAAa,eAAe,UAAU,OAAO;AACtD,qCAAqB;AAAA,kBACnB,OAAO,UAAU;AAAA,gBACnB;AAAA,cACF,OAAO;AACL,sBAAM,eAAoC,CAAC;AAE3C,oBAAI,UAAU,aAAa;AACzB,+BAAa,cAAc,UAAU,YAAY,UAAU,GAAG,GAAG;AAAA,gBACnE;AACA,oBAAI,UAAU,QAAQ;AACpB,+BAAa,SAAS,UAAU,OAAO,UAAU,GAAG,GAAG;AAAA,gBACzD;AACA,oBAAI,UAAU,SAAS;AACrB,+BAAa,UAAU,UAAU;AAAA,gBACnC;AACA,oBAAI,UAAU,OAAO;AACnB,+BAAa,QAAQ,UAAU,MAAM,UAAU,GAAG,GAAG;AAAA,gBACvD;AACA,oBAAI,UAAU,WAAW;AACvB,+BAAa,YAAY,UAAU;AAAA,gBACrC;AACA,oBAAI,UAAU,eAAe;AAC3B,+BAAa,gBAAgB,UAAU;AAAA,gBACzC;AAEA,oBAAI,SAAS,WAAW,OAAO,GAAG;AAChC,yBAAO,KAAK,SAAS,EAAE,QAAQ,SAAO;AACpC,wBAAI,aAAa,GAAG,EAAG;AAEvB,0BAAM,QAAQ,UAAU,GAAG;AAC3B,wBAAI,OAAO,UAAU,YAAY,MAAM,SAAS,KAAM;AACpD,mCAAa,GAAG,IAAI;AAAA,oBACtB,WAAW,OAAO,UAAU,YAAY,OAAO,UAAU,WAAW;AAClE,mCAAa,GAAG,IAAI;AAAA,oBACtB,WAAW,MAAM,QAAQ,KAAK,KAAK,MAAM,SAAS,IAAI;AACpD,mCAAa,GAAG,IAAI;AAAA,oBACtB;AAAA,kBACF,CAAC;AAAA,gBACH;AAEA,oBAAI,OAAO,KAAK,YAAY,EAAE,SAAS,GAAG;AACxC,uCAAqB;AAAA,gBACvB;AAAA,cACF;AAEA,oBAAM,sBAAsB;AAAA,gBAC1B,kBAAkB;AAAA,gBAClB,SAAS,SAAS,QAAQ;AAAA,gBAC1B,WAAW,MAAM;AAAA,gBACjB,UAAU;AAAA,kBACR,WAAW;AAAA,kBACX,GAAI,sBAAsB,EAAE,YAAY,mBAAmB;AAAA,kBAC3D,YAAY;AAAA,gBACd;AAAA,cACF;AAEA,2BAAa,KAAK,mBAAmB;AAErC,kBAAI,QAAQ;AACV,4BAAY,IAAI,QAAQ,mBAAmB;AAAA,cAC7C;AAAA,YACF;AAEA,kBAAM,QAAQ,MAAM,QAAQ,SAAS,CAAC;AACtC,gCAAoB,MAAM,gBAAgB;AAC1C,sCAA0B,MAAM,+BAA+B;AAC/D,oCAAwB,MAAM,2BAA2B;AACzD,iCAAqB,MAAM,iBAAiB;AAAA,UAC9C;AAEA,cAAI,MAAM,SAAS,UAAU,MAAM,eAAe,cAAc;AAC9D,kBAAM,WAAW,MAAM,aAAa,MAAM,MAAM,QAAQ;AAExD,gBAAI,aAAa,eAAe,aAAa,gBAAgB;AAC3D;AAAA,YACF;AAEA,kBAAM,eAAoC;AAAA,cACxC,WAAW;AAAA,cACX,YAAY,MAAM,cAAc;AAAA,YAClC;AAEA,gBAAI,MAAM,YAAY;AACpB,2BAAa,YAAY,IAAI,MAAM;AAAA,YACrC;AAEA,kBAAM,cAAc;AAAA,cAClB,kBAAkB;AAAA,cAClB,SAAS,SAAS,QAAQ;AAAA,cAC1B,WAAW,MAAM;AAAA,cACjB,UAAU;AAAA,YACZ;AAEA,yBAAa,KAAK,WAAW;AAE7B,gBAAI,MAAM,aAAa;AACrB,0BAAY,IAAI,MAAM,aAAa,WAAW;AAAA,YAChD;AAAA,UACF;AAAA,QACF,SAAS,WAAW;AAClB,iBAAO,KAAK,uCAAuC,SAAS;AAC5D;AAAA,QACF;AAAA,MACF;AAEA,YAAM,cAAc,KAAK,SAAS,WAAW;AAC7C,YAAM,YAAY,KAAK,4BAA4B,KAAK;AAExD,UAAI,YAAyC;AAC7C,UAAI,OAAO,KAAK,UAAU,EAAE,SAAS,GAAG;AACtC,cAAM,SAAS,OAAO,KAAK,UAAU;AACrC,cAAM,eAAe,OAAO;AAAA,UAAO,CAAC,GAAG,MACrC,WAAW,CAAC,IAAI,WAAW,CAAC,IAAI,IAAI;AAAA,QACtC;AAEA,oBAAY;AAAA,UACV;AAAA,UACA;AAAA,UACA,YAAY;AAAA,UACZ;AAAA,QACF;AAAA,MACF;AAEA,UAAI,mBAAiD;AACrD,UAAI,mBAAmB,SAAS,GAAG;AACjC,2BAAmB;AAAA,UACjB,iBAAiB;AAAA,UACjB,gBAAgB,mBAAmB;AAAA,UACnC;AAAA,QACF;AAAA,MACF;AAEA,UAAI,uBAAuB;AAC3B,UAAI,oBAAoB;AACxB,UAAI,2BAA2B;AAC/B,UAAI,4BAA4B;AAChC,UAAI,iCAAiC;AACrC,UAAI,+BAA+B;AAEnC,UAAI,iBAAiB,gBAAgB,GAAG;AACtC,cAAM,eAAe,KAAK,oBAAoB,cAAc,aAAa;AACzE,+BAAuB,aAAa;AAEpC,YAAI,qBAAqB,SAAS,KAAK,qBAAqB,CAAC,EAAE,WAAW;AACxE,8BAAoB,qBAAqB,CAAC,EAAE;AAAA,QAC9C;AAEA,mCAA2B;AAC3B,oCAA4B;AAC5B,yCAAiC;AACjC,uCAA+B;AAE/B,mBAAW,eAAe,sBAAsB;AAC9C,cAAI,YAAY,UAAU;AACxB,wCAA4B,YAAY,SAAS,gBAAgB;AACjE,yCAA6B,YAAY,SAAS,iBAAiB;AACnE,8CAAkC,YAAY,SAAS,+BAA+B;AACtF,4CAAgC,YAAY,SAAS,2BAA2B;AAAA,UAClF;AAAA,QACF;AAEA,eAAO,KAAK,oBAAoB,aAAa,eAAe,qBAAqB,MAAM,eAAe;AAAA,MACxG;AAEA,aAAO;AAAA,QACL;AAAA,QACA;AAAA,QACA;AAAA,QACA,WAAW;AAAA,QACX;AAAA,QACA;AAAA,QACA,cAAc;AAAA,QACd,kBAAkB;AAAA,QAClB,mBAAmB;AAAA,QACnB,wBAAwB;AAAA,QACxB,sBAAsB;AAAA,QACtB;AAAA,QACA;AAAA,QACA;AAAA,QACA,KAAK;AAAA,QACL,MAAM;AAAA,QACN,aAAa;AAAA,QACb;AAAA,QACA;AAAA,QACA;AAAA;AAAA,QAEA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,MACF;AAAA,IACF,SAAS,OAAO;AACd,aAAO,MAAM,oCAAoC,iBAAiB,QAAQ,MAAM,UAAU,KAAK,EAAE;AACjG,aAAO;AAAA,IACT;AAAA,EACF;AAAA,EAEA,MAAM,kBACJ,UACA,SACA,iBACA,YACA,kBACgC;AAChC,QAAI;AACF,YAAM,KAAK,MAAM,OAAO,aAAa;AAErC,YAAM,UAAU,MAAM,GAAG,SAAS,UAAU,OAAO;AACnD,YAAM,QAAQ,QAAQ,MAAM,IAAI,EAAE,OAAO,CAAC,SAAS,KAAK,KAAK,CAAC;AAE9D,UAAI,MAAM,WAAW,GAAG;AACtB,eAAO;AAAA,MACT;AAEA,YAAM,eAA2B,CAAC;AAClC,YAAM,WAAwE,CAAC;AAC/E,YAAM,cAAc,oBAAI,IAAiB;AAEzC,UAAI,cAAc;AAClB,UAAI,eAAe;AACnB,UAAI,YAAY;AAChB,UAAI,UAAU;AAEd,iBAAW,QAAQ,OAAO;AACxB,YAAI;AACF,gBAAM,QAAQ,KAAK,MAAM,IAAI;AAE7B,cAAI,CAAC,aAAa,MAAM,WAAW;AACjC,wBAAY,MAAM;AAAA,UACpB;AAEA,cAAI,MAAM,WAAW;AACnB,sBAAU,MAAM;AAAA,UAClB;AAEA,cAAI,MAAM,SAAS,UAAU,MAAM,SAAS,SAAS,QAAQ;AAC3D,gBAAI,MAAM,QAAQ,MAAM,QAAQ,OAAO,GAAG;AACxC,yBAAW,eAAe,MAAM,QAAQ,SAAS;AAC/C,oBAAI,YAAY,SAAS,iBAAiB,YAAY,aAAa;AACjE,wBAAM,WAAW,YAAY,IAAI,YAAY,WAAW;AACxD,sBAAI,UAAU;AACZ,0BAAM,WAAW,SAAS,SAAS;AAEnC,0BAAM,oBAAoB,CAAC,QAAQ,SAAS,WAAW,EAAE,SAAS,QAAQ;AAC1E,0BAAM,cAAc,aAAa;AAEjC,wBAAI,qBAAqB,MAAM,eAAe;AAC5C,4BAAM,yBAAyB;AAAA,wBAC7B,kBAAkB;AAAA,wBAClB,SAAS,mBAAmB,QAAQ;AAAA,wBACpC,WAAW,MAAM;AAAA,wBACjB,UAAU;AAAA,0BACR,WAAW;AAAA,0BACX,YAAY;AAAA,0BACZ,eAAe;AAAA,4BACb,UAAU,MAAM,cAAc;AAAA,4BAC9B,iBAAiB,MAAM,cAAc;AAAA,4BACrC,GAAI,aAAa,UAAU;AAAA,8BACzB,WAAW,MAAM,cAAc;AAAA,8BAC/B,WAAW,MAAM,cAAc;AAAA,4BACjC;AAAA,0BACF;AAAA,wBACF;AAAA,sBACF;AAEA,mCAAa,KAAK,sBAAsB;AAAA,oBAC1C,WAAW,eAAe,MAAM,eAAe;AAC7C,4BAAM,yBAAyB;AAAA,wBAC7B,kBAAkB;AAAA,wBAClB,SAAS,wBAAwB,SAAS,SAAS,YAAY,SAAS,OAAO;AAAA,wBAC/E,WAAW,MAAM;AAAA,wBACjB,UAAU;AAAA,0BACR,WAAW;AAAA,0BACX,YAAY;AAAA,0BACZ,eAAe;AAAA,4BACb,OAAO,MAAM,cAAc;AAAA,4BAC3B,SAAS,MAAM,cAAc;AAAA,0BAC/B;AAAA,wBACF;AAAA,sBACF;AAEA,mCAAa,KAAK,sBAAsB;AAAA,oBAC1C;AAAA,kBACF;AACA;AAAA,gBACF;AAAA,cACF;AAAA,YACF;AAEA,kBAAM,cAAc,MAAM,QAAQ,MAAM,QAAQ,OAAO,IACnD,MAAM,QAAQ,QACX,OAAO,CAAC,MAAW,EAAE,SAAS,UAAU,OAAO,MAAM,QAAQ,EAC7D,IAAI,CAAC,MAAW,EAAE,QAAQ,KAAK,EAAE,EACjC,KAAK,IAAI,EACT,KAAK,IACR,MAAM,QAAQ,WAAW;AAE7B,kBAAM,kBAAkB,gBACtB,YAAY,WAAW,gBAAgB,KACvC,YAAY,SAAS,wBAAwB,KAC7C,YAAY,SAAS,wBAAwB,KAC7C,YAAY,SAAS,mBAAmB,KACxC,YAAY,SAAS,2BAA2B,KAChD,YAAY,SAAS,0BAA0B;AAGjD,gBAAI,eAAe,CAAC,iBAAiB;AACnC,2BAAa,KAAK;AAAA,gBAChB,kBAAkB;AAAA,gBAClB,SAAS;AAAA,gBACT,WAAW,MAAM;AAAA,cACnB,CAAC;AAED,uBAAS,KAAK;AAAA,gBACZ,MAAM;AAAA,gBACN,SAAS;AAAA,gBACT,WAAW,MAAM;AAAA,cACnB,CAAC;AAAA,YACH;AAAA,UACF;AAEA,cAAI,MAAM,SAAS,eAAe,MAAM,SAAS,SAAS,aAAa;AACrE,kBAAM,eAAe,MAAM,QAAQ,WAAW,CAAC;AAC/C,kBAAM,YAAY,MAAM,QAAQ,YAAY,IACxC,aACG,OAAO,CAAC,SAAc,KAAK,SAAS,UAAU,KAAK,IAAI,EACvD,IAAI,CAAC,SAAc,KAAK,IAAI,IAC/B,CAAC;AAEL,gBAAI,UAAU,SAAS,GAAG;AACxB,oBAAM,kBAAkB,UAAU,KAAK,IAAI,EAAE,KAAK;AAGlD,oBAAMA,SAAQ,MAAM,QAAQ,SAAS,CAAC;AACtC,2BAAa,KAAK;AAAA,gBAChB,kBAAkB;AAAA,gBAClB,SAAS;AAAA,gBACT,WAAW,MAAM;AAAA,gBACjB,UAAU;AAAA,kBACR,cAAcA,OAAM,gBAAgB;AAAA,kBACpC,eAAeA,OAAM,iBAAiB;AAAA,kBACtC,6BAA6BA,OAAM,+BAA+B;AAAA,kBAClE,yBAAyBA,OAAM,2BAA2B;AAAA,gBAC5D;AAAA,cACF,CAAC;AAED,uBAAS,KAAK;AAAA,gBACZ,MAAM;AAAA,gBACN,SAAS;AAAA,gBACT,WAAW,MAAM;AAAA,cACnB,CAAC;AAAA,YACH;AAEA,kBAAM,eAAe,MAAM,QAAQ,YAAY,IAC3C,aAAa,OAAO,CAAC,SAAc,KAAK,SAAS,UAAU,IAC3D,CAAC;AAEL,uBAAW,eAAe,cAAc;AACtC,oBAAM,WAAW,YAAY,QAAQ;AACrC,oBAAM,YAAY,YAAY,SAAS,CAAC;AACxC,oBAAM,SAAS,YAAY;AAE3B,kBAAI,qBAA0B;AAE9B,kBAAI,CAAC,QAAQ,SAAS,WAAW,EAAE,SAAS,QAAQ,GAAG;AACrD,qCAAqB;AAAA,kBACnB,WAAW,UAAU;AAAA,gBACvB;AACA,oBAAI,aAAa,WAAW,UAAU,SAAS;AAC7C,qCAAmB,UAAU,UAAU;AAAA,gBACzC;AACA,oBAAI,aAAa,QAAQ;AACvB,qCAAmB,aAAa,UAAU;AAC1C,qCAAmB,aAAa,UAAU;AAAA,gBAC5C;AACA,oBAAI,aAAa,eAAe,UAAU,OAAO;AAC/C,qCAAmB,QAAQ,UAAU;AAAA,gBACvC;AAAA,cACF,WAAW,aAAa,UAAU,UAAU,SAAS;AACnD,qCAAqB;AAAA,kBACnB,SAAS,UAAU;AAAA,gBACrB;AAAA,cACF,WAAW,aAAa,UAAU,UAAU,SAAS;AACnD,qCAAqB;AAAA,kBACnB,SAAS,UAAU;AAAA,kBACnB,GAAI,UAAU,QAAQ,EAAE,MAAM,UAAU,KAAK;AAAA,gBAC/C;AAAA,cACF,WAAW,aAAa,UAAU,UAAU,SAAS;AACnD,qCAAqB;AAAA,kBACnB,SAAS,UAAU;AAAA,kBACnB,GAAI,UAAU,QAAQ,EAAE,MAAM,UAAU,KAAK;AAAA,gBAC/C;AAAA,cACF,WAAW,aAAa,UAAU,UAAU,WAAW;AACrD,qCAAqB;AAAA,kBACnB,WAAW,UAAU;AAAA,gBACvB;AAAA,cACF,WAAW,aAAa,eAAe,UAAU,OAAO;AACtD,qCAAqB;AAAA,kBACnB,OAAO,UAAU;AAAA,gBACnB;AAAA,cACF,OAAO;AACL,sBAAM,eAAoC,CAAC;AAE3C,oBAAI,UAAU,aAAa;AACzB,+BAAa,cAAc,UAAU,YAAY,UAAU,GAAG,GAAG;AAAA,gBACnE;AACA,oBAAI,UAAU,QAAQ;AACpB,+BAAa,SAAS,UAAU,OAAO,UAAU,GAAG,GAAG;AAAA,gBACzD;AACA,oBAAI,UAAU,SAAS;AACrB,+BAAa,UAAU,UAAU;AAAA,gBACnC;AACA,oBAAI,UAAU,OAAO;AACnB,+BAAa,QAAQ,UAAU,MAAM,UAAU,GAAG,GAAG;AAAA,gBACvD;AAEA,oBAAI,SAAS,WAAW,OAAO,GAAG;AAChC,yBAAO,KAAK,SAAS,EAAE,QAAQ,SAAO;AACpC,wBAAI,aAAa,GAAG,EAAG;AAEvB,0BAAM,QAAQ,UAAU,GAAG;AAC3B,wBAAI,OAAO,UAAU,YAAY,MAAM,SAAS,KAAM;AACpD,mCAAa,GAAG,IAAI;AAAA,oBACtB,WAAW,OAAO,UAAU,YAAY,OAAO,UAAU,WAAW;AAClE,mCAAa,GAAG,IAAI;AAAA,oBACtB,WAAW,MAAM,QAAQ,KAAK,KAAK,MAAM,SAAS,IAAI;AACpD,mCAAa,GAAG,IAAI;AAAA,oBACtB;AAAA,kBACF,CAAC;AAAA,gBACH;AAEA,oBAAI,OAAO,KAAK,YAAY,EAAE,SAAS,GAAG;AACxC,uCAAqB;AAAA,gBACvB;AAAA,cACF;AAEA,oBAAM,sBAAsB;AAAA,gBAC1B,kBAAkB;AAAA,gBAClB,SAAS,SAAS,QAAQ;AAAA,gBAC1B,WAAW,MAAM;AAAA,gBACjB,UAAU;AAAA,kBACR,WAAW;AAAA,kBACX,GAAI,sBAAsB,EAAE,YAAY,mBAAmB;AAAA,kBAC3D,YAAY;AAAA,gBACd;AAAA,cACF;AAEA,2BAAa,KAAK,mBAAmB;AAErC,kBAAI,QAAQ;AACV,4BAAY,IAAI,QAAQ,mBAAmB;AAAA,cAC7C;AAAA,YACF;AAEA,kBAAM,QAAQ,MAAM,QAAQ,SAAS,CAAC;AACtC,2BAAe,MAAM,gBAAgB;AACrC,4BAAgB,MAAM,iBAAiB;AAAA,UACzC;AAEA,cAAI,MAAM,SAAS,UAAU,MAAM,eAAe,cAAc;AAC9D,kBAAM,WAAW,MAAM,aAAa,MAAM,MAAM,QAAQ;AAExD,kBAAM,eAAoC;AAAA,cACxC,WAAW;AAAA,cACX,YAAY,MAAM,cAAc;AAAA,YAClC;AAEA,gBAAI,MAAM,YAAY;AACpB,2BAAa,YAAY,IAAI,MAAM;AAAA,YACrC;AAEA,kBAAM,cAAc;AAAA,cAClB,kBAAkB;AAAA,cAClB,SAAS,SAAS,QAAQ;AAAA,cAC1B,WAAW,MAAM;AAAA,cACjB,UAAU;AAAA,YACZ;AAEA,yBAAa,KAAK,WAAW;AAE7B,gBAAI,MAAM,aAAa;AACrB,0BAAY,IAAI,MAAM,aAAa,WAAW;AAAA,YAChD;AAAA,UACF;AAAA,QACF,SAAS,WAAW;AAClB,iBAAO,KAAK,gDAAgD,OAAO,KAAK,SAAS;AACjF;AAAA,QACF;AAAA,MACF;AAEA,YAAM,cAAc,cAAc;AAElC,aAAO,KAAK,oBAAoB,OAAO,KAAK,aAAa,MAAM,kBAAkB,SAAS,MAAM,cAAc,WAAW,SAAS;AAElI,aAAO;AAAA,QACL;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA,SAAS,WAAW;AAAA,QACpB;AAAA,QACA;AAAA,QACA;AAAA,MACF;AAAA,IACF,SAAS,OAAO;AACd,aAAO,MAAM,kCAAkC,QAAQ,KAAK,KAAK;AACjE,aAAO;AAAA,IACT;AAAA,EACF;AAAA,EAEA,MAAM,yBAAyB,aAAqB,WAA4C;AAC9F,QAAI;AACF,YAAM,KAAK,MAAM,OAAO,aAAa;AACrC,YAAM,OAAO,MAAM,OAAO,MAAM;AAGhC,YAAM,iBAAiB,YAAY,QAAQ,UAAU,GAAG,EAAE,QAAQ,MAAM,GAAG;AAC3E,YAAM,oBAAoB,KAAK,SAAK,oBAAQ,GAAG,WAAW,YAAY,cAAc;AAEpF,aAAO,KAAK,oCAAoC,iBAAiB,EAAE;AACnE,UAAI,WAAW;AACb,eAAO,KAAK,oCAAoC,SAAS,EAAE;AAAA,MAC7D;AAEA,UAAI;AACF,cAAM,QAAQ,MAAM,GAAG,QAAQ,iBAAiB;AAEhD,cAAM,aAAa,MAAM;AAAA,UAAO,CAAC,MAC/B,EAAE,SAAS,QAAQ,KAAK,CAAC,EAAE,WAAW,QAAQ;AAAA,QAChD;AAEA,eAAO,KAAK,SAAS,WAAW,MAAM,cAAc;AAEpD,YAAI,WAAW,WAAW,GAAG;AAC3B,iBAAO;AAAA,QACT;AAGA,YAAI,WAAW;AACb,qBAAW,QAAQ,YAAY;AAC7B,kBAAM,WAAW,KAAK,KAAK,mBAAmB,IAAI;AAClD,kBAAM,gBAAgB,MAAM,KAAK,sBAAsB,QAAQ;AAE/D,gBAAI,kBAAkB,WAAW;AAE/B,oBAAM,QAAQ,MAAM,GAAG,KAAK,QAAQ;AACpC,kBAAI,MAAM,OAAO,KAAO;AACtB,uBAAO,KAAK,WAAW,SAAS,oBAAoB,MAAM,IAAI,2CAA2C;AACzG;AAAA,cACF;AACA,qBAAO,KAAK,8CAA8C,SAAS,KAAK,IAAI,EAAE;AAC9E,qBAAO;AAAA,YACT;AAAA,UACF;AAGA,iBAAO,KAAK,4CAA4C,SAAS,2BAA2B;AAAA,QAC9F;AAGA,cAAM,YAAY,MAAM,QAAQ;AAAA,UAC9B,WAAW,IAAI,OAAO,SAAS;AAC7B,kBAAM,WAAW,KAAK,KAAK,mBAAmB,IAAI;AAClD,kBAAM,QAAQ,MAAM,GAAG,KAAK,QAAQ;AACpC,kBAAM,mBAAmB,MAAM,KAAK,sBAAsB,QAAQ;AAElE,mBAAO;AAAA,cACL;AAAA,cACA,MAAM;AAAA,cACN,OAAO,MAAM;AAAA,cACb,kBAAkB;AAAA,YACpB;AAAA,UACF,CAAC;AAAA,QACH;AAIA,cAAM,aAAa,UAAU,OAAO,OAAK,EAAE,qBAAqB,IAAI;AAGpE,cAAM,cAAc,WAAW,SAAS,IAAI,aAAa;AAGzD,oBAAY,KAAK,CAAC,GAAG,MAAM;AACzB,iBAAO,EAAE,MAAM,QAAQ,IAAI,EAAE,MAAM,QAAQ;AAAA,QAC7C,CAAC;AAED,cAAM,aAAa,YAAY,CAAC;AAChC,eAAO,KAAK,gBAAgB,WAAW,IAAI,EAAE;AAC7C,eAAO,WAAW;AAAA,MACpB,SAAS,OAAO;AAEd,eAAO,MAAM,wCAAwC,iBAAiB,EAAE;AACxE,eAAO;AAAA,MACT;AAAA,IACF,SAAS,OAAO;AACd,aAAO,MAAM,0CAA0C,iBAAiB,QAAQ,MAAM,UAAU,KAAK,EAAE;AACvG,aAAO;AAAA,IACT;AAAA,EACF;AAAA,EAEA,MAAM,oBAAoB,aAAwC;AAChE,QAAI;AACF,YAAM,KAAK,MAAM,OAAO,aAAa;AACrC,YAAM,OAAO,MAAM,OAAO,MAAM;AAGhC,YAAM,iBAAiB,YAAY,QAAQ,UAAU,GAAG,EAAE,QAAQ,MAAM,GAAG;AAC3E,YAAM,oBAAoB,KAAK,SAAK,oBAAQ,GAAG,WAAW,YAAY,cAAc;AAEpF,YAAM,QAAQ,MAAM,GAAG,QAAQ,iBAAiB;AAEhD,aAAO,MACJ,OAAO,CAAC,MAAM,EAAE,SAAS,QAAQ,KAAK,CAAC,EAAE,WAAW,QAAQ,CAAC,EAC7D,IAAI,CAAC,MAAM,KAAK,KAAK,mBAAmB,CAAC,CAAC;AAAA,IAC/C,SAAS,OAAO;AACd,aAAO,CAAC;AAAA,IACV;AAAA,EACF;AACF;;;ACzxCA,IAAAC,aAAyC;AACzC,IAAAC,eAA2C;AAC3C,2BAAyB;AAGlB,IAAM,kBAAN,MAAsB;AAAA,EAC3B,cAAc,aAAyC;AACrD,UAAM,cAAc,KAAK,gBAAgB,WAAW;AACpD,QAAI,CAAC,aAAa;AAChB,aAAO;AAAA,IACT;AAEA,UAAM,cAAc,KAAK,mBAAmB,WAAW;AACvD,UAAM,YAAY,KAAK,aAAa,WAAW,KAAK;AACpD,UAAM,SAAS,KAAK,aAAa,WAAW,KAAK;AAEjD,WAAO;AAAA,MACL,MAAM;AAAA,MACN,MAAM;AAAA,MACN;AAAA,MACA;AAAA,IACF;AAAA,EACF;AAAA,EAEQ,gBAAgB,WAAkC;AACxD,QAAI,cAAU,sBAAQ,SAAS;AAE/B,UAAM,aAAa;AAAA,MACjB;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,IACF;AAEA,UAAM,QAAQ,CAAC,OAAO;AACtB,QAAI,aAAS,sBAAQ,OAAO;AAC5B,WAAO,WAAW,SAAS;AACzB,YAAM,KAAK,MAAM;AACjB,gBAAU;AACV,mBAAS,sBAAQ,OAAO;AAAA,IAC1B;AAEA,eAAW,QAAQ,OAAO;AACxB,iBAAW,aAAa,YAAY;AAClC,gBAAI,2BAAW,sBAAQ,MAAM,SAAS,CAAC,GAAG;AACxC,iBAAO;AAAA,QACT;AAAA,MACF;AAAA,IACF;AAEA,WAAO;AAAA,EACT;AAAA,EAEQ,mBAAmB,aAA6B;AACtD,UAAM,sBAAkB,sBAAQ,aAAa,cAAc;AAC3D,YAAI,uBAAW,eAAe,GAAG;AAC/B,UAAI;AACF,cAAM,cAAc,KAAK,UAAM,yBAAa,iBAAiB,MAAM,CAAC;AACpE,YAAI,YAAY,MAAM;AACpB,iBAAO,YAAY;AAAA,QACrB;AAAA,MACF,SAAS,OAAO;AAAA,MAEhB;AAAA,IACF;AAEA,UAAM,oBAAgB,sBAAQ,aAAa,gBAAgB;AAC3D,YAAI,uBAAW,aAAa,GAAG;AAC7B,UAAI;AACF,cAAM,cAAU,yBAAa,eAAe,MAAM;AAClD,cAAM,YAAY,QAAQ,MAAM,6BAA6B;AAC7D,YAAI,WAAW;AACb,iBAAO,UAAU,CAAC;AAAA,QACpB;AAAA,MACF,SAAS,OAAO;AAAA,MAEhB;AAAA,IACF;AAEA,UAAM,oBAAgB,sBAAQ,aAAa,YAAY;AACvD,YAAI,uBAAW,aAAa,GAAG;AAC7B,UAAI;AACF,cAAM,cAAU,yBAAa,eAAe,MAAM;AAClD,cAAM,YAAY,QAAQ,MAAM,6BAA6B;AAC7D,YAAI,WAAW;AACb,iBAAO,UAAU,CAAC;AAAA,QACpB;AAAA,MACF,SAAS,OAAO;AAAA,MAEhB;AAAA,IACF;AAEA,UAAM,gBAAY,sBAAQ,aAAa,QAAQ;AAC/C,YAAI,uBAAW,SAAS,GAAG;AACzB,UAAI;AACF,cAAM,cAAU,yBAAa,WAAW,MAAM;AAC9C,cAAM,QAAQ,QAAQ,MAAM,IAAI;AAChC,cAAM,YAAY,MAAM,CAAC,EAAE,KAAK;AAChC,YAAI,UAAU,WAAW,SAAS,GAAG;AACnC,gBAAMC,cAAa,UAAU,UAAU,CAAC,EAAE,KAAK;AAC/C,iBAAOA,YAAW,MAAM,GAAG,EAAE,IAAI,KAAKA;AAAA,QACxC;AAAA,MACF,SAAS,OAAO;AAAA,MAEhB;AAAA,IACF;AAEA,UAAM,UAAU,KAAK,mBAAmB,WAAW;AACnD,QAAI,SAAS;AACX,aAAO;AAAA,IACT;AAEA,eAAO,uBAAS,WAAW;AAAA,EAC7B;AAAA,EAEQ,aAAa,aAAoC;AACvD,QAAI;AACF,YAAM,aAAS,+BAAS,6BAA6B;AAAA,QACnD,KAAK;AAAA,QACL,UAAU;AAAA,QACV,SAAS;AAAA,QACT,OAAO;AAAA,MACT,CAAC;AACD,aAAO,OAAO,KAAK;AAAA,IACrB,SAAS,OAAO;AACd,aAAO;AAAA,IACT;AAAA,EACF;AAAA,EAEQ,aAAa,aAAoC;AACvD,QAAI;AACF,YAAM,aAAS,+BAAS,6BAA6B;AAAA,QACnD,KAAK;AAAA,QACL,UAAU;AAAA,QACV,SAAS;AAAA,QACT,OAAO;AAAA,MACT,CAAC;AACD,aAAO,OAAO,KAAK;AAAA,IACrB,SAAS,OAAO;AACd,aAAO;AAAA,IACT;AAAA,EACF;AAAA,EAEQ,mBAAmB,aAAoC;AAC7D,UAAM,SAAS,KAAK,aAAa,WAAW;AAC5C,QAAI,CAAC,QAAQ;AACX,aAAO;AAAA,IACT;AAEA,QAAI,WAAW;AAEf,QAAI,SAAS,SAAS,MAAM,GAAG;AAC7B,iBAAW,SAAS,MAAM,GAAG,EAAE;AAAA,IACjC;AAEA,QAAI,SAAS,SAAS,GAAG,GAAG;AAC1B,aAAO,SAAS,MAAM,GAAG,EAAE,IAAI,KAAK;AAAA,IACtC;AAEA,WAAO;AAAA,EACT;AACF;;;AdrJA,IAAMC,kBAAa,2BAAc,YAAY,GAAG;AAChD,IAAMC,iBAAY,sBAAQD,WAAU;AAYpC,IAAM,iBAAa,uBAAK,oBAAQ,GAAG,aAAa;AAChD,IAAM,kBAAc,mBAAK,YAAY,aAAa;AAElD,SAAS,wBAA8B;AACrC,UAAQ;AAAA,IACN;AAAA,EACF;AACA,UAAQ,MAAM,qCAAqC;AACnD,UAAQ,MAAM,0WAA8D;AAC5E,UAAQ,MAAM,4BAA4B;AAC1C,UAAQ,MAAM,6BAA6B;AAC3C,UAAQ,MAAM,wDAAwD;AACtE,UAAQ;AAAA,IACN;AAAA,EACF;AACF;AAEA,eAAe,iBACb,QAC2D;AAC3D,QAAM,gBAAgB,IAAI,cAAc;AACxC,QAAM,SAAS,cAAc,UAAU;AAEvC,QAAM,cAAc,UAAU,OAAO,KAAK;AAC1C,MAAI,CAAC,aAAa;AAChB,0BAAsB;AACtB,WAAO;AAAA,EACT;AAEA,QAAM,SAAS,IAAI;AAAA,IACjB;AAAA,IACA,OAAO;AAAA,IACP,OAAO;AAAA,EACT;AAEA,QAAM,OAAO,MAAM,OAAO,eAAe;AACzC,MAAI,CAAC,MAAM;AACT,YAAQ;AAAA,MACN;AAAA,IACF;AACA,YAAQ,MAAM,yBAAyB;AACvC,YAAQ;AAAA,MACN;AAAA,IACF;AACA,YAAQ;AAAA,MACN;AAAA,IACF;AACA,YAAQ,MAAM,4BAA4B;AAC1C,YAAQ,MAAM,6BAA6B;AAC3C,YAAQ,MAAM,yDAAyD;AACvE,YAAQ;AAAA,MACN;AAAA,IACF;AACA,WAAO;AAAA,EACT;AAEA,SAAO,KAAK,qBAAqB,KAAK,KAAK,EAAE;AAC7C,SAAO,EAAE,QAAQ,KAAK;AACxB;AAEA,eAAe,cACb,QACA,aACA,aACqB;AACrB,QAAM,kBAAkB,IAAI,gBAAgB;AAC5C,QAAM,kBAAkB,gBAAgB,cAAc,WAAW;AAEjE,MAAI,CAAC,iBAAiB;AACpB,YAAQ,MAAM,0BAA0B;AACxC,WAAO;AAAA,EACT;AAEA,QAAM,mBAAmB,eAAe,gBAAgB;AAExD,QAAM,mBAAmB,MAAM,OAAO,YAAY;AAClD,QAAM,kBAAkB,kBAAkB;AAAA,IACxC,CAAC,MACC,EAAE,SAAS,oBAAoB,EAAE,iBAAiB;AAAA,EACtD;AAEA,MAAI,iBAAiB;AACnB,WAAO,KAAK,2BAA2B,gBAAgB,EAAE;AAAA,EAC3D,OAAO;AACL,WAAO,KAAK,iCAAiC,gBAAgB,EAAE;AAAA,EACjE;AAEA,SAAO;AAAA,IACL,MAAM;AAAA,IACN,cAAc;AAAA,IACd,aACE,iBAAiB,eACjB,qCAAqC,gBAAgB;AAAA,IACvD,YAAY,iBAAiB,cAAc,gBAAgB;AAAA,IAC3D,MAAM,gBAAgB;AAAA,IACtB,QAAQ,gBAAgB;AAAA,EAC1B;AACF;AAEA,QACG,KAAK,gBAAgB,EACrB,YAAY,uDAAuD,EACnE,QAAQ,OAAO;AAGlB,QACG,QAAQ,OAAO,EACf,YAAY,wCAAwC,EACpD,OAAO,mBAAmB,yBAAyB,EACnD,OAAO,OAAO,SAAS;AACtB,MAAI;AACF,UAAM,SAAS,KAAK;AAEpB,QAAI,CAAC,QAAQ;AACX,cAAQ;AAAA,QACN;AAAA,MACF;AACA,cAAQ,KAAK,CAAC;AAAA,IAChB;AAGA,QAAI,KAAC,uBAAW,UAAU,GAAG;AAC3B,gCAAU,YAAY,EAAE,WAAW,KAAK,CAAC;AAAA,IAC3C;AAGA,QAAI,SAAc,CAAC;AACnB,YAAI,uBAAW,WAAW,GAAG;AAC3B,UAAI;AACF,iBAAS,KAAK,UAAM,yBAAa,aAAa,OAAO,CAAC;AAAA,MACxD,QAAQ;AAAA,MAER;AAAA,IACF;AAGA,WAAO,OAAO,OAAO,QAAQ,CAAC;AAC9B,WAAO,KAAK,SAAS;AAGrB,UAAM,gBAAgB,IAAI,cAAc;AACxC,UAAM,aAAa,cAAc,UAAU;AAC3C,UAAM,SAAS,IAAI;AAAA,MACjB;AAAA,MACA,WAAW;AAAA,MACX,WAAW;AAAA,IACb;AAEA,UAAM,OAAO,MAAM,OAAO,eAAe;AACzC,QAAI,CAAC,MAAM;AACT,cAAQ;AAAA,QACN;AAAA,MACF;AACA,cAAQ,MAAM,mBAAmB;AACjC,cAAQ;AAAA,QACN;AAAA,MACF;AACA,cAAQ,MAAM,yCAAyC;AACvD,cAAQ,MAAM,wCAAwC;AACtD,cAAQ;AAAA,QACN;AAAA,MACF;AACA,cAAQ;AAAA,QACN;AAAA,MACF;AACA,cAAQ,KAAK,CAAC;AAAA,IAChB;AAIA,WAAO,iBAAiB;AAGxB,kCAAc,aAAa,KAAK,UAAU,QAAQ,MAAM,CAAC,GAAG;AAAA,MAC1D,MAAM;AAAA,IACR,CAAC;AAED,UAAM,SAAS;AAAA,MACb,SAAS;AAAA,MACT,SAAS;AAAA,MACT,OAAO,KAAK;AAAA,MACZ,YAAY;AAAA,IACd;AAEA,YAAQ,IAAI,KAAK,UAAU,QAAQ,MAAM,CAAC,CAAC;AAAA,EAC7C,SAAS,OAAO;AACd,YAAQ;AAAA,MACN;AAAA,MACA,iBAAiB,QAAQ,MAAM,UAAU,OAAO,KAAK;AAAA,IACvD;AACA,YAAQ,KAAK,CAAC;AAAA,EAChB;AACF,CAAC;AAEH,QACG,QAAQ,SAAS,EACjB,YAAY,+BAA+B,EAC3C,OAAO,wBAAwB,yCAAyC,EACxE,OAAO,wBAAwB,0CAA0C,EACzE,OAAO,2BAA2B,0CAA0C,EAC5E;AAAA,EACC;AAAA,EACA;AAAA,EACA;AACF,EACC,OAAO,mBAAmB,2CAA2C,EACrE,OAAO,yBAAyB,oCAAoC,EACpE;AAAA,EACC;AAAA,EACA;AACF,EACC,OAAO,OAAO,SAAS;AACtB,MAAI;AACF,UAAM,OAAO,MAAM,iBAAiB,KAAK,MAAM;AAC/C,QAAI,CAAC,MAAM;AACT,cAAQ,KAAK,CAAC;AAAA,IAChB;AAEA,UAAM,EAAE,QAAQ,KAAK,IAAI;AACzB,UAAM,gBAAgB,IAAI,cAAc;AACxC,UAAM,SAAS,cAAc,UAAU;AAEvC,UAAM,cAAc,KAAK,eAAe,QAAQ,IAAI;AACpD,UAAM,8BAA0B,uBAAS,WAAW;AACpD,UAAM,cAAc,KAAK,WAAW;AACpC,UAAM,cAAc;AAEpB,WAAO,KAAK,YAAY,WAAW,SAAS,WAAW,EAAE;AAEzD,UAAM,SAAS,IAAI,iBAAiB;AAAA,MAClC,aAAa;AAAA,MACb,YAAY;AAAA,IACd,CAAC;AAED,QAAI;AAEJ,QAAI,KAAK,YAAY;AACnB,mBAAa,KAAK;AAAA,IACpB,OAAO;AACL,YAAM,YAAY,MAAM,OAAO;AAAA,QAC7B;AAAA,QACA,KAAK;AAAA,MACP;AACA,UAAI,CAAC,WAAW;AACd,gBAAQ;AAAA,UACN;AAAA,QACF;AACA,gBAAQ,KAAK,CAAC;AAAA,MAChB;AACA,mBAAa;AAAA,IACf;AAEA,WAAO,KAAK,0BAA0B,UAAU,EAAE;AAElD,UAAM,cAAc,MAAM,OAAO;AAAA,MAC/B;AAAA,MACA,KAAK;AAAA,IACP;AACA,QAAI,CAAC,aAAa;AAChB,cAAQ,MAAM,wCAAwC;AACtD,cAAQ,KAAK,CAAC;AAAA,IAChB;AAGA,UAAM,cAAgC,CAAC;AACvC;AACE,YAAM,KAAK,MAAM,OAAO,aAAa;AACrC,YAAM,OAAO,MAAM,OAAO,MAAM;AAKhC,YAAM,aAAa,YAAY,OAAO;AACtC,YAAM,iBAAiB,WACpB,QAAQ,UAAU,GAAG,EACrB,QAAQ,MAAM,GAAG;AACpB,YAAM,mBAAmB,KAAK;AAAA,YAC5B,oBAAQ;AAAA,QACR;AAAA,QACA;AAAA,QACA;AAAA,MACF;AACA,YAAM,eAAe,KAAK;AAAA,QACxB;AAAA,QACA,YAAY;AAAA,QACZ;AAAA,MACF;AAEA,YAAM,2BAA2B,CAAC,cAA8B;AAC9D,YACE,CAAC,aACD,CAAC,YAAY,gBACb,YAAY,aAAa,WAAW,GACpC;AACA,iBAAO;AAAA,QACT;AAEA,cAAM,UAAU,KAAK,MAAM,SAAS;AACpC,YAAI,OAAO,MAAM,OAAO,GAAG;AACzB,iBAAO;AAAA,QACT;AAEA,YAAI,QAAQ;AACZ,iBAAS,IAAI,GAAG,IAAI,YAAY,aAAa,QAAQ,KAAK;AACxD,gBAAM,YAAY,YAAY,aAAa,CAAC,GAAG;AAC/C,cAAI,CAAC,UAAW;AAChB,gBAAM,OAAO,KAAK,MAAM,SAAS;AACjC,cAAI,OAAO,MAAM,IAAI,EAAG;AACxB,cAAI,QAAQ,SAAS;AACnB,oBAAQ;AAAA,UACV,OAAO;AACL;AAAA,UACF;AAAA,QACF;AACA,eAAO;AAAA,MACT;AAEA,UAAI;AACF,cAAM,QAAQ,MAAM,GAAG,QAAQ,YAAY;AAC3C,cAAM,aAAa,MAAM;AAAA,UACvB,CAAC,SAAS,KAAK,WAAW,QAAQ,KAAK,KAAK,SAAS,QAAQ;AAAA,QAC/D;AACA,eAAO;AAAA,UACL,mCAAmC,YAAY,KAAK,WAAW,MAAM;AAAA,QACvE;AAEA,mBAAW,QAAQ,YAAY;AAC7B,gBAAM,UAAU,KAAK,QAAQ,WAAW,EAAE,EAAE,QAAQ,YAAY,EAAE;AAClE,gBAAM,gBAAgB,KAAK,KAAK,cAAc,IAAI;AAElD,gBAAM,aAAa,MAAM,OAAO;AAAA,YAC9B;AAAA,YACA;AAAA,YACA;AAAA,YACA;AAAA,YACA;AAAA,UACF;AAEA,cAAI,YAAY;AACd,uBAAW,mBAAmB;AAAA,cAC5B,WAAW;AAAA,YACb;AACA,wBAAY,KAAK,UAAU;AAAA,UAC7B;AAAA,QACF;AAAA,MACF,QAAQ;AACN,eAAO,KAAK,mCAAmC,YAAY,EAAE;AAAA,MAC/D;AAEA,UAAI,YAAY,SAAS,GAAG;AAC1B,eAAO;AAAA,UACL,cAAc,YAAY,MAAM;AAAA,QAClC;AAAA,MACF;AAAA,IACF;AAEA,UAAM,UAAU,MAAM,cAAc,QAAQ,aAAa,WAAW;AACpE,QAAI,CAAC,SAAS;AACZ,cAAQ,MAAM,sCAAsC;AACpD,cAAQ,KAAK,CAAC;AAAA,IAChB;AAGA,QAAI,mBAAmB,YAAY;AACnC,QAAI,oBAAoB,YAAY;AACpC,eAAW,cAAc,aAAa;AACpC,0BAAoB,WAAW;AAC/B,2BAAqB,WAAW;AAAA,IAClC;AAEA,UAAM,mBACJ,KAAK,WACL,sBAAsB,IAAI,KAAK,YAAY,SAAS,EAAE,eAAe,CAAC;AAExE,UAAM,iBAAiC;AAAA,MACrC,YAAY,YAAY;AAAA,MACxB,UAAU,YAAY;AAAA,MACtB,cAAc;AAAA,MACd,cAAc;AAAA,MACd,MAAM;AAAA,MACN,WAAW;AAAA,MACX,YAAY,YAAY;AAAA,MACxB,cAAc;AAAA,MACd,eAAe;AAAA,MACf,qBAAqB,YAAY;AAAA,MACjC,mBAAmB,YAAY;AAAA,MAC/B,gBAAgB,YAAY,iBAAiB,CAAC;AAAA,MAC9C,WAAW,YAAY;AAAA,MACvB,iBAAiB,YAAY,kBAAkB,CAAC;AAAA,MAChD,cAAc;AAAA,MACd,cAAc,YAAY,gBAAgB,CAAC;AAAA,MAC3C,UAAU;AAAA,QACR,eAAe;AAAA,QACf,qBAAqB,YAAY;AAAA,QACjC,oBAAoB;AAAA,QACpB,qBAAqB;AAAA,QACrB,mBAAmB,YAAY,aAAa;AAAA,QAC5C,YAAY,YAAY;AAAA,QACxB,oBAAoB,YAAY;AAAA,QAChC,WAAW,YAAY;AAAA,QACvB,mBAAmB,YAAY;AAAA,MACjC;AAAA,IACF;AAEA,QAAI;AACJ,QAAI;AACF,eAAS,MAAM,OAAO,cAAc,cAAc;AAAA,IACpD,SAAS,aAAa;AAEpB,YAAM,aAAa,uBAAuB,WAAoB;AAC9D,UAAI,YAAY;AACd,cAAME,UAAS;AAAA,UACb,SAAS;AAAA,UACT,OAAO;AAAA,UACP,SAAS,0BAA0B,WAAW,YAAY,IAAI,WAAW,KAAK;AAAA,UAC9E,cAAc,WAAW;AAAA,UACzB,OAAO,WAAW;AAAA,UAClB,YAAY,WAAW;AAAA,QACzB;AACA,gBAAQ,IAAI,KAAK,UAAUA,SAAQ,MAAM,CAAC,CAAC;AAC3C,gBAAQ,KAAK,CAAC;AAAA,MAChB;AAGA,YAAM,kBAAkB,qBAAqB,WAAoB;AACjE,UAAI,iBAAiB;AACnB,cAAMA,UAAS;AAAA,UACb,SAAS;AAAA,UACT,OAAO;AAAA,UACP,SAAS,gBAAgB;AAAA,UACzB,eAAe;AAAA,QACjB;AACA,gBAAQ,IAAI,KAAK,UAAUA,SAAQ,MAAM,CAAC,CAAC;AAC3C,gBAAQ,KAAK,CAAC;AAAA,MAChB;AAGA,YAAM;AAAA,IACR;AAEA,QAAI,CAAC,OAAO,WAAW;AACrB,cAAQ,MAAM,iCAAiC;AAC/C,cAAQ,KAAK,CAAC;AAAA,IAChB;AAIA,QAAI,mBAAmB;AACvB,QAAI,kBAAkB,YAAY;AAClC,QAAI,YAAY,gBAAgB,CAAC,iBAAiB;AAChD,UAAI;AACF,cAAM,KAAK,MAAM,OAAO,aAAa;AACrC,cAAM,eAAW;AAAA,cACf,oBAAQ;AAAA,UACR;AAAA,UACA;AAAA,UACA,GAAG,YAAY,YAAY;AAAA,QAC7B;AACA,0BAAkB,MAAM,GAAG,SAAS,UAAU,OAAO;AAAA,MACvD,SAAS,WAAW;AAClB,eAAO;AAAA,UACL,0BAA0B,qBAAqB,QAAQ,UAAU,UAAU,OAAO,SAAS,CAAC;AAAA,QAC9F;AAAA,MACF;AAAA,IACF;AACA,QAAI,YAAY,gBAAgB,iBAAiB;AAC/C,UAAI;AACF,cAAM,aAAa,MAAM,OAAO;AAAA,UAC9B,OAAO;AAAA,UACP,YAAY;AAAA,UACZ;AAAA,QACF;AACA,YAAI,WAAW,SAAS;AACtB,iBAAO,KAAK,uBAAuB,YAAY,YAAY,KAAK;AAChE,6BAAmB;AAAA,QACrB,OAAO;AACL,iBAAO,KAAK,4BAA4B,WAAW,KAAK,EAAE;AAAA,QAC5D;AAAA,MACF,SAAS,aAAa;AACpB,eAAO;AAAA,UACL,2BAA2B,uBAAuB,QAAQ,YAAY,UAAU,OAAO,WAAW,CAAC;AAAA,QACrG;AAAA,MAEF;AAAA,IACF;AAGA,UAAM,sBAAkB,mBAAK,YAAY,mBAAmB;AAC5D,UAAM,WAAW,GAAG,eAAe,IAAI,QAAQ,GAAG;AAClD,QAAI;AAEF;AAAA,QACE;AAAA,QACA,KAAK;AAAA,UACH;AAAA,YACE,WAAW,OAAO;AAAA,YAClB;AAAA,YACA;AAAA,YACA,aAAY,oBAAI,KAAK,GAAE,YAAY;AAAA,UACrC;AAAA,UACA;AAAA,UACA;AAAA,QACF;AAAA,MACF;AAEA,iCAAW,UAAU,eAAe;AAAA,IACtC,SAAS,YAAY;AAEnB,UAAI;AACF,mCAAW,QAAQ;AAAA,MACrB,QAAQ;AAAA,MAER;AACA,aAAO,KAAK,qCAAqC,UAAU,EAAE;AAAA,IAC/D;AAMA,UAAM,SAAS;AAAA,MACb,SAAS;AAAA,MACT,WAAW,OAAO;AAAA,MAClB,YAAY,OAAO;AAAA,MACnB,sBAAsB,OAAO;AAAA,MAC7B,mBAAoB,OAAe,qBAAqB;AAAA,MACxD,uBAAwB,OAAe,yBAAyB;AAAA,MAChE;AAAA,MACA,UAAU,YAAY,gBAAgB;AAAA,MACtC;AAAA,MACA,aAAa;AAAA,MACb,oBAAgB,uBAAS,UAAU;AAAA,MACnC;AAAA,MACA;AAAA,MACA,mBAAmB,YAAY;AAAA,MAC/B,iBAAiB,YAAY;AAAA,MAC7B,iBAAiB,YAAY;AAAA,IAC/B;AAEA,YAAQ,IAAI,KAAK,UAAU,QAAQ,MAAM,CAAC,CAAC;AAAA,EAC7C,SAAS,OAAO;AACd,YAAQ;AAAA,MACN;AAAA,MACA,iBAAiB,QAAQ,MAAM,UAAU,OAAO,KAAK;AAAA,IACvD;AACA,YAAQ,KAAK,CAAC;AAAA,EAChB;AACF,CAAC;AAEH,QACG,QAAQ,YAAY,EACpB,YAAY,gDAAgD,EAC5D,OAAO,wBAAwB,yCAAyC,EACxE,OAAO,gBAAgB,yCAAyC,EAChE,OAAO,mBAAmB,2CAA2C,EACrE,OAAO,OAAO,SAAS;AACtB,MAAI;AACF,UAAM,OAAO,MAAM,iBAAiB,KAAK,MAAM;AAC/C,QAAI,CAAC,MAAM;AACT,cAAQ,KAAK,CAAC;AAAA,IAChB;AAEA,UAAM,EAAE,QAAQ,KAAK,IAAI;AACzB,UAAM,gBAAgB,IAAI,cAAc;AACxC,UAAM,SAAS,cAAc,UAAU;AAEvC,UAAM,cAAc,KAAK,QAAQ,QAAQ,IAAI;AAC7C,UAAM,8BAA0B,uBAAS,WAAW;AACpD,UAAM,cAAc,KAAK,WAAW;AAEpC,WAAO,KAAK,uCAAuC,WAAW,EAAE;AAEhE,UAAM,SAAS,IAAI,iBAAiB;AAAA,MAClC,aAAa;AAAA,MACb,YAAY;AAAA,IACd,CAAC;AAED,UAAM,kBAAkB,MAAM,OAAO,oBAAoB,WAAW;AAEpE,QAAI,gBAAgB,WAAW,GAAG;AAChC,cAAQ,MAAM,kCAAkC;AAChD,cAAQ,KAAK,CAAC;AAAA,IAChB;AAEA,WAAO,KAAK,SAAS,gBAAgB,MAAM,mBAAmB;AAG9D,QAAI,mBAAmB,gBAAgB;AACvC,QAAI,aAAa;AACjB,QAAI,eAAe;AAEnB,QAAI;AACF,YAAM,QAAQ,MAAM,OAAO,gBAAgB;AAC3C,UAAI,SAAS,MAAM,UAAU,IAAI;AAE/B,YAAI,MAAM,cAAc,GAAG;AACzB,gBAAMA,UAAS;AAAA,YACb,SAAS;AAAA,YACT,OAAO;AAAA,YACP,SAAS,0BAA0B,MAAM,YAAY,IAAI,MAAM,KAAK;AAAA,YACpE,cAAc,MAAM;AAAA,YACpB,OAAO,MAAM;AAAA,YACb,YAAY;AAAA,YACZ,YAAY,gBAAgB;AAAA,UAC9B;AACA,kBAAQ,IAAI,KAAK,UAAUA,SAAQ,MAAM,CAAC,CAAC;AAC3C,kBAAQ,KAAK,CAAC;AAAA,QAChB;AAEA,YAAI,MAAM,YAAY,gBAAgB,QAAQ;AAC5C,6BAAmB,MAAM;AACzB,yBAAe,gBAAgB,SAAS;AACxC,uBAAa;AACb,iBAAO;AAAA,YACL,iCAAiC,gBAAgB,OAAO,gBAAgB,MAAM,cAAc,MAAM,YAAY,IAAI,MAAM,KAAK;AAAA,UAC/H;AAAA,QACF;AAAA,MACF;AAAA,IACF,SAAS,YAAY;AAEnB,aAAO,KAAK,kCAAkC,UAAU,EAAE;AAAA,IAC5D;AAEA,UAAM,UAAU,MAAM,cAAc,QAAQ,aAAa,WAAW;AACpE,QAAI,CAAC,SAAS;AACZ,cAAQ,MAAM,sCAAsC;AACpD,cAAQ,KAAK,CAAC;AAAA,IAChB;AAGA,UAAM,iBAAiB,gBAAgB,MAAM,GAAG,gBAAgB;AAEhE,QAAI,eAAe;AACnB,QAAI,aAAa;AACjB,UAAM,UAKD,CAAC;AAEN,eAAW,YAAY,gBAAgB;AACrC,YAAM,eAAW,uBAAS,QAAQ;AAElC,UAAI;AACF,eAAO,KAAK,eAAe,QAAQ,EAAE;AAErC,cAAM,cAAc,MAAM,OAAO,oBAAoB,QAAQ;AAC7D,YAAI,CAAC,aAAa;AAChB;AACA,kBAAQ,KAAK;AAAA,YACX,MAAM;AAAA,YACN,SAAS;AAAA,YACT,OAAO;AAAA,UACT,CAAC;AACD;AAAA,QACF;AAEA,cAAM,cAAc,sBAAsB,IAAI,KAAK,YAAY,SAAS,EAAE,eAAe,CAAC;AAE1F,cAAM,iBAAiC;AAAA,UACrC,YAAY,YAAY;AAAA,UACxB,UAAU,YAAY;AAAA,UACtB,cAAc;AAAA,UACd,cAAc;AAAA,UACd,MAAM;AAAA,UACN,WAAW;AAAA,UACX,YAAY,YAAY;AAAA,UACxB,cAAc,YAAY;AAAA,UAC1B,eAAe,YAAY;AAAA,UAC3B,qBAAqB,YAAY;AAAA,UACjC,mBAAmB,YAAY;AAAA,UAC/B,gBAAgB,YAAY,iBAAiB,CAAC;AAAA,UAC9C,WAAW,YAAY;AAAA,UACvB,iBAAiB,YAAY,kBAAkB,CAAC;AAAA,UAChD,cAAc,YAAY,gBAAgB,CAAC;AAAA,UAC3C,UAAU;AAAA,YACR,eAAe;AAAA,YACf,qBAAqB,YAAY;AAAA,UACnC;AAAA,QACF;AAEA,cAAM,SAAS,MAAM,OAAO,cAAc,cAAc;AAExD,YAAI,OAAO,WAAW;AAEpB,cAAI,kBAAkB,YAAY;AAClC,cAAI,YAAY,gBAAgB,CAAC,iBAAiB;AAChD,gBAAI;AACF,oBAAM,KAAK,MAAM,OAAO,aAAa;AACrC,oBAAM,eAAW;AAAA,oBACf,oBAAQ;AAAA,gBACR;AAAA,gBACA;AAAA,gBACA,GAAG,YAAY,YAAY;AAAA,cAC7B;AACA,gCAAkB,MAAM,GAAG,SAAS,UAAU,OAAO;AAAA,YACvD,SAAS,WAAW;AAClB,qBAAO;AAAA,gBACL,0BAA0B,qBAAqB,QAAQ,UAAU,UAAU,OAAO,SAAS,CAAC;AAAA,cAC9F;AAAA,YACF;AAAA,UACF;AACA,cAAI,YAAY,gBAAgB,iBAAiB;AAC/C,gBAAI;AACF,oBAAM,aAAa,MAAM,OAAO;AAAA,gBAC9B,OAAO;AAAA,gBACP,YAAY;AAAA,gBACZ;AAAA,cACF;AACA,kBAAI,WAAW,SAAS;AACtB,uBAAO;AAAA,kBACL,uBAAuB,YAAY,YAAY;AAAA,gBACjD;AAAA,cACF,OAAO;AACL,uBAAO,KAAK,4BAA4B,WAAW,KAAK,EAAE;AAAA,cAC5D;AAAA,YACF,SAAS,aAAa;AACpB,qBAAO;AAAA,gBACL,2BAA2B,uBAAuB,QAAQ,YAAY,UAAU,OAAO,WAAW,CAAC;AAAA,cACrG;AAAA,YACF;AAAA,UACF;AAEA;AACA,kBAAQ,KAAK;AAAA,YACX,MAAM;AAAA,YACN,SAAS;AAAA,YACT,WAAW,OAAO;AAAA,UACpB,CAAC;AAAA,QACH,OAAO;AACL;AACA,kBAAQ,KAAK;AAAA,YACX,MAAM;AAAA,YACN,SAAS;AAAA,YACT,OAAO;AAAA,UACT,CAAC;AAAA,QACH;AAAA,MACF,SAAS,OAAO;AACd;AACA,gBAAQ,KAAK;AAAA,UACX,MAAM;AAAA,UACN,SAAS;AAAA,UACT,OAAO,iBAAiB,QAAQ,MAAM,UAAU;AAAA,QAClD,CAAC;AAAA,MACH;AAAA,IACF;AAEA,UAAM,SAAS;AAAA,MACb,SAAS,eAAe;AAAA,MACxB;AAAA,MACA,YAAY,gBAAgB;AAAA,MAC5B,gBAAgB,eAAe;AAAA,MAC/B;AAAA,MACA;AAAA,MACA;AAAA,MACA,WAAW,aACP;AAAA,QACE;AAAA,QACA,YAAY;AAAA,MACd,IACA;AAAA,MACJ;AAAA,IACF;AAEA,YAAQ,IAAI,KAAK,UAAU,QAAQ,MAAM,CAAC,CAAC;AAAA,EAC7C,SAAS,OAAO;AACd,YAAQ;AAAA,MACN;AAAA,MACA,iBAAiB,QAAQ,MAAM,UAAU,OAAO,KAAK;AAAA,IACvD;AACA,YAAQ,KAAK,CAAC;AAAA,EAChB;AACF,CAAC;AAWH,QACG,QAAQ,aAAa,EACrB,YAAY,6DAA6D,EACzE,OAAO,eAAe,wCAAwC,EAC9D,OAAO,kBAAkB,sBAAsB,EAC/C,OAAO,mBAAmB,kCAAkC,EAC5D,OAAO,OAAO,SAAS;AACtB,MAAI;AACF,UAAM,OAAO,MAAM,iBAAiB;AACpC,QAAI,CAAC,MAAM;AACT,cAAQ,KAAK,CAAC;AAAA,IAChB;AAEA,UAAM,EAAE,OAAO,IAAI;AACnB,UAAM,KAAK,MAAM,OAAO,aAAa;AACrC,UAAM,OAAO,MAAM,OAAO,MAAM;AAGhC,QAAI,SAAS,KAAK;AAClB,QAAI;AACJ,QAAI,CAAC,QAAQ;AACX,YAAM,QAAQ,MAAM,OAAO,cAAc;AACzC,UAAI,MAAM,WAAW,GAAG;AACtB,gBAAQ,MAAM,qDAAqD;AACnE,gBAAQ,KAAK,CAAC;AAAA,MAChB;AACA,eAAS,MAAM,CAAC,EAAE;AAClB,iBAAW,MAAM,CAAC,EAAE;AAAA,IACtB;AAGA,UAAM,SAAS,MAAM,OAAO;AAAA,MAC1B;AAAA,MACA,KAAK;AAAA,MACL,KAAK;AAAA,IACP;AAMA,UAAM,YAAY,KAAK,SAAK,oBAAQ,GAAG,WAAW,QAAQ;AAC1D,UAAM,GAAG,MAAM,WAAW,EAAE,WAAW,KAAK,CAAC;AAC7C,UAAM,oBAAoB,KAAK,QAAQ,SAAS;AAGhD,UAAM,gBAAY,mBAAK,YAAY,mBAAmB;AACtD,QAAI,QAA2D,CAAC;AAChE,QAAI;AACF,YAAM,YAAY,MAAM,GAAG,SAAS,WAAW,OAAO;AACtD,cAAQ,KAAK,MAAM,SAAS;AAAA,IAC9B,QAAQ;AAAA,IAER;AAGA,UAAM,eAAe,oBAAI,IAAY;AACrC,QAAI,WAAW;AACf,QAAI,eAAe;AACnB,QAAI,iBAAiB;AACrB,UAAM,aAAa,YAAY,OAAO,MAAM,GAAG,CAAC;AAGhD,eAAW,SAAS,QAAQ;AAC1B,YAAM,gBAAgB,GAAG,UAAU,IAAI,MAAM,IAAI;AAGjD,YAAM,WAAW,KAAK,KAAK,WAAW,aAAa;AACnD,YAAM,cAAc,KAAK,QAAQ,QAAQ;AACzC,UAAI,CAAC,YAAY,WAAW,oBAAoB,KAAK,GAAG,GAAG;AACzD,eAAO,KAAK,oCAAoC,aAAa,EAAE;AAC/D;AAAA,MACF;AAEA,mBAAa,IAAI,aAAa;AAG9B,YAAM,SAAS,MAAM,aAAa;AAClC,UAAI,UAAU,OAAO,YAAY,MAAM,SAAS;AAC9C;AACA;AAAA,MACF;AAGA,YAAM,eAAe,MAAM,WAAW,MAAM,OACzC,QAAQ,OAAO,GAAG,EAClB,QAAQ,MAAM,KAAK;AACtB,YAAM,cAAc;AAAA,QAClB;AAAA,QACA,SAAS,aAAa;AAAA,QACtB,iBAAiB,WAAW;AAAA,QAC5B;AAAA,QACA;AAAA,MACF,EAAE,KAAK,IAAI;AAEX,YAAM,GAAG,MAAM,UAAU,EAAE,WAAW,KAAK,CAAC;AAG5C,YAAM,mBACJ,MAAM,SAAS,OAAO,KAAK,MAAM,KAAK,EAAE,SAAS;AAEnD,UAAI,kBAAkB;AACpB,mBAAW,CAAC,UAAU,WAAW,KAAK,OAAO,QAAQ,MAAM,KAAM,GAAG;AAElE,cAAI,SAAS,SAAS,IAAI,KAAK,SAAS,WAAW,GAAG,GAAG;AACvD,mBAAO,KAAK,mCAAmC,QAAQ,EAAE;AACzD;AAAA,UACF;AAEA,gBAAM,WAAW,KAAK,KAAK,UAAU,QAAQ;AAC7C,gBAAM,mBAAmB,KAAK,QAAQ,QAAQ;AAC9C,cAAI,CAAC,iBAAiB,WAAW,cAAc,KAAK,GAAG,GAAG;AACxD,mBAAO,KAAK,sCAAsC,QAAQ,EAAE;AAC5D;AAAA,UACF;AAGA,gBAAM,UAAU,KAAK,QAAQ,QAAQ;AACrC,gBAAM,GAAG,MAAM,SAAS,EAAE,WAAW,KAAK,CAAC;AAG3C,gBAAM,UACJ,aAAa,cACb,aAAa,cACb,aAAa;AACf,gBAAM,UAAU,UAAU,cAAc,cAAc;AAEtD,gBAAM,GAAG,UAAU,UAAU,SAAS,OAAO;AAAA,QAC/C;AAAA,MACF,OAAO;AAEL,cAAM,eAAe,cAAc,MAAM;AACzC,cAAM,GAAG;AAAA,UACP,KAAK,KAAK,UAAU,UAAU;AAAA,UAC9B;AAAA,UACA;AAAA,QACF;AAAA,MACF;AAEA,YAAM,aAAa,IAAI,EAAE,SAAS,MAAM,SAAS,MAAM,MAAM,KAAK;AAElE,UAAI,QAAQ;AACV;AAAA,MACF,OAAO;AACL;AAAA,MACF;AAAA,IACF;AAGA,QAAI,eAAe;AACnB,eAAW,cAAc,OAAO,KAAK,KAAK,GAAG;AAC3C,UAAI,CAAC,aAAa,IAAI,UAAU,GAAG;AACjC,cAAM,WAAW,KAAK,KAAK,WAAW,UAAU;AAChD,cAAM,cAAc,KAAK,QAAQ,QAAQ;AACzC,YAAI,CAAC,YAAY,WAAW,oBAAoB,KAAK,GAAG,GAAG;AACzD,iBAAO,MAAM,UAAU;AACvB;AAAA,QACF;AACA,YAAI;AACF,gBAAM,GAAG,GAAG,UAAU,EAAE,WAAW,MAAM,OAAO,KAAK,CAAC;AAAA,QACxD,QAAQ;AAAA,QAER;AACA,eAAO,MAAM,UAAU;AACvB;AAAA,MACF;AAAA,IACF;AAGA,QAAI,KAAC,uBAAW,UAAU,GAAG;AAC3B,gCAAU,YAAY,EAAE,WAAW,KAAK,CAAC;AAAA,IAC3C;AACA,kCAAc,WAAW,KAAK,UAAU,OAAO,MAAM,CAAC,CAAC;AAEvD,UAAM,SAAS;AAAA,MACb,SAAS;AAAA,MACT;AAAA,MACA,cAAc,OAAO;AAAA,MACrB,KAAK;AAAA,MACL,SAAS;AAAA,MACT,WAAW;AAAA,MACX,SAAS;AAAA,MACT;AAAA,MACA,SACE,OAAO,WAAW,IACd,0CAA0C,YAAY,8BACtD,UAAU,OAAO,MAAM,YAAY,QAAQ,SAAS,YAAY,aAAa,YAAY;AAAA,IACjG;AAEA,YAAQ,IAAI,KAAK,UAAU,QAAQ,MAAM,CAAC,CAAC;AAAA,EAC7C,SAAS,OAAO;AACd,YAAQ;AAAA,MACN;AAAA,MACA,iBAAiB,QAAQ,MAAM,UAAU,OAAO,KAAK;AAAA,IACvD;AACA,YAAQ,KAAK,CAAC;AAAA,EAChB;AACF,CAAC;AAEH,QACG,QAAQ,YAAY,EACpB,YAAY,6DAA6D,EACzE,OAAO,eAAe,wCAAwC,EAC9D,OAAO,iBAAiB,0BAA0B,EAClD,OAAO,gBAAgB,8CAA8C,EACrE;AAAA,EACC;AAAA,EACA;AACF,EACC;AAAA,EACC;AAAA,EACA;AACF,EACC,OAAO,iBAAiB,sBAAsB,EAC9C,OAAO,uBAAuB,4BAA4B,EAC1D,OAAO,OAAO,SAAS;AACtB,MAAI;AACF,UAAM,OAAO,MAAM,iBAAiB;AACpC,QAAI,CAAC,MAAM;AACT,cAAQ,KAAK,CAAC;AAAA,IAChB;AAEA,UAAM,EAAE,OAAO,IAAI;AAEnB,QAAI,CAAC,KAAK,QAAQ,CAAC,KAAK,KAAK;AAC3B,cAAQ;AAAA,QACN;AAAA,MACF;AACA,cAAQ,KAAK,CAAC;AAAA,IAChB;AACA,QAAI,KAAK,QAAQ,KAAK,KAAK;AACzB,cAAQ,MAAM,8CAA8C;AAC5D,cAAQ,KAAK,CAAC;AAAA,IAChB;AAEA,QAAI,QAAQ,KAAK;AACjB,QAAI,UAAU,KAAK;AACnB,QAAI;AACJ,QAAI,WAAmC,CAAC;AAExC,QAAI,KAAK,KAAK;AAQZ,UAASC,oBAAT,SACE,MACA,KACA,KACA;AACA,mBAAW,aAAS,wBAAY,GAAG,GAAG;AACpC,gBAAM,WAAO,mBAAK,KAAK,KAAK;AAC5B,gBAAM,UAAM,uBAAS,MAAM,IAAI;AAE/B,cAAI,IAAI,SAAS,IAAI,EAAG;AACxB,kBAAI,qBAAS,IAAI,EAAE,YAAY,GAAG;AAChC,YAAAA,kBAAiB,MAAM,MAAM,GAAG;AAAA,UAClC,OAAO;AACL,gBAAI,GAAG,QAAI,yBAAa,MAAM,OAAO;AAAA,UACvC;AAAA,QACF;AAAA,MACF;AAhBS,6BAAAA;AANT,YAAM,UAAU,KAAK;AACrB,UAAI,KAAC,uBAAW,OAAO,KAAK,KAAC,qBAAS,OAAO,EAAE,YAAY,GAAG;AAC5D,gBAAQ,MAAM,WAAW,OAAO,uBAAuB;AACvD,gBAAQ,KAAK,CAAC;AAAA,MAChB;AAoBA,MAAAA,kBAAiB,SAAS,SAAS,QAAQ;AAE3C,UAAI,OAAO,KAAK,QAAQ,EAAE,WAAW,GAAG;AACtC,gBAAQ,MAAM,6BAA6B,OAAO,IAAI;AACtD,gBAAQ,KAAK,CAAC;AAAA,MAChB;AAGA,YAAM,aAAa,CAAC,YAAY,YAAY,WAAW;AACvD,YAAM,WAAW,WAAW,KAAK,CAAC,MAAM,SAAS,CAAC,CAAC;AACnD,YAAM,eAAe,WAAW,SAAS,QAAQ,IAAI;AAErD,UAAI,cAAc;AAChB,uBAAe;AACf,cAAM,UAAU,aAAa;AAAA,UAC3B;AAAA,QACF;AACA,YAAI,SAAS;AACX,gBAAM,cAAc,QAAQ,CAAC;AAC7B,yBAAe,QAAQ,CAAC,EAAE,KAAK;AAC/B,cAAI,CAAC,OAAO;AACV,kBAAM,YAAY,YAAY,MAAM,iBAAiB;AACrD,oBAAQ,YAAY,UAAU,CAAC,EAAE,KAAK,IAAI;AAAA,UAC5C;AACA,cAAI,CAAC,SAAS;AACZ,kBAAM,YAAY,YAAY,MAAM,wBAAwB;AAC5D,sBAAU,YAAY,UAAU,CAAC,EAAE,KAAK,IAAI;AAAA,UAC9C;AAAA,QACF;AAAA,MACF,OAAO;AAEL,cAAM,UAAU,OAAO,KAAK,QAAQ,EAAE;AAAA,UAAK,CAAC,MAC1C,EAAE,SAAS,KAAK;AAAA,QAClB;AACA,uBAAe,UAAU,SAAS,OAAO,IAAI;AAAA,MAC/C;AAGA,UAAI,CAAC,OAAO;AACV,oBAAQ,uBAAS,OAAO,EACrB,QAAQ,SAAS,GAAG,EACpB,QAAQ,SAAS,CAAC,MAAc,EAAE,YAAY,CAAC;AAAA,MACpD;AAAA,IACF,OAAO;AAEL,UAAI;AACJ,UAAI;AACF,sBAAU,yBAAa,KAAK,MAAM,OAAO;AAAA,MAC3C,SAAS,KAAK;AACZ,gBAAQ;AAAA,UACN,+BAA+B,KAAK,IAAI,MAAM,eAAe,QAAQ,IAAI,UAAU,OAAO,GAAG,CAAC;AAAA,QAChG;AACA,gBAAQ,KAAK,CAAC;AAAA,MAChB;AAEA,qBAAe;AAEf,YAAM,UAAU,QAAQ,MAAM,mCAAmC;AACjE,UAAI,SAAS;AACX,cAAM,cAAc,QAAQ,CAAC;AAC7B,uBAAe,QAAQ,CAAC,EAAE,KAAK;AAC/B,YAAI,CAAC,OAAO;AACV,gBAAM,YAAY,YAAY,MAAM,iBAAiB;AACrD,kBAAQ,YAAY,UAAU,CAAC,EAAE,KAAK,IAAI;AAAA,QAC5C;AACA,YAAI,CAAC,SAAS;AACZ,gBAAM,YAAY,YAAY,MAAM,wBAAwB;AAC5D,oBAAU,YAAY,UAAU,CAAC,EAAE,KAAK,IAAI;AAAA,QAC9C;AAAA,MACF;AAEA,UAAI,CAAC,OAAO;AACV,oBAAQ,uBAAS,KAAK,IAAI,EACvB,QAAQ,UAAU,EAAE,EACpB,QAAQ,SAAS,GAAG,EACpB,QAAQ,SAAS,CAAC,MAAc,EAAE,YAAY,CAAC;AAAA,MACpD;AAGA,eAAS,UAAU,IAAI;AAAA,IACzB;AAGA,QAAI,SAAS,KAAK;AAClB,QAAI,CAAC,QAAQ;AACX,YAAM,QAAQ,MAAM,OAAO,cAAc;AACzC,UAAI,MAAM,WAAW,GAAG;AACtB,gBAAQ,MAAM,qDAAqD;AACnE,gBAAQ,KAAK,CAAC;AAAA,MAChB;AACA,eAAS,MAAM,CAAC,EAAE;AAAA,IACpB;AAGA,UAAM,OAAO,KAAK,OACd,KAAK,KACF,MAAM,GAAG,EACT,IAAI,CAAC,MAAc,EAAE,KAAK,EAAE,YAAY,CAAC,EACzC,OAAO,OAAO,IACjB,CAAC;AAGL,UAAM,SAAS,MAAM,OAAO,gBAAgB;AAAA,MAC1C;AAAA,MACA;AAAA,MACA,SAAS;AAAA,MACT;AAAA,MACA,UAAU,KAAK;AAAA,MACf;AAAA,MACA,OAAO;AAAA,IACT,CAAC;AAED,UAAM,YAAY,OAAO,KAAK,QAAQ,EAAE;AACxC,UAAM,SAAS;AAAA,MACb,SAAS;AAAA,MACT,SAAS,OAAO;AAAA,MAChB,MAAM,OAAO;AAAA,MACb;AAAA,MACA;AAAA,MACA;AAAA,MACA,SAAS,wBAAwB,OAAO,IAAI,MAAM,SAAS,QAAQ,cAAc,IAAI,MAAM,EAAE;AAAA,IAC/F;AAEA,YAAQ,IAAI,KAAK,UAAU,QAAQ,MAAM,CAAC,CAAC;AAAA,EAC7C,SAAS,OAAO;AACd,YAAQ;AAAA,MACN;AAAA,MACA,iBAAiB,QAAQ,MAAM,UAAU,OAAO,KAAK;AAAA,IACvD;AACA,YAAQ,KAAK,CAAC;AAAA,EAChB;AACF,CAAC;AAGH,QACG,QAAQ,QAAQ,EAChB,YAAY,6CAA6C,EACzD,OAAO,UAAU,gBAAgB,EACjC,OAAO,OAAO,YAAY;AACzB,QAAM,eAAe;AAAA,IACnB,YAAY;AAAA,IACZ,aAAa;AAAA,IACb,kBAAkB;AAAA,IAClB,iBAAiB;AAAA,IACjB,QAAQ,CAAC;AAAA,EACX;AAEA,MAAI;AACF,UAAM,gBAAgB,IAAI,cAAc;AACxC,UAAM,SAAS,cAAc,UAAU;AAGvC,iBAAa,aAAa,cAAc,aAAa;AAErD,QAAI,CAAC,aAAa,YAAY;AAC5B,mBAAa,OAAO,KAAK,wBAAwB;AAAA,IACnD,OAAO;AAEL,UAAI;AACF,cAAM,SAAS,IAAI;AAAA,UACjB,OAAO,KAAK;AAAA,UACZ,OAAO;AAAA,UACP,OAAO;AAAA,QACT;AACA,cAAM,OAAO,MAAM,OAAO,eAAe;AAEzC,YAAI,MAAM;AACR,uBAAa,cAAc;AAC3B,uBAAa,mBAAmB;AAAA,QAClC,OAAO;AACL,uBAAa,OAAO,KAAK,2BAA2B;AAAA,QACtD;AAAA,MACF,SAAS,OAAO;AACd,qBAAa,OAAO,KAAK,2BAA2B;AAAA,MACtD;AAAA,IACF;AAGA,UAAM,aACJ,QAAQ,IAAI,0BAAsB,mBAAKF,YAAW,IAAI;AACxD,UAAM,gBAAY,mBAAK,YAAY,SAAS,YAAY;AACxD,iBAAa,sBAAkB,uBAAW,SAAS;AAEnD,QAAI,CAAC,aAAa,iBAAiB;AACjC,mBAAa,OAAO,KAAK,sBAAsB;AAAA,IACjD;AAEA,QAAI,QAAQ,MAAM;AAChB,cAAQ,IAAI,KAAK,UAAU,cAAc,MAAM,CAAC,CAAC;AAAA,IACnD,OAAO;AACL,cAAQ,IAAI,iCAAiC;AAC7C,cAAQ;AAAA,QACN,uBAAuB,aAAa,aAAa,WAAM,QAAG;AAAA,MAC5D;AACA,cAAQ;AAAA,QACN,uBAAuB,aAAa,cAAc,WAAM,QAAG;AAAA,MAC7D;AACA,cAAQ;AAAA,QACN,uBAAuB,aAAa,mBAAmB,WAAM,QAAG;AAAA,MAClE;AACA,cAAQ;AAAA,QACN,uBAAuB,aAAa,kBAAkB,WAAM,QAAG;AAAA,MACjE;AAEA,UAAI,aAAa,OAAO,SAAS,GAAG;AAClC,gBAAQ,IAAI,WAAW;AACvB,qBAAa,OAAO,QAAQ,CAAC,QAAQ,QAAQ,IAAI,OAAO,GAAG,EAAE,CAAC;AAAA,MAChE,OAAO;AACL,gBAAQ,IAAI,sBAAsB;AAAA,MACpC;AACA,cAAQ,IAAI,EAAE;AAAA,IAChB;AAAA,EACF,SAAS,OAAO;AACd,iBAAa,OAAO;AAAA,MAClB,iBAAiB,QAAQ,MAAM,UAAU;AAAA,IAC3C;AAEA,QAAI,QAAQ,MAAM;AAChB,cAAQ,IAAI,KAAK,UAAU,cAAc,MAAM,CAAC,CAAC;AAAA,IACnD,OAAO;AACL,cAAQ,MAAM,wBAAwB,KAAK;AAAA,IAC7C;AAEA,YAAQ,KAAK,CAAC;AAAA,EAChB;AACF,CAAC;AAEH,QAAQ,MAAM;",
  "names": ["exports", "CommanderError", "InvalidArgumentError", "exports", "InvalidArgumentError", "Argument", "exports", "Help", "cmd", "exports", "InvalidArgumentError", "Option", "str", "exports", "exports", "process", "Argument", "CommanderError", "Help", "Option", "Command", "option", "path", "exports", "module", "Argument", "Command", "CommanderError", "InvalidArgumentError", "Help", "Option", "Status", "exports", "LogVerbosity", "Propagate", "exports", "module", "exports", "logger", "exports", "Metadata", "exports", "resolve", "exports", "exports", "exports", "exports", "exports", "resolve", "exports", "exports", "ConnectivityState", "exports", "PickResultType", "exports", "status", "exports", "exports", "exports", "exports", "exports", "exports", "Object", "defineProperty", "value", "TreeNode", "constructor", "key", "color", "this", "_left", "undefined", "_right", "_parent", "_key", "_value", "_color", "_pre", "preNode", "isRootOrHeader", "pre", "_next", "nextNode", "_rotateLeft", "PP", "V", "R", "_rotateRight", "F", "K", "TreeNodeEnableIndex", "super", "arguments", "_subTreeSize", "parent", "_recount", "ContainerIterator", "iteratorType", "equals", "iter", "_node", "Base", "_length", "length", "size", "empty", "Container", "throwIteratorAccessError", "RangeError", "TreeContainer", "cmp", "x", "y", "enableIndex", "_root", "_cmp", "_TreeNodeClass", "_header", "_lowerBound", "curNode", "resNode", "cmpResult", "_upperBound", "_reverseLowerBound", "_reverseUpperBound", "_eraseNodeSelfBalance", "parentNode", "brother", "_eraseNode", "clear", "swapNode", "_inOrderTraversal", "param", "pos", "callback", "nodeList", "index", "stack", "push", "pop", "_insertNodeSelfBalance", "grandParent", "uncle", "GP", "_set", "hint", "minNode", "compareToMin", "maxNode", "compareToMax", "iterNode", "iterCmpRes", "preCmpRes", "_getTreeNodeByKey", "updateKeyByIterator", "node", "nextKey", "preKey", "eraseElementByPos", "eraseElementByKey", "eraseElementByIterator", "hasNoRight", "isNormal", "next", "getHeight", "traversal", "Math", "max", "TreeIterator", "header", "root", "isAccessible", "OrderedMapIterator", "container", "pointer", "self", "Proxy", "get", "target", "prop", "set", "_", "newValue", "TypeError", "copy", "OrderedMap", "forEach", "el", "setElement", "begin", "end", "rBegin", "rEnd", "front", "back", "lowerBound", "upperBound", "reverseLowerBound", "reverseUpperBound", "map", "getElementByPos", "find", "getElementByKey", "union", "other", "Symbol", "iterator", "i", "exports", "exports", "status", "exports", "metadata", "status", "exports", "status", "metadata", "_a", "_b", "_c", "credentials", "getCall", "credentials", "metadata", "status", "exports", "exports", "loadPackageDefinition", "exports", "module", "Symbol", "exports", "module", "resolve", "params", "offset", "exports", "i", "exports", "module", "exports", "module", "exports", "exports", "module", "size", "exports", "module", "util", "exports", "util", "Buffer", "i", "exports", "module", "util", "create", "exports", "module", "util", "exports", "module", "util", "create_array", "create", "buffer", "exports", "module", "util", "exports", "module", "util", "self", "err", "exports", "exports", "module", "exports", "exports", "module", "exports", "module", "inquire", "exports", "isAbsolute", "path", "normalize", "resolve", "exports", "module", "util", "define", "exports", "module", "util", "resolve", "exports", "module", "util", "resolve", "require_service", "exports", "module", "util", "exports", "module", "util", "exports", "module", "util", "field", "exports", "module", "util", "exports", "util", "exports", "exports", "module", "util", "exports", "module", "util", "self", "filename", "process", "resolved", "i", "source", "loadSync", "exports", "module", "util", "dst", "path", "value", "exports", "util", "exports", "module", "util", "resolve", "exports", "module", "util", "self", "exports", "module", "util", "resolve", "opt", "exports", "module", "util", "exports", "module", "util", "exports", "module", "loadSync", "exports", "module", "exports", "module", "util", "token", "value", "exports", "module", "exports", "module", "exports", "module", "exports", "module", "require_descriptor", "exports", "module", "exports", "module", "exports", "module", "require_type", "exports", "module", "exports", "exports", "module", "global", "exports", "IdempotencyLevel", "enumType", "loadSync", "exports", "exports", "CompressionAlgorithms", "exports", "status", "exports", "resolve", "exports", "exports", "exports", "status", "exports", "status", "metadata", "credentials", "exports", "credentials", "status", "exports", "exports", "exports", "exports", "resolve", "ReadState", "exports", "_a", "status", "exports", "status", "resolve", "_a", "_b", "exports", "exports", "global", "credentials", "status", "_a", "code", "details", "exports", "status", "credentials", "exports", "exports", "credentials", "status", "exports", "exports", "credentials", "_a", "status", "credentials", "exports", "exports", "status", "exports", "credentials", "exports", "durationRegex", "exports", "exports", "status", "_a", "resolve", "custom", "util", "credentials", "resolve", "port", "status", "_b", "_c", "exports", "status", "exports", "exports", "_a", "exports", "exports", "exports", "exports", "exports", "exports", "_a", "exports", "exports", "exports", "logger", "commander", "import_os", "import_path", "import_fs", "import_url", "util", "objectUtil", "status", "errorUtil", "errorMap", "ctx", "status", "result", "issues", "elements", "processed", "result", "status", "r", "ZodFirstPartyTypeKind", "import_path", "__dirname", "credentials", "resolve", "import_os", "usage", "import_fs", "import_path", "moduleName", "__filename", "__dirname", "output", "readDirRecursive"]
}
